<html>
<head>
<title>Setting up a Swift development environment on Raspberry Pi</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Raspberry Pi上搭建快速开发环境</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/setting-up-a-swift-development-environment-on-raspberry-pi-c7af7fceac1e?source=collection_archive---------4-----------------------#2017-02-07">https://medium.com/hackernoon/setting-up-a-swift-development-environment-on-raspberry-pi-c7af7fceac1e?source=collection_archive---------4-----------------------#2017-02-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/020b6dd3101d576eb628fd2f49ee5aba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A8YtBzAztFcFI9hLa2tP6g.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Image taken from raspberrypi.org</figcaption></figure><p id="1b03" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在我的<a class="ae ke" rel="noopener" href="/@piotr.gorzelany/the-state-of-swift-on-raspberry-pi-f23445418ee2#.4drnxi3pp">上一篇文章</a>中，我概述了Swift在Raspberry Pi平台上的现状。在这篇文章中，我将尝试强调如何建立一个愉快的开发环境来在Pi上编写Swift代码。</p><p id="4a9a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在任何Linux平台上编写Swift代码时，目前最大的痛苦之一是缺乏真正的IDE。当然，你可能讨厌Xcode，但是开始在命令行上用Nano输入你的程序，你会看到真正的痛苦是什么感觉。</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kf"><img src="../Images/413064659b2c3fd94f77881adcf15717.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7PnS86DfUtd8l5uFesqE2A.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">You get a lot of these since you do not have compiler warnings at write time</figcaption></figure><p id="e4a4" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">良好开发体验的第一步是一个好的IDE，目前最好的Swift IDE是…Xcode。</p><p id="fffe" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">什么！？但是Xcode不能在Linux上运行。我如何在Pi上安装它？嗯，你不知道，坦白地说，你不会想在Pi上写代码。这是一台很慢的电脑，用显示器和键盘运行它是不必要的。那么我在哪里写我的代码呢？当然是在你的苹果电脑上，不然还能在哪儿呢，笨蛋。</p><p id="91a4" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您需要做的第一件事是设置一个无头Pi。在<a class="ae ke" href="https://www.raspberrypi.org/forums/viewtopic.php?t=74176" rel="noopener ugc nofollow" target="_blank">树莓论坛</a>上有一个关于如何做到这一点的非常好的教程。本教程是为Raspian编写的，我推荐使用Ubuntu作为Pi，因为SPM在那里工作。我首先用键盘和显示器运行我的Pi，进行初始设置，并将其连接到我的WiFi <a class="ae ke" href="https://hackernoon.com/tagged/network" rel="noopener ugc nofollow" target="_blank">网络</a>。一旦您将Pi连接到您的路由器，您就可以从mac通过<a class="ae ke" href="https://en.wikipedia.org/wiki/Secure_Shell" rel="noopener ugc nofollow" target="_blank"> SSH </a>开始控制它。首先，您需要在网络上找到您的Pi的IP地址。我使用nmap来扫描网络中端口22 (ssh端口)上列出的设备。</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div class="fe ff kk"><img src="../Images/463ccbedd917501d6d96f93660ad02aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*3O9E36Rwqd6pw_xWPEkesw.png"/></div></figure><p id="2325" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">要找到您的Pi，您需要用本地地址空间替换192.168.6.0部分。一旦你有了它，通过ssh连接你的mac。</p><pre class="kg kh ki kj fq kl km kn ko aw kp dt"><span id="792d" class="kq kr hu km b fv ks kt l ku kv">ssh {your-pi-username}@{you-pi-ip-address}</span></pre><p id="66fc" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">就这样，天空现在是极限了。尝试在Pi上远程构建并运行您的第一个Swift脚本。</p><pre class="kg kh ki kj fq kl km kn ko aw kp dt"><span id="8e29" class="kq kr hu km b fv ks kt l ku kv">// Create the script<br/>echo "print(\"hello from swift\")" &gt;&gt; hello.swift</span><span id="6e34" class="kq kr hu km b fv kw kt l ku kv">// Run it<br/>swift hello.swift</span></pre><p id="f971" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这一切都很好，但是你还在命令行上做什么？去启动Xcode，开始一些严肃的开发吧！</p><p id="f95e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们将创建一个程序，如果您在Mac上按下return键，它将打开和关闭连接到Pi的LED。为了在两种环境之间很好地切换，我们将使用<a class="ae ke" href="https://www.raywenderlich.com/148832/introduction-swift-package-manager" rel="noopener ugc nofollow" target="_blank"> Swift包管理器</a>，它是Swift的一个与系统无关的依赖管理器。它在OS X和Linux上都运行良好，它将是一个重要的部分，使我们能够在Mac上开发代码并在Pi上运行。</p><pre class="kg kh ki kj fq kl km kn ko aw kp dt"><span id="9521" class="kq kr hu km b fv ks kt l ku kv">// create the project folder<br/>mkdir led-blink<br/>// go to the folder<br/>cd led-blink<br/>// initialize the swift project using SPM<br/>swift package init --type executable</span></pre><p id="6635" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您现在应该有了SPM生成的目录结构和main.swift文件。编辑Package.swift以包含<a class="ae ke" href="https://github.com/uraimo/SwiftyGPIO" rel="noopener ugc nofollow" target="_blank"> GPIO swift库</a>。</p><pre class="kg kh ki kj fq kl km kn ko aw kp dt"><span id="f363" class="kq kr hu km b fv ks kt l ku kv">import PackageDescription</span><span id="8faf" class="kq kr hu km b fv kw kt l ku kv">let package = Package(<br/>    name: "led-blink",<br/>    dependencies: [<br/>        .Package(url: "https://github.com/uraimo/SwiftyGPIO.git", majorVersion: 0)<br/>    ]<br/>)</span></pre><p id="c736" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在使用以下命令获取库:</p><pre class="kg kh ki kj fq kl km kn ko aw kp dt"><span id="7da9" class="kq kr hu km b fv ks kt l ku kv">swift package update</span></pre><p id="37af" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您现在可以使用SPM为您生成一个Xcode项目了！使用以下命令执行此操作:</p><pre class="kg kh ki kj fq kl km kn ko aw kp dt"><span id="23c5" class="kq kr hu km b fv ks kt l ku kv">swift package generate-xcodeproj</span></pre><p id="1a50" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">打开生成的Xcode项目并构建它(cmd+B)，这样编译器就知道SwiftyGPIO库了。瞧，你现在可以使用Xcode开发你的程序了，可以使用所有这些可爱的<a class="ae ke" href="https://hackernoon.com/tagged/tools" rel="noopener ugc nofollow" target="_blank">工具</a>，比如代码完成、语法高亮、编译器错误、文档等等。</p><p id="1804" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">打开main.swift文件并添加以下代码:</p><pre class="kg kh ki kj fq kl km kn ko aw kp dt"><span id="53ba" class="kq kr hu km b fv ks kt l ku kv">import SwiftyGPIO<br/>import Foundation</span><span id="a760" class="kq kr hu km b fv kw kt l ku kv">// Get a dictionary of all the gpio pins<br/>let gpios = SwiftyGPIO.GPIOs(for: .RaspberryPi2)</span><span id="818f" class="kq kr hu km b fv kw kt l ku kv">// Get the pin that you connected the LED to. Remember to set the right pin number, for me it was 27<br/>guard let ledGpio = gpios[GPIOName.P27] else {<br/>    fatalError("Could not initialize the gpio")<br/>}</span><span id="18ec" class="kq kr hu km b fv kw kt l ku kv">// Set the pin direction to .OUT and turn it off<br/>ledGpio.direction = .OUT<br/>ledGpio.value = 0</span><span id="a83f" class="kq kr hu km b fv kw kt l ku kv">// Read user input from keyboard and switch the LED on/off each time the user presses the return key</span><span id="99de" class="kq kr hu km b fv kw kt l ku kv">print("Press return to switch the LED on/off. To quit type exit")<br/>while let userInput = readLine(strippingNewline: true), userInput != "exit" {<br/>    print("Switching LED")<br/>    ledGpio.value = ledGpio.value == 0 ? 1 : 0<br/>}</span></pre><p id="d194" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">好了，程序完成了。剩下唯一要做的事情就是在Pi上构建并运行它。为此，您需要将您在mac上创建的项目复制到Pi。有几个解决方案可以帮助你做到这一点。首先，您可以创建一个GIT存储库并将其托管在Github上。然后，您可以从mac上推送更改，并在Pi上拉动它们。另一种选择是使用SCP来复制文件夹。</p><pre class="kg kh ki kj fq kl km kn ko aw kp dt"><span id="42a4" class="kq kr hu km b fv ks kt l ku kv">scp -r {path-to-project-folder-on-mac} {your-pi-username}@{you-pi-ip-address}:{path-to-folder-on-pi}</span></pre><p id="81a1" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">一旦您复制了项目，您就可以ssh到Pi并转到项目文件夹。文件夹中有所有的文件，但是你仍然需要使用树莓上的编译器来构建它。</p><pre class="kg kh ki kj fq kl km kn ko aw kp dt"><span id="296b" class="kq kr hu km b fv ks kt l ku kv">swift build</span></pre><p id="ddd5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">应该创建一个可执行文件，然后你可以运行，并惊叹于你的工作！这是我在行动中创造的杰作。</p><figure class="kg kh ki kj fq iv"><div class="bz el l di"><div class="kx ky l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Raspberry Pi controlled by a MacBook Pro</figcaption></figure><h2 id="61ac" class="kq kr hu bd kz la lb lc ld le lf lg lh jr li lj lk jv ll lm ln jz lo lp lq lr dt translated">结论:</h2><p id="5059" class="pw-post-body-paragraph jg jh hu ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hn dt translated">一旦你能在Mac上使用你熟悉的环境，为Pi开发就没那么痛苦了。使用这种技术，您可以使用Xcode更快地开发您的程序。</p><p id="0556" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">工作流程大致是这样的:在Mac上编写代码-&gt;复制到Pi -&gt;在Pi上构建并运行</p><p id="2d7b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这个过程可以很容易地完全自动化，但我就是没有时间去做。</p><p id="9c09" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">使用这个设置，我计划使用Xcode开发一个服务器应用程序，在p I上运行它，并用我的iPhone控制led。手指交叉。</p><div class="kg kh ki kj fq ab cb"><figure class="lx iv ly lz ma mb mc paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="lx iv ly lz ma mb mc paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="lx iv ly lz ma mb mc paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="md me mf"><p id="f922" class="jg jh mg ji b jj jk jl jm jn jo jp jq mh js jt ju mi jw jx jy mj ka kb kc kd hn dt translated"><a class="ae ke" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae ke" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae ke" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ke" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jg jh mg ji b jj jk jl jm jn jo jp jq mh js jt ju mi jw jx jy mj ka kb kc kd hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ke" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ke" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mk"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="kg kh ki kj fq iv"><div class="bz el l di"><div class="ml ky l"/></div></figure></div></div>    
</body>
</html>