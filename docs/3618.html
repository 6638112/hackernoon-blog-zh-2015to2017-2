<html>
<head>
<title>How we gave our studio WWE-style entrances using iBeacons and Sonos</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们如何使用iBeacons和Sonos为我们的工作室提供w we风格的入口</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-we-gave-our-studio-wwe-style-entrances-using-ibeacons-and-sonos-92dd2f54983?source=collection_archive---------3-----------------------#2017-04-12">https://medium.com/hackernoon/how-we-gave-our-studio-wwe-style-entrances-using-ibeacons-and-sonos-92dd2f54983?source=collection_archive---------3-----------------------#2017-04-12</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="b072" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">为了纯粹的娱乐价值而使用未来科技的技术损耗</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/d18fcc7dd2c1b7dfc7df485acd30be63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xChjDDIDbVMfqYXcXTsknQ.jpeg"/></div></div></figure><p id="746f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">你好！您来到这里的目的可能只是想亲自尝试一下源代码，并不真正关心像这样冗长的戏剧性故事。</p><p id="a063" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="kr">如果你是这些人中的一员，请随意跳转到</em><a class="ae ks" href="https://github.com/ComboStudio/CBRumblr" rel="noopener ugc nofollow" target="_blank"><strong class="jx hv"><em class="kr">CBRumblr repo</em></strong></a><em class="kr">(用于前端)和</em><a class="ae ks" href="https://github.com/ComboStudio/CBRumblrAPI" rel="noopener ugc nofollow" target="_blank"><strong class="jx hv"><em class="kr">CBRumblrAPI repo</em></strong></a><em class="kr">(用于后端)开始。我喜欢认为这两者都是证据确凿的，但是</em> <a class="ae ks" href="https://github.com/ComboStudio/CBRumblr/wiki/Setting-up-Rumblr" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv"> <em class="kr">这里有一个让你开始的指南</em> </strong> </a> <em class="kr">。</em></p></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff la"><img src="../Images/1cae14cdbde6063da1723d4303fbcd06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-gMXaZtY9WQvXZIcIQxYuA.jpeg"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">The Tea Building, Shoreditch, London. Where our story begins.</figcaption></figure><p id="1fb6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">和大多数人一样，我们的故事从茶楼的二楼开始，在靠近入口处的一张小桌子旁，我们称之为Combo HQ。</p><p id="8a70" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们的小型创业工作室<a class="ae ks" href="https://www.combostudio.co" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv"> Combo </strong> </a>，最近承担了一个相当大的项目，让我们可以花一些时间探索信标。问题是，实际上<a class="ae ks" href="https://hackernoon.com/tagged/learning" rel="noopener ugc nofollow" target="_blank">学习</a>的来龙去脉简直是一种挑战。</p><p id="010a" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们得到了来自<a class="ae ks" href="https://www.wayfindr.net" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv"> Wayfindr </strong> </a>的优秀员工的大力支持，但我们想亲自动手。</p><p id="bd5b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们想突破自己的极限。</p><p id="e20d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们想知道这些蓝牙坏男孩到底能做什么。</p></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="6e6b" class="lf lg hu bd lh li lj lk ll lm ln lo lp ja lq jb lr jd ls je lt jg lu jh lv lw dt translated">世界摔跤娱乐</h1><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/95da2f977adeba52b2105441384d991b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*C-dazbdL0VU2OyNq2qWw3g.gif"/></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">I don’t even know who this is, but he must be a pretty big deal to have all that money spent on pyrotechnics for him</figcaption></figure><p id="f351" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">还记得WWE吗？</strong></p><p id="e198" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">…老实说，我不知道。</p><p id="d3c0" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">嗯，反正不是特别好。我的“经验”完全来自玩Playstation游戏。回过头来看，我大概大部分时间都在做自己的自定义玩家和入口。</p><p id="baa3" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">随着最近殡葬承办人的退休登上头条 ，我想起了联合会。</p><p id="4607" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我手指发痒，扫视了一下工作室的地板。一盏灯塔笨拙地挂在工作室大门上。刺耳的音乐。</p><p id="5e68" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我受到了启发。</p><p id="06ba" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">是时候重温旧时光了。</p><p id="f0ff" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">是时候成为我梦寐以求的摔跤手了。</p><h1 id="24c2" class="lf lg hu bd lh li ly lk ll lm lz lo lp ja ma jb lr jd mb je lt jg mc jh lv lw dt translated">这个计划</h1><p id="73ea" class="pw-post-body-paragraph jv jw hu jx b jy md iv ka kb me iy kd ke mf kg kh ki mg kk kl km mh ko kp kq hn dt translated">我抓起笔和纸，开始疯狂地涂鸦。不到一分钟后，我对我所设想的事情将如何运作有了一个大致的概念:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mi"><img src="../Images/81628f7942b7dfdb7ad3927a605e164a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mFFK9mkRh2vomg9GN5BqLw.jpeg"/></div></div></figure><ol class=""><li id="7483" class="mj mk hu jx b jy jz kb kc ke ml ki mm km mn kq mo mp mq mr dt translated">用户(或<em class="kr">摔跤手</em>)可以使用应用程序选择他们的入场音乐。或者网页。或者某种好看的UI。</li><li id="0a95" class="mj mk hu jx b jy ms kb mt ke mu ki mv km mw kq mo mp mq mr dt translated">当用户在录音室入口的范围内时，应用程序会提示他们选择的曲目并开始播放。</li><li id="b675" class="mj mk hu jx b jy ms kb mt ke mu ki mv km mw kq mo mp mq mr dt translated">人们会回头。人们会张大嘴巴。用户可以伸缩(这是可选的)。</li></ol><p id="8c71" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">哼。似乎相当简单。</p><h1 id="3f4a" class="lf lg hu bd lh li ly lk ll lm lz lo lp ja ma jb lr jd mb je lt jg mc jh lv lw dt translated">Sonos:发现自己深陷XML有效载荷的喜悦</h1><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mx"><img src="../Images/d5ae65903b57c7feed0f208e64598057.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5lhAGnjI_d3UUOARmK8CoQ.png"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">Some seriously huge tunes in that queue.</figcaption></figure><p id="a801" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我很快就跨越了第一个障碍。我曾愚蠢地认为Sonos系统会有某种可访问的API——但事实证明我大错特错了。</p><p id="dc1c" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">尽管如此，我不会被吓倒。我启动了<strong class="jx hv"> Wireshark </strong>，一个小小的数据包嗅探显示，从Mac客户端发送的所有流量都被放在神秘的XML有效载荷中。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff my"><img src="../Images/ad2ce2cfe495a943e0c9f287e1d5b5d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pHbCVK99tRF-Mt9UvWr9YQ.png"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">Huh.</figcaption></figure><p id="30d5" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">令人欣慰的是，快速搜索在GitHub上找到了一个名为<a class="ae ks" href="https://www.npmjs.com/package/sonos" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv"> sonos </strong> </a>的优秀包，由令人愉快的<a class="ae ks" href="https://twitter.com/bencevans" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv"> Ben Evans </strong> </a>组装而成(干杯，Ben)。</p><p id="1c58" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">就这样，我克隆了我的ES6样板，启动Sublime，开始工作。</p><p id="0732" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">对图书馆文件的快速浏览帮助我把事情分解了一些:</p><ol class=""><li id="36eb" class="mj mk hu jx b jy jz kb kc ke ml ki mm km mn kq mo mp mq mr dt translated">将Spotify曲目ID从客户端传递到服务器。</li><li id="97f1" class="mj mk hu jx b jy ms kb mt ke mu ki mv km mw kq mo mp mq mr dt translated">在网络上找到Sonos实例。</li><li id="8907" class="mj mk hu jx b jy ms kb mt ke mu ki mv km mw kq mo mp mq mr dt translated">如果它可以找到一个，连接到它，并排队轨道。</li><li id="4df2" class="mj mk hu jx b jy ms kb mt ke mu ki mv km mw kq mo mp mq mr dt translated">跳到下一首曲目。</li><li id="6d50" class="mj mk hu jx b jy ms kb mt ke mu ki mv km mw kq mo mp mq mr dt translated"><strong class="jx hv">玩！</strong></li></ol><p id="b45a" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">嗯，这看起来相当简单…</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mz na l"/></div></figure><p id="9b0d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">…然而，一旦我咬紧牙关，我最终在<strong class="jx hv"> play </strong>方法上遇到了随机的500个错误，这些错误似乎来自Sonos响应本身。</p><p id="3526" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在翻查过<a class="ae ks" href="https://github.com/bencevans/node-sonos/issues/142" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv">无休无止的GitHub一期又一期</strong> </a>之后，偶尔会发出沮丧的咕哝声，我恍然大悟:</p><p id="d8b5" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这只是一个小实验。时间相当短。</p><p id="4ec6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">继续干吧。</p><p id="aad4" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我发现我可以将音轨添加到Sonos队列的<em class="kr">开始</em>处(位置1)，跳转到那个位置，然后从那里开始播放，而不是在当前正在播放的东西之后播放。</p><p id="d693" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我还发现我需要执行一个额外的步骤；<strong class="jx hv">先选择队列</strong>。如果队列不是活动的(例如，Sonos正在播放一个广播电台)，我们需要切换到队列，然后才能添加我们的入场音乐。</p><p id="607d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">哦，为了好玩，我加入了<em class="kr">另一个</em>额外步骤——在曲目开始播放前将音量调到60%。🤙</p><p id="f9e6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">稍后快速修改代码:</strong></p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mz na l"/></div></figure><p id="3803" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我设置了路线，发出了请求，然后就搞定了。</p><p id="0ec7" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><a class="ae ks" href="https://www.youtube.com/watch?v=9jK-NcRmVcw" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv">最后的倒计时</strong> </a>在一个寒冷的周四下午，在茶馆的二楼胜利地响起。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/20cb838b41f8e976aba6de85be201be2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*bYn-32aKbX-AD7eO5SDrtA.gif"/></div></figure><p id="4e58" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我胜利地举起双手，扫视了一下这一小群满脸不满的人，他们正伸手去拿耳机，并把它塞进耳垂里。</p><p id="8da7" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我决定将未来的胜利严格保密。</p><h1 id="7e3e" class="lf lg hu bd lh li ly lk ll lm lz lo lp ja ma jb lr jd mb je lt jg mc jh lv lw dt translated">灯塔</h1><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff la"><img src="../Images/a4b79f6c5a32fa7c1ee74e71f0fe4d65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hBWBubpUwPxPb824UZp6MA.jpeg"/></div></div></figure><p id="82a0" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">对于这个项目的客户端，我认为一个iOS应用程序最适合这个项目。</p><p id="42be" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">为什么？</p><p id="a76f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">嗯，Swift是我们的面包和黄油，我们热衷于创建一个类，它可以被抽象并用于未来使用信标的应用程序。</p></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><p id="6f42" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">首先，我拿了一包信标。我选择了蓝猫乐队，主要是因为阿克塞尔在《寻路者》<a class="ae ks" href="http://www.wayfindr.net" rel="noopener ugc nofollow" target="_blank"><strong class="jx hv"/></a>对他们大加赞赏，但也因为他们有杀手级的支持。(为了支持这一点，他们实际上把设备亲手送到了工作室，并亲自进行了演示，这太不可思议了)。</p><p id="a493" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv"> <em class="kr">趣闻:</em> </strong> <em class="kr">我买了这些之后发现</em> <a class="ae ks" href="http://blog.passkit.com/configure-iphone-ibeacon-transmitter/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv"> <em class="kr">我其实可以用另一部iPhone当“灯塔”</em> </strong> </a> <em class="kr">。诅咒我冲动的“加入篮子”扳机指。</em></p><p id="be54" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">买了信标，准备好服务器终端，我再次拿起我的鲜红色笔记本，开始为应用程序草拟一个粗略的行动计划。</p><ol class=""><li id="6af3" class="mj mk hu jx b jy jz kb kc ke ml ki mm km mn kq mo mp mq mr dt translated">用户(摔跤手)启动应用程序</li><li id="32bc" class="mj mk hu jx b jy ms kb mt ke mu ki mv km mw kq mo mp mq mr dt translated">注册预编程信标</li><li id="0a73" class="mj mk hu jx b jy ms kb mt ke mu ki mv km mw kq mo mp mq mr dt translated">选择一首歌曲</li><li id="92f1" class="mj mk hu jx b jy ms kb mt ke mu ki mv km mw kq mo mp mq mr dt translated">关闭应用程序</li><li id="45d5" class="mj mk hu jx b jy ms kb mt ke mu ki mv km mw kq mo mp mq mr dt translated">用户(摔跤手)将手机放在口袋里</li><li id="a557" class="mj mk hu jx b jy ms kb mt ke mu ki mv km mw kq mo mp mq mr dt translated">走近门</li><li id="2fbe" class="mj mk hu jx b jy ms kb mt ke mu ki mv km mw kq mo mp mq mr dt translated"><strong class="jx hv">用户(摔跤手)获得他们应得的WWE风格入口</strong></li></ol><p id="a51f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">根据我对信标的了解，这感觉很合理。</p><h1 id="a048" class="lf lg hu bd lh li ly lk ll lm lz lo lp ja ma jb lr jd mb je lt jg mc jh lv lw dt translated">在这种情况下，iBeacon API最终不如预期的合理</h1><p id="430e" class="pw-post-body-paragraph jv jw hu jx b jy md iv ka kb me iy kd ke mf kg kh ki mg kk kl km mh ko kp kq hn dt translated">事实证明，iBeacon API给了你很大的自由来处理信标——但是我做了一个<em class="kr">噩梦</em>来浏览它们的文档。</p><p id="fd57" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">对我来说，这份拷贝给人的感觉过于专业，甚至连一个简单的例子都很费力。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff la"><img src="../Images/1ae1766b66fcd271971e0b67c8bdc1ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RvU4-Bz0BVXc8b7RMOLLCw.jpeg"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">With overwhelming documentation, not even my strategic beacon placement could save me now.</figcaption></figure><p id="79ba" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">尽管如此，我还是挺过来了。</p><p id="08e8" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我学到了很多东西，我不想在这篇文章中过多地谈论信标——所以如果你热衷于听我的学习，我已经在信标和iOS <a class="ae ks" rel="noopener" href="/@Sam_Piggott/hacking-with-ibeacons-what-i-wish-id-known-475968f790f7"> <strong class="jx hv">上写了我所有的想法，就在这里</strong> </a>。</p><p id="e8ba" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">不幸的是，另一个路障。</p><p id="2e8d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这一次，我意识到在后台触发服务器可能比我想象的要复杂。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff nb"><img src="../Images/279cf314a6c921d98cdcf89564f4a5ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*WpDm2RXxcNN-WsutPoE3WA.gif"/></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">mfw making this discovery</figcaption></figure><p id="f102" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">虽然我可以在<strong class="jx hv">dideterminestate</strong>委托方法<em class="kr">(当在后台发现信标时触发)</em>中成功地发出一个URL请求，但我想只在我们就在门旁边时触发它，并测量信号强度(正如我一分钟前提到的大信标分解中所列举的那样)，您需要<em class="kr">测距</em>，而不是监视信标。</p><p id="c5b3" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">当然，要做到这一点，应用程序需要在前台。因此，我最终决定在前台进行信标扫描。</p><p id="6d76" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">没什么大不了的。</p><p id="0bc3" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">感觉流程在技术上非常合理，是时候把一些设计放在一起了。我在大约5分钟内匆匆画了些草图…</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nc"><img src="../Images/56482605024eb263ab488077d1f0ff09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*17cRpjUzsum8UXl_xfrp3w.png"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">Whilst we’re here, if you’ve not listened to this RX Bandits tune, <a class="ae ks" href="https://www.youtube.com/watch?v=Mq0j2Ot1NHo" rel="noopener ugc nofollow" target="_blank">you absolutely owe it to yourself to give it a try.</a></figcaption></figure><p id="d8b3" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">…然后得出结论说它看起来很可怕。</p><p id="671b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">而是招了<a class="ae ks" href="http://www.twitter.com/curtis_free" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv">柯蒂斯</strong> </a>的专家设计技能来替我拼凑。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nd"><img src="../Images/22a2b131d35947cdc76b2cb2e78725c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X-N0ffD6RqjhLoj2hPniqg.png"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">That gradient, tho.</figcaption></figure><p id="6c1a" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">啊。<em class="kr">好多了。</em></p><p id="0499" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">设计完成后，我将上面提到的逻辑整合到抽象的控制器中，深入研究了VFL和UIView.animate()，让应用看起来焕然一新。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff ne"><img src="../Images/635ed274460c04b0ea0b8d6603738571.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/1*vNhy_dcrjCMQvAA3JRYT9A.gif"/></div><figcaption class="lb lc fg fe ff ld le bd b be z ek"><em class="nf">That transition tho.</em></figcaption></figure><h1 id="5b89" class="lf lg hu bd lh li ly lk ll lm lz lo lp ja ma jb lr jd mb je lt jg mc jh lv lw dt translated">Spotify集成</h1><p id="dd06" class="pw-post-body-paragraph jv jw hu jx b jy md iv ka kb me iy kd ke mf kg kh ki mg kk kl km mh ko kp kq hn dt translated">信标被分类。服务器已排序；我们就快到了。</p><p id="e0c8" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我唯一没有解决的难题实际上是获取歌曲id，我将把这些歌曲id推送到Sonos。</p><p id="fa85" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">值得庆幸的是，Spotify的Web API使用起来绝对轻而易举，为了保持整洁，我想我会在服务器端完成所有Spotify解析和重新建模，以从交付给设备的有效负载中剔除脂肪。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mz na l"/></div></figure><h1 id="f7fe" class="lf lg hu bd lh li ly lk ll lm lz lo lp ja ma jb lr jd mb je lt jg mc jh lv lw dt translated">就这样…</h1><p id="d82f" class="pw-post-body-paragraph jv jw hu jx b jy md iv ka kb me iy kd ke mf kg kh ki mg kk kl km mh ko kp kq hn dt translated">我将npm运行产品推入终端。</p><p id="c0fd" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我在Xcode上点击了<strong class="jx hv"> Command+R </strong>。我饱受战争摧残的iPhone 6焕发了生机，启动了闪闪发光的“rumb lr”iOS应用程序。</p><p id="888c" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们的第一位测试者，尊敬的Marco Martignone选择了AC/DC的《黑色归来》作为他的开场音乐。</p><p id="8833" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">当我们等待的时候，他从二楼的门消失了，我们的呼吸受到了诱惑…而且，嗯…</p><p id="81c0" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">…只能说这个小片段比我能更好地讲述了这个故事。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ni na l"/></div></figure><h1 id="84de" class="lf lg hu bd lh li ly lk ll lm lz lo lp ja ma jb lr jd mb je lt jg mc jh lv lw dt translated">结束语</h1><p id="dde8" class="pw-post-body-paragraph jv jw hu jx b jy md iv ka kb me iy kd ke mf kg kh ki mg kk kl km mh ko kp kq hn dt translated">信标是<strong class="jx hv"> <em class="kr">辉煌好玩的</em> </strong>。</p><p id="6ef6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">是的，它们非常适合这样的玩具——但是真正让我们兴奋的是它的潜力。信标可以(也应该！)用在不可思议的情况下造福他人(就像前面提到的<a class="ae ks" href="http://www.wayfindr.net" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv"> Wayfindr </strong> </a>)。</p><p id="2c99" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">最后，将源代码“公开”对我们来说也是一件大事。</p><p id="acd9" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果没有我们在GitHub上发现的一些开源repos的惊人帮助，我们所取得的许多知识都是不可能的，因此我们非常高兴通过在我们的GitHub上开源<a class="ae ks" href="https://github.com/ComboStudio/CBRumblr" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv">前端</strong> </a>和<a class="ae ks" href="https://github.com/ComboStudio/CBRumblrAPI" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv">后端</strong> </a>源代码来增加这些知识。</p><p id="5758" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">有了这个，我们希望通过加入我们在这个愚蠢的小项目中的学习，我们可以帮助将指针向前移动一点，看看灯塔的未来会是什么样子。</p><p id="5c6d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">最重要的是，我们正在努力抽象我们从将这个小产品放入一个包装类中获得的知识，以使导航信标监控和测距的复杂水域变得更加容易。</p><p id="69c2" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">开源并不是我们之前在Combo做过的事情，但它很令人兴奋——只要它能在某个地方帮助某个人；我们也渴望继续做下去。</p><p id="e1d2" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们也喜欢认为我们所做的可能会让某个沉闷的办公室里的某个人脸上露出笑容——所以请给我发一封电子邮件，告诉我们你是否已经使用了这个方法，并且从中得到了一些乐趣，地址是<a class="ae ks" href="mailto:sam@combostudio.co" rel="noopener ugc nofollow" target="_blank"><strong class="jx hv">sam@combostudio.co</strong></a><strong class="jx hv">。</strong></p><div class="jk jl jm jn fq ab cb"><figure class="nj jo nk nl nm nn no paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="nj jo nk nl nm nn no paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="nj jo nk nl nm nn no paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="np nq nr"><p id="f922" class="jv jw kr jx b jy jz iv ka kb kc iy kd ns kf kg kh nt kj kk kl nu kn ko kp kq hn dt translated"><a class="ae ks" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是这个家庭的一员。我们现在<a class="ae ks" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ks" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jv jw kr jx b jy jz iv ka kb kc iy kd ns kf kg kh nt kj kk kl nu kn ko kp kq hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ks" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ks" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nv"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nw na l"/></div></figure></div></div>    
</body>
</html>