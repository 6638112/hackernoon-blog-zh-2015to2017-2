<html>
<head>
<title>The Art of Pull Requests</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">拉取请求的艺术</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/the-art-of-pull-requests-6f0f099850f9?source=collection_archive---------2-----------------------#2017-09-10">https://medium.com/hackernoon/the-art-of-pull-requests-6f0f099850f9?source=collection_archive---------2-----------------------#2017-09-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/7cc23754f8cf617559f29e5ccaab15ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KlreYtsrnlfVdAfyjZjNgw.jpeg"/></div></div></figure><div class=""/><p id="7738" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">正如我之前写的那样，我们的团队成员分散在世界各地。这意味着代码审查和<a class="ae ka" href="https://hackernoon.com/tagged/pull-requests" rel="noopener ugc nofollow" target="_blank">拉请求</a>必须远程完成。</p><p id="e7bf" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最近，我们<a class="ae ka" href="https://twitter.com/_west_on" rel="noopener ugc nofollow" target="_blank">团队的一名成员</a>提出了这个宣言:</p><blockquote class="kb"><p id="c2c5" class="kc kd if bd ke kf kg kh ki kj kk jz ek translated"><em class="kl">作为公关写手，我会:</em></p><p id="23b2" class="kc kd if bd ke kf kg kh ki kj kk jz ek translated">-保持PRs较小</p><p id="4fcf" class="kc kd if bd ke kf kg kh ki kj kk jz ek translated">-使用标签表明公关是许多部分中的一部分</p><p id="e5dd" class="kc kd if bd ke kf kg kh ki kj kk jz ek translated">-打开时，将钻杆排放系统置于松弛状态</p><p id="0803" class="kc kd if bd ke kf kg kh ki kj kk jz ek translated"><em class="kl">作为公关评审，我将:</em></p><p id="2b8c" class="kc kd if bd ke kf kg kh ki kj kk jz ek translated">-我一有空就努力复习。</p><p id="dafb" class="kc kd if bd ke kf kg kh ki kj kk jz ek translated">-批准，只要比以前好</p><p id="c001" class="kc kd if bd ke kf kg kh ki kj kk jz ek translated">-更喜欢开一张新罚单或要求跟进PR，这样比拒绝PR更好</p><p id="ab71" class="kc kd if bd ke kf kg kh ki kj kk jz ek translated">-倾向于建议而不是拒绝，尤其是当标签显示有多个部分时</p></blockquote><p id="ca5d" class="pw-post-body-paragraph jc jd if je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz hn dt translated">让我们看看这个。本质是:<strong class="je ig">拉请求需要小而快！</strong></p><p id="47b6" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这也符合<a class="ae ka" href="http://blog.cleancoder.com/uncle-bob/2015/11/18/TheProgrammersOath.html" rel="noopener ugc nofollow" target="_blank">程序员的誓言</a>:</p><blockquote class="kb"><p id="54e4" class="kc kd if bd ke kf kg kh ki kj kk jz ek translated">我会频繁地发布小消息，以免妨碍他人的进步。</p></blockquote><p id="488b" class="pw-post-body-paragraph jc jd if je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz hn dt translated">但是众所周知，拉式请求的问题通常是它们会被搁置一段时间。</p><h2 id="b5a6" class="kr ks if bd kt ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll dt translated">请求越大，审查时间越长</h2><p id="6734" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">我们希望尽可能接近一种头部开发方法，在这种方法中，代码可以很容易地进入主/开发。我们的目标应该是一个连续的好代码流。<br/>我们需要对抗长寿特征分支，因为它们是万恶之源！</p><figure class="lt lu lv lw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ls"><img src="../Images/86a7308801c838e8452b1f1b4b61dab7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*H1oFzCkF0Qo3RCku.png"/></div></div></figure><p id="fbc9" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">因此，拉请求需要能够被快速审查，以便快速合并代码。<br/>但是这只适用于小的拉取请求！你不会在大型公关上获得好评，而且需要很长时间才能合并。正因为如此，一些公司对每个PR的行数有限制。一般来说，它们的长度应该少于300行，否则它们将不再可审查。</p><figure class="lt lu lv lw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lx"><img src="../Images/7178fe63843faee99dc711a4ea135087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hMIZJvQxEDOK0H1k.png"/></div></div></figure><h2 id="ffcd" class="kr ks if bd kt ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll dt translated">PR越长，审阅者就越累</h2><p id="5bb1" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">如果复习很累，开发者就不会想复习了。但是我们需要团队尽可能经常地审查代码，所以不要让他们为难！</p><h2 id="909e" class="kr ks if bd kt ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll dt translated">给出上下文</h2><p id="49d6" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">让审阅者容易理解您的更改。他们可能不会像你一样熟悉你正在做的事情。补充一个<a class="ae ka" href="https://hackernoon.com/no-description-provided-8d9e0f3a3abb" rel="noopener ugc nofollow" target="_blank">好的描述和一些截图</a>:</p><figure class="lt lu lv lw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ly"><img src="../Images/41fb5f10884b700650f1a9b32bfb9615.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*m1nk8pj1XtuU3ect.png"/></div></div></figure><h2 id="9869" class="kr ks if bd kt ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll dt translated">防止上下文切换</h2><p id="e312" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">越早收到评审意见，开发人员就越不可能已经开始下一项工作，并且不得不将上下文切换回上一项工作。花费的时间越长，就越难将上下文切换回来并做出改变。因此，让你的拉取请求越少越好，并尽可能频繁地创建它们:至少一天一个！或者更频繁！<br/> <strong class="je ig">如果你这样做的话，重定基数问题将变得非常罕见。</strong></p><h1 id="ea8e" class="lz ks if bd kt ma mb mc kx md me mf lb mg mh mi le mj mk ml lh mm mn mo lk mp dt translated">评论者也需要帮助</h1><p id="5ae9" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">如果您每天只审查一次拉请求，那么每天打开多个请求的想法对您的团队来说是不可行的。所以要经常复习！在每次休息之后，在你开始一张新票之前，在每个<a class="ae ka" href="https://en.wikipedia.org/wiki/Pomodoro_Technique" rel="noopener ugc nofollow" target="_blank">番茄周期</a>之后，或者每次你自己打开一个拉动请求。<br/>我们的团队引入了类似于看板中<a class="ae ka" href="http://kanbantool.com/kanban-wip-limits" rel="noopener ugc nofollow" target="_blank"> WIP限制的未完成拉动式请求上限。任何人都不允许打开一个拉请求，如果达到限制，首先审查其他人清理队列！</a></p><h2 id="e292" class="kr ks if bd kt ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll dt translated">专注于重要的事情</h2><p id="c262" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">所有的代码风格都应该首先通过一些自动化的任务来检查——这不是人类的任务。CI应该有助于处理大量的代码检查(静态分析:反模式、复杂性、潜在的内存泄漏),评审可以很容易地集中在逻辑和架构上。</p><h2 id="c384" class="kr ks if bd kt ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll dt translated">别太认真了</h2><p id="dd2d" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">拉动式请求是与团队成员的讨论。不要把它变成一堂教学课。提出建议，而不是要求他们。友好点。使用表情符号和gif让读者对你的建议会心一笑:</p><figure class="lt lu lv lw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mq"><img src="../Images/35524aaa923d902fac04ce15d0e65383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MkccokzNveEgWzcL.png"/></div></div></figure><p id="8181" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">评价是对同事的反馈，也有积极的反馈，如果事情做得好，会很感激。</p><figure class="lt lu lv lw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mr"><img src="../Images/a965fde8729f285af48f6e55369e887d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NY4ftERy14vj7nWc.png"/></div></div></figure><h2 id="79c2" class="kr ks if bd kt ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll dt translated">拉式请求不适合长时间的架构讨论</h2><p id="e56d" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">不要过度讨论拉动式请求。反正已经晚了，代码都写好了！使用其他渠道，比如每天/每周的开发者会议。拉请求是为了确保质量水平的提高，并发现潜在的错误和副作用。<br/>如果你的团队中有低年级学生，尝试使用结对<a class="ae ka" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程</a>，不要通过拉请求来教学，因为这会令人沮丧。</p><h2 id="35c8" class="kr ks if bd kt ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll dt translated">如果代码比以前更好，就批准它</h2><p id="6e7f" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">如果有可以做得更好的地方，打开一个问题或标签。当然，这需要一种持续解决技术债务的工作文化，这样这张票才不会被埋没在积压的工作中。<br/>如果拉取请求只是一个部分请求单，则更容易确定优先级。另一个请求肯定很快就会到来，可以立即解决这个问题。</p><h1 id="c03c" class="lz ks if bd kt ma mb mc kx md me mf lb mg mh mi le mj mk ml lh mm mn mo lk mp dt translated">不要害怕</h1><p id="c705" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">在像我们这样的远程设置中，当请求可能在一夜之间被合并时，这可能是很可怕的——您甚至没有机会看到或评论这些请求。当一个团队成长时，这是正常的。你不能控制、检查或知道任何一行代码。接受这一点需要勇气和信任！</p><p id="dc24" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">PS:本文首发<a class="ae ka" href="http://blog.viacom.tech/2017/08/23/the-art-of-pull-requests/" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><figure class="lt lu lv lw fq hw"><div class="bz el l di"><div class="ms mt l"/></div></figure></div></div>    
</body>
</html>