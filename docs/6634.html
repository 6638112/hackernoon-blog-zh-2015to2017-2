<html>
<head>
<title>How to build a recipe app using Vue.js and Vuex</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Vue.js和Vuex搭建一个菜谱app</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-build-a-recipe-app-using-vue-js-and-vuex-7830998050b9?source=collection_archive---------7-----------------------#2017-09-27">https://medium.com/hackernoon/how-to-build-a-recipe-app-using-vue-js-and-vuex-7830998050b9?source=collection_archive---------7-----------------------#2017-09-27</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/5f60a97f357e65183f273190ba860e55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*YG2wYKiH2Y_G8AOoza4x2w.jpeg"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Yum yum</figcaption></figure><p id="61c8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本教程中，我将向你展示如何使用<a class="ae ka" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue2 </a>、<a class="ae ka" href="https://vuex.vuejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Vuex </a>、<a class="ae ka" href="https://vuetifyjs.com/" rel="noopener ugc nofollow" target="_blank"> Vuetify </a>和<a class="ae ka" href="https://cosmicjs.com" rel="noopener ugc nofollow" target="_blank"> Cosmic JS </a>创建一个优雅的<strong class="je hv">食谱App </strong>。为了理解如何使用Restful API，本教程将展示如何向Cosmic JS API发出AJAX (XHR)请求，以便在我们的Cosmic JS桶中检索、添加、更新和删除数据/媒体。让我们开始吧。</p><p id="5717" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae ka" href="https://github.com/cosmicjs/recipe-app" rel="noopener ugc nofollow" target="_blank">下载GitHub回购</a> <br/> <a class="ae ka" href="https://cosmicjs.com/apps/recipe-app" rel="noopener ugc nofollow" target="_blank">查看演示</a></p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="fe ff kb"><img src="../Images/690aaa59d1c9b59a1ab5dab6206c23fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q3ZDehSfb_yEePFNBstvSw.png"/></div></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Here’s what it will look like</figcaption></figure><h1 id="f765" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">先决条件</h1><p id="4839" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">您将需要节点JS和npm。在开始之前，确保你已经有了它们。</p><h1 id="1071" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">入门指南</h1><h1 id="ecb6" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">使用现有的git repo做任何事情</h1><p id="bf05" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">首先，您必须确保安装了node &gt; 6.x，然后运行以下命令:</p><pre class="kc kd ke kf fq ln lo lp lq aw lr dt"><span id="1908" class="ls kl hu lo b fv lt lu l lv lw">npm install -g vue-cli<br/>git clone https://github.com/cosmicjs/recipe-app/<br/>cd recipe-app <br/>npm install <br/>npm run dev</span></pre><p id="62aa" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">运行最后一个命令后，浏览器窗口将自动打开。</p><p id="ab94" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh lx ly lz lo b">package.json</code>会是这个样子。</p><pre class="kc kd ke kf fq ln lo lp lq aw lr dt"><span id="bd81" class="ls kl hu lo b fv lt lu l lv lw">{<br/> "name": "recipe-app",<br/> "description": "A Vue.js project",<br/> "version": "1.0.0",<br/> "author": "Jazib Sawar ",<br/> "private": true,<br/> "scripts": {<br/> "dev": "cross-env NODE_ENV=development webpack-dev-server --open --inline --hot",<br/> "build": "cross-env NODE_ENV=production webpack --progress --hide-modules"<br/> },<br/> "dependencies": {<br/> "cosmicjs": "^2.4.11",<br/> "js-beautify": "^1.6.14",<br/> "lodash": "^4.17.4",<br/> "vee-validate": "^2.0.0-rc.17",<br/> "vue": "^2.4.2",<br/> "vue-router": "^2.7.0",<br/> "vue-wysiwyg": "^1.2.6",<br/> "vuetify": "^0.15.7",<br/> "vuex": "^2.4.0"<br/> },<br/> "devDependencies": {<br/> "babel-core": "^6.0.0",<br/> "babel-loader": "^6.0.0",<br/> "babel-plugin-add-filehash": "^6.9.4",<br/> "babel-plugin-transform-imports": "^1.4.1",<br/> "babel-preset-env": "^1.5.1",<br/> "babel-preset-es2015": "^6.24.1",<br/> "babel-preset-stage-2": "^6.24.1",<br/> "cross-env": "^3.0.0",<br/> "css-loader": "^0.25.0",<br/> "file-loader": "^0.9.0",<br/> "node-sass": "^4.5.0",<br/> "sass-loader": "^5.0.1",<br/> "style-loader": "^0.13.1",<br/> "stylus": "^0.54.5",<br/> "stylus-loader": "^3.0.1",<br/> "vue-loader": "^12.1.0",<br/> "vue-template-compiler": "^2.4.2",<br/> "webpack": "^2.6.1",<br/> "webpack-dev-server": "^2.4.5"<br/> }<br/>}</span></pre><h1 id="cb0d" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">我们正在安装什么，为什么</h1><ol class=""><li id="2c3d" class="ma mb hu je b jf li jj lj jn mc jr md jv me jz mf mg mh mi dt translated">我们将使用<strong class="je hv"> vue </strong>和<strong class="je hv"> vuex </strong>库来创建组件和管理状态。</li><li id="3536" class="ma mb hu je b jf mj jj mk jn ml jr mm jv mn jz mf mg mh mi dt translated">我们使用<strong class="je hv"> vue-router </strong>包在我们的组件之间导航。</li><li id="e65f" class="ma mb hu je b jf mj jj mk jn ml jr mm jv mn jz mf mg mh mi dt translated">我们正在使用<strong class="je hv">vue化</strong>包来使用vue组件创建漂亮的布局。</li><li id="bc96" class="ma mb hu je b jf mj jj mk jn ml jr mm jv mn jz mf mg mh mi dt translated">我们将使用<strong class="je hv"> cosmicjs </strong>库来处理我们对cosmicjs桶的请求。</li><li id="8eb7" class="ma mb hu je b jf mj jj mk jn ml jr mm jv mn jz mf mg mh mi dt translated"><strong class="je hv"> vue-wysiwyg </strong>用于编辑&amp; <strong class="je hv"> vee-validate </strong>用于表单验证。</li></ol><h1 id="aaec" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">构建我们的应用</h1><p id="73bf" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">现在我们将在根目录下设置我们的index.html，我们将在那里改变图标，你也可以添加元标签。</p><p id="6f85" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下面是index.html的档案。这里唯一重要的代码块是包含构建脚本<strong class="je hv"> &lt; script src=。/dist/build . js "&gt;&lt;/script&gt;</strong>在body标签的末尾创建一个元素<strong class="je hv">&lt;div id = " app "&gt;&lt;/div&gt;</strong>其中<strong class="je hv"> vue </strong>将引导您的应用程序。</p><pre class="kc kd ke kf fq ln lo lp lq aw lr dt"><span id="b46c" class="ls kl hu lo b fv lt lu l lv lw">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/> &lt;head&gt;<br/> &lt;title&gt;Recipes App&lt;/title&gt;<br/> &lt;meta charset="utf-8"&gt;<br/> &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;<br/> &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/> &lt;link href='https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons' rel="stylesheet" type="text/css"&gt;<br/> &lt;link href='./public/font-awesome-4.7.0/css/font-awesome.min.css' rel="stylesheet" type="text/css"&gt;<br/> &lt;link rel="icon" type="image/png" href="./public/favicon-32x32.png" sizes="32x32"&gt;<br/> &lt;/head&gt;<br/> &lt;body&gt;<br/> &lt;div id="app"&gt;&lt;/div&gt;<br/> &lt;script src="./dist/build.js"&gt;&lt;/script&gt;<br/> &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h1 id="7a9d" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">Setup main.js</h1><p id="dac1" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">你可能知道<strong class="je hv"> main.js </strong>是创建vue实例和渲染第一个组件的主文件。</p><pre class="kc kd ke kf fq ln lo lp lq aw lr dt"><span id="c2b7" class="ls kl hu lo b fv lt lu l lv lw">import Vue from 'vue'<br/>import VueRouter from 'vue-router'<br/>import store from './vuex/store'<br/>import App from './App.vue'<br/>import Vuetify from 'vuetify'<br/>import VeeValidate from 'vee-validate';<br/>import wysiwyg from "vue-wysiwyg";<br/>import RecipeList from './components/RecipeList.vue'<br/>import RecipeSingle from './components/RecipeSingle.vue'<br/>import './stylus/main.styl'</span><span id="118c" class="ls kl hu lo b fv mo lu l lv lw">Vue.use(VueRouter)<br/>Vue.use(Vuetify)<br/>Vue.use(VeeValidate)<br/>Vue.use(wysiwyg,{<br/> hideModules: { bold: true, table: true, image: true }<br/>})</span><span id="bc7f" class="ls kl hu lo b fv mo lu l lv lw">const routes = [<br/> { name: 'home', path: '/', component: RecipeList },<br/> { name: 'recipes', path: '/recipes', component: RecipeList },<br/> { name: 'recipe', path: '/recipe/:id', component: RecipeSingle }<br/>];</span><span id="9eb0" class="ls kl hu lo b fv mo lu l lv lw">const router = new VueRouter({<br/> routes<br/>});</span><span id="9d05" class="ls kl hu lo b fv mo lu l lv lw">new Vue({<br/> store,<br/> el: '#app',<br/> router,<br/> render: h =&gt; h(App),<br/> beforeMount: function(){<br/> this.$store.dispatch("getRecipes");<br/> }<br/>})</span></pre><p id="b42a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在最初的几行中，我将所有的包和组件导入到应用程序中。将我们的包注入vue以便我们可以使用它。<code class="eh lx ly lz lo b">Vue.use(VueRouter)</code>在我们的应用中包含路由器。这将为应用程序提供导航。</p><h2 id="b474" class="ls kl hu bd km mp mq mr kq ms mt mu ku jn mv mw ky jr mx my lc jv mz na lg nb dt translated">按指定路线发送</h2><pre class="kc kd ke kf fq ln lo lp lq aw lr dt"><span id="64fa" class="ls kl hu lo b fv lt lu l lv lw">const routes = [<br/> { name: 'home', path: '/', component: RecipeList },<br/> { name: 'recipes', path: '/recipes', component: RecipeList },<br/> { name: 'recipe', path: '/recipe/:id', component: RecipeSingle }<br/>];</span></pre><p id="bcca" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这些是我们可能的路线。主页和食谱用于显示食谱列表。然后<code class="eh lx ly lz lo b">/recpie/:id</code>会展示食谱。</p><h2 id="891f" class="ls kl hu bd km mp mq mr kq ms mt mu ku jn mv mw ky jr mx my lc jv mz na lg nb dt translated">Vue实例</h2><pre class="kc kd ke kf fq ln lo lp lq aw lr dt"><span id="ab79" class="ls kl hu lo b fv lt lu l lv lw">new Vue({<br/> store,<br/> el: '#app',<br/> router,<br/> render: h =&gt; h(App),<br/> beforeMount: function(){<br/> this.$store.dispatch("getRecipes");<br/> }<br/>})</span></pre><p id="5da2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这里创建了Vue实例。<code class="eh lx ly lz lo b">el: '#app'</code>是来自index.html的元素的id，vue将在这里注入应用程序。<code class="eh lx ly lz lo b">store</code>是vuex商店。我稍后会谈到vuex。<code class="eh lx ly lz lo b">router</code>正在注入路由器对象。<code class="eh lx ly lz lo b">render: h =&gt; h(App)</code>正在告诉app先在App中注入App组件。</p><h1 id="22af" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">设置App.vue</h1><p id="b1bc" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated"><code class="eh lx ly lz lo b">\src\App.js</code>是将呈现的第一个组件。我为UI使用了vuetify组件，为css提供了手写笔。你可以在这里查看他们的文档<a class="ae ka" href="https://vuetifyjs.com/vuetify/quick-start" rel="noopener ugc nofollow" target="_blank">。这里最重要的代码块包括模板<code class="eh lx ly lz lo b">&lt;router-view&gt;&lt;/router-view&gt;</code>中的路由器视图。这段代码将根据路由呈现路由器和相应的组件。</a></p><h1 id="5f74" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">Vuex</h1><p id="75d0" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">接下来，我首先讨论Vuex以及我们为什么应该使用它。显然，对于较小的应用程序，可以使用简单的状态和道具。但是对于大型应用程序，我们必须使用某种状态管理，比如React中的redux。Vuex由vue团队维护，使用广泛。今天我们将。下面是我将要解释的Vuex流程图。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="fe ff nc"><img src="../Images/cbbff850c1e05c8fffbf3048af8ea673.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eWBThuCvyUA4mNuU.png"/></div></div></figure><p id="921d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">vuex中有四个主要概念。</p><ul class=""><li id="98b1" class="ma mb hu je b jf jg jj jk jn nd jr ne jv nf jz ng mg mh mi dt translated">状态</li><li id="9b24" class="ma mb hu je b jf mj jj mk jn ml jr mm jv mn jz ng mg mh mi dt translated">行动</li><li id="6b72" class="ma mb hu je b jf mj jj mk jn ml jr mm jv mn jz ng mg mh mi dt translated">突变</li><li id="b232" class="ma mb hu je b jf mj jj mk jn ml jr mm jv mn jz ng mg mh mi dt translated">吸气剂</li></ul><p id="8846" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">状态</strong>是我们整个应用程序状态/数据将被存储的地方。那么它将如何工作呢？例如，您正在组件中使用这个存储，并希望更改一些状态值。您必须分派一个<strong class="je hv">动作</strong>。然后<strong class="je hv">动作</strong>将提交<strong class="je hv">突变</strong>并且它将改变状态。所以为什么需要行动，我们可以在突变中直接改变状态。行动很重要。当我们必须调用任何异步函数，然后在它成功时改变状态时，我们需要动作。在API的情况下，我们在动作中使用请求，并提交变化来改变状态。这非常简单，但遵循起来非常重要。</p><p id="963b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> Getters </strong>是简单的获取组件状态值的getter函数。如果在不同的组件中需要一个状态值，那么最好为它创建getter，并在组件中将该getter用作计算属性。</p><p id="14e8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">惯例是先创建vuex文件夹，然后在其中创建store.js。于是我也这样做了，创造了<code class="eh lx ly lz lo b">src/vuex/store.js</code>。下面是store.js代码:</p><pre class="kc kd ke kf fq ln lo lp lq aw lr dt"><span id="bfae" class="ls kl hu lo b fv lt lu l lv lw">import Vue from 'vue'<br/>import Vuex from 'vuex'<br/>import Request from '../common/request'<br/>import _ from 'lodash';</span><span id="792a" class="ls kl hu lo b fv mo lu l lv lw">Vue.use(Vuex)</span><span id="28a8" class="ls kl hu lo b fv mo lu l lv lw">// the root, initial state object<br/>const state = {<br/> recipes: [<br/> ],<br/> status: {<br/> loading: false,<br/> success: false,<br/> error: false<br/> },<br/> categories: [<br/> "Dessert",<br/> "Meal"<br/> ],<br/> recipe: {<br/> metadata:{<br/> feature_image: {<br/> },<br/> ingredients:[]<br/> }<br/> },<br/> editForm: false,<br/> editting: false,<br/> pagination: {<br/> page: 1,<br/> limit: 12,<br/> total: 0<br/> }<br/>}</span><span id="a22e" class="ls kl hu lo b fv mo lu l lv lw">// define the possible getters that can be applied to our state<br/>const getters = {<br/> recipes(state){<br/> return state.recipes;<br/> },<br/> recipe(state){<br/> return (keyword) =&gt; _.find(state.recipes,['_id', keyword]);<br/> },<br/> recipeModel(state){<br/> return state.recipe;<br/> },<br/> loading(state){<br/> return state.status.loading;<br/> },<br/> editForm(state){<br/> return state.editForm;<br/> },<br/> categories(state){<br/> return state.categories;<br/> },<br/> editting(state){<br/> return state.editting;<br/> },<br/> pagination(state){<br/> return state.pagination;<br/> },<br/> page(state){<br/> return state.pagination.page;<br/> }<br/>}</span><span id="4c4a" class="ls kl hu lo b fv mo lu l lv lw">// define the possible mutations that can be applied to our state<br/>const mutations = {<br/> SET_TOTAL(state,payload){<br/> state.pagination.total = Math.ceil(payload / state.pagination.limit);<br/> },<br/> SET_RECIPES(state,payload){<br/> state.recipes = payload;<br/> },<br/> SET_RECIPE(state,payload){<br/> state.recipe = payload;<br/> },<br/> ADD_RECIPE(state,payload){<br/> state.recipes.unshift(payload);<br/> },<br/> EDIT_RECIPE(state,payload){<br/> state.recipes = _.unionBy([payload],state.recipes,'_id');<br/> },<br/> DELETE_RECIPE(state,payload){<br/> _.remove(state.recipes, function (recipe) {<br/> return recipe._id === payload._id<br/> });<br/> },<br/> LOADING(state){<br/> state.status = {<br/> loading: true,<br/> success: false,<br/> error: false<br/> };<br/> },<br/> SUCCESS(state){<br/> state.status = {<br/> loading: false,<br/> success: true,<br/> error: false<br/> };<br/> },<br/> ERROR(state,payload){<br/> state.status = {<br/> loading: false,<br/> success: false,<br/> error: payload<br/> };<br/> },<br/> CLEAR_ERROR(state){<br/> state.status = {<br/> loading: false,<br/> success: false,<br/> error: false<br/> };<br/> },<br/> TOGGLE_EDITFORM(state,payload){<br/> state.editForm = payload;<br/> },<br/> ADD_INGREDIANT_RECIPE(state,payload){<br/> state.recipe.metadata.ingredients.push({<br/> ingredient: payload<br/> });<br/> },<br/> REMOVE_INGREDIANT_RECIPE(state,payload){<br/> state.recipe.metadata.ingredients.splice(payload, 1);<br/> },<br/> SET_RECIPE_IMAGE(state,payload){<br/> state.recipe.metadata.feature_image.url = payload;<br/> },<br/> SET_RECIPE_FILE(state,payload){<br/> state.recipe.metadata.feature_image.file = payload;<br/> },<br/> TOGGLE_EDITTING(state){<br/> state.editting = !state.editting;<br/> },<br/> SET_RECIPE_DEFAULT(state){<br/> state.recipe = {<br/> metadata:{<br/> feature_image: {<br/> },<br/> ingredients:[]<br/> }<br/> };<br/> },<br/> PAGINATE(state,payload){<br/> state.pagination.page = payload;<br/> }<br/>}<br/></span><span id="b094" class="ls kl hu lo b fv mo lu l lv lw">// define the possible actions that can be applied to our state<br/>const actions = {<br/> getRecipes(context){<br/> context.commit('LOADING');<br/> Request.getRecipes(context.getters.pagination).then(res =&gt; {<br/> context.commit('SET_RECIPES',res.objects.all || []);<br/> context.commit('SET_TOTAL',res.total || 0);<br/> context.commit('SUCCESS');<br/> })<br/> .catch(e =&gt; {<br/> context.commit('ERROR',e);<br/> });<br/> },<br/> setRecipe(context,payload){<br/> context.commit('SET_RECIPE',_.cloneDeep(payload));<br/> },<br/> setRecipeDefault(context){<br/> context.commit('SET_RECIPE_DEFAULT');<br/> },<br/> addRecipe(context,payload){<br/> context.commit('LOADING');<br/> Request.addRecipe(payload).then(recipe =&gt; {<br/> context.commit('ADD_RECIPE',recipe);<br/> context.commit('SET_RECIPE_DEFAULT');<br/> context.commit('TOGGLE_EDITFORM',false);<br/> context.commit('SUCCESS');<br/> })<br/> .catch(e =&gt; {<br/> context.commit('ERROR',e);<br/> });<br/> },<br/> editRecipe(context,payload){<br/> context.commit('LOADING');<br/> Request.editRecipe(payload).then(recipe =&gt; {<br/> context.commit('EDIT_RECIPE',recipe);<br/> context.commit('SET_RECIPE_DEFAULT');<br/> context.commit('TOGGLE_EDITTING');<br/> context.commit('TOGGLE_EDITFORM',false);<br/> context.commit('SUCCESS');<br/> })<br/> .catch(e =&gt; {<br/> context.commit('ERROR',e);<br/> });<br/> },<br/> deleteRecipe(context,payload){<br/> context.commit('LOADING');<br/> Request.deleteRecipe(payload).then((res) =&gt; {<br/> if(res.status == 200){<br/> context.commit('DELETE_RECIPE',payload);<br/> context.commit('SUCCESS');<br/> }<br/> else{<br/> context.commit('ERROR',res);<br/> }<br/> })<br/> .then((e) =&gt; {<br/> context.commit('ERROR',e);<br/> });<br/> },<br/> clearError(context){<br/> context.commit('CLEAR_ERROR');<br/> },<br/> setEditForm(context,payload){<br/> context.commit('TOGGLE_EDITFORM',payload);<br/> },<br/> addIngrediantInRecipe(context,payload){<br/> context.commit('ADD_INGREDIANT_RECIPE',payload);<br/> },<br/> removeIngrediantInRecipe(context,payload){<br/> context.commit('REMOVE_INGREDIANT_RECIPE',payload);<br/> },<br/> setRecipeImage(context,payload){<br/> context.commit('SET_RECIPE_IMAGE',payload);<br/> },<br/> setRecipeFile(context,payload){<br/> context.commit('SET_RECIPE_FILE',payload);<br/> },<br/> toggleEditting(context){<br/> context.commit('TOGGLE_EDITTING');<br/> },<br/> paginate(context,payload){<br/> context.commit('PAGINATE',payload);<br/> context.dispatch('getRecipes');<br/> }<br/>}</span><span id="b9e0" class="ls kl hu lo b fv mo lu l lv lw">// create the Vuex instance by combining the state and mutations objects<br/>// then export the Vuex store for use by our components<br/>export default new Vuex.Store({<br/> state,<br/> getters,<br/> mutations,<br/> actions<br/>})</span></pre><h1 id="dd9f" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">配置</h1><p id="a850" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated"><code class="eh lx ly lz lo b">src/config/config.js</code>是存储使用其api或npm包访问cosmicjs桶数据的基本配置的文件。</p><pre class="kc kd ke kf fq ln lo lp lq aw lr dt"><span id="9cd2" class="ls kl hu lo b fv lt lu l lv lw">const config = {<br/> bucket: {<br/> slug: YOUR_BUCKET_SLUG,<br/> read_key: YOUR_BUCKET_READ_KEY,<br/> write_key: YOUR_BUCKET_WRITE_KEY<br/> },<br/> object_type: YOUR_OBJECT_TYPE,<br/> image_folder: IMAGE_FOLDER_SLUG<br/>};</span><span id="cb4d" class="ls kl hu lo b fv mo lu l lv lw">export default config;</span></pre><h1 id="b667" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">英国国会下院</h1><p id="16b5" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">在<code class="eh lx ly lz lo b">src/common/</code>我创造了三个。js文件来构建我的代码并使其可伸缩。<code class="eh lx ly lz lo b">src/common/request.js</code>文件将使用<code class="eh lx ly lz lo b">src/common/Cosmic.js</code>包，向提供的端点发出请求并返回承诺。<code class="eh lx ly lz lo b">src/common/paramMapping.js</code>在添加和编辑时会创建一个请求对象。</p><p id="6b6d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在<code class="eh lx ly lz lo b">src/common/Cosmic.js</code>中，我扩展了cosmic-js包，因为它在<code class="eh lx ly lz lo b">getObjectsByType</code>函数中缺少了<code class="eh lx ly lz lo b">deleteMedia</code>和排序功能。</p><p id="376d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh lx ly lz lo b">Note: I created a PR I hope it will be added out of the box in cosmic-js package.</code></p><p id="afc3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Cosmic.js扩展代码如下。</p><pre class="kc kd ke kf fq ln lo lp lq aw lr dt"><span id="18e4" class="ls kl hu lo b fv lt lu l lv lw">import Cosmic from 'cosmicjs';<br/>var api_url = 'https://api.cosmicjs.com';<br/>var api_version = 'v1';</span><span id="13cf" class="ls kl hu lo b fv mo lu l lv lw">Cosmic.getObjectsByType = function(config, object, callback){<br/> var endpoint = api_url + '/' + api_version + '/' + config.bucket.slug + '/object-type/' + object.type_slug + '?read_key=' + config.bucket.read_key;<br/> if (object.limit) endpoint += '&amp;limit=' + object.limit;<br/> if (object.skip) endpoint += '&amp;skip=' + object.skip;<br/> if (object.locale) endpoint += '&amp;locale=' + object.locale;<br/> if (object.sort) endpoint += '&amp;sort=' + object.sort;<br/> fetch(endpoint)<br/> .then(function(response){<br/> if (response.status &gt;= 400) {<br/> var err = {<br/> "message" : "There was an error with this request."<br/> }<br/> return callback(err, false);<br/> }<br/> return response.json()<br/> })<br/> .then(function(response){<br/> // Constructor<br/> var cosmic = {};<br/> var objects = response.objects;<br/> cosmic.objects = {};<br/> cosmic.objects.all = objects;<br/> cosmic.object = _.map(objects, keyMetafields);<br/> cosmic.object = _.keyBy(cosmic.object, "slug");<br/> cosmic.total = response.total;<br/> return callback(false, cosmic);<br/> });<br/>};</span><span id="0a30" class="ls kl hu lo b fv mo lu l lv lw">Cosmic.deleteMedia = function(config, object, callback){<br/> var endpoint = api_url + '/' + api_version + '/' + config.bucket.slug + '/media/' + object.media_id;<br/> fetch(endpoint, {<br/> method: 'delete',<br/> headers: {<br/> 'Content-type': 'application/json'<br/> },<br/> body: JSON.stringify(object)<br/> })<br/> .then(function(response){<br/> if (response.status &gt;= 400) {<br/> var err = {<br/> 'message': 'There was an error with this request.'<br/> }<br/> return callback(err, false);<br/> }<br/> return response.json()<br/> })<br/> .then(function(response){<br/> return callback(false, response);<br/> });<br/>};</span><span id="0926" class="ls kl hu lo b fv mo lu l lv lw">function keyMetafields(object){<br/> var metafields = object.metafields;<br/> if(metafields){<br/> object.metafield = _.keyBy(metafields, 'key');<br/> }<br/> return object;<br/>}</span><span id="ca29" class="ls kl hu lo b fv mo lu l lv lw">export default Cosmic;</span></pre><h1 id="bcbf" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">成分</h1><p id="8e5a" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">在这个应用程序中，我创建了以下组件。</p><ul class=""><li id="20b4" class="ma mb hu je b jf jg jj jk jn nd jr ne jv nf jz ng mg mh mi dt translated">RecipeList.vue</li><li id="99f8" class="ma mb hu je b jf mj jj mk jn ml jr mm jv mn jz ng mg mh mi dt translated">RecipeSingle.vue</li><li id="bfed" class="ma mb hu je b jf mj jj mk jn ml jr mm jv mn jz ng mg mh mi dt translated">RecipeForm.vue</li></ul><h1 id="e95b" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">RecipeList.vue</h1><p id="3745" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">RecipeList.vue是主要组件。它将在卡片视图中显示食谱列表。我再次使用了vue化组件。它还提供添加、编辑、删除和分页功能。对于编辑和添加，我使用了模态/对话框来打开表单。存在于<code class="eh lx ly lz lo b">RecipeForm.vue</code>组件中。</p><pre class="kc kd ke kf fq ln lo lp lq aw lr dt"><span id="0327" class="ls kl hu lo b fv lt lu l lv lw">import {mapActions,mapGetters} from 'vuex';</span></pre><p id="2e32" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将把vuex存储的getter映射到Vue的计算属性，并将动作映射到方法。</p><pre class="kc kd ke kf fq ln lo lp lq aw lr dt"><span id="0b80" class="ls kl hu lo b fv lt lu l lv lw">&lt;template&gt;<br/> &lt;div&gt;<br/> &lt;v-container fill-height class="noRecipes" v-if="recipes.length == 0 &amp;&amp; !loading"&gt;<br/> &lt;v-layout row wrap align-center&gt;<br/> &lt;v-flex class="text-xs-center"&gt;<br/> &lt;h4&gt;There is no recipe please add one!&lt;/h4&gt;<br/> &lt;v-btn light large class="amber" @click="openAddForm" :disabled="loading"&gt;Add Recipe&lt;/v-btn&gt;<br/> &lt;/v-flex&gt;<br/> &lt;/v-layout&gt;<br/> &lt;/v-container&gt;<br/> &lt;v-container grid-list-lg text-xs-center&gt;<br/> &lt;v-layout row wrap v-if="recipes.length &gt; 0"&gt;<br/> &lt;v-flex md4 sm6 xs12 v-for="(recipe, index) in recipes" :key="index"&gt;<br/> &lt;v-card&gt;<br/> &lt;router-link :to="{name:'recipe', params:{id:recipe._id}}"&gt;<br/> &lt;v-card-media :src="recipe.metadata.feature_image.url.replace(/ /g,'%20')" height="200px"&gt;<br/> &lt;/v-card-media&gt;<br/> &lt;/router-link&gt;<br/> &lt;v-card-title primary-title&gt;<br/> &lt;div&gt;<br/> &lt;h3 class="headline mb-0"&gt;<br/> &lt;router-link :to="{name:'recipe', params:{id:recipe._id}}"&gt;<br/> {{recipe.title}}<br/> &lt;/router-link&gt;<br/> &lt;/h3&gt;<br/> &lt;div&gt;{{recipe.metadata.author}}&lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;/v-card-title&gt;<br/> &lt;v-card-actions class="white"&gt;<br/> &lt;v-spacer&gt;&lt;/v-spacer&gt;<br/> &lt;v-btn icon :disabled="loading" @click="openEditForm(recipe)"&gt;<br/> &lt;v-icon class="blue--text"&gt;edit&lt;/v-icon&gt;<br/> &lt;/v-btn&gt;<br/> &lt;v-btn icon :disabled="loading" @click="deleteRecipe(recipe)"&gt;<br/> &lt;v-icon class="red--text"&gt;delete&lt;/v-icon&gt;<br/> &lt;/v-btn&gt;<br/> &lt;v-spacer&gt;&lt;/v-spacer&gt;<br/> &lt;/v-card-actions&gt;<br/> &lt;/v-card&gt;<br/> &lt;/v-flex&gt;<br/> &lt;v-btn fixed light fab bottom right class="amber darken-2" @click="openAddForm" :disabled="loading" &gt;<br/> &lt;v-icon&gt;add&lt;/v-icon&gt;<br/> &lt;/v-btn&gt;<br/> &lt;/v-layout&gt;<br/> &lt;div class="text-xs-center recipes-pagination" v-if="recipes.length &gt; 0"&gt;<br/> &lt;v-pagination :disabled="loading" :length="pagination.total" v-model="pagination.page" :total-visible="5" circle&gt;&lt;/v-pagination&gt;<br/> &lt;/div&gt;<br/> &lt;recipe-form&gt;&lt;/recipe-form&gt;<br/> &lt;v-snackbar :timeout="2000" success v-model="success"&gt;<br/> Request done successfully!<br/> &lt;/v-snackbar&gt;<br/> &lt;v-snackbar :timeout="3000" error v-model="error"&gt;<br/> There was an error during request!<br/> &lt;/v-snackbar&gt;<br/> &lt;/v-container&gt;<br/> &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="7a54" class="ls kl hu lo b fv mo lu l lv lw">&lt;script&gt;<br/> import {mapActions,mapGetters} from 'vuex';<br/> import RecipeForm from './RecipeForm.vue';<br/> export default {<br/> components:{<br/> 'recipe-form': RecipeForm<br/> },<br/> computed: {<br/> success: {<br/> get: function(){<br/> return this.$store.state.status.success;<br/> },<br/> set: function(value){<br/> this.$store.dispatch('clearError');<br/> }<br/> },<br/> error: {<br/> get: function(){<br/> return this.$store.state.status.error;<br/> },<br/> set: function(value){<br/> this.$store.dispatch('clearError');<br/> }<br/> },<br/> ...mapGetters([<br/> 'recipes','pagination','loading','editForm','page'<br/> ])<br/> },<br/> watch: {<br/> page: 'getRecipes'<br/> },<br/> methods:{<br/> openAddForm(){<br/> this.$store.dispatch('setRecipeDefault');<br/> this.$store.dispatch('setEditForm',true);<br/> },<br/> openEditForm(recipe){<br/> this.$store.dispatch('setRecipe',recipe);<br/> this.$store.dispatch('toggleEditting');<br/> this.$store.dispatch('setEditForm',true);<br/> },<br/> deleteRecipe(recipe){<br/> this.$store.dispatch('deleteRecipe',recipe);<br/> },<br/> getRecipes(){<br/> this.$store.dispatch('getRecipes');<br/> }<br/> }<br/> }<br/>&lt;/script&gt;</span><span id="82c5" class="ls kl hu lo b fv mo lu l lv lw">&lt;style lang="stylus" scoped&gt;<br/> #keep<br/> .card__title<br/> display: block</span><span id="7829" class="ls kl hu lo b fv mo lu l lv lw"> .headline<br/> a<br/> color: rgba(0,0,0,0.87)<br/> text-decoration: none<br/> .v-spinner<br/> text-align: center<br/> .noRecipes<br/> position: absolute<br/> right: 0<br/> left: 0<br/> text-align: center<br/> height: auto<br/> top: 60px<br/> bottom: 0<br/> .recipes-pagination<br/> margin-top: 80px<br/> .pagination &gt;&gt;&gt; li &gt; a.pagination__item--active<br/> background: #FFC107<br/> color: #000<br/> font-weight: bold<br/>&lt;/style&gt;</span></pre><h1 id="148d" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">RecipeForm.vue</h1><p id="3235" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">RecipeForm.vue用于提交表单并进行基本验证。</p><pre class="kc kd ke kf fq ln lo lp lq aw lr dt"><span id="9ec6" class="ls kl hu lo b fv lt lu l lv lw">&lt;template&gt;<br/> &lt;v-layout row justify-center&gt;<br/> &lt;v-dialog v-model="editForm" scrollable persistent width="50vw"&gt;<br/> &lt;v-card&gt;<br/> &lt;v-card-title&gt;<br/> &lt;span class="headline"&gt;{{ editting ? 'Edit ' : 'Add ' }}Recipe&lt;/span&gt;<br/> &lt;/v-card-title&gt;<br/> &lt;v-divider&gt;&lt;/v-divider&gt;<br/> &lt;v-card-text style="height: 70vh;"&gt;<br/> &lt;v-container grid-list-md&gt;<br/> &lt;v-layout wrap&gt;<br/> &lt;v-flex xs12&gt;<br/> &lt;v-text-field v-model="recipeModel.title" label="Title" :error-messages="errors.collect('title')" v-validate="'required'" data-vv-name="title" required&gt;&lt;/v-text-field&gt;<br/> &lt;/v-flex&gt;<br/> &lt;v-flex xs12&gt;<br/> &lt;div class="input-group input-group--dirty"&gt;<br/> &lt;label&gt;Content&lt;/label&gt;<br/> &lt;wysiwyg v-model="recipeModel.content" /&gt;<br/> &lt;/div&gt;<br/> &lt;/v-flex&gt;<br/> &lt;v-flex xs12 class="mb-2"&gt;<br/> &lt;div class="input-group input-group--dirty"&gt;<br/> &lt;label class="ingredients_list_label"&gt;Ingredients&lt;/label&gt;<br/> &lt;ul class="ingredients_list"&gt;<br/> &lt;li v-for="(item,index) in recipeModel.metadata.ingredients" :key="index"&gt;<br/> {{item.ingredient}}<br/> &lt;v-btn fab dark small error @click="removeIngrediant(index)" class="btn_remove_ingredient"&gt;<br/> &lt;v-icon dark&gt;remove&lt;/v-icon&gt;<br/> &lt;/v-btn&gt;<br/> &lt;/li&gt;<br/> &lt;/ul&gt;<br/> &lt;/div&gt;<br/> &lt;/v-flex&gt;<br/> &lt;v-flex xs10 class="mb-3"&gt;<br/> &lt;v-text-field ref="addIngredientRef" label="Ingredient"&gt;&lt;/v-text-field&gt;<br/> &lt;/v-flex&gt;<br/> &lt;v-flex xs2 class="mb-3"&gt;<br/> &lt;v-btn warning fab small dark @click="addIngrediant($refs.addIngredientRef)"&gt;<br/> &lt;v-icon&gt;add&lt;/v-icon&gt;<br/> &lt;/v-btn&gt;<br/> &lt;/v-flex&gt;<br/> &lt;v-flex xs12&gt;<br/> &lt;v-text-field v-model="recipeModel.metadata.author" label="Author" :error-messages="errors.collect('author')" v-validate="'required'" data-vv-name="author" required&gt;&lt;/v-text-field&gt;<br/> &lt;/v-flex&gt;<br/> &lt;v-flex xs12&gt;<br/> &lt;v-text-field v-model="recipeModel.metadata.preparation_time" label="Preparation Time (in minutes)" :error-messages="errors.collect('preparation')" v-validate="'required|numeric'" data-vv-name="preparation" required&gt;&lt;/v-text-field&gt;<br/> &lt;/v-flex&gt;<br/> &lt;v-flex xs12&gt;<br/> &lt;v-text-field v-model="recipeModel.metadata.cook_time" label="Cook Time (in minutes)" :error-messages="errors.collect('cook')" v-validate="'required|numeric'" data-vv-name="cook" required&gt;&lt;/v-text-field&gt;<br/> &lt;/v-flex&gt;<br/> &lt;v-flex xs12&gt;<br/> &lt;v-text-field v-model="recipeModel.metadata.servings" label="Servings (person)" :error-messages="errors.collect('servings')" v-validate="'required|numeric'" data-vv-name="servings" required&gt;&lt;/v-text-field&gt;<br/> &lt;/v-flex&gt;<br/> &lt;v-flex xs12&gt;<br/> &lt;v-select<br/> v-bind:items="categories"<br/> v-model="recipeModel.metadata.category"<br/> label="Choose Category:"<br/> :error-messages="errors.collect('category')"<br/> v-validate="'required'"<br/> data-vv-name="category"<br/> required<br/> &gt;&lt;/v-select&gt;<br/> &lt;/v-flex&gt;<br/> &lt;v-flex xs12&gt;<br/> &lt;v-text-field v-model="recipeModel.metadata.youtube_id" label="Youtube ID" :error-messages="errors.collect('youtube')" v-validate="'required'" data-vv-name="youtube" required&gt;&lt;/v-text-field&gt;<br/> &lt;/v-flex&gt;<br/> &lt;v-flex xs12&gt;<br/> &lt;img class="upload_image" :src="recipeModel.metadata.feature_image.url.replace(/ /g,'%20')" v-if="!!recipeModel.metadata.feature_image.url" /&gt;<br/> &lt;form enctype="multipart/form-data" novalidate&gt;<br/> &lt;input type="file" @change="onFileChange" accept="image/*" data-vv-name="image" v-validate="'required|mimes:image/*'" required /&gt;<br/> &lt;div class="input-group fileUploadError"&gt;<br/> &lt;div class="input-group__error" v-show="errors.has('image') &amp;&amp; !editting"&gt;<br/> {{ errors.first('image') }}<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;/form&gt;<br/> &lt;/v-flex&gt;<br/> &lt;/v-layout&gt;<br/> &lt;/v-container&gt;<br/> &lt;small&gt;*indicates required field&lt;/small&gt;<br/> &lt;/v-card-text&gt;<br/> &lt;v-divider&gt;&lt;/v-divider&gt;<br/> &lt;v-card-actions&gt;<br/> &lt;v-spacer&gt;&lt;/v-spacer&gt;<br/> &lt;v-btn error dark @click="closeDialog" :disabled="loading"&gt;Close&lt;/v-btn&gt;<br/> &lt;v-btn :loading="loading" :disabled="loading" primary dark @click="saveRecipe(recipeModel)"&gt;Save&lt;/v-btn&gt;<br/> &lt;/v-card-actions&gt;<br/> &lt;/v-card&gt;<br/> &lt;/v-dialog&gt;<br/> &lt;/v-layout&gt;<br/>&lt;/template&gt;</span><span id="ef89" class="ls kl hu lo b fv mo lu l lv lw">&lt;script&gt;<br/>import { mapActions, mapGetters } from 'vuex';<br/>export default {<br/> computed: {<br/> ...mapGetters([<br/> 'editForm', 'recipeModel','categories','editting','loading'<br/> ])<br/> },<br/> methods: {<br/> closeDialog() {<br/> this.$validator.reset();<br/> this.$store.dispatch('setRecipeDefault');<br/> this.$store.dispatch('setEditForm', false);<br/> },<br/> saveRecipe(recipe) {<br/> this.$validator.validateAll();<br/> if(this.$store.state.editting){<br/> if( (!this.errors.any()) || (this.errors.count() == 1 &amp;&amp; this.errors.has('image'))) {<br/> this.$store.dispatch('editRecipe', recipe);<br/> }<br/> }<br/> else<br/> {<br/> if(!this.errors.any()){<br/> this.$store.dispatch('addRecipe', recipe);<br/> }<br/> }<br/> },<br/> addIngrediant(item){<br/> if(item.$refs.input.value){<br/> this.$store.dispatch('addIngrediantInRecipe', item.$refs.input.value);<br/> }<br/> },<br/> removeIngrediant(id){<br/> this.$store.dispatch('removeIngrediantInRecipe', id);<br/> },<br/> onFileChange(e){<br/> var files = e.target.files || e.dataTransfer.files;<br/> if (!files.length){<br/> this.$store.dispatch('setRecipeImage', '');<br/> this.$store.dispatch('setRecipeFile', '');<br/> return;<br/> }<br/> var image = new Image();<br/> var reader = new FileReader();</span><span id="57e6" class="ls kl hu lo b fv mo lu l lv lw"> reader.onload = (e) =&gt; {<br/> this.$store.dispatch('setRecipeImage', e.target.result);<br/> this.$store.dispatch('setRecipeFile', files[0]);<br/> };<br/> reader.readAsDataURL(files[0]);<br/> }<br/> }<br/>}<br/>&lt;/script&gt;<br/>&lt;style lang="stylus" scoped&gt;<br/> .ingredients_list_label<br/> width: 100%<br/> .ingredients_list<br/> width: 100%<br/> li<br/> position: relative<br/> padding: 2px 40px 2px 0<br/> <br/> .btn_remove_ingredient<br/> position: absolute<br/> right: 10px<br/> width: 20px<br/> height: 20px<br/> margin: 0 !important<br/> i.icon<br/> font-size: 14px<br/> .upload_image<br/> width: 200px<br/> .fileUploadError<br/> padding: 2px 0 0<br/> .application .theme--dark.btn.primary.btn--disabled:not(.btn--icon):not(.btn--flat)<br/> background-color: #1976d2 !important<br/> border-color: #1976d2 !important<br/> .application .theme--dark.btn.error.btn--disabled:not(.btn--icon):not(.btn--flat)<br/> background-color: #ff5252 !important<br/> border-color: #ff5252 !important<br/> <br/>&lt;/style&gt;</span></pre><h1 id="b983" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">RecipeSingle.vue</h1><p id="89fb" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">RecipeSingle.vue正在渲染单个配方。</p><pre class="kc kd ke kf fq ln lo lp lq aw lr dt"><span id="d8ef" class="ls kl hu lo b fv lt lu l lv lw">&lt;template&gt;<br/> &lt;div id="recipe_single"&gt;<br/> &lt;div v-if="recipe"&gt;<br/> &lt;v-breadcrumbs icons divider="chevron_right"&gt;<br/> &lt;v-breadcrumbs-item replace :to="{name: 'recipes'}"&gt;<br/> Home<br/> &lt;/v-breadcrumbs-item&gt;<br/> &lt;v-breadcrumbs-item disabled&gt;<br/> {{ recipe.title }}<br/> &lt;/v-breadcrumbs-item&gt;<br/> &lt;v-spacer&gt;&lt;/v-spacer&gt;<br/> &lt;v-btn primary light class="amber" replace :to="{name: 'recipes'}"&gt;Back&lt;/v-btn&gt;<br/> &lt;/v-breadcrumbs&gt;<br/> &lt;/div&gt;<br/> &lt;v-container fluid grid-list-lg&gt;<br/> &lt;v-layout row wrap&gt;<br/> &lt;v-flex md10 xs12 offset-md1 v-if="recipe"&gt;<br/> &lt;v-layout row wrap&gt;<br/> &lt;v-flex xs12 sm6 md4&gt;<br/> &lt;v-card&gt;<br/> &lt;v-card-media :src="recipe.metadata.feature_image.url.replace(/ /g,'%20')" height="300px"&gt;<br/> &lt;/v-card-media&gt;<br/> &lt;/v-card&gt;<br/> &lt;/v-flex&gt;<br/> &lt;v-flex xs12 sm6 md8 class="recipe_info"&gt;<br/> &lt;h1 class="headline mb-0"&gt;<br/> {{recipe.title}}<br/> &lt;/h1&gt;<br/> &lt;ul class="recipe_meta"&gt;<br/> &lt;li&gt;&lt;p&gt;&lt;strong&gt;PUBLISHED BY&lt;/strong&gt;{{recipe.metadata.author}}&lt;/p&gt;&lt;/li&gt;<br/> &lt;li&gt;&lt;p&gt;&lt;strong&gt;PREPARATION&lt;/strong&gt;{{recipe.metadata.preparation_time}} {{ recipe.metadata.preparation_time &gt; 1 ? 'minutes' : 'minute' }}&lt;/p&gt;&lt;/li&gt;<br/> &lt;li&gt;&lt;p&gt;&lt;strong&gt;COOK TIME&lt;/strong&gt;{{recipe.metadata.cook_time}} {{ recipe.metadata.cook_time &gt; 1 ? 'minutes' : 'minute' }}&lt;/p&gt;&lt;/li&gt;<br/> &lt;li&gt;&lt;p&gt;&lt;strong&gt;SERVINGS&lt;/strong&gt;{{recipe.metadata.servings}} {{ recipe.metadata.servings &gt; 1 ? 'persons' : 'person' }}&lt;/p&gt;&lt;/li&gt;<br/> &lt;li&gt;&lt;p&gt;&lt;strong&gt;Category&lt;/strong&gt;&lt;v-chip class="amber dark--text"&gt;{{recipe.metadata.category}}&lt;/v-chip&gt;&lt;/p&gt;&lt;/li&gt;<br/> &lt;/ul&gt;<br/> &lt;/v-flex&gt;<br/> &lt;/v-layout&gt;<br/> &lt;p class="mt-3"&gt;&lt;/p&gt;<br/> &lt;v-layout row wrap class="recipe_content_wrap"&gt;<br/> &lt;v-flex xs12 md8 offset-md2&gt;<br/> &lt;div class="video-responsive"&gt;<br/> &lt;iframe width="560" height="315" :src="'https://www.youtube.com/embed/'+recipe.metadata.youtube_id" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;<br/> &lt;/div&gt;<br/> &lt;/v-flex&gt;<br/> &lt;/v-layout&gt;<br/> &lt;p class="mt-5"&gt;&lt;/p&gt;<br/> &lt;v-card class="white"&gt;<br/> &lt;v-layout row wrap class="recipe_content_wrap"&gt;<br/> &lt;v-flex xs12 md6 order-md2&gt;<br/> &lt;h1 class="headline mb-0"&gt;<br/> Ingredients:<br/> &lt;/h1&gt;<br/> &lt;v-list avatar&gt;<br/> &lt;v-list-tile v-for="(item, index) in recipe.metadata.ingredients" :key="index"&gt;<br/> &lt;v-list-tile-avatar&gt;<br/> &lt;v-icon class="amber--text text--darken-2"&gt;fa-circle&lt;/v-icon&gt;<br/> &lt;/v-list-tile-avatar&gt;<br/> &lt;v-list-tile-content&gt;<br/> &lt;v-list-tile-title&gt;{{item.ingredient}}&lt;/v-list-tile-title&gt;<br/> &lt;/v-list-tile-content&gt;<br/> &lt;/v-list-tile&gt;<br/> &lt;/v-list&gt;<br/> &lt;/v-flex&gt;<br/> &lt;v-flex xs12 md6&gt;<br/> &lt;h1 class="headline mb-0"&gt;<br/> Preparation:<br/> &lt;/h1&gt;<br/> &lt;p v-html="recipe.content" class="recipe_content"&gt;&lt;/p&gt;<br/> &lt;/v-flex&gt;<br/> &lt;/v-layout&gt;<br/> &lt;/v-card&gt;<br/> &lt;/v-flex&gt;<br/> &lt;/v-layout&gt;<br/> &lt;/v-container&gt;<br/> &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="4c0f" class="ls kl hu lo b fv mo lu l lv lw">&lt;script&gt;<br/> import {mapActions,mapGetters} from 'vuex'<br/> export default {<br/> computed: {<br/> recipe(){<br/> return this.$store.getters.recipe(this.$route.params.id)<br/> }<br/> },<br/> methods:{</span><span id="0716" class="ls kl hu lo b fv mo lu l lv lw"> }<br/> }<br/>&lt;/script&gt;</span><span id="34f9" class="ls kl hu lo b fv mo lu l lv lw">&lt;style lang="stylus"&gt;<br/> #recipe_single<br/> .headline<br/> font-size: 32px !important<br/> padding-top: 15px<br/> .recipe_meta<br/> padding-top: 30px<br/> padding-left: 15px<br/> list-style: none<br/> strong<br/> margin-right: 10px<br/> .recipe_content_wrap<br/> padding: 10px 20px<br/> .recipe_content<br/> padding-top: 15px<br/> padding-left: 10px<br/> .list<br/> &gt; li<br/> height: 30px<br/> .icon<br/> font-size: 16px<br/> .video-responsive<br/> overflow:hidden<br/> padding-bottom:56.25%<br/> position:relative<br/> height:0<br/> .video-responsive iframe<br/> left:0<br/> top:0<br/> height:100%<br/> width:100%<br/> position:absolute<br/> .breadcrumbs<br/> li:first-child<br/> a<br/> color: #FFC107<br/> li:nth-child(2):after<br/> content: ''</span><span id="38c5" class="ls kl hu lo b fv mo lu l lv lw">&lt;/style&gt;</span></pre><h1 id="f9a6" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">结论</h1><p id="fa91" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">因此，这是一个应用程序，其中涵盖了使用宇宙npm包vue &amp; vuex的宇宙RESTful API的每个场景。我希望你喜欢这个教程。如果您有任何问题，请<a class="ae ka" href="https://twitter.com/cosmic_js" rel="noopener ugc nofollow" target="_blank">在Twitter上联系Cosmic JS</a>并加入Slack上的<a class="ae ka" href="https://cosmicjs.com/community" rel="noopener ugc nofollow" target="_blank"> Cosmic JS社区</a>。</p></div></div>    
</body>
</html>