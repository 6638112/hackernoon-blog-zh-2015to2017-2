<html>
<head>
<title>Automating My Personal Note-Taking Compilation System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动化我的个人笔记编辑系统</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/automating-my-personal-note-taking-compilation-system-415696705657?source=collection_archive---------14-----------------------#2017-04-10">https://medium.com/hackernoon/automating-my-personal-note-taking-compilation-system-415696705657?source=collection_archive---------14-----------------------#2017-04-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="2142" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">罗彻斯特理工学院(RIT)拥有世界上最大的聋人群体之一NTID(国家聋人技术学院)和重听学生。因此，有无数的服务可用，如字幕，手语翻译和笔记。作为RIT的一名学生，我在一些课上做NTID笔记。一般来说，我会做笔记，并将NTID特有的笔记上传到RIT笔记网站，但我也会将所有笔记上传到我的个人网站，这样如果我需要学习的话，我就可以在任何地方访问它们。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/309cda64dd818b2165445fdff9db8825.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q20CzAtufciYA8iWwDk9Qw.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">A snapshot of the <a class="ae jp" href="http://omgimanerd.tech/notes" rel="noopener ugc nofollow" target="_blank">webpage to access my personal notes</a>.</figcaption></figure><p id="a4e1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我用LaTeX排版系统做笔记，所以笔记需要通过pdflatex命令编译成PDF。这对我来说有点烦人，因为我每次更新笔记时都需要SSH到托管我网站的服务器，以便重新编译它们。因为我是程序员，所以我很懒，不想那么做。让我们自动化这个过程。在这次技术演讲中，我将讨论我是如何做到的。</p></div><div class="ab cl kg kh hc ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hn ho hp hq hr"><h2 id="4d55" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jc ky kz la jg lb lc ld jk le lf lg lh dt translated">我的工作流程</h2><p id="d217" class="pw-post-body-paragraph ir is hu it b iu li iw ix iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo hn dt translated">我把笔记存储在GitHub上的一个<a class="ae jp" href="https://github.com/omgimanerd/rit-notes" rel="noopener ugc nofollow" target="_blank">独立存储库</a>中。我使用一个<a class="ae jp" href="https://github.com/omgimanerd/rit-notes/blob/master/gulpfile.js" rel="noopener ugc nofollow" target="_blank"> gulpfile </a>在课堂上记笔记时自动重新编译笔记，这样我就可以使用Atom的<a class="ae jp" href="https://atom.io/packages/pdf-view" rel="noopener ugc nofollow" target="_blank"> pdf-view包</a>实时查看<a class="ae jp" href="http://atom.io" rel="noopener ugc nofollow" target="_blank"> Atom </a>(我选择的文本编辑器)中的更新。这是该工作流程的截图。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff ln"><img src="../Images/26cda9e0d135f7d4ea19680f6227f753.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vPL0U_NgLFEqe3OH6MjpUA.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">My note-taking workflow</figcaption></figure><p id="1db4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这对我很有用，因为每次保存文档时，我都能看到我的笔记实时更新。</p><h2 id="71a1" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jc ky kz la jg lb lc ld jk le lf lg lh dt translated">编写我自己的Gulp插件</h2><p id="5050" class="pw-post-body-paragraph ir is hu it b iu li iw ix iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo hn dt translated">以前，我使用makefile来编译。因为我只想编译修改过的文件。我从gulpfile中调用make命令，这样每当我保存文件时，我就可以使用gulp的文件观察器自动完成这项工作，但这被证明是令人费解和过于做作的。在我写这篇文章的时候，我意识到使用gulpfile来调用makefile进行编译。tex文件转换成PDF文件是愚蠢的。我决定取出makefile，让编译和更改监控完全在gulpfile中完成。</p><p id="1137" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">经过一番搜索，我找到了两个现有的gulp插件来编译LaTeX:<a class="ae jp" href="https://www.npmjs.com/package/gulp-latex" rel="noopener ugc nofollow" target="_blank">gulp-LaTeX</a>和<a class="ae jp" href="https://www.npmjs.com/package/gulp-pdflatex" rel="noopener ugc nofollow" target="_blank"> gulp-pdflatex </a>。第一个，gulp-latex，对我来说莫名其妙地出错了，在摆弄了几天它的选项后，我放弃了调试。我试了试<a class="ae jp" href="https://www.npmjs.com/package/gulp-pdflatex" rel="noopener ugc nofollow" target="_blank"> gulp-pdflatex </a>，它的效果出奇的好，只要我的。tex文件没有任何语法错误。</p><p id="ff93" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">看了一下源代码，发现<a class="ae jp" href="https://www.npmjs.com/package/gulp-pdflatex" rel="noopener ugc nofollow" target="_blank"> gulp-pdflatex </a>是依靠一个名为<a class="ae jp" href="https://www.npmjs.com/package/node-pdflatex" rel="noopener ugc nofollow" target="_blank"> node-pdflatex </a>的包来做编译的。两个包都是由<a class="ae jp" href="https://github.com/kube/" rel="noopener ugc nofollow" target="_blank">同一个作者</a>写的。该包似乎没有返回错误数据，而是选择在编译失败时发出“LaTeX编译期间出错”的消息。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lo"><img src="../Images/59a1c267a93d69947218c3b0f438831a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NTqH1l1Maw9dsM7tWuVDFw.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">A snippet of the compiled code for <a class="ae jp" href="https://github.com/kube/node-pdflatex" rel="noopener ugc nofollow" target="_blank">node-pdflatex</a>, which was natively written in TypeScript.</figcaption></figure><p id="2c12" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">该死的。</p><p id="c1e2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当。tex文件没有语法错误，但是如果有语法错误，它提供的信息就不多了。来编译。tex文件，包在使用<a class="ae jp" href="https://nodejs.org/api/child_process.html" rel="noopener ugc nofollow" target="_blank"> child_process </a>节点模块的子流程中调用pdflatex命令。它将pdflatex输出的文件存储在临时目录中，然后返回包含输出的PDF文件内容的Stream或Buffer对象。</p><p id="26b4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这相对容易逆向工程，所以我为我的笔记记录系统编写了自己版本的gulp-pdflatex ,添加了将pdflatex的stdout和stderr附加到错误中的功能。我没有将功能分成两个包，而是将它合并成一个包，并作为一个名为<a class="ae jp" href="https://www.npmjs.com/package/gulp-pdflatex2" rel="noopener ugc nofollow" target="_blank"> gulp-pdflatex2 </a>的gulp插件发布。回想起来，我可能应该分叉<a class="ae jp" href="http://github.com/kube/gulp-pdflatex" rel="noopener ugc nofollow" target="_blank"> gulp-pdflatex并发送一个pull请求</a>。\_(ツ)_/</p><p id="053b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">至于只编译修改过的文件，这很容易用<a class="ae jp" href="https://www.npmjs.com/package/gulp-changed" rel="noopener ugc nofollow" target="_blank"> gulp-changed </a>插件完成。</p><h2 id="4447" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jc ky kz la jg lb lc ld jk le lf lg lh dt translated">在我的网站上自动编译</h2><p id="9e22" class="pw-post-body-paragraph ir is hu it b iu li iw ix iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo hn dt translated">我通过将我的<a class="ae jp" href="http://github.com/omgimanerd/rit-notes" rel="noopener ugc nofollow" target="_blank">笔记库</a>克隆到我网站的静态文件夹中，在我的网站上显示了我的笔记。我只需要一种方法来自动拉取和调用<a class="ae jp" href="https://github.com/omgimanerd/rit-notes/blob/master/gulpfile.js" rel="noopener ugc nofollow" target="_blank"> gulpfile的</a>编译任务。</p><p id="9fbd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">GitHub有一个被称为<a class="ae jp" href="https://developer.github.com/webhooks/" rel="noopener ugc nofollow" target="_blank"> webhook </a>的特性，它允许外部服务检测何时发生了诸如推送到存储库之类的事件。我在我的<a class="ae jp" href="http://github.com/omgimanerd/rit-notes" rel="noopener ugc nofollow" target="_blank"> notes repository </a>上设置了一个webhook来检测我何时向它推送更新，这样它就可以在更新发生时向我的<a class="ae jp" href="http://omgimanerd.tech" rel="noopener ugc nofollow" target="_blank">个人网站</a>发送POST请求。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lp"><img src="../Images/b77f1959dfc1859c0ed69a3ac98610ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i06KzPoBrXzj4CdhmCvCjw.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">The webhook management page for my <a class="ae jp" href="http://github.com/omgimanerd/rit-notes" rel="noopener ugc nofollow" target="_blank">notes repository</a>.</figcaption></figure><p id="09e1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，我只需要在我的web服务器上安装一个处理程序。为了<a class="ae jp" href="https://developer.github.com/webhooks/securing/" rel="noopener ugc nofollow" target="_blank">认证来自GitHub的webhook </a>的请求，您需要使用一个双方都知道的秘密令牌为请求计算一个散列。</p><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="5e9f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">上面的代码片段auth_route.js是一个计算请求散列的中间件。底部的代码片段router.js将两者进行比较，并调用命令:</p><pre class="jr js jt ju fq ls lt lu lv aw lw dt"><span id="56fa" class="kn ko hu lt b fv lx ly l lz ma">git pull<br/>gulp clean<br/>gulp latex</span></pre><p id="6fb7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这将提取我对<a class="ae jp" href="http://github.com/omgimanerd/rit-notes" rel="noopener ugc nofollow" target="_blank"> notes存储库</a>所做的任何更改，清除日志文件和无关文件，并重新编译任何更改的文件。这里有一个到notes存储库中gulpfile的<a class="ae jp" href="https://github.com/omgimanerd/rit-notes/blob/master/gulpfile.js" rel="noopener ugc nofollow" target="_blank">链接</a>来查看每个gulp任务的细节。</p><p id="0183" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就是这样！我的个人网站现在会在我每次更新LaTeX笔记时提取并重新编译它们。</p></div><div class="ab cl kg kh hc ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hn ho hp hq hr"><p id="b4f1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我目前只有这些了。感谢阅读！如果你有更好的方法或者任何改进的想法，请留下回复，如果你喜欢这篇文章，请点击下面的❤按钮:)</p><p id="020c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在推特上关注我:<a class="ae jp" href="http://twitter.com/omgimanerd" rel="noopener ugc nofollow" target="_blank"> @omgimanerd </a></p><div class="jr js jt ju fq ab cb"><figure class="mb jv mc md me mf mg paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mb jv mc md me mf mg paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mb jv mc md me mf mg paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mh mi mj"><p id="f922" class="ir is mk it b iu iv iw ix iy iz ja jb ml jd je jf mm jh ji jj mn jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is mk it b iu iv iw ix iy iz ja jb ml jd je jf mm jh ji jj mn jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff mo"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>