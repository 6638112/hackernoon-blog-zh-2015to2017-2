<html>
<head>
<title>Understanding the underscore( _ ) of Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解Python的下划线(_)</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/understanding-the-underscore-of-python-309d1a029edc?source=collection_archive---------0-----------------------#2017-01-15">https://medium.com/hackernoon/understanding-the-underscore-of-python-309d1a029edc?source=collection_archive---------0-----------------------#2017-01-15</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><blockquote class="ir is it"><p id="9179" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">我的母语不是英语。抱歉，我的英语不好。请理解。</p></blockquote><p id="d80b" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated"><em class="iw">下划线</em> (_)在Python中是特殊的。</p><p id="9902" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">虽然在大多数语言中,<em class="iw">下划线</em> (_)仅用于蛇形变量和函数(当然，不是全部),但它在Python中有特殊的含义。如果你是python程序员，<code class="eh jw jx jy jz b">for _ in range(10)</code>，<code class="eh jw jx jy jz b">__init__(self)</code> like语法可能比较熟悉。</p><p id="e831" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">这篇文章将解释何时以及如何使用下划线<em class="iw"/>(_)并帮助你理解它。</p><p id="7fe6" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">在Python中使用下划线有5种情况。</p><ol class=""><li id="dc17" class="ka kb hu ix b iy iz jc jd jt kc ju kd jv ke js kf kg kh ki dt translated">用于存储解释器中最后一个表达式的值。</li><li id="d804" class="ka kb hu ix b iy kj jc kk jt kl ju km jv kn js kf kg kh ki dt translated">因为忽略了特定的值。(所谓“我不在乎”)</li><li id="af62" class="ka kb hu ix b iy kj jc kk jt kl ju km jv kn js kf kg kh ki dt translated">赋予变量或函数的名称特殊的含义和功能。</li><li id="8962" class="ka kb hu ix b iy kj jc kk jt kl ju km jv kn js kf kg kh ki dt translated">用作“国际化(i18n)”或“本地化(l10n)”功能。</li><li id="d139" class="ka kb hu ix b iy kj jc kk jt kl ju km jv kn js kf kg kh ki dt translated">分隔数字文字值的位数。</li></ol><p id="35ba" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">让我们来看看每个案例。</p><h1 id="acb4" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll dt translated"><strong class="ak">用于解释器时</strong></h1><p id="3a2c" class="pw-post-body-paragraph iu iv hu ix b iy lm ja jb jc ln je jf jt lo ji jj ju lp jm jn jv lq jq jr js hn dt translated">python解释器将最后一个表达式值存储到名为“_”的特殊变量中。这个特性首先在标准的CPython解释器中使用，你也可以在其他Python解释器中使用它。</p><pre class="lr ls lt lu fq lv jz lw lx aw ly dt"><span id="d5a4" class="lz kp hu jz b fv ma mb l mc md">&gt;&gt;&gt; 10 <br/>10 <br/>&gt;&gt;&gt; _ <br/>10 <br/>&gt;&gt;&gt; _ * 3 <br/>30 <br/>&gt;&gt;&gt; _ * 20 <br/>600</span></pre><h1 id="932e" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll dt translated"><strong class="ak">用于忽略数值</strong></h1><p id="9713" class="pw-post-body-paragraph iu iv hu ix b iy lm ja jb jc ln je jf jt lo ji jj ju lp jm jn jv lq jq jr js hn dt translated"><em class="iw">下划线</em>也用于忽略特定值。如果不需要具体的值或者不使用这些值，只需将这些值赋给<em class="iw">下划线</em>即可。</p><pre class="lr ls lt lu fq lv jz lw lx aw ly dt"><span id="9708" class="lz kp hu jz b fv ma mb l mc md"><em class="iw"># Ignore a value when unpacking<br/></em>x, _, y = (1, 2, 3) <em class="iw"># x = 1, y = 3</em> </span><span id="1519" class="lz kp hu jz b fv me mb l mc md"><em class="iw"># Ignore the multiple values. It is called "Extended Unpacking" which is available in only Python 3.x</em><br/>x, *_, y = (1, 2, 3, 4, 5) <em class="iw"># x = 1, y = 5</em>  </span><span id="226b" class="lz kp hu jz b fv me mb l mc md"><em class="iw"># Ignore the index<br/></em>for _ in range(10):     <br/>    do_something()  </span><span id="3986" class="lz kp hu jz b fv me mb l mc md"><em class="iw"># Ignore a value of specific location</em><br/>for _, val in list_of_tuple:<br/>    do_something()</span></pre><h1 id="a31e" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll dt translated"><strong class="ak">赋予变量和函数名称特殊含义</strong></h1><p id="57c3" class="pw-post-body-paragraph iu iv hu ix b iy lm ja jb jc ln je jf jt lo ji jj ju lp jm jn jv lq jq jr js hn dt translated"><em class="iw">下划线</em>可能最常用于“命名”。PEP8是Python约定准则，它引入了以下4种命名情况。</p><p id="374d" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated"><strong class="ix hv">_ single _ leading _下划线<br/> </strong>该约定用于声明模块中的<strong class="ix hv"> <em class="iw">私有</em> </strong>变量、函数、方法和类。在<code class="eh jw jx jy jz b">from module import *</code>任何与此有关的约定都被忽略。<br/>但是，Python当然不支持<strong class="ix hv"><em class="iw"/></strong>真正的私有，所以我们不能强制一些东西私有，也可以直接从其他模块调用。所以有时候我们说它“内功指标弱”。</p><pre class="lr ls lt lu fq lv jz lw lx aw ly dt"><span id="23a8" class="lz kp hu jz b fv ma mb l mc md">_internal_name = 'one_nodule' # private variable<br/>_internal_version = '1.0' # private variable</span><span id="aced" class="lz kp hu jz b fv me mb l mc md"><br/>class _Base: # private class<br/>    _hidden_factor = 2 # private variable</span><span id="59cd" class="lz kp hu jz b fv me mb l mc md">    def __init__(self, price):<br/>        self._price = price</span><span id="bf65" class="lz kp hu jz b fv me mb l mc md">    def _double_price(self): # private method<br/>        return self._price * self._hidden_factor</span><span id="5a33" class="lz kp hu jz b fv me mb l mc md">    def get_double_price(self):<br/>        return self._double_price() </span></pre><p id="698c" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated"><strong class="ix hv">single _ trailing _ underline _<br/></strong>这个约定可以用来避免与Python关键字或内置的冲突。你可能不会经常使用它。</p><pre class="lr ls lt lu fq lv jz lw lx aw ly dt"><span id="1e5f" class="lz kp hu jz b fv ma mb l mc md">Tkinter.Toplevel(master, class_='ClassName') # Avoid conflict with 'class' keyword</span><span id="543c" class="lz kp hu jz b fv me mb l mc md">list_ = List.objects.get(1) # Avoid conflict with 'list' built-in type</span></pre><p id="7d3d" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated"><strong class="ix hv">_ _ double _ leading _下划线<br/> </strong>这是关于语法而不是约定俗成的。<em class="iw">双下划线</em>将<em class="iw"> </em>打乱一个类的属性名，以避免类之间的属性名冲突。(所谓的“mangling”是指编译器或解释器用一些规则修改变量或函数名，而不是按原样使用)<br/>Python的mangling规则是在用<em class="iw">双下划线声明的属性名前面加上“_ClassName”。<br/> </em>也就是说，如果你在一个类中编写名为“_method”的方法，那么这个名字就会以“_ClassName__method”的形式出现错位。</p><pre class="lr ls lt lu fq lv jz lw lx aw ly dt"><span id="eeeb" class="lz kp hu jz b fv ma mb l mc md">class A:<br/>    def _single_method(self):<br/>        pass</span><span id="cedc" class="lz kp hu jz b fv me mb l mc md">    def __double_method(self): # for mangling<br/>        pass</span><span id="a38d" class="lz kp hu jz b fv me mb l mc md">class B(A):<br/>    def __double_method(self): # for mangling<br/>        pass</span></pre><p id="dedc" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">因为用<em class="iw">双下划线</em>命名的属性会像上面一样被破坏，所以我们不能用“ClassName”来访问它。_ _方法”。有时，有些人使用它就像真正的私人使用这些功能，但它不是私人的，也不建议这样做。更多详情，请阅读<a class="ae mf" href="http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#naming" rel="noopener ugc nofollow" target="_blank"> Python命名</a>。</p><p id="965a" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated"><strong class="ix hv">_ _ double _ leading _ and _ trailing _ underline _ _<br/></strong>此约定用于<code class="eh jw jx jy jz b">__init__</code>、<code class="eh jw jx jy jz b">__len__</code>等特殊变量或方法(所谓的“魔法”)。这些方法提供了特殊的语法特性或者做了特殊的事情。例如，<code class="eh jw jx jy jz b">__file__</code>表示Python文件的位置，<code class="eh jw jx jy jz b">__eq__</code>在执行<code class="eh jw jx jy jz b">a == b</code>表达式时执行。<br/>一个用户当然可以自定义特殊方法，这是很少见的情况，但是经常会修改一些内置的特殊方法。(例如，你应该用<code class="eh jw jx jy jz b">__init__</code>初始化这个类，当一个类的实例被创建时，它将首先被执行。)</p><pre class="lr ls lt lu fq lv jz lw lx aw ly dt"><span id="55cd" class="lz kp hu jz b fv ma mb l mc md">class A:<br/>    def __init__(self, a): # use special method '__init__' for initializing<br/>        self.a = a</span><span id="02ad" class="lz kp hu jz b fv me mb l mc md">    def __custom__(self): # custom special method. you might almost do not use it<br/>        pass</span></pre><h1 id="ad6f" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll dt translated">作为国际化(i18n)/本地化(l10n)功能</h1><p id="652b" class="pw-post-body-paragraph iu iv hu ix b iy lm ja jb jc ln je jf jt lo ji jj ju lp jm jn jv lq jq jr js hn dt translated">它只是约定俗成，没有任何语法功能。也就是说，下划线并不表示<strong class="ix hv"> i18n/l10n </strong>，它只是一个将<strong class="ix hv"> i18n/l10n </strong>绑定到<em class="iw">下划线</em>变量的约定，已经来自C约定。<br/>用于<strong class="ix hv"> i18n/l10n </strong>的内置库<code class="eh jw jx jy jz b">gettext</code>使用了这个约定，支持<strong class="ix hv"> i18n/l10n </strong>的Python web框架Django也引入并使用了这个约定。</p><pre class="lr ls lt lu fq lv jz lw lx aw ly dt"><span id="c04f" class="lz kp hu jz b fv ma mb l mc md"># see official docs : <a class="ae mf" href="https://docs.python.org/3/library/gettext.html" rel="noopener ugc nofollow" target="_blank">https://docs.python.org/3/library/gettext.html</a><br/>import gettext</span><span id="ec2d" class="lz kp hu jz b fv me mb l mc md">gettext.bindtextdomain('myapplication','/path/to/my/language/directory')<br/>gettext.textdomain('myapplication')<br/>_ = gettext.gettext</span><span id="5ca7" class="lz kp hu jz b fv me mb l mc md"># ...</span><span id="a2d3" class="lz kp hu jz b fv me mb l mc md">print(_('This is a translatable string.'))</span></pre><h1 id="545e" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll dt translated">分隔数字文字值的位数</h1><p id="2656" class="pw-post-body-paragraph iu iv hu ix b iy lm ja jb jc ln je jf jt lo ji jj ju lp jm jn jv lq jq jr js hn dt translated">这个特性是在Python 3.6中添加的。它用于使用下划线<em class="iw">和</em>分隔数字，以提高可读性。</p><pre class="lr ls lt lu fq lv jz lw lx aw ly dt"><span id="1355" class="lz kp hu jz b fv ma mb l mc md">dec_base = 1_000_000<br/>bin_base = 0b_1111_0000<br/>hex_base = 0x_1234_abcd</span><span id="8bff" class="lz kp hu jz b fv me mb l mc md">print(dec_base) # 1000000<br/>print(bin_base) # 240<br/>print(hex_base) # 305441741</span></pre><h1 id="afcb" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll dt translated">结论</h1><p id="759a" class="pw-post-body-paragraph iu iv hu ix b iy lm ja jb jc ln je jf jt lo ji jj ju lp jm jn jv lq jq jr js hn dt translated">到目前为止，我们已经讨论了Python的下划线。虽然我是一名Python程序员，但直到写了这篇文章，我才知道其中的一些。尤其是<strong class="ix hv"> i18n/l10n </strong>对我来说非常陌生。<br/>和我一样，我希望你从这篇文章中获得一些关于<em class="iw">下划线</em>的有用知识。</p><p id="2086" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">接下来，我将讲述更多关于Python的趣事。谢谢你。</p><p id="1e24" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated"><strong class="ix hv"> <em class="iw">更新<br/> </em> </strong> <em class="iw">新增新特性(PEP 515)在Python 3.6中新增</em></p><blockquote class="ir is it"><p id="b973" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated"><a class="ae mf" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是阿妹家庭的一员。我们现在<a class="ae mf" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae mf" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>的机会。</p><p id="dca4" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">要了解更多信息，请阅读我们的“关于”页面、<a class="ae mf" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">喜欢/在脸书上给我们发消息</a>，或者简单地发送<a class="ae mf" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae mf" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae mf" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="lr ls lt lu fq mg"><div class="bz el l di"><div class="mh mi l"/></div></figure></div></div>    
</body>
</html>