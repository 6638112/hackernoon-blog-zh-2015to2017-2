<html>
<head>
<title>A 6 Minute Guide to Password Systems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">密码系统6分钟指南</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-6-minute-guide-to-password-systems-52f1857dc0ec?source=collection_archive---------14-----------------------#2017-09-04">https://medium.com/hackernoon/a-6-minute-guide-to-password-systems-52f1857dc0ec?source=collection_archive---------14-----------------------#2017-09-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="9ea1" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">实现应用的第一道也是最后一道防线。</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/2257e4426c98f919d68ef11ff80eeaec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4IwGiQ87DWBXokwsO9MWsw.jpeg"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Photo by <a class="ae jz" href="https://unsplash.com/photos/PpwqEpJ9UaQ?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Antonina Bukowska</a> on <a class="ae jz" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="ka kb kc"><p id="2f33" class="kd ke kf kg b kh ki iv kj kk kl iy km kn ko kp kq kr ks kt ku kv kw kx ky kz hn dt translated">“这个世界上有两种加密技术:一种是阻止你妹妹阅读你的文件的加密技术，另一种是阻止主要政府阅读你的文件的加密技术。”—布鲁斯·施奈尔</p></blockquote><p id="2b27" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">荷兰密码学家Auguste Kerckhoffs曾经说过，一个系统应该是安全的，即使除了它的密钥之外，关于这个系统的一切都是已知的。在互联网的情况下，随着网络应用程序作为系统，密码已成为新的关键。毫不夸张地说，你最有价值的信息可能隐藏在你所有的社交媒体、云存储、数字银行等等之中。所以，你和可能劫持你生活的数字窃贼之间的第一道也是最后一道防线就是你的<a class="ae jz" href="https://hackernoon.com/tagged/password" rel="noopener ugc nofollow" target="_blank">密码</a>。</p><p id="e568" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">新闻出版物都被<strong class="kg hv">香蕉</strong>超过<a class="ae jz" href="https://hackernoon.com/tagged/security" rel="noopener ugc nofollow" target="_blank">安全</a>漏洞，然而对于后端开发的初学者来说，安全通常是最令人生畏的任务。我开发后端系统已经有几年了，但它仍然让我感到不安。因此，本指南的目的不是提供后端代码，而是为新开发人员提供一个好的密码系统的框架。</p><h1 id="e0dd" class="ld le hu bd lf lg lh li lj lk ll lm ln ja lo jb lp jd lq je lr jg ls jh lt lu dt translated">散列法</h1><p id="5298" class="pw-post-body-paragraph kd ke hu kg b kh lv iv kj kk lw iy km la lx kp kq lb ly kt ku lc lz kx ky kz hn dt translated">因此，您可能了解密码使用的基本知识:</p><ol class=""><li id="318e" class="ma mb hu kg b kh ki kk kl la mc lb md lc me kz mf mg mh mi dt translated">用户注册时提供密码。</li><li id="9692" class="ma mb hu kg b kh mj kk mk la ml lb mm lc mn kz mf mg mh mi dt translated">密码存储在数据库中。</li><li id="1d5b" class="ma mb hu kg b kh mj kk mk la ml lb mm lc mn kz mf mg mh mi dt translated">当用户稍后登录时，会将其尝试的密码与存储的密码进行比较。</li></ol><p id="b032" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">但是第二步是怎么发生的呢？如何安全地存储<em class="kf">密码</em>？</p><p id="01bc" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">在任何好的密码系统中，步骤2的基础在于使用<strong class="kg hv">散列</strong>算法。在现实世界中，我们不只是将密码存储在数据库中。我们存储了一个名为<strong class="kg hv">hash的密码表示。</strong>那么什么是哈希算法呢？</p><p id="3161" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">哈希算法是一个函数，当输入任意大小的字符串时，它将产生一个固定长度的字符串，称为<strong class="kg hv">哈希</strong>。更简单地说，哈希算法是一种单向函数，每次都将任何大小的文本转换成长度完全相同的文本。</p><pre class="jk jl jm jn fq mo mp mq mr aw ms dt"><span id="40ea" class="mt le hu mp b fv mu mv l mw mx">hash(“password”)= 5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8</span><span id="c844" class="mt le hu mp b fv my mv l mw mx">hash(“p4ssword”)= eca8e05d94c236e78c389e15e1cad71ff9326bdfa5e1d79d92766f38414e66e5</span><span id="883f" class="mt le hu mp b fv my mv l mw mx">// 1 different character = completely different hashes</span><span id="8ec1" class="mt le hu mp b fv my mv l mw mx">hash(“password”)= 5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8</span><span id="b1be" class="mt le hu mp b fv my mv l mw mx">// same input string = same output hash (every time)</span></pre><p id="2846" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">这是通过改变和解释输入文本直到它与原始字符串一点也不相似来实现的。例如，通常使用的SHA-256算法总是产生256比特的输出，总共有2个⁵⁶可能的输出。因此，当两个不同的输入字符串产生相同的输出时，很难产生<strong class="kg hv">冲突</strong>。事实上，在超过115个<em class="kf"> quattuorvigintillion </em>中有1个的几率(那是一个实数；它有78位数长)来产生碰撞。</p><p id="89ee" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">创建新用户时，不是将明文密码存储在数据库中，而是使用<strong class="kg hv">哈希算法</strong>存储密码的哈希。每当该用户稍后登录时，他们登录时使用的任何密码都会被散列，并与原始密码的散列进行比较以验证用户。这是因为即使黑客能够闯入数据库并查看其内容(这种情况比您想象的更常见)，哈希也能有效地隐藏每个密码，即使黑客知道使用的是哪种哈希算法。</p><blockquote class="mz"><p id="c8dc" class="na nb hu bd nc nd ne nf ng nh ni kz ek translated">克尔克霍夫会很自豪的。</p></blockquote><p id="f14f" class="pw-post-body-paragraph kd ke hu kg b kh nj iv kj kk nk iy km la nl kp kq lb nm kt ku lc nn kx ky kz hn dt translated">一些需要记住的事情:</p><p id="55db" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">1.对于相同的输入，哈希算法会产生相同的输出。<br/> 2。稍微不同的输入会产生完全不同的输出。<br/> 3。一个好的哈希算法可以最大限度地减少冲突。</p><p id="9fc3" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">或者只使用bcrypt(在最后一节中介绍)。</p><h1 id="9344" class="ld le hu bd lf lg lh li lj lk ll lm ln ja lo jb lp jd lq je lr jg ls jh lt lu dt translated">好的密码</h1><pre class="jk jl jm jn fq mo mp mq mr aw ms dt"><span id="c0b0" class="mt le hu mp b fv mu mv l mw mx">"cats_name_birth_year" = bad password</span><span id="a337" class="mt le hu mp b fv my mv l mw mx">“1Q8w$BSLsC” = good password</span></pre><p id="1e50" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">首先，什么是安全密码？</p><p id="9b3d" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">最好的密码不一定是同时包含数字、大小写字母和特殊字符的密码。超过8-10个字符的密码也是如此。相反，这些网络指南所做的是鼓励用户扩大密码的多样性，以(希望)创建一个独一无二的密码。最好的密码是没人用过的密码。原因如下。</p><blockquote class="mz"><p id="792a" class="na nb hu bd nc nd ne nf ng nh ni kz ek translated">让我们做一些快速的数学运算。</p></blockquote><p id="b679" class="pw-post-body-paragraph kd ke hu kg b kh nj iv kj kk nk iy km la nl kp kq lb nm kt ku lc nn kx ky kz hn dt translated">使用10个字符，您的标准26个小写字符将为您提供2⁶ ⁰可能的密码选项。这是一个很大的数字——准确地说是141，167，095，653，376。然而，我们也有26个大写字母可供我们使用(52个可能的字符)，这使我们的总密码数乘以1000。当您添加特殊字符和数字时，我们的密码总数(禁止条件)是59，873，693，923，837，890，000。</p><p id="f656" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">这个数字大得惊人，甚至让你无法理解。一个更容易理解的指标是破解一个给定密码需要多长时间。使用原始的SHA256散列算法，暴力破解整个密钥空间需要大约73.8万年。</p><p id="ef40" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">看起来足够安全了吗？<br/> <em class="kf">是啊，对。</em></p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff no"><img src="../Images/5cd185817b05e1c433588980063ae1fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JudEzPSpqGLsWVy8d1qbhQ.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Sort of relevant XKCD</figcaption></figure><h1 id="7f77" class="ld le hu bd lf lg lh li lj lk ll lm ln ja lo jb lp jd lq je lr jg ls jh lt lu dt translated">盐碱滩</h1><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff np"><img src="../Images/190f5a5ec77e6c58d8717e9a95ed2815.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DORwihtVtl3nhjofmpWM2A.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">A hacker’s best friend. (photo credits: kedeleducation)</figcaption></figure><p id="9b0e" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">尽管不可能对给定的哈希进行逆向工程，但我们已经标准化了像SHA这样的哈希算法。</p><p id="c0e5" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">这意味着黑客可以编译被称为常用密码字典的庞大数据集，并自己散列每个密码，以查看是否有任何相应的散列等于原始密码散列。另一种技术是预先计算字典的哈希值，并将它们放入一种称为查找表或彩虹表的数据结构中，这使得确定原始密码更加容易。由于大量的散列只能被计算一次并被重用，这些类型的攻击可能是高效的。</p><p id="c908" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">对抗这种黑客方法的最佳方式是使用<strong class="kg hv">盐</strong>:哈希时添加到密码中的额外随机字符。每个密码需要不同的salt，但是明文salt可以和密码一起存储。这怎么安全？</p><p id="6a51" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">Salting可以保护您的密码，因为salting会使存储在查找表中的所有散列变得无用，因为使用salt会完全改变散列。黑客最终将不得不求助于暴力破解密码。你的密码又(或多或少)安全了。</p><pre class="jk jl jm jn fq mo mp mq mr aw ms dt"><span id="746b" class="mt le hu mp b fv mu mv l mw mx">hash(“password”) = 5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8</span><span id="9ab6" class="mt le hu mp b fv my mv l mw mx">hash(“password” + “salt”) 7a37b85c8918eac19a9089c0fa5a2ab4dce3f90528dcdeec108b23ddf3607b99</span><span id="b098" class="mt le hu mp b fv my mv l mw mx">// completely different hash</span></pre><h1 id="1713" class="ld le hu bd lf lg lh li lj lk ll lm ln ja lo jb lp jd lq je lr jg ls jh lt lu dt translated">生产中的哈希</h1><p id="7e29" class="pw-post-body-paragraph kd ke hu kg b kh lv iv kj kk lw iy km la lx kp kq lb ly kt ku lc lz kx ky kz hn dt translated">那么，你能不能只采用SHA256实现，再加上一个安全的salt，然后就到此为止呢？稍等一会儿。</p><p id="eed3" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">原来你不能只推出自己的认证。当破解密码的唯一限制是GPU的运行速度时(GPU每年都在变快)，你的安全系统将开始像一个定时炸弹。为了解决这个问题，大多数现代认证系统使用一种叫做<strong class="kg hv">密钥拉伸</strong>的技术。</p><p id="2a6b" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">(用这个比喻:一把伸出来的钥匙需要更长的时间才能插入一个孔中，以检查它是否是正确的钥匙)</p><p id="00e5" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">密钥拉伸的工作原理超出了本指南的范围，但从本质上来说，这种技术使得黑客很难在短时间内测试出一堆哈希，因为它会降低哈希算法的速度，并迫使黑客在生成哈希之前等待(相对)很长时间。</p><p id="366e" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">bcrypt中使用了一种流行的密钥扩展实现，bcrypt是1999年专门为密码开发的密码哈希库。在一个技术快速超越自身的世界里，bcrypt的时代证明了它的强大。从node.js到C，这个库可以用任何语言编写，甚至可以生成一个密码安全的salt来防止rainbow攻击。有用吧？</p><pre class="jk jl jm jn fq mo mp mq mr aw ms dt"><span id="1b92" class="mt le hu mp b fv mu mv l mw mx">hash = bcrypt.hash(“passw0rd”, salt_length)</span><span id="b023" class="mt le hu mp b fv my mv l mw mx">// cue Staples Easy Button</span></pre><h1 id="2dfc" class="ld le hu bd lf lg lh li lj lk ll lm ln ja lo jb lp jd lq je lr jg ls jh lt lu dt translated">一些现实世界的建议</h1><p id="00a5" class="pw-post-body-paragraph kd ke hu kg b kh lv iv kj kk lw iy km la lx kp kq lb ly kt ku lc lz kx ky kz hn dt translated">使用bcrypt之类的库，使用双因素身份验证，跟踪网络安全的新兴趋势，并经常进行渗透测试。</p><p id="fa3c" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">如果你从这个指南中学到了什么，我希望是这个:永远不要推出你自己的认证。</p><p id="60b7" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">您的安全不仅仅是与黑客竞争，也是与其他安全系统竞争，因为黑客可以毫不费力地将其他黑客技术应用到您的系统中。</p><p id="c4e9" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated">记住这一重要的教训，你应该对安全系统有足够的了解。祝你好运！🙌</p></div><div class="ab cl nq nr hc ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="hn ho hp hq hr"><div class="jk jl jm jn fq nx"><a href="https://medium.com/the-elore-blog" rel="noopener follow" target="_blank"><div class="ny ab ej"><div class="nz ab oa cl cj ob"><h2 class="bd hv fv z el oc eo ep od er et ht dt translated">埃洛尔</h2><div class="oe l"><h3 class="bd b fv z el oc eo ep od er et ek translated">智能机器和它们背后的智能猴子</h3></div><div class="of l"><p class="bd b gc z el oc eo ep od er et ek translated">medium.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol jt nx"/></div></div></a></div><p id="1ac3" class="pw-post-body-paragraph kd ke hu kg b kh ki iv kj kk kl iy km la ko kp kq lb ks kt ku lc kw kx ky kz hn dt translated"><em class="kf">如果你喜欢有趣的计算机科学主题的速成课程，可以看看</em> <a class="ae jz" href="https://elore.io" rel="noopener ugc nofollow" target="_blank"> <em class="kf"> elore </em> </a> <em class="kf">！我们制作了像这样的很酷的文章，主题从机器学习到黑客马拉松。🐒</em></p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="om on l"/></div></figure></div></div>    
</body>
</html>