<html>
<head>
<title>A Practical Guide To Accidental Low Fee Transactions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">意外低费用交易实用指南</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/holy-cow-i-sent-a-bitcoin-transaction-with-too-low-fees-are-my-coins-lost-forever-7a865e2e45ba?source=collection_archive---------0-----------------------#2017-03-09">https://medium.com/hackernoon/holy-cow-i-sent-a-bitcoin-transaction-with-too-low-fees-are-my-coins-lost-forever-7a865e2e45ba?source=collection_archive---------0-----------------------#2017-03-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="978b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先:你的钱包很可能很烂，考虑换一个。第二:不要担心你的硬币是安全的。<strong class="it hv">三天内，您的交易要么得到确认，要么您的硬币“重新出现”在您的钱包中。</strong>这是一个简短的答案，它可能在99%的情况下都是正确的，但是让我们更深入地了解一下，如果你不想只是等待，那么就检查一下你的选择。<br/> <strong class="it hv">更新:</strong>正如<a class="ae jp" href="https://www.reddit.com/r/Bitcoin/comments/69jywp/a_practical_guide_to_accidental_low_fee/dhjfthf/?utm_content=permalink&amp;utm_medium=front&amp;utm_source=reddit&amp;utm_name=Bitcoin" rel="noopener ugc nofollow" target="_blank"> /u/ismith23所注</a>，从比特币0.14“交易再现”发生2周后。</p><p id="ab5d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一个更正确的答案可能是这样的:<strong class="it hv">当你发送一个费用太低的事务时，它会留在大多数满节点的内存池中(1)直到它过期，(2)直到一个挖掘器在一个块中捡起它并确认，或者(3)直到一些魔法使(1)或(2)发生。</strong></p><p id="6567" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">很甜蜜，不是吗？让我们在本文的其余部分分解这个句子。</p><p id="a37f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">1.当你用<strong class="it hv">太低的费用发送一笔交易</strong>……<br/>好吧，但是多低呢？</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/c82c9705426e5174a9cc2806b167f9bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M9jSrdtUzaTOCwca1nfhsw.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek"><a class="ae jp" href="https://bitcoinfees.21.co/" rel="noopener ugc nofollow" target="_blank">https://bitcoinfees.21.co/</a></figcaption></figure><p id="c753" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">根据https://bitcoinfees.21.co/在撰写本文时的说法，太低的费用意味着每笔20秒以下的交易都无法确认。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff kg"><img src="../Images/d68a57eb8a9a9116b7a470321e45b81b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OreZtbevNgYIDTI_LPwJSw.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek"><a class="ae jp" href="https://www.smartbit.com.au/tx/9532887bee013933a6457f7967e3e0da91228ebcc4ca07016c19ce469b6136fc" rel="noopener ugc nofollow" target="_blank">https://www.smartbit.com.au/tx/9532887bee013933a6457f7967e3e0da91228ebcc4ca07016c19ce469b6136fc</a></figcaption></figure><p id="7412" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您在任何块浏览器中查看您的事务，您将会看到它的大小。例如，上述事务的大小是:191字节。这将意味着你至少需要3820 satoshi费用，所以你可以肯定它会确认:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff kh"><img src="../Images/e741411c699731ba4c83732c75e4d22d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*unn5QWySQ5AV7C_SvrmhXg.png"/></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek"><a class="ae jp" href="https://www.google.com" rel="noopener ugc nofollow" target="_blank">https://www.google.com</a></figcaption></figure><p id="1ee0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这大约是5美分，或0.00004 btc:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff ki"><img src="../Images/ef258b431a9e200f92f8095007e812fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*pmT1OO-9aGO5wz1UHYrYfw.png"/></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek"><a class="ae jp" href="http://www.btcsatoshi.com/" rel="noopener ugc nofollow" target="_blank">http://www.btcsatoshi.com/</a></figcaption></figure><p id="d659" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你也可以在上面的blockexplorer的截图中看到，增加的费用是:0.000451 btc，它实际上也显示了每字节的Satoshi:236.13 sat/B，所以你可以放心地得出结论，它将确认。</p><p id="5035" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">2.当你发送一个费用太低的事务时，它<strong class="it hv">停留在大多数满节点的内存池中</strong> … <br/>什么是内存池？为什么<strong class="it hv">最多</strong>满节点？</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff kj"><img src="../Images/6c41cec531103fbce3c0cd16b68c8289.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8BT7cHhqKM0pVHDgwPVvmg.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek"><a class="ae jp" href="https://blockchain.info/charts/mempool-size?timespan=all" rel="noopener ugc nofollow" target="_blank">https://blockchain.info/charts/mempool-size?timespan=all</a></figcaption></figure><p id="597d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">满节点将未确认的事务保存在它们的内存池中。一些资源不足的完整节点根本不维护内存池，或者只保持高于某些费用的事务，但这实际上取决于节点实现，例如:</p><blockquote class="kk kl km"><p id="d56e" class="ir is kn it b iu iv iw ix iy iz ja jb ko jd je jf kp jh ji jj kq jl jm jn jo hn dt translated"><a class="ae jp" href="https://bitcointalk.org/index.php?topic=1714006.0" rel="noopener ugc nofollow" target="_blank">【来源】</a>比特币核心的默认最大内存池为300 MB，超过该值后，它将开始启动交易，并增加最低费用以获得接受。</p><p id="7677" class="ir is kn it b iu iv iw ix iy iz ja jb ko jd je jf kp jh ji jj kq jl jm jn jo hn dt translated">如果你想改变这种行为，你可以使用<code class="eh kr ks kt ku b">-maxmempool</code>设置。</p></blockquote><p id="46b0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这有什么关系？有一个机会，你增加了这么低的费用，你的交易甚至不能通过整个网络传播。如果您想要执行双重花费攻击，这将非常方便。</p><p id="db23" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">3.当你发送一个费用太低的交易时，它<strong class="it hv"> </strong>停留在大多数满节点(1)的内存池中，直到它或者<strong class="it hv">到期</strong> … <br/>惊喜，甚至“到期”这个词都需要一个解释。</p><p id="02bf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">自比特币核心0.12以来，有效期为72小时。这就是我说的“你的硬币3天后会重新出现在你的钱包里”的意思。</p><p id="9e85" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但这并不是故事的全部。该到期时间可能因节点实现而异，甚至完全不存在。事实上，即使在Core中，您也可以设置<code class="eh kr ks kt ku b">-mempoolexpiry</code>设置。但是，这还不是全部:任何人都可以重播那个交易，从而绕过这个有效期。我想知道当你设置一个节点并持续转播所有低费用交易直到时间结束时，攻击是否会起作用。</p><p id="faaf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在更大的背景下，您的事务不太可能在72小时后不会过期，所以您不必处理它，但这是值得记住的事情。</p><p id="afbb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">4.当你用太低的费用发送一个事务时，它<strong class="it hv"> </strong>停留在大多数满节点的内存池中(1)直到它或者<strong class="it hv"> </strong>到期，(2)直到一个矿工在一个块中拾起它并确认或者<strong class="it hv"> (3)直到一些魔法使(1)或(2)发生。<br/> </strong>魔法？我知道你在想什么。另一个过于复杂的技术术语。让我们看看这意味着什么:</p><h2 id="b5bd" class="kv kw hu bd kx ky kz la lb lc ld le lf jc lg lh li jg lj lk ll jk lm ln lo lp dt translated">选择加入付费替代</h2><blockquote class="kk kl km"><p id="5fb9" class="ir is kn it b iu iv iw ix iy iz ja jb ko jd je jf kp jh ji jj kq jl jm jn jo hn dt translated"><a class="ae jp" href="https://bitcoincore.org/en/faq/optin_rbf/" rel="noopener ugc nofollow" target="_blank">【来源】</a> Opt-in Replace-by-Fee (RBF)允许交易被标记为可替换，直到它们在块中被确认。</p></blockquote><p id="a137" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是，您或您的钱包必须首先将交易标记为可替换。如果你正在读这几行，很可能你已经错过了这个机会。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lq"><img src="../Images/31292cfad0214b3408845c53e573da52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SzjA-MS7fbhHMNYg."/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Opt-in RBF within Electrum wallet</figcaption></figure><p id="6a71" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在参考客户端中，将<code class="eh kr ks kt ku b">-walletrbf</code>选项设置为true。</p><h2 id="8009" class="kv kw hu bd kx ky kz la lb lc ld le lf jc lg lh li jg lj lk ll jk lm ln lo lp dt translated">孩子为父母付费</h2><p id="d1ca" class="pw-post-body-paragraph ir is hu it b iu lr iw ix iy ls ja jb jc lt je jf jg lu ji jj jk lv jm jn jo hn dt translated">在你试图理解它之前，先试着把这个术语形象化，嗯，因为它很有趣。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff lw"><img src="../Images/db925c8600c33a44a8f69a7051459f10.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/0*z5VBdiBBkOswUPon.jpg"/></div></figure><blockquote class="kk kl km"><p id="0d96" class="ir is kn it b iu iv iw ix iy iz ja jb ko jd je jf kp jh ji jj kq jl jm jn jo hn dt translated"><a class="ae jp" href="https://bitcoincore.org/en/faq/optin_rbf/" rel="noopener ugc nofollow" target="_blank">【来源】</a> <br/>子代父是一种通过进行依赖于第一笔交易的另一笔交易来增加交易费用的方式。</p><p id="64e1" class="ir is kn it b iu iv iw ix iy iz ja jb ko jd je jf kp jh ji jj kq jl jm jn jo hn dt translated">为什么CPFP没有被用于RBF？ <br/>孩子为父母买单(CPFP)并不能解决同样的问题。RBF允许<em class="hu">花费者</em>增加费用；CPFP是有用的，因为它允许<em class="hu">接受者</em>增加费用。<br/>与CPFP相比，RBF的优势在于它不一定需要使用任何额外的块空间，因此它的效率大约提高了<a class="ae jp" href="http://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-May/008232.html" rel="noopener ugc nofollow" target="_blank"> 30%到90% </a>。</p></blockquote><p id="7f19" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这听起来可能有点令人困惑，但它非常简单。只需花费你的花费者不小心把太低的费用加到较高费用的交易中，你就完成了。等等什么？可以花一笔没有确认的交易？是的，当然，但是大多数钱包不允许你这样做。</p><p id="85bd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">事实上，收款人必须能够以一种先进的方式使用她的/他的钱包，如果它不使CPFP容易默认的话。查看这篇<a class="ae jp" href="https://bitcointalk.org/index.php?topic=1118563.0" rel="noopener ugc nofollow" target="_blank">CPFP</a>讨论的完全白痴指南，探索你在具体案例中的可能性。</p><p id="bb7e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">事实上，正如Reddit用户Amichateur指出的那样，如果你发送的交易有零钱返回给你(这种情况几乎总是存在)，你可以把这些零钱花回给自己，这样就执行了一个CPFP交易。因此，对CPFP来说，你不一定非得站在接收者一方，大多数情况下，发送者也可以这样做。</p><h2 id="f66a" class="kv kw hu bd kx ky kz la lb lc ld le lf jc lg lh li jg lj lk ll jk lm ln lo lp dt translated">矿工魔法</h2><p id="deea" class="pw-post-body-paragraph ir is hu it b iu lr iw ix iy ls ja jb jc lt je jf jg lu ji jj jk lv jm jn jo hn dt translated">如果你和一个矿池有交易呢？该池承诺你拿起你的交易，无论多么低的费用，以换取一些东西。</p><p id="9456" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在写这篇文章的时候，ViaBTC pool <a class="ae jp" href="https://www.viabtc.com/tools/txaccelerator/" rel="noopener ugc nofollow" target="_blank">提供这项服务</a>作为交换，他们会向你灌输一些政治观点。这很容易使用，只需复制粘贴您的交易ID，他们会去拿它。请注意，他们目前接受“每小时最多可以加速100条提交的TXs。”</p><h2 id="32f8" class="kv kw hu bd kx ky kz la lb lc ld le lf jc lg lh li jg lj lk ll jk lm ln lo lp dt translated">双倍消费</h2><p id="3308" class="pw-post-body-paragraph ir is hu it b iu lr iw ix iy ls ja jb jc lt je jf jg lu ji jj jk lv jm jn jo hn dt translated">所有上述技术都可以归类为白魔法，但这种技术是黑魔法，我现在不打算详细介绍它，因为比特币开发者正在不断努力如何使这种黑魔法更难执行，而完全消除它可能永远不会发生，尽管双重支出游戏的规则在不断变化。</p><h1 id="218f" class="lx kw hu bd kx ly lz ma lb mb mc md lf me mf mg li mh mi mj ll mk ml mm lo mn dt translated">结论</h1><p id="17df" class="pw-post-body-paragraph ir is hu it b iu lr iw ix iy ls ja jb jc lt je jf jg lu ji jj jk lv jm jn jo hn dt translated">当你发送一个费用太低的事务时，它会留在大多数满节点的内存池中(1)直到它过期，(2)直到一个挖掘器在一个块中捡起它并确认，或者(3)直到一些魔法使(1)或(2)发生。</p><div class="jr js jt ju fq ab cb"><figure class="mo jv mp mq mr ms mt paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mo jv mp mq mr ms mt paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mo jv mp mq mr ms mt paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="kk kl km"><p id="f922" class="ir is kn it b iu iv iw ix iy iz ja jb ko jd je jf kp jh ji jj kq jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is kn it b iu iv iw ix iy iz ja jb ko jd je jf kp jh ji jj kq jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff mu"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>