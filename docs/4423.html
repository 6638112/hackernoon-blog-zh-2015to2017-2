<html>
<head>
<title>Why I’m So Frustrated With Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么我对围棋如此失望</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/why-im-so-frustrated-with-go-97c0c4ae214e?source=collection_archive---------0-----------------------#2017-06-01">https://medium.com/hackernoon/why-im-so-frustrated-with-go-97c0c4ae214e?source=collection_archive---------0-----------------------#2017-06-01</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="2a73" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从开始用Go到现在大概一年了。我用它写了很多代码，包括一整个<a class="ae jp" href="https://hackernoon.com/tagged/micro-service" rel="noopener ugc nofollow" target="_blank">微服务</a>和对glide的贡献。我想强调的是，在很大程度上，一切都很好。但是大约一个月一次，我的眼睛开始抽搐，我有冲动开始做一个头对桌子的动作。其中的原因很简单。因为我似乎经常进行这样的对话，所以我想我应该把我的想法记录下来，这样下次它出现时我就可以简单地引用它了。</p><h1 id="5672" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">简单的数据结构</h1><p id="0c67" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">我需要一个数据结构。它有以下要求:</p><ol class=""><li id="c109" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo ky kz la lb dt translated">它必须存储一个动物的名字和一个包含该动物信息的相关结构。</li><li id="1cda" class="kt ku hu it b iu lc iy ld jc le jg lf jk lg jo ky kz la lb dt translated">它必须有O(1)个查找时间。</li><li id="e68d" class="kt ku hu it b iu lc iy ld jc le jg lf jk lg jo ky kz la lb dt translated">我必须能够以某种预定义的顺序迭代它的元素。</li><li id="7cea" class="kt ku hu it b iu lc iy ld jc le jg lf jk lg jo ky kz la lb dt translated">它必须是不可变的。</li></ol><p id="df37" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">乍一看，我们可能会简单地使用这样的地图:</p><figure class="lh li lj lk fq ll"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="c3e5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这挺好的。事实上，它满足了我们的数据结构的前两个要求。但是自从围棋诞生以来，<a class="ae jp" href="https://blog.golang.org/go-maps-in-action#TOC_7." rel="noopener ugc nofollow" target="_blank">命令中的对象都是随机存储在地图中的</a>(理由很充分)。所以我不能做一些简单的事情，比如将所有元素按照我希望它们迭代的顺序插入到地图中。</p><p id="2996" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">好吧，没什么大不了的。我们可以通过多写一点代码来解决这个问题，使用一个数组来跟踪顺序。</p><figure class="lh li lj lk fq ll"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="a463" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，每当我们想要迭代映射时，我们需要迭代订单片段，使用我们提取的字符串作为映射的键。不是最棒的，但很管用。</p><h1 id="5597" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">不变性呢？</h1><p id="ae8e" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">这就是事情变得非常棘手的地方。Go没有<a class="ae jp" href="https://www.quora.com/What-is-the-compile-time-constant-and-run-time-constant-in-the-C-programming-language" rel="noopener ugc nofollow" target="_blank">运行时常数</a>的概念。如果我们希望事物在创建后是不可变的，我们将不得不完全，我的意思是完全，在我们的结构中封装切片和映射。这是因为地图和切片有<a class="ae jp" href="http://stackoverflow.com/questions/40680981/are-maps-passed-by-value-or-by-reference-in-go" rel="noopener ugc nofollow" target="_blank">按引用传递语义</a>。换句话说，如果我在任何时候给你一个对它们的引用，你都可以修改它们。我现在能想到的最好的方法就是代码爆炸:</p><figure class="lh li lj lk fq ll"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="b022" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">刚刚发生了什么？这是一个令人愤怒的代码量。你知道如果这是<a class="ae jp" href="https://stackoverflow.com/questions/2636303/how-to-initialize-a-private-static-const-map-in-c" rel="noopener ugc nofollow" target="_blank"> C++ </a>、<a class="ae jp" href="https://msdn.microsoft.com/en-us/library/dn467194(v=vs.111).aspx" rel="noopener ugc nofollow" target="_blank"> C# </a>或<a class="ae jp" href="https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html" rel="noopener ugc nofollow" target="_blank"> Java </a>我要写多少代码吗？没有。他们都有不可变的、有序的映射的可重用概念。然而在围棋中，每当我需要一个程序时，我都要写30行代码。我觉得我必须奋斗才能走到这一步。我感到悲伤。</p><h1 id="6cfc" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">结论</h1><p id="305d" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">围棋有一些非常好的概念。我喜欢它加强了继承的成分。Goroutines相当漂亮。总的来说，我对它相当满意。但一次又一次，我发现自己在使用Go时一遍又一遍地解决同样的问题。我发现自己完全被堵住了，没有办法写干代码。</p><p id="3ee1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我很乐意看到Go社区解决这样的问题。我不认为泛型可以解决上述所有问题，但是我知道这对Go社区来说是一个棘手的话题。也许是像通用数据结构和算法的简单形式的代码？</p></div><div class="ab cl lo lp hc lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hn ho hp hq hr"><p id="768a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Kurtis Nusbaum是优步的一名移动和后端开发人员。他是一个狂热的长跑运动员和多样性倡导者。可以在<a class="ae jp" href="https://twitter.com/klnusbaum" rel="noopener ugc nofollow" target="_blank"><em class="lv">Twitter</em></a><em class="lv">和</em><a class="ae jp" href="https://www.linkedin.com/in/knusbaum" rel="noopener ugc nofollow" target="_blank"><em class="lv">LinkedIn</em></a><em class="lv">上找到他。下面是他的</em><a class="ae jp" href="https://github.com/klnusbaum" rel="noopener ugc nofollow" target="_blank"><em class="lv">github</em></a><em class="lv">。你可以在这里</em>  <em class="lv">订阅他的邮件列表</em> <a class="ae jp" href="http://tinyletter.com/kurtis" rel="noopener ugc nofollow" target="_blank"> <em class="lv">。如果库尔提斯看起来是那种你愿意与之共事的人，给他发一封去kcommiter@gmail.com的电子邮件。</em></a></p></div><div class="ab cl lo lp hc lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hn ho hp hq hr"><p id="4014" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下面是<a class="ae jp" href="https://softwareengineering.stackexchange.com/questions/151733/if-immutable-objects-are-good-why-do-people-keep-creating-mutable-objects" rel="noopener ugc nofollow" target="_blank">为什么你可能想要不变性</a>。</p><p id="1b5e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">例如，尝试编写一个可重用的指数补偿算法或者一个可重用的二叉树。哦，还有就是不能用界面{}。我们用静态类型的语言对编程是有原因的。</p><blockquote class="lw lx ly"><p id="ccfb" class="ir is lv it b iu iv iw ix iy iz ja jb lz jd je jf ma jh ji jj mb jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is lv it b iu iv iw ix iy iz ja jb lz jd je jf ma jh ji jj mb jl jm jn jo hn dt translated">要了解更多信息，请<a class="ae jp" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">阅读我们的“关于”页面</a>、<a class="ae jp" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书上点赞/给我们发消息</a>，或者简单地说，<a class="ae jp" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ir is lv it b iu iv iw ix iy iz ja jb lz jd je jf ma jh ji jj mb jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="lh li lj lk fq ll"><div class="bz el l di"><div class="mc ln l"/></div></figure></div></div>    
</body>
</html>