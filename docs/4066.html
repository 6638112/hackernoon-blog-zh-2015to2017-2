<html>
<head>
<title>How to run Mocha/Chai unit tests on Node.js apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Node.js应用程序上运行Mocha/Chai单元测试</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-run-mocha-chai-unit-tests-on-node-js-apps-832eb2eba590?source=collection_archive---------3-----------------------#2017-05-10">https://medium.com/hackernoon/how-to-run-mocha-chai-unit-tests-on-node-js-apps-832eb2eba590?source=collection_archive---------3-----------------------#2017-05-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/7f2a3dda201cdd9cacda0f1e12cfd722.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AjcpO5fXga08mo2AJU93uQ.png"/></div></div></figure><div class=""/><h1 id="32d9" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">用Node.js创建Hello World网站</h1><p id="2421" class="pw-post-body-paragraph ka kb if kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">我们将从创建一个简单的<a class="ae ky" href="https://hackernoon.com/tagged/nodejs" rel="noopener ugc nofollow" target="_blank"> Node.js </a>应用程序开始，就像我们通常做的那样。本文的后续部分将解释如何用BuddyWorks编写、运行和自动化测试。</p><h2 id="97d3" class="kz jd if bd je la lb lc ji ld le lf jm kl lg lh jq kp li lj ju kt lk ll jy lm dt translated">安装Node.js</h2><p id="6a2b" class="pw-post-body-paragraph ka kb if kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">如果这是你第一次使用Node.js，首先安装npm管理器:<a class="ae ky" href="https://nodejs.org/en/download/package-manager/" rel="noopener ugc nofollow" target="_blank">nodejs.org/en/download/package-manager</a></p><h2 id="ebcd" class="kz jd if bd je la lb lc ji ld le lf jm kl lg lh jq kp li lj ju kt lk ll jy lm dt translated">安装NPM和摩卡</h2><p id="3885" class="pw-post-body-paragraph ka kb if kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">为应用程序创建一个目录:</p><pre class="ln lo lp lq fq lr ls lt lu aw lv dt"><span id="6419" class="kz jd if ls b fv lw lx l ly lz">mkdir myapp &amp;&amp; cd myapp</span></pre><p id="281e" class="pw-post-body-paragraph ka kb if kc b kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx hn dt translated">现在，应该初始化npm了。我们将使用它来创建一个带有<a class="ae ky" href="https://hackernoon.com/tagged/mocha" rel="noopener ugc nofollow" target="_blank"> Mocha </a>框架的<code class="eh mf mg mh ls b">package.json</code>:</p><pre class="ln lo lp lq fq lr ls lt lu aw lv dt"><span id="21b9" class="kz jd if ls b fv lw lx l ly lz">npm init</span></pre><p id="6f9a" class="pw-post-body-paragraph ka kb if kc b kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx hn dt translated">您将被要求提供应用程序的详细信息。键入以下内容:</p><ul class=""><li id="9ec8" class="mi mj if kc b kd ma kh mb kl mk kp ml kt mm kx mn mo mp mq dt translated">名称:<code class="eh mf mg mh ls b">hello-world</code></li><li id="7198" class="mi mj if kc b kd mr kh ms kl mt kp mu kt mv kx mn mo mp mq dt translated">切入点:<code class="eh mf mg mh ls b">app.js</code></li><li id="7345" class="mi mj if kc b kd mr kh ms kl mt kp mu kt mv kx mn mo mp mq dt translated">测试命令:<code class="eh mf mg mh ls b">./node_modules/.bin/mocha</code>这个框架将用于测试应用程序</li></ul><p id="1527" class="pw-post-body-paragraph ka kb if kc b kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx hn dt translated">按enter键确认其余的值。</p><h2 id="429a" class="kz jd if bd je la lb lc ji ld le lf jm kl lg lh jq kp li lj ju kt lk ll jy lm dt translated">用Express框架创建Hello World</h2><p id="8425" class="pw-post-body-paragraph ka kb if kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">Express Node.js web应用程序框架将用于构建应用程序:</p><pre class="ln lo lp lq fq lr ls lt lu aw lv dt"><span id="e6c6" class="kz jd if ls b fv lw lx l ly lz">npm install express --save</span></pre><h2 id="810f" class="kz jd if bd je la lb lc ji ld le lf jm kl lg lh jq kp li lj ju kt lk ll jy lm dt translated">Hello World的详细信息</h2><p id="aa55" class="pw-post-body-paragraph ka kb if kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">一旦你已经安装好了所有的东西，让我们用一个简单的HTTP服务器创建一个<code class="eh mf mg mh ls b">app.js</code>文件，它将服务于我们的Hello World网站:</p><pre class="ln lo lp lq fq lr ls lt lu aw lv dt"><span id="2fc2" class="kz jd if ls b fv lw lx l ly lz">//Load express module with `require` directive<br/>var express = require('express')<br/>var app = express()</span><span id="ab0a" class="kz jd if ls b fv mw lx l ly lz">//Define request response in root URL (/)<br/>app.get('/', function (req, res) {<br/>  res.send('Hello World')<br/>})</span><span id="f512" class="kz jd if ls b fv mw lx l ly lz">//Launch listening server on port 8080<br/>app.listen(8080, function () {<br/>  console.log('App listening on port 8080!')<br/>})</span></pre><h2 id="2a5b" class="kz jd if bd je la lb lc ji ld le lf jm kl lg lh jq kp li lj ju kt lk ll jy lm dt translated">运行应用程序</h2><p id="222e" class="pw-post-body-paragraph ka kb if kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">现在，应用程序可以启动了:</p><pre class="ln lo lp lq fq lr ls lt lu aw lv dt"><span id="75a2" class="kz jd if ls b fv lw lx l ly lz">$ node app.js</span></pre><p id="106f" class="pw-post-body-paragraph ka kb if kc b kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx hn dt translated">在浏览器中点击<code class="eh mf mg mh ls b">http://localhost:8080/</code>查看。</p><h1 id="cd9f" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">用Mocha和Chai配置单元测试</h1><p id="e759" class="pw-post-body-paragraph ka kb if kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">每个应用程序都应该在部署到服务器之前进行测试，尤其是当它是一个受欢迎的站点，给人留下第一印象的时候。这里，我们将使用Mocha作为测试运行框架，使用Chai作为断言库。</p><h2 id="fad9" class="kz jd if bd je la lb lc ji ld le lf jm kl lg lh jq kp li lj ju kt lk ll jy lm dt translated">装摩卡和柴</h2><p id="ec0b" class="pw-post-body-paragraph ka kb if kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">确保将摩卡和柴包添加到<code class="eh mf mg mh ls b">package.json</code>:</p><pre class="ln lo lp lq fq lr ls lt lu aw lv dt"><span id="32cf" class="kz jd if ls b fv lw lx l ly lz">npm install mocha --save<br/>npm install chai --save</span></pre><h2 id="250e" class="kz jd if bd je la lb lc ji ld le lf jm kl lg lh jq kp li lj ju kt lk ll jy lm dt translated">添加测试文件</h2><p id="61e9" class="pw-post-body-paragraph ka kb if kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">现在，是时候定义我们的第一个测试了…</p></div><div class="ab cl mx my hc mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="hn ho hp hq hr"><h1 id="2add" class="jc jd if bd je jf ne jh ji jj nf jl jm jn ng jp jq jr nh jt ju jv ni jx jy jz dt translated">喜欢你读的吗？<a class="ae ky" href="https://buddy.works/guides/how-automate-nodejs-unit-tests-with-mocha-chai?utm_source=medium&amp;utm_medium=post&amp;utm_campaign=how-to-run-mocha-chai-unit-tests-on-node-js-apps&amp;utm_content=link" rel="noopener ugc nofollow" target="_blank">点击此处查看完整指南</a>！</h1><figure class="ln lo lp lq fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nj"><img src="../Images/237fecb458d889482966108f09dae68f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W1Y4HuHEBAocrtsRNwFIAw.png"/></div></div></figure></div><div class="ab cl mx my hc mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="hn ho hp hq hr"><div class="ln lo lp lq fq ab cb"><figure class="nk hw nl nm nn no np paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="nk hw nl nm nn no np paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="nk hw nl nm nn no np paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="nq nr ns"><p id="f922" class="ka kb nt kc b kd ma kf kg kh mb kj kk nu mc kn ko nv md kr ks nw me kv kw kx hn dt translated"><a class="ae ky" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae ky" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae ky" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae ky" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ka kb nt kc b kd ma kf kg kh mb kj kk nu mc kn ko nv md kr ks nw me kv kw kx hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ky" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ky" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ln lo lp lq fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nx"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="ln lo lp lq fq hw"><div class="bz el l di"><div class="ny nz l"/></div></figure></div></div>    
</body>
</html>