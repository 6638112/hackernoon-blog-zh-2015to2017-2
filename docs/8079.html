<html>
<head>
<title>GitLab Performance Monitoring with Grafana</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Grafana监控GitLab性能</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/gitlab-performance-monitoring-with-grafana-a2394848d071?source=collection_archive---------2-----------------------#2017-11-18">https://medium.com/hackernoon/gitlab-performance-monitoring-with-grafana-a2394848d071?source=collection_archive---------2-----------------------#2017-11-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/e6d202be028142af16d6f20c372c5445.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*OthFs0Sn2AkTjzuc_JPctQ.png"/></div></figure><p id="bc45" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">从<strong class="ja hv"> GitLab v8.4 </strong>开始，您可以通过使用名为“<strong class="ja hv"> Gitlab性能监控</strong>”的GitLab应用程序性能测量系统，使用<strong class="ja hv">influx db</strong>&amp;<strong class="ja hv">Grafana</strong>堆栈来监控您自己的实例。</p><p id="93bf" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> GitLab </strong>通过<strong class="ja hv"> UDP将指标写入<strong class="ja hv"> InfluxDB </strong>。</strong>因此，这必须在<strong class="ja hv">/etc/influx db/influx db . conf</strong>中启用:</p><figure class="jw jx jy jz fq iv"><div class="bz el l di"><div class="ka kb l"/></div></figure><p id="d3e7" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">重启您的<strong class="ja hv"> InfluxDB </strong>实例。然后，创建一个数据库来存储<strong class="ja hv"> GitLab </strong>指标:</p><blockquote class="kc kd ke"><p id="91e9" class="iy iz kf ja b jb jc jd je jf jg jh ji kg jk jl jm kh jo jp jq ki js jt ju jv hn dt translated">创建数据库“gitlab_metrics”</p></blockquote><p id="407b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">接下来，转到<strong class="ja hv">Gitlab settings Dashboard</strong>并启用<strong class="ja hv">InfluxDB</strong>T24】Metrics，如下所示:</p><figure class="jw jx jy jz fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="fe ff kj"><img src="../Images/06851e3c44d8add55d29b082f1c4b581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YTishkjYrLBOqICC."/></div></div></figure><p id="c1f6" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">然后，你需要重启<strong class="ja hv"> GitLab </strong>:</p><blockquote class="kc kd ke"><p id="8593" class="iy iz kf ja b jb jc jd je jf jg jh ji kg jk jl jm kh jo jp jq ki js jt ju jv hn dt translated">gitlab-ctl重新启动</p></blockquote><p id="6d4f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在，您的<strong class="ja hv"> GitLab </strong>实例应该将数据发送到<strong class="ja hv"> InfluxDB </strong>:</p><figure class="jw jx jy jz fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="fe ff ko"><img src="../Images/6bdc89eaff77e064a22a445207250eaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1K3hfKRxMRIy5V8i."/></div></div></figure><p id="8d9f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">最后，将您的浏览器指向您的<strong class="ja hv"> Grafana URL </strong>，然后以<em class="kf"> admin </em>用户的身份登录。从菜单中选择<strong class="ja hv">数据源</strong>。然后，点击顶部栏中的“<strong class="ja hv">添加新的</strong>”。</p><p id="cb0d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">填写<strong class="ja hv"> InfluxDB </strong>数据源的配置详细信息:</p><figure class="jw jx jy jz fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="fe ff kp"><img src="../Images/1df9beca7e3de3c0bd782c1c7275440b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kig7lYtDNODnHMY-."/></div></div></figure><p id="1633" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">您现在可以通过打开仪表板下拉菜单并单击'<strong class="ja hv">导入</strong>'来导入<a class="ae kq" href="https://github.com/mlabouardy/grafana-dashboards/blob/master/gitlab/dashboard.json" rel="noopener ugc nofollow" target="_blank"><em class="kf">dashboard . JSON</em></a>文件:</p><figure class="jw jx jy jz fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="fe ff kr"><img src="../Images/4d19f3b89eebe1f1d812dcf1bfb1d845.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gFljOUlXzm_1QZxW."/></div></div></figure><p id="1d1b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">注:查看我的<a class="ae kq" href="https://github.com/mlabouardy/grafana-dashboards" rel="noopener ugc nofollow" target="_blank"> Github </a>获得更多互动&amp;漂亮<strong class="ja hv"> Grafana </strong>仪表盘。</p></div></div>    
</body>
</html>