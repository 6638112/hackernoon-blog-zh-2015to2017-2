<html>
<head>
<title>5 steps to build perfect plugin system for your application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为你的应用建立完美插件系统的5个步骤</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/5-steps-to-build-perfect-plugin-system-for-your-application-8a9dba25328a?source=collection_archive---------16-----------------------#2017-06-29">https://medium.com/hackernoon/5-steps-to-build-perfect-plugin-system-for-your-application-8a9dba25328a?source=collection_archive---------16-----------------------#2017-06-29</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="400e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你曾经尝试过为桌面应用程序创建一个插件吗？那么你就会知道，这往往是一个漫长而不舒服的过程。你的插件API就是你的界面，这个界面越简单，使用它的人就越多，你的插件就越多。</p><p id="3b5e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在<a class="ae jp" href="https://hackernoon.com/tagged/development" rel="noopener ugc nofollow" target="_blank">为<a class="ae jp" href="https://cerebroapp.com/" rel="noopener ugc nofollow" target="_blank">脑波机</a>开发</a>插件系统的过程中，我定义了几个步骤来构建一个完美的插件系统。既然是<a class="ae jp" href="https://electron.atom.io/" rel="noopener ugc nofollow" target="_blank">电子</a>应用，我就分享一些<a class="ae jp" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> javascript </a>相关的细节，但主要思路适合任何种类的app。</p><h1 id="3ec2" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">步骤1:生成代码</h1><p id="c37b" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">在大多数情况下，当你想创建一个插件时，你可以下载一个档案，并把它作为你插件的框架。通常它包含一些混乱，这实际上与你的代码无关。有时候你不得不花时间去寻找最新的版本。所以，要做的工作太多了。</p><p id="6d6d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">脑波强化器插件是一个简单的npm包。有什么方法可以生成javascript？当然有<a class="ae jp" href="http://yeoman.io/" rel="noopener ugc nofollow" target="_blank">约曼</a>，但不是标配。<a class="ae jp" href="https://yarnpkg.com" rel="noopener ugc nofollow" target="_blank">纱线</a>更接近标准，它包括<a class="ae jp" href="https://yarnpkg.com/blog/2017/05/12/introducing-yarn/" rel="noopener ugc nofollow" target="_blank">创建</a>命令。其实很简单:<code class="eh kt ku kv kw b">yarn create something</code>只是寻找名为<code class="eh kt ku kv kw b">create-something</code>的npm包，全局安装并运行这个包中的二进制文件。最流行的例子是<a class="ae jp" href="https://github.com/facebookincubator/create-react-app" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>。</p><p id="411e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用这句话的时间:</p><blockquote class="kx ky kz"><p id="e9f1" class="ir is la it b iu iv iw ix iy iz ja jb lb jd je jf lc jh ji jj ld jl jm jn jo hn dt translated">好的艺术家借，伟大的艺术家偷</p></blockquote><p id="8a22" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你想做一个伟大的javascript包生成器——只要从<a class="ae jp" href="https://github.com/facebookincubator/create-react-app" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>那里偷点灵感就行了。React社区在这方面做得很好！</p><p id="1737" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这就是我们如何构建<a class="ae jp" href="https://github.com/KELiON/create-cerebro-plugin" rel="noopener ugc nofollow" target="_blank"> create-cerebro-plugin </a>的，它可以生成框架并安装插件的所有依赖项，只需简单的命令:</p><p id="e199" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh kt ku kv kw b">yarn create cerebro-plugin demo</code></p><figure class="lf lg lh li fq lj fe ff paragraph-image"><div class="fe ff le"><img src="../Images/69efaea2cea79ff6ece334c6d8b4ea57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/1*dSSPW68KKA2nmTwMJMZPyg.gif"/></div></figure><h1 id="7726" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">第二步:隐藏细节</h1><p id="1008" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">create-react-app的另一个很酷的地方是，它对开发者隐藏了所有的配置和构建过程，所以你只需要关心你的代码，而不是环境。</p><p id="8ff2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">和插件开发有什么关系？有时应用程序需要把插件放到某个目录下才能启动。但是如果我想把我所有的代码项目都存储在一个目录中，比如<code class="eh kt ku kv kw b">~/projects</code>呢？我们必须手动符号链接目录，再次:关心太多的东西…</p><p id="61b7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在准备好环境的情况下，我们对开发人员隐藏这些细节和配置，只给他们一个简单的命令:<code class="eh kt ku kv kw b">yarn start</code>初始化准备好的环境，因此您可以立即开始开发:</p><figure class="lf lg lh li fq lj fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lm"><img src="../Images/b9f576f29ed62985bf83a98275df20c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*FzjI6Krq6fOQa_bnQEFbLQ.gif"/></div></div></figure><h1 id="e633" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">步骤3:自动更新</h1><p id="ddae" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">你还记得每次修改插件代码后重启或重新加载应用程序时的那种感觉吗？真是浪费时间！特别是当你使用带有<a class="ae jp" href="https://webpack.js.org/concepts/hot-module-replacement/" rel="noopener ugc nofollow" target="_blank">热模块替换</a>的现代前端堆栈时，你会忘记刷新按钮。只要为你的插件开发者提供相同的用户体验。他们会很高兴看到即时反馈:</p><figure class="lf lg lh li fq lj fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lr"><img src="../Images/30fdcb0d0b1abb8baf05a8f57cdbf968.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CrlG4lT-JzAmPUzxb5UI9w.gif"/></div></div></figure><h1 id="de5d" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">第四步:准备积木</h1><p id="faae" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">大部分脑波强化器插件与搜索相关。每个开发人员都可以找到npm包来获取数据和搜索，但在这种情况下，用户体验会不一致。如果应用程序搜索会变得<a class="ae jp" href="https://en.wikipedia.org/wiki/Approximate_string_matching" rel="noopener ugc nofollow" target="_blank">模糊</a>，但其他的都不会，那会怎样？如果每个插件都有自己的UI元素和风格会怎样？</p><figure class="lf lg lh li fq lj fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff ls"><img src="../Images/491997f621379291ebebc3ee6ef459c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TdCGltg3VgywqM7DIP-ZWA.jpeg"/></div></div><figcaption class="lt lu fg fe ff lv lw bd b be z ek">Photo by <a class="ae jp" href="http://unsplash.com/@kellysikkema" rel="noopener ugc nofollow" target="_blank">Kelly Sikkema</a> / <a class="ae jp" href="http://www.unsplash.com" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e38f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们准备好构建模块:主要功能(如果是Cerebro，是为了更快的响应和搜索的记忆)和UI元素。只是把它作为一个单独的<a class="ae jp" href="https://github.com/kelion/cerebro-tools" rel="noopener ugc nofollow" target="_blank">包</a> <a class="ae jp" href="https://github.com/KELiON/cerebro-ui" rel="noopener ugc nofollow" target="_blank">包</a>提供:插件开发者会很乐意关心他们的代码<em class="la"/>，而不是UI和实现细节。</p><h1 id="6c88" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">步骤5:统一发布和分发</h1><p id="7147" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">我记得这个时候，我不得不在论坛、GitHub或其他地方搜索一些应用程序的扩展，而这些扩展不受应用程序创建者的支持。但是当你在一个地方看到所有插件时，我会更相信。如果你不需要离开应用程序来管理它们，那就更好了。</p><p id="1b96" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">开发者也一样:提供统一的发布方式。当您使用node时，最好的地方是(不可预测！)npm。由于插件是简单的节点包，它可以发布到全局npm注册表，并通过关键字使用<a class="ae jp" href="https://registry.npmjs.com/-/v1/search?from=0&amp;size=500&amp;text=keywords:cerebro-plugin" rel="noopener ugc nofollow" target="_blank"> npm搜索API </a>找到。</p><p id="49ac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">没有额外的工具和命令，只有一个简单的已知命令<code class="eh kt ku kv kw b">npm publish ./</code>，所有用户都可以在注册表中找到新的插件:</p><figure class="lf lg lh li fq lj fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lx"><img src="../Images/1f2c62aa8b8aa9f7fc2b9d22af5f0b02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bF87CkUlOh6dQlIZRUlDyw.png"/></div></div></figure><h1 id="47c7" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">结论</h1><p id="a4ba" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">看起来这篇文章的主要思想适用于一切，不仅仅是桌面应用程序和扩展:</p><ul class=""><li id="948b" class="ly lz hu it b iu iv iy iz jc ma jg mb jk mc jo md me mf mg dt translated">简化一切:从想法到出版的过程应该平稳、快速、简单；</li><li id="d45c" class="ly lz hu it b iu mh iy mi jc mj jg mk jk ml jo md me mf mg dt translated">围绕你的产品改善生态系统；</li><li id="405b" class="ly lz hu it b iu mh iy mi jc mj jg mk jk ml jo md me mf mg dt translated">珍惜开发人员的时间，并加快他们的速度；</li><li id="5306" class="ly lz hu it b iu mh iy mi jc mj jg mk jk ml jo md me mf mg dt translated">提供一致性:开发过程、ui、行为。</li></ul><div class="lf lg lh li fq ab cb"><figure class="mm lj mn mo mp mq mr paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mm lj mn mo mp mq mr paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mm lj mn mo mp mq mr paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="kx ky kz"><p id="f922" class="ir is la it b iu iv iw ix iy iz ja jb lb jd je jf lc jh ji jj ld jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is la it b iu iv iw ix iy iz ja jb lb jd je jf lc jh ji jj ld jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="lf lg lh li fq lj fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff ms"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="lf lg lh li fq lj"><div class="bz el l di"><div class="mt mu l"/></div></figure></div></div>    
</body>
</html>