<html>
<head>
<title>Installation of VNC server on Ubuntu</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Ubuntu上安装VNC服务器</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/installation-of-vnc-server-on-ubuntu-1cf035370bd3?source=collection_archive---------2-----------------------#2017-09-04">https://medium.com/hackernoon/installation-of-vnc-server-on-ubuntu-1cf035370bd3?source=collection_archive---------2-----------------------#2017-09-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><blockquote class="ir is it"><p id="10d4" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated"><a class="ae jt" href="https://sunnykrgupta.github.io/installation-of-vnc-server-on-ubuntu.html" rel="noopener ugc nofollow" target="_blank">最初发布于sunnykrgupta.github.io </a></p></blockquote><p id="7313" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf ju jh ji jj jv jl jm jn jw jp jq jr js hn dt translated">这个博客是为那些想在运行在<a class="ae jt" href="https://en.wikipedia.org/wiki/Cloud_computing" rel="noopener ugc nofollow" target="_blank">云</a>上的linux <a class="ae jt" href="https://en.wikipedia.org/wiki/Server_(computing)" rel="noopener ugc nofollow" target="_blank">服务器</a>上安装GUI或桌面环境并连接的人准备的。</p><p id="b771" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf ju jh ji jj jv jl jm jn jw jp jq jr js hn dt translated">我们将使用VNC(虚拟网络计算)协议来访问我们的远程桌面服务器。</p><h2 id="eba2" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ju ki kj kk jv kl km kn jw ko kp kq kr dt translated">什么是VNC？</h2><p id="98b3" class="pw-post-body-paragraph iu iv hu ix b iy ks ja jb jc kt je jf ju ku ji jj jv kv jm jn jw kw jq jr js hn dt translated">虚拟网络计算(Virtual network computing)或VNC(Virtual network computing)是一个图形桌面共享系统，允许你远程控制一台计算机。VNC服务器传输键盘和鼠标事件，并通过网络连接显示远程主机的屏幕，这允许您操作完整的<a class="ae jt" href="https://en.wikipedia.org/wiki/Desktop_environment" rel="noopener ugc nofollow" target="_blank">桌面环境</a>。</p><p id="91de" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf ju jh ji jj jv jl jm jn jw jp jq jr js hn dt translated">基本上ubuntu server和ubuntu cloud editions不包含GUI，这需要在安装VNC服务器之前安装。请注意，服务器和云版本是精心设计的，以利用更少的硬件资源(最小环境)，安装GUI可能会导致高硬件利用率。</p><h2 id="5340" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ju ki kj kk jv kl km kn jw ko kp kq kr dt translated">为什么我需要远程服务器的桌面环境？</h2><p id="ba5d" class="pw-post-body-paragraph iu iv hu ix b iy ks ja jb jc kt je jf ju ku ji jj jv kv jm jn jw kw jq jr js hn dt translated">为了解释一个用例，让我告诉你我最初是如何使用VNC的。我正在解决一个与云延迟测试相关的问题。我的朋友<a class="ae jt" href="https://www.linkedin.com/in/neekneeraj/" rel="noopener ugc nofollow" target="_blank">尼拉杰</a> <em class="iw">(他的工作围绕核心JS研究&amp;开发)</em>开发了一个javascript代码，该代码对浏览器地理位置附近的<a class="ae jt" href="https://en.wikipedia.org/wiki/Cloud_load_balancing" rel="noopener ugc nofollow" target="_blank">负载平衡器</a>进行跨源<a class="ae jt" href="https://sunnykrgupta.github.io/(https://en.wikipedia.org/wiki/Web_API)" rel="noopener ugc nofollow" target="_blank"> HTTP API </a>调用，响应将从地理位置邻近的负载平衡器中发出。为了测试这个设置，执行JS代码，并使用<a class="ae jt" href="https://developer.mozilla.org/en/docs/Tools/Browser_Console" rel="noopener ugc nofollow" target="_blank">开发人员控制台</a>来查看网络层下发生了什么，我们需要一个位于不同地理位置的浏览器引擎。我本可以使用一些在线付费或免费服务来租用浏览器，如<a class="ae jt" href="https://www.browserstack.com/" rel="noopener ugc nofollow" target="_blank"> browserstack </a>或其他服务，但有免费分钟试用限制。</p></div><div class="ab cl kx ky hc kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hn ho hp hq hr"><h1 id="90fb" class="le jy hu bd jz lf lg lh kd li lj lk kh ll lm ln kk lo lp lq kn lr ls lt kq lu dt translated">在Ubtunu 14.04上安装桌面和VNC服务器</h1><h2 id="762d" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ju ki kj kk jv kl km kn jw ko kp kq kr dt translated">步骤1-安装Ubuntu桌面</h2><p id="033d" class="pw-post-body-paragraph iu iv hu ix b iy ks ja jb jc kt je jf ju ku ji jj jv kv jm jn jw kw jq jr js hn dt translated">开始安装下面的<em class="iw"> gnome包</em>，这有助于VNC正确加载。包括<em class="iw"> ubuntu desktop </em>在内的所有版本都需要这些包。</p><pre class="lv lw lx ly fq lz ma mb mc aw md dt"><span id="e57f" class="jx jy hu ma b fv me mf l mg mh">$ sudo apt-get install --no-install-recommends ubuntu-desktop gnome-panel gnome-settings-daemon metacity nautilus gnome-terminal gnome-core</span></pre><h2 id="e73c" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ju ki kj kk jv kl km kn jw ko kp kq kr dt translated">步骤2 —安装vnc4server软件包。</h2><pre class="lv lw lx ly fq lz ma mb mc aw md dt"><span id="031e" class="jx jy hu ma b fv me mf l mg mh">$ sudo apt-get install vnc4server</span></pre><h2 id="5d5b" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ju ki kj kk jv kl km kn jw ko kp kq kr dt translated">步骤3 —在vncserver中进行配置更改</h2><p id="c588" class="pw-post-body-paragraph iu iv hu ix b iy ks ja jb jc kt je jf ju ku ji jj jv kv jm jn jw kw jq jr js hn dt translated">打开<code class="eh mi mj mk ma b">/usr/bin/vncserver</code>文件，编辑如下。编辑之前，请制作备份副本。</p><pre class="lv lw lx ly fq lz ma mb mc aw md dt"><span id="d809" class="jx jy hu ma b fv me mf l mg mh">$ sudo cp /usr/bin/vncserver /usr/bin/vncserver.bkp</span><span id="4aca" class="jx jy hu ma b fv ml mf l mg mh">$ sudo vim /usr/bin/vncserver</span><span id="ff11" class="jx jy hu ma b fv ml mf l mg mh"><em class="iw">#Find this line "# exec /etc/X11/xinit/xinitrcnn".</em><br/><em class="iw">#and add these lines like below</em></span><span id="afc5" class="jx jy hu ma b fv ml mf l mg mh">    "# exec /etc/X11/xinit/xinitrcnn".<br/>       "gnome-panel &amp;n".<br/>       "gnome-settings-daemon &amp;n".<br/>       "metacity &amp;n".<br/>       "nautilus &amp;n".<br/>       "gnome-terminal &amp;n".</span></pre><h2 id="bd33" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ju ki kj kk jv kl km kn jw ko kp kq kr dt translated">步骤4 —启动vncserver</h2><p id="ebdd" class="pw-post-body-paragraph iu iv hu ix b iy ks ja jb jc kt je jf ju ku ji jj jv kv jm jn jw kw jq jr js hn dt translated">现在键入命令<code class="eh mi mj mk ma b">vncserver</code>开始VNC会话。系统将提示您创建新的vnc密码。</p><pre class="lv lw lx ly fq lz ma mb mc aw md dt"><span id="e297" class="jx jy hu ma b fv me mf l mg mh">$ vncserver<br/>You will require a password to access your desktops through VNC Clients.<br/>Password:******<br/>Verify:******</span><span id="c1aa" class="jx jy hu ma b fv ml mf l mg mh">xauth: file /root/.Xauthority does not exist<br/>New 'ubuntu-desktop:1 (root)' desktop is ubuntu-desktop:1</span><span id="0a44" class="jx jy hu ma b fv ml mf l mg mh">Starting applications specified in /root/.vnc/xstartup<br/>Log file is /root/.vnc/ubuntu-desktop:1.log</span></pre><h2 id="2d41" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ju ki kj kk jv kl km kn jw ko kp kq kr dt translated">步骤5 —要检查VNC服务器是否已启动，请执行以下操作</h2><pre class="lv lw lx ly fq lz ma mb mc aw md dt"><span id="9b15" class="jx jy hu ma b fv me mf l mg mh">$ netstat -tulpn</span><span id="0070" class="jx jy hu ma b fv ml mf l mg mh">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name<br/>tcp        0      0 0.0.0.0:6001            0.0.0.0:*               LISTEN      28372/Xvnc4<br/>tcp6       0      0 :::5901                 :::*                    LISTEN      28372/Xvnc4</span></pre><blockquote class="ir is it"><p id="e046" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">VNC服务器正在运行并监听<strong class="ix hv"> 5901端口</strong>。确保你的防火墙允许<strong class="ix hv">入站</strong> TCP连接到这个端口。</p></blockquote><h2 id="95e6" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ju ki kj kk jv kl km kn jw ko kp kq kr dt translated">步骤6 —配置您的防火墙</h2><p id="9928" class="pw-post-body-paragraph iu iv hu ix b iy ks ja jb jc kt je jf ju ku ji jj jv kv jm jn jw kw jq jr js hn dt translated">如果<strong class="ix hv">防火墙</strong>处于活动状态，您需要打开入站通信端口。如果没有启用防火墙，您可以跳过这一部分。</p><pre class="lv lw lx ly fq lz ma mb mc aw md dt"><span id="c797" class="jx jy hu ma b fv me mf l mg mh"><em class="iw">#allow SSH</em><br/>$ sudo ufw allow OpenSSH</span><span id="ae75" class="jx jy hu ma b fv ml mf l mg mh"><em class="iw">#allowing single port 5901 port</em><br/>$ sudo ufw allow 5901/tcp</span><span id="0b56" class="jx jy hu ma b fv ml mf l mg mh"><em class="iw">#To allow series of port 5901 - 5910, follow</em><br/>$ sudo ufw allow 5901:5910/tcp</span><span id="76e1" class="jx jy hu ma b fv ml mf l mg mh"><em class="iw">#To check firewall rules</em><br/>$ sudo  ufw status verbose</span><span id="aa65" class="jx jy hu ma b fv ml mf l mg mh">Status: active<br/>Logging: on (low)<br/>Default: deny (incoming), allow (outgoing), disabled (routed)<br/>New profiles: skip</span><span id="c9cd" class="jx jy hu ma b fv ml mf l mg mh">To                         Action      From<br/>--                         ------      ----<br/>22/tcp (OpenSSH)           ALLOW IN    Anywhere<br/>5901:5910/tcp              ALLOW IN    Anywhere<br/>22/tcp (OpenSSH (v6))      ALLOW IN    Anywhere (v6)<br/>5901:5910/tcp (v6)         ALLOW IN    Anywhere (v6)WW</span></pre><blockquote class="ir is it"><p id="1e98" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated"><a class="ae jt" href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-14-04" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hv">在配置UFW防火墙上写得好</strong> </a></p></blockquote><h2 id="54c6" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ju ki kj kk jv kl km kn jw ko kp kq kr dt translated">步骤7-连接到VNC服务器</h2><p id="8d4b" class="pw-post-body-paragraph iu iv hu ix b iy ks ja jb jc kt je jf ju ku ji jj jv kv jm jn jw kw jq jr js hn dt translated">使用任何允许VNC协议远程桌面连接客户端。使用服务器的<a class="ae jt" href="https://en.wikipedia.org/wiki/IP_address" rel="noopener ugc nofollow" target="_blank"> IP地址</a>以及VNC服务器监听的端口。</p><figure class="lv lw lx ly fq mn fe ff paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="fe ff mm"><img src="../Images/ac42174eb9d56b39f299a2a1279b6590.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*EBrbQBlml2ziyVR2OQTo-A.png"/></div></div><figcaption class="mu mv fg fe ff mw mx bd b be z ek">Connect -Remote Desktop Viewer</figcaption></figure><p id="22a3" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf ju jh ji jj jv jl jm jn jw jp jq jr js hn dt translated">一旦连接到你的VNC服务器，你会看到你安装桌面GUI的远程服务器的屏幕。</p><figure class="lv lw lx ly fq mn fe ff paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="fe ff my"><img src="../Images/b50dfb1e63e31eefa1d3f256cc3889e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iq9_DYdunxqif7Rd1HadiQ.png"/></div></div><figcaption class="mu mv fg fe ff mw mx bd b be z ek">Launch Firefox from Terminal</figcaption></figure><p id="c777" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf ju jh ji jj jv jl jm jn jw jp jq jr js hn dt translated">在远程服务器上运行的浏览器屏幕。</p><figure class="lv lw lx ly fq mn fe ff paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="fe ff mz"><img src="../Images/3c74a80fd1af48a8147e4707b82a4355.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*31nIviJgshvUXZ_pNGZ2aA.png"/></div></div><figcaption class="mu mv fg fe ff mw mx bd b be z ek">Google UK</figcaption></figure><p id="b8dd" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf ju jh ji jj jv jl jm jn jw jp jq jr js hn dt translated">就这样，你的VNC服务器开始工作了。</p><blockquote class="ir is it"><p id="b85b" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">在这里，我在英国伦敦创建了我的linux服务器。我通过终端打开火狐浏览器，找到了google.com的网址。它开辟了基于区域搜索引擎的google.co.uk领域。你可以在VNC协议上做很多其他的事情来远程完成事情。</p></blockquote></div><div class="ab cl kx ky hc kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hn ho hp hq hr"><p id="544b" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf ju jh ji jj jv jl jm jn jw jp jq jr js hn dt translated"><strong class="ix hv">守护博客:</strong><a class="ae jt" href="https://sunnykrgupta.github.io/installation-of-vnc-server-on-ubuntu.html" rel="noopener ugc nofollow" target="_blank">https://sunnykrgupta . github . io/installation-of-VNC-server-on-Ubuntu . html</a></p><div class="na nb fm fo nc nd"><a href="https://sunnykrgupta.github.io/installation-of-vnc-server-on-ubuntu.html" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab ej"><div class="nf ab ng cl cj nh"><h2 class="bd hv fv z el ni eo ep nj er et ht dt translated">守护程序博客-在Ubuntu上安装VNC服务器</h2><div class="nk l"><h3 class="bd b fv z el ni eo ep nj er et ek translated">桑尼·库马尔的文章和文章</h3></div><div class="nl l"><p class="bd b gc z el ni eo ep nj er et ek translated">sunnykrgupta.github.io</p></div></div><div class="nm l"><div class="nn l no np nq nm nr ms nd"/></div></div></a></div><figure class="lv lw lx ly fq mn"><div class="bz el l di"><div class="ns nt l"/></div></figure></div></div>    
</body>
</html>