<html>
<head>
<title>Introducing Javascript ES6 Proxies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Javascript ES6代理简介</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/introducing-javascript-es6-proxies-1327419ab413?source=collection_archive---------2-----------------------#2017-08-15">https://medium.com/hackernoon/introducing-javascript-es6-proxies-1327419ab413?source=collection_archive---------2-----------------------#2017-08-15</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/98b118d4679f93a6fab722aa8545ccd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Os73oeLFhdiJ2r6FrPR9w.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">introducing javascript es6 proxies</figcaption></figure><p id="aabf" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt ke translated">ES6标准中引入的新特性之一是<strong class="ji hv">代理</strong>对象。<strong class="ji hv">代理</strong>对象用于定义基本操作的自定义行为(如属性查找、赋值、枚举、函数调用等)。</p></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><p id="8227" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你可能很快会遇到一些对你来说陌生的术语/概念，我鼓励你坚持下去，因为<strong class="ji hv">代理</strong>概念实际上相当简单和有用。</p><p id="80f4" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在继续之前，我们需要定义3个关键术语:</p><ul class=""><li id="9a17" class="ku kv hu ji b jj jk jn jo jr kw jv kx jz ky kd kz la lb lc dt translated"><strong class="ji hv">处理程序</strong> —包含陷阱的占位符对象</li><li id="e7c3" class="ku kv hu ji b jj ld jn le jr lf jv lg jz lh kd kz la lb lc dt translated"><strong class="ji hv">陷阱</strong> —提供属性访问的方法</li><li id="78eb" class="ku kv hu ji b jj ld jn le jr lf jv lg jz lh kd kz la lb lc dt translated"><strong class="ji hv">目标</strong> —代理虚拟化的对象</li></ul><p id="a20b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">检查此处的<a class="ae li" href="http://www.zsoltnagy.eu/es6-proxies-in-practice/" rel="noopener ugc nofollow" target="_blank">以获得所有可用<strong class="ji hv">陷阱的列表。</strong></a></p></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><p id="116f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们看一些例子和实际应用。</p><h1 id="8392" class="lj lk hu bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg dt translated">句法</h1><p id="bc24" class="pw-post-body-paragraph jg jh hu ji b jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz ml kb kc kd hn dt translated">下面是一个代理语法的例子，其中我们传入了一个<strong class="ji hv">目标</strong>(在这个例子中是一个空对象)和一个<strong class="ji hv">处理程序</strong>。</p><figure class="mn mo mp mq fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mm"><img src="../Images/6188a28047949554ddb58a7cc4dcc29f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oa9i-nxrcpytpibHr7ygdA.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">proxy syntax</figcaption></figure><h1 id="62c3" class="lj lk hu bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg dt translated">通用对象特性查找行为</h1><figure class="mn mo mp mq fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mr"><img src="../Images/a73504f450bccf0a27de2e97f37102c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jv97T57mrGEvrXJK_l9MVg.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">common object property lookup behavior</figcaption></figure><p id="afc6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在上面的代码片段中，我们有一个带有两个键的简单对象(<strong class="ji hv">原因</strong>和<strong class="ji hv">代码</strong>)。注意，第7行和第8行的控制台日志返回键值。然后注意第9行的正常行为。我们试图检索一个不存在的键(<strong class="ji hv"> beer </strong>，所以我们收到<em class="ms"> undefined。</em></p><h1 id="bba1" class="lj lk hu bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg dt translated">代理对象属性查找行为</h1><figure class="mn mo mp mq fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mt"><img src="../Images/f28874cc9d4c2c3888425ad5475b9df3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d7VvMRJXnMMXR3OivX5RJA.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">proxied object lookup behavior</figcaption></figure><p id="05c4" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在这个片段中还有更多的内容。我们定义了使用<strong class="ji hv"> GET </strong>陷阱的处理程序(第3行)。处理程序将目标和请求的键名传递到陷阱中。第11行包含我们的通用对象查找示例中的相同对象。我们的<strong class="ji hv">代理</strong>在第16行被实例化。</p><p id="e79e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">注意第18行和第19行的控制台日志返回预期的键值。但是请看一下日志第20行的规则—<em class="ms">‘键不存在’。</em></p><p id="1150" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们已经用自定义代理覆盖了操作的默认行为。</p><h1 id="cebb" class="lj lk hu bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg dt translated">使用代理来执行值验证</h1><figure class="mn mo mp mq fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mu"><img src="../Images/2c87ff249b3e7c50afc2db99ffae08ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zx04XrdAefouZk0yxygQeQ.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">proxies to enforce value validation</figcaption></figure><p id="1bbe" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在这个代码片段中，我们在第4行定义了我们的<strong class="ji hv">处理程序</strong>。然后，我们检查以确保<em class="ms"> age </em> prop是正在设置的那个，如果是，我们验证类型和可接受的值范围。如果验证失败，则会传递自定义错误消息。否则，在第16行，我们设置新的属性值，并返回true来表示属性值设置成功。没什么。</p></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><p id="c4db" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">代理</strong> 有很多现实世界的应用</p><ul class=""><li id="bc3a" class="ku kv hu ji b jj jk jn jo jr kw jv kx jz ky kd kz la lb lc dt translated">确认</li><li id="8ab2" class="ku kv hu ji b jj ld jn le jr lf jv lg jz lh kd kz la lb lc dt translated">价值修正</li><li id="372e" class="ku kv hu ji b jj ld jn le jr lf jv lg jz lh kd kz la lb lc dt translated">属性查找扩展</li><li id="8cac" class="ku kv hu ji b jj ld jn le jr lf jv lg jz lh kd kz la lb lc dt translated">跟踪属性访问</li><li id="4869" class="ku kv hu ji b jj ld jn le jr lf jv lg jz lh kd kz la lb lc dt translated">可撤销的引用</li><li id="aff5" class="ku kv hu ji b jj ld jn le jr lf jv lg jz lh kd kz la lb lc dt translated">用javascript实现DOM</li></ul></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><p id="4938" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这就是ES6中的代理。在<a class="ae li" href="https://twitter.com/reasoncode" rel="noopener ugc nofollow" target="_blank">推特</a>上让我们知道你的想法和问题。坚持下去。</p><h1 id="b32a" class="lj lk hu bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg dt translated">如果你喜欢这篇文章，请推荐分享，帮助别人找到！</h1><figure class="mn mo mp mq fq iv fe ff paragraph-image"><div class="fe ff mv"><img src="../Images/6ca8d8237c62634322efbca85a00bee2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*dfdhH31znY8Jb8xdNgTAYg.gif"/></div></figure></div></div>    
</body>
</html>