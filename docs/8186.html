<html>
<head>
<title>Install MEAN Stack Using CloudFormation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用CloudFormation安装平均堆栈</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/install-mean-stack-using-cloudformation-4d16fc2fc1a?source=collection_archive---------11-----------------------#2017-11-22">https://medium.com/hackernoon/install-mean-stack-using-cloudformation-4d16fc2fc1a?source=collection_archive---------11-----------------------#2017-11-22</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/269dc3d216c475680c906e96a8b64a43.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*YcoZ-LZFFxnLR6nA4ceh8g.png"/></div></figure><p id="df97" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> AWS CloudFormation </strong>是一项帮助您建模、设置和复制AWS资源的服务。它使用一个<strong class="ja hv">模板</strong>文件将资源集合作为单个堆栈。</p><p id="12a7" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">为了创建模板，我们使用了一个<strong class="ja hv"> JSON文件</strong>或<strong class="ja hv">AWS cloud formation Designer</strong>。对于本教程，我选择了第一个解决方案。</p><p id="7f41" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">注:模板在我的<a class="ae jw" href="https://github.com/mlabouardy/aws-cloudformation-templates" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hv"> Github </strong> </a> <strong class="ja hv">上有。</strong></p><p id="f10b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我们从一个基本模板开始，该模板定义了一个带有<strong class="ja hv">安全组</strong>的<strong class="ja hv"> EC2实例</strong>，该安全组<strong class="ja hv">允许端口<strong class="ja hv"> 22 </strong>上的SSH流量</strong>，端口<strong class="ja hv"> 27017 </strong>上的<strong class="ja hv"> MongoDB </strong>流量，以及来自任何地方<strong class="ja hv">的<strong class="ja hv"> 3000 </strong>上的<strong class="ja hv"> NodeJS </strong>应用，如图所示</strong></p><figure class="jx jy jz ka fq iv"><div class="bz el l di"><div class="kb kc l"/></div></figure><p id="d597" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">除此之外，我们创建两个输入参数，指定<em class="kd">实例类型</em>和一个<em class="kd">密钥对</em>，用于<strong class="ja hv"> SSH访问</strong>。然后，我们使用<em class="kd"> UserData </em>属性提供一组shell命令来安装<strong class="ja hv"> MongoDB </strong>、<strong class="ja hv"> NodeJS </strong>并引导一个简单的<strong class="ja hv"> MEAN </strong>应用程序。最后，输出部分打印出<strong class="ja hv">意味着</strong>应用程序的公共URL。</p><p id="5c14" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在我们定义了模板。转到<a class="ae jw" href="https://console.aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hv"> AWS管理控制台</strong> </a>，然后导航到<strong class="ja hv"> CloudFormation仪表板</strong>，并点击<strong class="ja hv">创建堆栈</strong>:</p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/7e7ffadaaab0d7b09857b78cd8365998.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*-gXFcwJ_JCa0u5Vc."/></div></figure><p id="e2dd" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">上传JSON文件，点击<strong class="ja hv">下一步</strong>:</p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/78a6ab01e54708eefe0629ab7a2cb861.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*5w30Ebe-5-FVLVDa."/></div></figure><p id="581a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">为堆栈指定一个名称，并选择您的实例类型和将用于ssh到实例的密钥对。然后，点击<strong class="ja hv">下一个</strong>:</p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/8499a8c663091d718035f530940c039a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*udy2iNObHA_0ABn5."/></div></figure><p id="bdf4" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">保持所有字段不变，点击下一个的<strong class="ja hv">，然后点击<strong class="ja hv">创建</strong></strong></p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/6b6dea06eeebf7bcd983f0d3c1375d8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*DKVuwhOibARsF9gb."/></div></figure><p id="0a77" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">启动后，您将看到以下启动流程事件的屏幕:</p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/c7478edf683fd77e9318bc47e0c20cef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*_JPcmsoBHHRnyVB2."/></div></figure><p id="116f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">过一会儿，您会在status选项卡中看到CREATE_COMPLETE消息。</p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/82c13be046648893c93006836229b970.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*fZXHvNAIaX38Bcxi."/></div></figure><p id="47a9" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果您将浏览器指向<strong class="ja hv">输出</strong>选项卡中显示的<strong class="ja hv"> URL </strong>，您应该会看到:一条简单的HTML消息:</p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/d7cce959a2ff518ddb856f9824fd0048.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*qnALmaFOBs87frZs."/></div></figure><p id="43a4" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果我们更改端点，我们应该会看到一个JSON响应:</p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/79d7b2f9c3c1a07ef473f8e4ca7aab69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*IUnFFAhmanWxaoL2."/></div></figure><p id="b896" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">恭喜你！您已经部署了您的<strong class="ja hv">均值堆栈应用程序</strong>。</p><p id="6041" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">转到<strong class="ja hv"> EC2仪表板</strong>，您应该在那里看到您的实例:</p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/2ee4aa1bcb6c01ea96e9ae48bb463d57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*bkOk3It6VhRMDq7p."/></div></figure><p id="aea5" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">验证<strong class="ja hv">安全组</strong>是否按照模板中的配置进行了设置:</p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/b76235b50c37f48fd5922b3c6cea7942.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*KA9t_CxL_gu9HBMn."/></div></figure><p id="f93c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">要验证所有软件包和依赖项是否已正确安装，我们可以通过SSH连接到服务器:</p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/329ae5dfadb4e41bbe73d16eda766d87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*UnWf1UsCkQLQ5zNF."/></div></figure><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/82daf8fa71b96ece3ecfb84c9d13919a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*TT1AsTmK5dcf40-G."/></div></figure><p id="9a40" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">要终止实例，我们可以从<strong class="ja hv">云形成向导</strong>中删除堆栈，删除堆栈将终止堆栈启动的所有实例:</p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/d009da04a15df026170bd13c72022eb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*pjXMRZMOWfR5LWh-."/></div></figure></div></div>    
</body>
</html>