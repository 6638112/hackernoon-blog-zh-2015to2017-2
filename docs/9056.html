<html>
<head>
<title>Giving a twitter bot ability to predict bitcoin value based on historical data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">赋予twitter机器人基于历史数据预测比特币价值的能力</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/giving-a-twitter-bot-ability-to-predict-bitcoin-value-based-on-historical-data-dbe237c40430?source=collection_archive---------6-----------------------#2017-12-24">https://medium.com/hackernoon/giving-a-twitter-bot-ability-to-predict-bitcoin-value-based-on-historical-data-dbe237c40430?source=collection_archive---------6-----------------------#2017-12-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/7858e9203f4030598a5eb97679346555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nsYRcnsIdSa6CZC4ru71vw.jpeg"/></div></div></figure><p id="932b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一段时间以来，我一直对加密货币感兴趣，最重要的是预测它们在未来几天的涨跌。我尝试过一些算法，但最终，我认为没有人能确切地宣称他们的上升或下降。我曾试图只专注于一种货币，而作为领头羊的比特币，我决定追随它。</p><p id="9766" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">免责声明:本文将集中解释用于预测值的算法。</p><p id="37fc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我发现获取比特币相关信息的最快方式是在twitter上，所以我决定创建一个机器人，它会每隔2小时发布一条关于未来N天比特币价值的预测。n是人们要求最多的天数。例如，如果3个人请求机器人预测未来5天的价值，7个人请求机器人预测未来2天的价值，机器人会在推特上发布2天的预测，因为请求预测的人越多。</p><p id="7e6d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我很快创建了一个node应用程序，经过一段时间的搜索，并试图找出查询历史数据、比特币图表和提取有用数据的最佳方式，这些数据可能有助于<a class="ae ka" href="https://hackernoon.com/tagged/future" rel="noopener ugc nofollow" target="_blank">未来</a>的兴衰，我决定将K近邻与其他一些算法结合起来。</p><p id="1b96" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">该预测算法由以下步骤构成:</p><ol class=""><li id="99c6" class="kb kc hu je b jf jg jj jk jn kd jr ke jv kf jz kg kh ki kj dt translated">收集所有用户推文(请求)</li><li id="c961" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">获取最需要预测的日期</li><li id="997b" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">获取当前的比特币价值</li><li id="7485" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">找出过去2个月中K (10)个最近的日期，在这些日期，比特币的价值与当前价值最相似</li><li id="ca91" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">对于找到的每一个日期(称之为过去的日期)，在接下来的N天(称之为过去的日期之后的N天)后，找到BTC的值</li><li id="8b9d" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">对于每个日期，计算N_DAYS_AFTER_PAST_DATE和PAST_DATE上的值之间的差值</li><li id="c3cb" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">将所有这些差值相加，然后除以K</li><li id="1780" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">结果是，在所有过去日期和过去日期后N天之间的给定时间跨度内，比特币增长了多少</li></ol><p id="048b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果这让你感到困惑，我现在会试着让它变得更清楚一点。</p><h2 id="8dc4" class="kp kq hu bd kr ks kt ku kv kw kx ky kz jn la lb lc jr ld le lf jv lg lh li lj dt translated">第一步:收集所有用户的推文(请求)</h2><p id="27d3" class="pw-post-body-paragraph jc jd hu je b jf lk jh ji jj ll jl jm jn lm jp jq jr ln jt ju jv lo jx jy jz hn dt translated">使用<a class="ae ka" href="https://www.npmjs.com/package/twit" rel="noopener ugc nofollow" target="_blank"> Twit </a>模块，我在twitter api中搜索包含“@ coin _ instinct Predict for&lt;number&gt;days”的推文，从推文中提取数字，并创建数字数组。</p><h2 id="fd10" class="kp kq hu bd kr ks kt ku kv kw kx ky kz jn la lb lc jr ld le lf jv lg lh li lj dt translated">第二步:获取请求最多的日期</h2><p id="de8c" class="pw-post-body-paragraph jc jd hu je b jf lk jh ji jj ll jl jm jn lm jp jq jr ln jt ju jv lo jx jy jz hn dt translated">当一个预测被发布时，要预测的未来天数被存储在一个黑名单数组中。黑名单数组包含过去4个预测的天数，这有助于解决冗余问题，并在过去8小时内发布相同的预测。</p><figure class="lp lq lr ls fq iv"><div class="bz el l di"><div class="lt lu l"/></div></figure><p id="d1ee" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个函数非常简单，它只是获取数字数组中请求最多的数字。如果这个数字已经存在于blackListArr中，那么它返回第二个请求最多的数字，依此类推。如果所有请求的号码都在黑名单中，那么机器人会预测未来的n天。</p><h2 id="2706" class="kp kq hu bd kr ks kt ku kv kw kx ky kz jn la lb lc jr ld le lf jv lg lh li lj dt translated">第三步:获取当前比特币价值</h2><p id="9a32" class="pw-post-body-paragraph jc jd hu je b jf lk jh ji jj ll jl jm jn lm jp jq jr ln jt ju jv lo jx jy jz hn dt translated">使用blockchain.info API，我们可以获得比特币的当前价值，并将其存储到一个变量中</p><figure class="lp lq lr ls fq iv"><div class="bz el l di"><div class="lt lu l"/></div></figure><p id="bc12" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">该功能将在算法开始工作后2分钟运行。</p><h2 id="f2b0" class="kp kq hu bd kr ks kt ku kv kw kx ky kz jn la lb lc jr ld le lf jv lg lh li lj dt translated">第四步:找到K个最近的邻居</h2><p id="340e" class="pw-post-body-paragraph jc jd hu je b jf lk jh ji jj ll jl jm jn lm jp jq jr ln jt ju jv lo jx jy jz hn dt translated">在这里，我不会包括所有被调用的函数，例如查询coindesk api，查找PAST_DATES和N_DAYS_AFTER_PAST_DATE，我将只根据我们得到的相似性来推断最近的邻居。整个项目可以在我的github页面上找到，我把它放在了本文的底部。</p><figure class="lp lq lr ls fq iv"><div class="bz el l di"><div class="lt lu l"/></div></figure><p id="975a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当我们计算过去2个月的所有比特币价值与当前比特币价值之间的差异时，我们需要找到差值最接近0的日期。所以我们先叫数学。对整个相似性数组进行Abs，然后按升序对数组进行排序。</p><p id="2515" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">从这里我们可以很容易地得出比特币价值最接近现在价值的前10个日期。</p><h2 id="adff" class="kp kq hu bd kr ks kt ku kv kw kx ky kz jn la lb lc jr ld le lf jv lg lh li lj dt translated">第五步:获得最终结果数组</h2><p id="ade8" class="pw-post-body-paragraph jc jd hu je b jf lk jh ji jj ll jl jm jn lm jp jq jr ln jt ju jv lo jx jy jz hn dt translated">在这里，我们将获得对象的数组，每个包含开始和结束属性。Start property将代表历史上特定一天的比特币价值，End property将代表该特定一天之后N天的比特币价值。从这些数据中，我们可以洞察价值的增长或损失。</p><figure class="lp lq lr ls fq iv"><div class="bz el l di"><div class="lt lu l"/></div></figure><p id="6cd2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">代码非常简单，我们遍历所有的kNearest并获得特定日期的数据。将这些结果存储到finalResults数组中并返回它。</p><h2 id="2eca" class="kp kq hu bd kr ks kt ku kv kw kx ky kz jn la lb lc jr ld le lf jv lg lh li lj dt translated">第六步:计算预测</h2><p id="944c" class="pw-post-body-paragraph jc jd hu je b jf lk jh ji jj ll jl jm jn lm jp jq jr ln jt ju jv lo jx jy jz hn dt translated">剩下的就是计算预测，我们在下一个函数调用中完成。</p><figure class="lp lq lr ls fq iv"><div class="bz el l di"><div class="lt lu l"/></div></figure><p id="5d19" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">就是这样！我们还需要创建包含所有表情符号的酷文本，当然还要发布预测。</p><h1 id="8aff" class="lv kq hu bd kr lw lx ly kv lz ma mb kz mc md me lc mf mg mh lf mi mj mk li ml dt translated">结论</h1><p id="b019" class="pw-post-body-paragraph jc jd hu je b jf lk jh ji jj ll jl jm jn lm jp jq jr ln jt ju jv lo jx jy jz hn dt translated">如果你还在为一些很好的东西挠头，请记住，这些只是原始函数，摘自我的github repo上的完整代码:<a class="ae ka" href="https://github.com/ognjengt/coin-instinct-bot" rel="noopener ugc nofollow" target="_blank">https://github.com/ognjengt/coin-instinct-bot</a>。请务必检查一下，所有这一切将更有意义。</p><p id="e5d4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">另外，这只是我预测未来几天比特币价值的方法，我想听听大家对这种方法的看法。预测值并不总是与正确的值相匹配，但是我注意到大多数时候，预测值只差100或200美元。所以你可以说这不是一个很大的失误，特别是在这个秘密的世界里，图表像疯了一样上下浮动。</p><p id="c03c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这种算法的问题是，它只是分析历史比特币数据，并据此做出预测，因此没有任何方法来检测价值是否会下降。我正在努力插入一个人的因素，我会在网站上寻找暗示比特币价值崩溃的文章，并将其加入等式。</p><p id="8653" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当然，这篇文章的主题是。要观看twitter机器人的实际运行，你可以点击这里的链接:<a class="ae ka" href="https://twitter.com/coin_instinct" rel="noopener ugc nofollow" target="_blank">https://twitter.com/coin_instinct</a>。试试看，然后发微博给他！请求预测！</p><p id="fe40" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">感谢您阅读这篇文章，如果您有任何问题，欢迎在评论中发表或在twitter上找到我【https://twitter.com/ognjengt<a class="ae ka" href="https://twitter.com/ognjengt" rel="noopener ugc nofollow" target="_blank"/></p><figure class="lp lq lr ls fq iv"><div class="bz el l di"><div class="mm lu l"/></div></figure></div></div>    
</body>
</html>