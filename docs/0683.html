<html>
<head>
<title>Tips for Writing a Great iOS Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写优秀iOS框架的技巧</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/tips-for-writing-a-great-ios-framework-8cf3452f6c5d?source=collection_archive---------0-----------------------#2016-03-12">https://medium.com/hackernoon/tips-for-writing-a-great-ios-framework-8cf3452f6c5d?source=collection_archive---------0-----------------------#2016-03-12</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="00e2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">本帖最初发表于</em><a class="ae jq" href="http://www.samjarman.co.nz/blog/" rel="noopener ugc nofollow" target="_blank"><em class="jp">【SamJarman.co.nz/blog】</em></a></p><p id="a42c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">随着Cocoapods和即将到来的Swift Package Manager的兴起，许多开发人员正在尝试编写一个框架/库供其他开发人员使用(这很好，您应该这样做！).但是，写框架和写正规app代码的心态是不一样的，有几个小窍门和小技巧值得了解。</p><p id="c275" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我从事<a class="ae jq" href="https://github.com/carnivalmobile/carnival-ios-sdk" rel="noopener ugc nofollow" target="_blank">框架</a>已经有一年多了，在这个过程中我学到了一些东西。</p><h2 id="c12d" class="jr js hu bd jt ju jv jw jx jy jz ka kb jc kc kd ke jg kf kg kh jk ki kj kk kl dt translated">代码的命名空间</h2><p id="0069" class="pw-post-body-paragraph ir is hu it b iu km iw ix iy kn ja jb jc ko je jf jg kp ji jj jk kq jm jn jo hn dt translated">命名空间，即在我们的类名前面加几个字母的行为，是防止与其他代码冲突的一大进步。这通常是用作者或苹果的名字来完成的。例如，我可以给我的代码加上前缀<em class="jp"> SAJ </em>，这样我就有<em class="jp"> SAJAppDelegate、SAJMyModel、SAJMyViewController </em>作为类。对于框架，3个字母的前缀是最好的(感谢那些在twitter上向我指出这一点的人！).</p><p id="fdd9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">另一个人们经常忘记的地方是在你的分类方法中。我建议在所有的分类方法前加一个3个字母的前缀。</p><p id="a164" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，如果您要通过返回最近的公共假日的类别向NSDate添加一个方法，您应该将其命名为类似于<em class="jp"> saj_nearestBankHoliday，</em>调用它类似于<em class="jp">ns date * easterFriday =[ns date saj _ nearestbank holiday]；</em></p><h2 id="1398" class="jr js hu bd jt ju jv jw jx jy jz ka kb jc kc kd ke jg kf kg kh jk ki kj kk kl dt translated">使用可空性注释</h2><p id="0a17" class="pw-post-body-paragraph ir is hu it b iu km iw ix iy kn ja jb jc ko je jf jg kp ji jj jk kq jm jn jo hn dt translated">对于使用Objective-C的开发人员来说，你可以做的一件事就是使用可空性注释，这样才能真正给Swift用户一些爱。这将允许Swift用户正确地知道属性、返回值和参数是否可以为空。</p><p id="820e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp"> @property(非原子、强、可空)NSString * firstName</em></p><p id="f66a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">-(void)greet person:(nonnull ns string *)person name {…}</em></p><h2 id="f2ee" class="jr js hu bd jt ju jv jw jx jy jz ka kb jc kc kd ke jg kf kg kh jk ki kj kk kl dt translated">使用泛型</h2><p id="bd45" class="pw-post-body-paragraph ir is hu it b iu km iw ix iy kn ja jb jc ko je jf jg kp ji jj jk kq jm jn jo hn dt translated">增强Swift开发人员体验的另一个好方法是使用泛型。这允许你指定一种类型的对象，这种类型的对象通常接受NSObject的任何ol '子类。Swift用户将获得一个真实的物体，而不是<em class="jp">【any object】</em>，他们不必施展才能正确使用。耶。</p><p id="dd49" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">例如，您现在可以指定一个数组只包含字符串</p><p id="d6a2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp"> @property(非原子、强、非空)ns array&lt;ns string *&gt;* names；</em></p><p id="59af" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这将变成</p><p id="23d5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Swift中的<em class="jp">【ns string】</em>。</p><h2 id="0500" class="jr js hu bd jt ju jv jw jx jy jz ka kb jc kc kd ke jg kf kg kh jk ki kj kk kl dt translated">详细记录</h2><p id="38a9" class="pw-post-body-paragraph ir is hu it b iu km iw ix iy kn ja jb jc ko je jf jg kp ji jj jk kq jm jn jo hn dt translated">我现在听起来可能像一张破唱片，但这是许多开发人员根本不会花时间去做的事情。写一些该死的评论。至少，您应该在所有的公共头文件中编写文档，如果所有的源代码都是公开的，那么应该在每个方法上编写文档。</p><p id="1335" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">要包含的内容:参数、返回值、警告、讨论、相关方法</p><p id="ee5c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">额外提示:使用AppleDoc语法，CocoaPods会自动把你放到<a class="ae jq" href="http://cocoadocs.org/docsets/DogeKit/0.0.3/Classes/DogeKit.html" rel="noopener ugc nofollow" target="_blank"> CocoaDocs </a>上。</p><p id="84d5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jq" href="http://nshipster.com/documentation/" rel="noopener ugc nofollow" target="_blank"> NSHipster </a>对此有一篇很好的文章。</p><h2 id="78b0" class="jr js hu bd jt ju jv jw jx jy jz ka kb jc kc kd ke jg kf kg kh jk ki kj kk kl dt translated">永远不要假设你正在运行什么线程</h2><p id="002b" class="pw-post-body-paragraph ir is hu it b iu km iw ix iy kn ja jb jc ko je jf jg kp ji jj jk kq jm jn jo hn dt translated">长话短说，当你是一个框架时，你不能控制你的类或代码的实例化。很多开发者可能会选择在发布后在后台启动你的框架——那么这是否意味着你的应用会崩溃？假设它在主线程上，它会接触用户界面吗？一般来说，如果你的框架不接触UI，它应该在后台线程上运行，只有在必要的时候才返回主线程，这样才不会降低主机应用程序的速度。做一个好公民。</p><p id="f5ad" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jq" href="http://amattn.com/p/grand_central_dispatch_gcd_summary_syntax_best_practices.html" rel="noopener ugc nofollow" target="_blank">更多的帮助。</a></p><h2 id="0d9e" class="jr js hu bd jt ju jv jw jx jy jz ka kb jc kc kd ke jg kf kg kh jk ki kj kk kl dt translated">考虑Xcode版本</h2><p id="f971" class="pw-post-body-paragraph ir is hu it b iu km iw ix iy kn ja jb jc ko je jf jg kp ji jj jk kq jm jn jo hn dt translated">当你是一个框架时，你有两个用户——应用程序的用户和代码的用户。他们的工具、设置和堆栈可能会影响框架的设计——所以要注意这一点。如果你依赖于新特性(比如Xcode新版本中的特性)，你可能会不太走运，因为很多开发人员并没有使用最新的特性。</p><p id="2452" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">不久前，我做了一个调查，写了关于Xcode版本的文章<a class="ae jq" href="http://www.samjarman.co.nz/blog/what-version-of-xcode-are-you-using/" rel="noopener ugc nofollow" target="_blank">，所以请阅读一下</a>。</p><h2 id="33d3" class="jr js hu bd jt ju jv jw jx jy jz ka kb jc kc kd ke jg kf kg kh jk ki kj kk kl dt translated">启用位代码</h2><p id="463e" class="pw-post-body-paragraph ir is hu it b iu km iw ix iy kn ja jb jc ko je jf jg kp ji jj jk kq jm jn jo hn dt translated">启用位代码！！！说真的。<strong class="it hv">只有当所有包含的框架都支持位代码时，一个应用程序才能支持位代码。所以打开它，修复你需要的东西。你不想成为那种意味着应用程序不支持位代码的框架。这是一种很快被取代的方式。</strong></p><h2 id="d41c" class="jr js hu bd jt ju jv jw jx jy jz ka kb jc kc kd ke jg kf kg kh jk ki kj kk kl dt translated">好的发行说明</h2><p id="ab5f" class="pw-post-body-paragraph ir is hu it b iu km iw ix iy kn ja jb jc ko je jf jg kp ji jj jk kq jm jn jo hn dt translated">似乎很明显，但这是许多开发人员忘记做的事情。保留一个公共的变更日志。如果你们都喜欢使用Github，只需结合git标签使用发布页面。一个好的发行说明日志将帮助开发人员跟踪bug的进展，找到稳定的版本并保持更新。如果他们“关注”你的库，他们也会收到一封包含发布说明的电子邮件！</p><p id="28c8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jq" href="https://github.com/carnivalmobile/carnival-ios-sdk/releases" rel="noopener ugc nofollow" target="_blank">示例</a></p></div><div class="ab cl kr ks hc kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hn ho hp hq hr"><p id="202b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">原来如此。快速总结一些建议，打造更好的框架。一般来说，你需要更努力地思考，而不仅仅是用代码解决问题。<strong class="it hv">想想开发者体验(DX)。</strong></p><p id="e37d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你有什么建议？在twitter上Ping我——我是带着你的想法的<a class="ae jq" href="http://twitter.com/samjarman" rel="noopener ugc nofollow" target="_blank"> @samjarman </a>！我很想听听。</p><p id="e294" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">PPS: <a class="ae jq" href="https://twitter.com/MichaelCiurus" rel="noopener ugc nofollow" target="_blank">迈克尔</a>写过类似的文章。<a class="ae jq" href="http://yourcodesucksexception.blogspot.co.nz/2015/11/things-ive-learned-while-building-ios.html" rel="noopener ugc nofollow" target="_blank">看看吧！</a></p><p id="197b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">【SamJarman.co.nz/blog】本帖最初发表于<a class="ae jq" href="http://www.samjarman.co.nz/blog/" rel="noopener ugc nofollow" target="_blank"><em class="jp"/></a></p><blockquote class="ky kz la"><p id="badf" class="ir is jp it b iu iv iw ix iy iz ja jb lb jd je jf lc jh ji jj ld jl jm jn jo hn dt translated"><a class="ae jq" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是阿妹家庭的一员。我们现在<a class="ae jq" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jq" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is jp it b iu iv iw ix iy iz ja jb lb jd je jf lc jh ji jj ld jl jm jn jo hn dt translated">要了解更多信息，请阅读我们的“关于”页面、<a class="ae jq" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书</a>上给我们点赞/发消息，或者简单地发送<a class="ae jq" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ir is jp it b iu iv iw ix iy iz ja jb lb jd je jf lc jh ji jj ld jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jq" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jq" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote></div></div>    
</body>
</html>