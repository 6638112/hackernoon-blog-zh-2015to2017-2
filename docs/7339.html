<html>
<head>
<title>Build a Serverless Memes Function with OpenFaaS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用OpenFaaS构建一个无服务器的Memes函数</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/build-a-serverless-memes-function-with-openfaas-f4210a53abe8?source=collection_archive---------18-----------------------#2017-10-24">https://medium.com/hackernoon/build-a-serverless-memes-function-with-openfaas-f4210a53abe8?source=collection_archive---------18-----------------------#2017-10-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/1d7b2f223fee16475a515ec0db97d4a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*rwYPa8YxFixSbVI7XgWYfQ.png"/></div></figure><p id="57e4" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在这篇快速的帖子中，我将向你展示如何在<strong class="ja hv"> Go </strong>中构建一个<strong class="ja hv">无服务器</strong>函数来使用<a class="ae jw" href="https://github.com/openfaas/faas" rel="noopener ugc nofollow" target="_blank"> OpenFaaS </a>获取最新的<strong class="ja hv"> 9Gag Memes </strong>。</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/410e475314e028e49248e0cb3860eca5.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*b6b3rNLBuC6j2gXs."/></div></figure><p id="55c7" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">本教程假设您已经:</p><ul class=""><li id="eaef" class="kc kd hu ja b jb jc jf jg jj ke jn kf jr kg jv kh ki kj kk dt translated"><strong class="ja hv"> faas-cli </strong>已安装——安装<strong class="ja hv"> faas-cli </strong>最简单的方法是通过<strong class="ja hv"> cURL </strong>:</li></ul><blockquote class="kl km kn"><p id="011d" class="iy iz ko ja b jb jc jd je jf jg jh ji kp jk jl jm kq jo jp jq kr js jt ju jv hn dt translated">https://cli.openfaas.com| sudo sh</p></blockquote><ul class=""><li id="5621" class="kc kd hu ja b jb jc jf jg jj ke jn kf jr kg jv kh ki kj kk dt translated"><strong class="ja hv"> Swarm </strong>或<strong class="ja hv"> Kubernetes </strong>环境配置——参见<a class="ae jw" href="https://github.com/openfaas/faas/blob/master/guide/deployment_swarm.md" rel="noopener ugc nofollow" target="_blank">文档</a>。</li></ul><p id="c3ac" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 1 —创建功能</strong></p><p id="8ba1" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">创建一个“<strong class="ja hv"> handler.go </strong>”文件，内容如下:</p><figure class="jy jz ka kb fq iv"><div class="bz el l di"><div class="ks kt l"/></div></figure><p id="5cd7" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">代码是不言自明的，它使用<a class="ae jw" href="https://github.com/mlabouardy/9gag" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hv"> 9Gag网络爬虫</strong> </a>来解析网站并通过标签获取迷因。</p><p id="fea1" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 2 — Docker图像</strong></p><p id="d435" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我写了一个简单的<strong class="ja hv"> Dockerfile </strong>使用<a class="ae jw" href="https://docs.docker.com/engine/userguide/eng-image/multistage-build/" rel="noopener ugc nofollow" target="_blank">多阶段构建</a>技术来缩小图像尺寸:</p><figure class="jy jz ka kb fq iv"><div class="bz el l di"><div class="ks kt l"/></div></figure><p id="bd16" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 3 —配置文件</strong></p><figure class="jy jz ka kb fq iv"><div class="bz el l di"><div class="ks kt l"/></div></figure><p id="5561" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">注意:如果推送至远程注册表，将名称从<em class="ko"> mlabouardy </em>更改为您自己的<strong class="ja hv"> Hub </strong>帐户。</p><p id="7bb1" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 4 —构建</strong></p><p id="161a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">发出以下命令:</p><blockquote class="kl km kn"><p id="18e5" class="iy iz ko ja b jb jc jd je jf jg jh ji kp jk jl jm kq jo jp jq kr js jt ju jv hn dt translated">faas-cli build -f ./stack.yml</p></blockquote><p id="aa4e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 5 —展开</strong></p><blockquote class="kl km kn"><p id="c0c5" class="iy iz ko ja b jb jc jd je jf jg jh ji kp jk jl jm kq jo jp jq kr js jt ju jv hn dt translated">faas-cli推-f ./stack.yml</p><p id="b59e" class="iy iz ko ja b jb jc jd je jf jg jh ji kp jk jl jm kq jo jp jq kr js jt ju jv hn dt translated">faas-cli deploy -f ./stack.yml</p></blockquote><p id="45d0" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 6 —测试</strong></p><p id="29a2" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">部署后，您可以通过以下方式调用该函数:</p><p id="22ca" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">卷曲:</strong></p><blockquote class="kl km kn"><p id="7689" class="iy iz ko ja b jb jc jd je jf jg jh ji kp jk jl jm kq jo jp jq kr js jt ju jv hn dt translated">curl<a class="ae jw" href="http://localhost:8080/function/memes-9gag" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/function/memes-9 gag</a>-d " GoT "</p></blockquote><p id="f964" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">FaaS CLI: </p><blockquote class="kl km kn"><p id="7657" class="iy iz ko ja b jb jc jd je jf jg jh ji kp jk jl jm kq jo jp jq kr js jt ju jv hn dt translated">echo“得到”| faas-cli调用memes-9gag</p></blockquote><p id="0779" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">用户界面:</strong></p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="fe ff ku"><img src="../Images/07f6b4866067cbc8d26c8e32fd2aef61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xZPNFYP8wwAvAxa5XLu-fA.png"/></div></div></figure><p id="10f3" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> JSON示例:</strong></p><figure class="jy jz ka kb fq iv"><div class="bz el l di"><div class="ks kt l"/></div></figure><p id="0625" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">注意:本演示中使用的所有代码都可以在我的<a class="ae jw" href="https://github.com/mlabouardy/memes-faas" rel="noopener ugc nofollow" target="_blank"> Github </a>上获得</p><p id="5a91" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">更进一步？</strong></p><p id="5b89" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">您可以构建一个使用函数JSON response的Android应用程序,如下所示:</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff kz"><img src="../Images/15c79da9a81abcb0c4be77a1d6ec057a.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/0*jSYctErmUiVuGmFX."/></div></figure></div></div>    
</body>
</html>