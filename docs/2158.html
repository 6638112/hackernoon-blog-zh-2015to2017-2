<html>
<head>
<title>Playing with particles</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">玩粒子</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/playing-with-particles-ef87744d7ed2?source=collection_archive---------11-----------------------#2017-01-09">https://medium.com/hackernoon/playing-with-particles-ef87744d7ed2?source=collection_archive---------11-----------------------#2017-01-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="304b" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">创建粒子雨效果</h2></div><p id="ed2b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果你是这个系列的新手，从这里开始:<a class="ae kf" rel="noopener" href="/@radarboy3000/creative-coding-basics-4d623af1c647#.hn9zzliob">第一部</a>、<a class="ae kf" rel="noopener" href="/@radarboy3000/creative-coding-basics-4d623af1c647#.hn9zzliob">第二部</a>和<a class="ae kf" rel="noopener" href="/@radarboy3000/how-to-make-particles-1cbeee937593#.wwjhkv7u2">第三部</a></p><p id="8b6c" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">所有的代码和库都可以在这里找到:<a class="ae kf" href="https://github.com/GeorgeGally/creative_coding" rel="noopener ugc nofollow" target="_blank">https://github.com/GeorgeGally/creative_coding</a></p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff kg"><img src="../Images/8251b9023a04273e6d5f8ca31a286e43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i1TTTthhf05mU6ZqckwGNQ.png"/></div></div><figcaption class="ks kt fg fe ff ku kv bd b be z ek">Particle rain effect</figcaption></figure><p id="7db9" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">所以现在我们有了粒子…让我们玩得开心点，创造一些粒子效果。希望这也能让你了解同样的代码如何创造出截然不同的效果，并让你进行更多的尝试，这就是神奇和有趣的地方。</p><p id="f7d6" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">因此，让我们创建一个简单的，但视觉上令人愉快的粒子雨效果，就像上面的图像…</p><p id="83fa" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们已经有了我们需要的所有代码…我们只需要让粒子轨迹从顶部落下，而不是反弹，然后当它们到达底部时重新出现在顶部…</p><p id="0df9" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">所以，首先让我们添加一些粒子…我们将球的速度设置为0，因为粒子正在下落。我们给它一个从0到屏幕宽度的随机起始位置，即。<em class="kw">随机(w)；</em>这和说<em class="kw"> random(0，w)是一样的；</em>我们在屏幕上方的某个地方给球一个垂直的起点，以免它们都在同一个地方开始。以及使用<em class="kw"> rgb的随机灰色(随机(255))</em>；</p><p id="4eaf" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">因此，我们的设置代码将如下所示:</p><pre class="kh ki kj kk fq kx ky kz la aw lb dt"><span id="9a53" class="lc ld hu ky b fv le lf l lg lh">var ctx = createCanvas("canvas1");<br/>var max_balls = 2000;<br/>var balls = [];</span><span id="030f" class="lc ld hu ky b fv li lf l lg lh"><strong class="ky hv">for (var i = 0; i &lt; max_balls; i++) {<br/>  addBall();<br/>}</strong></span><span id="9e4d" class="lc ld hu ky b fv li lf l lg lh">// push a ball and it's values into the array<br/>function addBall(){<br/>  var ball = {<br/>    <strong class="ky hv">x: random(w),</strong><br/>    <strong class="ky hv">y: random(-200,0),</strong><br/>    <strong class="ky hv">speed_x: 0,<br/>    speed_y: random(0.5, 3),</strong><br/>    size: 8,<br/>    <strong class="ky hv">colour: rgb(random(255))</strong><br/>  }<br/>  balls.push(ball);<br/>  if (balls.length &gt; max_balls) balls.splice(0,1);<br/>}</span></pre><p id="930d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">对于我们的<em class="kw"> moveBall() </em>函数，它看起来和以前几乎一样，除了我们需要在粒子越过边缘时将它重置到顶部:</p><pre class="kh ki kj kk fq kx ky kz la aw lb dt"><span id="9fab" class="lc ld hu ky b fv le lf l lg lh">function moveBall(){</span><span id="5468" class="lc ld hu ky b fv li lf l lg lh">  for (var i = 0; i &lt; balls.length; i++) {<br/>    <br/>   var b = balls[i];<br/>    b.x = b.x + b.speed_x;<br/>    b.y = b.y + b.speed_y;<br/></span><span id="b0f9" class="lc ld hu ky b fv li lf l lg lh"><strong class="ky hv">   </strong><em class="kw">// if ball goes over bottom reset it</em><strong class="ky hv"><br/>   if (b.y &gt; h) {<br/>      b.y = random(-100,0);<br/>      b.colour = rgb(randomInt(255));<br/>   }</strong></span><span id="58ef" class="lc ld hu ky b fv li lf l lg lh">  }</span><span id="99b6" class="lc ld hu ky b fv li lf l lg lh">}</span></pre><p id="4f65" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">为了简洁起见，让我们将剩余的内容放在一个<em class="kw"> resetBall() </em>函数中。我们需要将球的引用传递给函数，否则函数不知道我们引用的是哪个球。我们只需将一个对象/变量传递给括号中的函数即可，如下所示:</p><pre class="kh ki kj kk fq kx ky kz la aw lb dt"><span id="82c0" class="lc ld hu ky b fv le lf l lg lh"><em class="kw">// syntax: functionName(variable)<br/></em>resetBall(b)</span></pre><p id="4780" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">并像这样接收函数中的变量:</p><pre class="kh ki kj kk fq kx ky kz la aw lb dt"><span id="8fb1" class="lc ld hu ky b fv le lf l lg lh">function resetBall(_b) {<br/>  // do some stuff with _b<br/>}</span></pre><p id="4a78" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在编码中，我们经常使用下划线(在这种情况下像_b ),因为这样很容易看出我们引用的是局部变量引用(在函数内部声明的任何变量在函数外部都看不到——这是一件好事。你应该尽可能地避开全局变量)。</p><p id="bb9c" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">所以现在我们完成的代码应该是这样的:</p><pre class="kh ki kj kk fq kx ky kz la aw lb dt"><span id="c1f8" class="lc ld hu ky b fv le lf l lg lh">var ctx = createCanvas("canvas1");<br/>var max_balls = 2000;<br/>var balls = [];</span><span id="4372" class="lc ld hu ky b fv li lf l lg lh">for (var i = 0; i &lt; max_balls; i++) {<br/>  addBall();<br/>}</span><span id="dc8b" class="lc ld hu ky b fv li lf l lg lh">function addBall(){<br/>  var ball = {<br/>    x: random(w),<br/>    y: random(-200,0),<br/>    speed_x: 0,<br/>    speed_y: random(0.5, 3),<br/>    size: 8,<br/>    colour: rgb(random(255))<br/>  }<br/>  balls.push(ball);<br/>  if (balls.length &gt; max_balls) balls.splice(0,1);<br/>}</span><span id="e02d" class="lc ld hu ky b fv li lf l lg lh">function draw(){<br/> ctx.background(0, 0.06);<br/> moveBall();<br/> drawBall();<br/>}</span><span id="1a23" class="lc ld hu ky b fv li lf l lg lh">function moveBall(){<br/>  for (var i = 0; i &lt; balls.length; i++) {<br/>    var b = balls[i];<br/>    b.x = b.x + b.speed_x;<br/>    b.y = b.y + b.speed_y;</span><span id="e122" class="lc ld hu ky b fv li lf l lg lh">    <strong class="ky hv">if (b.y &gt; h) {<br/>      resetBall(b);<br/>    }</strong><br/>  }<br/>}</span><span id="6994" class="lc ld hu ky b fv li lf l lg lh"><strong class="ky hv">function resetBall(_b){<br/>  _b.y = random(-100,0);<br/>  _b.colour = rgb(randomInt(255));<br/>}</strong></span><span id="9bf9" class="lc ld hu ky b fv li lf l lg lh">function drawBall(){<br/>  for (var i = 0; i &lt; balls.length; i++) {<br/>    var b = balls[i];<br/>    ctx.fillStyle = b.colour;<br/>    ctx.fillEllipse(b.x, b.y, b.size, b.size);<br/>  }<br/>}</span></pre><p id="6a14" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">就这样...粒子雨。您将使用的大多数代码实际上只是它的变体。所以玩一玩，看看你还能想出什么效果…下次见。</p><p id="b012" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">在Instagram上关注我这里:</strong><a class="ae kf" href="https://www.instagram.com/radarboy3000/" rel="noopener ugc nofollow" target="_blank"><strong class="jl hv">https://www.instagram.com/radarboy3000/</strong></a></p><p id="ecb3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">在推特上关注我:</strong><a class="ae kf" href="https://twitter.com/radarboy_japan" rel="noopener ugc nofollow" target="_blank"><strong class="jl hv">https://twitter.com/radarboy_japan</strong></a></p><p id="c0ad" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">又如我这里的脸书页:</strong><a class="ae kf" href="https://www.facebook.com/radarboy3000" rel="noopener ugc nofollow" target="_blank"><strong class="jl hv"/></a></p><p id="cb53" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">创意编码入门第一部分:<a class="ae kf" rel="noopener" href="/@radarboy3000/creative-coding-basics-4d623af1c647#.hn9zzliob">https://medium . com/@ radarboy 3000/Creative-Coding-basics-4d 623 af 1c 647 # . HN 9 zzliob</a></p><p id="eec7" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">创意编码入门第二部分:<a class="ae kf" rel="noopener" href="/@radarboy3000/introduction-to-creative-coding-part-2-d869832d9ffb#.fzxcom541">https://medium . com/@ radarboy 3000/introduction-to-Creative-Coding-Part-2-d 869832 d9 FB # . fzxcom 541</a></p><p id="da91" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">创意编码入门第三部分:<a class="ae kf" rel="noopener" href="/@radarboy3000/how-to-make-particles-1cbeee937593#.wwjhkv7u2">https://medium . com/@ radarboy 3000/how-to-make-particles-1 cbee 937593 # . wwjhkv 7 u 2</a></p><p id="4994" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Github资源库的所有代码:<a class="ae kf" href="https://github.com/GeorgeGally/creative_coding" rel="noopener ugc nofollow" target="_blank">https://github.com/GeorgeGally/creative_coding</a></p><div class="kh ki kj kk fq ab cb"><figure class="lj kl lk ll lm ln lo paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="lj kl lk ll lm ln lo paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="lj kl lk ll lm ln lo paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="lp lq lr"><p id="f922" class="jj jk kw jl b jm jn iv jo jp jq iy jr ls jt ju jv lt jx jy jz lu kb kc kd ke hn dt translated"><a class="ae kf" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是这个家庭的一员。我们现在<a class="ae kf" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kf" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jj jk kw jl b jm jn iv jo jp jq iy jr ls jt ju jv lt jx jy jz lu kb kc kd ke hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kf" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kf" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff lv"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>