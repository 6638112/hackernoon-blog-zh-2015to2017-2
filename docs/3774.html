<html>
<head>
<title>How migrating to HTTPS can slow down your site</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">迁移到HTTPS会如何降低你的站点速度</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/why-migrating-your-site-to-https-may-be-a-bad-idea-9d69d8c27fca?source=collection_archive---------3-----------------------#2017-04-22">https://medium.com/hackernoon/why-migrating-your-site-to-https-may-be-a-bad-idea-9d69d8c27fca?source=collection_archive---------3-----------------------#2017-04-22</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="7902" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">更新:增加了加速HTTPS连接的额外方法。</p><p id="91a6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">将你的网站迁移到<a class="ae jp" href="https://hackernoon.com/tagged/https" rel="noopener ugc nofollow" target="_blank"> HTTPS </a>可以确保你网站的服务器和访问者之间传输的数据是加密的，因此<a class="ae jp" href="https://hackernoon.com/tagged/secure" rel="noopener ugc nofollow" target="_blank">是安全的</a>。它还允许访问者验证网站的身份，也是谷歌搜索引擎中的一个积极的排名因素。</p><p id="e4ce" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当你访问一个HTTPS网站时，会有一个额外的握手来建立安全连接。握手包括两次完整的往返，因此数据需要在访问者位置和网站服务器位置之间传输4倍的距离。</p><p id="9f16" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果访问者的位置靠近站点的服务器，这两个完整的往返是没问题的，但是对于远离站点服务器的访问者来说，这就成了一个问题。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff jq"><img src="../Images/50876a6e4d81e0e4902b983a27269b8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*575fvBl0qiLx7r5SuaDNdg.png"/></div></figure><p id="f5a3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">即使光在真空中以最快的速度传播(299，792，458米/秒)，也需要<strong class="it hv"> 212毫秒</strong> (53毫秒x 4) <strong class="it hv"> </strong>才能在澳大利亚悉尼的服务器和纽约的访问者之间建立安全连接。但是这一时间并没有考虑到光通过光缆、路由时速度的降低，以及验证SSL证书和计算主密钥所需的时间。通过使用webpagetest.org，我发现纽约的访问者需要大约500毫秒才能与澳大利亚悉尼的服务器建立安全连接。</p><p id="a85b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">额外的半秒钟来建立一个安全的连接将会给你的用户带来糟糕的浏览体验，这可能会导致流量和收入的下降。亚马逊表示，每100毫秒的延迟会让他们损失1%的销售额。谷歌还注意到，半秒钟的延迟会导致20%的流量下降。因此，这额外的500 ms延迟会产生重大影响。</p><h2 id="949c" class="jy jz hu bd ka kb kc kd ke kf kg kh ki jc kj kk kl jg km kn ko jk kp kq kr ks dt translated">我们如何减少建立安全连接的时间？</h2><p id="0bb2" class="pw-post-body-paragraph ir is hu it b iu kt iw ix iy ku ja jb jc kv je jf jg kw ji jj jk kx jm jn jo hn dt translated">TLS错误启动和TLS会话恢复是TLS的扩展，可以帮助减少新访客和回头客的往返行程。但在我们的示例中，这仍然导致了250毫秒的显著延迟。您的服务器需要支持ALPN和转发保密密码套件，以支持大多数浏览器中的TLS错误启动。</p><p id="3797" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有没有办法进一步缩短这个时间？最合理的方法是确保你的服务器靠近你的访问者，因为这将减少往返时间。最简单的方法是使用CDN edge终止靠近访问者的TLS连接，但这意味着在CDN edge和站点服务器之间传输的数据是未加密的，因此不安全。另一种方法是在离你的访问者更近的地方建立网络服务器，但是如果你的站点接收来自世界各地的流量，在每个大洲都建立服务器可能不是一个可行的解决方案。</p><p id="94db" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有没有什么正在进行的工作将有助于加快HTTPS？TLS 1.3是TLS协议的最新版本，更安全、更快速。TLS 1.3为新连接引入了单次往返握手。它还允许之前访问过该网站的访问者在第一条消息中发送加密数据，这被称为0-RTT(零往返)。由于TLS 1.3相对较新，它只在浏览器的开发版本中可用，默认情况下不启用。</p><p id="eb79" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">将您的网站迁移到HTTPS有很大的好处，但您需要意识到它可能带来的额外延迟，尤其是对于远离您的服务器的访问者。</p><div class="jr js jt ju fq ab cb"><figure class="ky jv kz la lb lc ld paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="ky jv kz la lb lc ld paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="ky jv kz la lb lc ld paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="le lf lg"><p id="f922" class="ir is lh it b iu iv iw ix iy iz ja jb li jd je jf lj jh ji jj lk jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is lh it b iu iv iw ix iy iz ja jb li jd je jf lj jh ji jj lk jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="fe ff ll"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="lq lr l"/></div></figure></div></div>    
</body>
</html>