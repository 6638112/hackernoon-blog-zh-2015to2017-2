<html>
<head>
<title>Using ESLint for Encapsulation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用ESLint进行封装</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/using-eslint-for-encapsulation-a6a992a3d848?source=collection_archive---------19-----------------------#2017-01-30">https://medium.com/hackernoon/using-eslint-for-encapsulation-a6a992a3d848?source=collection_archive---------19-----------------------#2017-01-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="47f8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Linters可能没有编译器强大——因为它们不能添加新的语言特性——但是它们很擅长<em class="jp">去掉</em>特性。有时，删除功能和添加功能一样强大。</p><p id="205d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当我们谈论<strong class="it hv">封装</strong>时，这个观察尤其正确。封装是关于<a class="ae jq" href="https://en.wikipedia.org/wiki/Information_hiding" rel="noopener ugc nofollow" target="_blank">信息隐藏</a>，又名<em class="jp">取走</em>信息。许多封装特性都是在语言级别实现的，比如函数范围和模块范围。但是当我们想要比语言提供的更多的封装时，linters是一个很好的选择。</p><p id="c87d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们看一些例子，ESLint为我们提供了封装，而ES6却没有。</p><h1 id="d1d9" class="jr js hu bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dt translated">封装浏览器API</h1><p id="6eda" class="pw-post-body-paragraph ir is hu it b iu kp iw ix iy kq ja jb jc kr je jf jg ks ji jj jk kt jm jn jo hn dt translated">如果你需要支持服务器端的渲染，那么你必须确保你的代码可以在服务器环境中运行，这里不会有任何特定于浏览器的全局变量，比如<code class="eh ku kv kw kx b">window</code>、<code class="eh ku kv kw kx b">location</code>等等。幸运的是，ESLint允许我们为给定的文件配置全局变量:</p><pre class="ky kz la lb fq lc kx ld le aw lf dt"><span id="7c3e" class="lg js hu kx b fv lh li l lj lk"><em class="jp">ReactDOM.render(<br/>  &lt;App /&gt;,<br/>  document.getElementById('root')<br/>); // flagged by linter<br/></em></span><span id="138a" class="lg js hu kx b fv ll li l lj lk"><em class="jp">/* eslint-env browser */</em><em class="jp"><br/></em><em class="jp">ReactDOM.render(<br/>  &lt;App /&gt;,<br/>  document.getElementById('root')<br/>); // good to go!</em></span></pre><p id="ac18" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这样，我们可以<em class="jp">对所有模块隐藏</em>浏览器API，除了需要它们的特定模块。我们也可以对其他环境做同样的事情！</p><h1 id="a4e6" class="jr js hu bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dt translated">封装模块</h1><p id="7f00" class="pw-post-body-paragraph ir is hu it b iu kp iw ix iy kq ja jb jc kr je jf jg ks ji jj jk kt jm jn jo hn dt translated">假设我们想将代码库中所有的<a class="ae jq" href="https://hackernoon.com/tagged/network" rel="noopener ugc nofollow" target="_blank">网络</a>请求集中到一个名为<code class="eh ku kv kw kx b">api.js</code>的文件中。我们可能会为此使用一个单一的网络客户端，例如Axios 。我们可以通过确保除了我们的<code class="eh ku kv kw kx b">api.js</code>文件之外，代码库中没有人可以导入Axios来加强这一点。</p><p id="b679" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们将使用<a class="ae jq" href="http://eslint.org/docs/rules/no-restricted-modules" rel="noopener ugc nofollow" target="_blank">no-restricted-modules</a>lint规则来禁止其他模块导入Axios，方法是将其添加到我们的<code class="eh ku kv kw kx b">.eslintrc</code>中:</p><pre class="ky kz la lb fq lc kx ld le aw lf dt"><span id="aaa8" class="lg js hu kx b fv lh li l lj lk">{<br/>    "no-restricted-modules": ["error", "axios"]<br/>}</span></pre><p id="b4c0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后只为我们的<code class="eh ku kv kw kx b">api.js</code>文件禁用它:</p><figure class="ky kz la lb fq lm"><div class="bz el l di"><div class="ln lo l"/></div></figure><p id="9ea9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这样，我们可以对所有模块隐藏联网功能，除了我们列入白名单的特定模块。</p><h1 id="c1c9" class="jr js hu bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dt translated">封装类</h1><p id="4d69" class="pw-post-body-paragraph ir is hu it b iu kp iw ix iy kq ja jb jc kr je jf jg ks ji jj jk kt jm jn jo hn dt translated">假设我们想要在我们的<a class="ae jq" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> Javascript </a>类中有一个私有方法。不幸的是，我们没有关键字<code class="eh ku kv kw kx b">private</code>来强制执行这条规则，但是我们可以使用ESLint的<a class="ae jq" href="http://eslint.org/docs/rules/no-underscore-dangle" rel="noopener ugc nofollow" target="_blank">无下划线悬挂符</a>规则来达到类似的效果:</p><pre class="ky kz la lb fq lc kx ld le aw lf dt"><span id="94bb" class="lg js hu kx b fv lh li l lj lk">class MyClass {<br/>  _myPrivateMethod() {}<br/> <br/>  myPublicMethod() {}<br/>}</span><span id="92b0" class="lg js hu kx b fv ll li l lj lk">const instance = MyClass()<br/>instance._myPrivateMethod(); // flagged by linter</span></pre><h1 id="2623" class="jr js hu bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dt translated">线头规则是交通锥</h1><p id="81ac" class="pw-post-body-paragraph ir is hu it b iu kp iw ix iy kq ja jb jc kr je jf jg ks ji jj jk kt jm jn jo hn dt translated">以上所有的封装都很容易破。像linters这样的静态分析工具无法抵御像<code class="eh ku kv kw kx b">require('axios')</code>或<code class="eh ku kv kw kx b">instance['_myPrivateMethod']()</code>这样的动态语言特性，这没什么。林特规则更像交通锥，而不是混凝土墙。</p><p id="49a9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个想法并不是为了防范对这些规则的故意违反。这是将阻力最小的路径与最佳实践结合起来，这通常就足够了。</p><blockquote class="lp lq lr"><p id="9d73" class="ir is jp it b iu iv iw ix iy iz ja jb ls jd je jf lt jh ji jj lu jl jm jn jo hn dt translated"><a class="ae jq" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jq" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jq" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jq" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is jp it b iu iv iw ix iy iz ja jb ls jd je jf lt jh ji jj lu jl jm jn jo hn dt translated">要了解更多信息，请<a class="ae jq" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">阅读我们的“关于”页面</a>、<a class="ae jq" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书上给我们点赞/发消息</a>，或者简单地说，<a class="ae jq" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ir is jp it b iu iv iw ix iy iz ja jb ls jd je jf lt jh ji jj lu jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jq" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jq" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ky kz la lb fq lm"><div class="bz el l di"><div class="lv lo l"/></div></figure></div></div>    
</body>
</html>