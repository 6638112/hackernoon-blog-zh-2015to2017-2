<html>
<head>
<title>Creative Coding: Building Re-usable Objects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创造性编码:构建可重用对象</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/creative-coding-building-objects-dd3659a9ab33?source=collection_archive---------17-----------------------#2017-03-22">https://medium.com/hackernoon/creative-coding-building-objects-dd3659a9ab33?source=collection_archive---------17-----------------------#2017-03-22</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/b74596246c10be468c8024eebaea6afb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*6kFif1mahO6gPRx-E7jUyw.gif"/></div></div></figure><div class=""/><div class=""><h2 id="0565" class="pw-subtitle-paragraph jc ie if bd b jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ek translated">对象是封装代码的好方法，可以让代码更简洁，让你的代码更快。</h2></div><p id="64ac" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">让我们来看看如何构建一个简单的<a class="ae kq" href="https://hackernoon.com/tagged/colourpool" rel="noopener ugc nofollow" target="_blank"> colourPool </a>对象——因为在创造性编码中让事物看起来更好与颜色有很大关系。因为我们和。因为这是一个很好的方法来了解如何构建对象，这些对象实际上只是一些奇特的函数。</p><p id="5e0e" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">使用<a class="ae kq" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> Javascript </a> API，我们可以创建如下颜色:</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="8845" class="la lb if kw b fv lc ld l le lf">// using hex values<br/>ctx.fillColor = “#ff0000”;</span><span id="13a8" class="la lb if kw b fv lg ld l le lf">// using a colour name<br/>ctx.fillColor = “red”;</span><span id="f312" class="la lb if kw b fv lg ld l le lf">//using a RGB value<br/>ctx.fillColor = "rgb(255, 0, 0)";</span><span id="2f4c" class="la lb if kw b fv lg ld l le lf">//using a RGBA value<br/>ctx.fillColor = "rgb(255, 0, 0, 1)";</span><span id="0a04" class="la lb if kw b fv lg ld l le lf">//using a HSL value<br/>ctx.fillColor = "hsl(0, 100, 100)";</span></pre><p id="0258" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">但是这经常是重复的、笨拙的和不直观的，所以让我们构建一个colourPool对象来存储和检索调色板。这个概念直接取自约书亚·戴维斯的<a class="ae kq" href="http://www.hypeframework.org/" rel="noopener ugc nofollow" target="_blank">炒作框架</a>。谢谢乔希。</p><p id="1542" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><em class="lh">(大喊到</em><a class="ae kq" href="http://www.joshuadavis.com/" rel="noopener ugc nofollow" target="_blank"><em class="lh">Joshua</em></a><em class="lh">因为是第一批开源创意编码教程的人之一，当时开源还不是个东西)。</em></p><p id="48c3" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">那么我们如何用Javascript创建一个对象呢？Javascript的美(有人会说是弱点，但他们只是脾气暴躁的编码员，我们是艺术家。太好了。)就是它只是一个函数。它实际上是一个物体吗？我们在乎吗？我们只想做酷的东西。</p><p id="2e59" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">因此，我们创建了一个函数，并添加了一个<em class="lh"> return this </em>，以便访问该函数及其内部工作方式。</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="cb38" class="la lb if kw b fv lc ld l le lf">// create an object<br/>function colourPool(){<br/></span><span id="1cc9" class="la lb if kw b fv lg ld l le lf">  return this;</span><span id="c0ee" class="la lb if kw b fv lg ld l le lf">}</span></pre><p id="bae6" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">要声明我们的对象，我们只需这样做:</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="e344" class="la lb if kw b fv lc ld l le lf">var colours = new ColourPool();</span></pre><p id="38e9" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">包含“<em class="lh"> this </em>”的对象的变量和函数可以通过点语法访问。把“这个”想象成进入物体的入口。因此，如果我们想要一种添加颜色的方法，我们可以在colourPool()对象中添加一个函数，返回“this”。add函数接受一个参数，这个参数就是我们想要添加的颜色，然后我们将这个值放入一个数组来记录我们所有的颜色:</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="a8a7" class="la lb if kw b fv lc ld l le lf">function colourPool(){</span><span id="91ef" class="la lb if kw b fv lg ld l le lf"><em class="lh"> // an empty array where we'll store our colours   </em><strong class="kw ig"><br/> this.pool = [];</strong></span><span id="24cd" class="la lb if kw b fv lg ld l le lf">// the add function takes in an argument of our colour we want to add to the pool</span><span id="7620" class="la lb if kw b fv lg ld l le lf"><em class="lh">// this.add = function(_colour){} may look funky but<br/>// it's the same as writing: function add(_colour){}<br/>// the this. just now gives us a door to the function</em></span><span id="6c7b" class="la lb if kw b fv lg ld l le lf"><strong class="kw ig">this.add = function(_colour){</strong></span><span id="682e" class="la lb if kw b fv lg ld l le lf">  // push the new colour onto the pool array  <strong class="kw ig">     <br/>  this.pool.push(_colour);<br/>    return this;<br/>  }</strong></span><span id="50e1" class="la lb if kw b fv lg ld l le lf">  return this;</span><span id="74c4" class="la lb if kw b fv lg ld l le lf">}</span></pre><p id="9341" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">(是的，在对象中有很多“这样”的事情发生，在javaScript中有其他的方法——总有其他的方法——比如使用prototype——但是我发现这些方法更加丑陋和冗长，而且对人们来说常常太难了[阅读:我！]让他们的头脑清醒过来。).</p><p id="d414" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">所以现在，如果我们想给我们的颜色池对象添加颜色，我们可以简单地做:</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="ccbe" class="la lb if kw b fv lc ld l le lf">var colours = newColourPool();<br/>colours.add("#cc0000");</span></pre><p id="f7a6" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">为了检索我们的颜色，我们现在可以通过点语法简单地访问池数组:</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="1a5d" class="la lb if kw b fv lc ld l le lf"><em class="lh">// create a new colourPool and add some colours</em><br/>var colours = newColourPool();<br/>colours.add("#cc0000");<br/>colours.add("#cccc00");</span></pre><p id="2205" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">从add函数返回这个值还允许我们将调用链接在一起，就像这样:</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="a6ea" class="la lb if kw b fv lc ld l le lf">// we can also chain them together<br/>var colours = newColourPool()<br/>.add("#cc0000");<br/>.add("#cccc00");</span></pre><p id="842a" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">相当整洁。但是如果我们只想得到一个随机的颜色，让我们为此建立一个函数:</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="5a42" class="la lb if kw b fv lc ld l le lf">this.get = function(){</span><span id="5182" class="la lb if kw b fv lg ld l le lf"> // because arrays start from 0, <br/> // the last value pool array would be it’s length - 1<br/> // in this case we added two colours, <br/> // so the second colour would be //pool[1]</span><span id="0839" class="la lb if kw b fv lg ld l le lf">var colour_pool_length = this.pool.length-1;</span><span id="0d42" class="la lb if kw b fv lg ld l le lf">// get a random value from our pool array<br/>// we use randomInt() to return a whole number</span><span id="3e23" class="la lb if kw b fv lg ld l le lf">var random_colour = this.pool[randomInt(this.pool.length-1)];</span><span id="9de9" class="la lb if kw b fv lg ld l le lf">return random_colour;</span><span id="55e8" class="la lb if kw b fv lg ld l le lf">}</span></pre><p id="04ec" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">这有点啰嗦。所以我们可以把它们挤在一起，然后简单地做:</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="4cc4" class="la lb if kw b fv lc ld l le lf">this.get = function(){</span><span id="68db" class="la lb if kw b fv lg ld l le lf">    return this.pool[randomInt(this.pool.length-1)];</span><span id="aa64" class="la lb if kw b fv lg ld l le lf">}</span></pre><p id="8335" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">现在假设我们想要创建一个加权的颜色分布，这样随机返回的颜色更可能是橙色而不是黑色。</p><p id="49ec" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">我们让add函数接受第二个权重条件，然后生成一个加权列表。</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="a09f" class="la lb if kw b fv lc ld l le lf">function colourPool(){</span><span id="9586" class="la lb if kw b fv lg ld l le lf">  this.pool = [];<br/>  this.colour_list = [];<br/>  <strong class="kw ig">this.weights = [];</strong></span><span id="66ba" class="la lb if kw b fv lg ld l le lf">this.add = function(_colour, <strong class="kw ig">_weight</strong>) {<br/>    <strong class="kw ig">if (_weight == undefined) _weight = 1;</strong><br/>    this.pool.push(_colour);<br/>    <strong class="kw ig">this.weights.push(_weight);</strong><br/>    <strong class="kw ig">this.colour_list  = this.generateWeighedList(this.pool, this.weights);</strong><br/>    <strong class="kw ig">return this;</strong><br/>  }</span><span id="a9ee" class="la lb if kw b fv lg ld l le lf">  this.get = function(){<br/>    return this.pool[randomInt(this.pool.length-1)];<br/>  }</span><span id="7a96" class="la lb if kw b fv lg ld l le lf"><strong class="kw ig">  this.generateWeighedList = function(list, weight) {<br/>    <br/>    var weighed_list = [];</strong></span><span id="0bd7" class="la lb if kw b fv lg ld l le lf"><strong class="kw ig">    </strong><em class="lh">// Loop over weights</em><strong class="kw ig"><br/>    for (var i = 0; i &lt; weight.length; i++) {<br/>       var multiples = weight[i] * 100;<br/>       </strong><em class="lh">// Loop over the list of items</em><strong class="kw ig"><br/>       for (var j = 0; j &lt; multiples; j++) {<br/>            weighed_list.push(list[i]);<br/>       }<br/>    }</strong></span><span id="e6b8" class="la lb if kw b fv lg ld l le lf"><strong class="kw ig">    return weighed_list;</strong></span><span id="b370" class="la lb if kw b fv lg ld l le lf"><strong class="kw ig"> };</strong></span><span id="d92e" class="la lb if kw b fv lg ld l le lf">return this;<br/>}</span></pre><p id="e8e3" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">很可能，肯定有更好的方法来做加权列表。但就我们的目的而言，除非我们添加100种颜色，否则它会做得很好。</p><figure class="kr ks kt ku fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff li"><img src="../Images/413195f873e8f88bdab07bd506556d87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*N3ISGdlW4Cm5G7Krb0FFOw.gif"/></div></div></figure><p id="fc43" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">现在我们有了。一个漂亮的<em class="lh">颜色池</em>功能，用于管理颜色。同样的原则可以应用于构建几乎任何对象，这将使您的创造性编码方式更加有趣和高效。</p></div><div class="ab cl lj lk hc ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="hn ho hp hq hr"><p id="9918" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">像往常一样，完整的代码可以在我的github上找到，本文是第12部分(一定要时不时拉一下，因为我会经常更新内容):【https://github.com/GeorgeGally/creative_coding<a class="ae kq" href="https://github.com/GeorgeGally/creative_coding" rel="noopener ugc nofollow" target="_blank"/></p><p id="5a0c" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">【https://hackernoon.com/@radarboy3000<strong class="jw ig">参见往期《创意编码入门》</strong></p><p id="6ec9" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><strong class="jw ig">在Instagram这里关注我:</strong><a class="ae kq" href="https://www.instagram.com/radarboy3000/" rel="noopener ugc nofollow" target="_blank"><strong class="jw ig">https://www.instagram.com/radarboy3000/</strong></a></p><p id="ecb3" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><strong class="jw ig">在这里关注我的推特:</strong><a class="ae kq" href="https://twitter.com/radarboy_japan" rel="noopener ugc nofollow" target="_blank"><strong class="jw ig">https://twitter.com/radarboy_japan</strong></a></p><p id="c0ad" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><strong class="jw ig">友好点，喜欢我的脸书页面在这里获取教程和工作坊更新:</strong><a class="ae kq" href="https://www.facebook.com/radarboy3000" rel="noopener ugc nofollow" target="_blank"><strong class="jw ig">https://www.facebook.com/radarboy3000</strong></a></p><div class="kr ks kt ku fq ab cb"><figure class="lq hw lr ls lt lu lv paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="lq hw lr ls lt lu lv paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="lq hw lr ls lt lu lv paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="lw lx ly"><p id="f922" class="ju jv lh jw b jx jy jg jz ka kb jj kc lz ke kf kg ma ki kj kk mb km kn ko kp hn dt translated"><a class="ae kq" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kq" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kq" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kq" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ju jv lh jw b jx jy jg jz ka kb jj kc lz ke kf kg ma ki kj kk mb km kn ko kp hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kq" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kq" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kr ks kt ku fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mc"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="kr ks kt ku fq hw"><div class="bz el l di"><div class="md me l"/></div></figure></div></div>    
</body>
</html>