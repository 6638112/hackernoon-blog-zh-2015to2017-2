<html>
<head>
<title>Introducing DeadRinger: An iPhone X Lockscreen Replica</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">介绍dead ringer:iPhone X锁屏复制品</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/introducing-deadringer-an-iphone-x-lockscreen-replica-9a3e613c833c?source=collection_archive---------12-----------------------#2017-12-03">https://medium.com/hackernoon/introducing-deadringer-an-iphone-x-lockscreen-replica-9a3e613c833c?source=collection_archive---------12-----------------------#2017-12-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/9a6d9aa48217a6eb03dc532fc54b5282.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/1*D4v8ckJ_9Fxzpypmxn3Yvg.gif"/></div></figure><p id="dcf8" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">前几天，当我看着我同事放在桌子上的iPhone X时，我有了一个想法。我想我可能会把它误认为我自己的手机，因为iPhone X有两种颜色，你有50%的机会和其他任何人拥有相同的手机颜色。我在想，如果我真的把它误认为我的手机并输入了我的密码，我基本上就是在传输我所有个人数据的密钥。</p><p id="652e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这让我想到重现iPhone X的锁屏并恶搞一个自己的会有多难。事实证明，有了一些iOS开发的经验，并没有那么难。由于iPhone X的超级视网膜显示屏，充满黑色像素的屏幕与睡眠中的设备没有什么区别。由于省略了home键，以及一个禁用滑动回家手势的公共API，我能够制作一个非常令人信服的iPhone X锁屏副本。如果你试图欺骗其他iPhone X型号，你的里程数可能会有所不同。</p><p id="b145" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">哦，我刚刚决定叫它“DeadRinger ”,因为我受到了像<a class="ae jw" href="http://heartbleed.com/" rel="noopener ugc nofollow" target="_blank"> HeartBleed </a>这样的安全漏洞的启发，它们基本上都有自己的营销部门。我希望我的应用程序也有一个稍微有点吓人和时髦的名字。</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/6cd3bc4088ac0a74e68d5acad97c9fd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*TklO5YGT71ClNwz9f_9OAA.gif"/></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">On the left is the app, on the right is the real lock screen.</figcaption></figure><p id="c500" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我将源代码上传到了一个<a class="ae jw" href="https://github.com/hungtruong/DeadRinger" rel="noopener ugc nofollow" target="_blank"> Github repo </a>上，它有一个很好的自述文件，但是我将在这篇文章的剩余部分更详细地介绍一些有趣的代码实现。如果想看完整的演示视频，可以在下面看:</p><figure class="jy jz ka kb fq iv"><div class="bz el l di"><div class="kg kh l"/></div></figure><h1 id="0c58" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">使用</h1><p id="ad74" class="pw-post-body-paragraph iy iz hu ja b jb lg jd je jf lh jh ji jj li jl jm jn lj jp jq jr lk jt ju jv hn dt translated">我并不建议你真的使用这个应用程序，但这是理论上的攻击媒介。你可以把这个应用程序加载到你提供的手机上(你必须接受丢失它)。你可能需要做的唯一改变是壁纸图片应该匹配目标的手机。将您的手机与目标的手机交换，然后等待他们尝试解锁他们的设备。如果目标有一个箱子，我猜你会想要一个相同的，或者在换手机的时候换一个。理论上，你可以编写一些网络代码来传输输入的密码，然后用它来解锁你拥有的真正的手机。</p><p id="9592" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">该应用程序通过进入非活动状态来工作，这只是显示一个黑屏，模拟手机处于睡眠状态。在唤醒手机或轻按设备时，将显示锁定屏幕，然后稍后将显示密码输入视图。用户可以取消返回到锁定屏幕，如果他们愿意，他们可以点击返回到密码输入模式。该应用程序不够复杂，无法处理按下物理锁定按钮之类的事情，但这超出了本概念验证的范围。该应用程序确实会拦截从底部向上的滑动，这通常会将用户带回到主屏幕。</p><h1 id="4243" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">履行</h1><p id="7312" class="pw-post-body-paragraph iy iz hu ja b jb lg jd je jf lh jh ji jj li jl jm jn lj jp jq jr lk jt ju jv hn dt translated">也许这个项目最有趣的部分是禁用滑动回家手势。你可以在这里找到关于iPhone X推迟系统手势方法的文档。下面是我在UIViewController中的实现。</p><figure class="jy jz ka kb fq iv"><div class="bz el l di"><div class="ll kh l"/></div></figure><p id="7d1b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这阻止了初始手势，但如果用户再次尝试，他们将返回主屏幕，你的应用将被击败。你的目标也可能会很困惑。应用程序中还有处理主页指示器可见性的代码，因为你希望它隐藏在“非活动”屏幕上，但在锁定屏幕上可见。</p><figure class="jy jz ka kb fq iv"><div class="bz el l di"><div class="ll kh l"/></div></figure><p id="1d45" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">随着家庭指示器逻辑的消失，还有一些其他的任务，比如确保手机不会真的进入睡眠状态。从iOS 2开始，这已经成为可能。实现这一点的代码行是</p><pre class="jy jz ka kb fq lm ln lo lp aw lq dt"><span id="f05c" class="lr kj hu ln b fv ls lt l lu lv"> UIApplication.shared.isIdleTimerDisabled = true</span></pre><p id="1366" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">为了重新创建倾斜唤醒功能，我使用CMMotionManager来采样设备的倾斜度。我只是猜测0.5将是一个很好的值，但它可能会有所调整。如果设备被放回原位，它将进入非活动状态，但不是在用户输入密码时。真实设备似乎也会延迟唤醒，所以我使用了一个计时器来处理状态变化。</p><figure class="jy jz ka kb fq iv"><div class="bz el l di"><div class="ll kh l"/></div></figure><h1 id="1e0f" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">待办事项</h1><p id="53c8" class="pw-post-body-paragraph iy iz hu ja b jb lg jd je jf lh jh ji jj li jl jm jn lj jp jq jr lk jt ju jv hn dt translated">我想说，我对锁屏的再现足够好，足以让大多数人相信他们使用的是真实的东西，但出于时间的考虑，我没有提到一些吹毛求疵的细节(因为我实际上不会使用这个应用程序来窃取任何人的密码)。</p><p id="02d3" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">锁屏上的相机和手电筒按钮有一种很酷的3D触摸效果，需要你用力才能让它们开火。我没有实现这些，因为我不想让我的目标拍照，我想要他们的密码。不过，手电筒的实现其实很简单。</p><p id="e764" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">iOS 11.2在锁屏上有一个特殊的控制中心指示器，我还没有实现。如果我使用的是iOS 11.2或更高版本，我只需要检查操作系统版本并添加视图。</p><p id="858b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">当在真实视图中进入密码输入模式时，键盘上有一些很酷的转换动画，我还没有重新创建。按钮动画从底部向上稍微延迟，并有轻微的缩放动画。不过，一般人不会注意到这种差异。</p><p id="f0ab" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">没有办法从用户的设备上获得真正的通知中心项目，并把它们放在另一个设备上，所以我不打算去那里。对一些人来说，我想没有十亿次的通知意味着有些事情是可疑的。</p><h1 id="7116" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">可能的解决方案</h1><p id="8951" class="pw-post-body-paragraph iy iz hu ja b jb lg jd je jf lh jh ji jj li jl jm jn lj jp jq jr lk jt ju jv hn dt translated">我认为有几种方法可以解决这个“漏洞”(我把它放在引号中，因为它在我看来并不太可怕)。一个解决办法是像银行一样在登录屏幕上显示“个人安全图像”。不过，如果你知道目标的形象，也很容易被打败。再加上它可能太俗气，苹果公司无法实现。</p><p id="080b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">另一个解决方案是添加一个硬件功能，比如当你在操作系统控件中输入内容时会亮起的LED。这是有先例的，就像MacBook相机在打开时会让LED灯亮起。这也将缓解一些已经出现的其他安全问题。只要软件中的一切都是可复制的，就总有办法欺骗它。</p><p id="7c6f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">作为用户，你也可以立即用贴纸或其他容易识别的东西盖住你的手机。或者把你的手机弄得很脏。或者找一些其他的方式<a class="ae jw" href="https://www.cnet.com/news/apple-iphone-x-drop-test/" rel="noopener ugc nofollow" target="_blank">以独特的方式</a>装饰你的手机。</p><p id="3667" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">随着我们的手机成为我们宇宙的中心，将安全作为重中之重是非常有意义的。希望苹果能做些什么，让我们的锁屏更加安全，免受欺骗！</p><h1 id="5981" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">放弃</h1><p id="4971" class="pw-post-body-paragraph iy iz hu ja b jb lg jd je jf lh jh ji jj li jl jm jn lj jp jq jr lk jt ju jv hn dt translated">请不要使用这个应用程序来窃取别人的密码。这可不酷。</p><h1 id="70ab" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">结论</h1><p id="2510" class="pw-post-body-paragraph iy iz hu ja b jb lg jd je jf lh jh ji jj li jl jm jn lj jp jq jr lk jt ju jv hn dt translated">我做这个应用程序仅仅是为了验证概念，我从解决上面提到的一些技术问题中获得了很多乐趣。尝试让应用程序的<a class="ae jw" href="https://hackernoon.com/tagged/design" rel="noopener ugc nofollow" target="_blank">设计</a>尽可能接近真实的锁屏也很有趣。我学到了很多关于支持一些新的iPhone X特性的知识，希望你也能从这篇文章中学到一些东西！查看我的<a class="ae jw" href="https://github.com/hungtruong/DeadRinger" rel="noopener ugc nofollow" target="_blank"> Github repo </a>了解更多细节，如果你能解决上面列出的任何TODOs，请随意投稿。</p><figure class="jy jz ka kb fq iv"><div class="bz el l di"><div class="lw kh l"/></div></figure></div></div>    
</body>
</html>