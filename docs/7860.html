<html>
<head>
<title>A comprehensive guide for integrating React-Navigation with Redux including authentication flow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">集成React-Navigation和Redux的全面指南，包括认证流程</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-comprehensive-guide-for-integrating-react-navigation-with-redux-including-authentication-flow-cb7b90611adf?source=collection_archive---------2-----------------------#2017-11-10">https://medium.com/hackernoon/a-comprehensive-guide-for-integrating-react-navigation-with-redux-including-authentication-flow-cb7b90611adf?source=collection_archive---------2-----------------------#2017-11-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/32bb3b8c2710c7b1dc9bd262620767fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5_E9eTKMhDMQaCzUqdqj9Q.jpeg"/></div></div></figure><h1 id="d49d" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated"><a class="ae ka" href="#68a2" rel="noopener ugc nofollow"> <strong class="ak"> <em class="kb">我在这篇文章的最后添加了一个更新，请查看一下</em> </strong> </a></h1><p id="94a8" class="pw-post-body-paragraph kc kd hu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz hn dt translated">React-Native社区最终接受了React-Navigation作为默认导航解决方案。React-Navigation有一个庞大而强大的API，最好的一点是React-Navigation为redux提供了非常好的支持，但我个人认为的坏消息是缺乏适当的文档。在本文中，我试图解释将React-Navigation与Redux集成的基础知识，并最终将<em class="la">认证</em>流程引入到应用程序中。我将本文分为两部分，第1部分包含集成redux &amp; react-navigation的基本设置，第2部分包含认证的逻辑流程。<em class="la">这两部分都包含在本文</em>中。</p><h1 id="f862" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">先决条件</h1><p id="8b5d" class="pw-post-body-paragraph kc kd hu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz hn dt translated">要继续阅读，你至少应该有React-Native、React-Navigation、Redux的经验。我没有在演示应用程序中使用任何身份验证API(这在演示中不是问题，流程将与真实应用程序相同)。在现实世界中，你需要像redux-thunk这样的东西。我使用Redux-Persist来模拟持久化用户会话的真实行为。</p><h2 id="bd43" class="lb jd hu bd je lc ld le ji lf lg lh jm kn li lj jq kr lk ll ju kv lm ln jy lo dt translated">第1部分:用redux设置反应导航</h2><p id="44b5" class="pw-post-body-paragraph kc kd hu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz hn dt translated">将React-Navigation与redux集成的整体思想是在redux中管理导航状态。因此，我们可以从全局redux商店轻松管理所有的应用程序状态。</p><p id="39a2" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">在第1部分中，我们将通过创建一个导航缩减器来集成redux和React-navigation，导航缩减器将处理导航的状态，并添加redux的dispatch方法来处理通过redux分派的动作。为了更好地逐步理解，我创建了一些小的可演示的要点，了解这些小部分如何集成到当前的第1部分中的整个项目代码可在此处获得(回购的主分支):</p><div class="lu lv fm fo lw lx"><a href="https://github.com/shubhnik/redux-react-navigation" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab ej"><div class="lz ab ma cl cj mb"><h2 class="bd hv fv z el mc eo ep md er et ht dt translated">shubhnik/redux-react-导航</h2><div class="me l"><h3 class="bd b fv z el mc eo ep md er et ek translated">Redux-React-Navigation-React-Native+Redux+Redux-Persist+React导航</h3></div><div class="mf l"><p class="bd b gc z el mc eo ep md er et ek translated">github.com</p></div></div><div class="mg l"><div class="mh l mi mj mk mg ml ja lx"/></div></div></a></div><p id="dec4" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">首先让我们熟悉一些react-navigation的API，我们将在集成redux时使用这些API:</p><ol class=""><li id="7e53" class="mm mn hu ke b kf lp kj lq kn mo kr mp kv mq kz mr ms mt mu dt translated">这个API帮助我们将自己的<code class="eh mv mw mx my b">navigation</code>道具传递给导航器。传递给导航器的<code class="eh mv mw mx my b">navigation</code>道具将覆盖默认的<code class="eh mv mw mx my b">navigation</code>道具。</li><li id="5e2e" class="mm mn hu ke b kf mz kj na kn nb kr nc kv nd kz mr ms mt mu dt translated"><code class="eh mv mw mx my b"><a class="ae ka" href="https://reactnavigation.org/docs/routers/api#getActionForPathAndParams-path-params" rel="noopener ugc nofollow" target="_blank">getActionForPathAndParams</a>(path, params)</code>:这个API接收<code class="eh mv mw mx my b">path(the key defined for a route in Navigator</code>和<code class="eh mv mw mx my b">params</code>，并返回一个更新导航状态所需的动作。用简单的话它告诉我们"<em class="la">嘿！您需要执行此操作来导航到此路径。</em>考虑下面的例子，参见下面的<em class="la"> console.log </em>，它表示对<code class="eh mv mw mx my b">routeName: ‘screen1’</code>执行一个<code class="eh mv mw mx my b">NAVIGATE</code> <em class="la">动作</em>:</li></ol><figure class="ne nf ng nh fq iv"><div class="bz el l di"><div class="ni nj l"/></div></figure><p id="6b23" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">3.<code class="eh mv mw mx my b"><a class="ae ka" href="https://reactnavigation.org/docs/routers/api#getStateForAction-action-state" rel="noopener ugc nofollow" target="_blank">getStateForAction(action, state)</a></code>:我们已经计算了使用<code class="eh mv mw mx my b">getActionForPathAndParams</code>导航到特定路线的动作，现在我们需要更新导航器的状态以实际导航到该路线。为此，<code class="eh mv mw mx my b">getStateForAction</code>派上了用场。它接收操作和导航器的当前状态，并返回新的更新状态。简单地说，它说<em class="la">嘿！我将根据您提供给我的操作和当前状态，给您一个新的导航状态。如果不能理解提供的<em class="la">动作</em>，将返回null。<em class="la"> </em>考虑一下这个示例演示代码，以便理解<code class="eh mv mw mx my b">getStateForAction</code>是如何工作的:</em></p><figure class="ne nf ng nh fq iv"><div class="bz el l di"><div class="ni nj l"/></div><figcaption class="nk nl fg fe ff nm nn bd b be z ek">*NewStateOfNavigator* containing the new route “screen2” and index for new navigation state updated to 2.</figcaption></figure><p id="1105" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">我们已经计算了新的状态，现在我们想把这个状态传递给导航器。因此，让我们来完成整合redux和react导航的工作:</p><ul class=""><li id="858e" class="mm mn hu ke b kf lp kj lq kn mo kr mp kv mq kz no ms mt mu dt translated">让我们创建一个缩减器<em class="la"> navigationReducer </em>来处理导航状态:</li></ul><figure class="ne nf ng nh fq iv"><div class="bz el l di"><div class="ni nj l"/></div></figure><p id="76ac" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">上面的缩减器为导航器返回新的状态。<code class="eh mv mw mx my b">newState</code>将会是<code class="eh mv mw mx my b">null</code>如果提供给<code class="eh mv mw mx my b">getStateForAction</code>的动作不可理解，那么这种情况可能是当我们试图导航到一条未在我们的导航器<code class="eh mv mw mx my b">AppNavigator</code>中定义的路线时。</p><ul class=""><li id="4d71" class="mm mn hu ke b kf lp kj lq kn mo kr mp kv mq kz no ms mt mu dt translated">现在让我们将计算出的新状态从reducer传递到navigator(<em class="la">app navigator</em>)。我们还会将调度传递给导航器。为此，我们将使用上面讨论过的<code class="eh mv mw mx my b">addNavigationHelpers</code> API。下面是我们将用来将新的<code class="eh mv mw mx my b">navigation</code>道具(包含<code class="eh mv mw mx my b">state</code>和<code class="eh mv mw mx my b">dispatch</code>)传递给导航器(<em class="la"> AppNavigator </em>)的基本代码:</li></ul><figure class="ne nf ng nh fq iv"><div class="bz el l di"><div class="ni nj l"/></div></figure><p id="bc79" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">在上面代码片段的第17行，我们将<code class="eh mv mw mx my b">dispatch</code>和<code class="eh mv mw mx my b">state</code>传递给了导航器。在<code class="eh mv mw mx my b">AppNavigator</code>中定义的所有路线将接收这些<code class="eh mv mw mx my b">state</code>和<code class="eh mv mw mx my b">dispatch</code>。</p><ul class=""><li id="b329" class="mm mn hu ke b kf lp kj lq kn mo kr mp kv mq kz no ms mt mu dt translated">现在怎么办？我们如何导航到新路线(屏幕)？我们要做的是分派一个动作，然后<code class="eh mv mw mx my b"><a class="ae ka" href="https://gist.github.com/shubhnik/b55602633aaeb5919f6f3c15552d1802" rel="noopener ugc nofollow" target="_blank">basicNavigationReducer</a></code>会计算新的状态并将其传递给导航器。导航状态将被更新，我们将导航到新的路线。假设我们目前在<em class="la">屏幕1上，</em>下面是一个演示，演示如何分派一个操作来导航到<em class="la">屏幕2 </em>:</li></ul><figure class="ne nf ng nh fq iv"><div class="bz el l di"><div class="ni nj l"/></div></figure><p id="ff3c" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated"><code class="eh mv mw mx my b"><a class="ae ka" href="https://reactnavigation.org/docs/navigators/navigation-actions" rel="noopener ugc nofollow" target="_blank">NavigationActions</a></code>react-navigation的API返回一个动作对象，如上面的gist所示。返回的对象与<code class="eh mv mw mx my b">getActionForPathAndParams</code>返回的对象相同。</p><p id="62b3" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">现在我们已经检查了所有的部分:一个处理导航状态的缩减器，将我们自己的导航属性传递给导航器，调度操作来更新导航状态。我们在gists中看到了它们，现在您应该检查所有这些部件的组装和协同工作，理解这里的流程:</p><div class="lu lv fm fo lw lx"><a href="https://github.com/shubhnik/redux-react-navigation" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab ej"><div class="lz ab ma cl cj mb"><h2 class="bd hv fv z el mc eo ep md er et ht dt translated">shubhnik/redux-react-导航</h2><div class="me l"><h3 class="bd b fv z el mc eo ep md er et ek translated">Redux-React-Navigation-React-Native+Redux+Redux-Persist+React导航</h3></div><div class="mf l"><p class="bd b gc z el mc eo ep md er et ek translated">github.com</p></div></div><div class="mg l"><div class="np l mi mj mk mg ml ja lx"/></div></div></a></div></div><div class="ab cl nq nr hc ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="hn ho hp hq hr"><h2 id="2bc0" class="lb jd hu bd je lc ld le ji lf lg lh jm kn li lj jq kr lk ll ju kv lm ln jy lo dt translated">第2部分:实现认证流程</h2><p id="4a17" class="pw-post-body-paragraph kc kd hu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz hn dt translated">在这一部分中，我们将使用redux和react-navigation创建一个认证流。我们将关注该导航器以供参考:</p><pre class="ne nf ng nh fq nx my ny nz aw oa dt"><span id="10cf" class="lb jd hu my b fv ob oc l od oe">const AppNavigator = StackNavigator({<br/>  login: {<br/>    screen: Login<br/>  },<br/>  screen1: {<br/>    screen: Screen1<br/>  },<br/>  screen2: {<br/>    screen: Logout<br/>  }<br/>});</span></pre><p id="0484" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">下面是我们的身份验证流程的工作方式:</p><ul class=""><li id="a274" class="mm mn hu ke b kf lp kj lq kn mo kr mp kv mq kz no ms mt mu dt translated">如果用户没有登录，他/她将被显示<code class="eh mv mw mx my b">login</code>屏幕，他/她不能访问<code class="eh mv mw mx my b">screen1</code>或<code class="eh mv mw mx my b">screen2</code>。</li><li id="8b6e" class="mm mn hu ke b kf mz kj na kn nb kr nc kv nd kz no ms mt mu dt translated">已登录的用户必须注销才能返回登录屏幕。</li><li id="b816" class="mm mn hu ke b kf mz kj na kn nb kr nc kv nd kz no ms mt mu dt translated">如果用户登录，关闭应用程序，然后重新打开应用程序，将显示<code class="eh mv mw mx my b">screen1</code>，而不是<code class="eh mv mw mx my b">login</code>屏幕。</li></ul><p id="2ac9" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">我们将使用这个可演示的最小loginReducer来管理我们的登录状态:</p><figure class="ne nf ng nh fq iv"><div class="bz el l di"><div class="ni nj l"/></div></figure><p id="8d05" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">管理身份验证流状态的最重要的逻辑是由我们的导航缩减器管理的。我们的<code class="eh mv mw mx my b"><a class="ae ka" href="https://gist.github.com/shubhnik/b55602633aaeb5919f6f3c15552d1802" rel="noopener ugc nofollow" target="_blank">basicNavigationReducer</a></code>已经变成了一个小的<a class="ae ka" href="https://gist.github.com/shubhnik/9f7bafd3145e66434705cd1e995d1356" rel="noopener ugc nofollow" target="_blank">更有能力的reducer </a>，它可以处理认证流，让我们来看看我们新的<a class="ae ka" href="https://gist.github.com/shubhnik/9f7bafd3145e66434705cd1e995d1356" rel="noopener ugc nofollow" target="_blank"> navigationReducer </a>:</p><figure class="ne nf ng nh fq iv"><div class="bz el l di"><div class="ni nj l"/></div><figcaption class="nk nl fg fe ff nm nn bd b be z ek">navigationReducer.js</figcaption></figure><p id="c186" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">让我们一步步度过这个<code class="eh mv mw mx my b">navigationReducer</code>:</p><ul class=""><li id="5932" class="mm mn hu ke b kf lp kj lq kn mo kr mp kv mq kz no ms mt mu dt translated">在第4行，我们正在计算<code class="eh mv mw mx my b">ActionForLoggedOut</code>，当用户没有登录时，我们需要导航到<code class="eh mv mw mx my b">login</code>屏幕的动作。在第7行，我们正在计算<code class="eh mv mw mx my b">stateForLoggedOut</code>,它将返回注销用户的导航状态，即<em class="la">登录屏幕将被显示。</em></li><li id="b400" class="mm mn hu ke b kf mz kj na kn nb kr nc kv nd kz no ms mt mu dt translated">在第5行，我们正在计算<code class="eh mv mw mx my b">ActionForLoggedIn</code>，当用户登录时，我们需要导航到<code class="eh mv mw mx my b">screen1</code>的动作。在第8行，我们正在计算<code class="eh mv mw mx my b">stateForLoggedIn</code>，它将返回登录用户的导航状态，即<em class="la">屏幕1将被显示。</em></li><li id="d9c7" class="mm mn hu ke b kf mz kj na kn nb kr nc kv nd kz no ms mt mu dt translated">在第9行，我们正在将<code class="eh mv mw mx my b">stateForLoggedOut</code>和<code class="eh mv mw mx my b">stateForLoggedIn</code>组装成<code class="eh mv mw mx my b">initialState</code>。根据用户是否登录，我们将传递<code class="eh mv mw mx my b">stateForLoggedIn</code>，如果没有登录，我们将从<code class="eh mv mw mx my b">initialState</code>传递<code class="eh mv mw mx my b">stateForLoggedOut</code>到我们的导航器<code class="eh mv mw mx my b">AppNavigator</code>:</li></ul><figure class="ne nf ng nh fq iv"><div class="bz el l di"><div class="ni nj l"/></div><figcaption class="nk nl fg fe ff nm nn bd b be z ek">conditionally passing state to navigator based on if user is logged in or not</figcaption></figure><ul class=""><li id="98c0" class="mm mn hu ke b kf lp kj lq kn mo kr mp kv mq kz no ms mt mu dt translated">在<code class="eh mv mw mx my b"><a class="ae ka" href="https://gist.github.com/shubhnik/9f7bafd3145e66434705cd1e995d1356" rel="noopener ugc nofollow" target="_blank">navigationReducer.js</a></code>的第19行，考虑<code class="eh mv mw mx my b">Login</code>的情况。在调度<code class="eh mv mw mx my b">LOGIN</code>动作时，在<code class="eh mv mw mx my b"><a class="ae ka" href="https://gist.github.com/shubhnik/55cb0a9f82d6eeb20004e43ee6b3e746" rel="noopener ugc nofollow" target="_blank">loginReducer.js</a></code>中<code class="eh mv mw mx my b">isLoggedIn</code>字段被设置为<code class="eh mv mw mx my b">true</code>，相应地我们将更新<code class="eh mv mw mx my b">stateForLoggedIn</code>，现在我们的导航堆栈将由两条路线组成:<code class="eh mv mw mx my b">screen1</code>堆叠在<code class="eh mv mw mx my b">login</code>屏幕上。因此，我们将导航至<code class="eh mv mw mx my b">screen1</code>。我们将通过禁用手势和后退按钮来配置<code class="eh mv mw mx my b">screen</code>，因为我们希望在注销情况下将<code class="eh mv mw mx my b">login</code>路线保留在导航堆栈中。</li><li id="72f1" class="mm mn hu ke b kf mz kj na kn nb kr nc kv nd kz no ms mt mu dt translated">在<code class="eh mv mw mx my b"><a class="ae ka" href="https://gist.github.com/shubhnik/9f7bafd3145e66434705cd1e995d1356" rel="noopener ugc nofollow" target="_blank">navigationReducer.js</a></code>的第25行，考虑<code class="eh mv mw mx my b">Logout</code>的情况。在调度<code class="eh mv mw mx my b">LOGOUT</code>动作时，<code class="eh mv mw mx my b">isLoggedIn</code>字段被设置为假，这导致<code class="eh mv mw mx my b">stateForLoggedOut</code>被提供给导航器。因此，我们必须更新导航状态的<code class="eh mv mw mx my b">stateForLoggedOut</code>块，并将其重置为仅包含<code class="eh mv mw mx my b">login</code>路线。</li><li id="a173" class="mm mn hu ke b kf mz kj na kn nb kr nc kv nd kz no ms mt mu dt translated">在<code class="eh mv mw mx my b"><a class="ae ka" href="https://gist.github.com/shubhnik/9f7bafd3145e66434705cd1e995d1356" rel="noopener ugc nofollow" target="_blank">navigationReducer.js</a></code>的第36行，除了<code class="eh mv mw mx my b">LOGIN</code>和<code class="eh mv mw mx my b">LOGOUT</code>之外的所有调度动作都是默认情况下处理的。目前在演示应用中，这里处理的唯一动作是导航到<code class="eh mv mw mx my b">screen2</code>。由于<code class="eh mv mw mx my b">screen2</code>只能由登录用户访问，因此我们只需要更新<code class="eh mv mw mx my b">stateForLoggedIn</code>。</li><li id="cd1c" class="mm mn hu ke b kf mz kj na kn nb kr nc kv nd kz no ms mt mu dt translated">还有一个未决案件正在处理行动<code class="eh mv mw mx my b">@@redux/INIT</code>。这个动作是redux在app打开时自动调度的。我们在这种情况下考虑这个动作:假设我们没有考虑这个动作，那么，如果用户已经登录，那么将向用户显示<code class="eh mv mw mx my b">screen1</code>。当前导航栈将只包含<code class="eh mv mw mx my b">screen1</code>。现在用户导航到<code class="eh mv mw mx my b">screen2</code>，并从那里调度<code class="eh mv mw mx my b">LOGOUT</code>动作。因为对于<code class="eh mv mw mx my b">LOGOUT</code>动作<code class="eh mv mw mx my b">login</code>屏幕需要显示，但它不在我们当前的导航堆栈中。因此，一个不太流畅的动画将会发生(见下面左gif标题动画)。但是由于我们正在处理<code class="eh mv mw mx my b">@@redux/INIT</code>，并且我们正在导航栈<a class="ae ka" href="https://gist.github.com/shubhnik/9f7bafd3145e66434705cd1e995d1356#file-navigationreducer-js-L16" rel="noopener ugc nofollow" target="_blank"> <em class="la">(见第16行)</em> </a> <em class="la">，</em>的底部插入<code class="eh mv mw mx my b">login</code>路线，因此我们启用了注销的平滑过渡动画(右下图)。考虑以下两个动画(有无处理<code class="eh mv mw mx my b">@@redux/INIT</code>):</li></ul><div class="ne nf ng nh fq ab cb"><figure class="of iv og oh oi oj ok paragraph-image"><img src="../Images/30afa2940ccdf574209ee4143fa090b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:496/1*3gixBAKIlJwHzgwkqMhoDQ.gif"/></figure><figure class="of iv og oh oi oj ok paragraph-image"><img src="../Images/f7a0aa9f044bf55bcdf8fb04f2968fc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:496/1*zBSpILmqsIwl9JXOxNizJQ.gif"/><figcaption class="nk nl fg fe ff nm nn bd b be z ek ol di om on">On left we aren’t handling the “@@redux/INIT” and hence the unpleasant header animation, on right we are handling the “@@redux/INIT” action and hence a more natural and a pleasant header animation.</figcaption></figure></div><p id="9550" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">到目前为止，我们已经研究了处理认证流的<code class="eh mv mw mx my b">navigationReducer</code>。现在已经建立了身份验证流程。我使用Redux-Persist来持久化用户会话。React-Navigation和redux最终找到了与认证流的和谐😃。</p><p id="64a3" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">要检查完整的认证流程及其运行方式，请查看此repo 的<em class="la"> authFlow分支，以便更好地理解:</em></p><div class="lu lv fm fo lw lx"><a href="https://github.com/shubhnik/redux-react-navigation/tree/authFlow" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab ej"><div class="lz ab ma cl cj mb"><h2 class="bd hv fv z el mc eo ep md er et ht dt translated">shubhnik/redux-react-导航</h2><div class="me l"><h3 class="bd b fv z el mc eo ep md er et ek translated">Redux-React-Navigation-React-Native+Redux+Redux-Persist+React导航</h3></div><div class="mf l"><p class="bd b gc z el mc eo ep md er et ek translated">github.com</p></div></div><div class="mg l"><div class="oo l mi mj mk mg ml ja lx"/></div></div></a></div><h2 id="b742" class="lb jd hu bd je lc ld le ji lf lg lh jm kn li lj jq kr lk ll ju kv lm ln jy lo dt translated">在Android中处理硬件返回按钮</h2><p id="a35d" class="pw-post-body-paragraph kc kd hu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz hn dt translated">因为我们用redux处理导航状态，所以react-navigation失去了对管理状态的控制。因此，我们必须自己处理Android中的后退按钮。react-navigation的官方文档中有一个关于在Android中处理后退按钮的很好的文档，在这里:</p><div class="lu lv fm fo lw lx"><a href="https://reactnavigation.org/docs/guides/redux#Handling-the-Hardware-Back-Button-in-Android" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab ej"><div class="lz ab ma cl cj mb"><h2 class="bd hv fv z el mc eo ep md er et ht dt translated">Redux集成指南| React导航</h2><div class="me l"><h3 class="bd b fv z el mc eo ep md er et ek translated">编辑描述</h3></div><div class="mf l"><p class="bd b gc z el mc eo ep md er et ek translated">reactnavigation.org</p></div></div></div></a></div><h2 id="72ca" class="lb jd hu bd je lc ld le ji lf lg lh jm kn li lj jq kr lk ll ju kv lm ln jy lo dt translated">下一步是什么？</h2><p id="fa98" class="pw-post-body-paragraph kc kd hu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz hn dt translated">集成redux和react-navigation的最重要部分已经完成。添加更复杂的嵌套导航现在不会是什么困难的任务。我将为github repo添加更多的嵌套导航演示。<a class="ae ka" href="https://github.com/shubhnik/redux-react-navigation" rel="noopener ugc nofollow" target="_blank">别忘了开始关注回购，了解更多更新</a>。你也可以分叉回购，与社区分享你的解决方案。</p><p id="a6fb" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">如果这个指南碰巧对你有用，那么请用掌声表达你的爱，不要忘记与他人分享🔔 🎉。你可以在<a class="ae ka" href="https://twitter.com/shubhniksingh" rel="noopener ugc nofollow" target="_blank"> <strong class="ke hv"> <em class="la">推特</em> </strong> </a>上关注我，有时我的推文有些意义。</p><h1 id="68a2" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">更新</h1><ol class=""><li id="945d" class="mm mn hu ke b kf kg kj kk kn op kr oq kv or kz mr ms mt mu dt translated">最初我使用了<code class="eh mv mw mx my b"><a class="ae ka" href="https://github.com/shubhnik/redux-react-navigation/blob/authFlow/src/Reducers/navigationReducer.js#L25" rel="noopener ugc nofollow" target="_blank"><strong class="ke hv">@@redux/INIT</strong></a></code>，这不是一种好的做法。我们不应该剥夺redux自身的行为😢。您可以不使用<a class="ae ka" href="https://github.com/shubhnik/redux-react-navigation/tree/nestedNavigators" rel="noopener ugc nofollow" target="_blank"> <strong class="ke hv"> <em class="la"> nestedNavigators分支</em> </strong> </a> <strong class="ke hv"> <em class="la">中的<code class="eh mv mw mx my b">@@redux/Init</code>来检查我是如何管理状态的。</em> </strong></li></ol><p id="96d2" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">2.自从我发表这篇文章以来，我又增加了两个分支<a class="ae ka" href="https://github.com/shubhnik/redux-react-navigation/tree/nestedTab" rel="noopener ugc nofollow" target="_blank"> <em class="la"> nestedTabs </em> </a>和<a class="ae ka" href="https://github.com/shubhnik/redux-react-navigation/tree/nestedNavigators" rel="noopener ugc nofollow" target="_blank"><em class="la">nested navigators</em></a><em class="la"/>演示更复杂的导航结构。</p><p id="7d55" class="pw-post-body-paragraph kc kd hu ke b kf lp kh ki kj lq kl km kn lr kp kq kr ls kt ku kv lt kx ky kz hn dt translated">3.欢迎讨论/反馈😄。</p></div></div>    
</body>
</html>