<html>
<head>
<title>Getting to Grips with ES6: Template Literals</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掌握ES6:模板文字</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/getting-to-grips-with-es6-template-literals-9a42e4389e1e?source=collection_archive---------2-----------------------#2016-11-07">https://medium.com/hackernoon/getting-to-grips-with-es6-template-literals-9a42e4389e1e?source=collection_archive---------2-----------------------#2016-11-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/428762b9d3039100524fb1d1f21549e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VtMI3O_howmpjifr2_Hl_A.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="f689" class="pw-subtitle-paragraph jc ie if bd b jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ek translated">第三部分:理解标准的、嵌入的、多行的和标记的模板文字。</h2></div><p id="8b67" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><a class="ae kq" rel="noopener" href="/@andrewjrhill/getting-to-grips-with-es6-destructuring-e5b5ddb34990#.3zcf16qq9"> <em class="kr">点击此处查看第四部分:</em>理解解构:引用与默认。</a></p><h2 id="d2b8" class="ks kt if bd ku kv kw kx ky kz la lb lc kd ld le lf kh lg lh li kl lj lk ll lm dt translated">前言</h2><p id="74ad" class="pw-post-body-paragraph ju jv if jw b jx ln jg jz ka lo jj kc kd lp kf kg kh lq kj kk kl lr kn ko kp hn dt translated">这篇文章是为希望更好地理解ES6模板文字的初级到中级开发人员设计的“入门”读物。</p><p id="9483" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">作为我的“掌握ES6”系列的一部分，我的目标是创建一个参考，其中包含简单明了的解释，以帮助我们理解这些概念，并将它们直接应用到我们当前的开发过程中。</p><p id="8958" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">由安德鲁·希尔撰写。<br/>你可以在<a class="ae kq" href="http://www.linkedin.com/in/andrewjrhill" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>、<a class="ae kq" href="https://twitter.com/andrewjrhill" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae kq" href="https://www.instagram.com/andrewshills/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>、<a class="ae kq" href="https://github.com/Sntax/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到我。</p></div><div class="ab cl ls lt hc lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="hn ho hp hq hr"><h1 id="4ebc" class="lz kt if bd ku ma mb mc ky md me mf lc jl mg jm lf jo mh jp li jr mi js ll mj dt translated">模板文字</h1><p id="1d41" class="pw-post-body-paragraph ju jv if jw b jx ln jg jz ka lo jj kc kd lp kf kg kh lq kj kk kl lr kn ko kp hn dt translated">模板文字(在EcmaScript规范的早期版本中也称为模板字符串)，由<a class="ae kq" href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals" rel="noopener ugc nofollow" target="_blank"> MDN定义为允许嵌入表达式的字符串文字。它们为我们提供了更简洁的语法，让我们能够更好地控制如何显示字符串数据。</a></p><h2 id="84fe" class="ks kt if bd ku kv kw kx ky kz la lb lc kd ld le lf kh lg lh li kl lj lk ll lm dt translated">传统的方式</h2><p id="0f60" class="pw-post-body-paragraph ju jv if jw b jx ln jg jz ka lo jj kc kd lp kf kg kh lq kj kk kl lr kn ko kp hn dt translated">以下示例说明了在ES6和模板文字出现之前，如何向字符串添加变量:</p><pre class="mk ml mm mn fq mo mp mq mr aw ms dt"><span id="c45e" class="ks kt if mp b fv mt mu l mv mw">var age = 26;</span><span id="e02d" class="ks kt if mp b fv mx mu l mv mw">console.log('Andrew is ' + age + ' years old!');</span><span id="1585" class="ks kt if mp b fv mx mu l mv mw">// Output: "Andrew is 26 years old!"</span></pre><p id="d028" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">该模式适用于任何<a class="ae kq" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>表达式:</p><pre class="mk ml mm mn fq mo mp mq mr aw ms dt"><span id="47f9" class="ks kt if mp b fv mt mu l mv mw">var currentYear = 2016;<br/>var birthYear = 1990;</span><span id="c9e7" class="ks kt if mp b fv mx mu l mv mw">console.log('Andrew is ' + currentYear - birthYear + ' years old!');</span><span id="59b0" class="ks kt if mp b fv mx mu l mv mw">// Output: "Andrew is 26 years old!"</span></pre><p id="fc08" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">要求使用连接是不利的，因为它迫使我们打破我们的字符串，以便把我们的表达式。在<a class="ae kq" href="https://hackernoon.com/tagged/es6" rel="noopener ugc nofollow" target="_blank"> ES6 </a>之前，JavaScript缺乏简单地将表达式<em class="kr">插入字符串的能力。许多其他语言中已经存在多年的一个特征。</em></p><h2 id="d5c0" class="ks kt if bd ku kv kw kx ky kz la lb lc kd ld le lf kh lg lh li kl lj lk ll lm dt translated">加入新的！</h2><p id="859b" class="pw-post-body-paragraph ju jv if jw b jx ln jg jz ka lo jj kc kd lp kf kg kh lq kj kk kl lr kn ko kp hn dt translated">为了构造一个模板文字，我们需要使用反斜线(<code class="eh my mz na mp b">`</code>)来代替单引号或双引号。表达式通过用美元符号和花括号(<code class="eh my mz na mp b">${}</code>)括起来插入到字符串中。</p><p id="82ed" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">了解了这一点，我们可以将第一个示例重写如下:</p><pre class="mk ml mm mn fq mo mp mq mr aw ms dt"><span id="1ce5" class="ks kt if mp b fv mt mu l mv mw">const age = 26;</span><span id="0a19" class="ks kt if mp b fv mx mu l mv mw">console.log(`Andrew is ${age} years old!`);</span><span id="c6e5" class="ks kt if mp b fv mx mu l mv mw">// Output: "Andrew is 26 years old!"</span></pre><p id="606c" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">我们也可以将第二个示例重写如下:</p><pre class="mk ml mm mn fq mo mp mq mr aw ms dt"><span id="c378" class="ks kt if mp b fv mt mu l mv mw">const currentYear = 2016;<br/>const birthYear = 1990;</span><span id="a44b" class="ks kt if mp b fv mx mu l mv mw">console.log(`Andrew is ${currentYear - birthYear} years old!`);</span><span id="083e" class="ks kt if mp b fv mx mu l mv mw">// Output: "Andrew is 26 years old!"</span></pre><p id="ebff" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><em class="kr">真好看！</em></p><h2 id="d159" class="ks kt if bd ku kv kw kx ky kz la lb lc kd ld le lf kh lg lh li kl lj lk ll lm dt translated">多行模板文字</h2><p id="69cb" class="pw-post-body-paragraph ju jv if jw b jx ln jg jz ka lo jj kc kd lp kf kg kh lq kj kk kl lr kn ko kp hn dt translated">在任何JavaScript代码基础上，多行字符串总是有点碍眼。每一个新行都需要转义字符或连接。一个传递给谷歌地图的<a class="ae kq" href="https://developers.google.com/maps/documentation/javascript/infowindows" rel="noopener ugc nofollow" target="_blank">基本信息窗口很好地说明了这一点:</a></p><pre class="mk ml mm mn fq mo mp mq mr aw ms dt"><span id="a77f" class="ks kt if mp b fv mt mu l mv mw">var title = 'Coffee Shop';<br/>var description = 'Drink coffee!';</span><span id="49df" class="ks kt if mp b fv mx mu l mv mw">var infoWindow = '&lt;div&gt;' +<br/>                   '&lt;h3&gt;' + title + '&lt;/h3&gt;' +<br/>                   '&lt;p&gt;' + description + '&lt;/p&gt;' +<br/>                 '&lt;/div&gt;';</span><span id="3628" class="ks kt if mp b fv mx mu l mv mw">console.log(infoWindow);</span><span id="c6c3" class="ks kt if mp b fv mx mu l mv mw">// Output: "&lt;div&gt;&lt;h3&gt;Coffee Shop&lt;/h3&gt;&lt;p&gt;Drink coffee!&lt;/p&gt;&lt;/div&gt;"</span></pre><p id="2a79" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">让我们看看使用模板文字编写时是什么样子的:</p><pre class="mk ml mm mn fq mo mp mq mr aw ms dt"><span id="9c8d" class="ks kt if mp b fv mt mu l mv mw">const title = 'Coffee Shop';<br/>const description = 'Drink coffee!';</span><span id="1292" class="ks kt if mp b fv mx mu l mv mw">const infoWindow = `&lt;div&gt;<br/>                      &lt;h3&gt;${title}&lt;/h3&gt;<br/>                      &lt;p&gt;${description}&lt;/p&gt;<br/>                    &lt;/div&gt;`;</span><span id="6086" class="ks kt if mp b fv mx mu l mv mw">console.log(infoWindow);</span><span id="d3c5" class="ks kt if mp b fv mx mu l mv mw">// Output: "&lt;div&gt;<br/>              &lt;h3&gt;Coffee Shop&lt;/h3&gt;<br/>              &lt;p&gt;Drink coffee!&lt;/p&gt;<br/>            &lt;/div&gt;"</span></pre><p id="891b" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">info window代码的模板文本版本明显更短，更易读。我们的输出甚至在不使用换行符的情况下保留了换行符。</p><h2 id="027c" class="ks kt if bd ku kv kw kx ky kz la lb lc kd ld le lf kh lg lh li kl lj lk ll lm dt translated">嵌入模板文字</h2><p id="a9d1" class="pw-post-body-paragraph ju jv if jw b jx ln jg jz ka lo jj kc kd lp kf kg kh lq kj kk kl lr kn ko kp hn dt translated">模板文字的一个不太为人所知的特性是它们能够被<em class="kr">插入到另一个模板文字</em>中。虽然这可能不是你经常遇到的事情，但知道这一点肯定是有帮助的。</p><p id="c303" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">我们通过使用三元运算符调整模板文本的结果来说明这一点，如下所示:</p><pre class="mk ml mm mn fq mo mp mq mr aw ms dt"><span id="88a2" class="ks kt if mp b fv mt mu l mv mw">const hungry = true;<br/>const foodType = 'pizza';</span><span id="3700" class="ks kt if mp b fv mx mu l mv mw">const foodState = <br/>  `Andrew is ${hungry ? `hungry for ${foodType}!` : `full!`}`;</span><span id="2f87" class="ks kt if mp b fv mx mu l mv mw">console.log(foodState);</span><span id="2664" class="ks kt if mp b fv mx mu l mv mw">// Output: "Andrew is hungry for pizza!"</span></pre><h2 id="6271" class="ks kt if bd ku kv kw kx ky kz la lb lc kd ld le lf kh lg lh li kl lj lk ll lm dt translated">标记的模板文字</h2><p id="ab1b" class="pw-post-body-paragraph ju jv if jw b jx ln jg jz ka lo jj kc kd lp kf kg kh lq kj kk kl lr kn ko kp hn dt translated">模板文字有一种称为<em class="kr">标记模板文字的高级形式。</em>本质上，标记的模板文字通过允许我们用命名函数修改模板的输出，给了我们更多的控制。</p><p id="b9c5" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">考虑下面的例子:</p><pre class="mk ml mm mn fq mo mp mq mr aw ms dt"><span id="2f54" class="ks kt if mp b fv mt mu l mv mw">const name = 'Damon';</span><span id="7038" class="ks kt if mp b fv mx mu l mv mw">function altered(string, ...values) {<br/>  return 'Wait, what?';<br/>}</span><span id="3c42" class="ks kt if mp b fv mx mu l mv mw">const text = altered`The dogs name is ${name}.`;</span><span id="69c3" class="ks kt if mp b fv mx mu l mv mw">console.log(text);</span><span id="24e1" class="ks kt if mp b fv mx mu l mv mw">// Output: "Wait, what?"</span></pre><p id="d325" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">在上面的例子中，函数<code class="eh my mz na mp b">altered</code>覆盖了<code class="eh my mz na mp b">text</code>模板文本的内容，因为函数返回了字符串<code class="eh my mz na mp b">Wait, what?</code>。命名函数<code class="eh my mz na mp b">altered</code>直接控制模板字符串输出的内容。</p><p id="4f03" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">为了创建一个带标签的模板文字，我们首先定义一个返回某个值的命名函数。该值不必是字符串。通过将函数名放在模板文字的反斜线之前来调用函数。</p><p id="8dcb" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">标记模板中使用的函数可以接收两个参数，<code class="eh my mz na mp b">strings</code>和<code class="eh my mz na mp b">...values</code>。第一个参数包含一个字符串数组。字符串数组中的最后一项总是空字符串。在我们的例子中，我们的<code class="eh my mz na mp b">strings</code>参数包含以下值:</p><pre class="mk ml mm mn fq mo mp mq mr aw ms dt"><span id="ee16" class="ks kt if mp b fv mt mu l mv mw">console.log(strings[0]) // Output: "The dogs name is"<br/>console.log(strings[1]]) // Output: ""</span></pre><p id="9c1f" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">第二个参数包含传递给字符串的任何变量中存储的值。在我们的例子中，<code class="eh my mz na mp b">...values</code>参数包含以下值:</p><pre class="mk ml mm mn fq mo mp mq mr aw ms dt"><span id="1e3c" class="ks kt if mp b fv mt mu l mv mw">console.log(values[0]) // Output: "Damon"</span></pre><p id="e8c5" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">这些论点考虑到了一些强大的用例。下面是一个例子，我们循环字符串数组中的每一项，并将<code class="eh my mz na mp b">&lt;strong&gt;</code>标签应用于传递到字符串中的任何变量:</p><pre class="mk ml mm mn fq mo mp mq mr aw ms dt"><span id="3943" class="ks kt if mp b fv mt mu l mv mw">function strong(strings, ...values) {<br/>  let finalString = '';<br/>  <br/>  strings.forEach((string, i) =&gt; {<br/>    if (string !== '') {<br/>      finalString += `${string}&lt;strong&gt;${values[i]}&lt;/strong&gt;`;<br/>    }<br/>  })<br/><br/>  return finalString;<br/>}</span><span id="ada7" class="ks kt if mp b fv mx mu l mv mw">var name = 'Damon';<br/>var text = strong`The dogs name is ${name}`;</span><span id="4562" class="ks kt if mp b fv mx mu l mv mw">console.log(text);</span><span id="6545" class="ks kt if mp b fv mx mu l mv mw">// Output: "The dogs name is &lt;strong&gt;Damon&lt;/strong&gt;"</span></pre></div><div class="ab cl ls lt hc lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="hn ho hp hq hr"><p id="aa39" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">感谢阅读。如果您喜欢这篇文章，请考虑推荐它来支持本系列的未来安装。👏</p><p id="1a3a" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><a class="ae kq" rel="noopener" href="/@andrewjrhill/getting-to-grips-with-es6-destructuring-e5b5ddb34990#.3zcf16qq9"> <em class="kr">点击此处查看第四部分:</em>理解解构:引用与默认。</a></p><figure class="mk ml mm mn fq hw"><div class="bz el l di"><div class="nb nc l"/></div></figure></div></div>    
</body>
</html>