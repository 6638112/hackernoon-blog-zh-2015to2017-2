<html>
<head>
<title>What are Hubspot webhooks and why are they useful?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是Hubspot webhooks，它们为什么有用？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/what-are-hubspot-webhooks-and-why-are-they-useful-a0caed6d09b6?source=collection_archive---------5-----------------------#2017-07-19">https://medium.com/hackernoon/what-are-hubspot-webhooks-and-why-are-they-useful-a0caed6d09b6?source=collection_archive---------5-----------------------#2017-07-19</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="9270" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">了解如何设置自定义网页挂钩</h2></div><p id="0249" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在上一篇文章中，我列出了将<a class="ae kf" href="https://hackernoon.com/tagged/hubspot" rel="noopener ugc nofollow" target="_blank"> Hubspot </a>与几乎任何东西集成的三种方式，webhooks是其中之一。<br/>你可能第一次听说webhooks是在尝试将Hubspot与需要通知来触发外部工作流的第三方软件连接时。</p><p id="5256" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">例如，<a class="ae kf" href="https://hackernoon.com/tagged/zapier" rel="noopener ugc nofollow" target="_blank"> Zapier </a>将允许你基于联系属性的改变启动Zap，但是不支持由公司或交易属性的改变触发。那么，我们如何设置Hubspot来通知第三方应用程序公司属性的变化呢？</p><p id="a63e" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这就是webhooks发挥作用的时候了。Hubspot上没有关于它的完整文档，因此有了这篇文章。</p><h1 id="03b4" class="kg kh hu bd ki kj kk kl km kn ko kp kq ja kr jb ks jd kt je ku jg kv jh kw kx dt translated">webhook到底是什么？</h1><blockquote class="ky kz la"><p id="54b1" class="jj jk lb jl b jm jn iv jo jp jq iy jr lc jt ju jv ld jx jy jz le kb kc kd ke hn dt translated">有时也称为反向API，webhooks是用户定义的从平台到外部服务的HTTP回调，通常在预定义事件发生时触发</p></blockquote><p id="2848" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">就联系人而言，可以使用Hubspot工作流设置联系人的webhooks，因为注册标准可以是联系人属性的更改。但是，对于公司/交易属性的更改或基于联系人/公司/交易的创建/删除来触发事件，您将需要设置一个自定义webhook。</p><p id="4947" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="lb">(这里我也讨论</em><a class="ae kf" rel="noopener" href="/@getlionel/how-to-connect-hubspot-and-zapier-b6ceaee9972f"><em class="lb"/></a><em class="lb">如何扩展原生Zapier与Hubspot的集成)。</em></p><h1 id="f60a" class="kg kh hu bd ki kj kk kl km kn ko kp kq ja kr jb ks jd kt je ku jg kv jh kw kx dt translated">1.每个webhook都需要一个应用程序</h1><p id="8ee4" class="pw-post-body-paragraph jj jk hu jl b jm lf iv jo jp lg iy jr js lh ju jv jw li jy jz ka lj kc kd ke hn dt translated">Hubspot <em class="lb">授权</em>，<em class="lb">执行</em>，<em class="lb">监控</em>应用环境中的webhooks。Hubspot将通过检查该应用程序的访问权限来确定给定的webhook是否可以读取您的数据并在Hubspot之外推送更新。<br/>这些权限是您在门户中安装Hubspot集成时授予的权限。</p><p id="c74b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">所以注册webhook的第一步是<a class="ae kf" href="https://app.hubspot.com/signup/developers" rel="noopener ugc nofollow" target="_blank">创建一个Hubspot开发者账户</a>(免费)，这将让你创建你的第一个Hubspot应用程序。<br/>不用担心，你不一定要做开发者。在这个阶段，应用程序只是一个抽象的实体，你根本不需要任何代码。如果你只需要设置一个webhook，你的应用程序将只包含一个<em class="lb">名称</em>、<em class="lb"> ID、客户端ID </em>和<em class="lb">客户端秘密</em>。</p><blockquote class="ky kz la"><p id="2219" class="jj jk lb jl b jm jn iv jo jp jq iy jr lc jt ju jv ld jx jy jz le kb kc kd ke hn dt translated">Hubspot使用客户机ID和secret来验证您的应用程序发出的请求。“客户端”在OAuth标准的上下文中是指消费平台数据，它基本上是您的应用程序的凭证。它相当于软件的用户名/密码。</p></blockquote><figure class="ll lm ln lo fq lp fe ff paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="fe ff lk"><img src="../Images/cbea6b75e9107172f646f11fedae593d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N-NEhQhh-DxcecW8Fcjw0w.jpeg"/></div></div><figcaption class="lw lx fg fe ff ly lz bd b be z ek">Your first Hubspot application! It’s really only a name, ID and Client ID / Client secret</figcaption></figure><h1 id="0d1d" class="kg kh hu bd ki kj kk kl km kn ko kp kq ja kr jb ks jd kt je ku jg kv jh kw kx dt translated">2.配置您的webhook</h1><p id="4101" class="pw-post-body-paragraph jj jk hu jl b jm lf iv jo jp lg iy jr js lh ju jv jw li jy jz ka lj kc kd ke hn dt translated">一旦你创建了一个应用程序，进入<em class="lb"> Webhook订阅</em>，点击<em class="lb">创建订阅</em>。</p><p id="0c8f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Hubspot中的每个webhook可以由以下事件之一触发:<br/> —联系人/公司/交易的属性变化<br/> —创建新的联系人/公司/交易<br/> —删除现有的联系人/公司/交易</p><figure class="ll lm ln lo fq lp fe ff paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="fe ff ma"><img src="../Images/ed3f6ea9ce3aa05cdd3062905f8a87d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mvKfEoICeHoao6UgUD7QnA.jpeg"/></div></div><figcaption class="lw lx fg fe ff ly lz bd b be z ek">Set up a webhook for when a contact is deleted</figcaption></figure><p id="1fb3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">配置你的webhook来定位正确的URL。如果你想发送一个触发器给Zapier，那么复制你的Zapier hook URL。否则，您可以让它指向您的自定义应用程序。<br/>同时，我推荐使用一个<a class="ae kf" href="https://requestb.in/143fcxd1" rel="noopener ugc nofollow" target="_blank">https://requestb.in/</a>URL来试着调试你的webhook。这是一个临时服务器，它将监听你的webhook，并在你的浏览器中显示Hubspot服务器生成的有效负载。</p><h1 id="add4" class="kg kh hu bd ki kj kk kl km kn ko kp kq ja kr jb ks jd kt je ku jg kv jh kw kx dt translated">3.激活门户网站上的网页挂钩</h1><p id="f227" class="pw-post-body-paragraph jj jk hu jl b jm lf iv jo jp lg iy jr js lh ju jv jw li jy jz ka lj kc kd ke hn dt translated">安装您的应用程序需要遵循与第三方Hubspot集成完全相同的流程。它遵循OAuth 2.0 <em class="lb">客户端授权代码流程</em>。</p><figure class="ll lm ln lo fq lp fe ff paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="fe ff mb"><img src="../Images/620acc04d04a0a79012a13e68375b68d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qH2SyNHvrTa8UR4d8n08pA.png"/></div></div><figcaption class="lw lx fg fe ff ly lz bd b be z ek">OAuth Flow to grant an application access to another</figcaption></figure><ol class=""><li id="c880" class="mc md hu jl b jm jn jp jq js me jw mf ka mg ke mh mi mj mk dt translated">首先，在用您的应用程序CLIENT_ID替换client_id之后浏览这个URL:<a class="ae kf" href="https://app.hubspot.com/oauth/authorize?client_id=ea720b12-502d-46cc-866f-dd58448b89d1&amp;scope=contacts%20automation&amp;redirect_uri=https://www.hubspot.com" rel="noopener ugc nofollow" target="_blank">https://app.hubspot.com/oauth/authorize?client_id=CLIENT_ID&amp;scope = contacts % 20自动化&amp;redirect _ uri = https://www . hubspot . com</a></li><li id="4448" class="mc md hu jl b jm ml jp mm js mn jw mo ka mp ke mh mi mj mk dt translated">您需要选择安装应用程序(及其webhook)的门户。</li><li id="c709" class="mc md hu jl b jm ml jp mm js mn jw mo ka mp ke mh mi mj mk dt translated">Hubspot将向您(作为门户Hubspot的所有者)显示一个提示，要求授权应用程序访问您的Hubspot数据。<br/>您将被重定向到Hubspot主页，但请注意复制页面URL中的“code”参数。</li><li id="0ae8" class="mc md hu jl b jm ml jp mm js mn jw mo ka mp ke mh mi mj mk dt translated">尽管您授予了对该应用程序的访问权限，但您会注意到它仍然没有出现在门户的Integrations选项卡中，而它应该出现在该选项卡中。要激活它，您需要让您的“应用程序”通过在访问令牌Hubspot API上调用这个请求来生成一个访问令牌(我们不需要它)。要通过您的浏览器完成此操作，请使用<a class="ae kf" href="https://www.hurl.it" rel="noopener ugc nofollow" target="_blank"> https://www.hurl.it </a>生成此请求:<br/>目的地:<em class="lb"><br/>POST</em><a class="ae kf" href="https://api.hubapi.com/oauth/v1/token" rel="noopener ugc nofollow" target="_blank"><em class="lb">https://api.hubapi.com/oauth/v1/token</em></a><em class="lb"><br/></em>参数:<em class="lb"><br/>CLIENT _ ID = YOUR _ CLIENT _ ID<br/>CODE = THE _ CODE _ FROM _ STEP _ 3<br/>redirect _ uri =</em><a class="ae kf" href="https://www.hubspot.com" rel="noopener ugc nofollow" target="_blank"><em class="lb">https://www.hubspot.com</em></a><em class="lb"/></li></ol><p id="9613" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">不要担心保存查询响应，查询本身应该足以在Hubspot门户的Integrations选项卡中激活您的应用程序。</p><h1 id="967d" class="kg kh hu bd ki kj kk kl km kn ko kp kq ja kr jb ks jd kt je ku jg kv jh kw kx dt translated">4.测试您的webhook</h1><p id="e544" class="pw-post-body-paragraph jj jk hu jl b jm lf iv jo jp lg iy jr js lh ju jv jw li jy jz ka lj kc kd ke hn dt translated">在Hubspot门户上激活应用程序(及其webhook)后，继续创建/删除一个联系人，以查看它是否出现在Request.bin中。</p><figure class="ll lm ln lo fq lp fe ff paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="fe ff mq"><img src="../Images/ce5b8fdbe1d52fd9f6634fd924149b01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c6B_bf23acfIyNrCr4NJFA.jpeg"/></div></div><figcaption class="lw lx fg fe ff ly lz bd b be z ek">A Hubspot webhook captured in Requestb.in for debugging: the “join_date” property for the contact #123 has just been updated into Hubspot portal</figcaption></figure><p id="1f97" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果你对一切都满意，现在你可以用一个Zapier触发器URL或者一个到你的另一个定制应用程序的链接来替换webhook URL。</p><h1 id="43ec" class="kg kh hu bd ki kj kk kl km kn ko kp kq ja kr jb ks jd kt je ku jg kv jh kw kx dt translated">限制</h1><p id="b6ce" class="pw-post-body-paragraph jj jk hu jl b jm lf iv jo jp lg iy jr js lh ju jv jw li jy jz ka lj kc kd ke hn dt translated">需要记住的一点是，目的URL是在应用程序级别配置的，而不是在webhook级别。因此，一个应用程序的所有webhooks将只能向一个目标URL报告。例如，如果你需要在Zapier中触发不同的Zap，每个Zap使用一个触发URL，你将不得不在Hubspot门户中创建和安装尽可能多的应用程序，这会变得有点混乱。</p></div><div class="ab cl mr ms hc mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="hn ho hp hq hr"><figure class="ll lm ln lo fq lp"><div class="bz el l di"><div class="my mz l"/></div></figure><p id="287b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我希望这篇文章是有用的。</p><p id="40bf" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果你正在考虑将你的软件与Hubspot整合，我鼓励你看看我的另一篇文章或者甚至<a class="ae kf" href="mailto:hi@getlionel.com" rel="noopener ugc nofollow" target="_blank">来联系</a>。在<a class="ae kf" href="https://linkedin.com/in/martinlionel" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上给我发消息！</p></div><div class="ab cl mr ms hc mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="hn ho hp hq hr"><p id="0afd" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">莱昂内尔是总部位于伦敦的初创公司Wi5的首席技术官，也是面向未来的工程文化课程<a class="ae kf" href="https://hackernoon.com/why-the-platform-model-is-broken-a51478b1b4ee" rel="noopener ugc nofollow" target="_blank"><em class="lb"/></a><em class="lb">的作者。你可以在</em><a class="ae kf" href="https://getlionel.com" rel="noopener ugc nofollow" target="_blank"><em class="lb"/></a>上联系他</p><figure class="ll lm ln lo fq lp"><div class="bz el l di"><div class="my mz l"/></div></figure></div></div>    
</body>
</html>