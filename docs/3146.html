<html>
<head>
<title>Handling time intervals in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JavaScript中处理时间间隔</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/handling-time-intervals-in-javascript-83dc70cbfe05?source=collection_archive---------18-----------------------#2017-03-15">https://medium.com/hackernoon/handling-time-intervals-in-javascript-83dc70cbfe05?source=collection_archive---------18-----------------------#2017-03-15</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><h1 id="46a8" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">问题</h1><p id="e289" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">在开发<a class="ae kn" href="https://www.amitmerchant.com/Handling-Time-Intervals-In-Javascript/electron.atom.io" rel="noopener ugc nofollow" target="_blank">电子</a>应用<a class="ae kn" href="https://github.com/amitmerchant1990/pomolectron" rel="noopener ugc nofollow" target="_blank">pomolecon</a>的时候，我需要通过<a class="ae kn" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>的<a class="ae kn" href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval" rel="noopener ugc nofollow" target="_blank"> setInterval() </a>功能来处理不同的时间间隔。我基本上需要在我的应用程序中实现三个定时器:</p><ul class=""><li id="c526" class="ko kp hu jr b js kq jw kr ka ks ke kt ki ku km kv kw kx ky dt translated">25分钟的波莫多罗</li><li id="7711" class="ko kp hu jr b js kz jw la ka lb ke lc ki ld km kv kw kx ky dt translated">5分钟的短暂休息</li><li id="fef5" class="ko kp hu jr b js kz jw la ka lb ke lc ki ld km kv kw kx ky dt translated">10分钟的长时间休息</li></ul><p id="0208" class="pw-post-body-paragraph jp jq hu jr b js kq ju jv jw kr jy jz ka le kc kd ke lf kg kh ki lg kk kl km hn dt translated">我可以想出两种方法来实现所有三种情况下的倒计时。第一，使用三种不同的<code class="eh lh li lj lk b">setInterval()</code>实现不同的定时器。第二，找到另一种方式对所有三个定时器使用相同的<code class="eh lh li lj lk b">setInterval()</code>。</p><h1 id="d11e" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">解决办法</h1><p id="62fe" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">所以，我尝试了第二种方法。我可以对所有三个计时器使用相同的<code class="eh lh li lj lk b">setInterval()</code>方法，将它分配给一个变量，如下所示..</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="e0b7" class="lt is hu lk b fv lu lv l lw lx">var pomodoroIntervalId;</span><span id="d212" class="lt is hu lk b fv ly lv l lw lx">function startTimer(duration, display) {<br/>  timer = duration;<br/>  pomodoroIntervalId = setInterval(function(){<br/>    if (--timer &lt; 0) {<br/>        timer = duration;<br/>    }<br/>    <br/>    minutes = parseInt(timer/60, 10);<br/>    seconds = parseInt(timer%60, 10);</span><span id="fac2" class="lt is hu lk b fv ly lv l lw lx">    minutes = minutes &lt; 10 ? '0'+minutes : minutes;<br/>    seconds = seconds &lt; 10 ? '0'+seconds : seconds;</span><span id="fffd" class="lt is hu lk b fv ly lv l lw lx">    display.textContent = minutes+ ":" + seconds;</span><span id="f8f9" class="lt is hu lk b fv ly lv l lw lx">    if(minutes == 0 &amp;&amp; seconds == 0){<br/>      notifyUser();<br/>    }<br/>  }, 1000);<br/>}</span></pre><p id="83ff" class="pw-post-body-paragraph jp jq hu jr b js kq ju jv jw kr jy jz ka le kc kd ke lf kg kh ki lg kk kl km hn dt translated">然后通过传递间隔ID的<a class="ae kn" href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval" rel="noopener ugc nofollow" target="_blank"> clearInterval() </a>方法首先清除当前时间间隔，从而在其他定时器之间使用相同的<code class="eh lh li lj lk b">startTimer()</code>。在我们的例子中，我把它分配给了一个全局变量<code class="eh lh li lj lk b">pomodoroIntervalId</code>。这基本上清除了当前运行的<a class="ae kn" href="https://hackernoon.com/tagged/time-interval" rel="noopener ugc nofollow" target="_blank">时间间隔</a>，以便下次设置另一个定时器时使用。代码如下所示..</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="d689" class="lt is hu lk b fv lu lv l lw lx">function resetTimer() {<br/>  clearInterval(pomodoroIntervalId);<br/>}</span></pre><p id="be54" class="pw-post-body-paragraph jp jq hu jr b js kq ju jv jw kr jy jz ka le kc kd ke lf kg kh ki lg kk kl km hn dt translated">这给了我们在不同的用例中使用相同的<code class="eh lh li lj lk b">setInterval()</code>函数的好处，这使得代码干净利落。我认为这是JavasScript的一个非常方便的特性。</p><p id="12d3" class="pw-post-body-paragraph jp jq hu jr b js kq ju jv jw kr jy jz ka le kc kd ke lf kg kh ki lg kk kl km hn dt translated">快乐编码！</p><blockquote class="lz ma mb"><p id="992f" class="jp jq mc jr b js kq ju jv jw kr jy jz md le kc kd me lf kg kh mf lg kk kl km hn dt translated"><a class="ae kn" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客午间</a>是黑客们下午的开始。我们是<a class="ae kn" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kn" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受提交</a>并很高兴<a class="ae kn" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>的机会。</p><p id="dca4" class="jp jq mc jr b js kq ju jv jw kr jy jz md le kc kd me lf kg kh mf lg kk kl km hn dt translated">要了解更多信息，<a class="ae kn" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">请阅读我们的“关于”页面</a> , <a class="ae kn" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">喜欢/在脸书给我们发消息</a>，或者简单地，<a class="ae kn" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank">发推文/DM @HackerNoon。</a></p><p id="708a" class="jp jq mc jr b js kq ju jv jw kr jy jz md le kc kd me lf kg kh mf lg kk kl km hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kn" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kn" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ll lm ln lo fq mg"><div class="bz el l di"><div class="mh mi l"/></div></figure></div></div>    
</body>
</html>