<html>
<head>
<title>Front-end microservices with Web Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有网络组件的前端微服务</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/front-end-microservices-with-web-components-597759313393?source=collection_archive---------1-----------------------#2017-11-19">https://medium.com/hackernoon/front-end-microservices-with-web-components-597759313393?source=collection_archive---------1-----------------------#2017-11-19</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/6503196e5b9970f1e8837d3bad8885ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XD6KbigIKIebl1OS7t4Ujw.png"/></div></div></figure><h1 id="ad71" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">为什么是微服务？</h1><p id="0c9d" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">这可能对你来说是个信号，当你有一个大的企业应用程序时，你可以很容易地用域附件来划分逻辑。如今<a class="ae ky" href="https://hackernoon.com/tagged/google" rel="noopener ugc nofollow" target="_blank">谷歌</a>有很多应用，比如<em class="kz">谷歌驱动</em> e、<em class="kz">谷歌文档</em>、<em class="kz"> Gmail </em>等，很明显<em class="kz">谷歌驱动</em>和<em class="kz">谷歌文档</em>不应该仅仅是一个应用，因为它们都使用<strong class="kc hv">认证</strong>和相同的框架。</p><p id="e631" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lc kn ko kp ld kr ks kt le kv kw kx hn dt translated">您的案例可能没有谷歌的那么明显，但让我来描述一下前端微服务架构的一些<strong class="kc hv">优势</strong>:</p><ul class=""><li id="bd6c" class="lf lg hu kc b kd la kh lb kl lh kp li kt lj kx lk ll lm ln dt translated"><strong class="kc hv">维修性</strong>。您可以很容易地将您的资源划分到不同的团队中，这些团队将增加他们在与应用程序某个部分相关的特定领域中的知识。</li><li id="04ff" class="lf lg hu kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln dt translated"><strong class="kc hv">技术自由</strong>。如果您想尝试<a class="ae ky" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc hv"> VueJS </strong> </a>或另一种新的<a class="ae ky" href="https://hackernoon.com/tagged/technology" rel="noopener ugc nofollow" target="_blank">技术</a>，请便！风险不大，您只需要启动一个微服务，而不是重写所有内容。</li><li id="756f" class="lf lg hu kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln dt translated"><strong class="kc hv">独立部署</strong>。当你可以发布应用程序的小部分时，它给了你很多自由。修复和发布会更顺利。</li></ul><p id="e7cd" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lc kn ko kp ld kr ks kt le kv kw kx hn dt translated">当然，这也伴随着一些<strong class="kc hv">成本</strong>:</p><ul class=""><li id="b7d0" class="lf lg hu kc b kd la kh lb kl lh kp li kt lj kx lk ll lm ln dt translated"><strong class="kc hv">保持一致性。</strong>您需要投入时间让您的应用程序协同工作。<em class="kz">一旦我将应用程序重写为微服务模型，我就会发现</em> <strong class="kc hv"> <em class="kz">更多的错误</em> </strong> <em class="kz">，这些错误在应用程序是一个整体时是不可见的。</em></li><li id="c65b" class="lf lg hu kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln dt translated"><strong class="kc hv">运营复杂性。</strong>所有常规布阵的魔法都必须像咒语一样生效，否则你会得不偿失。</li></ul></div><div class="ab cl lt lu hc lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hn ho hp hq hr"><h1 id="200e" class="jc jd hu bd je jf ma jh ji jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz dt translated">方法</h1><p id="30d1" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">我做了一项研究。甚至要求社区提供任何现有的例子:</p><ul class=""><li id="b36c" class="lf lg hu kc b kd la kh lb kl lh kp li kt lj kx lk ll lm ln dt translated"><a class="ae ky" href="https://stackoverflow.com/questions/39205899/how-to-embed-whole-angularjs-app-into-existing-app-which-is-separately-deployed" rel="noopener ugc nofollow" target="_blank">如何将AngularJS应用嵌入到另一个单独部署的应用中</a>？</li><li id="2b46" class="lf lg hu kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln dt translated"><a class="ae ky" href="https://stackoverflow.com/questions/39227614/is-there-a-way-to-run-angularjs-app-as-polymer-component" rel="noopener ugc nofollow" target="_blank">有没有办法将angularJS应用程序作为聚合物组件运行？</a></li></ul><p id="dba8" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lc kn ko kp ld kr ks kt le kv kw kx hn dt translated"><em class="kz"> P.S .我在寻找iFrame以外的解决方案。</em></p><p id="4cc3" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lc kn ko kp ld kr ks kt le kv kw kx hn dt translated">我已经用<strong class="kc hv"> AngularJS </strong>作为嵌套组件成功构建了<a class="ae ky" href="https://www.polymer-project.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc hv">聚合物</strong> </a> <strong class="kc hv"> </strong>。<strong class="kc hv">但是，</strong>在论坛的某个地方，这样做是有限制的。所以我决定去更低的层次，在<strong class="kc hv"> Web组件的层次上构建同样的方法。</strong></p><h1 id="aa6a" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated"><a class="ae ky" href="https://github.com/webcomponents/webcomponentsjs/" rel="noopener ugc nofollow" target="_blank"> Web组件</a>解决方案</h1><p id="d9c5" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">解决方案非常依赖于Web组件标准的单一特性。<strong class="kc hv"> HTML导入</strong>:一种通过其他HTML文档包含和重用HTML文档的方式(<a class="ae ky" href="https://w3c.github.io/webcomponents/spec/imports/" rel="noopener ugc nofollow" target="_blank">规范</a>、<a class="ae ky" href="https://www.html5rocks.com/en/tutorials/webcomponents/imports/" rel="noopener ugc nofollow" target="_blank">教程</a>)。</p><blockquote class="mf mg mh"><p id="fa0e" class="ka kb kz kc b kd la kf kg kh lb kj kk mi lc kn ko mj ld kr ks mk le kv kw kx hn dt translated">想法是将组件预定义为HTML导入，而每个组件都可以包含自己的脚本和样式。因此，我们可以在顶层<strong class="kc hv">决定当前哪个HTML导入应该在DOM中呈现，其余的事情应该由导入的文档本身来处理。</strong></p></blockquote><figure class="mm mn mo mp fq iv fe ff paragraph-image"><div class="fe ff ml"><img src="../Images/8126e8f26841a72ed8c69704bd814c24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*1TpFQz7XEm7KpkbMd2K3xg.png"/></div><figcaption class="mq mr fg fe ff ms mt bd b be z ek">HTML imports driven microservices</figcaption></figure><p id="2cd7" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lc kn ko kp ld kr ks kt le kv kw kx hn dt translated"><strong class="kc hv"> Shell — </strong>是一个顶层包装器，由组件选择器和组件容器组成。还应该包括允许用户操作组件的视图或控制器。</p><p id="8acb" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lc kn ko kp ld kr ks kt le kv kw kx hn dt translated"><strong class="kc hv">容器</strong> —嵌套应用程序的HTML应该注入的实际根位置。(对于所有嵌套的应用程序，它应该有一个<strong class="kc hv">单一的</strong>入口点)。</p><p id="d130" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lc kn ko kp ld kr ks kt le kv kw kx hn dt translated"><strong class="kc hv">组件选择器</strong>—允许管理当前活动的嵌套应用程序的服务。</p><p id="e669" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lc kn ko kp ld kr ks kt le kv kw kx hn dt translated"><strong class="kc hv"> HTML导入</strong> —我们的抽象微服务。可能是用不同框架编写的整个应用程序。</p></div><div class="ab cl lt lu hc lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hn ho hp hq hr"><h1 id="bb87" class="jc jd hu bd je jf ma jh ji jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz dt translated">实施的基本示例</h1><p id="547f" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">这里是一个<a class="ae ky" href="https://github.com/andrewdacenko/web-components-angular-react" rel="noopener ugc nofollow" target="_blank"><strong class="kc hv">Web组件驱动的微服务</strong> </a>的完整报告，带有嵌套的AngularJS和React应用。<strong class="kc hv">非常感谢</strong>安德鲁·达琴科在早期的支持！</p><figure class="mm mn mo mp fq iv"><div class="bz el l di"><div class="mw mx l"/></div><figcaption class="mq mr fg fe ff ms mt bd b be z ek">index.html</figcaption></figure><p id="59b0" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lc kn ko kp ld kr ks kt le kv kw kx hn dt translated">16 LOC: <strong class="kc hv">容器</strong>用于嵌套应用程序。</p><p id="b7a7" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lc kn ko kp ld kr ks kt le kv kw kx hn dt translated">两个嵌套的应用程序— <code class="eh my mz na nb b">angular-app.html</code>和<code class="eh my mz na nb b">react-app.html</code>。通过点击两个按钮中的一个，我们在<code class="eh my mz na nb b">loader.js</code>的帮助下加载相应的应用程序。</p><figure class="mm mn mo mp fq iv"><div class="bz el l di"><div class="mw mx l"/></div><figcaption class="mq mr fg fe ff ms mt bd b be z ek">loader.js</figcaption></figure><p id="8f8e" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lc kn ko kp ld kr ks kt le kv kw kx hn dt translated"><code class="eh my mz na nb b">loader.js</code>是一种<strong class="kc hv">组件拾取器</strong>，我在上一段已经描述过了。</p><h1 id="6b08" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated"><strong class="ak">结论</strong></h1><p id="f11f" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">这种方法是为生产应用程序实现的。成千上万的用户证明了这一点。</p><p id="be09" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lc kn ko kp ld kr ks kt le kv kw kx hn dt translated">我建议在开始将应用划分为前端微服务之前，先回答自己几个问题:</p><ul class=""><li id="e5d5" class="lf lg hu kc b kd la kh lb kl lh kp li kt lj kx lk ll lm ln dt translated">就<strong class="kc hv">团队</strong>和代码而言，你的应用有多大？</li><li id="1961" class="lf lg hu kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln dt translated">可以用<strong class="kc hv">域附件</strong>把你的app分成小块吗？</li><li id="ac88" class="lf lg hu kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln dt translated">你能多容易地为你的应用程序发布小特性？</li></ul><blockquote class="mf mg mh"><p id="4f95" class="ka kb kz kc b kd la kf kg kh lb kj kk mi lc kn ko mj ld kr ks mk le kv kw kx hn dt translated">如果你想直接从马嘴那里得到信息，请关注我的<a class="ae ky" href="https://twitter.com/Kobvel" rel="noopener ugc nofollow" target="_blank"> <strong class="kc hv"> Twitter </strong> </a>和<a class="ae ky" rel="noopener" href="/@kobvel"> <strong class="kc hv"> Medium </strong> </a>账号。</p></blockquote><figure class="mm mn mo mp fq iv"><div class="bz el l di"><div class="nc mx l"/></div></figure></div></div>    
</body>
</html>