<html>
<head>
<title>What Color Is The Internet?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">互联网是什么颜色？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/what-color-is-the-internet-just-the-most-viewed-portions-ccd33d1f878f?source=collection_archive---------12-----------------------#2017-05-31">https://medium.com/hackernoon/what-color-is-the-internet-just-the-most-viewed-portions-ccd33d1f878f?source=collection_archive---------12-----------------------#2017-05-31</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="832e" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">(仅查看最多的部分)</h2></div><p id="66b6" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我不确定我是怎么想出这个主意的，但是前段时间，我想刮一堆网站，看看最流行的颜色和颜色主题是什么。在这篇技术文章中，我生成了400个访问量最大的网站的截图，并分析了它们最常用的颜色。这是一个有趣的数据收集项目，我利用这个机会学习多线程、色彩理论和matplotlib。我将与你们分享我学到的一切，以及我写的代码，所以如果你愿意，你可以自己尝试一下。</p></div><div class="ab cl kf kg hc kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hn ho hp hq hr"><p id="d392" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我从<a class="ae km" href="https://moz.com/top500" rel="noopener ugc nofollow" target="_blank"> moz.com的500强名单</a>下载了一份500强域名名单。我必须解决的第一件事是如何以编程方式为每个URL捕获网页截图。我的第一个想法是使用<a class="ae km" href="https://pyautogui.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> pyautogui </a>来自动化截屏和保存网站的过程，但是这看起来很不自然，而且耗时太长。</p><p id="3bbc" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">经过一些研究，我发现了一个非常酷的库，叫做<a class="ae km" href="https://github.com/adamn/python-webkit2png" rel="noopener ugc nofollow" target="_blank"> python-webkit2png </a>，它可以让我用webkit截屏一个网页。安装后，可以从命令行获得webkit2png脚本。除了有很好的文档记录之外，这个库非常棒，甚至还有一个很酷的跳舞蝙蝠侠GIF。</p><figure class="ko kp kq kr fq ks fe ff paragraph-image"><div class="fe ff kn"><img src="../Images/a15f5a567fce9038f6234d31fdf3fe9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*DSFhU3WOc7dGwMY86CW4aA.gif"/></div><figcaption class="kv kw fg fe ff kx ky bd b be z ek">Awesomeness. <a class="ae km" href="https://github.com/adamn/python-webkit2png" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><p id="e0fd" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">不幸的是，由于webkit2png是为Python 2.x编写的，我不得不稍微修改一下以使它能与Python 3一起工作。(是的，我知道，我可以使用Python 2.x)。</p><p id="8a9e" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">命令行工具将截图PNG的原始数据传递给stdout，所以我使用了<a class="ae km" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" rel="noopener ugc nofollow" target="_blank">子流程。从我的Python脚本中调用它。这样做的好处是，我不必将数据存储在临时PNG文件中，因为我可以将PNG数据直接从stdout传递给一个</a><a class="ae km" href="http://effbot.org/imagingbook/pil-index.htm" rel="noopener ugc nofollow" target="_blank"> Python PIL </a>图像对象。</p><figure class="ko kp kq kr fq ks"><div class="bz el l di"><div class="kz la l"/></div><figcaption class="kv kw fg fe ff kx ky bd b be z ek">A snippet of the script I used to aggregate screenshots</figcaption></figure><p id="3154" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">以上是我刚刚描述的代码片段。函数的作用是:返回一个PIL图片对象，包括给定url的截图。您会注意到该函数有一个额外的<em class="lb">日志文件</em>参数。由于webkit2png脚本将错误写入日志文件，所以我在尝试截图之前删除了日志文件，并在之后检查它以查看截图是否被成功捕获。</p></div><div class="ab cl kf kg hc kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hn ho hp hq hr"><p id="dad9" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">太棒了，现在我有了获取网页截图的方法，我将在顶级网站的csv上运行它。5分钟后，很明显脚本将永远无法运行。我刚刚再次温习了多线程，所以用它来加速这个过程有点酷。</p><figure class="ko kp kq kr fq ks"><div class="bz el l di"><div class="kz la l"/></div></figure><p id="f445" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我将URL列表分成块，并将每个块传递给一个线程。为了简洁起见，没有包含chunk()函数(它所做的只是将一个列表分成n个大小相等的块)。这个代码片段有一个write_image_data()函数，它使用前面的get_image()函数将获取的图像数据追加到一个文件中。现在我们只需要<a class="ae km" href="https://github.com/omgimanerd/internet-colors/blob/master/aggregate.py" rel="noopener ugc nofollow" target="_blank">结合两部分</a>并在每个URL上运行它。</p></div><div class="ab cl kf kg hc kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hn ho hp hq hr"><p id="9d63" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">好了，接下来是更有趣的事情。看代码很有趣也很好，但更有趣的是看这些数据会产生什么。我写了一个<a class="ae km" href="https://github.com/omgimanerd/internet-colors/blob/master/frequencies.py" rel="noopener ugc nofollow" target="_blank">快速脚本</a>来统计每种颜色出现的频率，对数据进行排序，并将其转储到另一个数据文件中。</p><figure class="ko kp kq kr fq ks fe ff paragraph-image"><div class="fe ff lc"><img src="../Images/ebd04f079bbd75b2f60a57b9bfdb79fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*Jd1nAbglZ7a4mlbHoHEKvw.png"/></div><figcaption class="kv kw fg fe ff kx ky bd b be z ek">Outputting the first and last few lines of the sorted color frequencies</figcaption></figure><p id="57ce" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">很明显，纯白色(255，255，255)是所有被抓取的网页中出现频率最高的颜色。不过，这种查看数据的格式不是很直观。我将数据传递给一个<a class="ae km" href="http://jinja.pocoo.org/" rel="noopener ugc nofollow" target="_blank"> Jinja模板</a>和<a class="ae km" href="https://github.com/omgimanerd/internet-colors/blob/master/render_frequencies.py" rel="noopener ugc nofollow" target="_blank">渲染成一个HTML文件</a>。</p><figure class="ko kp kq kr fq ks fe ff paragraph-image"><div class="fe ff ld"><img src="../Images/643bc861dcd128d5edaf973b76d3fe5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:424/format:webp/1*735lm08pKD1xaMb0GqHc3g.png"/></div><figcaption class="kv kw fg fe ff kx ky bd b be z ek">The most frequently occurring colors (unfiltered)</figcaption></figure><p id="34c1" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">上面显示的是从上到下最常出现的颜色的一小部分。这也不是很有意义，因为有很多高频率的相似颜色。我计算了两种颜色之间的平方欧几里德距离，以确定它们有多相似，并去掉了与相似颜色相邻的颜色。</p><figure class="ko kp kq kr fq ks fe ff paragraph-image"><div class="fe ff le"><img src="../Images/1157a9e499a43292b5bf4c8a533e3b1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:416/format:webp/1*hSBfkNANJtbjxdIr-PBXWw.png"/></div><figcaption class="kv kw fg fe ff kx ky bd b be z ek">The most frequently occurring colors (filtered)</figcaption></figure><p id="23f8" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这张最常出现的颜色图提供了更多的信息。</p><p id="0dca" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">请注意，移除相似的颜色并不是一个很好的方法，因为它完全忽略了频率计数中的那些颜色。把它们组合在一起，作为一种颜色来计数，以便准确地对它们进行排序，这样会好得多。</strong></p><p id="8077" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">有哪些网站用这些颜色？让我们检查一下。我写了一个<a class="ae km" href="https://github.com/omgimanerd/internet-colors/blob/master/search_color.py" rel="noopener ugc nofollow" target="_blank">小模块，通过颜色</a>查找URL。</p><figure class="ko kp kq kr fq ks fe ff paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="fe ff lf"><img src="../Images/e11681cad8fc00fcc1f63941b6684016.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JLfhyT0gkqeZEeVbRyezBQ.png"/></div></div><figcaption class="kv kw fg fe ff kx ky bd b be z ek">Websites that use the most frequently occurring colors</figcaption></figure><p id="e669" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">请注意，这种视觉效果仍然具有误导性。这显示了最频繁出现的颜色，<strong class="jl hv">以及使用该颜色最多的网站，</strong>，并且不考虑网站流量或任何其他因素。这些图像只显示了整个画面的一部分。</p><p id="fb25" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我们用3D绘制颜色，以得出一些更具体的结论。</p><figure class="ko kp kq kr fq ks fe ff paragraph-image"><div class="fe ff lk"><img src="../Images/9cabc7863a4854596e3a489825a343d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*nYFGNicMWgTKfGefqK1BaQ.gif"/></div><figcaption class="kv kw fg fe ff kx ky bd b be z ek">3D visualization of website color frequencies</figcaption></figure><p id="051b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">上面是使用x、y和z轴分别作为红色、绿色和蓝色的前10%最常出现的颜色的GIF。这些点被相应地着色，它们的大小代表它们的相对频率。唯一没有按比例调整大小的点是那些接近白色的点，因为这些颜色出现得如此频繁，如果按比例调整，它们将占据可视化的八分之一以上。</p><p id="af9f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这是有意义的，因为白色和浅灰色经常用于网站的大背景。请注意(0，0，0)和(255，255，255)之间对角线上的粗线。这些颜色是浅灰色和深灰色，是非常常用的文本颜色和次要内容颜色。</p><p id="40e2" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在极端的边缘和角落附近有很少的颜色，更常见的是看到更柔和的红色和蓝色，因为这些往往是非常受欢迎的网站颜色主题。</p></div><div class="ab cl kf kg hc kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hn ho hp hq hr"><p id="cfe9" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">另一种我们可以将颜色频率可视化的方法是将相似的颜色聚集在一起。k-means聚类算法是一种简单的机器学习算法，它允许我们将相似的颜色分组到质心周围的聚类中。</p><p id="dc4d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">k-means聚类算法的工作原理是选择k个质心并移动它们，直到它们到达一个点簇中的最佳“中心”位置。关于该算法的更详细的解释，<a class="ae km" href="https://en.wikipedia.org/wiki/K-means_clustering" rel="noopener ugc nofollow" target="_blank">参见本页</a>。出于学习的目的，我首先用纯Python实现了一个加权k-means算法，然后用NumPy库重写了它以提高速度。我将在这篇文章中省略算法的代码，但是<a class="ae km" href="https://gist.github.com/omgimanerd/ff0b9a8dd225f2d2e94aa4be76bc91d9" rel="noopener ugc nofollow" target="_blank">你可以在这里</a>查看。</p><figure class="ko kp kq kr fq ks fe ff paragraph-image"><div class="fe ff ll"><img src="../Images/cc63e221fb544697b6f210cb20a62395.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/1*eu1v8Gff_TlonkQSBzQxGQ.gif"/></div><figcaption class="kv kw fg fe ff kx ky bd b be z ek">3D visualization of clustered website colors.</figcaption></figure><p id="65c9" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在上面的可视化中，我使用k-means聚类算法来确定8个质心和聚类，使用颜色并根据它们的频率对它们进行加权。每个聚类的质心由每个聚类中最大的点表示。每个聚类根据质心的颜色进行着色。这种可视化是一种很好的颜色分布测量方法，它向我们展示了什么颜色最容易出现。</p></div><div class="ab cl kf kg hc kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hn ho hp hq hr"><p id="bf5a" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">那么互联网是什么颜色呢？大部分是黑色、白色和灰色。</p><p id="eedd" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我不完全确定这个项目进行到哪里，但是我学到了很多关于多处理和NumPy的知识。将来我可能会再次访问这些数据，看看我还能从中推断出什么。如果你想自己修改代码，<a class="ae km" href="http://github.com/omgimanerd/internet-colors" rel="noopener ugc nofollow" target="_blank">这里有一个库</a>的链接。感谢阅读！</p><p id="36da" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在推特上关注我:<a class="ae km" href="http://twitter.com/omgimanerd" rel="noopener ugc nofollow" target="_blank"> @omgimanerd </a></p><div class="ko kp kq kr fq ab cb"><figure class="lm ks ln lo lp lq lr paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="lm ks ln lo lp lq lr paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="lm ks ln lo lp lq lr paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="ls lt lu"><p id="f922" class="jj jk lb jl b jm jn iv jo jp jq iy jr lv jt ju jv lw jx jy jz lx kb kc kd ke hn dt translated"><a class="ae km" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae km" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae km" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae km" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jj jk lb jl b jm jn iv jo jp jq iy jr lv jt ju jv lw jx jy jz lx kb kc kd ke hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae km" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae km" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ko kp kq kr fq ks fe ff paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="fe ff ly"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>