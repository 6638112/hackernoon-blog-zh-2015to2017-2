<html>
<head>
<title>Simplifying Docker management with Exoframe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Exoframe简化Docker管理</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/simplifying-docker-management-with-exoframe-9275e92c7406?source=collection_archive---------5-----------------------#2016-09-08">https://medium.com/hackernoon/simplifying-docker-management-with-exoframe-9275e92c7406?source=collection_archive---------5-----------------------#2016-09-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="3caf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Docker是一个<a class="ae jp" href="https://medium.freecodecamp.com/a-beginner-friendly-introduction-to-containers-vms-and-docker-79a9e3e119b#.111rlevmh" rel="noopener ugc nofollow" target="_blank">惊人的</a>工具。它可以帮你<a class="ae jp" rel="noopener" href="/@RemindEng/introducing-empire-a-self-hosted-paas-built-on-docker-amazon-ecs-7f8beb7f6ae4">设置自托管PaaS </a>、<a class="ae jp" rel="noopener" href="/@andrewmclagan/you-thought-laravel-homestead-was-easy-say-hello-to-docker-2c0639a0501#.z53ssycbo">扩展事物</a>、做<a class="ae jp" rel="noopener" href="/@Malinskiy/android-ci-with-docker-a2f522086640"> Android CI </a>甚至<a class="ae jp" rel="noopener" href="/google-cloud/developing-for-arduino-with-docker-and-johnny-five-on-osx-cc6813ae6e9d#.k6xwqu87h">开发物联网</a>。<br/>但是即使Docker是一个很棒的工具，它也有自己的问题。</p><p id="e098" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先——没那么好用。主要是因为在几乎每一步中你都可以使用很多不同的标志。即使在过去几年里每天都使用它，我仍然必须打开手册来记住如何正确地转发端口或如何设置资源限制。</p><p id="668a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后是设置身份验证、访问控制以及图像和运行容器的所有权的挑战。现在你可以使用Docker插件来设置授权，但是这并不简单。它也没有给你一个定义所有权的方法。当然，您可以使用标签或安全选项来设置用户。但是你必须手动操作。</p><p id="dd00" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你知道如何使用Docker。<br/>在<a class="ae jp" href="http://aksw.org/" rel="noopener ugc nofollow" target="_blank">我们的研究小组</a>中，我们最近决定将我们所有的演示和服务迁移到Docker。事实证明，教人们Docker是什么以及如何正确使用它是相当困难的。更难的是让每个人都设置正确的标签和安全选项，以确保管理员知道，例如，谁对引起麻烦的容器负责。</p><p id="7304" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，我着手创建一种更好、更简单的Docker工作方式。</p><p id="4c42" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">更新:</strong> <a class="ae jp" href="https://hackernoon.com/introducing-exoframe-beta-self-hosted-alternative-to-now-sh-80643f96b84b" rel="noopener ugc nofollow" target="_blank"> Exoframe beta出了</a>！更简单、更快速、更小巧，一如既往地人性化。</p><h1 id="d6e3" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">认识exo frame——码头集装箱的动力装甲</h1><p id="52f1" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">Exoframe背后的想法非常简单——帮助用户以简单直观的方式用尽可能少的配置解决上述问题。算是吧，给你一种方法，把它当作动力装甲来移动那些沉重的码头集装箱。</p><p id="6f9c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Exoframe由两部分组成:<a class="ae jp" href="https://github.com/exoframejs/exoframe-server" rel="noopener ugc nofollow" target="_blank"> Exoframe服务器</a>和<a class="ae jp" href="https://github.com/exoframejs/exoframe" rel="noopener ugc nofollow" target="_blank"> Exoframe CLI </a>。</p><p id="01ac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Exoframe server安装在您要用于部署的远程服务器上的Docker旁边。它本质上是作为<a class="ae jp" href="https://docs.docker.com/engine/reference/api/docker_remote_api/" rel="noopener ugc nofollow" target="_blank"> Docker remote API </a>的智能代理，具有认证、访问控制和所有权特性。</p><p id="79a1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Exoframe CLI安装在您的本地机器上，用于所有常见的Docker任务，如使用Exoframe服务器API构建和部署映像。</p><h2 id="f5d4" class="kt jr hu bd js ku kv kw jw kx ky kz ka jc la lb ke jg lc ld ki jk le lf km lg dt translated">外部框架服务器设置</h2><p id="6a2e" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">首先，你需要设置Exoframe服务器。<br/>因为您的服务器应该已经运行了docker，所以很容易做到:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="7196" class="kt jr hu lm b fv lq lr l ls lt">docker run -d \<br/>  -p 3000:3000 \<br/>  -v /var/run/docker.sock:/var/run/docker.sock:ro \<br/>  -v /path/to/exoframe-folder:/root/.exoframe \<br/>  exoframe/server</span></pre><p id="eb42" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这将启动一个外部框架服务器，将端口3000转发到您的主机，并初始化默认的外部框架服务器配置。<br/>确保导航到<em class="lu"> /path/to/exoframe-folder </em>并调整<em class="lu"> server.config.yml </em>中的用户名和密码，因为默认的admin:admin对并不完全安全::<br/>您还可以配置其他服务器验证插件(例如LDAP或您的其他公司用户数据库)，这些插件可用于替代基于配置的用户列表。</p><p id="0d8c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">完成了。服务器可以工作了！</p><h2 id="8c10" class="kt jr hu bd js ku kv kw jw kx ky kz ka jc la lb ke jg lc ld ki jk le lf km lg dt translated">Exoframe CLI设置</h2><p id="35cc" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">接下来，您需要在本地机器上设置Exoframe CLI。<br/>由于Exoframe是使用Node.js编写的，所以您需要安装Node.js (v6或更高版本)<a class="ae jp" href="https://nodejs.org/en/download/package-manager/" rel="noopener ugc nofollow" target="_blank"/>。一旦有了它，只需执行npm install命令来获得Exoframe CLI:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="cf63" class="kt jr hu lm b fv lq lr l ls lt">npm install exoframe -g</span></pre><p id="25d4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">安装完成后，您可以使用以下命令指定您的服务器端点:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="bff4" class="kt jr hu lm b fv lq lr l ls lt">exoframe endpoint <a class="ae jp" href="http://you.server.url" rel="noopener ugc nofollow" target="_blank">http://your.server.url</a>:3000</span></pre><p id="9737" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后执行“<em class="lu"> exoframe登录</em>”在服务器上进行身份验证，您就可以开始了！</p><h2 id="1829" class="kt jr hu bd js ku kv kw jw kx ky kz ka jc la lb ke jg lc ld ki jk le lf km lg dt translated">构建和部署一个示例项目</h2><p id="4dcf" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">现在让我们看看它的实际效果！<br/>我们将创建、构建和部署一个简单的静态HTML项目。<br/>您可以在asciinema上的一个简单截屏中找到以下解释的所有步骤:</p><div class="lv lw fm fo lx ly"><a href="https://asciinema.org/a/85154" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab ej"><div class="ma ab mb cl cj mc"><h2 class="bd hv fv z el md eo ep me er et ht dt translated">Exoframe简短演示</h2><div class="mf l"><h3 class="bd b fv z el md eo ep me er et ek translated">用于部署Node.js项目的Exoframe.js命令行界面的简短演示。Exoframe打算做所有繁重的…</h3></div><div class="mg l"><p class="bd b gc z el md eo ep me er et ek translated">asciinema.org</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm mn ly"/></div></div></a></div><p id="6495" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先，创建一个新文件夹，并添加一个新的index.html文件，该文件包含一些内容，例如:</p><figure class="lh li lj lk fq mo"><div class="bz el l di"><div class="mp mq l"/></div></figure><p id="1146" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后，执行"<em class="lu"> exoframe build </em>"并为你的图像选择一个名字(或者保持默认的名字):</p><figure class="lh li lj lk fq mo fe ff paragraph-image"><div class="fe ff mr"><img src="../Images/0475d62a3fb423fb45b34422dda4391a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*0lxGo4QJifRi_WUqW0NQOw.png"/></div><figcaption class="mt mu fg fe ff mv mw bd b be z ek">Exoframe build command output</figcaption></figure><p id="12b6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此时，Exoframe将自动检测项目类型，并为其选择一个合适的docker文件。由于我们只有一个<em class="lu">index.html</em>文件，Exoframe认为它可能适合基本的Nginx图像。<br/>这个检测是使用模板引擎完成的。模板是简单的Node.js包，它提供了一组方法来检测项目是否适合它们，忽略文件，添加特定类型的标签，并在需要时要求用户进行额外的输入。模板的输出是一个完整的Dockerfile文件，用于构建项目。<br/>你可以在GitHub 上找到这个<a class="ae jp" href="https://github.com/exoframejs/exoframe-template-nginx" rel="noopener ugc nofollow" target="_blank">案例中使用的Nginx模板的例子。</a></p><p id="fc33" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">构建完成后，您可以使用"<em class="lu"> exoframe list </em>"命令获得您拥有的映像和服务的列表:</p><figure class="lh li lj lk fq mo fe ff paragraph-image"><div class="fe ff mx"><img src="../Images/8078b46146b818e583cd05d2cca1c676.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*2HGJLiC4Kxv8aH_MEKC_cQ.png"/></div><figcaption class="mt mu fg fe ff mv mw bd b be z ek">Exoframe list command output</figcaption></figure><p id="e75d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，您已经构建了一个新的映像，让我们来部署它。<br/>只需执行“<em class="lu"> exoframe deploy </em>”，您将获得可部署的映像列表，无需记住所有映像名称:</p><figure class="lh li lj lk fq mo fe ff paragraph-image"><div class="fe ff my"><img src="../Images/1170a1cd82ec0c003ff208c95554b517.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*DDVJuwQdruQ3LhpAH_VSqQ.png"/></div><figcaption class="mt mu fg fe ff mv mw bd b be z ek">Exoframe deploy images selection</figcaption></figure><p id="d500" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦您选择了您想要部署的映像，Exoframe将询问您在部署期间到底想要做什么—您想要转发端口、指定重启策略等吗？</p><figure class="lh li lj lk fq mo fe ff paragraph-image"><div class="fe ff mz"><img src="../Images/1c022a3f2a537d308e02413ecf8812c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*BBAlekQsnsBTGZUYRefGzA.png"/></div><figcaption class="mt mu fg fe ff mv mw bd b be z ek">Exoframe deploy feature selection</figcaption></figure><p id="a1d8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这种情况下，我们只想转发端口，所以这就是上面截图中选择的内容。点击enter后，Exoframe将为您提供额外的输入，引导您完成所有选定的操作，例如，端口输入如下所示:</p><figure class="lh li lj lk fq mo fe ff paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="fe ff na"><img src="../Images/b09d2f119fb26764399a1d5a59d0e81d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*I97GWrvETepBygbpA3GW7w.png"/></div></div><figcaption class="mt mu fg fe ff mv mw bd b be z ek">Exoframe deploy port mapping example</figcaption></figure><p id="0e90" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">注意，Exoframe向您内联显示了端口映射应该是什么样子，以及哪个端口在容器内部和主机上。如您所见，它还允许您映射多个端口。</p><p id="8117" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">按enter键后，您将看到一条消息，说明映像已成功部署。现在，您可以在一个列表中看到您的新服务，在使用“<em class="lu">外框架列表</em>之前，我们已经调用了该列表:</p><figure class="lh li lj lk fq mo fe ff paragraph-image"><div class="fe ff nf"><img src="../Images/8fb83e5b182841491dd3447c88deed2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*ah3hwoRVvzLVJ-A7Yv6NQw.png"/></div><figcaption class="mt mu fg fe ff mv mw bd b be z ek">Exoframe list with full info about running service</figcaption></figure><p id="d133" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如您所见，该列表现在包括正在运行的<em class="lu"> html-test </em>服务及其完整信息——转发的端口、状态、模板、名称。<br/>如果您在<a class="ae jp" href="http://your.domain" rel="noopener ugc nofollow" target="_blank"> http://your.domain </a>打开浏览器，您应该会看到您创建的静态HTML。</p><p id="7c5a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">既然您已经看到了该服务的工作原理，让我们停下来删除它。<br/>您可以使用“<em class="lu"> exoframe stop </em>”命令停止您正在运行的服务，使用“<em class="lu"> exoframe rm </em>”命令删除已停止的服务。同样，如果您不提供服务名称，您不需要记住服务的名称——exo frame会为您提供一个交互式列表:</p><figure class="lh li lj lk fq mo fe ff paragraph-image"><div class="fe ff ng"><img src="../Images/e624f45034ff44be94331de925d0f3ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*oonwR9KUUI4aQPZpdY3gvw.png"/></div><figcaption class="mt mu fg fe ff mv mw bd b be z ek">Exoframe stop command example</figcaption></figure><p id="743c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Exoframe还提供了一种与来自注册表的图像进行交互的方式。<br/>使用“<em class="lu">外框架拉&lt;图像&gt; </em>”将从docker注册表中拉出给定的图像。<br/>然后，您可以通过执行“<em class="lu"> exoframe list public </em>”命令获得所有本地可用注册表映像的列表:</p><figure class="lh li lj lk fq mo fe ff paragraph-image"><div class="fe ff mx"><img src="../Images/f79ad06f7ef9b6a9255fa94a6eca7942.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*AU45uAH4K0vfCYiq_HojZA.png"/></div><figcaption class="mt mu fg fe ff mv mw bd b be z ek">Exoframe registry images list</figcaption></figure><p id="31a7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从注册表部署映像可以通过执行带有附加映像参数的deploy命令来完成，例如:</p><figure class="lh li lj lk fq mo fe ff paragraph-image"><div class="fe ff nh"><img src="../Images/bd19e3212629fd497a704c432deb7f45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*uNDlurMLzr0bPTmY8FTNTg.png"/></div><figcaption class="mt mu fg fe ff mv mw bd b be z ek">Exoframe deployment of registry image</figcaption></figure><p id="d905" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">之后，运行中的服务可以用如上所示的相同方式进行管理。</p><h1 id="0f5c" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">结论</h1><p id="60fe" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">Exoframe仍处于alpha阶段，有些地方还缺少一些功能。但是我已经用它在我自己的服务器上管理和部署了一组演示，这让我的生活变得轻松多了。</p><p id="0b8e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://github.com/exoframejs/exoframe" rel="noopener ugc nofollow" target="_blank"> Exoframe现已在GitHub </a>上线。免费。麻省理工学院许可的。<br/>非常感谢您的任何反馈。</p><div class="lh li lj lk fq ab cb"><figure class="ni mo nj nk nl nm nn paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="ni mo nj nk nl nm nn paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="ni mo nj nk nl nm nn paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="no np nq"><p id="f922" class="ir is lu it b iu iv iw ix iy iz ja jb nr jd je jf ns jh ji jj nt jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is lu it b iu iv iw ix iy iz ja jb nr jd je jf ns jh ji jj nt jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="lh li lj lk fq mo fe ff paragraph-image"><a href="https://goo.gl/Ahtev1"><div class="fe ff nu"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></a></figure></div></div>    
</body>
</html>