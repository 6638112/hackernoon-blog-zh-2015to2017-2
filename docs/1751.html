<html>
<head>
<title>Type Checking In JavaScript: Getting Started with Flow.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的类型检查:Flow入门。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/type-checking-in-javascript-getting-started-with-flow-8532c11aceb3?source=collection_archive---------3-----------------------#2016-12-05">https://medium.com/hackernoon/type-checking-in-javascript-getting-started-with-flow-8532c11aceb3?source=collection_archive---------3-----------------------#2016-12-05</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/cc585eb8af82f7a32956ba988a6f699c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TeDHHNdM9ujpFrrDbDihrA.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Just flow with the flow.</figcaption></figure><p id="fb15" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">由脸书团队(开源)为JavaScript开发人员设计的Flow是一个静态类型检查器，可以在应用程序运行前捕捉常见错误。</p><h1 id="a653" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">什么是静态类型检查器？</h1><p id="7108" class="pw-post-body-paragraph jg jh hu ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hn dt translated"><em class="lh">这通常意味着变量的类型在编译时是已知的。对于一些语言，这意味着你作为程序员必须指定每个变量的类型(例如:Java，C，c++)；其他语言提供了某种形式的类型推断，即类型系统推断变量类型的能力(例如:OCaml、Haskell、Scala)——</em><a class="ae li" href="http://stackoverflow.com/a/1517670/6752055" rel="noopener ugc nofollow" target="_blank"><em class="lh">stack overflow</em></a><em class="lh">。</em></p><p id="6b4a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">当您编写代码时，Flow通过检查更改和分析代码的正确性来与您的代码编辑器集成。Flow不仅指出了代码中的错误，还提供了关于代码错误的上下文。</p><p id="3b84" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在这篇文章中，我们将深入探讨流动的平稳性，看看它如何对我们有益。确保您已经安装了<a class="ae li" href="http://nodejs.org" rel="noopener ugc nofollow" target="_blank"> NodeJS </a>。</p><p id="017b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">拿出你的代码编辑器，我会使用<a class="ae li" href="http://sublimetext.com" rel="noopener ugc nofollow" target="_blank"> Sublime-text </a>，因为那是我的代码编辑器。还有对其他编辑器的支持，如<a class="ae li" href="https://github.com/flowtype/vim-flow" rel="noopener ugc nofollow" target="_blank"> vim </a>、<a class="ae li" href="https://github.com/flowtype/flow-for-emacs" rel="noopener ugc nofollow" target="_blank"> emacs </a>和<a class="ae li" href="https://nuclide.io/docs/languages/flow/" rel="noopener ugc nofollow" target="_blank">核素</a>。</p><p id="7f6e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">使用Sublime-text，你需要安装一个sublimeLinter包来让Flow正确工作，这就是<a class="ae li" href="https://github.com/SublimeLinter/SublimeLinter-flow" rel="noopener ugc nofollow" target="_blank"> SublimeLinter-Flow </a>。</p><h2 id="8f70" class="lj kf hu bd kg lk ll lm kk ln lo lp ko jr lq lr ks jv ls lt kw jz lu lv la lw dt translated">开始很容易:</h2><ol class=""><li id="b246" class="lx ly hu ji b jj lc jn ld jr lz jv ma jz mb kd mc md me mf dt translated">创建新的项目文件夹或打开现有的项目。</li><li id="30ee" class="lx ly hu ji b jj mg jn mh jr mi jv mj jz mk kd mc md me mf dt translated"><em class="lh">在你的项目根目录下创建一个</em> <code class="eh ml mm mn mo b"><em class="lh">.flowconfig</em></code> <em class="lh"> </em>文件。</li><li id="6280" class="lx ly hu ji b jj mg jn mh jr mi jv mj jz mk kd mc md me mf dt translated"><code class="eh ml mm mn mo b"><em class="lh">npm install --save-dev flow-bin</em></code></li><li id="6bf1" class="lx ly hu ji b jj mg jn mh jr mi jv mj jz mk kd mc md me mf dt translated">创建一个新文件<code class="eh ml mm mn mo b">index.js</code>或者打开你的任何JS文件。就在顶部添加这个小小的JavaScript注释<code class="eh ml mm mn mo b">// @flow</code>，就这样。</li></ol><p id="cbbb" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在<code class="eh ml mm mn mo b">index.js</code>文件中添加以下代码片段作为开始:</p><pre class="mp mq mr ms fq mt mo mu mv aw mw dt"><span id="955a" class="lj kf hu mo b fv mx my l mz na">var str: number = 'hello world!';<br/>console.log(str);</span></pre><p id="7403" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在您的代码编辑器中，如果您使用的是Sublime文本，您应该会看到类似下面这样的内容。</p><figure class="mp mq mr ms fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nb"><img src="../Images/692654310532c8192e0357d2290288ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HqjkYGL0ZjY50NC4QbfFeA.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Error messages displayed.</figcaption></figure><p id="2dd2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们在这里做的是添加一个小的类型错误，我们期望<code class="eh ml mm mn mo b">str</code>是一个数字，但是我们给它分配了一个字符串。</p><p id="0f3e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为了展示Flow一直守护着您的代码，取出<code class="eh ml mm mn mo b">//@flow</code>注释，看看会发生什么。错误突出显示消失了。</p><figure class="mp mq mr ms fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nc"><img src="../Images/4439d57a987eb68c05e5d8c93c237a2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ib99Bv4NWUWp0kMfLYvHzw.gif"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Removing the flow comments triggers either to watch for errors or not.</figcaption></figure><p id="5df1" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您还可以通过运行命令<code class="eh ml mm mn mo b">flow</code>来检查终端中的错误，您会得到一个日志，显示错误发生的位置。</p><figure class="mp mq mr ms fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nd"><img src="../Images/7fd512d3bf5195bba408320c4bdec951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3AwHD-GHrunvO-YQx-uoeg.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Error log typing flow in the command line.</figcaption></figure><p id="4292" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你有一个现有的项目或者你创建了一个新的项目。如果您在您的终端上运行您的项目或<code class="eh ml mm mn mo b">node index.js</code>，您将得到与<code class="eh ml mm mn mo b">flow</code>显示的不同的错误。</p><pre class="mp mq mr ms fq mt mo mu mv aw mw dt"><span id="39c3" class="lj kf hu mo b fv mx my l mz na">var str: number = 'hello world!';<br/>       ^<br/>SyntaxError: Unexpected token :</span></pre><p id="809a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这是因为我们需要添加<em class="lh"> Babel </em>和一个<em class="lh"> Babel插件</em>来帮助我们传输代码。</p><ol class=""><li id="ea1f" class="lx ly hu ji b jj jk jn jo jr ne jv nf jz ng kd mc md me mf dt translated">安装<em class="lh"> babel-cli </em>如果你还没有的话<code class="eh ml mm mn mo b">npm install -g babel-cli</code></li><li id="4ec6" class="lx ly hu ji b jj mg jn mh jr mi jv mj jz mk kd mc md me mf dt translated"><code class="eh ml mm mn mo b">npm install —-save-dev babel-plugin-transform-flow-strip-types</code></li><li id="7e95" class="lx ly hu ji b jj mg jn mh jr mi jv mj jz mk kd mc md me mf dt translated">在项目根目录下创建一个<code class="eh ml mm mn mo b">.babelrc</code>文件，并添加<code class="eh ml mm mn mo b">{"plugins: ["transform-flow-strip-types"]}</code></li><li id="38b1" class="lx ly hu ji b jj mg jn mh jr mi jv mj jz mk kd mc md me mf dt translated">在您的终端中，运行<code class="eh ml mm mn mo b">babel-node index.js</code></li></ol><p id="72fa" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果您注意到，即使有错误流抱怨，它也被忽略了。意思是“心流”不会阻止你在其他事情上走得更远。但是建议在投入生产之前修复您的错误:)。</p><p id="1e39" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在来纠正我们的错误，让Flow停止对我们发送错误类型的咆哮。我们所要做的就是将<code class="eh ml mm mn mo b">number</code>改为<code class="eh ml mm mn mo b">string</code></p><pre class="mp mq mr ms fq mt mo mu mv aw mw dt"><span id="868f" class="lj kf hu mo b fv mx my l mz na">var str: string = 'hello world!';<br/>console.log(str);</span></pre><h2 id="a5d5" class="lj kf hu bd kg lk ll lm kk ln lo lp ko jr lq lr ks jv ls lt kw jz lu lv la lw dt translated">Flow支持许多其他类型，例如:</h2><ul class=""><li id="3927" class="lx ly hu ji b jj lc jn ld jr lz jv ma jz mb kd nh md me mf dt translated"><a class="ae li" href="https://flowtype.org/docs/builtins.html#boolean" rel="noopener ugc nofollow" target="_blank">布尔型</a></li><li id="9bb5" class="lx ly hu ji b jj mg jn mh jr mi jv mj jz mk kd nh md me mf dt translated"><a class="ae li" href="https://flowtype.org/docs/builtins.html#mixed" rel="noopener ugc nofollow" target="_blank">编号</a></li><li id="a3df" class="lx ly hu ji b jj mg jn mh jr mi jv mj jz mk kd nh md me mf dt translated"><a class="ae li" href="https://flowtype.org/docs/builtins.html#string" rel="noopener ugc nofollow" target="_blank">弦</a></li><li id="ebce" class="lx ly hu ji b jj mg jn mh jr mi jv mj jz mk kd nh md me mf dt translated"><a class="ae li" href="https://flowtype.org/docs/builtins.html#null-and-void" rel="noopener ugc nofollow" target="_blank">空值</a></li><li id="0412" class="lx ly hu ji b jj mg jn mh jr mi jv mj jz mk kd nh md me mf dt translated"><a class="ae li" href="https://flowtype.org/docs/builtins.html#null-and-void" rel="noopener ugc nofollow" target="_blank">作废</a></li></ul><p id="7292" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">还有<a class="ae li" href="https://flowtype.org/docs/quick-reference.html#primitives" rel="noopener ugc nofollow" target="_blank">更有</a>，一定要查出来。</p><h1 id="a367" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">最后一个例子:</h1><p id="1b68" class="pw-post-body-paragraph jg jh hu ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hn dt translated">Flow还支持函数参数中的类型检查。</p><pre class="mp mq mr ms fq mt mo mu mv aw mw dt"><span id="a71f" class="lj kf hu mo b fv mx my l mz na">function doggy(x: number) {<br/> return x + 1;<br/>}</span></pre><p id="c621" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这意味着，我们声明一个函数，我们期望一个数字作为参数。</p><p id="eedd" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果我们调用这个函数:</p><pre class="mp mq mr ms fq mt mo mu mv aw mw dt"><span id="4a86" class="lj kf hu mo b fv mx my l mz na">doggy(3) // flow displays no errors<br/>doggy("hola!") // we seem to enjoy flows error colors here.</span></pre><figure class="mp mq mr ms fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ni"><img src="../Images/da824d18402a5d02445037fe3e9264f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yRYTnhfU006jPP6GgTmyqw.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Just one last example.</figcaption></figure><h1 id="c510" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">最后一个例子:</h1><p id="6db6" class="pw-post-body-paragraph jg jh hu ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hn dt translated">与心流打交道已经有一段时间了，我还没有涵盖心流提供的所有好处，但这是我迄今为止最喜欢的，请在评论中分享你喜欢心流的地方，以帮助其他人了解更多。</p><p id="d143" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Flow允许我们定义一个函数以及我们期望的返回值。无论函数类型是什么，异步，生成器，流都是兼容的。</p><pre class="mp mq mr ms fq mt mo mu mv aw mw dt"><span id="a968" class="lj kf hu mo b fv mx my l mz na">function doggy(x: number): number {<br/> return "c";// throws error because a string is returned.<br/>}</span><span id="9388" class="lj kf hu mo b fv nj my l mz na">function catty(x: number): number {<br/> return 3; //throws no error because a number is returned<br/>}</span></pre><h2 id="62eb" class="lj kf hu bd kg lk ll lm kk ln lo lp ko jr lq lr ks jv ls lt kw jz lu lv la lw dt translated">终于！</h2><p id="fd1f" class="pw-post-body-paragraph jg jh hu ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hn dt translated">检查Reac  t的<a class="ae li" href="https://flowtype.org/docs/react.html#_" rel="noopener ugc nofollow" target="_blank">流程。</a></p><p id="f56a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">使用这种类型检查，有一些优点，比如更好的生产率、更可读的代码和按流自动完成。干杯！</p><div class="mp mq mr ms fq ab cb"><figure class="nk iv nl nm nn no np paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="nk iv nl nm nn no np paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="nk iv nl nm nn no np paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="nq nr ns"><p id="f922" class="jg jh lh ji b jj jk jl jm jn jo jp jq nt js jt ju nu jw jx jy nv ka kb kc kd hn dt translated"><a class="ae li" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae li" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae li" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae li" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jg jh lh ji b jj jk jl jm jn jo jp jq nt js jt ju nu jw jx jy nv ka kb kc kd hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae li" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae li" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="mp mq mr ms fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nw"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>