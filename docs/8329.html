<html>
<head>
<title>Moving Beyond EdgeRank for Personalized News Feeds</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">超越EdgeRank实现个性化新闻订阅</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/moving-beyond-edgerank-for-personalized-news-feeds-1227aa782d?source=collection_archive---------23-----------------------#2017-11-28">https://medium.com/hackernoon/moving-beyond-edgerank-for-personalized-news-feeds-1227aa782d?source=collection_archive---------23-----------------------#2017-11-28</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/a258d0a3908c897954effcb51b223f49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*au-wOHIiHLCEmElA.png"/></div></div></figure><blockquote class="jc jd je"><p id="a469" class="jf jg jh ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">披露:<a class="ae ke" href="https://goo.gl/LxzcfX" rel="noopener ugc nofollow" target="_blank"> Stream </a>，可扩展提要的API，之前赞助过Hacker Noon。</p></blockquote><p id="5091" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated"><em class="jh">这篇博文分为两部分，追溯了之前</em><a class="ae ke" href="https://getstream.io/blog/building-instagram-discovery-engine-step-step-tutorial/" rel="noopener ugc nofollow" target="_blank"><em class="jh"/></a><em class="jh">的一篇博文。所有这些部分的总和是我最大的努力，为您提供一个如何将个性化新闻提要的创建提升到下一个级别的框架。</em></p><ul class=""><li id="09cf" class="ki kj hu ji b jj jk jn jo kf kk kg kl kh km kd kn ko kp kq dt translated"><em class="jh">第1部分:一个非常基本的EdgeRank风格算法背后的理论，该算法用于构建我自己的</em> <a class="ae ke" href="https://getstream.io/blog/building-instagram-discovery-engine-step-step-tutorial/" rel="noopener ugc nofollow" target="_blank"> <em class="jh"> Instagram发现引擎。</em>T15】</a></li><li id="dfde" class="ki kj hu ji b jj kr jn ks kf kt kg ku kh kv kd kn ko kp kq dt translated"><em class="jh">第2部分:了解如何使用现代机器学习技术来优化提要中的排名</em></li></ul><h2 id="e8d4" class="kw kx hu bd ky kz la lb lc ld le lf lg kf lh li lj kg lk ll lm kh ln lo lp lq dt translated">第1部分:我如何以及为什么使用这个分数函数</h2><p id="f04e" class="pw-post-body-paragraph jf jg hu ji b jj lr jl jm jn ls jp jq kf lt jt ju kg lu jx jy kh lv kb kc kd hn dt translated">在我的<a class="ae ke" href="https://getstream.io/blog/building-instagram-discovery-engine-step-step-tutorial/" rel="noopener ugc nofollow" target="_blank">上一篇博文</a>中，我讲述了如何构建自己的Instagram发现引擎。它包含了相当多的代码，但是没有很多关于我为什么选择下面的算法来排列帖子的理论的讨论。</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lw"><img src="../Images/739c970a6bfed5af4c3eb3b9504d54e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r9MAPJgivaQf6_ON."/></div></div></figure><p id="4596" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">所以让我们再深入研究一下。本质上，它只是经典facebook EdgeRank算法的变体:</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lw"><img src="../Images/f11672146db25fa09ce2b9a73453b9ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bWwYOlEWaKPFwwil."/></div></div></figure><p id="b126" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">这可以分解为三个主要部分:<strong class="ji hv">亲和力</strong>、<strong class="ji hv">权重</strong>和<strong class="ji hv">时间衰减</strong>。</p><h2 id="5e91" class="kw kx hu bd ky kz la lb lc ld le lf lg kf lh li lj kg lk ll lm kh ln lo lp lq dt translated">吸引力</h2><p id="bd7b" class="pw-post-body-paragraph jf jg hu ji b jj lr jl jm jn ls jp jq kf lt jt ju kg lu jx jy kh lv kb kc kd hn dt translated">亲和力这个术语是一种将用户与你的“联系”程度联系起来的方式。这个想法是，如果你有很多共同的朋友，并且你过去和他们有过互动，你更有可能想要看到那个用户未来的帖子。</p><p id="81e0" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">在这个例子中，亲和力由两个术语确定:</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lw"><img src="../Images/f15bb8a60c8d5937bab90229482fe78d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mWb_oPxm6lqRhocL."/></div></div></figure><p id="d98b" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">其中PPR是我对那个用户的个人排名。其他因素可能包括我评论的次数和点击用户帖子的次数。</p><p id="da0f" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">在Python中，PPR是通过基于我关注的人创建一个NetworkX图来计算的。然后，我使用指定的个性化字典运行pagerank。个性化字典只是告诉NetworkX PageRank算法，重置到任意随机节点的概率为零，除了你正在“个性化”的节点。</p><figure class="lx ly lz ma fq iv"><div class="bz el l di"><div class="mb mc l"/></div></figure><p id="ad3c" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">将PPR乘以我“喜欢”一个用户帖子的次数的自然对数，是提高我之前互动过的用户的亲和力得分的一种方式。</p><h2 id="9a48" class="kw kx hu bd ky kz la lb lc ld le lf lg kf lh li lj kg lk ll lm kh ln lo lp lq dt translated">重量</h2><p id="2144" class="pw-post-body-paragraph jf jg hu ji b jj lr jl jm jn ls jp jq kf lt jt ju kg lu jx jy kh lv kb kc kd hn dt translated">权重可以由许多不同的因素决定，具体取决于您可以访问的数据类型。我是根据帖子的赞数和评论数来判断的。</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lw"><img src="../Images/d7959c91745e1c6e440dbb3775ff6d4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wjiL-8D-AjmqD8EJ."/></div></div></figure><p id="678a" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">我用日志让一个帖子上前几个赞的重要性高于那些已经有很多赞的帖子。思维过程是10个和100个喜欢之间的差异，应该比100到190个更相关，即使两者都有90个喜欢的差异。</p><h2 id="defb" class="kw kx hu bd ky kz la lb lc ld le lf lg kf lh li lj kg lk ll lm kh ln lo lp lq dt translated">衰减时间</h2><p id="c7ae" class="pw-post-body-paragraph jf jg hu ji b jj lr jl jm jn ls jp jq kf lt jt ju kg lu jx jy kh lv kb kc kd hn dt translated">时间衰减适用于非常关心项目“新鲜度”的应用程序。重要的是增加新的内容，而不是旧的、过时的内容。时间衰减确保新的文章有机会出现在你的订阅源的顶部，即使它们可能没有很多喜欢……在Stream，我们将大多数的<a class="ae ke" href="https://getstream.io/docs/#decay" rel="noopener ugc nofollow" target="_blank">衰减函数</a>基于线性、指数和高斯衰减函数。您决定使用的功能在很大程度上取决于最终应用程序以及您希望旧内容变得无关紧要的速度。</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lw"><img src="../Images/ec76c179cfa736916fa0cb5f9498ce35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Lsf2Uan4q-U6y8GX."/></div></div></figure><p id="2d4a" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">嗯，这很简单，是吧？将三个相当容易得到的特性相乘，可以得到一些相当不错的结果。虽然手动调整少数几个参数相当容易，但当您想要包括10个、100个甚至1000个不同的参数，以确保您用户的提要中包含最相关的内容时，会发生什么呢(我知道，我知道，这是机器学习这个词的一个重要组成部分)。让我们来看看…</p><h2 id="5686" class="kw kx hu bd ky kz la lb lc ld le lf lg kf lh li lj kg lk ll lm kh ln lo lp lq dt translated">第2部分:超越EdgeRank到提升树和神经网络</h2><p id="73ae" class="pw-post-body-paragraph jf jg hu ji b jj lr jl jm jn ls jp jq kf lt jt ju kg lu jx jy kh lv kb kc kd hn dt translated">虽然一个简单的EdgeRank风格的算法很容易实现，但它确实有一些缺点，这取决于您的应用程序有多少数据。这似乎是显而易见的，但最佳的提要是最能吸引用户的提要。如果您希望您的提要基于大量参数，那么实现这一点可能很难。根据应用，接合可以基于许多不同的参数。对于Instagram风格的订阅源，它们可以基于点击、喜欢、评论、发送、关注和取消关注。我们可以将这些指标视为不同的模型，优化每一个模型，最后将它们相加得到最终得分。</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lw"><img src="../Images/aed45efc1b08459530aedc2a2cada1e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NvlqkQZyyKSxBLqY."/></div></div></figure><p id="9766" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">[1] <br/>总分= 30.6015</p><p id="047c" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">那么我们可以用什么模型来预测所有这些事件的概率呢？一种已经被证明是成功的对feeds进行分级的方法[1]是使用逻辑回归的提升决策树。使用增强决策树可以让我们(几乎)向模型中抛出尽可能多的特征，让它决定什么是重要的。在决策树被训练之后，我们可以将每个输入特征转化为一组分类特征。然后，我们将这些分类特征用作逻辑回归的一次性编码输入，以重新学习叶权重。这个额外的步骤允许我们加速训练过程，并将训练步骤推至接近在线的模型，同时仍然利用增强树提供给我们的特征变换。</p><p id="00db" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">提示:在生产中，你可能希望减少特征的数量，以加快训练时间，减少过度拟合。</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lw"><img src="../Images/fa3097f45ff53481a172ab4c4b16ea2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-36w3aPmFIOHLEA2."/></div></div></figure><p id="d20d" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">(黄色节点表示分类特征，绿色节点表示要重新学习的叶权重)那么我们可以使用什么特征来填充到增强的决策树模型中呢？让我们把它们分成两个子类别:<strong class="ji hv">语境</strong>和<strong class="ji hv">历史</strong>。</p><p id="cd35" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated"><strong class="ji hv">上下文特征</strong>是构成内容的那些特征。例如，标签为# puppiesofinstagram的小狗照片中的全能小狗。</p><p id="766f" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated"><strong class="ji hv">历史特征</strong>可以通过作者和观众之间的约定先验来描述。在这里，理解一个人的网络结构很重要，因为它可以让一个人看到谁是他们的亲密朋友，他们总是喜欢谁的照片，他们只在发布猫的照片时喜欢谁的照片，以及他们在发布小狗的照片时总是评论谁的照片。其他重要的历史特征包括现实生活中你可能认识的人和你搜索的人。例如，我总是喜欢来自<a class="ae ke" href="https://www.instagram.com/haystackpets/" rel="noopener ugc nofollow" target="_blank"> haystackpets </a>的帖子，所以它们应该首先出现在我的提要中。(没错，那是不要脸的给我宠物的Instagram账号插队。)</p><p id="d5c1" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">历史特征将推动大部分项目，但背景特征对于冷启动问题至关重要。虽然提升树是Stream团队的最爱(并且已经处于前沿很长时间了)，但在某些情况下，神经网络可以表现得更好。大多数情况下，当您有大量稀疏数据要排序时。</p><p id="ea2a" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">就设置而言，神经网络的模型可以用与增强树几乎相同的方式来设置。通过使神经网络的输入为具有特征和反馈标签的单个数据流，输出为具有sigmoid函数的单个节点来预测事件的概率。</p><p id="d214" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">由于训练神经网络的成本很高，我们可以利用一个常用于图像识别的简单技巧。我们可以利用迁移学习来为一个指标训练整个神经网络，然后重新使用昂贵的工具来训练基础层，并为您想要优化的每个指标微调顶部密集层，而不是为每个指标从头开始训练整个神经网络。下面显示了前馈神经网络的一个示例。</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lw"><img src="../Images/5a5353efeb8f886d447b448da064ff09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*23-M-aMVI3hxnoii."/></div></div></figure><p id="1950" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">根据你每天需要排列的提要的数量，这个计算仍然很昂贵。脸书将神经网络与增强决策树相结合，以帮助降低神经网络中的推理成本，同时仍然获得性能增益[2]。</p><p id="2532" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">一旦你训练了你的神经网络，你可以使用最后一层作为特征向量，并将其输入到每个事件的逻辑回归模型中，这样我们就可以加快训练速度，并迅速考虑新的数据。此外，作为一个额外的奖励，你还可以为你的下一次鸡尾酒会找到一个很好的话题。</p><p id="a6fb" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">哇，我确实在那里浏览了很多话题。我们也有很多关于如何在你的应用中实现<a class="ae ke" href="https://getstream.io/personalization/" rel="noopener ugc nofollow" target="_blank">个性化排名提要</a>的信息。请随时联系我或我们数据科学团队中的任何人，了解如何改进您的应用！</p><p id="325a" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq kf js jt ju kg jw jx jy kh ka kb kc kd hn dt translated">[1] Ewa Dominowska —生成十亿条个人新闻feed—ml conf SEA 2016(【https://www.youtube.com/watch?v=iXKR3HE-m8c】)<br/>【2】insta gram上预测性feed排名模型的测量与分析<br/>(<a class="ae ke" href="https://code.facebook.com/posts/1692857177682119/machine-learning-scale-2017-recap/" rel="noopener ugc nofollow" target="_blank">https://code . Facebook . com/posts/1692857177682119/machine-learning-scale-2017-recap/</a>)</p></div><div class="ab cl md me hc mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hn ho hp hq hr"><blockquote class="jc jd je"><p id="8c69" class="jf jg jh ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">最初发表于<a class="ae ke" href="https://getstream.io/blog/moving-beyond-edgerank-for-personalized-news-feeds/" rel="noopener ugc nofollow" target="_blank">流博客</a>。</p><p id="476d" class="jf jg jh ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们的每周赞助商<a class="ae ke" href="https://goo.gl/LxzcfX" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv"> Stream </strong> </a> <strong class="ji hv">使您能够在几个小时而不是几周内构建可扩展的新闻提要&amp;活动流:</strong> <a class="ae ke" href="https://goo.gl/LxzcfX" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv">在这个5分钟的教程中试用API。</strong>T19】</a></p></blockquote></div></div>    
</body>
</html>