<html>
<head>
<title>Learn How to Manage Dotfiles</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解如何管理点文件</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/learn-how-to-manage-dotfiles-b8b62c6c5491?source=collection_archive---------4-----------------------#2017-08-18">https://medium.com/hackernoon/learn-how-to-manage-dotfiles-b8b62c6c5491?source=collection_archive---------4-----------------------#2017-08-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/e9c16bd35fc8eff985956e4f9f6c4bc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*Li4H27cRUD8A4JWD8PtRUw.png"/></div></figure><p id="1120" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我最近买了一台新的笔记本电脑，我的一个同事建议我开始自动化我的设置配置。目标是允许我几乎立即在不同的机器上引导和复制我的配置偏好。待办事项列表中最重要的一项是点文件的<a class="ae jw" href="https://hackernoon.com/tagged/management" rel="noopener ugc nofollow" target="_blank">管理</a>。今天，我将与您分享如何利用Unix shell的强大功能来创建一个脚本，您可以用它来管理不同机器之间的点文件。</p></div><div class="ab cl jx jy hc jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="hn ho hp hq hr"><p id="8b80" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><a class="ae jw" href="https://hackernoon.com/tagged/dotfiles" rel="noopener ugc nofollow" target="_blank">点文件</a>用于定制类Unix系统。它们的巧妙之处在于它们可以根据你自己的喜好进行修改。例子包括。gitconfig，。bash_profile和。仅举几个例子。按照惯例，点文件通常存储在主目录中。你可以在你的shell上输入<code class="eh ke kf kg kh b">echo $HOME</code>来找到你的。在我的机器上，显示的是<code class="eh ke kf kg kh b">/Users/haali</code>。</p><figure class="kj kk kl km fq iv fe ff paragraph-image"><div class="fe ff ki"><img src="../Images/3d94c9c8d6750f9881bcac7446af50e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*WNyt85WW_eCQdqC1MkOQxw.png"/></div></figure><p id="d9a0" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">入门非常简单。我们需要在一个目录中组织我们的点文件。这是你只需要做一次的事情，因为稍后包含我们所有点文件的目录将被存储在Git上。为了组织我们的文件，我们需要将我们的点文件从<code class="eh ke kf kg kh b">$HOME</code>目录移动/复制到一个新的目录。我们将这个新目录称为<code class="eh ke kf kg kh b">$dir</code>。</p><figure class="kj kk kl km fq iv fe ff paragraph-image"><div class="fe ff kn"><img src="../Images/9a20ab8529deac266388b35d50b30e34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*BZN5b1YQLX8estNupAUKAA.png"/></div><figcaption class="ko kp fg fe ff kq kr bd b be z ek">Original copies are to be stored in $dir</figcaption></figure><p id="1236" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在这篇文章中，让我们假设我们想要跟踪<code class="eh ke kf kg kh b">.vimrc</code>、<code class="eh ke kf kg kh b">.gitconfig</code>和<code class="eh ke kf kg kh b">.zshrc</code>，但是可以随意添加任意数量的点文件。在您的终端上，运行以下两条语句:</p><pre class="kj kk kl km fq ks kh kt ku aw kv dt"><span id="78ee" class="kw kx hu kh b fv ky kz l la lb">❯ mkdir $HOME/Documents/dotfiles<br/>❯ cp $HOME/{.vimrc, .gitconfig, .zshrc} $HOME/Documents/dotfiles</span></pre><p id="3be5" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果您以前从未编写过bash，第一条语句在给定的路径中创建一个目录dotfiles，第二条语句将选定的文件复制到dotfiles文件夹中。仅供参考，这是您唯一一次为这个特定的自动化输入这些语句。将来，您只需从git中检索您的点文件并运行一个脚本。</p><h1 id="3848" class="lc kx hu bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly dt translated">创建脚本</h1><p id="469d" class="pw-post-body-paragraph iy iz hu ja b jb lz jd je jf ma jh ji jj mb jl jm jn mc jp jq jr md jt ju jv hn dt translated">打开您选择的编辑器，创建一个新文件<code class="eh ke kf kg kh b">dotfiles_setup.sh</code>,在顶部显示下面一行:</p><pre class="kj kk kl km fq ks kh kt ku aw kv dt"><span id="9a6f" class="kw kx hu kh b fv ky kz l la lb">#!/bin/bash</span></pre><p id="67a5" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这告诉进程这个脚本应该总是用bash运行，而不是另一个shell。</p><p id="2ba1" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">接下来，让我们将我们关心的点文件存储在一个变量中。我们还需要一个变量来存储包含原始点文件的已创建目录的路径。</p><pre class="kj kk kl km fq ks kh kt ku aw kv dt"><span id="b6dd" class="kw kx hu kh b fv ky kz l la lb">dotfiles=(".vimrc" ".zshrc" ".gitconfig")<br/>dir="${HOME}/Documents/dotfiles"</span></pre><p id="475a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">按照惯例，大多数点文件都是从<code class="eh ke kf kg kh b">$HOME</code>目录中读取的。将我们的点文件从<code class="eh ke kf kg kh b">$HOME</code>目录中移走后，我们将需要一种方法来创建一个链接，将每个被移动的文件从<code class="eh ke kf kg kh b">$HOME</code>连接到<code class="eh ke kf kg kh b">$dir</code>。幸运的是，这很容易通过使用<code class="eh ke kf kg kh b">ln</code>命令来完成。link命令基本上创建了一个指向原始文件的副本。</p><figure class="kj kk kl km fq iv fe ff paragraph-image"><div class="fe ff kn"><img src="../Images/0964e672560603bb4683c769c4f3c636.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*s3mN9aEjAF1nTnvf8_z0cA.png"/></div><figcaption class="ko kp fg fe ff kq kr bd b be z ek">Original copies are stored in $dir. $HOME contains pointer dotfiles</figcaption></figure><p id="05d4" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">继续该脚本，添加以下几行:</p><pre class="kj kk kl km fq ks kh kt ku aw kv dt"><span id="54c7" class="kw kx hu kh b fv ky kz l la lb">for dotfile in "${dotfiles[@]}";do<br/> ln -sf "${HOME}/${dotfile}" "${dir}"<br/>done</span></pre><p id="1b47" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">该代码段在开头有一个for循环，该循环遍历先前定义的<code class="eh ke kf kg kh b">$dotfiles</code>的每个元素，并使用<code class="eh ke kf kg kh b">ln</code>命令创建一个指向移动到<code class="eh ke kf kg kh b">$dir</code>的原始点文件的软链接。<a class="ae jw" href="https://en.wikipedia.org/wiki/Symbolic_link" rel="noopener ugc nofollow" target="_blank">软链接</a>是一种特殊的文件，它指向文件系统中的另一个文件，并且不包含目标文件中的数据。</p><p id="8d78" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">就是这样！前往您的终端，让神奇的事情发生:</p><pre class="kj kk kl km fq ks kh kt ku aw kv dt"><span id="90b4" class="kw kx hu kh b fv ky kz l la lb">❯ <!-- -->./dotfiles_setup.sh</span></pre><p id="0b09" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果您转向<code class="eh ke kf kg kh b">$HOME</code>并运行<code class="eh ke kf kg kh b">ls -la $HOME</code>，您将能够直观地看到所有创建的对<code class="eh ke kf kg kh b">$dir</code>的引用。在$HOME目录中，点文件引用将显示一个指向原始副本的箭头。在我的机器上，例如<code class="eh ke kf kg kh b">.gitconfig</code>被视为:</p><pre class="kj kk kl km fq ks kh kt ku aw kv dt"><span id="51dc" class="kw kx hu kh b fv ky kz l la lb">.gitconfig -&gt; /Users/haali/Documents/dotfiles/.gitconfig</span></pre><h1 id="92c8" class="lc kx hu bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly dt translated">做出改变</h1><p id="f371" class="pw-post-body-paragraph iy iz hu ja b jb lz jd je jf ma jh ji jj mb jl jm jn mc jp jq jr md jt ju jv hn dt translated">对<code class="eh ke kf kg kh b">$dir</code>所做的任何更改都会立即被参考文件看到，所以你不需要做任何特别的事情。我强烈建议您将dotfile与git保持同步，这样您就可以在任何机器上复制最新的机器配置。</p><h1 id="7029" class="lc kx hu bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly dt translated">整个剧本</h1><pre class="kj kk kl km fq ks kh kt ku aw kv dt"><span id="b8da" class="kw kx hu kh b fv ky kz l la lb">#!/bin/bash</span><span id="6380" class="kw kx hu kh b fv me kz l la lb">dotfiles=(".vimrc" ".zshrc" ".gitconfig")</span><span id="e62a" class="kw kx hu kh b fv me kz l la lb">dir="${HOME}/Documents/dotfiles"</span><span id="7e27" class="kw kx hu kh b fv me kz l la lb">for dotfile in "${dotfiles[@]}";do<br/> ln -sf "${HOME}/${dotfile}" "${dir}"<br/>done</span></pre></div><div class="ab cl jx jy hc jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="hn ho hp hq hr"><p id="ad8c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我希望这篇文章能让你开始自动化所有的事情。功劳归功劳，我要感谢我的同事爱德华激励我开始自动化所有的事情。</p><figure class="kj kk kl km fq iv"><div class="bz el l di"><div class="mf mg l"/></div></figure></div></div>    
</body>
</html>