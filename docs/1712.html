<html>
<head>
<title>Bro, do you even map ? — MapReduce demystified</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">兄弟，你会画地图吗？— MapReduce去神秘化</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/bro-do-you-even-map-mapreduce-demystified-ea7f11b0e238?source=collection_archive---------4-----------------------#2016-12-01">https://medium.com/hackernoon/bro-do-you-even-map-mapreduce-demystified-ea7f11b0e238?source=collection_archive---------4-----------------------#2016-12-01</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div class="fe ff hs"><img src="../Images/77c113f9c66482c949639597fabcac8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*TaZZ3_suGtpi4Bqegbxa8g.jpeg"/></div></figure><div class=""/><p id="8a49" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我见过很多人在努力理解map/reduce函数。他们要么认为这太复杂，难以理解，要么认为这是他们不会需要的“大数据东西”。</p><p id="62c4" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">猜猜看，我<strong class="ja ic">强烈</strong>不同意。</p><p id="bd76" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果你想知道什么是map/reduce，或者想说服你的老板在现实生活中使用map/reduce是一个很棒的风格指南提示，你可以阅读这篇文章</p><p id="e2ba" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">或者只是为了好玩。因为<a class="ae jw" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程</a>很好玩。我们都知道。</p><h2 id="6b3d" class="jx jy ib bd jz ka kb kc kd ke kf kg kh jj ki kj kk jn kl km kn jr ko kp kq kr dt translated">我们来玩一个“这段代码是做什么的”的游戏。</h2><p id="03a9" class="pw-post-body-paragraph iy iz ib ja b jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr kw jt ju jv hn dt translated">为了玩这个很棒的游戏，让我们假设你是编程新手。你没有10年阅读奇怪的命令式代码的经验。你被要求阅读一段代码，以便理解它做什么。</p><ul class=""><li id="a123" class="kx ky ib ja b jb jc jf jg jj kz jn la jr lb jv lc ld le lf dt translated">命令式风格(难度:比应该的要难):</li></ul><figure class="lg lh li lj fq hw"><div class="bz el l di"><div class="lk ll l"/></div></figure><p id="5a54" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">解决方案:也许你甚至没有意识到这一点，但是你必须想象你是一台电脑，并且按照程序运行，直到你在头脑中计算出<em class="lm">你所期望的结果。如果你更好的话，你可能会发现这段代码是用来对输入数组中奇数的平方数求和的。</em></p><p id="17b4" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这真的很简单吗？</p><ul class=""><li id="9c6e" class="kx ky ib ja b jb jc jf jg jj kz jn la jr lb jv lc ld le lf dt translated">功能型(难度:容易。除非你太习惯命令式风格。你应该改变这一点。说真的。):</li></ul><figure class="lg lh li lj fq hw"><div class="bz el l di"><div class="lk ll l"/></div></figure><p id="6407" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这段代码做了同样的事情。但不是阅读<strong class="ja ic">如何</strong>得到结果，而是强调<strong class="ja ic">结果应该是什么</strong>。它实际上几乎是在说:</p><ul class=""><li id="7d9d" class="kx ky ib ja b jb jc jf jg jj kz jn la jr lb jv lc ld le lf dt translated">从我们的<code class="eh ln lo lp lq b">numbers</code>输入开始</li><li id="18bc" class="kx ky ib ja b jb lr jf ls jj lt jn lu jr lv jv lc ld le lf dt translated">选择奇数</li><li id="6cd7" class="kx ky ib ja b jb lr jf ls jj lt jn lu jr lv jv lc ld le lf dt translated">计算它们所有的平方</li><li id="6c5f" class="kx ky ib ja b jb lr jf ls jj lt jn lu jr lv jv lc ld le lf dt translated">对结果求和</li></ul><p id="fd7e" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果有人问你，你会如何描述这个算法。什么是奇数，什么是正方形的细节也是可用的，但你不必通读它来获得大的图片。</p><p id="0052" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">想再举个例子吗？推荐算法怎么样。这是复杂的东西。不是简单的数字相加。为了更好的可读性，我们将使用<a class="ae jw" href="https://hackernoon.com/tagged/typescript" rel="noopener ugc nofollow" target="_blank">类型脚本</a>:</p><figure class="lg lh li lj fq hw"><div class="bz el l di"><div class="lk ll l"/></div></figure><p id="2acb" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我个人认为这是一些非常可读的代码。前6行应该足够让你明白这里发生了什么。</p><p id="9853" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果你还不够确信，试着想象用<code class="eh ln lo lp lq b">forEach</code>循环做同样的事情。</p><h2 id="cba2" class="jx jy ib bd jz ka kb kc kd ke kf kg kh jj ki kj kk jn kl km kn jr ko kp kq kr dt translated">2.这是什么魔法？</h2><p id="9983" class="pw-post-body-paragraph iy iz ib ja b jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr kw jt ju jv hn dt translated">如果您完全不熟悉映射/归约/过滤操作符，这里有一个非常简单的描述，说明它们的用途:</p><ul class=""><li id="8657" class="kx ky ib ja b jb jc jf jg jj kz jn la jr lb jv lc ld le lf dt translated">map 将简单地对一个数组的所有元素应用一个函数。所以基本上，<code class="eh ln lo lp lq b">[x, y, z].map(f)</code>将返回一个包含<code class="eh ln lo lp lq b">[f(x), f(y), f(z)].</code>的新数组。注意，你和编译器都知道输出的大小与输入的大小相同。同样，如果<code class="eh ln lo lp lq b">f</code>返回一个数字，那么<strong class="ja ic">保证</strong>获得一个数字数组。像typescript这样的智能语言可以利用这一点，任何阅读您的代码的人也一样</li><li id="51b5" class="kx ky ib ja b jb lr jf ls jj lt jn lu jr lv jv lc ld le lf dt translated"><strong class="ja ic"> filter </strong>将简单地选择你的数组中的一些元素，根据提供的函数对它们进行测试。数字数组仍将返回数字数组，但它的大小可能已经改变。请注意，在整个过程中，您的原始阵列保持不变。</li><li id="fad7" class="kx ky ib ja b jb lr jf ls jj lt jn lu jr lv jv lc ld le lf dt translated"><strong class="ja ic"> reduce </strong>会“碾压”一个数组返回一些值。与map不同，<code class="eh ln lo lp lq b">reduce</code>函数将把数组作为一个整体，并在其上计算一些东西。在我们的场景中，我们将每个值相加，直到得到元素数组的总和。典型的例子是总和、平均值或对象构造的计算。例如:</li></ul><figure class="lg lh li lj fq hw"><div class="bz el l di"><div class="lk ll l"/></div></figure><p id="655a" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><em class="lm"> Soo…没有更多的</em> <code class="eh ln lo lp lq b"><em class="lm">forEach</em></code> <em class="lm">？</em></p><p id="6035" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">嗯，我认为如果你想迭代对象，而每次都不返回任何东西，那么forEach是可以的。</p><p id="d29e" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><code class="eh ln lo lp lq b">myArray.forEach(console.log)</code>我觉得不错。使用<code class="eh ln lo lp lq b">map</code>只会返回一个空数组。我们显然忽略了这里的结果，所以没关系。</p><p id="012e" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">但是，<code class="eh ln lo lp lq b">myArray.forEach(someFunctionThatReturnsSomething)</code>很可能是错的。大多数时候你想对结果做点什么。</p><h2 id="07c8" class="jx jy ib bd jz ka kb kc kd ke kf kg kh jj ki kj kk jn kl km kn jr ko kp kq kr dt translated">结论</h2><p id="78c9" class="pw-post-body-paragraph iy iz ib ja b jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr kw jt ju jv hn dt translated">恭喜你，地图/缩小对你来说不再是一个谜了。</p><figure class="lg lh li lj fq hw fe ff paragraph-image"><div class="fe ff lw"><img src="../Images/1a46d46260547158f3ba2320caafe656.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*nrCwmZzzG-9NSWHUKA8WnQ.gif"/></div></figure><p id="1483" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">或许是吧？自由提问或发表一些评论！</p><div class="lg lh li lj fq ab cb"><figure class="lx hw ly lz ma mb mc paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="lx hw ly lz ma mb mc paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="lx hw ly lz ma mb mc paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="md me mf"><p id="f922" class="iy iz lm ja b jb jc jd je jf jg jh ji mg jk jl jm mh jo jp jq mi js jt ju jv hn dt translated">黑客中午是黑客如何开始他们的下午。我们是这个家庭的一员。我们现在<a class="ae jw" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jw" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="iy iz lm ja b jb jc jd je jf jg jh ji mg jk jl jm mh jo jp jq mi js jt ju jv hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jw" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jw" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="lg lh li lj fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="fe ff mj"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="lg lh li lj fq hw"><div class="bz el l di"><div class="mo ll l"/></div></figure></div></div>    
</body>
</html>