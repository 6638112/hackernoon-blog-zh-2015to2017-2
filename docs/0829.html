<html>
<head>
<title>Rails 5, Angular, Heroku, Bower, Postgres</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">轨道5，角形，Heroku，Bower，Postgres</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/rails-5-angular-heroku-bower-postgres-c25f42864bb9?source=collection_archive---------0-----------------------#2016-05-24">https://medium.com/hackernoon/rails-5-angular-heroku-bower-postgres-c25f42864bb9?source=collection_archive---------0-----------------------#2016-05-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="e29e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最近，我将一个Html管理模板集成到了我的rails应用程序中。我希望它像Rails一样，快速、可靠、易于更新。因为我对Rails有点陌生，所以花了我一整天的时间。把系统做好之后，想分享给大家作为参考。</p><h2 id="cfbd" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">它是如何工作的？</h2><p id="22f9" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">基本上，我们将使用Rails 5，Bower用于前端依赖，Heroku用于部署。我们将使用指向供应商/资产目录的bower添加我们的依赖项，然后我们将为生产预编译它们。</p><p id="5eb3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们将使用bower进行前端依赖，git进行版本控制，heroku进行部署。应用程序将有角度支持，但是一旦你设置了系统，你可以很容易地添加任何依赖项，比如React。我们还需要heroku工具带。</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="a6e8" class="jp jq hu ku b fv ky kz l la lb">$ git --version<br/>version 1.9.1</span><span id="932d" class="jp jq hu ku b fv lc kz l la lb">$ rails -v<br/>Rails 5.0.0.rc1</span><span id="5368" class="jp jq hu ku b fv lc kz l la lb">$ npm -v<br/>v2.5.1</span><span id="7c38" class="jp jq hu ku b fv lc kz l la lb">$ node -v<br/>v0.12.0</span><span id="e667" class="jp jq hu ku b fv lc kz l la lb">$ bower -v<br/>1.7.9</span><span id="e6d9" class="jp jq hu ku b fv lc kz l la lb">$ heroku --version<br/>heroku-toolbelt 3.43.2<br/>heroku-cli 5.2.9</span></pre><p id="e6fc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我假设您已经安装了rails 5、npm、node、git和heroku toolbelt，所以我从bower开始。</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="e3d0" class="jp jq hu ku b fv ky kz l la lb">$ npm install -g bower</span></pre><p id="fc6e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后我们可以开始新的铁路项目。</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="ae73" class="jp jq hu ku b fv ky kz l la lb">$ rails new project --skip-turbolinks --skip-spring</span><span id="b2db" class="jp jq hu ku b fv lc kz l la lb">$ cd project</span></pre><p id="a9b8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在我们创建了我们的项目之后，我们将它放入cd，并为package.json初始化git存储库和npm。通过在我们的应用程序目录中初始化npm package.json，我们将能够告诉heroku执行npm包并安装bower。一旦我们安装了bower，我们就可以轻松地将我们的依赖项集成到Rails应用程序中。</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="6082" class="jp jq hu ku b fv ky kz l la lb">$ git init</span><span id="02ac" class="jp jq hu ku b fv lc kz l la lb">$ npm init</span></pre><p id="9899" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在我们输入npm init之后，命令行会问你一些简单的问题。我认为没有必要一一解释。您可以为项目命名，并通过按enter键跳过其他问题。最后一步，它会问你这样可以吗？按enter键并创建package.json文件。</p><p id="3d6b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">完成设置后，您需要看到如下所示的文件:</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="bbc9" class="jp jq hu ku b fv ky kz l la lb">{<br/> “name”: “project”,<br/> “version”: “1.0.0”,<br/> “description”: “This README would normally document whatever steps are necessary to get the application up and running.”,<br/> “main”: “index.js”,<br/> “directories”: {<br/> “test”: “test”<br/> },<br/> “scripts”: {<br/> “test”: “echo \”Error: no test specified\” &amp;&amp; exit 1"<br/> },<br/> “author”: “”,<br/> “license”: “ISC”<br/>}</span></pre><p id="473a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后，我们将安装鲍尔作为我们的依赖。</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="00b7" class="jp jq hu ku b fv ky kz l la lb">$ npm install bower --save</span></pre><p id="5e59" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们添加了'— save '，因为我们希望将它保存到package.json文件中，而不是临时保存。一旦我们安装了带有-save标记的bower，我们的package.json文件现在应该是这样的；</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="766b" class="jp jq hu ku b fv ky kz l la lb">{<br/> “name”: “project”,<br/> “version”: “1.0.0”,<br/> “description”: “This README would normally document whatever steps are necessary to get the application up and running.”,<br/> “main”: “index.js”,<br/> “directories”: {<br/> “test”: “test”<br/> },<br/> “scripts”: {<br/> “test”: “echo \”Error: no test specified\” &amp;&amp; exit 1"<br/> },<br/> “author”: “”,<br/> “license”: “ISC”,<br/> “dependencies”: {<br/> “bower”: “^1.7.9”<br/> }<br/>}</span></pre><p id="8e4b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当我们部署到heroku时，首先我们的应用程序将被视为节点应用程序。它将为我们安装bower，然后它将继续运行ruby应用程序。</p><p id="503e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在我们可以初始化bower.json了</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="3615" class="jp jq hu ku b fv ky kz l la lb">$ bower init</span></pre><p id="8ce5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你可以再次，只需按回车键，跳过问题。一旦初始化了bower文件，它应该是这样的；</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="a6f1" class="jp jq hu ku b fv ky kz l la lb">{<br/> “name”: “project”,<br/> “description”: “This README would normally document whatever steps are necessary to get the application up and running.”,<br/> “main”: “index.js”,<br/> “authors”: [<br/> “MrWilhelm &lt;<a class="ae ld" href="mailto:batuhanwilhelm@gmail.com" rel="noopener ugc nofollow" target="_blank">batuhanwilhelm@gmail.com</a>&gt;”<br/> ],<br/> “license”: “ISC”,<br/> “homepage”: “”,<br/> “ignore”: [<br/> “**/.*”,<br/> “node_modules”,<br/> “bower_components”,<br/> “vendor/assets/bower_components”,<br/> “test”,<br/> “tests”<br/> ],<br/> “dependencies”: {<br/> <br/> }<br/>}</span></pre><p id="3d5d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在将bower作为npm的依赖项安装之后，现在我们需要定制我们的bower安装。因为当我们安装bower时，它会自动将依赖项安装到“node_modules/bower”目录中。对于rails应用程序，我们不希望这样，因为我们希望它们安装在“供应商/资产”目录中。</p><p id="66fe" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们将创造”。bowerrc "文件放在我们的应用程序的根目录下。然后我们会加上这一行；</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="ac29" class="jp jq hu ku b fv ky kz l la lb">{<br/> “directory”: “vendor/assets/bower_components”<br/>}</span></pre><p id="00c4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在bower可以将我们的依赖项安装到我们的rails应用程序中了。</p><p id="05c5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">接下来，我们将安装我们与bower的依赖关系。我们将安装“Bootstrap，Jquery，AngularJS”作为我们的依赖项。</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="ee59" class="jp jq hu ku b fv ky kz l la lb">$ bower install bootstrap-sass-official --save</span></pre><p id="d02c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们再次添加了“— save ”,因此它将被保存到“bower.json”中。当我们想安装bootstrap时，它会自动为我们安装jquery。现在我们可以安装angular。</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="5162" class="jp jq hu ku b fv ky kz l la lb">$ bower install angular --save</span></pre><p id="b49a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在我们有依赖系统为我们工作。</p><p id="1b1f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们将得到rails-assets.org的帮助，他们是这样解释的；</p><blockquote class="le lf lg"><p id="4fb2" class="ir is lh it b iu iv iw ix iy iz ja jb li jd je jf lj jh ji jj lk jl jm jn jo hn dt translated">Rails Assets是<a class="ae ld" href="http://bundler.io/" rel="noopener ugc nofollow" target="_blank"> Bundler </a>和<a class="ae ld" href="http://bower.io/" rel="noopener ugc nofollow" target="_blank"> Bower </a>之间的无摩擦代理。</p><p id="0dee" class="ir is lh it b iu iv iw ix iy iz ja jb li jd je jf lj jh ji jj lk jl jm jn jo hn dt translated">它自动将打包的组件转换成宝石，可以很容易地放入您的资产管道并保持最新。</p></blockquote><p id="6398" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当我们用bower安装依赖项时，它会为我们创建bower.json文件。Rails-assets.org将检查我们的bower.json文件中的依赖项，并作为rails gem为我们安装它们。</p><p id="9fbf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们将把rails-assets.org作为源添加到我们的gemfile中，然后我们将把我们的依赖项添加到我们的gemfile中。</p><p id="ff8e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们需要将“rails-assets-BOWER _ PACKAGE _ NAME”添加到gemfile中。比如说；</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="fb6a" class="jp jq hu ku b fv ky kz l la lb">gem 'rails-assets-bootstrap-sass-official'</span></pre><p id="2799" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如你所见，我们只是在“rails-assets-”的末尾添加了bower包名。</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="9460" class="jp jq hu ku b fv ky kz l la lb">source 'https://rails-assets.org' do<br/>  gem 'rails-assets-bootstrap-sass-official'<br/>  gem 'rails-assets-angular'<br/>end</span></pre><p id="8e26" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后“捆绑安装”</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="416d" class="jp jq hu ku b fv ky kz l la lb">Fetching gem metadata from <a class="ae ld" href="https://rails-assets.org/" rel="noopener ugc nofollow" target="_blank">https://rails-assets.org/</a>...<br/>Installing rails-assets-jquery 2.2.4...<br/>Using rails-assets-bootstrap-sass-official 3.3.6...<br/>Using rails-assets-angular 1.5.5...</span></pre><p id="f242" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后，我们可以在“application.js”和“application.css”文件中要求我们的依赖关系。</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="bb25" class="jp jq hu ku b fv ky kz l la lb">app/assets/javascripts/application.js</span><span id="27fa" class="jp jq hu ku b fv lc kz l la lb"><br/>//= require bootstrap<br/>//= require angular</span></pre><p id="15c5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Now application.css文件</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="4805" class="jp jq hu ku b fv ky kz l la lb">app/assets/stylesheets/application.css</span><span id="3298" class="jp jq hu ku b fv lc kz l la lb">*= require bootstrap</span></pre><p id="076a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们将创建测试控制器，这样我们就可以测试我们的依赖项是否正常工作。</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="eb23" class="jp jq hu ku b fv ky kz l la lb">$ rails g controller test index</span></pre><p id="3151" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这将为我们创建必要控制器和视图。现在我们需要编辑我们的路由文件。</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="9d0a" class="jp jq hu ku b fv ky kz l la lb">root 'test#index'</span></pre><p id="b0ae" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在我们有了测试页。我们将在同一页中测试引导和角度。为此，我们将使用引导网格系统按钮，这样我们可以看到引导工作。此外，我们将创建简单的角度应用程序，看看事情的工作与否。</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="381a" class="jp jq hu ku b fv ky kz l la lb">views/test/index.html.erb</span><span id="edab" class="jp jq hu ku b fv lc kz l la lb">&lt;div class=”row”&gt;<br/> &lt;div class=”col-md-6"&gt;<br/> &lt;h2&gt;Angular Initial Test:&lt;/h2&gt;<br/> &lt;article ng-app=”test&lt;div class="row"&gt;<br/>  &lt;div class="col-md-6"&gt;<br/>    &lt;h2&gt;Angular Initial Test:&lt;/h2&gt;<br/>    &lt;article ng-app="test"&gt;<br/>      &lt;header&gt;<br/>        &lt;h3 ng-init="name"&gt;Hello, {{name}}&lt;/h1&gt;<br/>      &lt;/header&gt;<br/>      &lt;section&gt;<br/>        &lt;form class="form-inline"&gt;<br/>          &lt;div class="form-group"&gt;<br/>            &lt;label for="name"&gt;Name&lt;/label&gt;<br/>            &lt;input class="form-control"<br/>              type="text"<br/>              name="name"<br/>              placeholder="Enter your name"<br/>              autofocus<br/>              ng-model="name"&gt;<br/>          &lt;/div&gt;<br/>        &lt;/form&gt;<br/>      &lt;/section&gt;<br/>    &lt;/article&gt;<br/>    &lt;br /&gt;&lt;br /&gt;<br/>    &lt;a class="btn btn-success"&gt; This is test for bootstrap &lt;/a&gt;<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="5217" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在我们有了测试视图。然后我们将初始化角度应用程序。我们将只使用一行代码。</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="0473" class="jp jq hu ku b fv ky kz l la lb">app/assets/javascripts/test.js</span><span id="0e68" class="jp jq hu ku b fv lc kz l la lb">angular.module('test', []);</span></pre><p id="6c29" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">耶！它非常有效。</p><figure class="kp kq kr ks fq lm fe ff paragraph-image"><div class="fe ff ll"><img src="../Images/3a788adc40f67815ae1bec4b683e8987.png" data-original-src="https://miro.medium.com/v2/resize:fit:508/format:webp/1*zJbGIJ9a0NVPXfg_bafIcA.png"/></div></figure><p id="8d3e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在是时候部署到Heroku了！</p><p id="b6de" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">稍后我会写这部分。你也可以给我发邮件来写这篇文章，如果我错了，有错误或只是解释，任何东西。联系:batuhanwilhelm@gmail.com</p></div></div>    
</body>
</html>