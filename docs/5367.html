<html>
<head>
<title>ActiveRecord — Named Query Fragment Placeholders</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ActiveRecord —命名查询片段占位符</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/activerecord-named-query-fragment-placeholders-8f541535586f?source=collection_archive---------6-----------------------#2017-07-22">https://medium.com/hackernoon/activerecord-named-query-fragment-placeholders-8f541535586f?source=collection_archive---------6-----------------------#2017-07-22</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="e707" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">每当我想在Rails的原始SQL查询片段中使用占位符时，我会使用<code class="eh jp jq jr js b">?</code>,最后写下—</p><pre class="jt ju jv jw fq jx js jy jz aw ka dt"><span id="362c" class="kb kc hu js b fv kd ke l kf kg">Post.where('published_at &gt; ?', some_time)</span></pre><p id="7a2f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果我想添加另一个条件来检查<code class="eh jp jq jr js b">some_time</code>中的相同值，该怎么办？</p><pre class="jt ju jv jw fq jx js jy jz aw ka dt"><span id="c39a" class="kb kc hu js b fv kd ke l kf kg">Post.where('published_at &gt; ? OR saved_at &gt; ?', some_time, some_time)</span></pre><p id="ccae" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">老实说，编写这样的代码从来没有困扰过我，我也没有花一点力气去看看是否有更好的方法。</p><p id="aa7b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有一天，我和我的一个同事<a class="kh ki gr" href="https://medium.com/u/282a72573069?source=post_page-----8f541535586f--------------------------------" rel="noopener" target="_blank">普瑞蒂·库玛</a>配对，她在她的查询片段中有一些看起来像<em class="kj">符号</em>的东西，像这样——<code class="eh jp jq jr js b">published_at &gt; :date</code>。</p><p id="a5b1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我以前从未见过这样的东西，我在想这是不是某个深奥的数据库功能还是:D的什么东西</p><p id="a656" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">那时我才知道，可以在查询片段中使用命名占位符，并为<a class="ae kk" href="https://hackernoon.com/tagged/activerecord" rel="noopener ugc nofollow" target="_blank"> ActiveRecord </a>传入一个散列来解析这些值。</p><p id="7d3c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，我可以愉快地把我的声明改写成—</p><pre class="jt ju jv jw fq jx js jy jz aw ka dt"><span id="795a" class="kb kc hu js b fv kd ke l kf kg">Post.where('published_at &gt; :time OR saved_at &gt; :time', selected_time: some_time)</span></pre><p id="83e0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">人们可以很容易地看到许多小的胜利，比如—</p><ul class=""><li id="0322" class="kl km hu it b iu iv iy iz jc kn jg ko jk kp jo kq kr ks kt dt translated">如果占位符名称经过深思熟虑，较长的查询可读性会更好。降低认知开销。</li><li id="f895" class="kl km hu it b iu ku iy kv jc kw jg kx jk ky jo kq kr ks kt dt translated">你没有重复写出多次使用的变量。</li><li id="fe94" class="kl km hu it b iu ku iy kv jc kw jg kx jk ky jo kq kr ks kt dt translated">位置耦合中断。</li></ul><figure class="jt ju jv jw fq kz"><div class="bz el l di"><div class="la lb l"/></div></figure></div></div>    
</body>
</html>