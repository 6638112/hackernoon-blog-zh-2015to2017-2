<html>
<head>
<title>The sleepy for loop in Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">围棋中的死循环</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/the-sleepy-for-loop-in-go-4e6fee88c5ad?source=collection_archive---------0-----------------------#2015-10-30">https://medium.com/hackernoon/the-sleepy-for-loop-in-go-4e6fee88c5ad?source=collection_archive---------0-----------------------#2015-10-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="8951" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">虚构的例子:</strong>假设您有一个JSON文件，其中包含一组IP地址字符串，您希望每3秒钟重新加载一次这个文件，然后对每个新的IP地址做一些事情。如果文件不存在，或者包含无效的JSON，您也需要在3秒钟内重试:</p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="ju jv l"/></div></figure><p id="f73d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">上面的代码应该可以完成这项工作，但是有点烦人的是，我们需要到处重复睡眠语句。</p><p id="57ec" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是我最近开始在这种情况下使用的一种模式，我称之为“<strong class="it hv"><em class="jw"/></strong>”循环睡眠:</p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="ju jv l"/></div></figure><p id="bee8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我可能不是第一个(ab)像这样使用for循环的post语句的人，但我以前没有见过这种模式被使用得多，所以我分享它，希望它对你们中的一些人来说是有趣和有用的。</p><p id="6ad2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">稍加修改，它也可以用于有限循环。例如，如果我们只想加载一次IPs，出错时重试2次:</p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="ju jv l"/></div></figure><p id="e1b6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">无论如何，尽管我对循环的<em class="jw">sleep很满意，但是同样的代码显然也可以不用它来编写。事实上，今天早上我的同事并不喜欢它，所以我们最终满足于这样的事情:</em></p><figure class="jp jq jr js fq jt"><div class="bz el l di"><div class="ju jv l"/></div></figure><p id="2de0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我肯定更喜欢<em class="jw">sleep for loop</em>，但我对它的感觉还不够强烈，不建议强迫那些认为它很奇怪的人:)。</p><p id="c7e9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">不管怎样，你觉得怎么样？请分享您的反馈和替代想法。</p><blockquote class="jx jy jz"><p id="db09" class="ir is jw it b iu iv iw ix iy iz ja jb ka jd je jf kb jh ji jj kc jl jm jn jo hn dt translated"><a class="ae kd" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是阿妹家庭的一员。我们现在<a class="ae kd" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kd" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is jw it b iu iv iw ix iy iz ja jb ka jd je jf kb jh ji jj kc jl jm jn jo hn dt translated">要了解更多信息，请阅读我们的“关于”页面、<a class="ae kd" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书</a>上给我们点赞/发消息，或者简单地发送<a class="ae kd" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ir is jw it b iu iv iw ix iy iz ja jb ka jd je jf kb jh ji jj kc jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kd" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kd" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote></div></div>    
</body>
</html>