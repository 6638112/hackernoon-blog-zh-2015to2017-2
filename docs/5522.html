<html>
<head>
<title>Run Your Own AWS APIs on OpenShift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在OpenShift上运行自己的AWS APIs</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/run-your-own-aws-apis-on-openshift-d0acb876d5b6?source=collection_archive---------15-----------------------#2017-07-31">https://medium.com/hackernoon/run-your-own-aws-apis-on-openshift-d0acb876d5b6?source=collection_archive---------15-----------------------#2017-07-31</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><h1 id="ec91" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">TL；博士；医生</h1><p id="57d4" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">本文向您展示了如何使用<a class="ae kn" href="https://www.openshift.com/" rel="noopener ugc nofollow" target="_blank"> OpenShift </a>来设置和测试使用<a class="ae kn" href="https://github.com/localstack/localstack" rel="noopener ugc nofollow" target="_blank"> localstack </a>的<a class="ae kn" href="https://hackernoon.com/tagged/aws" rel="noopener ugc nofollow" target="_blank">AWS</a>API。</p><p id="f985" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">使用<a class="ae kn" href="https://ianmiell.github.io/shutit/" rel="noopener ugc nofollow" target="_blank"> ShutIt </a>运行该程序的示例代码可从<a class="ae kn" href="https://github.com/ianmiell/shutit-scripts/blob/master/minishift/minishift_localstack.py" rel="noopener ugc nofollow" target="_blank">这里</a>获得。</p><p id="06bd" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">这是这个过程的简要介绍:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff kt"><img src="../Images/ffb0422414d252f8cdc9e43cd02c9139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6AfkqE9XY_TRu9fa.png"/></div></div></figure><h1 id="e627" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">介绍</h1><p id="cc20" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">在本演练中，您将使用<a class="ae kn" href="https://github.com/minishift/minishift" rel="noopener ugc nofollow" target="_blank"> minishift </a>设置一个<a class="ae kn" href="https://www.openshift.com/" rel="noopener ugc nofollow" target="_blank"> OpenShift </a>系统，然后在其上的pod中运行localstack。</p><p id="a26c" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated"><a class="ae kn" href="https://www.openshift.com/" rel="noopener ugc nofollow" target="_blank"> OpenShift </a>是RedHat赞助的围绕<a class="ae kn" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>的包装器，它提供了更适合Kubernetes企业生产部署的额外功能。来自<a class="ae kn" href="https://hackernoon.com/tagged/openshift" rel="noopener ugc nofollow" target="_blank"> OpenShift </a>的许多特性已经游向上游，集成到Kubernetes中(例如基于角色的访问控制)。</p><p id="e899" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">OpenShift的开源版本叫做<a class="ae kn" href="https://www.openshift.org/" rel="noopener ugc nofollow" target="_blank"> Origin </a>。</p><h1 id="9e1a" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">本地堆栈</h1><p id="fb62" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">Localstack是一个项目，旨在为您提供尽可能完整的AWS APIs集，以便在不产生任何成本的情况下进行开发。这对于在针对AWS“真正”运行代码之前测试或尝试代码非常有用，并且可能会浪费时间和金钱。</p><p id="7217" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">Localstack在本地机器上运行以下核心云API:</p><ul class=""><li id="cc97" class="lf lg hu jr b js ko jw kp ka lh ke li ki lj km lk ll lm ln dt translated"><strong class="jr hv"> API网关</strong>位于<a class="ae kn" href="http://localhost:4567/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4567 </a></li><li id="50b9" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv">Kinesis</strong>at<a class="ae kn" href="http://localhost:4568/" rel="noopener ugc nofollow" target="_blank">http://localhost:4568</a></li><li id="62ea" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv"> DynamoDB </strong>位于<a class="ae kn" href="http://localhost:4569/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4569 </a></li><li id="ab2b" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv"> DynamoDB流</strong>位于<a class="ae kn" href="http://localhost:4570/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4570 </a></li><li id="2eef" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv">弹性搜索</strong>在<a class="ae kn" href="http://localhost:4571/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4571 </a></li><li id="047e" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv"> S3 </strong>在<a class="ae kn" href="http://localhost:4572/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4572 </a></li><li id="9718" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv">消防软管</strong>在<a class="ae kn" href="http://localhost:4573/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4573 </a></li><li id="04dc" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv">λ</strong>at<a class="ae kn" href="http://localhost:4574/" rel="noopener ugc nofollow" target="_blank">http://localhost:4574</a></li><li id="76ed" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv"> SNS </strong>在<a class="ae kn" href="http://localhost:4575/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4575 </a></li><li id="b15c" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv"> SQS </strong>在<a class="ae kn" href="http://localhost:4576/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4576 </a></li><li id="df0a" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv">红移</strong>在<a class="ae kn" href="http://localhost:4577/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4577 </a></li><li id="b2ab" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv"> ES(弹性搜索服务)</strong>在<a class="ae kn" href="http://localhost:4578/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4578 </a></li><li id="426e" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv">SES</strong>at<a class="ae kn" href="http://localhost:4579/" rel="noopener ugc nofollow" target="_blank">http://localhost:4579</a></li><li id="0e85" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv"> Route53 </strong>位于<a class="ae kn" href="http://localhost:4580/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4580 </a></li><li id="fd2a" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv">云形成</strong>在<a class="ae kn" href="http://localhost:4581/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4581 </a></li><li id="a99a" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv"> CloudWatch </strong>在<a class="ae kn" href="http://localhost:4582/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4582 </a></li></ul><p id="244e" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">目前它支持在Docker容器中运行，或者在机器上本地运行。</p><p id="a918" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">它建立在<a class="ae kn" href="https://github.com/spulec/moto" rel="noopener ugc nofollow" target="_blank"> moto </a>之上，moto 是一个反过来建立在<a class="ae kn" href="https://aws.amazon.com/sdk-for-python/" rel="noopener ugc nofollow" target="_blank"> boto </a>之上的嘲讽框架，boto 是一个python AWS SDK。</p><p id="1cfe" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated"><strong class="jr hv">在OpenShift集群中运行可以让您运行很多这样的AWS API环境。</strong>然后，您可以为每组服务创建不同的端点，并将它们相互隔离。此外，您可以更少地担心资源使用情况，因为集群调度程序会处理这些问题。</p><p id="7ced" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">然而，<strong class="jr hv">它不是开箱即用的，所以这将指导您完成使它工作所需的操作</strong>。</p><h1 id="92e3" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">开始微移？</h1><p id="9c07" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">如果您手头没有OpenShift集群，那么您可以运行minishift，这将为您提供一个运行OpenShift的独立VM。</p><p id="c34c" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">此处记录了<a class="ae kn" href="https://docs.openshift.org/latest/minishift/getting-started/installing.html" rel="noopener ugc nofollow" target="_blank">安装minishift。您需要先安装它，并成功运行“minishift start”。</a></p><p id="9e77" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">一旦您启动了minishift，您将需要<strong class="jr hv">设置您的shell，以便您能够与OpenShift服务器</strong>通信。</p><pre class="ku kv kw kx fq lt lu lv lw aw lx dt"><span id="8fc4" class="ly is hu lu b fv lz ma l mb mc">$ eval $(minishift oc-env)</span></pre><h1 id="139b" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">更改默认的安全上下文约束</h1><p id="5ae6" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">安全上下文约束(scc)是一个OpenShift概念，允许对Docker容器的功能进行更细粒度的控制。</p><p id="d84a" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">它们控制seLinux上下文，可以从正在运行的容器中删除功能，可以确定pod可以作为哪个用户运行，等等。</p><p id="53b0" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">为了让它运行，您将更改默认的“受限”scc，但是您可以创建一个单独的scc并将其应用到一个特定的项目。要更改“受限”scc，您需要<strong class="jr hv">成为集群管理员</strong>:</p><pre class="ku kv kw kx fq lt lu lv lw aw lx dt"><span id="3177" class="ly is hu lu b fv lz ma l mb mc">$ oc login -u system:admin</span></pre><p id="3e03" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">然后，您需要使用以下命令编辑受限scc:</p><pre class="ku kv kw kx fq lt lu lv lw aw lx dt"><span id="ed1b" class="ly is hu lu b fv lz ma l mb mc">$ oc edit scc restricted</span></pre><p id="16bd" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">你会看到受限的定义</p><p id="11d1" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated"><strong class="jr hv">此时，你需要做两件事:</strong></p><ul class=""><li id="4c59" class="lf lg hu jr b js ko jw kp ka lh ke li ki lj km lk ll lm ln dt translated"><strong class="jr hv">允许容器以任何用户身份运行(在本例中为“root”)</strong></li><li id="65b8" class="lf lg hu jr b js lo jw lp ka lq ke lr ki ls km lk ll lm ln dt translated"><strong class="jr hv">防止scc将您的能力限制为setuid和setgid </strong></li></ul><h2 id="3ddf" class="ly is hu bd it md me mf ix mg mh mi jb ka mj mk jf ke ml mm jj ki mn mo jn mp dt translated">1)允许RunAsAny</h2><p id="523d" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">默认情况下，localstack容器以root用户身份运行。</p><p id="ad17" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">出于安全考虑，OpenShift默认不允许容器以root身份运行。相反，它在一个很大的范围内随机选择一个UID，并以此运行。</p><p id="04aa" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">为了简化问题，并允许localstack容器以root用户身份运行，<strong class="jr hv">更改行</strong>:</p><pre class="ku kv kw kx fq lt lu lv lw aw lx dt"><span id="fa00" class="ly is hu lu b fv lz ma l mb mc">runAsUser: <br/> type: MustRunAsRange</span></pre><p id="6313" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">阅读:</p><pre class="ku kv kw kx fq lt lu lv lw aw lx dt"><span id="2fc8" class="ly is hu lu b fv lz ma l mb mc">runAsUser: <br/> type: RunAsAny</span></pre><p id="f518" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">这允许容器以任何用户的身份运行。</p><h2 id="c7f7" class="ly is hu bd it md me mf ix mg mh mi jb ka mj mk jf ke ml mm jj ki mn mo jn mp dt translated">2)允许SETUID和SETGID功能</h2><p id="8df1" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">当localstack启动时，它需要成为另一个用户来启动elasticache。elasticache服务不会作为根用户启动。</p><p id="c1a6" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">为了解决这个问题，localstack su向容器中的localstack用户发出启动命令。</p><p id="f49a" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">因为“受限”scc明确禁止更改您的用户或组id的操作，所以您需要取消这些限制。<strong class="jr hv">通过删除以下行来执行此操作:</strong></p><pre class="ku kv kw kx fq lt lu lv lw aw lx dt"><span id="7077" class="ly is hu lu b fv lz ma l mb mc">- SETUID <br/> - SETGID</span></pre><p id="52b3" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">一旦完成这两个步骤，<strong class="jr hv">保存文件</strong>。</p><h1 id="8ef5" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">记下主持人</h1><p id="7afc" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">如果你跑步:</p><pre class="ku kv kw kx fq lt lu lv lw aw lx dt"><span id="7fbf" class="ly is hu lu b fv lz ma l mb mc">$ minishift console --machine-readable | grep HOST | sed 's/^HOST=\(.*\)/\1/'</span></pre><p id="e6dc" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">您将获得可以从您的机器访问minishift实例的主机。记下这一点，因为你以后需要替换它。</p><h1 id="05d0" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">展开分离舱</h1><p id="d6df" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">部署localstack就像运行以下命令一样简单:</p><pre class="ku kv kw kx fq lt lu lv lw aw lx dt"><span id="2b9d" class="ly is hu lu b fv lz ma l mb mc">$ oc new-app localstack/localstack --name="localstack"</span></pre><p id="a5c0" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">这将获取localstack/localstack映像，并围绕它创建一个OpenShift应用程序，设置内部服务(基于other文件中公开的端口)，在pod中运行容器，以及各种其他管理任务。</p><h1 id="9cad" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">创建路线</h1><p id="44d7" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">如果您想从外部访问服务，您需要创建OpenShift路由，它创建一个外部地址来访问OpenShift网络中的服务。</p><p id="e32f" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">例如，要为sqs服务创建路由，请创建如下文件:</p><pre class="ku kv kw kx fq lt lu lv lw aw lx dt"><span id="2ec6" class="ly is hu lu b fv lz ma l mb mc">apiVersion: v1 <br/>items: <br/>- apiVersion: v1 <br/>  kind: Route <br/>  metadata: <br/>    annotations: <br/>      openshift.io/host.generated: "true" <br/>    name: sqs <br/>    selfLink: /oapi/v1/namespaces/test/routes/sqs <br/>  spec: <br/>    host: sqs-test.HOST.nip.io <br/>    port: <br/>      targetPort: 4576-tcp <br/>    to: <br/>      kind: Service <br/>      name: localstack <br/>      weight: 100 <br/>    wildcardPolicy: None <br/>  status: <br/>    ingress: <br/>    - conditions: <br/>      - lastTransitionTime: 2017-07-28T17:49:18Z <br/>        status: "True" <br/>        type: Admitted <br/>      host: sqs-test.HOST.nip.io <br/>      routerName: router <br/>      wildcardPolicy: None <br/>kind: List <br/>metadata: {} <br/>resourceVersion: "" <br/>selfLink: ""</span></pre><p id="e820" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">然后使用以下内容创建路线:</p><pre class="ku kv kw kx fq lt lu lv lw aw lx dt"><span id="d0d9" class="ly is hu lu b fv lz ma l mb mc">$ oc create -f</span></pre><p id="73f8" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">有关服务及其端口的列表，请参见上文。</p><p id="2666" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated"><strong class="jr hv">如果您的OpenShift集群</strong>上运行着多个localstacks，您可能希望在主机名前面加上实例的唯一名称，例如</p><pre class="ku kv kw kx fq lt lu lv lw aw lx dt"><span id="1a2b" class="ly is hu lu b fv lz ma l mb mc">host: localstackenv1-sqs-test.HOST.nip.io</span></pre><h1 id="adf7" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">。看看你的工作</h1><p id="fa5b" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">运行“oc get all”查看您在OpenShift项目中创建了什么:</p><pre class="ku kv kw kx fq lt lu lv lw aw lx dt"><span id="432f" class="ly is hu lu b fv lz ma l mb mc">$ oc get all<br/>NAME DOCKER REPO TAGS UPDATED<br/>is/localstack 172.30.1.1:5000/myproject/localstack latest 15 hours ago</span><span id="349e" class="ly is hu lu b fv mq ma l mb mc">NAME REVISION DESIRED CURRENT TRIGGERED BY<br/>dc/localstack 1 1 1 config,image(localstack:latest)</span><span id="2ac0" class="ly is hu lu b fv mq ma l mb mc">NAME DESIRED CURRENT READY AGE<br/>rc/localstack-1 1 1 1 15h</span><span id="1b18" class="ly is hu lu b fv mq ma l mb mc">NAME HOST/PORT PATH SERVICES PORT TERMINATION WILDCARD<br/>routes/apigateway apigateway-test.192.168.64.2.nip.io localstack 4567-tcp None<br/>routes/cloudformation cloudformation-test.192.168.64.2.nip.io localstack 4581-tcp None<br/>routes/cloudwatch cloudwatch-test.192.168.64.2.nip.io localstack 4582-tcp None<br/>routes/dynamodb dynamodb-test.192.168.64.2.nip.io localstack 4569-tcp None<br/>routes/dynamodbstreams dynamodbstreams-test.192.168.64.2.nip.io localstack 4570-tcp None<br/>routes/es es-test.192.168.64.2.nip.io localstack 4578-tcp None<br/>routes/firehose firehose-test.192.168.64.2.nip.io localstack 4573-tcp None<br/>routes/kinesis kinesis-test.192.168.64.2.nip.io localstack 4568-tcp None<br/>routes/lambda lambda-test.192.168.64.2.nip.io localstack 4574-tcp None<br/>routes/redshift redshift-test.192.168.64.2.nip.io localstack 4577-tcp None<br/>routes/route53 route53-test.192.168.64.2.nip.io localstack 4580-tcp None<br/>routes/s3 s3-test.192.168.64.2.nip.io localstack 4572-tcp None<br/>routes/ses ses-test.192.168.64.2.nip.io localstack 4579-tcp None<br/>routes/sns sns-test.192.168.64.2.nip.io localstack 4575-tcp None<br/>routes/sqs sqs-test.192.168.64.2.nip.io localstack 4576-tcp None<br/>routes/web web-test.192.168.64.2.nip.io localstack 8080-tcp None</span><span id="3e56" class="ly is hu lu b fv mq ma l mb mc">NAME CLUSTER-IP EXTERNAL-IP PORT(S) AGE<br/>svc/localstack 172.30.187.65  4567/TCP,4568/TCP,4569/TCP,4570/TCP,4571/TCP,4572/TCP,4573/TCP,4574/TCP,4575/TCP,4576/TCP,4577/TCP,4578/TCP,4579/TCP,4580/TCP,4581/TCP,4582/TCP,8080/TCP 15h</span><span id="5ac9" class="ly is hu lu b fv mq ma l mb mc">NAME READY STATUS RESTARTS AGE<br/>po/localstack-1-hnvpw 1/1 Running 0 15h</span></pre><p id="2517" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">创建的每条路由现在都可以作为AWS服务访问，以测试您的代码。</p><h1 id="eb5e" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">获取服务</h1><p id="48e9" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">现在可以从您的主机点击服务，就像这样:</p><pre class="ku kv kw kx fq lt lu lv lw aw lx dt"><span id="4dfc" class="ly is hu lu b fv lz ma l mb mc">$ aws --endpoint-url=http://kinesis-test.192.168.64.2.nip.io kinesis list-streams<br/>{<br/> "StreamNames": []<br/>}</span></pre><p id="7e45" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">例如，要创建运动流:</p><pre class="ku kv kw kx fq lt lu lv lw aw lx dt"><span id="1021" class="ly is hu lu b fv lz ma l mb mc">$ aws --endpoint-url=http://kinesis-test.192.168.64.2.nip.io kinesis create-stream --stream-name teststream --shard-count 2<br/>$ aws --endpoint-url=http://kinesis-test.192.168.64.2.nip.io kinesis list-streams<br/>{<br/> "StreamNames": [<br/> "teststream"<br/> ]<br/>}</span></pre><h1 id="521f" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">这是我的书的摘录</h1><p id="e7a9" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">这是第二版<a class="ae kn" href="https://www.manning.com/books/docker-in-practice-second-edition?a_aid=zwischenzugs&amp;a_bid=550032fc" rel="noopener ugc nofollow" target="_blank"> Docker in Practice </a>的一个进展中的工作</p><p id="8525" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated"><a class="ae kn" href="https://www.manning.com/books/docker-in-practice-second-edition?a_aid=zwischenzugs&amp;a_bid=550032fc" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hv"> <em class="mr">代码:39miell </em> </strong> </a>享受39折优惠</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff ms"><img src="../Images/35b6c17d12e34b8a828df806daf483e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/0*f6hiuKG19EfpYgJd."/></div></div></figure><figure class="ku kv kw kx fq ky"><div class="bz el l di"><div class="mt mu l"/></div></figure></div></div>    
</body>
</html>