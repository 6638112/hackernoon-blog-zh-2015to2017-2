<html>
<head>
<title>Out Of Order Keys in ES6 Objects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ES6对象中的乱序键</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/out-of-order-keys-in-es6-objects-d5cede7dc92e?source=collection_archive---------4-----------------------#2017-02-28">https://medium.com/hackernoon/out-of-order-keys-in-es6-objects-d5cede7dc92e?source=collection_archive---------4-----------------------#2017-02-28</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/b6d68bbced79de2ccdd53cf7c0ff4c36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LGwMu58JygWpAlf8Srux3A.png"/></div></div></figure><p id="d43a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最近在一篇关于JavaScript <a class="ae ka" href="https://hackernoon.com/tagged/es6" rel="noopener ugc nofollow" target="_blank"> ES6 </a> Maps的文章中，我写了关于属性键在遍历过程中的排序。在ES6之前的JavaScript中，期望键的顺序与它们被添加时的顺序相同是一个长期以来的错误假设。</p><p id="cd5f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ES6引入了属性键排序，在规范中加入了对键排序方式的预期。键本质上是由<a class="ae ka" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>排序的，然而，键可能并不总是像你所期望的那样排序。</p><p id="64b3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我建议，ES6引入这个标准可能不是开始编写依赖于预期顺序的代码的理由。当然，在ES6中，可以使用地图作为数据结构。</p><div class="kb kc fm fo kd ke"><a href="https://hackernoon.com/what-you-should-know-about-es6-maps-dc66af6b9a1e" rel="noopener  ugc nofollow" target="_blank"><div class="kf ab ej"><div class="kg ab kh cl cj ki"><h2 class="bd hv fv z el kj eo ep kk er et ht dt translated">关于ES6地图你应该知道什么</h2><div class="kl l"><h3 class="bd b fv z el kj eo ep kk er et ek translated">JavaScript ES6引入了一种新的数据结构，称为maps。地图被设计为使用对象的替代方案…</h3></div><div class="km l"><p class="bd b gc z el kj eo ep kk er et ek translated">hackernoon.com</p></div></div><div class="kn l"><div class="ko l kp kq kr kn ks ja ke"/></div></div></a></div><p id="8c95" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">基本上，这就是问题所在。您可以这样做:</p><pre class="kt ku kv kw fq kx ky kz la aw lb dt"><span id="6e58" class="lc ld hu ky b fv le lf l lg lh">x = {zzz:1}<br/>// Object {zzz: 1}</span><span id="d6b0" class="lc ld hu ky b fv li lf l lg lh">x.a = 2<br/>// Object {zzz: 1, a: 2}</span><span id="e3ed" class="lc ld hu ky b fv li lf l lg lh">x[window] = 3<br/>// Object {zzz: 1, a: 2, [object Window]: 3}</span><span id="ea5f" class="lc ld hu ky b fv li lf l lg lh">x['0'] = 4<br/>// Object {0: 4, zzz: 1, a: 2, [object Window]: 3}</span><span id="8538" class="lc ld hu ky b fv li lf l lg lh">Object.keys(x)<br/>// ["0", "zzz", "a", "[object Window]"]</span></pre><p id="cbb7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在现实世界中，您可能不会遇到这个例子，但是您也不能依赖于这些键是按照它们被添加的顺序列出的，或者依赖于系统对这些键的一致排序。</p><p id="d593" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">根据规范，<em class="lj">没有规定枚举属性的机制和顺序</em>。</p><div class="kb kc fm fo kd ke"><a href="http://www.ecma-international.org/ecma-262/6.0/#sec-ordinary-object-internal-methods-and-internal-slots-enumerate" rel="noopener  ugc nofollow" target="_blank"><div class="kf ab ej"><div class="kg ab kh cl cj ki"><h2 class="bd hv fv z el kj eo ep kk er et ht dt translated">ECMAScript 2015语言规范- ECMA-262第6版</h2><div class="kl l"><h3 class="bd b fv z el kj eo ep kk er et ek translated">本软件由ECMA国际“按原样”提供，并有任何明示或暗示的担保，包括但不限于…</h3></div><div class="km l"><p class="bd b gc z el kj eo ep kk er et ek translated">www.ecma-international.org</p></div></div><div class="kn l"><div class="lk l kp kq kr kn ks ja ke"/></div></div></a></div><p id="9a01" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当然，您可以花时间研究规范，以及不同类型的枚举的不同含义，或者像过去一样，不要创建依赖于键的顺序的代码。</p><p id="99ae" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">犯一些错误并不难。在这里，我们看到我们没有得到输入键的顺序，而是系统对它们进行排序。整数，然后正常的字母排序，然后符号。</p><pre class="kt ku kv kw fq kx ky kz la aw lb dt"><span id="e5b1" class="lc ld hu ky b fv le lf l lg lh">o = {a:0, 2:1, 1:2, b:2, ['zz']:4, window:5}<br/>// Object {1: 2, 2: 1, a: 0, b: 2, zz: 4, window: 5}</span><span id="baae" class="lc ld hu ky b fv li lf l lg lh">Object.keys(o)<br/>// ["1", "2", "a", "b", "zz", "window"]</span></pre><p id="0755" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是在Chrome 56里。然而，正如ES6中的属性排序所预期的，这些键都是字符串，即使ES6调用非字符串键类型。这些键是字符串，按字母顺序排序，但不是。这里发生了一点事情。</p><p id="2ed7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">因此，一个选择是不要对普通的旧JS对象中的键排序做太多假设，而是继续编写不依赖于它的代码，或者在ES6中使用map，这非常适合这个目的。</p><figure class="kt ku kv kw fq iv fe ff paragraph-image"><div class="fe ff ll"><img src="../Images/5fffb69a9b2ae75a8cf1131068db3962.png" data-original-src="https://miro.medium.com/v2/resize:fit:142/format:webp/1*V2folm4Kcu00UJcZXQWKwg.png"/></div><figcaption class="lm ln fg fe ff lo lp bd b be z ek">Like these articles? Please Recommend Below. Thanks.</figcaption></figure><div class="kt ku kv kw fq ab cb"><figure class="lq iv lr ls lt lu lv paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="lq iv lr ls lt lu lv paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="lq iv lr ls lt lu lv paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="lw lx ly"><p id="f922" class="jc jd lj je b jf jg jh ji jj jk jl jm lz jo jp jq ma js jt ju mb jw jx jy jz hn dt translated"><a class="ae ka" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae ka" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae ka" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae ka" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jc jd lj je b jf jg jh ji jj jk jl jm lz jo jp jq ma js jt ju mb jw jx jy jz hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ka" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ka" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kt ku kv kw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mc"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="kt ku kv kw fq iv"><div class="bz el l di"><div class="md me l"/></div></figure></div></div>    
</body>
</html>