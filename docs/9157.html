<html>
<head>
<title>Creating a Better User Experience with Regular Expressions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用正则表达式创建更好的用户体验</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/creating-a-better-user-experience-with-regular-expressions-f2bbf6e42c87?source=collection_archive---------16-----------------------#2017-12-28">https://medium.com/hackernoon/creating-a-better-user-experience-with-regular-expressions-f2bbf6e42c87?source=collection_archive---------16-----------------------#2017-12-28</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/c28ac8167594146be2e7d3165179fc77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n9iF6TZqBQRGhkvxmZu3Yw.png"/></div></div></figure><div class=""/><p id="8288" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我最近开始创建一个网站，用户可以在那里输入城市和州或邮政编码，并返回该位置的天气结果。我意识到，在这样做的过程中，提炼用户输入的一些困难例如，从用户那里，我需要得到一个城市&amp;州或邮政编码。我可以简单地做这样的事情:</p><figure class="kb kc kd ke fq hw fe ff paragraph-image"><div class="fe ff ka"><img src="../Images/0ef9f15d68bd2fc044385e70ecfa9f09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*0KkwEV95DOaARJzrhr-j6Q.png"/></div></figure><p id="7b4f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一个简单的搜索，有三个独立的输入和漂亮的小标签。然而，从用户体验的角度来看，大多数用户宁愿不使用3个独立的输入。所以我们只要改变它，对吗？我们将制作一个搜索栏，让用户将信息输入到一个搜索栏中。够简单了吧？我们可以从一个搜索栏中找到城市、州和邮政编码。如果用户像这样格式化他们的输入会怎么样:</p><figure class="kb kc kd ke fq hw fe ff paragraph-image"><div class="fe ff kf"><img src="../Images/b9ae3121caf5439d5eeb0b5dcffc836a.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*iSXylYZW3d5LblC_L5BIeA.png"/></div></figure><p id="6743" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果每个用户都以这种格式输入他的响应，我们可以简单地将它放入一个数组中，并根据数组中每个元素的位置改进响应。[0]将是城市，[1]将是州，等等。但是，如果响应的格式如下:</p><figure class="kb kc kd ke fq hw fe ff paragraph-image"><div class="fe ff kf"><img src="../Images/be03c98ba92f6b372ea3e47dc00ef165.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*ijGReuNwyemVSZOErfUatQ.png"/></div></figure><p id="55cf" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">或者甚至像这样:</p><figure class="kb kc kd ke fq hw fe ff paragraph-image"><div class="fe ff kf"><img src="../Images/6177806fef239ddc159e278433d55868.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*MDfXB05FGyXaAH258QaxKg.png"/></div></figure><p id="bb71" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">关键是，没有办法保证用户会做什么。所以我们需要做的是写一些逻辑，无论输入什么，找出州和城市，并把两者分开。由于邮政编码是可选的，因为用户可以选择城市和国家或邮政编码，我们更喜欢邮政编码，因为它更具体。为此，我们可以简单地写一个循环输入的语句，并说，“好的，如果你看到一个包含5个或更多数字的字符串，隔离它并去掉所有其他的。”</p><p id="5ad2" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">很简单。但是让我们关注如何隔离城市和州，如果这是用户决定使用的。</p><p id="6d60" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以下是我的思考过程:州将更容易被隔离，因为州和地区只有59种可能性。如果我们有一个包含所有59个州的数组，我们可以将用户输入与该数组进行匹配，如果匹配，我们将使用该数组作为我们的州。稍后我将对其进行改进，对每个输入使用两个字母的缩写，但我们稍后会谈到这一点。</p><p id="4a95" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来，城市。这很棘手，因为一些州和城市包含相似或相同的单词，如，“纽约，纽约州”，“阿拉巴马州阿拉巴马市”，“印第安纳波利斯，印第安纳州”，等等。我们的代码很容易混淆哪个是州，哪个是城市，如果我们不小心的话，我们很容易返回给用户一些他们不期望的东西。</p><p id="b45a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了避免这种情况，我还将获得一个JSON对象数组，其中包含与每个州相关联的所有城市。这样，一旦代码最终隔离了该州，我就可以简单地获取其余的数据，并查看它是否与该州的城市数组中的任何内容相匹配。</p><p id="16b4" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后，我需要做一些重新格式化。我使用的API需要城市和州的格式如下:</p><p id="0f52" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">加州旧金山，</p><p id="6543" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所以一旦我们弄清楚了什么是什么，我们就可以按照我们需要的方式格式化数据。让我们开始吧。首先是城市/州JSON对象。这个文件将是我在这里使用的最大的文件，所以一旦页面加载，在用户开始输入任何内容之前，我想在后台加载它以节省时间。我在github上找到了一个我喜欢的JSON对象，它拥有大部分数据，但我重新格式化了它，所以它更接近我想要的。这是链接，如果你想下载并跟随:<a class="ae kg" href="https://www.dropbox.com/s/uvmjnoql2lo5sqk/weather.json?dl=0" rel="noopener ugc nofollow" target="_blank">https://www.dropbox.com/s/uvmjnoql2lo5sqk/weather.json?dl=0</a></p><p id="cced" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我已经将这个文件上传到我的mlab数据库，现在我将使用fetch在文档加载后立即加载它:</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="1310" class="km kn if ki b fv ko kp l kq kr">fetch('<a class="ae kg" href="https://api.mlab.com/api/1/databases/ethanscuteweatherapp/collections/states?&amp;l=41000&amp;apiKey=_ehmfqV-bs1PDWki2WNFVMsGmXGQuk77').then(function(response)" rel="noopener ugc nofollow" target="_blank">https://ethans_cute_web_app_api_blah_blah_blah').then(function(response)</a> {<br/>          if (response.status != 200) {<br/>            window.alert("Oopsie.  You must have done something wrong.");<br/>            return;<br/>          }</span><span id="e2b3" class="km kn if ki b fv ks kp l kq kr">response.json().then(function(data) {</span><span id="4a4e" class="km kn if ki b fv ks kp l kq kr">let states = data;</span></pre><p id="06f1" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">请记住变量“states”，因为我们将先不讨论它，稍后再来讨论它。我们只是用这个来找出城市。</p><p id="d27c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在让我们弄清楚状态。</p><p id="441f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先，我保存了一些变量，以后会用到。</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="5708" class="km kn if ki b fv ko kp l kq kr">let input = document.getElementById('input');<br/>    let current = document.getElementById('current');</span></pre><p id="32af" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来，我将启动我的函数，开始获取和提炼用户输入。</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="3635" class="km kn if ki b fv ko kp l kq kr">current.onclick = currentAPI;    <br/>    <br/>    function currentAPI() {<br/>      <br/>      let inputValue = input.value;</span></pre><p id="23e2" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我对此的想法是，用户可能要么输入整个州，要么输入两个字符的缩写。所以我要寻找这两种可能性。首先，我会寻找两个字符的缩写。这里是所有59个州和地区缩写的数组。它将直接进入我们的currentAPI函数:</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="3b0d" class="km kn if ki b fv ko kp l kq kr">let stateAbbr = [ "AK",<br/>                      "AL",<br/>                      "AR",<br/>                      "AS",<br/>                      "AZ",<br/>                      "CA",<br/>                      "CO",<br/>                      "CT",<br/>                      "DC",<br/>                      "DE",<br/>                      "FL",<br/>                      "GA",<br/>                      "GU",<br/>                      "HI",<br/>                      "IA",<br/>                      "ID",<br/>                      "IL",<br/>                      "IN",<br/>                      "KS",<br/>                      "KY",<br/>                      "LA",<br/>                      "MA",<br/>                      "MD",<br/>                      "ME",<br/>                      "MI",<br/>                      "MN",<br/>                      "MO",<br/>                      "MS",<br/>                      "MT",<br/>                      "NC",<br/>                      "ND",<br/>                      "NE",<br/>                      "NH",<br/>                      "NJ",<br/>                      "NM",<br/>                      "NV",<br/>                      "NY",<br/>                      "OH",<br/>                      "OK",<br/>                      "OR",<br/>                      "PA",<br/>                      "PR",<br/>                      "RI",<br/>                      "SC",<br/>                      "SD",<br/>                      "TN",<br/>                      "TX",<br/>                      "UT",<br/>                      "VA",<br/>                      "VI",<br/>                      "VT",<br/>                      "WA",<br/>                      "WI",<br/>                      "WV",<br/>                      "WY"]</span></pre><p id="1442" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来，我们将检查输入中是否有缩写。我们将通过循环输入，把它分成单独的文本块来实现。然后我们将循环遍历每一个，看看是否有两个字符长的。如果是这样，我们将把它与我们的州缩写进行比较。如果有匹配，我们将把它保存为一个变量。我是这样写这个逻辑的:</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="6347" class="km kn if ki b fv ko kp l kq kr">let possibleState = [];<br/>      for (var i = 0; i &lt; text2.length; i++) {<br/>        if (text2[i].length == 2) {<br/>          possibleState.push(text2[i])<br/>        }<br/>      }</span></pre><p id="aeb1" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所以在这里，如果用户输入任何两个字符串，它现在在我们的“possibleState”数组中。如果没有，我们的数组是空的。我们将继续假设那里有一些东西，将其转换为一个字符串，并根据我们的州缩写数组进行测试。</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="234b" class="km kn if ki b fv ko kp l kq kr">let state2 = possibleState.toString();<br/>      <br/>      let uppercaseState = state2.toUpperCase();<br/>      <br/>      let confirmedState = "";<br/>      for (var i = 0; i &lt; stateAbbr.length; i++) {<br/>        if (stateAbbr[i] == uppercaseState) {<br/>          confirmedState = stateAbbr[i];<br/>        }<br/>      }</span></pre><p id="2322" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们走吧。我在这里做的是，取我们的possibleState数组，它可能有一个州的缩写，我把数组中的任何东西都转换成了一个字符串。接下来，我把它转换成大写，因为我们用来比较的数组是大写的。我们想确保我们是在比较苹果和苹果。然后我在stateAbbr数组中循环，如果数组中的任何状态与变量uppercaseState中的可能状态匹配，我们会将其定义为变量confirmedState，因为现在我们已经确认这很可能是一个状态，如果那里有任何数据的话。现在，如果用户没有输入任何两个字符串，仍然可能什么都没有。如果那里有什么东西，那就是我们要用的那个。如果没有，我们将需要搜索一个被打出的州。所以我要做的是继续寻找一个打出的州名。然后我会创建一个名为“myState”的变量。我会说，“如果possibleState数组中有东西，那么myState就是两个字母的缩写，如果没有，那么它就是被打印出来的状态。”下面是我如何搜索打出的州:</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="5119" class="km kn if ki b fv ko kp l kq kr">let statesArray = ["alaska",<br/>                  "alabama",<br/>                  "arkansas",<br/>                  "americansamoa",<br/>                  "arizona",<br/>                  "california",<br/>                  "colorado",<br/>                  "connecticut",<br/>                  "districtofcolumbia",<br/>                  "delaware",<br/>                  "florida",<br/>                  "georgia",<br/>                  "guam",<br/>                  "hawaii",<br/>                  "iowa",<br/>                  "idaho",<br/>                  "illinois",<br/>                  "indiana",<br/>                  "kansas",<br/>                  "kentucky",<br/>                  "louisiana",<br/>                  "massachusetts",<br/>                  "maryland",<br/>                  "maine",<br/>                  "michigan",<br/>                  "minnesota",<br/>                  "missouri",<br/>                  "mississippi",<br/>                  "montana",<br/>                  "northcarolina",<br/>                  "northdakota",<br/>                  "nebraska",<br/>                  "newhampshire",<br/>                  "newjersey",<br/>                  "newmexico",<br/>                  "nevada",<br/>                  "newyork",<br/>                  "ohio",<br/>                  "oklahoma",<br/>                  "oregon",<br/>                  "pennsylvania",<br/>                  "puertorico",<br/>                  "rhodeisland",<br/>                  "southcarolina",<br/>                  "southdakota",<br/>                  "tennessee",<br/>                  "texas",<br/>                  "utah",<br/>                  "virginia",<br/>                  "virginislands",<br/>                  "vermont",<br/>                  "washington",<br/>                  "wisconsin",<br/>                  "westvirginia",<br/>                  "wyoming"];</span></pre><p id="068d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">类似于缩写，我有一个所有小写状态的数组，中间没有空格。</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="2ac9" class="km kn if ki b fv ko kp l kq kr">let text = inputValue.replace(/\W+/g, "");<br/>      <br/>      <br/>      let inputLowerCase = text.toLowerCase();</span><span id="0c20" class="km kn if ki b fv ks kp l kq kr">      let inputUpperCase = text.toUpperCase();</span></pre><p id="fc1e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这里，我取出了所有的用户输入，去掉了所有的空格和逗号等字符。然后我把它全部转换成小写字符。现在我需要比较两者。</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="5333" class="km kn if ki b fv ko kp l kq kr">let myState = "";<br/>              <br/>  for (var j = 0; j &lt; inputLowerCase.length; j++) {<br/>    for (var i = 0; i &lt; statesArray.length; i++) {<br/>      if (inputLowerCase.includes(statesArray[i])) {<br/>        myState = statesArray[i];<br/>      }<br/>        }<br/>      }</span></pre><p id="8eb8" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">那里。我在比较两者。请记住，我们的输入可能包含许多不同的内容，所以我们只是循环查看states数组中的任何一项是否包含在输入的总字符串中。因此，如果输入包含states数组中的任何一项，我们就会得到它。最后，我们需要决定是否使用缩写，如果用户给了我们一个缩写的话，或者使用输入的状态，如果用户给了我们一个缩写的话。下面是我检查的方法:</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="c8db" class="km kn if ki b fv ko kp l kq kr">let stateToUse = "";<br/>      if (possibleState.length == 0) {<br/>        stateToUse = myState;<br/>      } else {<br/>        stateToUse = confirmedState;<br/>      }</span></pre><p id="ac90" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">好吧，那么现在，不管怎样，我们已经得到了我们的状态。但是，如果state不是缩写，我想把它转换成缩写。我们知道无论“stateToUse”是什么，它要么是一个缩写，要么是打出的状态，小写，不带空格。</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="f437" class="km kn if ki b fv ko kp l kq kr">let stateMatch = {"alaska": "AK",<br/>                  "alabama": "AL",<br/>                  "arkansas": "AR",<br/>                  "americansamoa": "AS",<br/>                  "arizona": "AZ",<br/>                  "california": "CA",<br/>                  "colorado": "CO",<br/>                  "connecticut": "CT",<br/>                  "district of columbia": "DC",<br/>                  "delaware": "DE",<br/>                  "florida": "FL",<br/>                  "georgia": "GA",<br/>                  "guam": "GU",<br/>                  "hawaii": "HI",<br/>                  "iowa": "IA",<br/>                  "idaho": "ID",<br/>                  "illinois": "IL",<br/>                  "indiana": "IN",<br/>                  "kansas": "KS",<br/>                  "kentucky": "KY",<br/>                  "louisiana": "LA",<br/>                  "massachusetts": "MA",<br/>                  "maryland": "MD",<br/>                  "maine": "ME",<br/>                  "michigan": "MI",<br/>                  "minnesota": "MN",<br/>                  "missouri": "MO",<br/>                  "mississippi": "MS",<br/>                  "montana": "MT",<br/>                  "northcarolina": "NC",<br/>                  "northdakota": "ND",<br/>                  "nebraska": "NE",<br/>                  "newhampshire": "NH",<br/>                  "newjersey": "NJ",<br/>                  "newmexico": "NM",<br/>                  "nevada": "NV",<br/>                  "newyork": "NY",<br/>                  "ohio": "OH",<br/>                  "oklahoma": "OK",<br/>                  "oregon": "OR",<br/>                  "pennsylvania": "PA",<br/>                  "puertorico": "PR",<br/>                  "rhodeisland": "RI",<br/>                  "southcarolina": "SC",<br/>                  "southdakota": "SD",<br/>                  "tennessee": "TN",<br/>                  "texas": "TX",<br/>                  "utah": "UT",<br/>                  "virginia": "VA",<br/>                  "virginislands": "VI",<br/>                  "vermont": "VT",<br/>                  "washington": "WA",<br/>                  "wisconsin": "WI",<br/>                  "westvirginia": "WV",<br/>                  "wyoming": "WY",<br/>                };<br/>    var re = new RegExp(Object.keys(stateMatch).join("|"), "gi");<br/>    keyWord = stateToUse.replace(re, function(matched) {<br/>      return stateMatch[matched.toLowerCase()];<br/>    });<br/>    <br/>    let state3 = keyWord.toUpperCase();</span></pre><p id="cf2e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所以在这里，我把第二种可能性转换成缩写。在这一点上，不管用户输入的是什么，不管它是如何大写的，或者即使它们在字符之间包含空格。不管怎样，在这一点上，我们有他们州的两个字母缩写。完美。现在是棘手的部分。这座城市。</p><p id="360a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">还记得我们首先加载的JSON数据吗？这些数据看起来是这样的:</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="55c4" class="km kn if ki b fv ko kp l kq kr">{</span><span id="6b56" class="km kn if ki b fv ks kp l kq kr">"state":"AL",</span><span id="3bd9" class="km kn if ki b fv ks kp l kq kr">"city":["ABBEVILLE", "ADAMSVILLE", "etc", "etc", "etc"]<br/>}</span></pre><p id="6700" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">每个州都有。基本上每个城市，每个州，数据都在一个叫做“州”的变量里。我将这样开始循环:</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="4a31" class="km kn if ki b fv ko kp l kq kr">let myCity = "";<br/>  for (var i = 0; i &lt; states.length; i++) {<br/>    if (states[i].state == state3) {<br/>      for (var k = 0; k &lt; states[i].city.length; k++) {<br/>        if(text4.includes(states[i].city[k])) {<br/>          myCity = states[i].city[k];<br/>        }<br/>      }<br/>    }<br/>  }</span></pre><p id="3459" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我使用了一个嵌套的for循环来测试我们的缩写状态和JSON数组中的状态，看看是否匹配。一旦我们得到一个匹配，我们就把它保存在变量“myCity”中</p><p id="e94e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在我们需要格式化它。如果城市是“夏洛特”，我们希望它给我们第一个字母大写的“夏洛特”。但是如果我们有“旧金山”呢？我们希望它返回这个:“San_Francisco”，每个单词的第一个字母大写，用下划线隔开。</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="c716" class="km kn if ki b fv ko kp l kq kr">let twoCity = myCity.toLowerCase();<br/>  let threeCity = [];<br/>  let string3 = [];<br/>    for (var i = 0; i &lt; twoCity.length; i++) {<br/>      if (twoCity[i] == " ") {<br/>        let newCity = twoCity.split(" ");<br/>        threeCity.push(newCity);<br/>    } else if (twoCity.includes(" ") == false &amp;&amp; threeCity.includes(twoCity) == false) {<br/>      let newCity2 = twoCity;<br/>      threeCity.push(newCity2);<br/>    }<br/>  }</span></pre><p id="cc2f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先，我们将整个字符串转换成小写，然后用空格分割。这样我们现在就有了一个数组，“threeCity”。数组中是我们的城市名。我还在for循环的if语句中创建了两个场景。一个是两个单词的城市，说，“如果输入字符串包含一个空格，做点什么。”然后，第二个场景是我们正在处理一个单词的城市，所以我说，“如果输入不包含空格。”如果城市名不止一个单词，每个单词都是它自己的数组项。</p><pre class="kb kc kd ke fq kh ki kj kk aw kl dt"><span id="a779" class="km kn if ki b fv ko kp l kq kr">let string4 = [];<br/>for (var i = 0; i &lt; threeCity.length; i++) {<br/>  String.prototype.capitalize = function() {<br/>    return this.charAt(0).toUpperCase() + this.slice(1);<br/>  }<br/>  if (threeCity.length &lt;= 1) {<br/>  let cityString = threeCity.toString();<br/>  let newWord = cityString.capitalize();<br/>  string4.push(newWord);<br/>} else if (threeCity[0].length &gt; 1) {<br/>  for (var i = 0; i &lt; threeCity[0].length; i++) {<br/>    let newWord2 = threeCity[0][i].capitalize();<br/>    string4.push(newWord2);<br/>  }<br/>}<br/>}</span><span id="f23a" class="km kn if ki b fv ks kp l kq kr">let string5 = string4.toString();<br/>let string6 = string5.replace(",", "_");</span></pre><p id="184a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这里，我采用了threeCity数组，并通过一个将每个数组项的第一个字母大写的函数来运行它。现在，如果我们的城市是一个单词，两个单词，或5个单词或其他什么，每个单词都是大写的。</p><p id="29d1" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后我把数组转换成一个字符串，这意味着我现在把每个单词都大写，用逗号隔开。所以我简单地用一个字符串替换方法，用下划线代替逗号。</p><p id="8aab" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">哒哒！这可能有点过于复杂了。我相信有更简单的方法。但是它工作了，而且运行得相当快。这很好，因为我可以非常肯定，无论用户输入什么，或者他们的输入格式有多糟糕，我都可以得到州和城市。(只要我的城市数组是最新的)。</p><p id="8d59" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，我可以使用该城市和州从天气api中获取数据，这是我的初衷。但是我已经为最终用户简化了这个过程，他们现在可以在一个简单的搜索栏中输入所有内容。</p><p id="21ef" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你有任何反馈，请告诉我。谢谢！</p></div></div>    
</body>
</html>