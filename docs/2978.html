<html>
<head>
<title>Using Grids in Creative Coding</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在创造性编码中使用网格</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/creative-coding-grids-2e6bcaa07596?source=collection_archive---------10-----------------------#2017-03-03">https://medium.com/hackernoon/creative-coding-grids-2e6bcaa07596?source=collection_archive---------10-----------------------#2017-03-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/1e1cf6eb8311308295f273cef85e81bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Nn8Wa5IZ64vS9RJPo40p0A.gif"/></div></div></figure><div class=""/><div class=""><h2 id="7219" class="pw-subtitle-paragraph jc ie if bd b jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ek translated">如何用Javascript创建一个可重用的网格系统</h2></div><p id="5158" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">我非常喜欢重复。所以我几乎每天都在使用网格。这是在屏幕上布局的一种快速简单的方式。</p><p id="34f5" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">这些教程的所有代码和库都可以在这里找到:【https://github.com/GeorgeGally/creative_coding T2】</p><p id="b5bf" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">网格创建真的很简单。我们有水平和垂直方向上需要的项目数量，以及网格的宽度和高度。扔在一个良好的措施开始的位置，把它很好地放置在屏幕上我们想要的地方，我们有我们的网格。</p><p id="85b3" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">让我们将这些条件传递给网格创建函数:</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="b987" class="la lb if kw b fv lc ld l le lf">function Grid(_num_items_horiz, _num_items_vert, _grid_w, _grid_h, _startx, _starty){</span><span id="2fd2" class="la lb if kw b fv lg ld l le lf">   return this;</span><span id="70e5" class="la lb if kw b fv lg ld l le lf">}</span></pre><p id="81dc" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">我最近从<a class="ae kq" href="https://hackernoon.com/javascript-hacks-for-hipsters-624d50c76e8e#.z23l3royd" rel="noopener ugc nofollow" target="_blank">为潮人编写的Javascript Hacks】中学到的一件事是，你可以使用||来测试一个变量是否未定义，而不是使用<em class="lh"> if语句</em>，就像这样:</a></p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="c3bc" class="la lb if kw b fv lc ld l le lf"><em class="lh">// usual way</em><br/>// if (_num_items_horiz == undefined) _num_items_horiz = 1;</span><span id="a826" class="la lb if kw b fv lg ld l le lf"><em class="lh">// hipster way</em><br/>var num_items_horiz = _num_items_horiz || 1;</span></pre><p id="df1b" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">我们创建一个<em class="lh"> createGrid() </em>函数，<a class="ae kq" href="https://hackernoon.com/tagged/loops" rel="noopener ugc nofollow" target="_blank">通过x和y点循环</a>来创建我们的网格，并将它们推送到一个数组上:</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="2bb9" class="la lb if kw b fv lc ld l le lf">function Grid(_num_items_horiz, _num_items_vert, _grid_w, _grid_h, _startx, _starty){</span><span id="dece" class="la lb if kw b fv lg ld l le lf"><em class="lh">  // these are temp variables to store the original _num_items  <br/>  // variables passed in the constructor<br/></em>  var num_items_horiz = _num_items_horiz || 1;<br/>  var num_items_vert = _num_items_vert || 1;<br/>   <br/>  this.horiz = 0;<br/>  this.vert = 0;</span><span id="00a5" class="la lb if kw b fv lg ld l le lf">  this.start = {x: _startx || 0 , y: _starty || 0};</span><span id="0f30" class="la lb if kw b fv lg ld l le lf">  this.grid_w = _grid_w || w;<br/>  this.grid_h = _grid_h || h;</span><span id="bd72" class="la lb if kw b fv lg ld l le lf">  // empty arrays to store our grid positions <br/>  this.x = [];<br/>  this.y = [];</span><span id="fce6" class="la lb if kw b fv lg ld l le lf"><em class="lh">  //work out how far apart the grid items are<br/>  </em>this.spacing_x = this.grid_w / this.num_items_horiz;<br/>  this.spacing_y = this.grid_h / this.num_items_vert;<br/></span><span id="0f52" class="la lb if kw b fv lg ld l le lf"><strong class="kw ig">  this.createGrid = function() {<br/>    for (var _y = 0; _y &lt; this.grid_h; _y+=this.spacing_y) {<br/>     for (var _x = 0; _x &lt; this.grid_w; _x+=this.spacing_x) {</strong></span><span id="2f99" class="la lb if kw b fv lg ld l le lf"><strong class="kw ig">      </strong><em class="lh">// we use spacing/2 so that the grid fits nicely <br/>      // in our defined area </em><strong class="kw ig"><br/>      this.x.push(this.start.x + this.spacing_x/2 + _x);<br/>      this.y.push(this.start.y + this.spacing_y/2 + _y);<br/>     }<br/>   }</strong></span><span id="4f76" class="la lb if kw b fv lg ld l le lf">  createGrid(); <br/>  return this;</span><span id="477c" class="la lb if kw b fv lg ld l le lf">}<br/></span></pre><p id="5056" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">剩下要做的唯一一件事就是创建一个add()函数，这样就可以动态地添加条目，所以最终的代码如下所示:</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="d064" class="la lb if kw b fv lc ld l le lf">function Grid(_num_items_horiz, _num_items_vert, _grid_w, _grid_h, _startx, _starty){</span><span id="a822" class="la lb if kw b fv lg ld l le lf">  if (_num_items_horiz == undefined) _num_items_horiz = 1;<br/>  if (_num_items_vert == undefined) _num_items_vert = 1;<br/>  var _horiz = _num_items_horiz || 1;<br/>  var _vert = _num_items_vert || 1;</span><span id="cf3e" class="la lb if kw b fv lg ld l le lf">  this.spacing_x;<br/>  this.spacing_y;</span><span id="ccd0" class="la lb if kw b fv lg ld l le lf">  this.num_items_horiz = 0;<br/>  this.num_items_vert = 0;</span><span id="7515" class="la lb if kw b fv lg ld l le lf">  this.start = {x: _startx || 0 , y: _starty || 0};</span><span id="8b16" class="la lb if kw b fv lg ld l le lf">  this.grid_w = _grid_w || w;<br/>  this.grid_h = _grid_h || h;</span><span id="86bd" class="la lb if kw b fv lg ld l le lf">  this.x = [];<br/>  this.y = [];</span><span id="b0de" class="la lb if kw b fv lg ld l le lf"><strong class="kw ig">  this.add = function(_horiz, _vert) {<br/>    <br/>    </strong><em class="lh">// if we don't pass a value just add 1 to the size</em><strong class="kw ig"><br/>    this.num_items_horiz += _horiz || 1;<br/>    this.num_items_vert += _vert || 1;<br/>    this.spacing_x = this.grid_w / this.num_items_horiz;<br/>    this.spacing_y = this.grid_h / this.num_items_vert;    <br/>    this.createGrid(); <br/>    return this;</strong></span><span id="b610" class="la lb if kw b fv lg ld l le lf"><strong class="kw ig">  }</strong></span><span id="18de" class="la lb if kw b fv lg ld l le lf"><strong class="kw ig">  this.setStart = function(_x, _y) {<br/>    this.start = {x: _x || 0 , y: _y || 0};<br/>    createGrid();<br/>    return this;<br/>  }</strong></span><span id="e20d" class="la lb if kw b fv lg ld l le lf">  <br/> this.createGrid = function() {<br/>    for (var _y = 0; _y &lt; this.grid_h; _y+=this.spacing_y) {<br/>     for (var _x = 0; _x &lt; this.grid_w; _x+=this.spacing_x) { <br/>      this.x.push(this.start.x + this.spacing_x/2 + _x);<br/>      this.y.push(this.start.y + this.spacing_y/2 + _y);<br/>     }<br/>   };<br/> }</span><span id="ffb3" class="la lb if kw b fv lg ld l le lf"><strong class="kw ig"> this.add(_horiz, _vert);</strong></span><span id="8261" class="la lb if kw b fv lg ld l le lf"> return this;</span><span id="46d9" class="la lb if kw b fv lg ld l le lf">}</span></pre><p id="eda6" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">好了，无聊的事情结束了。让我们使用我们的网格。</p><p id="2721" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">让我们使用一个<a class="ae kq" href="https://hackernoon.com/tagged/particle" rel="noopener ugc nofollow" target="_blank">粒子</a>系统来使它变得简单(如果你还没有跟上，<a class="ae kq" href="https://hackernoon.com/how-to-make-particles-1cbeee937593" rel="noopener ugc nofollow" target="_blank">看这里关于如何创建一个</a>)。让我们像这样建立一个粒子网格:</p><figure class="kr ks kt ku fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/8838bebcb2dd4f5788f51dd7db1a6e34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*4urOk1pC8juMd0g6vFVAlg.gif"/></div></div></figure><p id="3aba" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">要创建我们的网格，我们现在可以这样做:</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="9386" class="la lb if kw b fv lc ld l le lf">// create grid<br/>var num_grid_horiz = 10;<br/>var num_grid_vert = 10;<br/>var grid_w = 400;<br/>var grid_h = 400;<br/>var grid_startx = w/2 - grid_w/2;<br/>var grid_starty = h/2 - grid_h/2;</span><span id="e978" class="la lb if kw b fv lg ld l le lf">var grid = new Grid(num_grid_horiz, num_grid_vert, grid_w, grid_h, grid_startx, grid_starty);</span></pre><p id="a7c0" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">这将还给我们一个网格对象，可以包含一个x和y位置的数组。现在很容易使用。我们只是通过我们的网格迭代得到它们的位置，grid.x[0]和grid.y[0]得到它们的第一个位置，grid.x[1]和grid.y[1]得到它们的第二个位置，以此类推。完整的代码如下所示:</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="a06d" class="la lb if kw b fv lc ld l le lf">var ctx = createCanvas("canvas1");</span><span id="b63e" class="la lb if kw b fv lg ld l le lf">// create grid<br/>var num_grid_horiz = 10;<br/>var num_grid_vert = 10;<br/>var grid_w = 400;<br/>var grid_h = 400;<br/>var grid_startx = w/2 - grid_w/2;<br/>var grid_starty = h/2 - grid_h/2;</span><span id="5354" class="la lb if kw b fv lg ld l le lf">var grid = new Grid(num_grid_horiz, num_grid_vert, grid_w, grid_h, grid_startx, grid_starty);</span><span id="d1d4" class="la lb if kw b fv lg ld l le lf">console.log(grid);</span><span id="e0a2" class="la lb if kw b fv lg ld l le lf">// create particles<br/>var balls = [];<br/><strong class="kw ig">var number_of_balls = num_grid_horiz * num_grid_vert;</strong></span><span id="8da0" class="la lb if kw b fv lg ld l le lf">for (var i = 0; i &lt; number_of_balls; i++) {<br/>  <strong class="kw ig">addBall(grid.x[i], grid.y[i]);</strong><br/>}</span><span id="82b9" class="la lb if kw b fv lg ld l le lf">function addBall(_x, _y){<br/>  var ball = {<br/>    x: _x,<br/>    y: _y,<br/>    speed_x: random(1),<br/>    speed_y: random(1),<br/>    size: 20,<br/>    colour: rgb(0),<br/>    angle: random(360)<br/>  }<br/>  balls.push(ball);<br/>}<br/></span><span id="69ed" class="la lb if kw b fv lg ld l le lf">function draw(){<br/>  ctx.background(235, 0.5);<br/>  moveBall();<br/>  drawBall();<br/>}<br/></span><span id="a637" class="la lb if kw b fv lg ld l le lf">function moveBall(){</span><span id="0f90" class="la lb if kw b fv lg ld l le lf">  for (var i = 0; i &lt; balls.length; i++) {<br/>    var b = balls[i];<br/>    b.size = random(2, 30);<br/>  }</span><span id="1be4" class="la lb if kw b fv lg ld l le lf">}<br/></span><span id="4589" class="la lb if kw b fv lg ld l le lf">function drawBall(){<br/>  <br/>  for (var i = 0; i &lt; balls.length; i++) {<br/>    var b = balls[i];<br/>    ctx.fillStyle = b.colour;<br/>    ctx.fillEllipse(b.x, b.y, b.size);<br/>  }</span><span id="ddcf" class="la lb if kw b fv lg ld l le lf">}</span></pre><p id="37fd" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">现在我们有了。让我们在此基础上创建一个稍微复杂一些的东西:</p><figure class="kr ks kt ku fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/2d8282746872d96b5622207169f2e696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*KtrJ4PH7HU4LUHUSWWwlLg.gif"/></div></div></figure><p id="c292" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">创建上面的图像，这只是标题图像的一个微小的变化。我们用正弦振荡改变粒子的大小，并按照<a class="ae kq" href="http://All the code and libraries for these tutorials can be found here: https://github.com/GeorgeGally/creative_coding" rel="noopener ugc nofollow" target="_blank"> Math.sin和Math.cos教程</a>使用正弦和余弦移动粒子:</p><pre class="kr ks kt ku fq kv kw kx ky aw kz dt"><span id="c3a8" class="la lb if kw b fv lc ld l le lf">var ctx = createCanvas("canvas1");</span><span id="8241" class="la lb if kw b fv lg ld l le lf">// create grid<br/><strong class="kw ig">var num_grid_horiz = 20;<br/>var num_grid_vert = 10;</strong></span><span id="ee80" class="la lb if kw b fv lg ld l le lf"><strong class="kw ig">var grid = new Grid(num_grid_horiz, num_grid_vert);</strong></span><span id="2d7b" class="la lb if kw b fv lg ld l le lf">console.log(grid);</span><span id="f95d" class="la lb if kw b fv lg ld l le lf">// create particles<br/>var balls = [];<br/>var number_of_balls = num_grid_horiz * num_grid_vert;<br/>for (var i = 0; i &lt; number_of_balls; i++) {<br/>  addBall(grid.x[i], grid.y[i]);<br/>}</span><span id="115c" class="la lb if kw b fv lg ld l le lf">function addBall(_x, _y){<br/>  var ball = {<br/>    x: _x,<br/>    y: _y,<br/><strong class="kw ig">    startx: _x,<br/>    starty: _y,</strong><br/>    speed_x: 1,<br/>    speed_y: random(1),<br/>    size: 20,<br/>    colour: rgb(0),<br/>    angle: random(360)<br/>  }<br/>  balls.push(ball);<br/>}</span><span id="e473" class="la lb if kw b fv lg ld l le lf">function draw(){<br/>  ctx.background(235, 0.1);<br/>  moveBall();<br/>  drawBall();<br/>}</span><span id="1934" class="la lb if kw b fv lg ld l le lf">function moveBall(){</span><span id="4e82" class="la lb if kw b fv lg ld l le lf">for (var i = 0; i &lt; balls.length; i++) {<br/>    var b = balls[i];<br/>   <strong class="kw ig"> b.angle += b.speed_x/10;<br/>    b.x = b.startx + Math.cos(b.angle) * 20;<br/>    b.y = b.starty + Math.sin(b.angle) * 20;<br/>    b.size = 5 + Math.sin(b.angle) * 20;</strong><br/>  }</span><span id="ee36" class="la lb if kw b fv lg ld l le lf">}</span><span id="28d0" class="la lb if kw b fv lg ld l le lf">function drawBall(){<br/>  for (var i = 0; i &lt; balls.length; i++) {<br/>    var b = balls[i];<br/>    ctx.fillStyle = b.colour;<br/>    ctx.fillEllipse(b.x, b.y, b.size);<br/>  }<br/>}</span></pre><p id="bcf7" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">仅此而已。我们完了。快乐的重复。</p><p id="a0b5" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">像往常一样，完整的代码可以在我的github上找到，这篇文章是第11部分(一定要时不时地拉一下，因为我经常更新内容):<a class="ae kq" href="https://github.com/GeorgeGally/creative_coding" rel="noopener ugc nofollow" target="_blank">https://github.com/GeorgeGally/creative_coding</a></p><p id="5a0c" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">【https://hackernoon.com/@radarboy3000】<a class="ae kq" href="https://hackernoon.com/@radarboy3000" rel="noopener ugc nofollow" target="_blank"><strong class="jw ig">参见往期《创意编码入门》</strong></a></p><p id="6ec9" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><strong class="jw ig">在Instagram上关注我这里:</strong><a class="ae kq" href="https://www.instagram.com/radarboy3000/" rel="noopener ugc nofollow" target="_blank"><strong class="jw ig">https://www.instagram.com/radarboy3000/</strong></a></p><p id="ecb3" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><strong class="jw ig">在推特上关注我这里:</strong><a class="ae kq" href="https://twitter.com/radarboy_japan" rel="noopener ugc nofollow" target="_blank"><strong class="jw ig">https://twitter.com/radarboy_japan</strong></a></p><p id="c0ad" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><strong class="jw ig">友好点，喜欢我的脸书页面在这里获取教程和工作坊更新:【https://www.facebook.com/radarboy3000】<a class="ae kq" href="https://www.facebook.com/radarboy3000" rel="noopener ugc nofollow" target="_blank"><strong class="jw ig"/></a></strong></p><div class="kr ks kt ku fq ab cb"><figure class="li hw lj lk ll lm ln paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="li hw lj lk ll lm ln paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="li hw lj lk ll lm ln paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="lo lp lq"><p id="f922" class="ju jv lh jw b jx jy jg jz ka kb jj kc lr ke kf kg ls ki kj kk lt km kn ko kp hn dt translated"><a class="ae kq" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是这个家庭的一员。我们现在<a class="ae kq" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kq" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ju jv lh jw b jx jy jg jz ka kb jj kc lr ke kf kg ls ki kj kk lt km kn ko kp hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kq" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kq" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kr ks kt ku fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lu"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="kr ks kt ku fq hw"><div class="bz el l di"><div class="lv lw l"/></div></figure></div></div>    
</body>
</html>