# 为什么我的工程师那么在意几毫秒？

> 原文：<https://medium.com/hackernoon/why-does-my-engineer-care-so-much-about-a-few-milliseconds-1a586fc3601c>

![](img/a46f327b794e899475514f1fb9378837.png)

[软件](https://hackernoon.com/tagged/software) [工程师](https://hackernoon.com/tagged/engineers)非常重视代码性能。非工程师希望在构建新功能上花更多时间，而工程师希望在提高性能上花时间，这两者之间经常存在矛盾。这个应用程序对你来说似乎非常快。那么，为什么工程师们如此关心把看起来已经很不错的东西缩短几毫秒呢？

## 性能对您的客户至关重要

绩效绝对会影响公司的底线。客户不会直接告诉你“如果你把主屏幕的登陆页面提高 200 毫秒，我会再试试你的应用”，但细微的性能提升会让用户在未来更有可能使用你的应用。

亚马逊早些时候进行了一项实验，发现页面加载时间每 100 毫秒(十分之一秒)会损失他们 1%的销售额([来源](https://blog.gigaspaces.com/amazon-found-every-100ms-of-latency-cost-them-1-in-sales/))。每增加一秒钟的延迟，就会损失数十亿美元的收入。我在该公司工作时亲眼目睹了这一点，并看到该公司对维护和提高网页性能的重视程度；人们甚至因为延迟增加而被解雇。

你不需要成为一个十亿美元的公司来做这件事；速度较慢的应用会产生较高的流失率、较低的转化率、较低的用户满意度和较低的病毒传播率。Kissmetrics [分析了](https://blog.kissmetrics.com/loading-time/)的用户行为，发现 40%的用户会放弃一个加载时间为 3 秒的网站，每增加 1 秒的延迟会降低 16%的客户满意度和 7%的转化率。我不必告诉你，7%的转化率下降是巨大的，尤其是如果它随着时间的推移而复合。

如果这还不足以让你相信速度很重要，网站的一个额外的考虑是搜索引擎测量网站的速度，并在其排名中优先考虑速度较快的页面。换句话说，直接影响 SEO。

## 职业自豪感

代码速度是任何计算机科学课程的主要关注点，因此“代码应该是高效的”已经深入我们的大脑。工程师对未优化的代码有一种本能的反应，我们为使代码更具性能而自豪。缓慢的代码被认为是技术债务的一种形式，它会一直折磨着工程师，直到得到改善。是的，这种有利于提高代码速度的固有偏见有时走得太远了——“过早优化”一词指的是花费精力改进那些不太重要或在很长时间内都不重要的东西——但总的来说，这是一件好事，它使我们的应用程序变得更好。

## 如果不处理，情况会变得更糟

有些代码的速度与规模成正比。现在看起来可能很好，但是如果你希望你的用户数量翻倍或者 10 倍，那就不好了。

假设你正在构建下一个 Twitter，只需要 10 毫秒就可以加载某人关注的单个用户的推文。这相当快了。但假设速度与那个人关注的用户总数成正比。一旦用户关注 100 个人——这可能是你希望他们做的事情——加起来就是一秒钟。关注 1，000 名用户，这对于 Twitter 上的典型用户来说并不罕见？那是 10 秒钟。关注 5000 人的超级用户每次与你的应用程序交互时，几乎都要等待一分钟。他们不会成为超级用户太久。你可能甚至没有意识到这些超级用户的存在，并有如此可怕的经历，直到为时已晚。有经验的工程师总是在考虑极端的情况，他们可能会推动优化一个你自己在使用应用程序时没有经历过的情况。

## 它增加了

您的工程师说执行得非常糟糕的数据库查询可能只需要 20 毫秒，但是它对于每个 API 调用运行了 15 次。每次加载应用程序时，您的应用程序需要进行 5 次这样的 API 调用，然后在应用程序打开时频繁调用。很快就累积起来了。务实的工程师将更多地关注像这样的高 ROI 性能优化，而不是每小时只运行一次的较慢的查询。

## 它与缩放直接相关

简单地说，在您的服务器上运行某段代码的时间越长，服务器为其他用户提供的资源就越少。对于某些类的优化，将某些代码或数据库查询的执行时间从 10 毫秒减少到 5 毫秒会使您的容量翻倍；你可以用更少的硬件服务更多的客户。这对于你的公司来说更便宜，并且它延迟了一些缩放限制成为问题(参见我关于[为什么工程师担心缩放](https://wtfismyengineertalkingabout.com/2017/03/24/why-do-engineers-worry-about-scaling/)以了解为什么缩放有时是非线性的文章)。即使速度不会直接影响用户，例如在后台运行的大数据处理任务，一个小的优化也可以为您的公司节省数小时的计算时间和数千美元。

## 速度较慢的设备和网络

也许你的应用程序在你的硅谷办公室里加载得很好，在最新的苹果手机上有昂贵的宽带互联网接入，但是对于环境不太理想的用户来说，速度可能要慢得多。在某些情况下，我们无能为力:你不能强迫用户升级或运营商提高他们的网络速度。但是应用程序可以优化它们的代码，以便在低端设备上运行得更快，并且可以努力减少或压缩正在传输的数据。

# 结果是

编写高性能代码是您的工程师们最重要、最专业的工作之一。这是我们在编写任何代码时都会考虑的问题。理由很充分:这对您的业务很重要。当然，它可能走得太远；您不能把所有的工程资源都花在性能改进上。但是，当您的工程师说需要加快速度时，请倾听他们的意见，并在认为性能问题没什么大不了之前，考虑一下上述含义。

*希望你觉得这个帖子有用！别忘了在 Medium 上关注我，我的博客* [*WTF 是我的工程师谈论的*](https://wtfismyengineertalkingabout.com) *、* [、脸书](https://www.facebook.com/WTFengr) *、*[Twitter、](https://twitter.com/wtfengr)T20，或 [、 LinkedIn 、](https://www.linkedin.com/in/atomos)T26。并请通过电子邮件 *发送反馈和话题建议* [*。*](https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=wtfengineer@gmail.com)

[![](img/50ef4044ecd4e250b5d50f368b775d38.png)](http://bit.ly/HackernoonFB)[![](img/979d9a46439d5aebbdcdca574e21dc81.png)](https://goo.gl/k7XYbx)[![](img/2930ba6bd2c12218fdbbf7e02c8746ff.png)](https://goo.gl/4ofytp)

> [黑客中午](http://bit.ly/Hackernoon)是黑客如何开始他们的下午。我们是 [@AMI](http://bit.ly/atAMIatAMI) 家庭的一员。我们现在[接受投稿](http://bit.ly/hackernoonsubmission)，并乐意[讨论广告&赞助](mailto:partners@amipublications.com)机会。
> 
> 如果你喜欢这个故事，我们推荐你阅读我们的[最新科技故事](http://bit.ly/hackernoonlatestt)和[趋势科技故事](https://hackernoon.com/trending)。直到下一次，不要把世界的现实想当然！

![](img/be0ca55ba73a573dce11effb2ee80d56.png)