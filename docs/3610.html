<html>
<head>
<title>Using Webpack with ArangoDB and Foxx</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Webpack与ArangoDB和Foxx一起使用</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/using-webpack-with-arangodb-and-foxx-720d411ff2fe?source=collection_archive---------8-----------------------#2017-04-11">https://medium.com/hackernoon/using-webpack-with-arangodb-and-foxx-720d411ff2fe?source=collection_archive---------8-----------------------#2017-04-11</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="9829" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我正在用<a class="ae jp" href="https://www.arangodb.com/why-arangodb/foxx/" rel="noopener ugc nofollow" target="_blank"> Foxx </a>微服务框架和<a class="ae jp" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue </a>构建一个项目。这非常令人兴奋，但是当涉及到工具时，我遇到了一些麻烦。我正在快速地进行更改，我必须调用webpack来捆绑我的前端文件，并调用foxx-manager来“升级”ArangoDB/Foxx服务。另外，我很惊讶在Foxx中修改静态文件需要升级。我需要进一步挖掘。</p><p id="176c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">几年前，当我迁移到一个更加以后端为中心的角色时，前端世界对任务运行者和编译器变得疯狂。这让我百思不得其解——因为我老了，我记得用解释语言写作的一个令人信服的理由是你不必等待编译器。哦，事实证明这不仅仅是一个短暂的时尚。大多数现代前端框架要求(或者强烈鼓励)使用某种工具。谢天谢地，后端JS世界和前端世界已经开始正常化，有了webpack这样的工具，你会看到两个世界正在融合。</p><p id="cd1d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是首先，让我们回顾并描述一下webpack。Webpack与其他前端工具略有不同，它是一个模块捆绑器，而不是像Gulp或Grunt那样的任务运行器。它的任务是将模块(广泛使用的)打包成前端友好的资产。它如何通过管理和打包资产来使模块在前端变得易于消化。Webpack本身在<a class="ae jp" href="https://hackernoon.com/tagged/node-js" rel="noopener ugc nofollow" target="_blank"> Node.js </a>中作为CLI工具或者模块运行。Webpack还有一个内置的开发web服务器和文件监视器。</p><p id="a8b0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我的第一个想法是，也许Foxx本身可以作为一个模块运行webpack。毕竟设置脚本(<em class="jq">scripts . setup</em>in<em class="jq">manifest . JSON</em>)是做这种事情的完美地方。而且都是<a class="ae jp" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> Javascript </a>。不幸的是，结果并不理想。<em class="jq"> fs </em>的Foxx实现缺少<em class="jq"> readFile </em>函数，只有<em class="jq"> readFileSync </em>。这是有意义的，因为ArangoDB同步实现Javascript。我也许可以把大部分拼凑起来，但为什么要逆流而上呢？</p><p id="6c55" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">既然阿兰戈不能运行webpack，那么也许我可以让webpack运行foxx-manager。在webpack中，您可以使用命令行运行一个简单的设置，或者创建一个Javascript模块来定义您的配置。我决定走那条路。然而，首先，让我们来看看webpack。因为我们想要一个可重复的设置，所以让我们初始化一个<em class="jq"> package.json </em>文件。</p><pre class="jr js jt ju fq jv jw jx jy aw jz dt"><span id="a07b" class="ka kb hu jw b fv kc kd l ke kf">npm init</span></pre><p id="6c68" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这样做似乎有点过分，因为<em class="jq"> package.json </em>文件是一个明显的node文件，但是我们在这里也会使用一点Node.js。</p><p id="3012" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在您回答了npm初始化过程中的问题之后，我们可以添加一些开发依赖项。</p><pre class="jr js jt ju fq jv jw jx jy aw jz dt"><span id="fc6a" class="ka kb hu jw b fv kc kd l ke kf">npm install --save-dev webpack<br/>npm install --save-dev webpack-shell-plugin</span></pre><p id="9056" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们构建我们的配置文件。习惯上把这个文件命名为<em class="jq"> webpack.config.js </em>，尽管它可能是任何东西。我的文件是这样的:</p><figure class="jr js jt ju fq kg"><div class="bz el l di"><div class="kh ki l"/></div></figure><p id="59c1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">浏览这个文件，让我们检查几个关键点。</p><ol class=""><li id="84a3" class="kj kk hu it b iu iv iy iz jc kl jg km jk kn jo ko kp kq kr dt translated">在第2行，我们使用了<a class="ae jp" href="https://github.com/1337programming/webpack-shell-plugin" rel="noopener ugc nofollow" target="_blank"> webpack-shell-plugin </a>。这使得webpack可以作为一个基本的任务运行器。从命令行的角度来看，foxx-manager非常简单，我们只需要运行一些东西——没有输入或输出。它应该符合我们的需要。</li><li id="46b1" class="kj kk hu it b iu ks iy kt jc ku jg kv jk kw jo ko kp kq kr dt translated"><em class="jq">路径</em>模块用于平滑不同平台上的差异。除了macOS之外，我还没有在任何设备上测试过我的脚本，但是这可以确保我们通常使用正确的目录分隔符来构建路径。</li><li id="42ca" class="kj kk hu it b iu ks iy kt jc ku jg kv jk kw jo ko kp kq kr dt translated"><em class="jq"> module.exports </em>(第6行)的<em class="jq">条目</em>属性<em class="jq"> </em>是我们将要运行webpack的单个文件。在这个文件中，你可以做一些很酷的事情，比如…</li></ol><pre class="jr js jt ju fq jv jw jx jy aw jz dt"><span id="7600" class="ka kb hu jw b fv kc kd l ke kf">import joi from 'joi-browser'; </span></pre><p id="5cf0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">…访问一个模块。Webpack将为您管理依赖关系。</p><p id="e836" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">4.<em class="jq">模块的<em class="jq">输出</em>对象. exports </em>(第7–9行)定义了<em class="jq">条目</em>属性中提到的输出文件。</p><p id="83ad" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">5.可能最有趣的部分是在第12行使用了<em class="jq"> WebpackShellPlugin </em>。这就是我们要触发foxx-manager升级的地方。现在，在这个例子中，我已经放入了一个本地主机服务器的开发凭证。您可能希望包含一个来自repo外部的文件来管理用户名、密码、挂载点和数据库名称。我试图访问webpack的命令行参数，但没有骰子。我很想知道一种能够传入参数或JSON文件路径来管理这些凭证的解决方法。</p><p id="1db0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，要运行它，您可以从项目目录中的命令行运行webpack。</p><pre class="jr js jt ju fq jv jw jx jy aw jz dt"><span id="84c7" class="ka kb hu jw b fv kc kd l ke kf">./node_modules/.bin/webpack --config webpack.config.js</span></pre><p id="789f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这将首先打包你的webpack文件，然后运行foxx-manager。如果你想变得更有趣，你可以添加watch命令行开关，当你改变webpack管理的文件时，webpack和foxx-manager会自动运行。</p><pre class="jr js jt ju fq jv jw jx jy aw jz dt"><span id="cbf7" class="ka kb hu jw b fv kc kd l ke kf">./node_modules/.bin/webpack --config webpack.config.js --watch</span></pre><p id="2a21" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这就是了。当你改变你的Webpack依赖关系时，webpack将自动运行foxx-manager。现在，这将只为<em class="jq"> module.exports.entry，</em>中的文件运行foxx-manager，因此，如果您更改了另一个静态文件，您需要手动重新运行foxx-manager。</p><p id="1a3e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">另外，如果你对ArangoDB感兴趣，你可能也想看看《ArangoDB和Foxx入门:Joifully CRUD-y in the best way》。</p><blockquote class="kx ky kz"><p id="eb3e" class="ir is jq it b iu iv iw ix iy iz ja jb la jd je jf lb jh ji jj lc jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is jq it b iu iv iw ix iy iz ja jb la jd je jf lb jh ji jj lc jl jm jn jo hn dt translated">要了解更多信息，<a class="ae jp" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">请阅读我们的“关于”页面</a>，<a class="ae jp" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书上点赞/给我们发消息</a>，或者简单地说，<a class="ae jp" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ir is jq it b iu iv iw ix iy iz ja jb la jd je jf lb jh ji jj lc jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jr js jt ju fq kg"><div class="bz el l di"><div class="ld ki l"/></div></figure></div></div>    
</body>
</html>