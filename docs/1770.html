<html>
<head>
<title>[ Javascript ] Cracking nuts, override Object.constructor( )</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">[ Javascript ]破解坚果，覆盖Object.constructor()</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/javascript-cracking-nuts-override-object-constructor-48a73628b7e6?source=collection_archive---------6-----------------------#2016-12-06">https://medium.com/hackernoon/javascript-cracking-nuts-override-object-constructor-48a73628b7e6?source=collection_archive---------6-----------------------#2016-12-06</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/532ae0c6fc557afeca1de6e8d03a0598.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kvG8AGKsi__M94RkfxTrkg.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">unsplash.com</figcaption></figure><blockquote class="jg"><p id="900e" class="jh ji hu bd jj jk jl jm jn jo jp jq ek translated">我一如既往地喜欢javascript。但是每次当我被要求用OOP模式编程时，我都很受伤。所有这些主题:对象、类、原型、继承等等。，是开发者的痛，这是JS“比较散漫的脾气”和“自动类型转换强迫症”的个性造成的。</p></blockquote><p id="1eec" class="pw-post-body-paragraph js jt hu ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko jq hn dt translated"><strong class="ju hv">这是一个来自</strong><a class="ae kp" href="http://stackoverflow.com/questions/9267157/why-is-it-impossible-to-change-constructor-function-from-prototype" rel="noopener ugc nofollow" target="_blank"><strong class="ju hv"><em class="kq">stack overflow</em></strong></a><strong class="ju hv"><em class="kq">:</em></strong>的例子</p><p id="f5a1" class="pw-post-body-paragraph js jt hu ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko jq hn dt translated">第一，兔子是一个对象，具有公共有价值的<strong class="ju hv"> <em class="kq">跳跃</em></strong><strong class="ju hv"><em class="kq">默认值【是】</em> </strong>。</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="0aff" class="lf lg hu lb b fv lh li l lj lk">function Rabbit() {<br/><strong class="lb hv"><em class="kq">    this.jumps = "yes";<br/></em></strong>};<br/>var rabbit = new Rabbit();<br/>console.log(rabbit.jumps);                    // yes<br/>console.log(Rabbit.prototype.constructor);    <br/>// outputs exactly the code of the function Rabbit();</span></pre><p id="992b" class="pw-post-body-paragraph js jt hu ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko jq hn dt translated">第二，我们要更改Rabbit()中的代码，使var <strong class="ju hv"> <em class="kq">跳转</em> </strong>与不同的<strong class="ju hv"> <em class="kq">默认值“no”。</em> </strong>嗯，修改对象的默认值，有<strong class="ju hv"> <em class="kq">对象</em> </strong>。<strong class="ju hv"><em class="kq">【prototype . constructor()</em></strong>，直觉告诉我修改构造函数，问题就解决了。<strong class="ju hv"> <em class="kq">但</em> </strong>却不是。</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="e0e1" class="lf lg hu lb b fv lh li l lj lk">Rabbit.prototype.constructor = function Rabbit() {<br/><strong class="lb hv"><em class="kq">    this.jumps = "no";<br/></em></strong>};<br/>console.log(Rabbit.prototype.constructor);    <br/>// again outputs the code with new this.jumps = "no";<br/>var rabbit2 = new Rabbit();<br/>// create new object with new constructor<br/><strong class="lb hv"><em class="kq">console.log(rabbit2.jumps);                   // still </em></strong><strong class="lb hv"><em class="kq">yes</em></strong></span></pre><h2 id="e09d" class="lf lg hu bd ll lm ln lo lp lq lr ls lt kd lu lv lw kh lx ly lz kl ma mb mc md dt translated">发生的事情是Rabbit.prototype.constructor只是一个指向原始构造函数(函数Rabit(){…})的指针，因此“类”的用户可以从实例中检测到构造函数。</h2><p id="0af9" class="pw-post-body-paragraph js jt hu ju b jv me jx jy jz mf kb kc kd mg kf kg kh mh kj kk kl mi kn ko jq hn dt translated">由<a class="ae kp" href="http://stackoverflow.com/users/227299/juan-mendes" rel="noopener ugc nofollow" target="_blank">胡安</a></p><p id="f3de" class="pw-post-body-paragraph js jt hu ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko jq hn dt translated">如果你想重定义一个构造函数，就这么做</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="e8a0" class="lf lg hu lb b fv lh li l lj lk">var oldProto = Rabbit.prototype;<br/>Rabbit = function() {<br/>   this.jumps = "no";<br/>};</span><span id="0cdb" class="lf lg hu lb b fv mj li l lj lk">Rabbit.prototype = oldProto;</span></pre><h2 id="dea6" class="lf lg hu bd ll lm ln lo lp lq lr ls lt kd lu lv lw kh lx ly lz kl ma mb mc md dt translated">你也喜欢坚果系列:</h2><p id="5062" class="pw-post-body-paragraph js jt hu ju b jv me jx jy jz mf kb kc kd mg kf kg kh mh kj kk kl mi kn ko jq hn dt translated"><a class="ae kp" href="https://hackernoon.com/nodejs-express-js-manipulating-response-before-going-back-to-user-5e96ad8d84ca#.zf7rx3el8" rel="noopener ugc nofollow" target="_blank">【express js】override RES . send</a><br/><a class="ae kp" rel="noopener" href="/@peterchang_82818/expressjs-cracking-nuts-black-list-ip-4787a0850e49#.bxj93og4k">【express js】将IP放入黑名单</a></p><p id="f878" class="pw-post-body-paragraph js jt hu ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko jq hn dt translated">喜欢这个故事？对别人有帮助吗？这有助于我知道你是否想看到更多关于他的主题，并帮助人们看到这个故事，<strong class="ju hv"> <em class="kq">当点击下面的心</em> </strong>。</p></div><div class="ab cl mk ml hc mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hn ho hp hq hr"><h2 id="3966" class="lf lg hu bd ll lm ln lo lp lq lr ls lt kd lu lv lw kh lx ly lz kl ma mb mc md dt translated"><em class="jr">参考:</em></h2><p id="051a" class="pw-post-body-paragraph js jt hu ju b jv me jx jy jz mf kb kc kd mg kf kg kh mh kj kk kl mi kn ko jq hn dt translated"><strong class="ju hv"> <em class="kq">为什么不能从原型改变构造函数？<br/></em></strong><a class="ae kp" href="http://js-bits.blogspot.tw/2010/08/javascript-inheritance-done-right.html" rel="noopener ugc nofollow" target="_blank">http://js-bits . blogspot . tw/2010/08/JavaScript-inheritance-done-right . html</a></p><p id="9715" class="pw-post-body-paragraph js jt hu ju b jv kr jx jy jz ks kb kc kd kt kf kg kh ku kj kk kl kv kn ko jq hn dt translated"><strong class="ju hv"><em class="kq">2010年8月17日星期二Javascript继承完成正确<br/></em></strong><a class="ae kp" href="http://stackoverflow.com/questions/9267157/why-is-it-impossible-to-change-constructor-function-from-prototype" rel="noopener ugc nofollow" target="_blank">http://stack overflow . com/questions/9267157/why-is-it-impossible-to-change-constructor-function-from-prototype</a></p><div class="kw kx ky kz fq ab cb"><figure class="mr iv ms mt mu mv mw paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mr iv ms mt mu mv mw paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mr iv ms mt mu mv mw paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mx my mz"><p id="f922" class="js jt kq ju b jv kr jx jy jz ks kb kc na kt kf kg nb ku kj kk nc kv kn ko jq hn dt translated"><a class="ae kp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="js jt kq ju b jv kr jx jy jz ks kb kc na kt kf kg nb ku kj kk nc kv kn ko jq hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kw kx ky kz fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nd"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>