<html>
<head>
<title>What is Silverlight?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是Silverlight？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/what-is-silverlight-24df8b1acbb6?source=collection_archive---------1-----------------------#2016-02-05">https://medium.com/hackernoon/what-is-silverlight-24df8b1acbb6?source=collection_archive---------1-----------------------#2016-02-05</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/03bb3bdc1beabc0fa311e08c06a42f2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*h42HUvt2pYGbtPNE.jpg"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><a class="ae jc" href="http://www.tested.com/tech/web/3143-rumor-silverlight-5-to-be-the-final-version-of-microsofts-plug-in/" rel="noopener ugc nofollow" target="_blank">credit</a></figcaption></figure><p id="276b" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">最近，我在为一个项目学习<code class="eh kb kc kd ke b">Silverlight</code>。以下是我为将来参考而保留的内容:</p><h1 id="f524" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">银光5</h1><p id="be67" class="pw-post-body-paragraph jd je hu jf b jg ld ji jj jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka hn dt translated">用于开发和部署富互联网应用程序的微软平台。现在，这是一种被弃用的技术。作为浏览器插件运行。支持。NET语言像<code class="eh kb kc kd ke b">C#</code>和<code class="eh kb kc kd ke b">VB.NET</code>、<code class="eh kb kc kd ke b">IronPython</code>和<code class="eh kb kc kd ke b">IronRuby</code>使用DLR(动态语言运行时)。</p><h1 id="8b79" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">安装:</h1><p id="6e03" class="pw-post-body-paragraph jd je hu jf b jg ld ji jj jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka hn dt translated">有三种选择:</p><ul class=""><li id="5786" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">使用WPI安装<a class="ae jc" href="https://hackernoon.com/tagged/silverlight" rel="noopener ugc nofollow" target="_blank"> silverlight </a></li><li id="74aa" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">安装Expression blend用于设计目的</li><li id="fe40" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">安装XNA Game studio以使用3D</li></ul><p id="1697" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">我们还需要安装Silverlight SDK。</p><h1 id="c927" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">创建Silverlight项目</h1><ul class=""><li id="442b" class="li lj hu jf b jg ld jk le jo lw js lx jw ly ka ln lo lp lq dt translated">在<code class="eh kb kc kd ke b">C#</code>-&gt;-<code class="eh kb kc kd ke b">Silverlight</code>下的<a class="ae jc" href="https://www.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VS </a>新建一个项目</li></ul><figure class="ma mb mc md fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="fe ff lz"><img src="../Images/87349611802dac2b00f8ace87ba1d993.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M7BS60Lisbxi1Cwt."/></div></div></figure><ul class=""><li id="2423" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">确保检查<strong class="jf hv">在新网站中托管Silverlight应用</strong></li></ul><h1 id="69a9" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">运行项目</h1><p id="99aa" class="pw-post-body-paragraph jd je hu jf b jg ld ji jj jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka hn dt translated">如果没有安装<code class="eh kb kc kd ke b">Silverlight</code>的开发者运行时，将显示以下弹出窗口</p><figure class="ma mb mc md fq iv fe ff paragraph-image"><div class="fe ff mi"><img src="../Images/3d6c6e6e6077e3b6180a00e5e0679741.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/0*v56C9qFAYWRWhYev."/></div></figure><p id="ad4f" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">运行项目时，如果浏览器中没有安装<code class="eh kb kc kd ke b">Silverlight</code>，将会显示以下浏览器通知:</p><figure class="ma mb mc md fq iv fe ff paragraph-image"><div class="fe ff mj"><img src="../Images/d031e68c2d159ffcb955c833b4ba953a.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/0*QlqjHhRwHD-i-W6z."/></div></figure><blockquote class="mk ml mm"><p id="5770" class="jd je mn jf b jg jh ji jj jk jl jm jn mo jp jq jr mp jt ju jv mq jx jy jz ka hn dt translated"><em class="hu">点击安装链接将带我们到微软网站下载并安装插件</em></p></blockquote><h1 id="7b38" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">Visual studio设置</h1><p id="0b65" class="pw-post-body-paragraph jd je hu jf b jg ld ji jj jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka hn dt translated">从VS主菜单的工具-&gt;选项</p><ul class=""><li id="89d7" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">对于所有语言:启用常规节点下的<code class="eh kb kc kd ke b">word warp</code>和<code class="eh kb kc kd ke b">line number</code></li><li id="7407" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">将选项卡节点下的<code class="eh kb kc kd ke b">Tab</code>和<code class="eh kb kc kd ke b">indent size</code>设置为2。还要保持标签</li></ul><h1 id="fb0b" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">装配</h1><p id="5e06" class="pw-post-body-paragraph jd je hu jf b jg ld ji jj jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka hn dt translated">有两种类型的Microsoft Silverlight程序集:</p><p id="89ef" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">核心Silverlight程序集</p><ul class=""><li id="e110" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated"><code class="eh kb kc kd ke b">mscorlib.dll</code></li><li id="a17f" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated"><code class="eh kb kc kd ke b">System.Core.dll</code></li><li id="9872" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated"><code class="eh kb kc kd ke b">system.dll</code></li><li id="10c2" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated"><code class="eh kb kc kd ke b">System.Net.dll</code></li><li id="bad0" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated"><code class="eh kb kc kd ke b">System.Windows.dll</code></li></ul><p id="34a4" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">SDK程序集，用于附加功能。</p><h1 id="9538" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">Silverlight项目的结构</h1><ul class=""><li id="9aa5" class="li lj hu jf b jg ld jk le jo lw js lx jw ly ka ln lo lp lq dt translated">App.xaml文件包含全局设置和全局事件</li><li id="6c84" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">MainPage.xaml是主Silverlight用户界面</li></ul><p id="6b86" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><code class="eh kb kc kd ke b">Path in web</code>设置指定输出<code class="eh kb kc kd ke b">.xap</code>文件的存放位置。在显示的图像中，它是<code class="eh kb kc kd ke b">ClientBin</code>文件夹。</p><p id="b136" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">初始/启动控制可以通过<code class="eh kb kc kd ke b">App.xaml.cs</code>设置。</p><p id="9a30" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">Silverlight应用程序被编译成一个<code class="eh kb kc kd ke b">.dll</code>，然后由Silverlight运行时使用。</p><p id="0066" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><code class="eh kb kc kd ke b">.csproj</code>文件包含构建指令。在构建期间，VS执行包含在<code class="eh kb kc kd ke b">.csproj</code>文件中的构建指令。其中一条指令调用语言编译器，例如<code class="eh kb kc kd ke b">csc.exe</code>代表<code class="eh kb kc kd ke b">C#</code>，<code class="eh kb kc kd ke b">vbc.exe</code>代表<code class="eh kb kc kd ke b">VB.NET</code></p><p id="3391" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">虽然这个过程是构建的，但是很多开发者称之为编译。</p><p id="a742" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">当解决方案配置设置为<code class="eh kb kc kd ke b">Debug</code>时，Visual studio将在项目的<code class="eh kb kc kd ke b">Bin</code>文件夹中创建一个<code class="eh kb kc kd ke b">Debug</code>文件夹。一般情况下，会有<strong class="jf hv"> 5个</strong>文件</p><ul class=""><li id="380e" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">应用程序<code class="eh kb kc kd ke b">AppManifest</code>文件-包含应用程序信息</li><li id="8ab9" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">应用程序<code class="eh kb kc kd ke b">.dll</code>文件——在执行项目时，Silverlight运行时将加载的实际代码</li><li id="c6d5" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">应用程序<code class="eh kb kc kd ke b">.pdb</code>文件——项目的可移植调试文件</li><li id="f5da" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">应用程序<code class="eh kb kc kd ke b">.xap</code>文件——应用程序<code class="eh kb kc kd ke b">AppManifest</code>和应用程序<code class="eh kb kc kd ke b">.dll</code>的压缩包。这在应用程序使用SDK程序集的情况下很有用。zip包将帮助客户下载SDK</li><li id="c0ef" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">应用测试<code class="eh kb kc kd ke b">.html</code>文件-由<code class="eh kb kc kd ke b">Properties</code>-&gt;-<code class="eh kb kc kd ke b">Debug</code>-&gt;-<code class="eh kb kc kd ke b">Start Action</code>设置为<code class="eh kb kc kd ke b">Dynamically generate a test page</code>生成的应用测试文件</li></ul><h1 id="2c5f" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">部署</h1><p id="f94d" class="pw-post-body-paragraph jd je hu jf b jg ld ji jj jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka hn dt translated">进行部署时，需要按照以下步骤在IIS中映射mime类型:</p><ul class=""><li id="5d90" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">从“站点”节点选择相关的应用程序</li><li id="eed8" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">双击<code class="eh kb kc kd ke b">Mime Types</code>，条目如下所示:</li></ul><p id="0f29" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><code class="eh kb kc kd ke b">.xap</code>-&gt;-<code class="eh kb kc kd ke b">application/x-silverlight</code>-对于Silverlight 1及以后的<code class="eh kb kc kd ke b">.xap</code>-&gt;-<code class="eh kb kc kd ke b">application/x-silverlight-2</code>(-2表示mime类型的第二个实现)-对于Silverlight 2到5<code class="eh kb kc kd ke b">.xaml</code>-&gt;' application/xaml+XML '</p><p id="3a4c" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">当应用程序启动时，<code class="eh kb kc kd ke b">Test</code> <a class="ae jc" href="https://hackernoon.com/tagged/html" rel="noopener ugc nofollow" target="_blank"> HTML </a>页面(在<code class="eh kb kc kd ke b">Bin</code>文件夹中生成)要求浏览器加载Silverlight插件，该插件在以下标记中指定:</p><pre class="ma mb mc md fq mr ke ms mt aw mu dt"><span id="d64d" class="mv kg hu ke b fv mw mx l my mz">&lt;object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%"&gt;</span></pre><p id="81b9" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">浏览器插件随后会要求提供<code class="eh kb kc kd ke b">.xap</code>文件。它基本上是一个<code class="eh kb kc kd ke b">.zip</code>文件夹，包含应用程序和应用程序清单文件中的其他<code class="eh kb kc kd ke b">.dlls</code>信息。</p><p id="2705" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">要在Silverlight插件不可用时不允许浏览器加载默认错误页面，请将<code class="eh kb kc kd ke b">object</code>标签的<code class="eh kb kc kd ke b">autoUpgrade</code>参数设置为<code class="eh kb kc kd ke b">false</code></p><pre class="ma mb mc md fq mr ke ms mt aw mu dt"><span id="790f" class="mv kg hu ke b fv mw mx l my mz">&lt;param name="autoUpgrade" value="false" /&gt;</span></pre><p id="c42f" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">url设置为所需Silverlight插件的下载链接。需要使用javascript <code class="eh kb kc kd ke b">onSilverlightError</code>。需要注意的<code class="eh kb kc kd ke b">ErrorCode</code>是<code class="eh kb kc kd ke b">8001</code>:</p><pre class="ma mb mc md fq mr ke ms mt aw mu dt"><span id="bb39" class="mv kg hu ke b fv mw mx l my mz">function onSilverlightError(sender, args) {</span><span id="867a" class="mv kg hu ke b fv na mx l my mz">if (args.ErrorCode == 8001) {<br/>  //code to run when correct Silverlight plugin version isn't available<br/> }<br/>}</span></pre><p id="3c6c" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">文件背后的Silverlight代码在<code class="eh kb kc kd ke b">partial</code>类中(一个保存事件处理，另一个用于UI处理)。使用一个<code class="eh kb kc kd ke b">XAML</code>元素等于实例化一个<code class="eh kb kc kd ke b">.NET</code>类。根据xml名称空间验证<code class="eh kb kc kd ke b">XML</code>元素。</p><h1 id="a0cb" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">有约束力的</h1><p id="4dfd" class="pw-post-body-paragraph jd je hu jf b jg ld ji jj jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka hn dt translated">要分配运行时计算的值并分配给一个属性，我们需要使用标记扩展。这些类进行绑定和资源查找。</p><p id="8d7d" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">当我们在XAML分配一个属性时，我们传递一个</p><ul class=""><li id="2090" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">线</li><li id="3c38" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">通过TypeConverter传递(转换发生在编译时)</li></ul><p id="f0eb" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><strong class="jf hv">编译时传递值</strong></p><pre class="ma mb mc md fq mr ke ms mt aw mu dt"><span id="e062" class="mv kg hu ke b fv mw mx l my mz">&lt;TextBox Text='abc' Background='Orange' /&gt;</span></pre><p id="001b" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><strong class="jf hv">运行时传递值</strong></p><pre class="ma mb mc md fq mr ke ms mt aw mu dt"><span id="f590" class="mv kg hu ke b fv mw mx l my mz">&lt;TextBox Text='{local:LatinWords}' Background='{StaticResource warning}' /&gt;</span></pre><p id="4de3" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">XAML的数据绑定类型有:</p><ul class=""><li id="c8b0" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">绑定:按数据源绑定</li><li id="8bc9" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">模板:从控件模板获取值，并将其赋给属性</li><li id="e28e" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">static resource:resource dictionary中定义的查找资源</li><li id="60b4" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">Null:将null值赋给属性</li><li id="850e" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">元素到元素的绑定:</li></ul><pre class="ma mb mc md fq mr ke ms mt aw mu dt"><span id="7a85" class="mv kg hu ke b fv mw mx l my mz">&lt;!-- Make this element idenfiable by name --&gt;<br/>&lt;TextBox Text='Hello' x:Name='textHello' Background='Goldenrod' /&gt;<br/>&lt;!-- Assign value from the above textHello to this element --&gt;<br/>&lt;TextBox Text='Goodbye' Background='{Binding ElementName=textHello, Path=Background}' /&gt;</span></pre><ul class=""><li id="82d7" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">自绑定:</li></ul><pre class="ma mb mc md fq mr ke ms mt aw mu dt"><span id="895f" class="mv kg hu ke b fv mw mx l my mz">&lt;!-- Read value red from Text property and assign it to Background property --&gt;<br/>&lt;TextBox Text='Red' Background='{Binding Text, RelativeSource={RelativeSource Self }}' /&gt;</span></pre><ul class=""><li id="8da4" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">静态资源绑定:</li></ul><pre class="ma mb mc md fq mr ke ms mt aw mu dt"><span id="9bd5" class="mv kg hu ke b fv mw mx l my mz">&lt;!-- Define a static resource --&gt;<br/>&lt;LinearGradientBrush x:Key='seaBrush'&gt;<br/> &lt;LinearGradientBrush.GradientStops&gt;<br/>  &lt;GradientStop Offset="0" Color="Yellow" /&gt;<br/>  &lt;GradientStop Offset="0.5" Color="Orange" /&gt;<br/>  &lt;GradientStop Offset="0.8" Color="LightCoral" /&gt;<br/> &lt;/LinearGradientBrush.GradientStops&gt;<br/>&lt;/LinearGradientBrush&gt;</span><span id="d645" class="mv kg hu ke b fv na mx l my mz">&lt;!-- use the seaBrush static resource for the Background property --&gt;<br/>&lt;TextBox Text='StaticResource' Background='{StaticResource seaBrush}' /&gt;</span></pre><ul class=""><li id="381c" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">空绑定:</li></ul><pre class="ma mb mc md fq mr ke ms mt aw mu dt"><span id="aec6" class="mv kg hu ke b fv mw mx l my mz">&lt;!-- Null MarkupExtension --&gt;<br/>&lt;TextBox Text='Null MarkupExtension' Background='{x:Null}' /&gt;</span></pre><ul class=""><li id="7342" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">自定义标记扩展绑定:</li></ul><pre class="ma mb mc md fq mr ke ms mt aw mu dt"><span id="30ba" class="mv kg hu ke b fv mw mx l my mz">&lt;!-- The XML namespace abc is defined which refers to abcLib in UserControl --&gt;<br/>&lt;UserControl xmlns:abc='clr-namespace:abcLib;assembly=abcLib' &gt;</span><span id="795f" class="mv kg hu ke b fv na mx l my mz">... rest of the code ...</span><span id="ae5b" class="mv kg hu ke b fv na mx l my mz">&lt;!-- use our custom markup extension--&gt;<br/>&lt;TextBox Text='{abc:LatinWords WordCount=5}' Background='{x:Null}' /&gt;<br/>&lt;/UserControl&gt;</span></pre><p id="b71d" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">而自定义标记扩展的实现是:</p><pre class="ma mb mc md fq mr ke ms mt aw mu dt"><span id="51b5" class="mv kg hu ke b fv mw mx l my mz">namespace abcLib<br/>{<br/>  public class LatinWords : IMarkupExtension&lt;string&gt;<br/>  {</span><span id="7ade" class="mv kg hu ke b fv na mx l my mz">public bool RandomStartPoint { get; set; }<br/>    public int WordCount { get; set; }</span><span id="7182" class="mv kg hu ke b fv na mx l my mz">private Int32 _numberOfWords;<br/>    private static Random ran = new Random();<br/>    private string[] _words;</span><span id="9695" class="mv kg hu ke b fv na mx l my mz">public void SetupWords()<br/>    {<br/>      // for demo limit the number of words to 100<br/>      if (WordCount &lt;= 1)<br/>      {<br/>        _numberOfWords = 1;<br/>      }<br/>      if (_numberOfWords &gt; 100)<br/>      {<br/>        _numberOfWords = 100;<br/>      }<br/>      else<br/>      {<br/>        _numberOfWords = WordCount;<br/>      }</span><span id="80a4" class="mv kg hu ke b fv na mx l my mz">_words = _sourceString.Split(' ');</span><span id="4e41" class="mv kg hu ke b fv na mx l my mz">}<br/>    public string ProvideValue(IServiceProvider serviceProvider)<br/>    {<br/>      SetupWords();<br/>      int skipCount = 0;<br/>      if (this.RandomStartPoint)<br/>      {<br/>        skipCount = ran.Next(3, 20);<br/>      }<br/>      return string.Join(" ", _words.Skip(skipCount).Take(_numberOfWords).ToArray());<br/>    }</span><span id="9bc6" class="mv kg hu ke b fv na mx l my mz">private string _sourceString = "Lorem ipsum. ";</span><span id="52c5" class="mv kg hu ke b fv na mx l my mz">}<br/>}</span></pre><h1 id="f020" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">从属财产制度</h1><p id="1d73" class="pw-post-body-paragraph jd je hu jf b jg ld ji jj jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka hn dt translated">Silverlight使用了一个由WPF团队发明的独特的属性系统。这为UI提供了服务，如动画、模板、样式，并减少了关键资源的使用(如内存)。它有两个部分:</p><ul class=""><li id="0091" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">依赖属性</li><li id="ca20" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">附加属性</li></ul><p id="c79d" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">当创建自己的用户控件时，依赖属性(如按钮元素上的:FontSize)和。净财产<strong class="jf hv">这两个</strong>都是在他们身上暴露财产的正确方式。</p><ul class=""><li id="8889" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">首先，创建一个依赖属性来处理Silverlight服务，比如数据绑定</li><li id="0c11" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">其次，创建一个. NET属性来设置和读取代码中的属性值</li></ul><p id="a2c7" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><strong class="jf hv">值解析优先级</strong></p><ol class=""><li id="9e52" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka nb lo lp lq dt translated">活动动画</li><li id="25b7" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka nb lo lp lq dt translated">本地值</li><li id="4243" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka nb lo lp lq dt translated">模板化属性</li><li id="7cc6" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka nb lo lp lq dt translated">风格引领者</li><li id="dc26" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka nb lo lp lq dt translated">属性值继承</li><li id="5cb5" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka nb lo lp lq dt translated">默认</li></ol><p id="0bc2" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">案例:</p><ul class=""><li id="6bec" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">如果一个属性的<code class="eh kb kc kd ke b">local value</code>被设置为<strong class="jf hv"> 20 </strong>并且相关的控件正在将属性值从<strong class="jf hv"> 40变为80 </strong></li><li id="3d97" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">当我们查询属性的值时，根据上面的优先级列表，将返回由当前动画步骤设置的值</li></ul><p id="5d10" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><strong class="jf hv">使用代码设置依赖属性:</strong></p><ul class=""><li id="809d" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">在<code class="eh kb kc kd ke b">XAML</code>文件中</li></ul><pre class="ma mb mc md fq mr ke ms mt aw mu dt"><span id="37e9" class="mv kg hu ke b fv mw mx l my mz">&lt;Button x:Name='sampleButton' Content='Set the Properties in Code' Click='sampleButton_Click' /&gt;</span></pre><ul class=""><li id="0d7a" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">代码隐藏</li></ul><pre class="ma mb mc md fq mr ke ms mt aw mu dt"><span id="8e77" class="mv kg hu ke b fv mw mx l my mz">private void sampleButton_Click(object sender, RoutedEventArgs e)<br/>  {<br/>   sampleButton.FontSize = 40;  // using a .NET wrapper to set value</span><span id="311a" class="mv kg hu ke b fv na mx l my mz">double size = sampleButton.FontSize; // use the .NET wrapper to read value</span><span id="4fd3" class="mv kg hu ke b fv na mx l my mz">// use the DP system directly</span><span id="566d" class="mv kg hu ke b fv na mx l my mz">sampleButton.SetValue(FontSizeProperty, 30);<br/>   size = (double)sampleButton.GetValue(FontSizeProperty);</span><span id="a2ea" class="mv kg hu ke b fv na mx l my mz">}</span></pre><p id="521f" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">Silverlight元素和控件(默认或自定义)有许多依赖属性。该系统为Silverlight元素提供动画、数据绑定、控件模板和样式等服务。为了获得这些服务，开发者需要编写“丑陋的”注册码。</p><p id="a223" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">声明和注册依赖属性的一个示例是:</p><pre class="ma mb mc md fq mr ke ms mt aw mu dt"><span id="231b" class="mv kg hu ke b fv mw mx l my mz">public partial class StarShape : UserControl {</span><span id="c506" class="mv kg hu ke b fv na mx l my mz">public StarShape()<br/> {<br/>  InitializeComponent();<br/> }</span><span id="db0d" class="mv kg hu ke b fv na mx l my mz">//declaring<br/> public static readonly DependencyProperty PointsProperty;</span><span id="754b" class="mv kg hu ke b fv na mx l my mz">//registering<br/>  static StarShape()<br/>  {</span><span id="98d1" class="mv kg hu ke b fv na mx l my mz">// 2. Register with the DP system<br/>   PointsProperty = DependencyProperty.Register("Points", typeof(double), typeof(StarShape), null);</span><span id="371b" class="mv kg hu ke b fv na mx l my mz">}<br/> }</span></pre><p id="2547" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">请注意，该属性被声明为readonly，这意味着它只能在其静态构造函数中进行实例化。</p><h1 id="5940" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">附加的依赖属性</h1><p id="fc8f" class="pw-post-body-paragraph jd je hu jf b jg ld ji jj jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka hn dt translated">它们是一种特殊的依赖属性，用于提供解耦的可扩展模型。我们可以认为它是一个“全局属性”,这意味着它对Silverlight运行时中的所有控件都可用。</p><p id="26f8" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">它由一个类型拥有和注册。同样的方法是<code class="eh kb kc kd ke b">DependencyProperty.RegisterAttached</code>。它使用点语法<code class="eh kb kc kd ke b">TypeName.AttachedProperty</code>。这些属性主要用于布局面板Canvas，Grid，DockPanel。</p><p id="91ab" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><strong class="jf hv">要点:</strong></p><ul class=""><li id="7ba2" class="li lj hu jf b jg jh jk jl jo lk js ll jw lm ka ln lo lp lq dt translated">附加的属性值存储在DPS中</li><li id="923d" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">值由赋值元素赋值</li><li id="2290" class="li lj hu jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq dt translated">所属类将从DPs中查询该值</li></ul><p id="ccba" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><a class="ae jc" href="https://goo.gl/photos/fWU5PoCK333JNVpA8" rel="noopener ugc nofollow" target="_blank">照片</a></p></div><div class="ab cl nc nd hc ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hn ho hp hq hr"><p id="1af4" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><em class="mn">最初发表于</em><a class="ae jc" href="http://xameeramir.github.io/what-is-silverlight/" rel="noopener ugc nofollow" target="_blank"><em class="mn">xameeramir . github . io</em></a><em class="mn">。</em></p><figure class="ma mb mc md fq iv"><div class="bz el l di"><div class="nj nk l"/></div></figure></div></div>    
</body>
</html>