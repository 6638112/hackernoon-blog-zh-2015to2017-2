<html>
<head>
<title>Creative coding basics - Polygons, translation and rotation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创造性编码基础-多边形，平移和旋转</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/polygons-translation-and-rotation-ecd44509aa45?source=collection_archive---------10-----------------------#2017-01-10">https://medium.com/hackernoon/polygons-translation-and-rotation-ecd44509aa45?source=collection_archive---------10-----------------------#2017-01-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="7921" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated"><em class="jj">用Javascript构建复古屏保效果</em></h2></div><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff jk"><img src="../Images/eaddab84c9e65860593399ac46c232e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8QwPcJaPvdZI7r_A4_iC6A.png"/></div></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek"><strong class="bd ka">The end game here is to use our original particle code to create a 90s screensaver effect…</strong></figcaption></figure><p id="7e52" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">如果你是这个系列的新手，从这里开始:<a class="ae kx" rel="noopener" href="/@radarboy3000/creative-coding-basics-4d623af1c647#.hn9zzliob">第一部</a>、<a class="ae kx" rel="noopener" href="/@radarboy3000/creative-coding-basics-4d623af1c647#.hn9zzliob">第二部</a>、<a class="ae kx" rel="noopener" href="/@radarboy3000/how-to-make-particles-1cbeee937593#.wwjhkv7u2">第三部</a>和<a class="ae kx" rel="noopener" href="/@radarboy3000/playing-with-particles-ef87744d7ed2#.ntk4zugse">第四部。</a></p><p id="ee81" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">这些教程的所有代码和库都可以在这里找到:<a class="ae kx" href="https://github.com/GeorgeGally/creative_coding" rel="noopener ugc nofollow" target="_blank">https://github.com/GeorgeGally/creative_coding</a></p><p id="f079" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">你好，创意程序员。首先，我想向你展示如何绘制一种新的形状——多边形，并最终为我们建立一个90年代的屏保效果。</p><p id="8514" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">我们可以使用我的<a class="ae kx" href="https://github.com/GeorgeGally/creative_coding" rel="noopener ugc nofollow" target="_blank"> creative_coding.js </a>函数简单地绘制任何多边形形状:<em class="ky"> fillPolygon() </em>和<em class="ky"> strokePolygon() </em>:</p><pre class="jl jm jn jo fq kz la lb lc aw ld dt"><span id="7a99" class="le lf hu la b fv lg lh l li lj">ctx.fillPolygon(x, y, number_of_sides, size);<br/>ctx.strokePolygon(x, y, number_of_sides, size);</span></pre><p id="3819" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">虽然您不需要知道这些函数在幕后是如何工作的，但是如果您感兴趣的话，我们可以通过使用sin和cos来计算多边形的点，从而构建一个多边形:</p><pre class="jl jm jn jo fq kz la lb lc aw ld dt"><span id="6494" class="le lf hu la b fv lg lh l li lj">ctx.polygon = function (_x, _y, sides, size){<br/> this.beginPath();<br/> this.moveTo (_x +  size * Math.cos(0), _y +  size *  Math.sin(0));<br/> for (var i = 1; i &lt;= sides; i += 1) {<br/>    this.lineTo (_x + size * Math.cos(i * 2 * Math.PI / sides), <br/>                 _y + size * Math.sin(i * 2 * Math.PI / sides));<br/>  }<br/>}</span></pre><p id="8cb3" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">在后面的教程中，我将介绍<em class="ky"> Math.sin和Math.cos，</em>创造性程序员的好朋友。</p><p id="3658" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">因此，使用我们的旧粒子代码，我们最初的drawBall()函数现在看起来像这样(我使用一个实心多边形，然后是一个描边多边形，以获得轮廓效果:</p><pre class="jl jm jn jo fq kz la lb lc aw ld dt"><span id="1e39" class="le lf hu la b fv lg lh l li lj">function drawBall(){<br/>  for (var i = 0; i &lt; balls.length; i++) {<br/>    var b = balls[i];<br/>    ctx.fillStyle = b.colour;<br/>    <strong class="la hv">ctx.fillPolygon(b.x, b.y, 8, b.size);</strong><br/>    ctx.strokeStyle = rgba(255, 0.6);<br/>    <strong class="la hv">ctx.strokePolygon(b.x, b.y, 8, b.size);</strong><br/>  }<br/>}</span></pre><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff lk"><img src="../Images/f2b4e87e32a31f0f6ad6c121093c126f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ph3w6IXlTQE6LqWriktLEw.png"/></div></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek">Polygon particles</figcaption></figure><p id="10fb" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">画一个多边形，然后不得不画另一个看起来像重复。我刚刚意识到我已经打破了我自己的规则3(做一件事三次，必须做一个函数)，所以我们开始吧:</p><pre class="jl jm jn jo fq kz la lb lc aw ld dt"><span id="7551" class="le lf hu la b fv lg lh l li lj">this.outlinedPolygon = function (_x, _y, _sides, _size, _fill, _stroke){<br/>  this.fillStyle = _fill;<br/>  this.fillPolygon(_x, _y, _sides, _size);<br/>  this.strokeStyle = _stroke;<br/>  this.strokePolygon(x, y, _sides, _size);<br/>}</span></pre><p id="bcab" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">所以现在我们的drawBall()函数可以简化了:</p><pre class="jl jm jn jo fq kz la lb lc aw ld dt"><span id="1991" class="le lf hu la b fv lg lh l li lj">function drawBall(){<br/>  for (var i = 0; i &lt; balls.length; i++) {<br/>    var b = balls[i];<br/>    <strong class="la hv">ctx.outlinedPolygon(b.x, b.y, 8, b.size, "black", "white");</strong><br/>  }<br/>}</span></pre><p id="ec2e" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">(也许<em class="ky"> outlinedPolygon </em>是个蹩脚的名字，其实很有可能，不过没关系，如果不贴，我以后再改，自建库的诸多好处之一)。</p><p id="e425" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">接下来，让我们用一个微妙的变化来调整代码，这将使一切看起来更好，通过在多边形移动时轻微旋转它们。</p><p id="edd6" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">但要做到这一点，我需要向你介绍翻译，这可能看起来比实际更复杂…</p><ul class=""><li id="be01" class="ll lm hu kd b ke kf kh ki kk ln ko lo ks lp kw lq lr ls lt dt translated">首先要旋转一个对象，我们实际上是旋转整个画布/页面，然后将它移动回原始状态。我们首先用:<em class="ky"> ctx.save()保存屏幕的当前状态；</em>然后用<em class="ky"> ctx.restore()恢复到原始状态；</em></li><li id="c3d4" class="ll lm hu kd b ke lu kh lv kk lw ko lx ks ly kw lq lr ls lt dt translated">在我们保存了画布状态之后，我们想要旋转我们的对象。然而，默认情况下，事物从屏幕的中心旋转，我们希望旋转每个单独的对象。因此，我们需要将中心点设置为对象的中心点，我们通过使用<em class="ky"> ctx.translate(x，y)来做到这一点；</em></li><li id="c77f" class="ll lm hu kd b ke lu kh lv kk lw ko lx ks ly kw lq lr ls lt dt translated">然后我们可以使用<em class="ky"> ctx.rotate(弧度)旋转我们的对象；</em> <a class="ae kx" href="https://en.wikipedia.org/wiki/Radian" rel="noopener ugc nofollow" target="_blank">弧度</a>，hmmm，对。不爱他们。它们似乎总是比它们的价值更麻烦，所以我使用我自己的函数<em class="ky">CTX . rotated degrees(degrees)，</em>对我来说，它似乎更人性化。</li><li id="a145" class="ll lm hu kd b ke lu kh lv kk lw ko lx ks ly kw lq lr ls lt dt translated">在0，0处绘制对象——因为我们已经将整个画布移动到对象的x和y点。</li><li id="dc55" class="ll lm hu kd b ke lu kh lv kk lw ko lx ks ly kw lq lr ls lt dt translated">一旦我们旋转了我们的对象，如上所述，我们需要用<em class="ky"> ctx.restore()将屏幕恢复到原始状态；</em></li></ul><p id="3314" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">似乎有点复杂。但事实并非如此，它的工作原理总是一样的。保存。翻译。旋转。还原。像这样:</p><pre class="jl jm jn jo fq kz la lb lc aw ld dt"><span id="ae5f" class="le lf hu la b fv lg lh l li lj"><em class="ky">// save the current state of the canvas</em><br/><strong class="la hv">ctx.save();<br/></strong><em class="ky">// move the centrepoint to that of your object you want to rotate</em><strong class="la hv"><br/>ctx.translate(b.x, b.y);<br/></strong><em class="ky">// rotate your object with ctx.rotate() or ctx.rotateDegrees()<br/></em><strong class="la hv">ctx.rotateDegrees(radians);<br/></strong><em class="ky">...draw your shapes</em><br/><em class="ky">// restore to the original state of the canvas</em><br/><strong class="la hv">ctx.restore();</strong></span></pre><p id="c426" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">所以我们的整个drawBall()函数现在看起来像这样:</p><pre class="jl jm jn jo fq kz la lb lc aw ld dt"><span id="409b" class="le lf hu la b fv lg lh l li lj">function drawBall(){<br/>  for (var i = 0; i &lt; balls.length; i++) {<br/>    var b = balls[i];<br/>    ctx.fillStyle = b.colour;<br/>    <strong class="la hv">ctx.save();</strong><br/>    <strong class="la hv">ctx.translate(b.x, b.y);</strong><br/>    <strong class="la hv">ctx.rotate(b.rotation);</strong><br/>    <strong class="la hv">ctx.outlinedPolygon(0, 0, 8, b.size, "black", "white");</strong><br/>    <strong class="la hv">ctx.restore();</strong><br/>  }<br/>}</span></pre><p id="f4ef" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated"><em class="ky">(我们需要记住，如果我们已经用ctx.translate()将画布移动到我们对象的中心点，我们现在必须为0，0绘制我们的对象。)</em></p><p id="a897" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">我们需要做的唯一其他主要事情是给每个粒子添加一个旋转属性，这样我们就可以跟踪它们各自的旋转。然后，我们在moveBall()函数中递增这个旋转变量，因此我们的整个代码将如下所示:</p><pre class="jl jm jn jo fq kz la lb lc aw ld dt"><span id="0a53" class="le lf hu la b fv lg lh l li lj">var ctx = createCanvas("canvas1");<br/>var number_of_balls = 4;<br/>var balls = [];<br/>ctx.lineWidth = 1;</span><span id="ef7b" class="le lf hu la b fv lz lh l li lj">// push a ball and it's values into the array<br/>for (var i = 0; i &lt; number_of_balls; i++) {<br/>  addBall();<br/>}</span><span id="e4f3" class="le lf hu la b fv lz lh l li lj">function addBall(){<br/>  var ball = {<br/>    x: random(w),<br/>    y: random(h),<br/>    speed_x: random(3,5),<br/>    speed_y: random(3,5),<br/>    size: 70,<br/>    colour: rgb(255),<br/>    <strong class="la hv">rotation: random(1)</strong><br/>  }<br/>  balls.push(ball);<br/>}</span><span id="f85f" class="le lf hu la b fv lz lh l li lj">function draw(){</span><span id="5ece" class="le lf hu la b fv lz lh l li lj">//ctx.background(255, 0.2);<br/>  moveBall();<br/>  drawBall();<br/>}</span><span id="249e" class="le lf hu la b fv lz lh l li lj">function moveBall(){</span><span id="c561" class="le lf hu la b fv lz lh l li lj">  for (var i = 0; i &lt; balls.length; i++) {<br/>    var b = balls[i];<br/>    b.x += b.speed_x;<br/>    b.y += b.speed_y;<br/>    <strong class="la hv">b.rotation += 2;</strong><br/>    if (bounce(b.x, 0, w, b.size)) {<br/>      b.speed_x *=-1;<br/>    }</span><span id="12b9" class="le lf hu la b fv lz lh l li lj">   if (bounce(b.y, 0 ,h, b.size)) {<br/>      b.speed_y *=-1;<br/>    }</span><span id="d1df" class="le lf hu la b fv lz lh l li lj">  }</span><span id="a342" class="le lf hu la b fv lz lh l li lj">}</span><span id="ab79" class="le lf hu la b fv lz lh l li lj"><br/>function drawBall(){<br/>  for (var i = 0; i &lt; balls.length; i++) {<br/>    var b = balls[i];<br/>    ctx.save();<br/>    ctx.translate(b.x, b.y);<br/>    <strong class="la hv">ctx.rotateDegrees(b.rotation);</strong><br/>    ctx.outlinedPolygon(0, 0, 8, b.size, "black", "white");<br/>    ctx.restore();<br/>  }<br/>}</span></pre><p id="2db1" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">现在我们有了多边形屏幕保护程序:</p><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff lk"><img src="../Images/0e0001a2beed13b5ebbe560fc7eedb74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4PGD8t_M8CeB71QvnWHMkw.png"/></div></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek">Polygons!</figcaption></figure><p id="c777" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">就这样了。对于这种代码，你可以做很多事情。Hppy编码…</p><p id="abf6" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated"><strong class="kd hv">在Instagram这里关注我:</strong><a class="ae kx" href="https://www.instagram.com/radarboy3000/" rel="noopener ugc nofollow" target="_blank"><strong class="kd hv">https://www.instagram.com/radarboy3000/</strong></a></p><p id="ecb3" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated"><strong class="kd hv">在这里关注我的推特:</strong><a class="ae kx" href="https://twitter.com/radarboy_japan" rel="noopener ugc nofollow" target="_blank">【https://twitter.com/radarboy_japan】T21</a></p><p id="c0ad" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated"><strong class="kd hv">又如我这里的脸书页:</strong><a class="ae kx" href="https://www.facebook.com/radarboy3000" rel="noopener ugc nofollow" target="_blank"><strong class="kd hv">https://www.facebook.com/radarboy3000</strong></a></p><p id="2a89" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">以下是我之前的创意编码教程:</p><p id="cb53" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">创意编码入门第一部分:<a class="ae kx" rel="noopener" href="/@radarboy3000/creative-coding-basics-4d623af1c647#.hn9zzliob">https://medium . com/@ radarboy 3000/Creative-Coding-basics-4d 623 af 1c 647 # . HN 9 zzliob</a></p><p id="eec7" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">创意编码入门第二部分:<a class="ae kx" rel="noopener" href="/@radarboy3000/introduction-to-creative-coding-part-2-d869832d9ffb#.fzxcom541">https://medium . com/@ radarboy 3000/introduction-to-Creative-Coding-Part-2-d 869832 d9 FB # . fzxcom 541</a></p><p id="da91" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">创意编码入门第三部分:<a class="ae kx" rel="noopener" href="/@radarboy3000/how-to-make-particles-1cbeee937593#.wwjhkv7u2">https://medium . com/@ radarboy 3000/how-to-make-particles-1 cbee 937593 # . wwjhkv 7 u 2</a></p><p id="d171" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">创意编码介绍第四部分:<a class="ae kx" rel="noopener" href="/@radarboy3000/playing-with-particles-ef87744d7ed2#.5r081j34l">https://medium . com/@ radarboy 3000/playing-with-particles-ef 87744d 7 ed 2 # . 5r 081j 34 l</a></p><p id="4994" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">Github仓库中的所有代码:【https://github.com/GeorgeGally/creative_coding T4】</p><div class="jl jm jn jo fq ab cb"><figure class="ma jp mb mc md me mf paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="ma jp mb mc md me mf paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="ma jp mb mc md me mf paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mg mh mi"><p id="f922" class="kb kc ky kd b ke kf iv kg kh ki iy kj mj kl km kn mk kp kq kr ml kt ku kv kw hn dt translated"><a class="ae kx" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kx" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kx" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kx" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="kb kc ky kd b ke kf iv kg kh ki iy kj mj kl km kn mk kp kq kr ml kt ku kv kw hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kx" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kx" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff mm"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>