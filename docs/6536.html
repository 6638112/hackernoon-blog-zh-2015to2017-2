<html>
<head>
<title>Discovering Alibaba Cloud — Deploying a Wordpress Cluster Using The Container Service</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">发现阿里云——使用容器服务部署Wordpress集群</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/discovering-alibaba-cloud-deploying-a-wordpress-cluster-using-the-container-service-ce51cffac066?source=collection_archive---------8-----------------------#2017-09-23">https://medium.com/hackernoon/discovering-alibaba-cloud-deploying-a-wordpress-cluster-using-the-container-service-ce51cffac066?source=collection_archive---------8-----------------------#2017-09-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="28a0" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">放弃</h2></div><p id="2d66" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">此内容是我们在线课程/培训的一部分/灵感来源。在2019年黑色星期五期间，我们对这些材料提供高达80%的折扣。</p><p id="ede3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">您可以在这里享受您的<a class="ae kf" href="http://bf.eralabs.io" rel="noopener ugc nofollow" target="_blank">折扣。</a></p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><a href="http://bf.eralabs.io"><div class="fe ff kg"><img src="../Images/f322772403668f8316905cec24b85586.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B0qBLWIa0zP-zJcrenZN8w.png"/></div></a></figure></div><div class="ab cl ko kp hc kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hn ho hp hq hr"><p id="aba3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">本文的目标是使用真实世界的例子来发现阿里云。我们将使用Docker容器创建一个Wordpress网站，我们将使用阿里巴巴容器服务来部署它。</p><p id="0944" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">你应该创建一个帐户，设置你的支付信息，但你会得到300美元的免费信贷。</p><p id="6a20" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">完整的教程和更多内容发表在我的培训<a class="ae kf" href="http://painlessdocker.com" rel="noopener ugc nofollow" target="_blank">无痛码头</a>中。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff kv"><img src="../Images/5d9bee7314f502418e5f097cf0bb7370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AnDyrLgCPKfHcaSBYJaXyA.png"/></div></div></figure><p id="751f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">请访问<a class="ae kf" href="http://painlessdocker.com" rel="noopener ugc nofollow" target="_blank">培训网站</a>了解更多详情。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><a href="http://painlessdocker.com"><div class="fe ff la"><img src="../Images/7f603dcdb28328c86400a4d325b7be97.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*a02rarYYYvd7GalkyQ3AXg.jpeg"/></div></a></figure><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff kv"><img src="../Images/5d9bee7314f502418e5f097cf0bb7370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AnDyrLgCPKfHcaSBYJaXyA.png"/></div></div></figure><p id="3ec0" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">像AWS一样，首先创建一个<strong class="jl hv"> VPC </strong>，这是一个专用于您帐户的虚拟网络。这样设置的目的是从逻辑上将您的基础架构和资源与同一云中的其他虚拟网络隔离开来。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff lb"><img src="../Images/d31f8baf8237d914eddfa03d1a6a7905.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XmusfLSLSIP3VsUwCCpmdw.jpeg"/></div></div></figure><p id="2b10" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">创建一个<strong class="jl hv"> Vswitch </strong>或虚拟交换机，以便选择您的云区域、CIDR和您网络中的IP地址数量。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff lc"><img src="../Images/2b18f573a8f28888b8e50c43ed0e5144.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8_I92F_Z2qg28Vzd_vPOZQ.jpeg"/></div></div></figure><p id="7b5b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">激活<strong class="jl hv">资源访问管理</strong>:身份和访问控制服务，使您能够集中管理您的用户(包括员工、系统或应用程序)，并通过权限级别安全地控制他们对您的资源的访问。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff ld"><img src="../Images/f704f42b6389984f3f966d6144cd79bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZHskQZRUb82HlSOdWsQyDg.jpeg"/></div></div></figure><p id="91ea" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">转到您的控制台主页并选择<strong class="jl hv">容器服务</strong>。</p><p id="c33c" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在创建一个集群:</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff le"><img src="../Images/9d09a7a7692ced404e7f58ed7f5d4fe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dxnmeAmYqqoQQKoOBJ75Jg.jpeg"/></div></div></figure><p id="e885" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">选择集群的名称并选择VPC。选择一个区域和一个分区。我保持其他一切的默认值。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff lf"><img src="../Images/4de057e39325fbc4fe5c73897098fe39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WYA1K1XS4UbgSnSsWaFjjA.jpeg"/></div></div></figure><p id="e3e6" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">创建群集可能需要一些时间。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff lg"><img src="../Images/51508e62c3c90e49ab8302473876c63f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ABmbX2rmGrUZz-xRWhdsoA.jpeg"/></div></div></figure><p id="5ad6" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我们从创建应用程序开始</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff lh"><img src="../Images/8562531c4a57f4e81203bd5bafda37c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BF4NciookF2o_N73P0YuYQ.jpeg"/></div></div></figure><p id="ae69" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我将我的应用程序命名为“wordpress ”,选择我创建的集群，并选择“Pull Docker Image ”,以便在没有指定tag时获取最新的Docker图像。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff li"><img src="../Images/5c1ba31429ff87e295933f90d42da84c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eZ9S29dVW-OxqdTZYBgvZA.jpeg"/></div></div></figure><p id="57c0" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们可以使用“用图像创建”或“用编排模板创建”。</p><p id="757b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">您可以使用编排模板来定义和部署多容器应用程序。</p><p id="002a" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">支持Docker撰写格式。</p><p id="cab3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">单击“使用现有的编排模板”时，您可以访问预定义的编排模板或一些默认设置的模板。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div class="fe ff lj"><img src="../Images/91ad395bb50ff0e00b33ede1f56575f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*j4Qg6JjrBQJY1J-iTtGSFg.jpeg"/></div></figure><p id="97ad" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">使用预定义的Wordpress模板对我们来说更容易和更快，我们将在剩下的部分使用它。</p><p id="f098" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">看起来是这样的:</p><pre class="kh ki kj kk fq lk ll lm ln aw lo dt"><span id="8d8c" class="lp lq hu ll b fv lr ls l lt lu">web:<br/>  image: registry.aliyuncs.com/acs-sample/wordpress:4.5<br/>  ports:<br/>    - '80'<br/>  environment:<br/>    WORDPRESS_AUTH_KEY: changeme<br/>    WORDPRESS_SECURE_AUTH_KEY: changeme<br/>    WORDPRESS_LOGGED_IN_KEY: changeme<br/>    WORDPRESS_NONCE_KEY: changeme<br/>    WORDPRESS_AUTH_SALT: changeme<br/>    WORDPRESS_SECURE_AUTH_SALT: changeme<br/>    WORDPRESS_LOGGED_IN_SALT: changeme<br/>    WORDPRESS_NONCE_SALT: changeme<br/>    WORDPRESS_NONCE_AA: changeme<br/>  restart: always<br/>  links:<br/>    - 'db:mysql'<br/>  labels:<br/>    aliyun.logs: /var/log<br/>    aliyun.probe.url: <a class="ae kf" href="http://container/license.txt" rel="noopener ugc nofollow" target="_blank">http://container/license.txt</a><br/>    aliyun.probe.initial_delay_seconds: '10'<br/>    aliyun.routing.port_80: <a class="ae kf" href="http://wordpress" rel="noopener ugc nofollow" target="_blank">http://wordpress</a><br/>    aliyun.scale: '3'<br/>db:<br/>  image: registry.aliyuncs.com/acs-sample/mysql:5.7<br/>  environment:<br/>    MYSQL_ROOT_PASSWORD: password<br/>  restart: always<br/>  labels:<br/>    aliyun.logs: /var/log/mysql</span></pre><p id="0f4f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果您尝试使用V3 Wordpress orchestration文件，您将会得到以下错误消息:</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div class="fe ff lv"><img src="../Images/c588c656065271c3aec1d1e8f8c8dcce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*5GvSYAwEXYg_iIpGkYDWPQ.jpeg"/></div></figure><p id="89fa" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们的Docker集群与Docker Compose v3不兼容！这是错误消息告诉我们的内容。</p><p id="1d1a" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这是我的集群的样子</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff lw"><img src="../Images/ee1cf8abcfe3f01f8521c779515f6d21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3-HYWDP1L7il4xYNqzOkaw.jpeg"/></div></div></figure><p id="0a7a" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在转到服务器负载平衡器服务，以访问外部负载平衡器的IP地址。后者将在我们的两个集群实例之间自动分配流量。</p><p id="df26" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">到目前为止，我们使用两个节点的集群创建了一个Wordpress，每个节点托管Web和DB容器，以及一个外部负载平衡器来将流量分发到我们的节点。</p><p id="a19a" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在这一点上，我可以挑出一些利弊:</p><h1 id="ce8d" class="lx lq hu bd ly lz ma mb mc md me mf mg ja mh jb mi jd mj je mk jg ml jh mm mn dt translated">缺点:</h1><p id="b5a1" class="pw-post-body-paragraph jj jk hu jl b jm mo iv jo jp mp iy jr js mq ju jv jw mr jy jz ka ms kc kd ke hn dt translated">在创建集群和应用程序时，我感觉速度有些慢。我测试了3或4个集群，每次阿里云都非常非常慢！！</p><p id="51b8" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我不确定这是否特定于集群和容器编排或其他服务可能会经历同样的缓慢操作。</p><p id="e7b6" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我还注意到GUI中的一些其他错误，一些按钮没有响应，我必须重新加载页面才能点击按钮..</p><p id="f53b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">英语可以作为控制台的主要语言，但是我收到了一条用中文写的错误信息..</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff mt"><img src="../Images/880a8acd75a87c6930a00e7e772fe715.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kZlylojA3K1-RfSOMwOKnw.jpeg"/></div></div></figure><h1 id="d1f7" class="lx lq hu bd ly lz ma mb mc md me mf mg ja mh jb mi jd mj je mk jg ml jh mm mn dt translated">优点:</h1><p id="956d" class="pw-post-body-paragraph jj jk hu jl b jm mo iv jo jp mp iy jr js mq ju jv jw mr jy jz ka ms kc kd ke hn dt translated">容器编排服务的存在对于阿里云用户来说是一个很好的点。并非每个云提供商都有这项服务。</p><p id="ba78" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我发现使用Docker Compose文件的可能性和将集群设置为群模式(beta)的可能性非常有用。</p><p id="7f10" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">当使用阿里云时，你会注意到你会被引导去建立网络和安全的最佳实践。您应该创建一个VPC和一个网络，设置，激活资源管理..等等</p><p id="9a33" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">阿里云正在实施已知的标准，所以如果你之前一直在使用GCP或AWS，你会注意到阿里巴巴与你一直使用的没有太大不同。</p><p id="7192" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">阿里云在提供特价和免费服务方面相当慷慨，这是一个非常好的观点！</p><h1 id="0e38" class="lx lq hu bd ly lz ma mb mc md me mf mg ja mh jb mi jd mj je mk jg ml jh mm mn dt translated">连接更深</h1><p id="ca45" class="pw-post-body-paragraph jj jk hu jl b jm mo iv jo jp mp iy jr js mq ju jv jw mr jy jz ka ms kc kd ke hn dt translated">在本教程中，我们使用阿里云容器服务原型化了一个Wordpress博客。</p><blockquote class="mu"><p id="223b" class="mv mw hu bd mx my mz na nb nc nd ke ek translated">如果你喜欢这篇文章或者想找到类似的教程，你会喜欢上<a class="ae kf" href="http://painlessdocker.com" rel="noopener ugc nofollow" target="_blank">无痛码头课程</a>。</p></blockquote><p id="c3b2" class="pw-post-body-paragraph jj jk hu jl b jm ne iv jo jp nf iy jr js ng ju jv jw nh jy jz ka ni kc kd ke hn dt translated">你也可以注册<a class="ae kf" href="http://devopslinks.com" rel="noopener ugc nofollow" target="_blank"> DevOpsLinks </a>，一个DevOps专业网络和我们的<a class="ae kf" href="http://discuss.devopslinks.com" rel="noopener ugc nofollow" target="_blank"> DevOps讨论板</a>，在那里你可以问和回答DevOps相关的问题！</p><p id="1a25" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们还开始了<a class="ae kf" href="http://shipped.devopslinks.com" rel="noopener ugc nofollow" target="_blank">发货时事通讯</a>:一个关注容器&amp;编排的独立时事通讯。</p><blockquote class="mu"><p id="9d74" class="mv mw hu bd mx my mz na nb nc nd ke ek translated">如果您对了解AWS等其他云提供商更感兴趣，您可以使用此表格<a class="ae kf" href="https://eon01.typeform.com/to/MMPiyz" rel="noopener ugc nofollow" target="_blank">注册</a>，我将与您分享我的一些新项目和一些欢迎礼物！</p></blockquote><p id="2f80" class="pw-post-body-paragraph jj jk hu jl b jm ne iv jo jp nf iy jr js ng ju jv jw nh jy jz ka ni kc kd ke hn dt translated">黑客快乐:-)</p></div></div>    
</body>
</html>