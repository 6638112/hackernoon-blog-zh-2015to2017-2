<html>
<head>
<title>PaaS — A blessing or a curse?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PaaS——是福是祸？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/paas-a-blessing-or-a-curse-7398c08506bd?source=collection_archive---------12-----------------------#2017-05-17">https://medium.com/hackernoon/paas-a-blessing-or-a-curse-7398c08506bd?source=collection_archive---------12-----------------------#2017-05-17</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="590a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我刚刚在medium 上看到了一篇<a class="ae jp" rel="noopener" href="/@contact_16315/firebase-costs-increased-by-7-000-81dc0a27271d">非常有趣的文章，讨论了Firebase定价的变化如何导致家庭自动化</a><a class="ae jp" href="https://hackernoon.com/tagged/startup" rel="noopener ugc nofollow" target="_blank">初创公司</a>的成本增加了7000%。作为实时后台服务<a class="ae jp" href="http://www.deepstreamhub.com" rel="noopener ugc nofollow" target="_blank"> deepstreamHub </a>的联合创始人，这一点非常切中要害。因此，我很乐意就我们在开发和运行平台即服务(“PaaS”)产品时所面临的挑战以及我们如何努力克服这些挑战提供一些见解。</p><p id="5a77" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们先来了解一下为什么PaaS是一个如此繁荣的行业。</p><p id="b347" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">经营任何有竞争力的企业的梦想是提供更低的成本。这通常通过提供多租户系统来实现，该系统允许多个用户共享您的系统资源。与度假屋<a class="ae jp" href="https://en.wikipedia.org/wiki/Timeshare" rel="noopener ugc nofollow" target="_blank">分时度假</a>或AWS基础设施即服务基本相同。你认为你有一台完整的机器，但你实际上一小时只有几分钟。对用户的好处？您可以以不到50美元的成本运行您的整个堆栈，并且您永远不需要担心基础架构问题，如扩展、数据库迁移、安全问题、ssl问题等等……对于平台本身来说，我们的优势是能够有效地分配负载(这意味着我们实际上可以盈利)，专注于困难方面，并专注于通过每一个版本来改善体验。</p><p id="adf0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">好吧，这是一个PaaS公司的人说的，所以我可以理解这可能会被怀疑。来自开发人员的一般评论表明，避免供应商锁定的更好方法可能是自己托管一切。有道理对吗？你可以使用像<a class="ae jp" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>和docker Swarm这样的容器编排服务来运行你自己的Docker映像，或者利用像<a class="ae jp" href="https://aws.amazon.com/ecs/details/" rel="noopener ugc nofollow" target="_blank"> AWS的弹性容器服务</a>或<a class="ae jp" href="https://cloud.google.com/container-engine/" rel="noopener ugc nofollow" target="_blank">谷歌容器引擎</a>这样的云产品的所有好处来减少你的买入费。最终，您不再依赖特定供应商的任何产品，而是在价格或条款发生变化时，转向任何其他基于基础架构的公司。</p><p id="b080" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从概念上来说，这一切都很棒。人们有时容易忘记的一点是，当你使用特定的供应商开发应用程序时，你可能已经花费了数千美元，你在平台本身上的经常性成本仍然低于每月50美元。那是一笔相当不错的交易。</p><p id="55f6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">作为一个热爱devops的人，让我们将它分解为如何实际部署相同的服务来支持实时应用程序。在完全公开的情况下，我将基于<a class="ae jp" href="https://deepstream.io/" rel="noopener ugc nofollow" target="_blank"> deepstream.io </a>，为deepstreamHub提供动力的开源核心。这些要求是:</p><ul class=""><li id="596f" class="jq jr hu it b iu iv iy iz jc js jg jt jk ju jo jv jw jx jy dt translated">持续正常运行时间</li><li id="617d" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">提供低延迟的集中式高速缓存</li><li id="2501" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">持久数据库</li><li id="b7b1" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">SSL，因为是2017人</li></ul><p id="faef" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这意味着在AWS上托管deepstream.io至少需要:</p><ul class=""><li id="cf49" class="jq jr hu it b iu iv iy iz jc js jg jt jk ju jo jv jw jx jy dt translated">两个独立可用性区域中的两台机器</li><li id="ea98" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">允许它们相互通信的消息总线</li><li id="4b8e" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">允许快速读取和写入的缓存层，允许大约16毫秒的延迟</li><li id="c57e" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">持久数据的数据库</li></ul><p id="ac02" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，看起来应该是这样的(截至今天的发布日期):</p><figure class="kf kg kh ki fq kj fe ff paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="fe ff ke"><img src="../Images/543f01366a319ae8416d8fb548053d4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GrJnXkJyyClF3oinfkIOEA.png"/></div></div></figure><p id="6491" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这几乎是50美元，没有任何附加的隐性成本，例如吞吐量成本(这确实增加了！)、<a class="ae jp" href="https://aws.amazon.com/elasticloadbalancing/applicationloadbalancer/pricing/" rel="noopener ugc nofollow" target="_blank"> ALB单位</a>，建立和维护的费用等。</p><p id="a1e4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">还要记住，这是可能的最小堆栈！一台纳米机提供512mb内存1分钟<a class="ae jp" href="https://aws.amazon.com/ec2/instance-types/#burst" rel="noopener ugc nofollow" target="_blank"> CPU爆仓</a>！这意味着你的负载需要非常非常小才能工作。</p><p id="78e7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">完全公开，我们在我们的开发环境中使用该堆栈——对于非生产用例来说非常便宜！</p><p id="8ad4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">好吧，我希望我还有你们！我希望你们都同意，自托管某些系统并不像PaaS看起来那么便宜。</p><p id="4022" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这就把我们带到了这篇文章的主要和最重要的部分。</p><p id="b628" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用平台作为服务是祸是福？</p><p id="d457" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我个人的看法，明显略显偏颇，就是那两者都可以！能够使用既开源又为你托管的东西绝对应该被认为是一种福气。在这个领域里，有些人喜欢:</p><ul class=""><li id="b7b5" class="jq jr hu it b iu iv iy iz jc js jg jt jk ju jo jv jw jx jy dt translated"><a class="ae jp" href="https://deepstreamhub.com" rel="noopener ugc nofollow" target="_blank"> deepstreamHub </a>(基于deepstream.io)</li><li id="cbc9" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated"><a class="ae jp" href="https://www.graph.cool/" rel="noopener ugc nofollow" target="_blank"> graph.cool </a>(基于graphql协议)</li><li id="938c" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated"><a class="ae jp" href="http://baasil.io" rel="noopener ugc nofollow" target="_blank"> baasil.io </a>(基于socketcluster)</li><li id="f0f6" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated"><a class="ae jp" href="https://www.meteor.com/hosting" rel="noopener ugc nofollow" target="_blank">流星星系</a>(基于流星)</li><li id="868c" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated"><a class="ae jp" href="https://aws.amazon.com/lambda/" rel="noopener ugc nofollow" target="_blank"> AWS Lambda </a>(我马上就要说到这个了！)</li></ul><p id="bb39" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这样做的好处是，如果发生了一些事情，如价格飙升、不受欢迎的新条款，或者甚至是您真正想要的功能集丢失，就会有足够多的人在生产中自托管，从而使迁移到自托管环境几乎与将数据从一个地方导出到另一个地方一样无缝。</p><p id="4274" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">诅咒是如果它不是开源的，你的供应商锁定会从背后咬你一口。parse等一些平台通过在正式下线之前提前开源其核心，使这种诅咒变得更容易忍受，但只要你不能做出这种保证，就总会有相关的风险。</p><p id="a78c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，正如今天对令人惊讶的<a class="ae jp" rel="noopener" href="/@contact_16315/firebase-costs-increased-by-7-000-81dc0a27271d">见解深刻的博客文章</a>的一些评论:</p><blockquote class="kq kr ks"><p id="93ee" class="ir is kt it b iu iv iw ix iy iz ja jb ku jd je jf kv jh ji jj kw jl jm jn jo hn dt translated">Alex R. Young建议说:“依赖AWS Lambda不会潜在地导致同样的问题吗？当您可以在容器或虚拟机中运行服务，并且可以轻松地重新部署到任何三巨头的架构中时，为什么还要依赖任何特定的供应商提供的服务呢？"</p></blockquote><p id="7b78" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我最近参加了一个AWS峰会，会上强烈推荐将你的应用程序逻辑构建成一个独立的依赖项。入口点应该足够通用，既可以从lambda运行，也可以从运行在您自己的机器实例上的http服务器、docker服务运行，或者在我们的例子中，甚至可以从不同的协议调用(deepstream.io <a class="ae jp" href="https://deepstreamhub.com/docs/client-js/reqres-client-rpc/" rel="noopener ugc nofollow" target="_blank"> RPCs </a>)。</p><blockquote class="kq kr ks"><p id="5986" class="ir is kt it b iu iv iw ix iy iz ja jb ku jd je jf kv jh ji jj kw jl jm jn jo hn dt translated">请记住，您使用的服务随时都可能发生变化，如果您不小心的话，会让您陷入别无选择的境地。</p><p id="2ae4" class="ir is kt it b iu iv iw ix iy iz ja jb ku jd je jf kv jh ji jj kw jl jm jn jo hn dt translated">只要有可能，就依靠自己的基础设施。SaaS模式似乎对初创公司和服务提供商都很有吸引力……但最终，被它咬了一口的是初创公司，真正赚钱的是服务提供商。</p><p id="5aa1" class="ir is kt it b iu iv iw ix iy iz ja jb ku jd je jf kv jh ji jj kw jl jm jn jo hn dt translated">总是大量考虑开源替代方案(当时Firebase还没有这种东西…)，但是现在已经有了替代方案，比如Horizon和Backendless。</p></blockquote><p id="ed67" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我希望我在这篇文章中已经很好地涵盖了这两个方面，并希望听到你对此的想法！</p><div class="kf kg kh ki fq ab cb"><figure class="kx kj ky kz la lb lc paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="kx kj ky kz la lb lc paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="kx kj ky kz la lb lc paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="kq kr ks"><p id="f922" class="ir is kt it b iu iv iw ix iy iz ja jb ku jd je jf kv jh ji jj kw jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is kt it b iu iv iw ix iy iz ja jb ku jd je jf kv jh ji jj kw jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kf kg kh ki fq kj fe ff paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="fe ff ld"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="kf kg kh ki fq kj"><div class="bz el l di"><div class="le lf l"/></div></figure></div></div>    
</body>
</html>