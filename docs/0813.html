<html>
<head>
<title>Use a ssh tunnel to create a simple VPN in OSX to watch country-blocked streaming — via script.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用ssh隧道在OSX创建一个简单的VPN，通过脚本观看国家禁止的流媒体。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/use-a-ssh-tunnel-to-create-a-simple-vpn-in-osx-to-watch-country-blocked-streaming-via-script-89df0a9f6af1?source=collection_archive---------0-----------------------#2016-05-16">https://medium.com/hackernoon/use-a-ssh-tunnel-to-create-a-simple-vpn-in-osx-to-watch-country-blocked-streaming-via-script-89df0a9f6af1?source=collection_archive---------0-----------------------#2016-05-16</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><blockquote class="ir is it"><p id="03f2" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">有时候你在错误的时间出现在错误的地方。</p></blockquote><figure class="ju jv jw jx fq jy fe ff paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="fe ff jt"><img src="../Images/e0599fdee9bfdee0ae36dee92ac94480.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0MSFWTK6qAMmyt76OwvT7w.jpeg"/></div></div></figure><p id="2d5d" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kf jh ji jj kg jl jm jn kh jp jq jr js hn dt translated">当您可以访问ssh服务器时，就不需要昂贵的VPN服务器了。这可能是家里的一台机器，一个小型的vps服务器，甚至是一个共享的虚拟主机账户。</p><blockquote class="ir is it"><p id="7631" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">提示:在端口443运行您自己的ssh服务器，以避开任何公司防火墙的限制。</p></blockquote><h2 id="35ae" class="ki kj hu bd kk kl km kn ko kp kq kr ks kf kt ku kv kg kw kx ky kh kz la lb lc dt translated">用SSH隧道当穷人的vpn</h2><p id="ae97" class="pw-post-body-paragraph iu iv hu ix b iy ld ja jb jc le je jf kf lf ji jj kg lg jm jn kh lh jq jr js hn dt translated">ssh -D 创建一个本地SOCKS代理，并通过ssh连接在该端口上转发所有流量。</p><p id="2798" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kf jh ji jj kg jl jm jn kh jp jq jr js hn dt translated">它超级简单！</p><pre class="ju jv jw jx fq lj lk ll lm aw ln dt"><span id="b3f3" class="ki kj hu lk b fv lo lp l lq lr">$ ssh -D 8000 user@ssh-server.dyndns.org</span></pre><p id="9ca6" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kf jh ji jj kg jl jm jn kh jp jq jr js hn dt translated">现在有一个SOCKS代理在localhost:8000下运行。</p><h2 id="b5da" class="ki kj hu bd kk kl km kn ko kp kq kr ks kf kt ku kv kg kw kx ky kh kz la lb lc dt translated">通过终端在OSX设置一个SOCKS代理</h2><p id="1dba" class="pw-post-body-paragraph iu iv hu ix b iy ld ja jb jc le je jf kf lf ji jj kg lg jm jn kh lh jq jr js hn dt translated">现在您必须配置您的网络设置来使用这个SOCKS代理。当然，我们希望在我们的脚本中实现自动化。</p><pre class="ju jv jw jx fq lj lk ll lm aw ln dt"><span id="7bb8" class="ki kj hu lk b fv lo lp l lq lr">$ sudo networksetup -setsocksfirewallproxy "Wi-Fi" localhost 8000</span></pre><h2 id="8900" class="ki kj hu bd kk kl km kn ko kp kq kr ks kf kt ku kv kg kw kx ky kh kz la lb lc dt translated">最后，我们把所有东西打包成一个不错的剧本</h2><figure class="ju jv jw jx fq jy"><div class="bz el l di"><div class="ls lt l"/></div></figure><pre class="ju jv jw jx fq lj lk ll lm aw ln dt"><span id="1eb5" class="ki kj hu lk b fv lo lp l lq lr">$ ./tunnel.sh { start | stop }</span></pre><p id="5961" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kf jh ji jj kg jl jm jn kh jp jq jr js hn dt translated">结束了。</p><h2 id="4841" class="ki kj hu bd kk kl km kn ko kp kq kr ks kf kt ku kv kg kw kx ky kh kz la lb lc dt translated">要注意！</h2><p id="6b5c" class="pw-post-body-paragraph iu iv hu ix b iy ld ja jb jc le je jf kf lf ji jj kg lg jm jn kh lh jq jr js hn dt translated">默认情况下，您的终端命令将<strong class="ix hv">而不是</strong>使用这个SOCKS代理。对于一些(wget，curl..)有一个使用代理的配置标志。</p><p id="3fea" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kf jh ji jj kg jl jm jn kh jp jq jr js hn dt translated">但是如果你想让所有的流量都通过隧道，你应该看看<a class="ae li" href="https://github.com/apenwarr/sshuttle" rel="noopener ugc nofollow" target="_blank">隧道</a>。</p><p id="98c6" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kf jh ji jj kg jl jm jn kh jp jq jr js hn dt translated">但是对我来说，使用sshuttle比简单的ssh隧道要慢得多。如果您遇到这个问题，请尝试使用选项`- no-latency-control '运行sshuttle。</p><div class="ju jv jw jx fq ab cb"><figure class="lu jy lv lw lx ly lz paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="lu jy lv lw lx ly lz paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="lu jy lv lw lx ly lz paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="ir is it"><p id="f922" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated"><a class="ae li" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae li" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae li" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae li" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae li" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae li" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ju jv jw jx fq jy fe ff paragraph-image"><a href="https://goo.gl/Ahtev1"><div class="fe ff ma"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></a></figure></div></div>    
</body>
</html>