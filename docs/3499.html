<html>
<head>
<title>E2E Testing React applications with TestCafe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">E2E用TestCafe测试React应用程序</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/e2e-testing-react-applications-with-testcafe-8edb605ec66c?source=collection_archive---------3-----------------------#2017-04-05">https://medium.com/hackernoon/e2e-testing-react-applications-with-testcafe-8edb605ec66c?source=collection_archive---------3-----------------------#2017-04-05</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><h1 id="d9d4" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">介绍</h1><p id="d091" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">诞生于T4脸书T5实验室的React T7在开发复杂用户界面的web应用程序的开发人员中非常受欢迎。React被广泛应用于需要易于扩展、简单维护和快速性能的单页面应用程序项目中，已经成为JavaScript开发者社区事实上的标准。像脸书、网飞、Airbnb和许多其他公司使用React作为主要框架来构建他们服务的用户界面。</p><p id="b412" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">React对应用程序结构使用基于组件的方法，让用户通过组合拥有自己的行为、状态和视图的组件来构建应用程序UI。这样，React为HTML元素增加了另一个抽象层。为了使React开发人员在编写e2e测试时能够保持基于组件的范式，我们TestCafe团队制作了<code class="eh kt ku kv kw b">testcafe-react-selectors</code>——一个引入本地方法来测试React应用的插件。</p><p id="41fe" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">在本文中，我们将使用<a class="ae kn" href="https://devexpress.github.io/testcafe/" rel="noopener ugc nofollow" target="_blank"> TestCafe </a>来测试React TodoMVC应用程序。</p><h1 id="0f64" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">Todo MVC应用程序</h1><p id="cdb1" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">要部署TodoMVC应用程序进行测试，请在<a class="ae kn" href="https://github.com/reactjs/redux" rel="noopener ugc nofollow" target="_blank">https://github.com/reactjs/redux</a>克隆Redux存储库，并打开Todo MVC示例目录(/examples/todomvc)。安装依赖项并从该目录运行<code class="eh kt ku kv kw b">npm start</code>以开发模式构建应用程序。</p><pre class="kx ky kz la fq lb kw lc ld aw le dt"><span id="b426" class="lf is hu kw b fv lg lh l li lj">git clone https://github.com/reactjs/redux<br/>cd redux/examples/todomvc<br/><br/>npm install<br/>npm start</span></pre><p id="50c8" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">该应用程序将被部署在<a class="ae kn" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>。</p><p id="c7f9" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">它具有以下组件结构。</p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><h1 id="0c2b" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">TestCafe设置</h1><p id="6dff" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">首先，从npm安装TestCafe。</p><pre class="kx ky kz la fq lb kw lc ld aw le dt"><span id="dcab" class="lf is hu kw b fv lg lh l li lj">npm install -g testcafe</span></pre><p id="938a" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">然后安装<code class="eh kt ku kv kw b">testcafe-react-selectors</code>模块。</p><pre class="kx ky kz la fq lb kw lc ld aw le dt"><span id="14b5" class="lf is hu kw b fv lg lh l li lj">npm install -g testcafe-react-selectors</span></pre><p id="d4ee" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">对于<code class="eh kt ku kv kw b">testcafe-react-selectors</code>文档，请访问其<a class="ae kn" href="https://github.com/DevExpress/testcafe-react-selectors" rel="noopener ugc nofollow" target="_blank">库</a>。</p><h1 id="80c5" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">页面对象</h1><p id="e605" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">让我们创建一个与上面的JSX标记相对应的页面对象。我们将使用ES6类语法来定义您将在测试中与之交互的组件结构。</p><p id="4835" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">创建一个<code class="eh kt ku kv kw b">page-object.js</code>文件并导入<code class="eh kt ku kv kw b">testcafe-react-selectors</code>模块。在该文件中，创建一个表示TodoMVC应用程序页面的类。使用ReactSelector构造函数为所需的页面元素创建选择器。</p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><p id="86cd" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">我们为输入新任务的字段和当前任务列表创建了选择器。</p><h1 id="546e" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">测试TodoMVC应用程序</h1><p id="42ea" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">创建一个fixture文件<code class="eh kt ku kv kw b">todomvc.js</code>并将<a class="ae kn" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank">指定为起始页。要使用应用程序页面，请使用page对象导入一个模块，并创建一个page类实例。</a></p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><p id="a528" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated"><code class="eh kt ku kv kw b">ReactSelector</code>是围绕<code class="eh kt ku kv kw b"><a class="ae kn" href="http://devexpress.github.io/testcafe/documentation/test-api/selecting-page-elements/selectors.html" rel="noopener ugc nofollow" target="_blank">Selector</a></code>对象的包装器，所以在处理结果元素时，我们可以使用TestCafe选择器的全部功能。</p><p id="ec92" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">让我们编写一个测试，向Todo列表添加一个新元素</p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><p id="c682" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">要了解更多关于TestCafe断言的信息，请参见<a class="ae kn" href="http://devexpress.github.io/testcafe/documentation/test-api/assertions/assertion-api.html" rel="noopener ugc nofollow" target="_blank">断言API </a>。</p><h1 id="1814" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">组件状态和属性</h1><p id="967d" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><code class="eh kt ku kv kw b">testcafe-react-selectors</code>允许你使用<code class="eh kt ku kv kw b">getReact</code>方法获得一个React组件的状态和属性。此方法返回包含组件状态和属性的对象。或者，您可以传递一个选择要返回的特定属性的函数。考虑下面的例子:我们需要将一个任务标记为完成，并测试相应的组件是否已经改变了它的属性。</p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><h1 id="6110" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">运行测试</h1><p id="0d1d" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">使用以下命令从控制台运行测试:</p><pre class="kx ky kz la fq lb kw lc ld aw le dt"><span id="f4ed" class="lf is hu kw b fv lg lh l li lj">testcafe chrome todomvc.js</span></pre><p id="8a4d" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">TestCafe将在Google Chrome中运行测试，并输出以下报告:</p><figure class="kx ky kz la fq lk fe ff paragraph-image"><div class="fe ff ln"><img src="../Images/1e1506239cdf346a239dcff21227f5a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*ONJO23-5TD8ZCww3-XnGBQ.png"/></div></figure><p id="d444" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">要在多个浏览器中并行测试，您可以使用逗号分隔的列表，如<code class="eh kt ku kv kw b">chrome,firefox,edge</code>或<code class="eh kt ku kv kw b">all</code>别名，在所有本地安装的浏览器中运行测试。</p><pre class="kx ky kz la fq lb kw lc ld aw le dt"><span id="1601" class="lf is hu kw b fv lg lh l li lj">testcafe all todomvc.js</span></pre><p id="2e14" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">您还可以定义将运行TestCafe测试的<code class="eh kt ku kv kw b">npm test</code>命令。注意，您需要一个本地安装的TestCafe模块来从npm脚本启动测试。为了引入<code class="eh kt ku kv kw b">npm test</code>命令，将下面的代码添加到项目的<code class="eh kt ku kv kw b">package.json</code>文件中。</p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><p id="45ac" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">你可以在这里找到更多关于TestCafe命令行界面<a class="ae kn" href="https://devexpress.github.io/testcafe/documentation/using-testcafe/command-line-interface.html" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><h1 id="13d1" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">扩展TestCafe功能</h1><p id="d827" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">点击了解更多关于TestCafe生态系统<a class="ae kn" href="https://github.com/DevExpress/testcafe#testcafe-ecosystem" rel="noopener ugc nofollow" target="_blank">的信息。如果您需要测试代码中的更多功能，您可以使用任何node.js模块。TestCafe还提供了使用</a><a class="ae kn" href="https://devexpress.github.io/testcafe/documentation/extending-testcafe/browser-provider-plugin/" rel="noopener ugc nofollow" target="_blank">便携式和远程浏览器</a>和<a class="ae kn" href="https://devexpress.github.io/testcafe/documentation/extending-testcafe/reporter-plugin/" rel="noopener ugc nofollow" target="_blank">定制测试运行报告格式</a>的扩展功能。</p><h1 id="1b56" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">社区</h1><p id="64e6" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">如果你有关于TestCafe的问题——欢迎在我们的<a class="ae kn" href="https://testcafe-discuss.devexpress.com/" rel="noopener ugc nofollow" target="_blank">论坛</a>或<a class="ae kn" href="https://github.com/DevExpress/testcafe" rel="noopener ugc nofollow" target="_blank"> GitHub页面</a>提问！</p><div class="kx ky kz la fq ab cb"><figure class="lq lk lr ls lt lu lv paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="lq lk lr ls lt lu lv paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="lq lk lr ls lt lu lv paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="lw lx ly"><p id="f922" class="jp jq lz jr b js ko ju jv jw kp jy jz ma kq kc kd mb kr kg kh mc ks kk kl km hn dt translated"><a class="ae kn" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是阿妹家庭的一员。我们现在<a class="ae kn" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kn" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jp jq lz jr b js ko ju jv jw kp jy jz ma kq kc kd mb kr kg kh mc ks kk kl km hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kn" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kn" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kx ky kz la fq lk fe ff paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="fe ff md"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="mi lm l"/></div></figure></div></div>    
</body>
</html>