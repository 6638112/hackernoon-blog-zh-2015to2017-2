<html>
<head>
<title>Working With Cron Jobs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Cron作业</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/working-with-cron-jobs-3d9e893c4361?source=collection_archive---------18-----------------------#2017-11-21">https://medium.com/hackernoon/working-with-cron-jobs-3d9e893c4361?source=collection_archive---------18-----------------------#2017-11-21</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="95ec" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">将10，000小时的工作缩短到1小时...</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/25716a2f4db40c4e00d6726dfa60b27d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jVnqkmLgnIbuVlFYl5-T_Q.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Bot image by <a class="ae jz" href="https://piknu.com/u/bamenny" rel="noopener ugc nofollow" target="_blank">Menny Barzilay</a></figcaption></figure><h1 id="8791" class="ka kb hu bd kc kd ke kf kg kh ki kj kk ja kl jb km jd kn je ko jg kp jh kq kr dt translated">什么是cronjob？</h1><blockquote class="ks kt ku"><p id="ced7" class="kv kw kx ky b kz la iv lb lc ld iy le lf lg lh li lj lk ll lm ln lo lp lq lr hn dt translated">Cron在特定时间为您运行作业</p></blockquote><p id="7aae" class="pw-post-body-paragraph kv kw hu ky b kz la iv lb lc ld iy le ls lg lh li lt lk ll lm lu lo lp lq lr hn dt translated">Cron作业是计划好的任务，按照程序员设置的固定时间间隔执行。它们通过运行首选脚本来工作。运行这些脚本的时间间隔由Cron表达式决定。</p><blockquote class="lv"><p id="f506" class="lw lx hu bd ly lz ma mb mc md me lr ek translated">Cron表达式是由六个或七个子表达式(字段)组成的字符串，描述了计划的各个细节。</p></blockquote><p id="83be" class="pw-post-body-paragraph kv kw hu ky b kz mf iv lb lc mg iy le ls mh lh li lt mi ll lm lu mj lp lq lr hn dt translated">根据表达式是什么和函数要做什么，cron可以每分钟、每周甚至每年运行一次。在消耗大量数据的软件中，cron作业有许多独特的用例。</p><p id="3c86" class="pw-post-body-paragraph kv kw hu ky b kz la iv lb lc ld iy le ls lg lh li lt lk ll lm lu lo lp lq lr hn dt translated">例如，一个金融网站可能被编程为根据<strong class="ky hv">层级</strong>为<strong class="ky hv">用户</strong>和<strong class="ky hv">用户</strong>生成备份和电子邮件通知。你可能已经习惯看到的这种条款的一个很好的例子是你可能已经注册了一个免费的在线课程。主持你讲座的电子邮件服务器将根据你注册的时间开始向你发送订购的电子邮件。</p><p id="9063" class="pw-post-body-paragraph kv kw hu ky b kz la iv lb lc ld iy le ls lg lh li lt lk ll lm lu lo lp lq lr hn dt translated">这位讲师可能会发现向5名学生发送3封电子邮件非常容易，但是考虑到你和5000名学生在5周内注册了同一门课程，这位讲师必须向每个人发送总共15封电子邮件。这意味着球场所有者必须注意以下变量:</p><p id="dec7" class="pw-post-body-paragraph kv kw hu ky b kz la iv lb lc ld iy le ls lg lh li lt lk ll lm lu lo lp lq lr hn dt translated">1.<strong class="ky hv">电子邮件</strong>详情，<strong class="ky hv">姓名</strong>，以及<strong class="ky hv">日期</strong>个人报名。</p><p id="7293" class="pw-post-body-paragraph kv kw hu ky b kz la iv lb lc ld iy le ls lg lh li lt lk ll lm lu lo lp lq lr hn dt translated">2.报名参加的课程类型</p><p id="b468" class="pw-post-body-paragraph kv kw hu ky b kz la iv lb lc ld iy le ls lg lh li lt lk ll lm lu lo lp lq lr hn dt translated">这样，我们将运行一个作业，在个人注册的当天向他们发送电子邮件，并根据用户的详细信息发送未来5周的电子邮件。这种自动化将使网站的管理更加容易。</p><p id="83cc" class="pw-post-body-paragraph kv kw hu ky b kz la iv lb lc ld iy le ls lg lh li lt lk ll lm lu lo lp lq lr hn dt translated">javascript内置了一个简单的解决方案。我们有像<strong class="ky hv"> setTimeout </strong>和<strong class="ky hv"> setInterval </strong>这样的东西可以使用，但是对于你想要使用cron的特定任务来说，它们可能太基础了。然而，有了Node.js环境，我们可以做更多的事情，解决复杂的问题。</p><h1 id="b61f" class="ka kb hu bd kc kd ke kf kg kh ki kj kk ja kl jb km jd kn je ko jg kp jh kq kr dt translated">Node如何解决这个问题？</h1><p id="02ee" class="pw-post-body-paragraph kv kw hu ky b kz mk iv lb lc ml iy le ls mm lh li lt mn ll lm lu mo lp lq lr hn dt translated">首先我们的入口点是<strong class="ky hv"> start.js </strong>，我们的cronjob将在<strong class="ky hv"> cron.js </strong>中，最后我们的<strong class="ky hv"> package.json </strong>为几个Node.js依赖项。</p><p id="0697" class="pw-post-body-paragraph kv kw hu ky b kz la iv lb lc ld iy le ls lg lh li lt lk ll lm lu lo lp lq lr hn dt translated">首先，我们添加依赖项，并输入我们将托管应用程序的端口的值:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mp mq l"/></div></figure><p id="a2e3" class="pw-post-body-paragraph kv kw hu ky b kz la iv lb lc ld iy le ls lg lh li lt lk ll lm lu lo lp lq lr hn dt translated">接下来是添加监听端口、启动cron方法(我们将在另一个应用程序中创建)和“启动”应用程序的代码行:</p><p id="c443" class="pw-post-body-paragraph kv kw hu ky b kz la iv lb lc ld iy le ls lg lh li lt lk ll lm lu lo lp lq lr hn dt translated">另一个文件中的cron作业。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mp mq l"/></div></figure><p id="78b8" class="pw-post-body-paragraph kv kw hu ky b kz la iv lb lc ld iy le ls lg lh li lt lk ll lm lu lo lp lq lr hn dt translated"><strong class="ky hv"><em class="kx">' module . exports { } '</em></strong><em class="kx"/>用于导出cronJob函数，以便在应用程序中需要它的任何地方使用，在这种情况下是start.js</p><p id="d17a" class="pw-post-body-paragraph kv kw hu ky b kz la iv lb lc ld iy le ls lg lh li lt lk ll lm lu lo lp lq lr hn dt translated">最后，对于不需要太多工作的依赖项，你可以只使用你现在需要的依赖项。但我将从构建一个更大的应用程序，并继续重构，因此我将需要这里的所有依赖项:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mp mq l"/></div></figure><p id="d67a" class="pw-post-body-paragraph kv kw hu ky b kz la iv lb lc ld iy le ls lg lh li lt lk ll lm lu lo lp lq lr hn dt translated">你可以通过执行<strong class="ky hv">节点start.js </strong>来运行应用程序</p><p id="8b14" class="pw-post-body-paragraph kv kw hu ky b kz la iv lb lc ld iy le ls lg lh li lt lk ll lm lu lo lp lq lr hn dt translated">仅此而已。随着我的工作，更大的应用程序会有更多的更新。</p></div></div>    
</body>
</html>