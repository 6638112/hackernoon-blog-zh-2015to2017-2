<html>
<head>
<title>Build a “Serverless” Todo List in 5 Minutes with StdLib and MongoDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用StdLib和MongoDB在5分钟内建立一个“无服务器”的待办事项列表</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/build-a-serverless-todo-list-in-5-minutes-with-stdlib-and-mongodb-1240e92f5cfb?source=collection_archive---------8-----------------------#2017-11-29">https://medium.com/hackernoon/build-a-serverless-todo-list-in-5-minutes-with-stdlib-and-mongodb-1240e92f5cfb?source=collection_archive---------8-----------------------#2017-11-29</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="cdbb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在StdLib，我们的开发人员经常问我们关于将持久存储集成到StdLib函数中的问题。虽然构建和发布StdLib函数就像打开一个文本编辑器并编写Node.js函数一样简单，但开发人员在尝试遵循ExpressJS或其他教程时，并不总是清楚他们如何集成持久层。我们想让它变得更简单，并向您展示如何用StdLib和MongoDB在五分钟内构建一个待办事项列表——祝您愉快！</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/51d2d935c826213b2773042751c17b0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P2P4KrEtrQ8OAR9MOGAy_g.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">The finished product — a simple todo list</figcaption></figure><p id="c961" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你以前没有听说过StdLib，我们是构建后端web服务和实现真正商业价值的最快方式。构建在“无服务器”架构上，您永远不必担心管理服务器或为扩展分配资源。编写一个函数，部署，你就可以开始了！我们还有一个由其他开发者贡献的易于使用的<a class="ae kf" href="http://www.stdlib.com/sourcecode" rel="noopener ugc nofollow" target="_blank">集成</a>生态系统。</p><h2 id="6b8a" class="kg kh hu bd ki kj kk kl km kn ko kp kq jc kr ks kt jg ku kv kw jk kx ky kz la dt translated">第一分钟:注册StdLib</h2><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff lb"><img src="../Images/af786af4815ce9674cf3838aec0f6013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5U3GTxfSxPil1jTlLDn0Xg.png"/></div></div></figure><p id="0d37" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">开始使用StdLib很容易——进入我们的<a class="ae kf" href="https://stdlib.com" rel="noopener ugc nofollow" target="_blank">网站</a>，选择选择一个用户名并点击“声明名称空间”。稍后，您将了解如何获得我们的<a class="ae kf" href="https://github.com/stdlib/lib" rel="noopener ugc nofollow" target="_blank"> CLI </a>并部署服务。但是首先，您需要为这个应用程序设置数据库。</p><h2 id="2159" class="kg kh hu bd ki kj kk kl km kn ko kp kq jc kr ks kt jg ku kv kw jk kx ky kz la dt translated">第2分钟:设置MongoDB</h2><p id="9c40" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">如果您还没有MongoDB帐户，现在就在这里<a class="ae kf" href="https://cloud.mongodb.com/user?nds=true&amp;_ga=2.18468849.910430582.1511808066-1384778459.1511498990&amp;nds=true#/register/accountProfile" rel="noopener ugc nofollow" target="_blank">创建一个帐户</a>。当你创建一个新账户时，确保选择MongoDB Atlas而不是Cloud Manager。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff lh"><img src="../Images/029e87750e859ff3d359a2d77d3a4ebf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0PCykMFOAmAgSD7eyZM7Kw.png"/></div></div></figure><p id="496c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在您已经设置了一个帐户，您需要创建一个集群。单击“构建新集群”,并使用以下信息填写模型。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff li"><img src="../Images/471e15b9ac3bcc627d7604af683647e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6XGYVp5gyHeVI05lGg7RhQ.png"/></div></div></figure><p id="f652" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">请注意，为了使用免费层，您需要将AWS作为您的云提供商，并且您需要将N. Virginia作为区域。最后，在部署集群之前，您需要创建一个管理员用户。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff lj"><img src="../Images/36ac5f36f864dc4371fef23233e86a28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9vYCF9zDVv4_B7k80-pYFw.png"/></div></div></figure><p id="6a65" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">部署集群可能需要几分钟的时间，因此在此期间，我们还需要采取一些步骤来准备MongoDB。单击“安全”选项卡，然后单击“IP白名单”并添加IP地址。出于本演示的目的，您可以将所有IP地址列入白名单，尽管这对于生产应用程序来说不是一个好主意。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff lk"><img src="../Images/39efd5234d3121f05a9efc890136f559.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tccY8s44MF13drO0Ntew6Q.png"/></div></div></figure><p id="0f67" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您的集群现在应该已经部署好了。为了将StdLib服务连接到MongoDB，您需要URI连接字符串。单击“连接”并选择“连接您的应用程序”。记下URI弦，因为你以后会用到它。</p><h2 id="f534" class="kg kh hu bd ki kj kk kl km kn ko kp kq jc kr ks kt jg ku kv kw jk kx ky kz la dt translated">第三分钟:分叉待办事项列表</h2><p id="63fe" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">为了使用StdLib，你需要获得命令行工具<a class="ae kf" href="https://hackernoon.com/tagged/tools" rel="noopener ugc nofollow" target="_blank">和</a>，可以从GitHub上的<a class="ae kf" href="https://github.com/stdlib/lib" rel="noopener ugc nofollow" target="_blank">获得。首先，如果你没有安装Node.js，你可以下载最新版本，还有npm，这里是</a><a class="ae kf" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"/>。现在安装了Node，您可以通过打开终端并运行以下命令来获得StdLib CLI:</p><pre class="jq jr js jt fq ll lm ln lo aw lp dt"><span id="3798" class="kg kh hu lm b fv lq lr l ls lt">$ npm install lib.cli -g</span></pre><p id="3bb8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在创建一个工作区，并使用以下命令导航到该工作区:</p><pre class="jq jr js jt fq ll lm ln lo aw lp dt"><span id="6969" class="kg kh hu lm b fv lq lr l ls lt">$ mkdir stdlib-workspace<br/>$ cd stdlib-workspace<br/>$ lib init</span></pre><p id="4ce7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">接下来，通过运行以下命令获取todo列表的代码:</p><pre class="jq jr js jt fq ll lm ln lo aw lp dt"><span id="b994" class="kg kh hu lm b fv lq lr l ls lt">$ lib create -s @steve/todo-mongo</span></pre><p id="591e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您将被提示给新服务命名，本教程的其余部分假设它仍然是<code class="eh lu lv lw lm b">todo-mongo</code>。现在，您可以通过以下方式导航到新服务:</p><pre class="jq jr js jt fq ll lm ln lo aw lp dt"><span id="19c2" class="kg kh hu lm b fv lq lr l ls lt">$ cd &lt;username&gt;/todo-mongo</span></pre><p id="f659" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在您可以打开在根目录中找到的<code class="eh lu lv lw lm b">env.json</code>文件。有三个字段，都有相同的关键字。将上面的蒙戈URI复制并粘贴到所有三个字段中。记得把<code class="eh lu lv lw lm b">&lt;password&gt;</code>改成你上面创建的管理员密码。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff lx"><img src="../Images/150cba3d955d3247995dea46bcc1e7f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IAx1erPrIoJIxZKq6h9ASQ.png"/></div></div></figure><p id="50ce" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在只需运行:</p><pre class="jq jr js jt fq ll lm ln lo aw lp dt"><span id="69f6" class="kg kh hu lm b fv lq lr l ls lt">$ lib up dev</span></pre><p id="335d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有了这个命令，您待办事项列表就处于一个可变的开发环境中。要查看它，你可以去<code class="eh lu lv lw lm b"><a class="ae kf" href="https://notoriaga.lib.id/todo-mongo@dev/" rel="noopener ugc nofollow" target="_blank">https://&lt;username&gt;.api.stdlib.com/todo-mongo@dev/</a></code>，这里<code class="eh lu lv lw lm b">&lt;username&gt;</code>是你的StdLib用户名。要发布到不可变的发布环境，请运行:</p><pre class="jq jr js jt fq ll lm ln lo aw lp dt"><span id="8a78" class="kg kh hu lm b fv lq lr l ls lt">$ lib release</span></pre><p id="0318" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从那里你可以看到<code class="eh lu lv lw lm b"><a class="ae kf" href="https://notoriaga.lib.id/todo-mongo@dev/" rel="noopener ugc nofollow" target="_blank">https://&lt;username&gt;.api.stdlib.com/todo-mongo/</a></code>的服务。而StdLib和MongoDB入门就是这么简单！</p><h2 id="997a" class="kg kh hu bd ki kj kk kl km kn ko kp kq jc kr ks kt jg ku kv kw jk kx ky kz la dt translated">理解你的待办事项</h2><p id="c47a" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">源代码被设计成可扩展的——您可以调整提供的模板或函数来添加您想要的任何功能。您可以在本地进行更改，然后在本地运行更改并运行<code class="eh lu lv lw lm b">$ lib up dev</code>来查看您的更改。您还可以运行<code class="eh lu lv lw lm b">$ lib http</code>，它会启动我们网关的本地版本，这样您就可以在本地主机上进行测试。</p><p id="92ea" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在其当前版本中，该服务有五个主要端点。</p><ul class=""><li id="f4e8" class="ly lz hu it b iu iv iy iz jc ma jg mb jk mc jo md me mf mg dt translated"><code class="eh lu lv lw lm b">__main__.js</code>:这个端点为应用程序提供HTML、CSS和<a class="ae kf" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> Javascript </a>。它只是用<code class="eh lu lv lw lm b"> ‘Content-Type’: ‘text/html’</code>将<code class="eh lu lv lw lm b">static</code>文件夹中的所有内容作为缓冲区返回。</li><li id="05d3" class="ly lz hu it b iu mh iy mi jc mj jg mk jk ml jo md me mf mg dt translated"><code class="eh lu lv lw lm b">create.js</code>:向MongoDB集群添加一个新条目。它接受一个字符串(todo)并返回集群中新项目的id。</li><li id="7c8c" class="ly lz hu it b iu mh iy mi jc mj jg mk jk ml jo md me mf mg dt translated"><code class="eh lu lv lw lm b">read.js</code>:不接受参数，返回集群中的所有项目。</li><li id="7e62" class="ly lz hu it b iu mh iy mi jc mj jg mk jk ml jo md me mf mg dt translated"><code class="eh lu lv lw lm b">update.js</code>:接受单个ID或ID数组(由create返回的ID)和一个布尔值。数据库中的每个todo都将其完成状态设置为该布尔值。</li><li id="7a3b" class="ly lz hu it b iu mh iy mi jc mj jg mk jk ml jo md me mf mg dt translated"><code class="eh lu lv lw lm b">destroy.js</code>:获取单个ID或ID数组，并将其从集群中移除。</li></ul><h2 id="1b85" class="kg kh hu bd ki kj kk kl km kn ko kp kq jc kr ks kt jg ku kv kw jk kx ky kz la dt translated">谢谢你</h2><p id="2369" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">就这些了，感谢阅读！希望您能够学习一点关于StdLib和MongoDB的知识。构建todo列表只是使用StdLib增强web应用程序的众多方法之一。如果你有好主意想分享，请直接通过电子邮件联系我:【steven@stdlib.comT4，或者在Twitter上关注<a class="ae kf" href="https://twitter.com/notoriaga" rel="noopener ugc nofollow" target="_blank">我</a>和<a class="ae kf" href="https://twitter.com/stdlibhq" rel="noopener ugc nofollow" target="_blank"> StdLib </a>团队。</p><p id="c2b1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一如既往，我们期待您和快乐大厦的回音！</p></div><div class="ab cl mm mn hc mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="hn ho hp hq hr"><p id="f0b3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="mt">史蒂夫·迈耶(Steve Meyer)是奥柏林学院的应届毕业生，也是</em><a class="ae kf" href="https://stdlib.com" rel="noopener ugc nofollow" target="_blank"><em class="mt">StdLib</em></a><em class="mt">的软件工程师。当他不编程的时候，你会发现他在烹饪、烘焙或者玩《野性的呼吸》。</em></p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="mu mv l"/></div></figure></div></div>    
</body>
</html>