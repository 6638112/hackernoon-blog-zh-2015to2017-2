<html>
<head>
<title>Sup With Those Damn Semicolons in JS?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JS里那些该死的分号来Sup？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/sup-with-those-damn-semicolons-in-js-bcd9ebe83eb0?source=collection_archive---------27-----------------------#2017-10-31">https://medium.com/hackernoon/sup-with-those-damn-semicolons-in-js-bcd9ebe83eb0?source=collection_archive---------27-----------------------#2017-10-31</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="f136" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">它们真的有必要吗？他们很丑！</h2></div><h1 id="b6ea" class="jj jk hu bd jl jm jn jo jp jq jr js jt ja ju jb jv jd jw je jx jg jy jh jz ka dt translated">历史</h1><p id="1bdd" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">JavaScript并不完美，尽管自Netscape(早期浏览器)问世以来已经有了显著的改进。它被设想为Java在web上构建脚本的一个更简单的替代方案。马克·安德森(网景公司的联合创始人)聘请布伦丹·艾希制作一个原型，他只用了10天就完成了。JavaScript诞生了。</p><p id="e391" class="pw-post-body-paragraph kb kc hu kd b ke kx iv kg kh ky iy kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">从一开始，JavaScript就是网络语言。鉴于这种语言是为初学者设计的，它有一些不幸的怪癖，我们需要注意，分号可能是您最先遇到的。</p><h1 id="78cd" class="jj jk hu bd jl jm jn jo jp jq jr js jt ja ju jb jv jd jw je jx jg jy jh jz ka dt translated">分号</h1><figure class="ld le lf lg fq lh fe ff paragraph-image"><div class="fe ff lc"><img src="../Images/c10a52133d423f64e2710d2a500a4a06.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/1*uRc0heu4S_dHrrDPlZfm3w.gif"/></div></figure><p id="5e30" class="pw-post-body-paragraph kb kc hu kd b ke kx iv kg kh ky iy kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">初学者被告知在每一行的末尾加上分号(或者"<a class="ae lk" rel="noopener" href="/@PrintSupWorld/statements-expressions-and-values-7727a0011565">语句</a>")来表示一行结束，没有太多的解释。</p><pre class="ld le lf lg fq ll lm ln lo aw lp dt"><span id="9e2c" class="lq jk hu lm b fv lr ls l lt lu">var i = 0; // good<br/>var j = 0  // bad</span></pre><h2 id="25b4" class="lq jk hu bd jl lv lw lx jp ly lz ma jt kk mb mc jv ko md me jx ks mf mg jz mh dt translated">其他编程语言不需要它们，为什么JavaScript需要呢？</h2><p id="12a0" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">JavaScript不注意间距(为了“更简单”)，所以它不知道你在新的一行，它需要一个分号来知道这一点。</p><h2 id="65da" class="lq jk hu bd jl lv lw lx jp ly lz ma jt kk mb mc jv ko md me jx ks mf mg jz mh dt translated">但是当我省略分号时，我的代码仍然运行！</h2><pre class="ld le lf lg fq ll lm ln lo aw lp dt"><span id="57f8" class="lq jk hu lm b fv lr ls l lt lu">var i = 0<br/>i // 0</span></pre><p id="4158" class="pw-post-body-paragraph kb kc hu kd b ke kx iv kg kh ky iy kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">它<em class="mi">在很多时候确实</em>有效，但<em class="mi">并不总是</em>！JavaScript使用“自动插入分号”来帮助可能忘记放置分号的初学者。上述代码被解释为:</p><pre class="ld le lf lg fq ll lm ln lo aw lp dt"><span id="058a" class="lq jk hu lm b fv lr ls l lt lu">var i = 0;<br/>i;</span></pre><p id="e2a4" class="pw-post-body-paragraph kb kc hu kd b ke kx iv kg kh ky iy kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">问题是也有例外。我们鼓励初学者使用分号，这样他们就不必学习这些异常，但是让我们来复习一下。</p><h1 id="36f8" class="jj jk hu bd jl jm jn jo jp jq jr js jt ja ju jb jv jd jw je jx jg jy jh jz ka dt translated">“自动分号插入”例外</h1><h2 id="2158" class="lq jk hu bd jl lv lw lx jp ly lz ma jt kk mb mc jv ko md me jx ks mf mg jz mh dt translated">以“<code class="eh mj mk ml lm b">("</code>开头的行</h2><pre class="ld le lf lg fq ll lm ln lo aw lp dt"><span id="c04d" class="lq jk hu lm b fv lr ls l lt lu">// initial<br/>var i = 0;<br/>(function(){console.log(i)})(); // 0</span><span id="b2d4" class="lq jk hu lm b fv mm ls l lt lu">// no semicolon<br/>var i = 0<br/>(function(){console.log(i)})() // TypeError: 0 is not a function</span><span id="f98d" class="lq jk hu lm b fv mm ls l lt lu">// how engine sees above<br/>0() // TypeError: 0 is not a function</span></pre><p id="cfbe" class="pw-post-body-paragraph kb kc hu kd b ke kx iv kg kh ky iy kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">JavaScript尽最大努力来确定一行的结束，但是它不确定你是否试图用下一行的<code class="eh mj mk ml lm b">()</code>之间的输入来调用函数<code class="eh mj mk ml lm b">0</code>，比如<code class="eh mj mk ml lm b">0()</code>。显然<code class="eh mj mk ml lm b">0</code>不是一个函数，它是一个数字，所以我们得到一个错误。</p><p id="2b52" class="pw-post-body-paragraph kb kc hu kd b ke kx iv kg kh ky iy kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated"><em class="mi">注意:我使用了一个“立即被调用的函数”,因为它需要用圆括号括起来才能工作，参见</em> <a class="ae lk" rel="noopener" href="/@PrintSupWorld/immediately-invoked-function-expressions-6b4bd7c1b59d"> <em class="mi">这篇文章</em> </a> <em class="mi">的快速解释。</em></p><h2 id="8bda" class="lq jk hu bd jl lv lw lx jp ly lz ma jt kk mb mc jv ko md me jx ks mf mg jz mh dt translated">以“<code class="eh mj mk ml lm b">["</code>开头的行</h2><pre class="ld le lf lg fq ll lm ln lo aw lp dt"><span id="11c5" class="lq jk hu lm b fv lr ls l lt lu">var i = 0;<br/>[1,2,3].pop(); // 3</span><span id="675e" class="lq jk hu lm b fv mm ls l lt lu">var i = 0<br/>[1,2,3].pop(); // TypeError: Cannot read property 'pop' of undefined</span><span id="65e7" class="lq jk hu lm b fv mm ls l lt lu">0[1,2,3]; // undefined</span></pre><p id="b1fa" class="pw-post-body-paragraph kb kc hu kd b ke kx iv kg kh ky iy kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">解释器不确定你是否表达完了<code class="eh mj mk ml lm b">i</code>的值。它认为也许你会尝试索引一个叫做<code class="eh mj mk ml lm b">0</code>的数组，比如<code class="eh mj mk ml lm b">0[1]</code>，但是<code class="eh mj mk ml lm b">0</code>不是一个数组，所以最后一行是<code class="eh mj mk ml lm b">undefined</code>。我们试图在没有任何属性的<code class="eh mj mk ml lm b">undefined</code>上调用名为<code class="eh mj mk ml lm b">pop</code>的<code class="eh mj mk ml lm b">Array</code>方法时出错。</p><h2 id="9402" class="lq jk hu bd jl lv lw lx jp ly lz ma jt kk mb mc jv ko md me jx ks mf mg jz mh dt translated"><code class="eh mj mk ml lm b">Return</code>报表</h2><pre class="ld le lf lg fq ll lm ln lo aw lp dt"><span id="27a1" class="lq jk hu lm b fv lr ls l lt lu">function foo() {<br/>  return<br/>  1<br/>}</span><span id="c539" class="lq jk hu lm b fv mm ls l lt lu">foo() // undefined</span></pre><p id="213d" class="pw-post-body-paragraph kb kc hu kd b ke kx iv kg kh ky iy kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated"><code class="eh mj mk ml lm b">return</code>作为<code class="eh mj mk ml lm b">return;</code>运行，所以该函数不返回任何内容，即<code class="eh mj mk ml lm b">undefined</code>。分号会自动插入到return语句的末尾，因此请确保您返回的值位于同一行(如<code class="eh mj mk ml lm b">return 1</code>)，因为<code class="eh mj mk ml lm b">return</code>下面的行将不会被执行！</p><h1 id="1182" class="jj jk hu bd jl jm jn jo jp jq jr js jt ja ju jb jv jd jw je jx jg jy jh jz ka dt translated">没有自动插入的有趣案例</h1><h2 id="fce7" class="lq jk hu bd jl lv lw lx jp ly lz ma jt kk mb mc jv ko md me jx ks mf mg jz mh dt translated">函数声明、条件、循环</h2><p id="37ef" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">分号<em class="mi">被</em>插入(自动)在<a class="ae lk" rel="noopener" href="/@PrintSupWorld/function-hoisting-declarations-vs-expressions-7f4d385a5d7f">函数表达式</a>之后，而不是“函数声明”之后。</p><pre class="ld le lf lg fq ll lm ln lo aw lp dt"><span id="0a14" class="lq jk hu lm b fv lr ls l lt lu">// function expression<br/>var foo = function() {<br/>  return 0;<br/>};</span></pre><p id="1d46" class="pw-post-body-paragraph kb kc hu kd b ke kx iv kg kh ky iy kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">此处未插入:</p><pre class="ld le lf lg fq ll lm ln lo aw lp dt"><span id="253e" class="lq jk hu lm b fv lr ls l lt lu">// function declaration<br/>function foo() {<br/>  return 1<br/>}</span><span id="420c" class="lq jk hu lm b fv mm ls l lt lu">// conditional statements<br/>if (condition) {<br/>  console.log("true");<br/>} else {<br/>  console.log("false");<br/>}</span><span id="6636" class="lq jk hu lm b fv mm ls l lt lu">// loops<br/>for (var i = 0; i &lt; 10; i++) {<br/>  console.log(i);<br/>}</span></pre><blockquote class="mn"><p id="071d" class="mo mp hu bd mq mr ms mt mu mv mw kw ek translated">分号不插在波形括号<code class="eh mj mk ml lm b">{ }, except for objects</code>之后。</p></blockquote><pre class="mx my mz na nb ll lm ln lo aw lp dt"><span id="cf9d" class="lq jk hu lm b fv lr ls l lt lu">// semicolons inserted after object<br/>var obj = {};</span></pre></div><div class="ab cl nc nd hc ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hn ho hp hq hr"><h2 id="6886" class="lq jk hu bd jl lv lw lx jp ly lz ma jt kk mb mc jv ko md me jx ks mf mg jz mh dt translated">所以…我可以不用那些该死的东西了吗！？</h2><p id="4592" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">许多受人尊敬的程序员避免用分号来混淆他们的代码。如果你现在确信你理解了它们是如何工作的，你也可以选择省略它们！</p><p id="4c7d" class="pw-post-body-paragraph kb kc hu kd b ke kx iv kg kh ky iy kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">就我个人而言，我相信使用分号会让你的代码对你和未来的读者更具可读性(也让它看起来更合法)。此外，您可以最小化遇到分号相关错误的风险，这对于初学者来说尤其重要(同样，您不太可能遇到那些模糊的异常)。我也喜欢他们给一个声明加上一个结尾，就像这个时期一样。</p></div><div class="ab cl nc nd hc ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hn ho hp hq hr"><p id="d062" class="pw-post-body-paragraph kb kc hu kd b ke kx iv kg kh ky iy kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">请欣赏由<a class="nj nk gr" href="https://medium.com/u/5b25bc58c2e?source=post_page-----bcd9ebe83eb0--------------------------------" rel="noopener" target="_blank"> Mattias Petter Johansson </a>(不使用分号的“备受尊敬的程序员”之一)制作的这个<a class="ae lk" href="https://www.youtube.com/watch?v=Qlr-FGbhKaI" rel="noopener ugc nofollow" target="_blank">视频</a>，它是这篇文章的灵感来源！我<em class="mi">高度</em>推荐他的<a class="ae lk" href="https://www.youtube.com/channel/UCO1cgjhGzsSYb1rsB4bFe4Q" rel="noopener ugc nofollow" target="_blank">好玩好玩功能</a>频道。我沉迷于此。派人来帮忙！</p></div><div class="ab cl nc nd hc ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hn ho hp hq hr"><p id="ab3b" class="pw-post-body-paragraph kb kc hu kd b ke kx iv kg kh ky iy kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">请用反馈/问题来评论，并按下拍手按钮！</p></div></div>    
</body>
</html>