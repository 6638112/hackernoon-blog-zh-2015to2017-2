<html>
<head>
<title>Aurelia E2E Testing with TestCafe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">奥雷利亚·e2e用TestCafe测试</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/aurelia-e2e-testing-with-testcafe-b4fb19bcb0c9?source=collection_archive---------10-----------------------#2017-01-26">https://medium.com/hackernoon/aurelia-e2e-testing-with-testcafe-b4fb19bcb0c9?source=collection_archive---------10-----------------------#2017-01-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><h1 id="76c5" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated"><strong class="ak">简介</strong></h1><p id="29ea" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><a class="ae kn" href="http://aurelia.io/" rel="noopener ugc nofollow" target="_blank"> Aurelia </a>是一个<a class="ae kn" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>下一代移动、桌面和网络客户端框架。它是用ECMAScript 2016从头开始编写的，并作为一系列协作库来构建。这使得该框架具有前瞻性、功能强大且健壮。</p><p id="d490" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">随着Aurelia的流行，越来越多的人需要为他们的应用选择一个测试框架。他们希望它简单、功能强大，并且是Aurelia应用程序的原生产品。这就是为什么我们在<a class="ae kn" href="https://github.com/devexpress/testcafe" rel="noopener ugc nofollow" target="_blank"> TestCafe </a>团队制作了一个插件，将本地Aurelia选择器引入TestCafe测试:<a class="ae kn" href="https://github.com/miherlosev/testcafe-aurelia-selectors" rel="noopener ugc nofollow" target="_blank">test cafe-Aurelia-选择器</a>。</p><p id="c3f6" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">在本文中，我们将使用它来测试<a class="ae kn" href="http://todomvc.com/examples/aurelia/" rel="noopener ugc nofollow" target="_blank"> Aurelia TodoMVC应用程序</a>。</p><h1 id="0c9a" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">设置</h1><p id="c1b6" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">要开始使用TestCafe，您需要通过<code class="eh kt ku kv kw b">npm</code>安装它。</p><pre class="kx ky kz la fq lb kw lc ld aw le dt"><span id="16cc" class="lf is hu kw b fv lg lh l li lj">npm install testcafe</span></pre><p id="a50c" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">之后，为TestCafe安装Aurelia专用的选择器。</p><pre class="kx ky kz la fq lb kw lc ld aw le dt"><span id="0d29" class="lf is hu kw b fv lg lh l li lj">npm install testcafe-aurelia-selectors</span></pre><p id="4740" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">这个模块包含了最常用的Aurelia绑定的选择器。更多细节，请参见<a class="ae kn" href="https://github.com/miherlosev/testcafe-aurelia-selectors" rel="noopener ugc nofollow" target="_blank"> testcafe-aurelia-selectors库</a>。</p><h1 id="cd10" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">创建测试</h1><p id="36ce" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">创建一个新的<code class="eh kt ku kv kw b">todomvc.js</code>文件，并编写<code class="eh kt ku kv kw b">fixture</code>和<code class="eh kt ku kv kw b">test</code>定义。</p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><p id="ba51" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">接下来，指定设备的启动页面。</p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><h1 id="44b2" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">页面模型、测试动作和断言</h1><p id="6f01" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">我们将在一个名为<a class="ae kn" href="http://martinfowler.com/bliki/PageObject.html" rel="noopener ugc nofollow" target="_blank">页面模型</a>的对象中组织关于页面结构的信息。这意味着我们将在一个单独的类中为不同的页面元素分组选择器。TestCafe支持ES2016 JavaScript特性，所以我们的页面对象是简单的ES6类。</p><p id="78b5" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">让我们定义页面模型。</p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><p id="a64d" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">我们使用<code class="eh kt ku kv kw b">byValueBind</code> Aurelia选择器来识别一个新的todo项输入，它被绑定到<code class="eh kt ku kv kw b">newTodoTitle</code>值。为了识别待办事项列表，我们使用TestCafe CSS <a class="ae kn" href="https://devexpress.github.io/testcafe/documentation/test-api/selecting-page-elements/selectors.html" rel="noopener ugc nofollow" target="_blank">选择器</a>。</p><p id="cb14" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">你可以一起使用Aurelia特有的选择器和内置的TestCafe选择器。这些选择器返回相同的<a class="ae kn" href="https://devexpress.github.io/testcafe/documentation/test-api/selecting-page-elements/dom-node-state.html" rel="noopener ugc nofollow" target="_blank"> DomNodeState </a>对象。所以，你甚至可以把它们结合起来。</p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><p id="ad96" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">接下来，将页面模型类作为一个常规依赖项添加到测试文件中，并创建它的一个实例。</p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><p id="fe54" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">然后，添加测试动作和断言。</p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><p id="6e6b" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">该测试创建一个新的todo项目:在“new todo”输入中键入其名称，按Enter并检查项目是否存在。</p><p id="41a1" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">不需要调用等待方法。TestCafe自动等待，直到页面准备好执行测试操作。</p><p id="85a9" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">还要注意，您可以按任何顺序放置动作、断言和其他JavaScript代码。</p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><h1 id="ba61" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">运行测试</h1><p id="f86f" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">创建一个新的<code class="eh kt ku kv kw b">package.json</code>文件，并向其中添加一个测试运行命令。</p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><p id="e9a3" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">现在您已经准备好运行您的第一个测试了。</p><pre class="kx ky kz la fq lb kw lc ld aw le dt"><span id="9006" class="lf is hu kw b fv lg lh l li lj">npm test</span></pre><p id="909e" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">或者，您可以指定测试应该在几个浏览器中运行。</p><pre class="kx ky kz la fq lb kw lc ld aw le dt"><span id="8192" class="lf is hu kw b fv lg lh l li lj">testcafe chrome,firefox todomvc.js</span></pre><p id="e719" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">或者您可以在本地机器上安装的所有浏览器中运行您的测试。</p><pre class="kx ky kz la fq lb kw lc ld aw le dt"><span id="0bd8" class="lf is hu kw b fv lg lh l li lj">testcafe all todomvc.js</span></pre><p id="f554" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">更多细节请参见<a class="ae kn" href="https://devexpress.github.io/testcafe/documentation/using-testcafe/command-line-interface.html" rel="noopener ugc nofollow" target="_blank"> TestCafe命令行界面</a></p><p id="b506" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">当您运行<code class="eh kt ku kv kw b">npm test</code>命令时，TestCafe打开Google Chrome，执行测试，收集输出，关闭浏览器并将输出发送到您的shell。</p><figure class="kx ky kz la fq lk fe ff paragraph-image"><div class="fe ff ln"><img src="../Images/06e2566f2ba0b40785eb41677f1d61d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*f8PIVdX-la685S4G_KVagw.png"/></div></figure><p id="2e7c" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">如果您的断言失败或者测试代码包含语法错误，TestCafe会报告包括调用点在内的问题。</p><p id="7acc" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">让我们将断言代码改为</p><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="ll lm l"/></div></figure><p id="117e" class="pw-post-body-paragraph jp jq hu jr b js ko ju jv jw kp jy jz ka kq kc kd ke kr kg kh ki ks kk kl km hn dt translated">再做一次测试。您将看到以下报告。</p><figure class="kx ky kz la fq lk fe ff paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="fe ff lq"><img src="../Images/f9617d1b5ab76a95ded7d8b0e4cb0aa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lX_qfafVAwsk5Gwao3E1AA.png"/></div></div></figure><h1 id="7f5c" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">扩展TestCafe功能</h1><p id="cc66" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">如果TestCafe没有提供你需要的某些功能或者浏览器支持怎么办？由于TestCafe是一个<a class="ae kn" href="https://hackernoon.com/tagged/nodejs" rel="noopener ugc nofollow" target="_blank"> node.js </a>应用程序，您可以使用node.js生态系统中的任何模块。还有，TestCafe有两个扩展点:可以编写自己的<a class="ae kn" href="https://devexpress.github.io/testcafe/documentation/extending-testcafe/browser-provider-plugin/" rel="noopener ugc nofollow" target="_blank">浏览器插件</a>和<a class="ae kn" href="https://devexpress.github.io/testcafe/documentation/extending-testcafe/reporter-plugin/" rel="noopener ugc nofollow" target="_blank">记者插件</a>。</p><h1 id="04a4" class="ir is hu bd it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo dt translated">完成的</h1><p id="ec14" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">仅此而已。如果你有关于TestCafe的问题——欢迎在我们的<a class="ae kn" href="https://testcafe-discuss.devexpress.com/" rel="noopener ugc nofollow" target="_blank">论坛</a>或<a class="ae kn" href="https://github.com/DevExpress/testcafe" rel="noopener ugc nofollow" target="_blank"> GitHub页面</a>提问！</p><div class="kx ky kz la fq ab cb"><figure class="lv lk lw lx ly lz ma paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="lv lk lw lx ly lz ma paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="lv lk lw lx ly lz ma paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mb mc md"><p id="f922" class="jp jq me jr b js ko ju jv jw kp jy jz mf kq kc kd mg kr kg kh mh ks kk kl km hn dt translated"><a class="ae kn" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kn" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kn" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae kn" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jp jq me jr b js ko ju jv jw kp jy jz mf kq kc kd mg kr kg kh mh ks kk kl km hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kn" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kn" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kx ky kz la fq lk fe ff paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="fe ff mi"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="kx ky kz la fq lk"><div class="bz el l di"><div class="mj lm l"/></div></figure></div></div>    
</body>
</html>