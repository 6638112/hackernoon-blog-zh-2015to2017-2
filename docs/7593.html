<html>
<head>
<title>How to use Puppeteer as an
Acceptance Test</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用木偶师作为验收测试</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-use-puppeteer-as-a-acceptance-test-f301982f2457?source=collection_archive---------18-----------------------#2017-11-01">https://medium.com/hackernoon/how-to-use-puppeteer-as-a-acceptance-test-f301982f2457?source=collection_archive---------18-----------------------#2017-11-01</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="3b48" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你们可能会混淆木偶师是一个浏览器自动化。<code class="eh jp jq jr js b">assert</code>的东西没有API。我们如何将它用作验收测试工具？。</p><p id="8ef0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们可以将它与任何javascript测试工具集成。因此，他们将有能力做浏览器自动化和测试。在本文中，我们将使用jest作为测试工具。<br/>首先，我们将安装<code class="eh jp jq jr js b">Puppeteer</code>和<code class="eh jp jq jr js b">Jest</code></p><pre class="jt ju jv jw fq jx js jy jz aw ka dt"><span id="0291" class="kb kc hu js b fv kd ke l kf kg">yarn init<br/>yarn add puppeteer jest</span></pre><p id="d037" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">将此代码添加到<code class="eh jp jq jr js b">package.json</code></p><pre class="jt ju jv jw fq jx js jy jz aw ka dt"><span id="2e50" class="kb kc hu js b fv kd ke l kf kg">"scripts": {<br/>  "test": "jest"<br/>}</span></pre><p id="29f1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后我们将使用木偶师打开<a class="ae kh" href="http://prontotools.io" rel="noopener ugc nofollow" target="_blank"> Pronto工具</a>网站，检查标题是否等于<code class="eh jp jq jr js b">Pronto Tools</code>。然后，检查屏幕中央的文本是否相等</p><pre class="jt ju jv jw fq jx js jy jz aw ka dt"><span id="c32e" class="kb kc hu js b fv kd ke l kf kg">Tools for Your Growing Business</span></pre><p id="b77c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">是时候编码了。让我们创建文件名<code class="eh jp jq jr js b">test.js</code>，并将下面的代码放到这个文件中</p><pre class="jt ju jv jw fq jx js jy jz aw ka dt"><span id="4a2b" class="kb kc hu js b fv kd ke l kf kg">const puppeteer = require('puppeteer');</span><span id="bc54" class="kb kc hu js b fv ki ke l kf kg">describe('Open ProntoTools Website', () =&gt; {<br/>  var browser, page;<br/>  var url = '<a class="ae kh" href="https://prontotools.io'" rel="noopener ugc nofollow" target="_blank">https://prontotools.io'</a></span><span id="fa03" class="kb kc hu js b fv ki ke l kf kg">beforeEach (async () =&gt; {<br/>    browser = await puppeteer.launch({ headless: false });<br/>    page = await browser.newPage();<br/>  })</span><span id="79d7" class="kb kc hu js b fv ki ke l kf kg">afterEach (() =&gt; {<br/>    browser.close()<br/>  })</span><span id="7e96" class="kb kc hu js b fv ki ke l kf kg">test('Title == Pronto Tools', async () =&gt; {<br/>    await page.goto(url);<br/>    const title = await page.title();<br/>    expect(title).toBe("Pronto Tools");<br/>  });</span><span id="76a7" class="kb kc hu js b fv ki ke l kf kg">test("Center == Tools for Your Growing Business", async () =&gt; {<br/>    await page.goto(url);<br/>    const center = await page.$eval('h2.font-34.uppercase &gt; strong', e =&gt; e.innerHTML);<br/>    expect(center).toBe("Tools for Your Growing Business");<br/>  });<br/>})</span></pre><p id="1ef9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在第一种情况下，我们通过打开网站检查标题，并检查标题标签是否相等<code class="eh jp jq jr js b">Pronto Tools</code></p><p id="5ba2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">第二种情况，我们将打开网站并检查我们感兴趣的选择器的innerHTML</p><p id="8b0c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在每个测试用例中，我们将在运行测试用例之前打开浏览器，在<code class="eh jp jq jr js b">beforeEach</code>和<code class="eh jp jq jr js b">afterEach</code>之后完成测试用例之后关闭浏览器</p><p id="2e58" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，我们可以使用<code class="eh jp jq jr js b">yarn test</code>命令运行我们的测试套件并得到结果</p><figure class="jt ju jv jw fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="fe ff kj"><img src="../Images/5b40b94797610e1d90d59865bee45336.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*41oOGEVWqb6GRkXwYezwIg.png"/></div></div></figure><p id="d21c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是使用<code class="eh jp jq jr js b">Puppeteer</code>和<code class="eh jp jq jr js b">Jest</code>进行浏览器自动化测试的简单方法</p></div></div>    
</body>
</html>