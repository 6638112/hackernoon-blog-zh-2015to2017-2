<html>
<head>
<title>Deploying a Phoenix 1.3 Umbrella app to Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Phoenix 1.3雨伞应用程序部署到Heroku</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/deploying-a-phoenix-1-3-umbrella-app-to-heroku-452436b2b37f?source=collection_archive---------11-----------------------#2017-04-18">https://medium.com/hackernoon/deploying-a-phoenix-1-3-umbrella-app-to-heroku-452436b2b37f?source=collection_archive---------11-----------------------#2017-04-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="e343" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Heroku 构建包基于早期版本对你的项目做了一些假设，但是稍作调整就可以用于1.4版的Elixir和1.3版的Phoenix 。</p><p id="1b32" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这假设您使用<code class="eh jq jr js jt b">mix phx.new hello_phoenix --umbrella</code>创建了您的项目。在适当的地方用你的应用名称替换hello_phoenix和HelloPhoenix。</p><p id="d8be" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">http://www.phoenixframework.org/docs/heroku的大部分指令仍然有效。完成这些操作，然后进行以下更改:</p><ul class=""><li id="19d2" class="ju jv hu it b iu iv iy iz jc jw jg jx jk jy jo jz ka kb kc dt translated">这可能是显而易见的，但提到的<code class="eh jq jr js jt b">config/prod.exs</code>是web app文件夹中的那个:<code class="eh jq jr js jt b">hello_phoenix_umbrella/apps/hello_phoenix_web/config/prod.exs</code>。</li><li id="1e21" class="ju jv hu it b iu kd iy ke jc kf jg kg jk kh jo jz ka kb kc dt translated">将<code class="eh jq jr js jt b">prod.exs</code>中的参考从<code class="eh jq jr js jt b">HelloPhoenix.Endpoint</code>更改为<code class="eh jq jr js jt b">HelloPhoenix.Web.Endpoint</code>。</li><li id="bde9" class="ju jv hu it b iu kd iy ke jc kf jg kg jk kh jo jz ka kb kc dt translated">你还需要从<code class="eh jq jr js jt b">hello_phoenix_umbrella/config/prod.exs</code>中移除<code class="eh jq jr js jt b">import_config "prod.secret.exs"</code>。</li><li id="19fa" class="ju jv hu it b iu kd iy ke jc kf jg kg jk kh jo jz ka kb kc dt translated">在项目的根目录下创建一个名为<code class="eh jq jr js jt b">phoenix_static_buildpack.config</code>的文件，并添加下面一行<code class="eh jq jr js jt b">phoenix_relative_path=apps/hello_phoenix_web</code>。</li><li id="6bc7" class="ju jv hu it b iu kd iy ke jc kf jg kg jk kh jo jz ka kb kc dt translated">将Procfile中的行改为<code class="eh jq jr js jt b">web: MIX_ENV=prod mix phx.server</code>。</li><li id="250f" class="ju jv hu it b iu kd iy ke jc kf jg kg jk kh jo jz ka kb kc dt translated">如果您的应用程序使用数据库，您可以将这一行添加到Procfile中，以便在发布时运行迁移:<code class="eh jq jr js jt b">release: mix ecto.migrate</code>。</li><li id="c293" class="ju jv hu it b iu kd iy ke jc kf jg kg jk kh jo jz ka kb kc dt translated">创建一个名为<code class="eh jq jr js jt b">elixir_buildpack.config</code>的文件，并设置您的Erlang和Elixir版本以及运行时路径(/app是您的项目的根):</li></ul><pre class="ki kj kk kl fq km jt kn ko aw kp dt"><span id="feae" class="kq kr hu jt b fv ks kt l ku kv">erlang_version=19.1<br/>elixir_version=1.4.2<br/>runtime_path=/app</span></pre><h1 id="df81" class="kw kr hu bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls dt translated">如果您使用Elm:</h1><p id="7519" class="pw-post-body-paragraph ir is hu it b iu lt iw ix iy lu ja jb jc lv je jf jg lw ji jj jk lx jm jn jo hn dt translated">在Phoenix buildpack中有一个关于<a class="ae jp" href="https://github.com/gjaldon/heroku-buildpack-phoenix-static/issues/30" rel="noopener ugc nofollow" target="_blank">支持Elm </a>的未决问题🤗。现在，如果你正在用elm-brunch编译你的Elm应用程序，你可以把<code class="eh jq jr js jt b">elm</code>作为一个依赖项添加到你的<code class="eh jq jr js jt b">apps/hello_phoenix_web/assets/package.json</code>中。</p><blockquote class="ly lz ma"><p id="f706" class="ir is mb it b iu iv iw ix iy iz ja jb mc jd je jf md jh ji jj me jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is mb it b iu iv iw ix iy iz ja jb mc jd je jf md jh ji jj me jl jm jn jo hn dt translated">要了解更多信息，请<a class="ae jp" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">阅读我们的“关于”页面</a>、<a class="ae jp" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书上点赞/给我们发消息</a>，或者简单地说，<a class="ae jp" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ir is mb it b iu iv iw ix iy iz ja jb mc jd je jf md jh ji jj me jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ki kj kk kl fq mf"><div class="bz el l di"><div class="mg mh l"/></div></figure></div></div>    
</body>
</html>