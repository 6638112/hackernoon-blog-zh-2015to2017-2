<html>
<head>
<title>‘resize’ Event Broken in Mobile Safari</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Mobile Safari中的“调整大小”事件中断</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/onresize-event-broken-in-mobile-safari-d8469027bf4d?source=collection_archive---------9-----------------------#2017-04-19">https://medium.com/hackernoon/onresize-event-broken-in-mobile-safari-d8469027bf4d?source=collection_archive---------9-----------------------#2017-04-19</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="38a0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">苹果最新的移动Safari (iOS 10.3.1)打破了<a class="ae jp" href="https://developer.mozilla.org/en-US/docs/Web/Events/resize" rel="noopener ugc nofollow" target="_blank"> <em class="jq">调整</em> </a>的行为。</p><p id="8e94" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">直到最近，Mobile <a class="ae jp" href="https://hackernoon.com/tagged/safari" rel="noopener ugc nofollow" target="_blank"> Safari </a>已经正确发布了调整视窗大小后的<em class="jq"> resize </em>事件和页面布局 <em class="jq">后的<strong class="it hv">事件。</strong></em>然而，情况不再是这样了。相反，它是在页面完全布局之前发布的。任何<a class="ae jp" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>依赖<a class="ae jp" href="https://developer.mozilla.org/en-US/docs/Web/API/Element/clientWidth" rel="noopener ugc nofollow" target="_blank"><em class="jq">client width</em></a><em class="jq">，</em><a class="ae jp" href="https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight" rel="noopener ugc nofollow" target="_blank"><em class="jq">client height</em></a><em class="jq">，</em><a class="ae jp" href="https://developer.mozilla.org/en/docs/Web/API/Element/getBoundingClientRect" rel="noopener ugc nofollow" target="_blank"><em class="jq">getBoundingClientRect</em></a>等。在一个<em class="jq"> onresize </em>回调现已中断。</p><p id="3ca8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在观察这种新行为时，我的第一个想法是“移动Safari团队怎么没有注意到这一点呢？肯定冲击了苹果自己的网站！”</p><p id="ba86" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">于是我着手查看<a class="ae jp" href="https://www.apple.com/" rel="noopener ugc nofollow" target="_blank">苹果的主页</a>。</p><p id="ca8f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，任何使用纯CSS调整大小的元素都不会受到影响，只有由JavaScript <em class="jq"> resize </em>回调调整大小的DOM元素会受到影响。对我来说幸运的是，在苹果主页的正上方是一个图像转盘，目前正在为红色的iPhone 7、Apple Watch Series 2和iPad做广告。旋转木马通常非常依赖JavaScript来确定大小，事实上，是我自己的旋转木马没有工作，导致我陷入了这场徒劳的追逐！</p><p id="96d3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">好吧，让我们看着这个旋转木马，我从肖像旋转到风景。果然，就在旋转完成的时候…</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff jr"><img src="../Images/383f7d7cf35af5e72b12ff5f9bc8ba75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sqlj7r60FMSmL__r7uNphw.png"/></div></div></figure><p id="867c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">“啊，真讨厌！”</p><p id="10ee" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">奇怪的是，这种故障布局，虽然100%可复制，但只是非常短暂地可见，然后网页布局以某种方式恢复。</p><p id="cb8f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我想知道他们是如何解决这个问题的。让我们看看他们的旋转木马代码…</p><figure class="js jt ju jv fq jw"><div class="bz el l di"><div class="kd ke l"/></div></figure><p id="a40c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">拜托，说真的！？500毫秒超时…“去抖”…这是什么废话？为什么是500毫秒？为什么不是400毫秒，或者600毫秒？</p><p id="9438" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">好吧，所以在这一点上，我觉得我的旋转木马打破了一点点。毕竟，苹果自己也依靠可怕的黑客来解决浏览器的恶劣行为。然而，这种放松是短暂的，因为我意识到，如果我要“修理”我的旋转木马，我将不得不实现一些同样糟糕的事情。</p><p id="b65b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jq">感叹！</em></p><p id="68cc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">好吧，苹果，看来你又赢了一轮苹果对开发者的比赛。拜托，我不想看记分牌。</p><p id="79fb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">https://openradar.appspot.com/radar?id=5040881597939712<a class="ae jp" href="https://openradar.appspot.com/radar?id=5040881597939712" rel="noopener ugc nofollow" target="_blank"/></p><div class="js jt ju jv fq ab cb"><figure class="kf jw kg kh ki kj kk paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="kf jw kg kh ki kj kk paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="kf jw kg kh ki kj kk paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="kl km kn"><p id="f922" class="ir is jq it b iu iv iw ix iy iz ja jb ko jd je jf kp jh ji jj kq jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is jq it b iu iv iw ix iy iz ja jb ko jd je jf kp jh ji jj kq jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff kr"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="js jt ju jv fq jw"><div class="bz el l di"><div class="ks ke l"/></div></figure></div></div>    
</body>
</html>