<html>
<head>
<title>Aigle vs Bluebird</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">艾格vs蓝鸟</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/aigle-vs-bluebird-5ed3becb4c4c?source=collection_archive---------6-----------------------#2017-05-11">https://medium.com/hackernoon/aigle-vs-bluebird-5ed3becb4c4c?source=collection_archive---------6-----------------------#2017-05-11</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/1c718cbb4deaa404c949c7d769725fdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ATqFLYyVcMc1akgPQMz6Cg.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">bench doxbee</figcaption></figure><figure class="jh ji jj jk fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff jg"><img src="../Images/0923922ace9d9d766a28f89a69e6a9d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_pdSRN3WWeX5e0DaadgXZw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">bench parallel</figcaption></figure><p id="d043" class="pw-post-body-paragraph jl jm hu jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki hn dt translated"><code class="eh kj kk kl km b"><a class="ae kn" href="https://github.com/suguru03/aigle" rel="noopener ugc nofollow" target="_blank">Aigle</a></code>是一个理想的promise库，我创建它是为了改善我在使用其他promise库如<code class="eh kj kk kl km b">Bluebird</code>时发现的低效率。除了令人印象深刻的基准测试之外，它还是一个实现Promise A+标准的生产就绪库。</p><h1 id="d8b2" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll dt translated">基准</h1><p id="a85b" class="pw-post-body-paragraph jl jm hu jn b jo lm jq jr js ln ju jv jw lo jy jz ka lp kc kd ke lq kg kh ki hn dt translated"><a class="ae kn" href="https://github.com/suguru03/bluebird/tree/aigle/benchmark" rel="noopener ugc nofollow" target="_blank">以上基准练习</a>表明<code class="eh kj kk kl km b">Aigle</code>比<code class="eh kj kk kl km b">Bluebird</code>快。这是通过避免不必要的内存分配和函数调用实现的。例如，<code class="eh kj kk kl km b">Aigle</code>能够优化它的依赖项，而蓝鸟的性能会受到影响，如果它的依赖项使用它的不同版本。想了解更多关于<code class="eh kj kk kl km b">Aigle</code>如何比<code class="eh kj kk kl km b">Bluebird</code>更快的信息，我鼓励你阅读我的文章。</p><h1 id="4bb2" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll dt translated">功能</h1><p id="74c6" class="pw-post-body-paragraph jl jm hu jn b jo lm jq jr js ln ju jv jw lo jy jz ka lp kc kd ke lq kg kh ki hn dt translated"><code class="eh kj kk kl km b">Aigle</code>让你的代码不那么冗长，包含很多类似于<code class="eh kj kk kl km b"><a class="ae kn" href="https://github.com/lodash/lodash" rel="noopener ugc nofollow" target="_blank">Lodash</a></code>和<code class="eh kj kk kl km b"><a class="ae kn" href="https://github.com/caolan/async" rel="noopener ugc nofollow" target="_blank">Async</a></code>的函数。因此，您将能够更快地编写代码，并且有更轻松的时间来维护代码。</p><h2 id="51cf" class="lr kp hu bd kq ls lt lu ku lv lw lx ky jw ly lz lc ka ma mb lg ke mc md lk me dt translated">Aigle.map vs蓝鸟. map</h2><p id="8836" class="pw-post-body-paragraph jl jm hu jn b jo lm jq jr js ln ju jv jw lo jy jz ka lp kc kd ke lq kg kh ki hn dt translated">与<code class="eh kj kk kl km b">Bluebird.map</code>相比，<code class="eh kj kk kl km b">Aigle.map</code>快了1.5倍，并且不像<code class="eh kj kk kl km b">Bluebird.map</code>那样支持对象作为第一参数。</p><pre class="jh ji jj jk fq mf km mg mh aw mi dt"><span id="ac32" class="lr kp hu km b fv mj mk l ml mm">const object = {<br/>  a: 1,<br/>  b: 2,<br/>  c: 3<br/>};<br/>Blubird.map(Object.keys(object), key =&gt; {<br/>  const value = object[key];<br/>  ...<br/>});<br/>Aigle.map(object, (value, key) =&gt; { ... });</span></pre><p id="22d9" class="pw-post-body-paragraph jl jm hu jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki hn dt translated">如果要使用并发，<code class="eh kj kk kl km b">Aigle</code>有<code class="eh kj kk kl km b">Aigle.mapLimit</code>类似于<code class="eh kj kk kl km b">Async.mapLimit</code>。</p><pre class="jh ji jj jk fq mf km mg mh aw mi dt"><span id="0def" class="lr kp hu km b fv mj mk l ml mm">const array = [1, 2, 3, 4, 5];<br/>Bluebird.map(array, value =&gt; {<br/>  console.log(value); // 1, 2, 5, 4, 3 the order is not ensured<br/>  return Bluebird.delay(10);<br/>}, { concurrency: 2 });</span><span id="b0fc" class="lr kp hu km b fv mn mk l ml mm">Aigle.mapLimit(array, 2, value =&gt; {<br/>  console.log(value); // 1, 2, 3, 4, 5 the order is ensured<br/>  return Aigle.delay(10);<br/>});</span><span id="ba7d" class="lr kp hu km b fv mn mk l ml mm">// you could use default limit, the limit is 8<br/>Aigle.mapLimit(array, value =&gt; {<br/>  console.log(value); // 1, 2, 3, 4, 5<br/>  return Aigle.delay(10);<br/>});</span></pre><p id="77d5" class="pw-post-body-paragraph jl jm hu jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki hn dt translated">此外，<code class="eh kj kk kl km b">Aigle</code>支持类似于<code class="eh kj kk kl km b">Lodash</code>的简写符号，用于更清晰的代码。</p><pre class="jh ji jj jk fq mf km mg mh aw mi dt"><span id="4029" class="lr kp hu km b fv mj mk l ml mm">const array = [{ name: 'barney' }, { name: 'fred' }];<br/>Aigle.resolve(array)<br/>  .map('name') // the function is called asynchronously<br/>  .then(names =&gt; console.log(names)); // ['barney', 'fred']</span></pre><h2 id="ada2" class="lr kp hu bd kq ls lt lu ku lv lw lx ky jw ly lz lc ka ma mb lg ke mc md lk me dt translated">Aigle.mapValues</h2><p id="9957" class="pw-post-body-paragraph jl jm hu jn b jo lm jq jr js ln ju jv jw lo jy jz ka lp kc kd ke lq kg kh ki hn dt translated">功能与<code class="eh kj kk kl km b">Async.mapValues</code>和<code class="eh kj kk kl km b">Lodash.mapValues</code>类似。它也类似于<code class="eh kj kk kl km b">Aigle.map</code>，但是它返回一个对象。下面是<code class="eh kj kk kl km b">Aigle</code>和<code class="eh kj kk kl km b">Bluebird</code>的代码对比。</p><pre class="jh ji jj jk fq mf km mg mh aw mi dt"><span id="5e5f" class="lr kp hu km b fv mj mk l ml mm">const object = { a: 1, b: 2, c: 3 };<br/>const iterator = value =&gt; Promise.resolve(value * 2);</span><span id="a07c" class="lr kp hu km b fv mn mk l ml mm">// Bluebird<br/>const result = {};<br/>Bluebird.each(Object.keys(object), key =&gt; {<br/>  const value = object[key];<br/>  return iterator(value)<br/>    .then(val =&gt; {<br/>      result[key] = val;<br/>    });<br/>}).then(() =&gt; console.log(result)); // { a: 2, b: 4, c: 6 }</span><span id="492a" class="lr kp hu km b fv mn mk l ml mm">// Aigle<br/>Aigle.mapValues(object, iterator)<br/>  .then(result =&gt; console.log(result)); // { a: 2, b: 4, c: 6 }</span></pre><h1 id="c49e" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll dt translated">艾格尔时报</h1><p id="c875" class="pw-post-body-paragraph jl jm hu jn b jo lm jq jr js ln ju jv jw lo jy jz ka lp kc kd ke lq kg kh ki hn dt translated">功能类似于<code class="eh kj kk kl km b">Async.times</code>和<code class="eh kj kk kl km b">Lodash.times</code>。它调用迭代器指定的次数。</p><pre class="jh ji jj jk fq mf km mg mh aw mi dt"><span id="42a6" class="lr kp hu km b fv mj mk l ml mm">const n = 10;<br/>const iterator = value =&gt; Promise.resolve(value * 2);</span><span id="f636" class="lr kp hu km b fv mn mk l ml mm">// Bluebird<br/>const times = [];<br/>for (let i = 0; i &lt; n; i++) {<br/>  times.push(i);<br/>}<br/>Bluebird.map(times, iterator)<br/>  .then(result =&gt; console.log(result)); // [0, 2, 4, ..., 18]</span><span id="6dc0" class="lr kp hu km b fv mn mk l ml mm">// Aigle<br/>Aigle.times(n, iterator)<br/>  .then(result =&gt; console.log(result)); // [0, 2, 4, ..., 18]</span></pre><h1 id="993b" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll dt translated">结论</h1><p id="a825" class="pw-post-body-paragraph jl jm hu jn b jo lm jq jr js ln ju jv jw lo jy jz ka lp kc kd ke lq kg kh ki hn dt translated"><code class="eh kj kk kl km b">Aigle</code>是一个有前途的库，它提供了更安全、更简洁、更易维护的代码，拥有令人印象深刻的基准。上面记录的例子只是<code class="eh kj kk kl km b">Aigle</code>功能的一个子集。如果你已经熟悉了<code class="eh kj kk kl km b">Lodash</code>或<code class="eh kj kk kl km b">Async</code>，你将能够很容易地过渡到用<code class="eh kj kk kl km b">Aigle</code>编写更可读的代码。也就是说，让我们享受使用<code class="eh kj kk kl km b">Aigle</code>编写更快更高效的Javascript吧。</p><h1 id="2c03" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll dt translated">参考</h1><ul class=""><li id="5cb1" class="mo mp hu jn b jo lm js ln jw mq ka mr ke ms ki mt mu mv mw dt translated"><a class="ae kn" href="https://github.com/suguru03/aigle" rel="noopener ugc nofollow" target="_blank">艾格</a></li><li id="b832" class="mo mp hu jn b jo mx js my jw mz ka na ke nb ki mt mu mv mw dt translated"><a class="ae kn" href="https://github.com/petkaantonov/bluebird" rel="noopener ugc nofollow" target="_blank">蓝鸟</a></li></ul><div class="jh ji jj jk fq ab cb"><figure class="nc iv nd ne nf ng nh paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="nc iv nd ne nf ng nh paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="nc iv nd ne nf ng nh paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="ni nj nk"><p id="f922" class="jl jm nl jn b jo jp jq jr js jt ju jv nm jx jy jz nn kb kc kd no kf kg kh ki hn dt translated"><a class="ae kn" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是AMI家庭的一员。我们现在<a class="ae kn" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kn" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jl jm nl jn b jo jp jq jr js jt ju jv nm jx jy jz nn kb kc kd no kf kg kh ki hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kn" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kn" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jh ji jj jk fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff np"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>