<html>
<head>
<title>Twitter McTwitBot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Twitter McTwitBot</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/twitter-mctwitbot-4d15cd005dc0?source=collection_archive---------19-----------------------#2017-01-04">https://medium.com/hackernoon/twitter-mctwitbot-4d15cd005dc0?source=collection_archive---------19-----------------------#2017-01-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/1d4db3aac509c4d4736f22c72f084111.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*-PI3cmvXV0iQcWt5.png"/></div></figure><p id="67ba" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我必须说这样做很棒，也很好地介绍了<a class="ae jw" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> node.js </a>和<a class="ae jw" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a>。</p><p id="dd8e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我从在<a class="ae jw" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到它开始这样做，我想我是在bootstrap中寻找Twitter图标，当我在使用我的<a class="ae jw" href="http://codepen.io/spences10/full/dOaYbP/" rel="noopener ugc nofollow" target="_blank">随机报价生成器</a>时，我偶然发现了<a class="ae jw" href="https://github.com/mobeets/twitter-bot-bootstrap" rel="noopener ugc nofollow" target="_blank"> twitter-bot-bootstrap </a>(正如你所做的那样)，所以在停止了我在FreeCodeCamp上的进展后(🔥我决定尝试一下Twitter机器人，并设法创建了它，并将其添加到了Heroku🎉</p><p id="7ae9" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">不过，这款应用并没有预期的那么好🙁所以我决定看看他为我刚好参加的<a class="ae jw" href="https://medium.freecodecamp.com/start-2017-with-the-100daysofcode-improved-and-updated-18ce604b237b" rel="noopener ugc nofollow" target="_blank"> #100DaysOfCode </a>挑战赛创造的<a class="ae jw" href="https://twitter.com/amanhimself" rel="noopener ugc nofollow" target="_blank">@ amani自己</a>的Twitter机器人。</p><p id="87bf" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">因此，有了他伟大的文档<a class="ae jw" href="https://hackernoon.com/create-a-simple-twitter-bot-with-node-js-5b14eb006c08" rel="noopener ugc nofollow" target="_blank">在这里</a>和<a class="ae jw" href="https://community.risingstack.com/how-to-make-a-twitter-bot-with-node-js/" rel="noopener ugc nofollow" target="_blank">在这里</a>，我设法拼凑出了我自己的推特机器人，我在我的<a class="ae jw" href="https://twitter.com/ScottDevTweets" rel="noopener ugc nofollow" target="_blank"> @ScottDevTweets </a>推特账户上使用它</p><blockquote class="jx jy jz"><p id="b64a" class="iy iz ka ja b jb jc jd je jf jg jh ji kb jk jl jm kc jo jp jq kd js jt ju jv hn dt translated"><em class="hu">如果你对帖子名称</em> <a class="ae jw" href="https://en.wikipedia.org/wiki/RRS_Sir_David_Attenborough#Boaty_McBoatface_Naming_Controversy" rel="noopener ugc nofollow" target="_blank"> <em class="hu">有疑问，点击这里</em> </a> <em class="hu">。</em></p></blockquote><h1 id="3d04" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">使用的技术</h1><p id="8511" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">前言不碍事，现在我可以走了。</p><h1 id="e324" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">云9</h1><p id="47e7" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">我喜欢这个开发环境，当我试图在我的windows机器上安装Ruby时，以及第一次在我的计算机上安装Node.js后，我很快成为了一个<a class="ae jw" href="https://c9.io/?redirect=0" rel="noopener ugc nofollow" target="_blank"> c9 </a>的粉丝。</p><h1 id="4101" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">节点. js</h1><p id="5e14" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">我已经在我的c9环境中安装了这个，所以我只需要<code class="eh lh li lj lk b">npm install --save twit</code>然后我就可以启动并运行了</p><h1 id="c17b" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">赫罗库</h1><p id="54c9" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">直到我开始这个项目，我才真正了解Heroku是什么，但是一旦我阅读了指南，它就变得非常简单，并且在尝试安装之前，我已经在c9上安装了<a class="ae jw" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank"> Heroku CLI </a>。</p><h1 id="6517" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">开源代码库</h1><p id="1424" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">你可以直接从你的c9环境部署到Heroku，还有很多其他的集成工具可以使用，我还没有时间去研究。将您的代码放在某个地方的存储库中是一个很好的做法，GitHub被广泛使用。</p><h1 id="dd65" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">推特</h1><p id="d298" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">您需要从<a class="ae jw" href="https://apps.twitter.com/app/new" rel="noopener ugc nofollow" target="_blank"> Twitter开发门户</a>设置一个Twitter应用程序</p><p id="4123" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">以上所有信息都是对Aman提供的指南的补充，我现在要经历的事情是我在Heroku部署的经验，你可能想在其他地方托管应用程序。</p><h1 id="d6e5" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">我的方法</h1><p id="9036" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">使用<code class="eh lh li lj lk b">node bot.js</code>进行本地测试，在<a class="ae jw" href="https://twitter.com/amanhimself" rel="noopener ugc nofollow" target="_blank">@ aman Ishi</a>的例子中，它会立即发送tweet和favourite，然后启动计时器。</p><p id="c1b2" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">部署到Heroku <code class="eh lh li lj lk b">git push heroku master</code></p><p id="6279" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这是在我用commit消息将更改添加到Git并将更改推送到我的repo之后，终端命令如下:</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="6a99" class="lt kf hu lk b fv lu lv l lw lx">$ git add . $ git commit -m 'my detailed commit message' $ git push origin master $ git push heroku master</span></pre><p id="4f58" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">最后一个命令将在Heroku上为您构建应用程序，输出如下:</p><figure class="ll lm ln lo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="fe ff ly"><img src="../Images/3e787a499b51aa54a64136e274849fc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tKQT-UOy9jLF6vhx.png"/></div></div></figure><blockquote class="jx jy jz"><p id="20ff" class="iy iz ka ja b jb jc jd je jf jg jh ji kb jk jl jm kc jo jp jq kd js jt ju jv hn dt translated"><em class="hu">我知道这不是GitHub的标准做法，我正在了解如何分支和使用拉请求，所以请多包涵🙂</em></p></blockquote><p id="c063" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我遇到的第一个问题是Heroku <code class="eh lh li lj lk b">Procfile</code>，我不明白它为什么一直超时，这是因为它试图运行默认的<code class="eh lh li lj lk b">web</code>进程，而不是机器人需要的<code class="eh lh li lj lk b">worker</code>进程。</p><p id="4050" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在第1部分建立了基本框架后，我开始摆弄机器人使用的计时和查询字符串，这是事情开始有点偏离轨道的地方</p><figure class="ll lm ln lo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="fe ff md"><img src="../Images/37066978ed8b0a47da3888510dd0fb4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qKxnvsAeH5jVPxY8.png"/></div></div></figure><p id="1488" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">有很长一段时间，我不明白为什么我会得到这么多错误，通过代码中的大量<code class="eh lh li lj lk b">console.log(var)</code>,我得出结论，我使用的查询字符串:</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="4ca2" class="lt kf hu lk b fv lu lv l lw lx">var queryString = '#100DaysOfCode, #GitHub, #VSCode';</span></pre><p id="fc16" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">您可以通过键入以下命令在应用运行时从Heroku获取日志:</p><p id="88f0" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这将从Heroku返回您的日志，因此您可以在其中添加您想要的所有调试行，以确定发生了什么。</p><p id="b9e4" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我看到了图中的错误，所以我开始使用查询字符串，一次只使用一个值，这不会导致任何错误，所以我决定通过添加下面的要点来一次传递一个值。</p><p id="0641" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这很有效，过了一段时间，同样的错误开始出现，然后我注意到<code class="eh lh li lj lk b">retweet</code>和<code class="eh lh li lj lk b">favoriteTweet</code>在一个计时器上，但是使用了来自<code class="eh lh li lj lk b">queryString</code>的相同随机文本，这与前一段代码的使用一样多，因为它是一次性初始化[或初始化]，所以相同的字符串被多次使用，导致了错误。</p><p id="cb50" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">所以在绞尽脑汁和摆弄代码之后，[并且无数次发推文] Aman建议我使用npm包<a class="ae jw" href="https://www.npmjs.com/package/unique-random-array" rel="noopener ugc nofollow" target="_blank">unique-random-array</a>从字符串列表中返回一个随机的字符串值。</p><p id="1438" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">所以我在里面加了<code class="eh lh li lj lk b">var</code>:</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="dfcb" class="lt kf hu lk b fv lu lv l lw lx">var uniqueRandomArray = require('unique-random-array');</span></pre><p id="8888" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">构建了查询字符串:</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="8ff6" class="lt kf hu lk b fv lu lv l lw lx">var queryString = uniqueRandomArray([ '100daysofcode', 'freecodecamp', 'github', 'vscode', 'visual studio code', 'nodejs', 'node.js', 'vuejs', 'vue.js', 'inferno_js', 'inferno.js', 'jekyll' ]);</span></pre><p id="5c6a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">然后只是用<code class="eh lh li lj lk b">queryString()</code>方法替换了<code class="eh lh li lj lk b">queryString</code>弦。</p><p id="7cea" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">一些其他需要注意的事情是我在玩机器人时发现的<code class="eh lh li lj lk b">retweet</code>和<code class="eh lh li lj lk b">favoriteTweet</code>功能<code class="eh lh li lj lk b">params</code>是<code class="eh lh li lj lk b">result_type:</code>选项，这里是我从Twitter开发门户粘贴的评论副本:</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="e4fe" class="lt kf hu lk b fv lu lv l lw lx">// result_type: options, mixed, recent, popular // * mixed : Include both popular and real time results in the response. // * recent : return only the most recent results in the response // * popular : return only the most popular results in the response.</span></pre><p id="c4c9" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">下一步可以使用<code class="eh lh li lj lk b">unique-random-array</code>包来改变这个值。</p><p id="0e55" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">目前为止，我仍然有一个奇怪的bug，如果我跟踪某人，然后有人跟踪我，机器人会决定向自己发送推文！</p><figure class="ll lm ln lo fq iv fe ff paragraph-image"><div class="fe ff me"><img src="../Images/84e062d24871d4ef3d33b7ce52f780d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/0*GIkrQ7umf8b9TX_3.png"/></div></figure><h1 id="968c" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">接下来</h1><p id="f1b2" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">更多关于<code class="eh lh li lj lk b">.stream()</code>功能的东西，比如自动回复和更好的回复。</p></div><div class="ab cl mf mg hc mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="hn ho hp hq hr"><p id="bedf" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><em class="ka">原载于2017年1月4日</em><a class="ae jw" href="https://blog.scottspence.me/twitter-mctwitbot/" rel="noopener ugc nofollow" target="_blank"><em class="ka">blog . Scotts pence . me</em></a><em class="ka">。</em></p></div></div>    
</body>
</html>