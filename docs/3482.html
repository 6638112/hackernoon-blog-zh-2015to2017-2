<html>
<head>
<title>API Design — Temporal Coupling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">API设计——时间耦合</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/api-design-temporal-coupling-2c1687173c7c?source=collection_archive---------7-----------------------#2017-04-04">https://medium.com/hackernoon/api-design-temporal-coupling-2c1687173c7c?source=collection_archive---------7-----------------------#2017-04-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="4e21" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">通过在编译时实施明显的API，使开发变得更加容易</h2></div><p id="3527" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">时间耦合是一种严重的代码味道。对于一个开发者来说，错误地调用一个好的API应该是很难的。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff kg"><img src="../Images/2bd5cfa8bf7952ce0bbcc25866da47fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wFQcfWZTrgVp9F6P6Mrf2g.png"/></div></div><figcaption class="ks kt fg fe ff ku kv bd b be z ek">Usage of a BadApi that is temporally coupled</figcaption></figure><p id="6141" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">上面的代码编译后，运行时抛出了一个错误。为什么？</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff kw"><img src="../Images/e95c64616e36de68eb10e34a1c253c86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LKihSuKA3JkUbfnboOEi3Q.png"/></div></div><figcaption class="ks kt fg fe ff ku kv bd b be z ek">BadApi implementation</figcaption></figure><p id="08c2" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在调用<code class="eh kx ky kz la b">login()</code>之前<em class="kf">没有设置<code class="eh kx ky kz la b">badApi.url</code>字段。要求一个类的某些方法以特定的顺序被调用被称为<em class="kf">时间耦合</em>，这降低了开发速度。</em></p><h1 id="4eae" class="lb lc hu bd ld le lf lg lh li lj lk ll ja lm jb ln jd lo je lp jg lq jh lr ls dt translated">如何避免时间耦合</h1><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff lt"><img src="../Images/678d0693585c4e6588ecdfde2c2e0bfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*johp6lIvzlVmLe-Ry5i7OA.png"/></div></div><figcaption class="ks kt fg fe ff ku kv bd b be z ek">Usage of a good api</figcaption></figure><p id="58d2" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">除了传递无效数据，很难错误地调用这个API。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff lu"><img src="../Images/6225672258a5f30f03a7cd28868da2da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A8IyAAOHBK-Zoea18xAm3A.png"/></div></div><figcaption class="ks kt fg fe ff ku kv bd b be z ek">GoodApi implementation</figcaption></figure><h1 id="3134" class="lb lc hu bd ld le lf lg lh li lj lk ll ja lm jb ln jd lo je lp jg lq jh lr ls dt translated">奖励积分</h1><p id="c882" class="pw-post-body-paragraph jj jk hu jl b jm lv iv jo jp lw iy jr js lx ju jv jw ly jy jz ka lz kc kd ke hn dt translated">尽早验证，用类型安全的对象代替<code class="eh kx ky kz la b">Strings</code>。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff ma"><img src="../Images/25ad663411b25574c9b22b76ba434dfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5a0ejTnygiz5S0pnCPd9XQ.png"/></div></div></figure><p id="28ad" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">两种可能的<code class="eh kx ky kz la b">.login()</code>实现:</p><ol class=""><li id="9aa9" class="mb mc hu jl b jm jn jp jq js md jw me ka mf ke mg mh mi mj dt translated"><code class="eh kx ky kz la b">fun login(username: String, password: String)</code></li><li id="4612" class="mb mc hu jl b jm mk jp ml js mm jw mn ka mo ke mg mh mi mj dt translated"><code class="eh kx ky kz la b">fun login(username: Username, password: Password)</code></li></ol><p id="75e0" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">#1允许开发人员不小心混淆用户名和密码字段(代码可以编译，因为两个参数都是字符串)，而#2则不可能。</p><p id="8dd8" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">代码可在<a class="ae mp" href="https://gist.github.com/ZakTaccardi/ad726135c204d632cfcdd4f7e2cd78a4" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上获得。</p><p id="98a4" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在<a class="ae mp" href="https://www.reddit.com/r/androiddev/comments/63mafk/avoid_temporal_coupling_in_your_apis/" rel="noopener ugc nofollow" target="_blank"> Reddit </a>上捕捉对话！</p><p id="3331" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><a class="ae mp" rel="noopener" href="/p/84a143e32232/">第二部分:API设计——异常处理</a></p><div class="kh ki kj kk fq ab cb"><figure class="mq kl mr ms mt mu mv paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mq kl mr ms mt mu mv paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mq kl mr ms mt mu mv paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mw mx my"><p id="f922" class="jj jk kf jl b jm jn iv jo jp jq iy jr mz jt ju jv na jx jy jz nb kb kc kd ke hn dt translated"><a class="ae mp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是T21家庭的一员。我们现在<a class="ae mp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae mp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jj jk kf jl b jm jn iv jo jp jq iy jr mz jt ju jv na jx jy jz nb kb kc kd ke hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae mp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae mp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff nc"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>