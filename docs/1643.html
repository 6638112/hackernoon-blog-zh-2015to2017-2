<html>
<head>
<title>How To Learn With Open Source API Fundamentals</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何学习开源API基础知识</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-learn-with-open-source-api-fundamentals-1f886383b8e1?source=collection_archive---------3-----------------------#2016-11-24">https://medium.com/hackernoon/how-to-learn-with-open-source-api-fundamentals-1f886383b8e1?source=collection_archive---------3-----------------------#2016-11-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="fa49" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">观察流行的开源项目如何记录它们的公共API，以及它如何应用于闭源项目</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/1ba714a9204315054ec5447dd856cffb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lIgKEPXJc9zD3yuvKekjKQ.jpeg"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">A design artwork showing interconnected plugs with an engine in the center</figcaption></figure><p id="6a34" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">除了像Linux这样的大成就之外，<a class="ae kv" href="https://hackernoon.com/tagged/open-source" rel="noopener ugc nofollow" target="_blank"> <strong class="kb hv">开源</strong> </a>生态系统充满了可重用的项目，这些项目处理各种各样的技术问题，如框架、库、服务器、数据库等。正如鲍勃大叔在<a class="ae kv" href="https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html" rel="noopener ugc nofollow" target="_blank">【清洁建筑】</a>上所说，它们只是“细节”。它们代表了开发人员不需要考虑的问题，如果其他人构建的合适的解决方案已经可用的话。</p><p id="a7b3" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">大多数盈利性组织也以一种<strong class="kb hv">闭源</strong>的方式坚持相同的可重用项目原则。当开源不适合时，他们建立内部项目来处理内部问题。他们为某个问题构建内部项目的原因可能各不相同。这可能是因为没有开源项目解决方案来解决他们的问题，也可能是因为这个问题对于他们的领域来说太具体了，对于开源项目来说没有意义。</p><p id="f9fb" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">然而，有一样东西对开源和闭源组织都很有价值:公共API文档。</p><p id="20c5" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">我们从一些流行的开源项目中了解到，库的<a class="ae kv" rel="noopener" href="/@fagnerbrack/library-internals-do-not-exist-1ff50a30e3b0">内部不应该向使用它的人公开</a>。其原因与我们在系统内部构建抽象的原因是一样的。我们将复杂性限制在具有高内聚性的小模块和组件中，并遵循软件工程的几个原则来保持它们的可维护性。</p><p id="90fc" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">对于开源或闭源API也可以这样做。在这种情况下，抽象以人类可读文档的形式存在，而不是强迫消费者依赖组成API的类或函数的原始定义。一些开源项目，如蓝鸟、httpie和pageres，似乎遵循相同的哲学，因为它们的文档质量很高。</p><blockquote class="kw"><p id="9c0c" class="kx ky hu bd kz la lb lc ld le lf ku ek translated">公共API文档的目的类似于<a class="ae kv" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程</a>语言的<a class="ae kv" href="https://en.wikipedia.org/wiki/Encapsulation_(computer_programming)" rel="noopener ugc nofollow" target="_blank">封装构造</a>的目的，即通过公开可供开发人员使用的人类可读接口来抽象复杂性</p></blockquote><p id="6ce1" class="pw-post-body-paragraph jz ka hu kb b kc lg iv ke kf lh iy kh ki li kk kl km lj ko kp kq lk ks kt ku hn dt translated">有很多方法可以使用一个可重用的API。然而，它越缺乏人类可读的形式，就越难有效地消费它。以下是我们在使用这样的API时的选择，按照从最有效到最不有效的顺序排列:</p><ol class=""><li id="5e4d" class="ll lm hu kb b kc kd kf kg ki ln km lo kq lp ku lq lr ls lt dt translated"><strong class="kb hv">阅读人类可读的文档，</strong>例如，可以从允许生成可浏览API的源代码或自述文件中构建。</li><li id="830a" class="ll lm hu kb b kc lu kf lv ki lw km lx kq ly ku lq lr ls lt dt translated">阅读记录项目支持的测试。如果它们以人类可读的形式清楚地描述了内部的行为(比如当使用BDD——行为驱动开发——编写测试时),这是很有用的。</li><li id="846b" class="ll lm hu kb b kc lu kf lv ki lw km lx kq ly ku lq lr ls lt dt translated"><strong class="kb hv">视察公共成员。通过这种方式，我们可以根据API的高级目的以及公共成员的定义和命名方式来推断支持什么。</strong></li><li id="1e83" class="ll lm hu kb b kc lu kf lv ki lw km lx kq ly ku lq lr ls lt dt translated"><strong class="kb hv">寻找网上例子或询问其他消费者。</strong>对于开源API，我们可以在网上寻找例子。然而，对于一个闭源API，我们需要询问项目中使用过该API的其他成员，因为这样的信息不太可能存在于网上的任何地方。</li></ol><p id="2e92" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">以上每种方法都有积极和消极的影响。出于本文的目的，我将关注社区通常认为交流API最有效的方式，即<strong class="kb hv">“人类可读文档”</strong>。</p><blockquote class="kw"><p id="2867" class="kx ky hu bd kz la lb lc ld le lf ku ek translated">公共API越缺乏人类可读的文档，就越难有效地使用它</p></blockquote><p id="b286" class="pw-post-body-paragraph jz ka hu kb b kc lg iv ke kf lh iy kh ki li kk kl km lj ko kp kq lk ks kt ku hn dt translated">在<strong class="kb hv">开源</strong>中，作者倾向于不太关心人类可读的API。除非项目已经很受欢迎或者得到了盈利组织的支持，否则编码是在开发人员的无薪空闲时间完成的。在空闲时间工作的开发人员通常更关心的主要目标是<strong class="kb hv">构建有趣和有用的东西</strong>而不是为别人编写文档。</p><p id="fbd7" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">然而，这种心态可能会违背自己的主要目标。</p><p id="d7d1" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">创建开源项目的一个主要原因是为了减轻其他人所经历的痛苦。这个项目被公开，希望其他开发者发现这个解决方案<strong class="kb hv">有趣并且有用</strong>。通过这种方式，他们可以开始使用它并为之做出贡献，从而使它更加健壮。如果没有人类可读形式的公共文档，除非项目非常受欢迎，否则消费者不会知道什么是受支持的API。这将减少有人花时间贡献或使用它的机会，这会使项目看起来<strong class="kb hv">不那么有趣或有用</strong>。</p><p id="65e2" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">而且，这使得作者无法理解哪些特性是受支持的，哪些是不受支持的。这使得重构和改进变得非常困难，因为每一个改变都需要被认为是一个突破性的改变，这是由于在特性和消费者之间缺乏契约。</p><blockquote class="kw"><p id="85e5" class="kx ky hu bd kz la lb lc ld le lf ku ek translated">没有人类可读形式的公共API会降低吸引贡献者或用户加入开源项目的机会</p></blockquote><p id="345c" class="pw-post-body-paragraph jz ka hu kb b kc lg iv ke kf lh iy kh ki li kk kl km lj ko kp kq lk ks kt ku hn dt translated">在<strong class="kb hv">的封闭源代码</strong>中，作者也倾向于不关心人类可读的API。</p><p id="4edf" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">一个项目开始的时候，是从一个沟通摩擦低、代码基数小的小团队开始的。即使在小范围内，在一个单独的可重用项目中分割一个关注点的需求仍然存在。然而，由于项目的规模和团队的规模，开发人员倾向于不优先考虑人类可读的API文档，而更喜欢专注于编写代码。</p><p id="d8ed" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">这种心态也可能违背营利性组织的主要目标。</p><p id="631c" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">当项目扩展时，很难找到空间来记录没有记录的内容。随着时间的推移，由于未记录的API使用，项目变得越来越僵化。即使团队在以后开始记录东西，也有可能开发人员是不同的，因此什么是受支持的，什么是不受支持的都在那些已经离开的人的脑子里。这可以通过所谓的<a class="ae kv" href="https://en.wikipedia.org/wiki/Bus_factor" rel="noopener ugc nofollow" target="_blank">卡车系数</a>来衡量。卡车因素定义了当重要的知识不能在参与项目的人员之间共享时的风险因素，这会妨碍其他人有效地继续工作。</p><blockquote class="kw"><p id="5c53" class="kx ky hu bd kz la lb lc ld le lf ku ek translated">时间流逝得越多，就越难改变一个未记录的项目，因为很难追踪它是如何被消耗的</p></blockquote><p id="2823" class="pw-post-body-paragraph jz ka hu kb b kc lg iv ke kf lh iy kh ki li kk kl km lj ko kp kq lk ks kt ku hn dt translated">缺乏人类可读的API文档带来的另一个问题是新开发人员加入项目的问题。如果没有清晰的文档，对于从未参与过该项目的人来说，在没有大量帮助的情况下，开始改变或使用它将花费更多的时间。他们需要理解内部机制，看看代码是如何被使用的，哪些API是隐式支持的，哪些是不支持的。</p><blockquote class="kw"><p id="b28d" class="kx ky hu bd kz la lb lc ld le lf ku ek translated">当一个项目没有文档记录时，新成员的成本会相当高</p></blockquote><p id="5ca6" class="pw-post-body-paragraph jz ka hu kb b kc lg iv ke kf lh iy kh ki li kk kl km lj ko kp kq lk ks kt ku hn dt translated">在<strong class="kb hv">开源</strong>中，如果目标是吸引贡献和被消费，投入大量精力以清晰易读的形式记录公共API是必须的。即使项目的代码解决了一个大问题并且非常有用，糟糕的文档也会降低它的潜力，因为消费者很难意识到它的有用性。除非它非常受欢迎，否则它不太可能达到相当高的相关性水平来吸引所需的受众。</p><p id="ab63" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">在一个盈利组织的<strong class="kb hv">闭源</strong>环境中，目标是产生利润，因此有理由想象一个可重用的内部API可以在没有文档的情况下存在一段时间。这些情况通常是当项目仍然是一个廉价的原型，只有少数开发人员关心它，并且没有感觉到交流的摩擦。然而，当项目开始变大时，如果我们想继续关注“利润”目标，就有必要添加文档。否则，随着时间的推移，沟通的摩擦将会增加，这将开始损害其交付功能或缺陷修复的能力。</p><p id="a457" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">作为一般的实践，我们可以认为<a class="ae kv" href="https://hackernoon.com/how-to-prevent-falling-in-the-trap-of-the-next-big-project-618fe7cc4ce9" rel="noopener ugc nofollow" target="_blank">原型倾向于成为永久的解决方案</a>，因此我们可以通过不推迟文档来更早地行动以防止这种情况发生。然而，我们需要承认，在营利性组织中，当项目处于初始阶段时，没有建立适当的文档不会产生直接的成本。然而，在开源领域，从一开始就没有文档会直接损害吸引贡献的目标。</p><blockquote class="kw"><p id="893d" class="kx ky hu bd kz la lb lc ld le lf ku ek translated">对于闭源社区来说，文档是非常重要的，大部分是大规模的。然而，对于开源来说，这是必不可少的。</p></blockquote><p id="667d" class="pw-post-body-paragraph jz ka hu kb b kc lg iv ke kf lh iy kh ki li kk kl km lj ko kp kq lk ks kt ku hn dt translated">关于文档的一个难题是，项目的作者通常对系统如何工作和支持什么有完整的心理背景，因此他们更有可能在为公共API文档提供有用的改进方面失败。解决这个问题的最佳方式是反馈和消费者可能遇到的问题。一个项目的作者，不管是开源的还是闭源的，都应该鼓励社区成员帮助改进文档，而不是给出问题的答案。<a class="ae kv" href="https://github.com/js-cookie/js-cookie/issues/177" rel="noopener ugc nofollow" target="_blank">这个问题</a>就是一个很好的例子，是一个消费者的问题引发了一个改进项目文档的行动。</p><p id="2014" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">为公共文档提供反馈的最佳个人不是那些使用它的人，而是那些<strong class="kb hv">刚刚开始使用它的人。他们没有项目内部的知识，因此他们更有可能发现作者不会发现的问题，而其他消费者在开始使用公共API时会发现。这意味着新人的文档贡献应该和项目的代码贡献一样有价值，如果不是更多的话。</strong></p><blockquote class="kw"><p id="3428" class="kx ky hu bd kz la lb lc ld le lf ku ek translated">新人的文档贡献应该和项目的代码贡献一样有价值，如果不是更多的话</p></blockquote><p id="2927" class="pw-post-body-paragraph jz ka hu kb b kc lg iv ke kf lh iy kh ki li kk kl km lj ko kp kq lk ks kt ku hn dt translated">现在让我们结束这一切。</p><p id="eeeb" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">对于盈利组织来说，在闭源项目中不记录公共API是有意义的。然而，在开放源码中，从一开始就没有记录公共API可能会真正损害项目的主要目标。</p><p id="7e01" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">当参与一个盈利性组织的开源或闭源项目时，要知道公共API文档可能和代码本身一样重要。帮助改善它对于吸引贡献者或降低团队的整体卡车系数是极其有价值的。</p><p id="d856" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">由于他们的目标，许多开源项目已经记录他们的API很长时间了。我们能做的是找到将这些想法应用到类似环境中的方法。也许如果我们在一家公司使用这种思维方式，我们也能够提高知名度，将<a class="ae kv" href="http://www.catb.org/~esr/writings/cathedral-bazaar/cathedral-bazaar/" rel="noopener ugc nofollow" target="_blank">大教堂转变为一个合作和自给自足的集市</a>。</p><p id="3731" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">营利性组织应该从开源中学习，并且理解对于协作和知识共享的目标来说，文档可能比它看起来更重要。</p><p id="7458" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">你也可以使用类似的技术<a class="ae kv" rel="noopener" href="/@fagnerbrack/repairing-the-leaky-abstraction-e726baab91b5">隐藏显而易见的泄漏抽象</a>。</p></div><div class="ab cl lz ma hc mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hn ho hp hq hr"><p id="0b9e" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">感谢阅读。如果您有任何反馈，请通过<a class="ae kv" href="https://twitter.com/FagnerBrack" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae kv" href="https://www.facebook.com/fagner.brack" rel="noopener ugc nofollow" target="_blank">脸书</a>或<a class="ae kv" href="http://github.com/FagnerMartinsBrack" rel="noopener ugc nofollow" target="_blank"> Github </a>联系我。</p></div></div>    
</body>
</html>