<html>
<head>
<title>Migrate from ExNavigation to React Navigation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从ExNavigation迁移到React Navigation</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/migrate-from-exnavigation-to-react-navigation-1af661ec5082?source=collection_archive---------2-----------------------#2017-04-12">https://medium.com/hackernoon/migrate-from-exnavigation-to-react-navigation-1af661ec5082?source=collection_archive---------2-----------------------#2017-04-12</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/326648f29a98431e9b92e7a78931cc73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZGGcrftH8Zo8l24MZt1onA.png"/></div></div></figure><div class=""/><p id="b142" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我用ExNavigation已经有一段时间了。这很容易设置，并一直为我工作。如果你在过去的几个月里查阅了自述文件，你可能会注意到它处于维护模式——这意味着它不会被更新(除非必要)，因为所有未来的资源都将对导航做出反应。此外，在最近的React Native版本中，您可能已经注意到弹出的警告，即<em class="ka">navigation experiment</em>已被否决(ExNavigation是基于它构建的)，所以现在是开始迁移的好时机。</p><p id="3b65" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">那么什么是React导航呢？这是一个路由解决方案，它基于从React Native的许多其他导航解决方案中获得的知识和经验。我不会在这里详细介绍，但如果你感兴趣，我有一个关于React导航的<a class="ae kb" href="https://hackernoon.com/getting-started-with-react-navigation-the-navigation-solution-for-react-native-ea3f4bd786a4" rel="noopener ugc nofollow" target="_blank">入门指南。</a></p><p id="b1db" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">今天，我想带大家了解一下从ExNavigation迁移到React Navigation的过程。到目前为止，我发现这是一个简单的过程，并且大大简化了我的代码。</p><p id="5631" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">完整的源代码可以在<a class="ae kb" href="https://github.com/spencercarli/ex-navigation-to-react-navigation" rel="noopener ugc nofollow" target="_blank"> Github </a>上获得。在自述文件中，我有每个步骤的差异链接。如果你想一步一步地了解如何迁移，请观看视频，否则我将链接到源代码并简要描述我正在做的事情。</p><h2 id="3e47" class="kc kd if bd ke kf kg kh ki kj kk kl km jn kn ko kp jr kq kr ks jv kt ku kv kw dt translated">警报</h2><figure class="kx ky kz la fq hw"><div class="bz el l di"><div class="lb lc l"/></div></figure><p id="7300" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">虽然<code class="eh ld le lf lg b">this.props.navigator.showLocalAlert</code>的用法可能不经常/不被很多人使用，但它是我经常使用的，并且发现在进行迁移时会很快失效，所以它是我要替换的第一个东西。</p><p id="8888" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了做到这一点，我使用了<code class="eh ld le lf lg b">react-native-dropdownalert</code>包，然后<a class="ae kb" href="https://github.com/spencercarli/ex-navigation-to-react-navigation/tree/replace-alert/app/components/Alert" rel="noopener ugc nofollow" target="_blank">制作了一个高阶组件</a>，以使下拉方法在我的应用程序中任何需要的地方都可用(<a class="ae kb" href="https://github.com/testshallpass/react-native-dropdownalert/issues/30" rel="noopener ugc nofollow" target="_blank">原始问题，代码为</a>)。</p><p id="b37f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我不会进入创建特设的细节——如果你想走这条路，可以复制并粘贴到你的应用程序中，只需注意<code class="eh ld le lf lg b">Alert</code>组件，安装<code class="eh ld le lf lg b">hoist-non-react-statics</code>和<code class="eh ld le lf lg b">react-native-dropdownalert</code>到你的项目中，如果你复制它。</p><p id="c8c0" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">完成后，我用 <code class="eh ld le lf lg b"><a class="ae kb" href="https://github.com/spencercarli/ex-navigation-to-react-navigation/blob/9faf79529c9c36e0dfea976be30241042bf5c5fa/app/index.js#L11" rel="noopener ugc nofollow" target="_blank">AlertProvider</a></code>和<a class="ae kb" href="https://github.com/spencercarli/ex-navigation-to-react-navigation/blob/9faf79529c9c36e0dfea976be30241042bf5c5fa/app/screens/Screen1.js" rel="noopener ugc nofollow" target="_blank">连接我想调用和提醒的任何组件</a>。</p><p id="d71b" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae kb" href="https://github.com/spencercarli/ex-navigation-to-react-navigation/compare/replace-alert" rel="noopener ugc nofollow" target="_blank">变化差异</a></p><h2 id="23b6" class="kc kd if bd ke kf kg kh ki kj kk kl km jn kn ko kp jr kq kr ks jv kt ku kv kw dt translated">堆栈导航到堆栈导航</h2><figure class="kx ky kz la fq hw"><div class="bz el l di"><div class="lb lc l"/></div></figure><p id="4e94" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在ExNavigation中，StackNavigation组件是大部分应用程序的核心。在React导航中，您将为此使用StackNavigator。</p><p id="802f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">更新非常简单。首先，您需要为您的应用程序创建适当的StackNavigators，然后在之前使用StackNavigation组件的地方使用这些新的StackNavigators。如果您仅仅停止将StackNavigation替换为StackNavigator，您将会失去ExNavigation内置的一些功能，但是如果您一次完成所有操作(我想您会这样做)，您将不会有问题。</p><p id="7b8e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在您的所有屏幕上，您需要更换</p><pre class="kx ky kz la fq lh lg li lj aw lk dt"><span id="a5c2" class="kc kd if lg b fv ll lm l ln lo">static route = {<br/>  navigationBar: {<br/>    title: '...'<br/>  }<br/>}</span></pre><p id="c42f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">随着</p><pre class="kx ky kz la fq lh lg li lj aw lk dt"><span id="da55" class="kc kd if lg b fv ll lm l ln lo">static navigationOptions = {<br/>  title: '...'<br/>}</span></pre><p id="a4aa" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以及您的应用程序需要的任何其他导航选项。您可能想要查看新名称的<a class="ae kb" href="https://reactnavigation.org/docs/navigators/stack#Screen-Navigation-Options" rel="noopener ugc nofollow" target="_blank">堆栈导航文档</a>。</p><p id="11a0" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后，你会想要用<code class="eh ld le lf lg b">this.props.navigation.navigate('screenName');</code>替换任何一个<code class="eh ld le lf lg b">this.props.navigator.push('screenName');</code>。对我来说，这就像查找和替换一样简单。<code class="eh ld le lf lg b">navigate</code>将默认为推送型动画(在iOS上从右到左，在Android上从底部渐变)。</p><p id="8bc0" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你想给新屏幕传递道具，语法是<code class="eh ld le lf lg b">this.props.navigation.navigate('screenName', { name: 'Spencer' });</code></p><p id="a231" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae kb" href="https://github.com/spencercarli/ex-navigation-to-react-navigation/compare/StackNavigation-to-StackNavigator?expand=1" rel="noopener ugc nofollow" target="_blank">变化差异</a></p><h2 id="1c86" class="kc kd if bd ke kf kg kh ki kj kk kl km jn kn ko kp jr kq kr ks jv kt ku kv kw dt translated">选项卡导航到选项卡导航器</h2><figure class="kx ky kz la fq hw"><div class="bz el l di"><div class="lb lc l"/></div></figure><p id="6af8" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我喜欢TabNavigator在React Navigation中的工作方式——它允许我编写更少的代码，并且更好地匹配应用程序运行的平台。</p><p id="acd9" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我所要做的就是<a class="ae kb" href="https://github.com/spencercarli/ex-navigation-to-react-navigation/blob/82e90cdc0db42b310b7ff9fd8226b01745b8771b/app/config/routes.js#L55" rel="noopener ugc nofollow" target="_blank">创建一个新的TabNavigator，它的标签</a>与我当前的TabNavigation相同，并使用我们之前设置的StackNavigator作为屏幕。然后，我用新的TabNavigator替换我的应用程序入口点中的<code class="eh ld le lf lg b">Tabs</code>组件，一切就绪。</p><p id="9e13" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后要做的事情是删除你写的所有代码，让TabNavigation工作。删除代码同时保持相同的功能是一件非常令人满意的事情。</p><p id="3b3c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae kb" href="https://github.com/spencercarli/ex-navigation-to-react-navigation/compare/StackNavigation-to-StackNavigator...TabNavigation-to-TabNavigator" rel="noopener ugc nofollow" target="_blank">变化之差</a></p><h2 id="baeb" class="kc kd if bd ke kf kg kh ki kj kk kl km jn kn ko kp jr kq kr ks jv kt ku kv kw dt translated">DrawerNavigation到DrawerNavigator</h2><figure class="kx ky kz la fq hw"><div class="bz el l di"><div class="lb lc l"/></div></figure><p id="b580" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">用DrawerNavigator替换DrawerNavigation很像替换选项卡。</p><p id="6d68" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我要做的第一件事是创建一个新的DrawerNavigator。<a class="ae kb" href="https://github.com/spencercarli/ex-navigation-to-react-navigation/blob/9337a53e0cb0ad1077d47484492d52d6837c9a37/app/config/routes.js#L120" rel="noopener ugc nofollow" target="_blank">在本例中</a>它的屏幕与我们之前设置的TabNavigator相同。</p><p id="6beb" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后，我们可以继续在我们的应用程序入口点导入新的抽屉，一切都应该呈现良好。由于我们不再使用ex-navigation，您可以<a class="ae kb" href="https://github.com/spencercarli/ex-navigation-to-react-navigation/compare/TabNavigation-to-TabNavigator...DrawerNavigation-to-DrawerNavigator#diff-2018087f584c4398b5c3a23fc0e5f9db" rel="noopener ugc nofollow" target="_blank">去掉</a> <code class="eh ld le lf lg b"><a class="ae kb" href="https://github.com/spencercarli/ex-navigation-to-react-navigation/compare/TabNavigation-to-TabNavigator...DrawerNavigation-to-DrawerNavigator#diff-2018087f584c4398b5c3a23fc0e5f9db" rel="noopener ugc nofollow" target="_blank">NavigationProvider</a></code> <a class="ae kb" href="https://github.com/spencercarli/ex-navigation-to-react-navigation/compare/TabNavigation-to-TabNavigator...DrawerNavigation-to-DrawerNavigator#diff-2018087f584c4398b5c3a23fc0e5f9db" rel="noopener ugc nofollow" target="_blank">组件和我们拥有的虚拟路由器</a>。</p><p id="e9e1" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可能已经注意到导航栏中不再有打开抽屉的默认图标(尽管你可以滑动来打开它)，所以你会想要添加那个。</p><p id="f9c3" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后，您可以删除任何以前的抽屉相关的逻辑:)</p><p id="c15e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae kb" href="https://github.com/spencercarli/ex-navigation-to-react-navigation/compare/TabNavigation-to-TabNavigator...DrawerNavigation-to-DrawerNavigator" rel="noopener ugc nofollow" target="_blank">变化差异</a></p><h2 id="50d6" class="kc kd if bd ke kf kg kh ki kj kk kl km jn kn ko kp jr kq kr ks jv kt ku kv kw dt translated">结论</h2><p id="ba0c" class="pw-post-body-paragraph jc jd if je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hn dt translated">这不是决定性的，但在转换一些应用程序时，这些是我发现自己在做的事情。将应用从ExNavigation转换为React Navigation并不复杂，因为API非常相似。</p><blockquote class="lu"><p id="da15" class="lv lw if bd lx ly lz ma mb mc md jz ek translated">对React Native的更多提示和技巧感兴趣吗？<a class="ae kb" href="http://www.handlebarlabs.com/react-native-mailing/" rel="noopener ugc nofollow" target="_blank">注册我的电子邮件列表</a>，我会与你分享它们！</p></blockquote><div class="me mf mg mh mi ab cb"><figure class="mj hw mk ml mm mn mo paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mj hw mk ml mm mn mo paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mj hw mk ml mm mn mo paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mp mq mr"><p id="f922" class="jc jd ka je b jf jg jh ji jj jk jl jm ms jo jp jq mt js jt ju mu jw jx jy jz hn dt translated"><a class="ae kb" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kb" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kb" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kb" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jc jd ka je b jf jg jh ji jj jk jl jm ms jo jp jq mt js jt ju mu jw jx jy jz hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kb" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kb" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mv"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>