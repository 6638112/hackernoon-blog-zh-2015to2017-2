<html>
<head>
<title>Analyze your videos in a few lines of code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用几行代码分析你的视频</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/get-the-code-for-the-video-intelligence-api-demo-794e7675effe?source=collection_archive---------5-----------------------#2017-04-13">https://medium.com/hackernoon/get-the-code-for-the-video-intelligence-api-demo-794e7675effe?source=collection_archive---------5-----------------------#2017-04-13</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="2e16" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">上个月在旧金山举行的谷歌云会议上，我们宣布了<a class="ae jp" href="https://cloud.google.com/video-intelligence" rel="noopener ugc nofollow" target="_blank">视频智能API</a>——这种API可以通过一个API请求轻松分析你的视频内容。为了展示视频API的潜力，我构建了一个演示。演示的代码是<a class="ae jp" href="https://github.com/sararob/video-intelligence-demo" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv">现在可以在GitHub </strong> </a>上找到！该演示展示了如何使用视频智能API来:</p><p id="407c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">查看视频中每个场景发生的事情:</strong></p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/38e9f325f082c3a2c513bcecb068eac1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YBOiLAKY8rx0Z1JEsOEykQ.png"/></div></div></figure><p id="1869" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">使用API中的元数据搜索大型视频库:</strong></p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff kc"><img src="../Images/98f710f8583b2bde2fe9c8dfdd5ba208.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2BZpb3_-nLghdG8yyp3T8A.png"/></div></div></figure><h1 id="42ff" class="kd ke hu bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">什么是视频智能API？</h1><p id="0cb8" class="pw-post-body-paragraph ir is hu it b iu lb iw ix iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo hn dt translated">该API提供了对预训练模型的访问，该模型从高层次上告诉您视频是关于什么的，以及每个场景中发生了什么的粒度数据。假设你在0:07有一个和狗在一起的场景，像这样:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lg"><img src="../Images/e6a32b19b652d43e4c07a0998da40c4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jAXyUXcUnIoiYdKeHV7fOg.png"/></div></div></figure><p id="c916" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">视频API告诉你在那个场景中有一只狗，以及所有其他包含一只狗的场景。下面是一个标签的JSON响应:</p><pre class="jr js jt ju fq lh li lj lk aw ll dt"><span id="7e9f" class="lm ke hu li b fv ln lo l lp lq">{<br/>      "description": "Dog",<br/>      "language_code": "en-us",<br/>      "locations": [ {<br/>        "segment": {<br/>          "start_time_offset": 7090474,<br/>          "end_time_offset": 8758738<br/>        },<br/>        "confidence": 0.99793893,<br/>        "level": "SHOT_LEVEL"<br/>}</span></pre><p id="242d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个JSON以微秒为单位提供了这个标签在视频中出现的片段。对于视频中的同一个片段，API也告诉我们它是什么品种的狗——它以81%的置信度返回标签“Dashchund”。</p><p id="5cd2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可能会想，难道我不能以1fps的速度从视频中提取帧，然后发送到Vision API吗？你可以，但是不要。这就是视频API的秘制酱发挥作用的地方。除了上面的镜头级别注释，它还通过一个模型来分析视频中不同帧之间的关系。如果视频有服装和糖果的场景，视频级注释可以告诉你这是一个关于万圣节的视频。最后，API的镜头切换检测功能将您的视频分成多个场景。这作为segments的JSON对象返回，指示视频中摄像机镜头的每次变化。</p><p id="9f8f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">要了解关于视频API的更多信息，请查看来自Google Next的<a class="ae jp" href="https://www.youtube.com/watch?v=y-k8oelbmGc" rel="noopener ugc nofollow" target="_blank">这篇精彩演讲</a>，作者是<a class="ae jp" href="https://twitter.com/ramramanathan1" rel="noopener ugc nofollow" target="_blank"> Ram Ramanathan </a>(视频API项目经理)、Juhyun Lee(视频API工程师)和Lynne Hur witz(Wix工程师)。</p><h1 id="62b4" class="kd ke hu bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">演示是如何工作的？</h1><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lr"><img src="../Images/b8a7e67f6cedc14b4fd51fb354c82454.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yp3Fe-wX6Mj33Z9RHIFTSg.png"/></div></div></figure><p id="3c28" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在<strong class="it hv">后端</strong>，应用程序的视频存储在谷歌云存储桶中。我写了一个<a class="ae jp" href="https://github.com/sararob/video-intelligence-demo/blob/master/backend/index.js#L27" rel="noopener ugc nofollow" target="_blank">云函数</a>，每当一个新文件被添加到这个桶中时就会被触发。该函数检查以确保文件是视频，然后将该文件发送到视频API进行注释。方便的是，Video API允许您有选择地传递一个outputUri参数作为请求的一部分——这是一个云存储URL，API在完成处理后将在其中写入视频注释。我利用这一点将注释JSON存储在一个单独的云存储桶中。</p><p id="6fca" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">前端</strong>是一个Node.js应用，运行在App Engine上，使用ES6、Sass、Gulp、Canvasjs和其他一些客户端JS工具。我和Alex Wolfe一起在UI上工作——谢谢你的帮助，Alex！</p><p id="b157" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">完成演示后，我有机会在10，000人面前展示它(我有没有提到这是一个很酷的工作？！).这是下一个主题演讲的视频:</p><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="lu lv l"/></div></figure><h1 id="3d04" class="kd ke hu bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">下一步是什么？</h1><p id="a45f" class="pw-post-body-paragraph ir is hu it b iu lb iw ix iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo hn dt translated">你可以直接在浏览器中试用视频API <a class="ae jp" href="https://cloud.google.com/video-intelligence/" rel="noopener ugc nofollow" target="_blank">，无需编写任何代码。如果你有想要分析的视频，</a><a class="ae jp" href="https://cloud.google.com/video-intelligence/" rel="noopener ugc nofollow" target="_blank">注册</a>视频智能API alpha，让我知道你的想法。在下面的评论里留言或者在Twitter上找我<a class="ae jp" href="https://twitter.com/srobtweets" rel="noopener ugc nofollow" target="_blank"> @SRobTweets </a>。</p><div class="jr js jt ju fq ab cb"><figure class="lw jv lx ly lz ma mb paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="lw jv lx ly lz ma mb paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="lw jv lx ly lz ma mb paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mc md me"><p id="f922" class="ir is mf it b iu iv iw ix iy iz ja jb mg jd je jf mh jh ji jj mi jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是阿妹家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>的机会。</p><p id="708a" class="ir is mf it b iu iv iw ix iy iz ja jb mg jd je jf mh jh ji jj mi jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff mj"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>