<html>
<head>
<title>The fastest way to identify keywords in news articles — TFIDF with Wikipedia (Python version)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">识别新闻文章中关键词的最快方法——tfi df with Wikipedia(Python版本)</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/the-fastest-way-to-identify-keywords-in-news-articles-tfidf-with-wikipedia-python-version-baf874d7eb16?source=collection_archive---------5-----------------------#2017-10-21">https://medium.com/hackernoon/the-fastest-way-to-identify-keywords-in-news-articles-tfidf-with-wikipedia-python-version-baf874d7eb16?source=collection_archive---------5-----------------------#2017-10-21</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/c82f3189ab7042b2ae24a5b5d25ee618.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JpSmkJ8Yj-vtM1uUJwKypw.jpeg"/></div></div></figure><p id="ff4e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Github项目链接:<a class="ae ka" href="https://github.com/adamchinkc/tfidf_wiki" rel="noopener ugc nofollow" target="_blank">点击这里</a></p><p id="7027" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当我们略读或浏览一篇<a class="ae ka" href="https://hackernoon.com/tagged/article" rel="noopener ugc nofollow" target="_blank">文章</a>、<a class="ae ka" href="https://hackernoon.com/tagged/keyword" rel="noopener ugc nofollow" target="_blank">、<strong class="je hv">关键词</strong>、</a>、<strong class="je hv">、</strong>是我们对文章相关主题有一个基本了解的最重要指标。当我们想让我们的计算机做和我们一样的任务时，<strong class="je hv"> <em class="kb">我们必须教它们如何从文章中获取关键词，并决定哪些关键词比其他关键词更重要</em> </strong> <em class="kb">。</em></p><p id="e3df" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最简单的方法是从预定义的列表中找到“关键词”。而且，这个列表可以从最大的免费在线百科全书——维基百科中提取。</p></div><div class="ab cl kc kd hc ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hn ho hp hq hr"><h1 id="8132" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">维基百科(一个基于wiki技术的多语言的百科全书协作计划ˌ也是一部用不同语言写成的网络百科全书ˌ 其目标及宗旨是为全人类提供自由的百科全书)ˌ开放性的百科全书</h1><p id="44db" class="pw-post-body-paragraph jc jd hu je b jf lh jh ji jj li jl jm jn lj jp jq jr lk jt ju jv ll jx jy jz hn dt translated">我试着从<a class="ae ka" href="https://dumps.wikimedia.org/" rel="noopener ugc nofollow" target="_blank">这里</a>下载维基百科的垃圾，并创建一个维基百科的本地数据库。你可以参考罗伯特的指示将整个维基百科导入你的本地数据库。</p><p id="7415" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下一步是根据每篇维基百科文章的标题创建一个关键词列表，因为维基百科似乎解释了其百科全书中的每一个术语。维基百科中也捕捉到了不同的表述方式，如“一战”、“WW1”或“一战”。</p><figure class="ln lo lp lq fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lm"><img src="../Images/0ded3be254488fd264a0c4ea6bf5d178.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bb19TOr1sHEjjoFYnMRxVg.png"/></div></div></figure><p id="af4c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，我们有了关键词列表<a class="ae ka" href="https://github.com/adamchinkc/tfidf_wiki/blob/master/keywords.txt" rel="noopener ugc nofollow" target="_blank">这里</a>(中文版)，我们可以使用简单的脚本从一篇文章中提取关键词。</p><pre class="ln lo lp lq fq lr ls lt lu aw lv dt"><span id="8be5" class="lw kk hu ls b fv lx ly l lz ma">keyword_article = []<br/>for k in keywords:<br/> k = re.sub(“\r\n”,””,k)<br/> if k in articlekeyword_article.append(k)</span></pre><p id="a114" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然而，这并不是该步骤的结束，因为提取的关键字列表可能会有一些重叠的关键字，如在获取关键字“一战”时的“世界”、“战争”、“世界大战”。这些重叠的关键字会被过滤掉。</p><pre class="ln lo lp lq fq lr ls lt lu aw lv dt"><span id="5c55" class="lw kk hu ls b fv lx ly l lz ma">keyword_overlap = []<br/>for g in keyword_article:<br/> for h in keyword_article:<br/>  if g != h:<br/>   if h in g:<br/>    keyword_overlap.append(h)</span><span id="9a59" class="lw kk hu ls b fv mb ly l lz ma">wiki_terms = list(set(keyword_article)-set(keyword_overlap))</span></pre><p id="f22e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下一步是识别程序从文章中提取的关键词的重要性。</p></div><div class="ab cl kc kd hc ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hn ho hp hq hr"><h1 id="08ac" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">TF-IDF得分</h1><figure class="ln lo lp lq fq iv fe ff paragraph-image"><div class="fe ff mc"><img src="../Images/61c41af521f313a19ed1f30cf723a32f.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*8XpbsR4HdAHBXy5MgpIyug.png"/></div></figure><p id="f6e3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> TF-IDF(词频-逆文档频率)</strong>是一种计分方法，考虑到特定术语在其他文章中的<strong class="je hv">稀缺性，计算特定术语</strong>在目标文章中的<strong class="je hv">频率。</strong></p><p id="606d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">TF-IDF的含义可以简单说明如下:</p><blockquote class="md"><p id="429c" class="me mf hu bd mg mh mi mj mk ml mm jz ek translated">TF:术语越频繁，分数越高</p><p id="e209" class="me mf hu bd mg mh mi mj mk ml mm jz ek translated">IDF:术语越常见，得分越低</p></blockquote><p id="a446" class="pw-post-body-paragraph jc jd hu je b jf mn jh ji jj mo jl jm jn mp jp jq jr mq jt ju jv mr jx jy jz hn dt translated">我们来举个例子。我们在纽约时间2016年评选出2016年最受欢迎的故事——“<a class="ae ka" href="https://www.nytimes.com/2016/05/29/opinion/sunday/why-you-will-marry-the-wrong-person.html" rel="noopener ugc nofollow" target="_blank">W<em class="kb">hy你会嫁错人</em> </a> <em class="kb">”。我在文章中有大约96个“the ”,而“marriage”只有15个。因为“the”在每篇文章中都很常见，所以与“marriage”相比，IDF的得分很低。在这个例子中，TD-IDF score完成了识别重要关键词的工作。</em></p><h1 id="9d3d" class="kj kk hu bd kl km ms ko kp kq mt ks kt ku mu kw kx ky mv la lb lc mw le lf lg dt translated">从文章中计算TF</h1><pre class="ln lo lp lq fq lr ls lt lu aw lv dt"><span id="dfdc" class="lw kk hu ls b fv lx ly l lz ma">term_no = []<br/>term_sum = 0<br/>wordcount = {}<br/>tfidf = {} </span><span id="82ae" class="lw kk hu ls b fv mb ly l lz ma">for i in xrange(len(wiki_terms)):  <br/> term = articles.count(wiki_terms[i])  <br/> term_no.append(term)</span><span id="959b" class="lw kk hu ls b fv mb ly l lz ma">for i in term_no:  <br/> term_sum = term_sum + i</span><span id="eb1e" class="lw kk hu ls b fv mb ly l lz ma">for i in xrange(len(wiki_terms)): <br/> tf = Decimal(term_no[i])/Decimal(term_sum)<br/> wordcount[wiki_terms[i]]=tf</span></pre><h1 id="187c" class="kj kk hu bd kl km ms ko kp kq mt ks kt ku mu kw kx ky mv la lb lc mw le lf lg dt translated">在您当地的维基百科数据库中计算IDF</h1><pre class="ln lo lp lq fq lr ls lt lu aw lv dt"><span id="69ba" class="lw kk hu ls b fv lx ly l lz ma">for k in wiki_terms:<br/> x2.execute(“select key_idf from key_cn where key_term = %s”,(k))<br/> idf = x2.fetchone()<br/> if idf:<br/>  tfidf_value = float(wordcount[k])* idf[0]<br/> if tfidf_value &gt; 0.1:<br/>  tfidf[k] = tfidf_value<br/> #if the keywords appear in header, it is important. <br/> if k in articles_header:<br/>  tfidf[k] = 1</span></pre></div><div class="ab cl kc kd hc ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hn ho hp hq hr"><p id="ffdd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这不是故事的结尾。当我们想把故事链接在一起的时候，tf-idf本身并不会计算每篇文章的相似度。在下一节中，我们将探索如何将相关文章与抽象的关键词链接起来。</p></div><div class="ab cl kc kd hc ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hn ho hp hq hr"><p id="e211" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如有任何意见，请随时留在这里或给我发电子邮件至<a class="ae ka" href="mailto:adam.kc.chin@gmail.com" rel="noopener ugc nofollow" target="_blank">adam.kc.chin@gmail.com</a>。</p><figure class="ln lo lp lq fq iv"><div class="bz el l di"><div class="mx my l"/></div></figure></div></div>    
</body>
</html>