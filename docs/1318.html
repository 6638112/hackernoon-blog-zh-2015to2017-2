<html>
<head>
<title>Prezi: 1031 variables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Prezi: 1031个变量</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/prezi-1031-variables-40703c54f586?source=collection_archive---------4-----------------------#2016-10-11">https://medium.com/hackernoon/prezi-1031-variables-40703c54f586?source=collection_archive---------4-----------------------#2016-10-11</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/6677d69da8394e48ff42c0d5d175f67d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7aBuSzabQaEC7jAaTqRS4A.jpeg"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek"><a class="ae ih" href="https://i.ytimg.com/vi/ArGh6FurR0Q/maxresdefault.jpg" rel="noopener ugc nofollow" target="_blank">https://i.ytimg.com/vi/ArGh6FurR0Q/maxresdefault.jpg</a></figcaption></figure><div class=""/><p id="615a" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Prezi 是一种流行的演示服务，被那些没有学会如何使用powerpoint的拖拉的青少年和成年人所使用。它打破了单调乏味的幻灯片风格，为演示增添了一些趣味。虽然我从未使用过这项服务，但我注意到他们有一个<a class="ae ih" href="https://hackernoon.com/tagged/bug" rel="noopener ugc nofollow" target="_blank"> bug </a>赏金项目，并决定研究一下。</p><p id="9607" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">几个月前，当我开始渗透测试时，我发现了这个漏洞，所以当时我唯一的希望是用一些字符发送垃圾网址，看看程序给了我什么。我从像%0A和%0D这样的控制字符开始，得到了一些特殊的结果；使用类似“helloWorld%0A”的字符串，可以在DOM中成功解析新行:</p><figure class="kg kh ki kj fq hw fe ff paragraph-image"><div class="fe ff kf"><img src="../Images/4b06bba5dd2c1aa5931f32864c3aa22f.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*CSXWVaezEuiovj9LMqPvzQ.png"/></div><figcaption class="id ie fg fe ff if ig bd b be z ek">helloWorld%0A</figcaption></figure><h1 id="ba6d" class="kk kl ik bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">万能的上帝</h1><p id="a46f" class="pw-post-body-paragraph jh ji ik jj b jk li jm jn jo lj jq jr js lk ju jv jw ll jy jz ka lm kc kd ke hn dt translated">又试了几次之后，我还是无法从中获得任何东西，因为Prezi成功地对引号和其他XSS字符进行了编码。经过一次刷新后，让我高兴的是，我看到了强大的调试页面。</p><figure class="kg kh ki kj fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ln"><img src="../Images/4402362d2ca81892a876a1234758e4a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rUpfqm5fyNpA1Je17an9aQ.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Top of debug page</figcaption></figure><p id="1e72" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这是由于“Debug=True”标志被意外地设置在生产环境中的开发服务器上。在这一部分之后，有718个环境服务器变量的转储。</p><figure class="kg kh ki kj fq hw fe ff paragraph-image"><div class="fe ff lo"><img src="../Images/263efe807aeb5278ba911572cdfefe79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*sTWH02vL8KHPKE3xrnK_Bg.png"/></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Beginning of environmental variables</figcaption></figure><p id="39f2" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这些变量包括很多，但由于Django内置的调试代码，大多数高度敏感的变量都被删除了:</p><pre class="kg kh ki kj fq lp lq lr ls aw lt dt"><span id="c4ef" class="lu kl ik lq b fv lv lw l lx ly">HIDDEN_SETTINGS = re.compile(‘API|TOKEN|KEY|SECRET|PASS|SIGNATURE’, flags=re.IGNORECASE) </span><span id="4e51" class="lu kl ik lq b fv lz lw l lx ly">CLEANSED_SUBSTITUTE = ‘********************’</span></pre><p id="f9b1" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然后，<a class="ae ih" href="https://hackernoon.com/tagged/security" rel="noopener ugc nofollow" target="_blank">安全性</a>是服务器管理员的责任，用“HIDDEN_SETTINGS”变量中的一个来命名所有敏感变量(只是作为最后的手段，在暴露于prod的服务器中关闭调试是第一道防线)。在触发这个错误一次后，我不能用相同的字符串再次触发它。我后来发现这是因为他们的服务器中只有一个有调试标志，这使得它很难重现。</p><h1 id="6db1" class="kk kl ik bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">他复活了</h1><p id="4320" class="pw-post-body-paragraph jh ji ik jj b jk li jm jn jo lj jq jr js lk ju jv jw ll jy jz ka lm kc kd ke hn dt translated">在这一点上，我准备报告这个问题，但我决定尝试另一个控制字符“%0D”，看看会发生什么。这次我找到了全能调试员的儿子</p><figure class="kg kh ki kj fq hw fe ff paragraph-image"><div class="fe ff ma"><img src="../Images/1c50a1b6cac25db0bf44b389457998a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*NLcYrA5uvS-y3doJvbYBjQ.png"/></div></figure><p id="31db" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">由于某种未知原因，控制字符没有出现在请求URL中。由于这是在网站的另一部分，不同的错误被触发，不同的信息出现。然后，这为他们的Django应用程序转储了313个url正则表达式路由。大多数都被正确配置为不允许未经验证的查看，但一个更复杂的演员可能会对这些进行一些处理。</p><h1 id="f48b" class="kk kl ik bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">他真的复活了</h1><p id="8019" class="pw-post-body-paragraph jh ji ik jj b jk li jm jn jo lj jq jr js lk ju jv jw ll jy jz ka lm kc kd ke hn dt translated">此时，我通过电子邮件向Prezi报告了该漏洞，并继续查看这些变量转储中给出的信息。Django没有屏蔽的一个有趣的变量组合是GOOGLE_ANALYTICS_USER_EMAIL和GOOGLE_ANALYTICS_USER_PASS(应该已经屏蔽了)。我向Prezi报告了这一情况，他们证实这可能会导致接管gmail帐户和相关的分析帐户，但它已不再使用，所以他们停用了该帐户。</p><p id="73eb" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Prezi很快发现他们只有一台带有debug标志的服务器，而且这是一台意外暴露给prod的开发服务器，这就是为什么这不容易重现的原因。他们重新配置了服务器并解决了问题。</p></div><div class="ab cl mb mc hc md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="hn ho hp hq hr"><h1 id="60f0" class="kk kl ik bd km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld mm lf lg lh dt translated">解决时间线</h1><p id="3a8f" class="pw-post-body-paragraph jh ji ik jj b jk li jm jn jo lj jq jr js lk ju jv jw ll jy jz ka lm kc kd ke hn dt translated"><strong class="jj il">2016年4月27日</strong></p><ul class=""><li id="6db4" class="mn mo ik jj b jk jl jo jp js mp jw mq ka mr ke ms mt mu mv dt translated">美国中部时间上午12时03分:通过电子邮件向Prezi报告了问题</li><li id="d9f5" class="mn mo ik jj b jk mw jo mx js my jw mz ka na ke ms mt mu mv dt translated">CDT上午6:45:Prezi确认收到电子邮件</li></ul><p id="997b" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj il">2016年5月6日</strong></p><ul class=""><li id="1b20" class="mn mo ik jj b jk jl jo jp js mp jw mq ka mr ke ms mt mu mv dt translated">CDT时间上午8:42:问题确认修复，并颁发1000美元奖金</li></ul></div><div class="ab cl mb mc hc md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="hn ho hp hq hr"><p id="95bf" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">当时这是我第一次向一个bug bounty项目汇报，非常愉快，我要感谢Prezi的专业精神和快速反应。如果你有兴趣，一定要去看看https://bugbounty.prezi.com/的<a class="ae ih" href="https://bugbounty.prezi.com/" rel="noopener ugc nofollow" target="_blank"/></p><div class="kg kh ki kj fq ab cb"><figure class="nb hw nc nd ne nf ng paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="nb hw nc nd ne nf ng paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="nb hw nc nd ne nf ng paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="nh ni nj"><p id="f922" class="jh ji nk jj b jk jl jm jn jo jp jq jr nl jt ju jv nm jx jy jz nn kb kc kd ke hn dt translated"><a class="ae ih" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae ih" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae ih" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ih" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jh ji nk jj b jk jl jm jn jo jp jq jr nl jt ju jv nm jx jy jz nn kb kc kd ke hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ih" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ih" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kg kh ki kj fq hw fe ff paragraph-image"><a href="https://goo.gl/Ahtev1"><div class="fe ff no"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></a></figure><figure class="kg kh ki kj fq hw"><div class="bz el l di"><div class="np nq l"/></div></figure></div></div>    
</body>
</html>