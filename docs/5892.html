<html>
<head>
<title>How to Build a Sticky Notes App Using React and Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用React和Redux构建便笺应用程序</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-build-a-sticky-notes-app-using-react-and-redux-4bcc1fa01218?source=collection_archive---------11-----------------------#2017-08-22">https://medium.com/hackernoon/how-to-build-a-sticky-notes-app-using-react-and-redux-4bcc1fa01218?source=collection_archive---------11-----------------------#2017-08-22</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/dc7422232bbe82042c67a1b23dfd84af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qulADRAexZ20cmDqtD1CMQ.jpeg"/></div></div></figure><p id="9d7b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本教程中，我将向您展示如何使用React、Redux、选择器、Redux Sagas、一点点Node和<a class="ae ka" href="https://cosmicjs.com" rel="noopener ugc nofollow" target="_blank"> Cosmic JS </a>创建一个简单的便笺应用程序。为了理解如何使用Restful API，本教程将展示如何向Cosmic JS API发出AJAX (XHR)请求，以便在我们的Cosmic JS桶中检索、添加、更新和删除数据/媒体。让我们开始吧。</p><h1 id="d53a" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">TL；速度三角形定位法(dead reckoning)</h1><p id="ab3a" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated"><a class="ae ka" href="https://github.com/cosmicjs/sticky-notes" rel="noopener ugc nofollow" target="_blank">下载GitHub回购</a><br/>T5】试玩</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="6d6b" class="ln kc hu lj b fv lo lp l lq lr">{<br/>  "name": "sticky-notes",<br/>  "version": "1.0.0",<br/>  "description": "Sticky Notes app built using react, redux &amp; cosmic.",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "start": "npm run build; node server/index.js",<br/>    "start-dev": "nodemon server/index.js",<br/>    "build": "webpack -p",<br/>    "build-dev": "webpack -w",<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>  "repository": {<br/>    "type": "git",<br/>    "url": "git+https://github.com/jazibsawar/sticky-notes.git"<br/>  },<br/>  "author": "Muhammad Musa",<br/>  "license": "ISC",<br/>  "bugs": {<br/>    "url": "https://github.com/jazibsawar/sticky-notes/issues"<br/>  },<br/>  "homepage": "https://github.com/jazibsawar/sticky-notes#readme",<br/>  "dependencies": {<br/>    "async": "^2.5.0",<br/>    "babel": "^6.23.0",<br/>    "babel-core": "^6.25.0",<br/>    "babel-loader": "^7.1.1",<br/>    "babel-plugin-transform-class-properties": "^6.24.1",<br/>    "babel-plugin-transform-regenerator": "^6.24.1",<br/>    "babel-polyfill": "^6.23.0",<br/>    "babel-preset-es2015": "^6.24.1",<br/>    "babel-preset-react": "^6.24.1",<br/>    "babel-preset-stage-0": "^6.24.1",<br/>    "body-parser": "^1.17.2",<br/>    "cosmicjs": "^2.39.91",<br/>    "express": "^4.15.3",<br/>    "immutable": "^3.8.1",<br/>    "moment": "^2.18.1",<br/>    "prop-types": "^15.5.10",<br/>    "react": "^15.6.1",<br/>    "react-addons-css-transition-group": "^15.6.0",<br/>    "react-addons-transition-group": "^15.6.0",<br/>    "react-color": "^2.13.4",<br/>    "react-dom": "^15.6.1",<br/>    "react-modal-dialog": "^4.0.7",<br/>    "react-redux": "^5.0.5",<br/>    "react-router": "^3.0.5",<br/>    "react-spinners": "0.0.30",<br/>    "redux": "^3.7.2",<br/>    "redux-logger": "^3.0.6",<br/>    "redux-saga": "^0.15.6",<br/>    "redux-thunk": "^2.2.0",<br/>    "reselect": "^3.0.1",<br/>    "styled-components": "^2.1.1",<br/>    "volleyball": "^1.4.1",<br/>    "webpack": "^3.4.1",<br/>    "webpack-livereload-plugin": "^0.11.0",<br/>    "whatwg-fetch": "^2.0.3"<br/>  },<br/>  "devDependencies": {<br/>    "chai": "^4.1.0",<br/>    "cross-env": "^5.0.1",<br/>    "mocha": "^3.5.0",<br/>    "nodemon": "^1.11.0"<br/>  }<br/>}</span></pre><h1 id="0d27" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">我们正在安装什么，为什么:</h1><ol class=""><li id="b1f3" class="ls lt hu je b jf kz jj la jn lu jr lv jv lw jz lx ly lz ma dt translated">我们将使用<strong class="je hv"> whatwg-fetch </strong>和<strong class="je hv"> cosmicjs </strong>库来处理我们对Cosmic JS Bucket的请求。</li><li id="f85c" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz lx ly lz ma dt translated">我们正在安装<strong class="je hv"> react </strong>和<strong class="je hv"> react-dom </strong>来构建我们的react组件。</li><li id="cb4c" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz lx ly lz ma dt translated">我们将使用<strong class="je hv"> redux </strong>、react-redux、redux-logger、reselect和redux-sagas来帮助我们实现所谓的redux架构。</li><li id="7ee5" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz lx ly lz ma dt translated">我们使用了<strong class="je hv">样式组件</strong>来使stickynotes组件样式通用化。我们也可以在其中传递样式变量。</li><li id="4a37" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz lx ly lz ma dt translated">我们使用<strong class="je hv">反应旋转器</strong>来使用加载组件。</li><li id="6ebd" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz lx ly lz ma dt translated">我们使用<strong class="je hv">反应颜色</strong>来使用颜色选择器组件。</li><li id="5158" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz lx ly lz ma dt translated">我们使用<strong class="je hv"> react-modal </strong> -dialog来使用react模态组件。</li><li id="234c" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz lx ly lz ma dt translated">我们使用脸书的<strong class="je hv">不可变</strong>包来使用不可变对象。</li><li id="0d2c" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz lx ly lz ma dt translated">我们使用<strong class="je hv">时刻</strong>来格式化日期。</li><li id="e103" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz lx ly lz ma dt translated">我们使用<strong class="je hv"> react-router </strong>进行路由和导航。</li><li id="694d" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz lx ly lz ma dt translated">开发依赖中唯一值得一提的是<strong class="je hv"> webpack </strong>和<strong class="je hv">排球</strong>。Webpack将帮助我们将所有的react和redux文件捆绑到一个大的“捆绑”文件中，该文件将在我们的index.html中使用。排球是一个很酷的小库，它允许我们在控制台中看到传入和传出的HTTP请求。</li></ol><h1 id="878a" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">构建我们的应用程序:</h1><p id="fad5" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">现在，我们将在客户目录中设置我们的index.html。将以下代码复制并粘贴到您的index.html文件中:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="388f" class="ln kc hu lj b fv lo lp l lq lr">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;<br/>    &lt;title&gt;Cosmic Sticky Notes App!&lt;/title&gt;<br/>    &lt;link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"&gt;<br/>    &lt;link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" &gt;<br/>    &lt;script src="https://code.jquery.com/jquery-3.2.1.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="/dist/bundle.js" defer&gt;&lt;/script&gt;<br/>&lt;/head&gt;<br/>&lt;body id="top"&gt;<br/>&lt;div id="root"&gt;&lt;/div&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="0206" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这里，我们将目标定在我们的<strong class="je hv">根</strong> div，以便稍后放置我们的react组件。位于我们的dist目录中的<strong class="je hv"> bundle.js </strong>文件是我们的webpack.config文件在捆绑了我们所有的react组件后将显示的内容。现在，设置我们的webpack.config文件来捆绑我们所有的react文件，并将该捆绑文件导出到我们的dist目录。将以下代码复制到您的<strong class="je hv"> webpack.config.js </strong>文件中:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="66e0" class="ln kc hu lj b fv lo lp l lq lr">var path = require('path');<br/>var LiveReloadPlugin = require('webpack-livereload-plugin');<br/>var webpack = require('webpack');</span><span id="a973" class="ln kc hu lj b fv mg lp l lq lr">module.exports = {<br/>  entry: './client/index.js',<br/>  output: {<br/>    filename: 'bundle.js',<br/>    path: path.resolve(__dirname, 'client/dist')<br/>  },<br/>  context: __dirname,<br/>  resolve: {<br/>    extensions: ['.js', '.jsx', '.json', '*']<br/>  },<br/>  module: {<br/>    rules: [{<br/>        test: /\.jsx?$/,<br/>        exclude: /(node_modules|bower_components)/,<br/>        loader: 'babel-loader',<br/>        options: {<br/>          presets: ['react', 'es2015', 'stage-0']<br/>        }<br/>      },<br/>    ]<br/>  },<br/>  plugins: [<br/>    new webpack.DefinePlugin({<br/>      'process.env': {<br/>        'COSMIC_BUCKET': JSON.stringify(process.env.COSMIC_BUCKET),<br/>        'COSMIC_READ_KEY': JSON.stringify(process.env.COSMIC_READ_KEY),<br/>        'COSMIC_WRITE_KEY': JSON.stringify(process.env.COSMIC_WRITE_KEY)<br/>      }<br/>    }),<br/>    new LiveReloadPlugin({appendScriptTag: true}),<br/>  ]<br/>};</span></pre><p id="b4b1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后，当我们使用<strong class="je hv"> express </strong>制作我们的服务器时，我们有了<strong class="je hv"> server/index.js </strong>文件。</p><p id="2e69" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在客户端文件夹中有store.js文件，该文件创建redux存储来管理状态和数据。正在发生的事情如下:</p><ul class=""><li id="8b87" class="ls lt hu je b jf jg jj jk jn mh jr mi jv mj jz mk ly lz ma dt translated">我们使用了redux-thunk和redux-sagas中间件。</li><li id="ca48" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz mk ly lz ma dt translated">我们使用组合减速器来组合主减速器和组减速器</li><li id="e19c" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz mk ly lz ma dt translated">然后我们用上面的东西做了存储。</li><li id="2eb5" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz mk ly lz ma dt translated">然后我们触发家庭和团体的传奇。</li></ul><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="a3c6" class="ln kc hu lj b fv lo lp l lq lr">import { createStore, applyMiddleware, combineReducers } from 'redux';<br/>import homeReducer from './containers/Home/reducer';<br/>import homeSagas from './containers/Home/sagas';<br/></span><span id="0497" class="ln kc hu lj b fv mg lp l lq lr">import groupReducer from './containers/Group/reducer';<br/>import groupSagas from './containers/Group/sagas';</span><span id="04b4" class="ln kc hu lj b fv mg lp l lq lr">import thunkMiddleware from 'redux-thunk';<br/>import createSagaMiddleware from 'redux-saga';</span><span id="9937" class="ln kc hu lj b fv mg lp l lq lr">const sagaMiddleware = createSagaMiddleware();</span><span id="5347" class="ln kc hu lj b fv mg lp l lq lr">const middlewares = [<br/>  sagaMiddleware,<br/>  thunkMiddleware,<br/>];</span><span id="ddc1" class="ln kc hu lj b fv mg lp l lq lr">const reducers = combineReducers({<br/>  home: homeReducer,<br/>  group: groupReducer,<br/>});<br/>const store = createStore(<br/>  reducers,<br/>  applyMiddleware(...middlewares),<br/>);</span><span id="f020" class="ln kc hu lj b fv mg lp l lq lr">sagaMiddleware.run(homeSagas)<br/>sagaMiddleware.run(groupSagas)</span><span id="3eb1" class="ln kc hu lj b fv mg lp l lq lr">export default store;</span></pre><p id="7ab8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在我们有了client/Routes.js。这里，我们有两条路由:</p><ol class=""><li id="232f" class="ls lt hu je b jf jg jj jk jn mh jr mi jv mj jz lx ly lz ma dt translated">Path="/" = &gt;列出所有组</li><li id="155c" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz lx ly lz ma dt translated">path = "/group/:group slug/:groupId " = &gt;列出某些组的所有笔记</li></ol><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="d318" class="ln kc hu lj b fv lo lp l lq lr">import React from 'react';<br/>import { Router, Route, browserHistory } from 'react-router';<br/>import { connect } from 'react-redux';<br/>import Home from './containers/Home';<br/>import Group from './containers/Group';</span><span id="6d2b" class="ln kc hu lj b fv mg lp l lq lr">const Routes = ({}) =&gt; {<br/>  return (<br/>    &lt;Router history={browserHistory}&gt;<br/>        &lt;Route path="/" component={Home} /&gt;<br/>        &lt;Route path="/group/:groupSlug/:groupId" component={Group} /&gt;<br/>    &lt;/Router&gt;<br/>  )<br/>};</span><span id="4629" class="ln kc hu lj b fv mg lp l lq lr">// const mapState = ({}) =&gt; ({});<br/>// const mapDispatch = {};</span><span id="2948" class="ln kc hu lj b fv mg lp l lq lr">export default connect(null, null)(Routes);</span></pre><p id="850f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在客户端文件夹中，我们创建了一个配置文件来保存API_KEYS和universal BUCKET名称。你可以编辑这个文件来使用你自己的键和slugs。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="47ff" class="ln kc hu lj b fv lo lp l lq lr">export default {<br/>  bucket: {<br/>    slug: process.env.COSMIC_BUCKET || 'sticky-note-app',<br/>    read_key: "YOUR READ KEY",<br/>    write_key: "YOUR WRITE KEY",<br/>  }<br/>}</span></pre><h1 id="6abf" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">有两种实用工具:</h1><ul class=""><li id="081d" class="ls lt hu je b jf kz jj la jn lu jr lv jv lw jz mk ly lz ma dt translated">请求</li><li id="9de4" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz mk ly lz ma dt translated">宇宙的</li></ul><h2 id="e844" class="ln kc hu bd kd ml mm mn kh mo mp mq kl jn mr ms kp jr mt mu kt jv mv mw kx mx dt translated">请求</h2><p id="3b5d" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">Request使用whatwg-fetch将AJAX请求发送到Cosmic JS API。此实用程序用于调用那些不在Cosmic JS包中的端点，例如基于过滤器的删除媒体和搜索对象</p><h2 id="5205" class="ln kc hu bd kd ml mm mn kh mo mp mq kl jn mr ms kp jr mt mu kt jv mv mw kx mx dt translated">宇宙JS</h2><p id="710e" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">cosmicjs使用Cosmic JS包向Cosmic API打AJAX请求。</p><h1 id="51ec" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">有两个容器:</h1><ul class=""><li id="b578" class="ls lt hu je b jf kz jj la jn lu jr lv jv lw jz mk ly lz ma dt translated">主页</li><li id="35e0" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz mk ly lz ma dt translated">组</li></ul><h2 id="317c" class="ln kc hu bd kd ml mm mn kh mo mp mq kl jn mr ms kp jr mt mu kt jv mv mw kx mx dt translated">主页</h2><p id="9396" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">该容器列出了向下的组。该组添加新的注释组。它还编辑和删除注释组。这将从reducers中选择NoteGroup数据，并将它们传递给它们的组件。这也将添加、编辑和删除NoteGroup操作传递给home组件。</p><h2 id="0d74" class="ln kc hu bd kd ml mm mn kh mo mp mq kl jn mr ms kp jr mt mu kt jv mv mw kx mx dt translated">组</h2><p id="acbf" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">这将从减速器中选择Notes数据，并将它们传递给它们的组件。这也将添加、编辑和删除注释操作传递给home组件。</p><h1 id="4e93" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">此应用程序中有以下组件</h1><ul class=""><li id="aa06" class="ls lt hu je b jf kz jj la jn lu jr lv jv lw jz mk ly lz ma dt translated"><strong class="je hv">拾色器</strong></li><li id="7602" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz mk ly lz ma dt translated"><strong class="je hv">对话框</strong></li><li id="2560" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz mk ly lz ma dt translated"><strong class="je hv">装载机</strong></li><li id="8488" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz mk ly lz ma dt translated"><strong class="je hv">便利贴</strong></li><li id="a80e" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz mk ly lz ma dt translated"><strong class="je hv">首页</strong></li><li id="05f7" class="ls lt hu je b jf mb jj mc jn md jr me jv mf jz mk ly lz ma dt translated"><strong class="je hv">组</strong></li></ul><h2 id="f4a9" class="ln kc hu bd kd ml mm mn kh mo mp mq kl jn mr ms kp jr mt mu kt jv mv mw kx mx dt translated">颜色选择器</h2><p id="4e11" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">该组件用于选择便笺的颜色。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="f036" class="ln kc hu lj b fv lo lp l lq lr">import React, {Component} from 'react';<br/>import { ChromePicker } from 'react-color';<br/></span><span id="6f55" class="ln kc hu lj b fv mg lp l lq lr">class ColorPickerField extends Component {<br/>  constructor(props){<br/>    super(props);<br/>  }</span><span id="8ce9" class="ln kc hu lj b fv mg lp l lq lr">  render() {<br/>    return (<br/>      &lt;ChromePicker<br/>        color={this.props.color}<br/>        onChangeComplete={this.props.changeColor}<br/>      /&gt;<br/>    )<br/>  }<br/>}</span><span id="c5d9" class="ln kc hu lj b fv mg lp l lq lr">export default ColorPickerField;</span></pre><h2 id="354a" class="ln kc hu bd kd ml mm mn kh mo mp mq kl jn mr ms kp jr mt mu kt jv mv mw kx mx dt translated">对话</h2><p id="f2a9" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">该组件将显示弹出窗口和对话框，以获取输入数据和输出响应</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="7549" class="ln kc hu lj b fv lo lp l lq lr">import React, {Component} from 'react';<br/>import { ModalContainer, ModalDialog } from 'react-modal-dialog';<br/></span><span id="216b" class="ln kc hu lj b fv mg lp l lq lr">class Dialog extends Component {<br/>  constructor(props){<br/>    super(props);<br/>  }<br/></span><span id="6249" class="ln kc hu lj b fv mg lp l lq lr">  handleClose = () =&gt; {<br/>    this.props.closeDialog();<br/>  }<br/>  render() {<br/>    const { open } = this.props;<br/>    return (<br/>      &lt;div&gt;<br/>        {<br/>          open &amp;&amp;<br/>          &lt;ModalContainer onClose={this.handleClose}&gt;<br/>            &lt;ModalDialog onClose={this.handleClose}&gt;<br/>              { this.props.children }<br/>            &lt;/ModalDialog&gt;<br/>          &lt;/ModalContainer&gt;<br/>        }<br/>      &lt;/div&gt;<br/>    )<br/>  }<br/>}</span><span id="24db" class="ln kc hu lj b fv mg lp l lq lr">export default Dialog;</span></pre><h2 id="e626" class="ln kc hu bd kd ml mm mn kh mo mp mq kl jn mr ms kp jr mt mu kt jv mv mw kx mx dt translated">装货设备</h2><p id="bd73" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">这是一个加载器组件，每当ajax请求发生时就会触发。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="2b79" class="ln kc hu lj b fv lo lp l lq lr">import React, {Component} from 'react';<br/>import { BounceLoader } from 'react-spinners';<br/></span><span id="640c" class="ln kc hu lj b fv mg lp l lq lr">class Loader extends Component {<br/>  constructor(props){<br/>    super(props);<br/>  }<br/></span><span id="ed69" class="ln kc hu lj b fv mg lp l lq lr">  render() {<br/>    const style = {<br/>      position: "fixed",<br/>      top: "50%",<br/>      left: "50%",<br/>      marginTop: "-9em",<br/>      marginLeft: "-15em",<br/>    };<br/>    return (<br/>      &lt;div style={style}&gt;<br/>        &lt;BounceLoader<br/>          color={'#123abc'}<br/>          loading<br/>          size={300}<br/>        /&gt;<br/>      &lt;/div&gt;<br/>    )<br/>  }<br/>}</span><span id="2580" class="ln kc hu lj b fv mg lp l lq lr">export default Loader;</span></pre><h2 id="cf0b" class="ln kc hu bd kd ml mm mn kh mo mp mq kl jn mr ms kp jr mt mu kt jv mv mw kx mx dt translated">粘扣带</h2><p id="3688" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">该组件接受一组选项，并使用编辑、标题onclick和删除处理程序将它们转换为stickynotes。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="110a" class="ln kc hu lj b fv lo lp l lq lr">import React, {Component} from 'react';<br/>import { NoteListWrapper, NoteWrapper, Note } from './styles';<br/>import moment from 'moment/moment'<br/>class StickyNotes extends Component {<br/></span><span id="ec0f" class="ln kc hu lj b fv mg lp l lq lr">  render() {<br/>    const { options } = this.props;<br/>    return (<br/>      &lt;NoteListWrapper&gt;<br/>        {<br/>          !!options &amp;&amp; options.toArray().map((option, index) =&gt; {<br/>          return  &lt;NoteWrapper key={`note_${index}`}&gt;<br/>              &lt;Note backgroundColor={option.getIn(['metadata', 'color'])||"black"} color="#ffffff" rotate={index%2 === 0? -2 : 4}&gt;<br/>                &lt;small&gt;{moment(option.get('created')).fromNow()}&lt;/small&gt;<br/>                &lt;h4 onClick={() =&gt; this.props.handleClick(option)}&gt;{option.get('title').substring(0,11)}&lt;/h4&gt;<br/>                &lt;p&gt;{option.get('content').substring(0, 41)}&lt;/p&gt;<br/>                &lt;span className="buttons"&gt;<br/>                  &lt;a onClick={() =&gt; this.props.deleteOption(option.toJS(), index)} className="pull-right"&gt;&lt;i className="fa fa-trash-o"&gt;&lt;/i&gt;&lt;/a&gt;<br/>                  &lt;a onClick={() =&gt; this.props.editOption(option, index)} style={{ marginRight: "1vw" }} className="pull-right"&gt;&lt;i className="fa fa-pencil"&gt;&lt;/i&gt;&lt;/a&gt;<br/>                &lt;/span&gt;<br/>              &lt;/Note&gt;<br/>            &lt;/NoteWrapper&gt;<br/>          })<br/>        }<br/>      &lt;/NoteListWrapper&gt;<br/>    )<br/>  }<br/>}</span><span id="9015" class="ln kc hu lj b fv mg lp l lq lr">export default StickyNotes;</span></pre><h2 id="1f13" class="ln kc hu bd kd ml mm mn kh mo mp mq kl jn mr ms kp jr mt mu kt jv mv mw kx mx dt translated">主页</h2><p id="121b" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">这是一个组件，我们将NoteGroup选项提供给Sticky Notes组件，并具有添加、编辑和删除处理程序。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="e182" class="ln kc hu lj b fv lo lp l lq lr">import React, {Component} from 'react';<br/>import Dialog from '../Dialog';<br/>import StickyNotes from '../StickyNotes';<br/>import ColorPicker from '../ColorPicker';</span><span id="e17f" class="ln kc hu lj b fv mg lp l lq lr">class Home extends Component {<br/>  constructor(props){<br/>    super(props);<br/>    this.state = {<br/>      title: "",<br/>      content: "",<br/>      color: "#fff",<br/>      selectedGroup: null,<br/>      openAddDialog: false,<br/>      openEditDialog: false,<br/>      group: {<br/>        title: "",<br/>      },<br/>    }<br/>  }</span><span id="8209" class="ln kc hu lj b fv mg lp l lq lr">  addGroup = () =&gt; {<br/>    const { title, content, color } = this.state;<br/>    this.props.addGroup({<br/>      title,<br/>      content,<br/>      color,<br/>    });<br/>    this.setState({ title: "", content: "", openAddDialog: false })<br/>  }<br/></span><span id="66bc" class="ln kc hu lj b fv mg lp l lq lr">  editGroup = () =&gt; {<br/>    const { group, selectedGroup } = this.state;<br/>    const { state } = this;<br/>    this.props.editGroup({<br/>      title: group.title,<br/>      content: group.content,<br/>      color: group.color,<br/>    }, group.slug, selectedGroup);<br/>    this.setState({ ...state, group: { title: "" }, openEditDialog: false })<br/>  }</span><span id="9d5a" class="ln kc hu lj b fv mg lp l lq lr">  goToNoteGroup = (group) =&gt; {<br/>    this.props.changeRoute(`/group/${group.get('slug')}/${group.get('_id')}`);<br/>  }</span><span id="8a47" class="ln kc hu lj b fv mg lp l lq lr">  editOption = (group, selectedGroup) =&gt; {<br/>    this.setState({<br/>      openEditDialog: true,<br/>      group: group.toJS(),<br/>      selectedGroup,<br/>    });<br/>  }<br/>  render() {<br/>    const { groups } = this.props;<br/>    const { state } = this;<br/>    const { title, content, color, openAddDialog, openEditDialog, group } = this.state;</span><span id="2d0a" class="ln kc hu lj b fv mg lp l lq lr">    const styles = {<br/>      btnCircle: {<br/>        width: "30px",<br/>        height: "30px",<br/>        textAlign: "center",<br/>        padding: "6px 0",<br/>        fontSize: "12px",<br/>        fontWeight: "700",<br/>        lineHeight: "1.42",<br/>        borderRadius: "15px",<br/>        margin: "10px",<br/>        border: "none",<br/>        outline: "none",<br/>        float: "right"<br/>      }<br/>    }</span><span id="e021" class="ln kc hu lj b fv mg lp l lq lr">    return (<br/>      &lt;div className="container-fluid"&gt;<br/>      &lt;div className="row"&gt;<br/>        &lt;button style={styles.btnCircle} className="btn btn-primary btn-lg" onClick={() =&gt; this.setState({ openAddDialog: true })}&gt;<br/>          &lt;i className="fa fa-plus"&gt;&lt;/i&gt;<br/>        &lt;/button&gt;<br/>      &lt;Dialog<br/>        open={openAddDialog}<br/>        closeDialog={() =&gt; this.setState({ openAddDialog: false })}<br/>      &gt;<br/>        &lt;div className="container-fluid"&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;input placeholder="Enter Name ..." type="text" style={{ margin: "1vh 0" }} value={title} className="form-control" onChange={(e) =&gt; this.setState({ title: e.target.value })} /&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;textarea value={content} placeholder="Enter Description ..." rows="4" cols="50" style={{ margin: "1vh 0" }} className="form-control" onChange={(e) =&gt; this.setState({ content: e.target.value })} /&gt;<br/>          &lt;/div&gt;</span><span id="8670" class="ln kc hu lj b fv mg lp l lq lr">          &lt;div className="col-xs-12"&gt;<br/>            &lt;ColorPicker color={color} changeColor={(color) =&gt; this.setState({ color: color.hex })} /&gt;<br/>          &lt;/div&gt;<br/></span><span id="4cc0" class="ln kc hu lj b fv mg lp l lq lr">          &lt;div className="col-xs-12"&gt;<br/>            &lt;input type="button" disabled={title === "" &amp;&amp; "disabled"} style={{ margin: "1vh 0" }} value="Add Group" className="btn btn-primary btn-lg" onClick={this.addGroup} /&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/Dialog&gt;</span><span id="4a9c" class="ln kc hu lj b fv mg lp l lq lr">      &lt;Dialog<br/>        open={openEditDialog}<br/>        closeDialog={() =&gt; this.setState({ openEditDialog: false })}<br/>      &gt;<br/>        &lt;div className="container-fluid"&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;input style={{ margin: "1vh 0" }} type="text" value={group.title} className="form-control" onChange={(e) =&gt; this.setState({ ...state, group: {  ...this.state.group, title: e.target.value } })} /&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;textarea value={group.content||""} style={{ margin: "1vh 0" }} type="text" className="form-control" onChange={(e) =&gt; this.setState({ ...state, group: {  ...this.state.group, content: e.target.value } })} /&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;ColorPicker color={group.color} changeColor={(color) =&gt; this.setState({ ...state, group: { ...this.state.group, color: color.hex }})} /&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;input disabled={group.title === "" &amp;&amp; "disabled"} style={{ margin: "1vh 0" }} type="button" value="Edit Group" className="btn btn-warning btn-lg" onClick={this.editGroup} /&gt;<br/>          &lt;/div&gt;</span><span id="0a84" class="ln kc hu lj b fv mg lp l lq lr">        &lt;/div&gt;<br/>      &lt;/Dialog&gt;</span><span id="9020" class="ln kc hu lj b fv mg lp l lq lr">      {<br/>        &lt;StickyNotes<br/>          options={groups}<br/>          editOption={this.editOption}<br/>          deleteOption={this.props.deleteGroup}<br/>          handleClick={this.goToNoteGroup}<br/>        /&gt;<br/>      }<br/>      &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    )<br/>  }<br/>}</span><span id="1e11" class="ln kc hu lj b fv mg lp l lq lr">export default Home;</span></pre><h2 id="cb96" class="ln kc hu bd kd ml mm mn kh mo mp mq kl jn mr ms kp jr mt mu kt jv mv mw kx mx dt translated">组</h2><p id="d298" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">这是一个组件，我们在其中为StickyNotes组件提供Notes选项，并具有添加、编辑和删除处理程序。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="75f9" class="ln kc hu lj b fv lo lp l lq lr">import React, {Component} from 'react';<br/>import Dialog from '../Dialog';<br/>import StickyNotes from '../StickyNotes';<br/>import ColorPicker from '../ColorPicker';</span><span id="3ab3" class="ln kc hu lj b fv mg lp l lq lr">class Group extends Component {<br/>  constructor(props){<br/>    super(props);<br/>    this.state = {<br/>      title: "",<br/>      content: "",<br/>      color: "",<br/>      selectedNote: null,<br/>      openAddDialog: false,<br/>      openEditDialog: false,<br/>      openViewDialog: false,<br/>      note: {<br/>        title: "",<br/>      },<br/>    }<br/>  }</span><span id="960a" class="ln kc hu lj b fv mg lp l lq lr">  addNote = () =&gt; {<br/>    const { title, color, content } = this.state;<br/>    const { groupId, addedMedia } = this.props;<br/>    const image = this.refs.imageFile.files[0];<br/>    const file = this.refs.attachedFile.files[0];<br/>    this.props.addNote({<br/>      title,<br/>      content,<br/>      color,<br/>      image,<br/>      file,<br/>    }, groupId);<br/>    this.setState({ title: "", content: "", openAddDialog: false });<br/>  }</span><span id="9175" class="ln kc hu lj b fv mg lp l lq lr">  editNote = () =&gt; {<br/>    const { note, selectedNote } = this.state;<br/>    const { state } = this;<br/>    let METAFIELDS = note;<br/>    METAFIELDS.metafields[1].value = note.color || "#000"<br/>    this.props.editNote({<br/>      title: note.title,<br/>      color: note.color || "#000",<br/>      content: note.content,<br/>      metafields: METAFIELDS.metafields,<br/>    }, note.slug, selectedNote);<br/>    this.setState({ ...state, note: { title: "" }, openEditDialog: false })<br/>  }</span><span id="7469" class="ln kc hu lj b fv mg lp l lq lr">  editOption = (note, selectedNote) =&gt; {<br/>    this.setState({<br/>      openEditDialog: true,<br/>      note: note.toJS(),<br/>      selectedNote,<br/>    });<br/>  }</span><span id="bd46" class="ln kc hu lj b fv mg lp l lq lr">  goToNote = (note) =&gt; {<br/>    this.setState({<br/>      note: note.toJS(),<br/>      openViewDialog: true,<br/>    })<br/>  }<br/>  render() {<br/>    const { notes } = this.props;<br/>    const { state } = this;</span><span id="be80" class="ln kc hu lj b fv mg lp l lq lr">    const { title, content, color, openAddDialog, openEditDialog, openViewDialog, note } = this.state;</span><span id="c3c8" class="ln kc hu lj b fv mg lp l lq lr">    const styles = {<br/>      btnCircle: {<br/>        width: "30px",<br/>        height: "30px",<br/>        textAlign: "center",<br/>        padding: "6px 0",<br/>        fontSize: "12px",<br/>        fontWeight: "700",<br/>        lineHeight: "1.42",<br/>        borderRadius: "15px",<br/>        margin: "10px",<br/>        border: "none",<br/>        outline: "none",<br/>        float: "right"<br/>      }<br/>    }</span><span id="c5e0" class="ln kc hu lj b fv mg lp l lq lr">    return (<br/>      &lt;div className="container-fluid"&gt;<br/>      &lt;button style={styles.btnCircle}  onClick={() =&gt; this.setState({ openAddDialog: true })} className="btn btn-primary btn-lg"&gt;<br/>        &lt;i className="fa fa-plus"&gt;&lt;/i&gt;<br/>      &lt;/button&gt;<br/>      &lt;Dialog<br/>        open={openAddDialog}<br/>        closeDialog={() =&gt; this.setState({ openAddDialog: false })}<br/>      &gt;<br/>        &lt;div className="container-fluid"&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;input style={{ margin: "1vh 0" }} type="text" className="form-control" value={title} onChange={(e) =&gt; this.setState({ title: e.target.value })} /&gt; &lt;br /&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;textarea style={{ margin: "1vh 0" }} type="text" className="form-control" value={content} onChange={(e) =&gt; this.setState({ content: e.target.value })} /&gt; &lt;br /&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;input style={{ margin: "1vh 0" }} type="file" className="form-control" ref="imageFile" /&gt; &lt;br /&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;input style={{ margin: "1vh 0" }} type="file" className="form-control" ref="attachedFile" /&gt; &lt;br /&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;ColorPicker color={color} changeColor={(color) =&gt; this.setState({ color: color.hex })} /&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;input disabled={(title === "" || content === "") &amp;&amp; "disabled"} style={{ margin: "1vh 0" }} type="button" className="btn btn-success btn-md" value="Add Note" onClick={this.addNote} /&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/Dialog&gt;</span><span id="18b7" class="ln kc hu lj b fv mg lp l lq lr">      &lt;Dialog<br/>        open={openEditDialog}<br/>        closeDialog={() =&gt; this.setState({ openEditDialog: false })}<br/>      &gt;<br/>        &lt;div className="container-fluid"&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;input style={{ margin: "1vh 0" }} type="text" value={note.title} className="form-control" onChange={(e) =&gt; this.setState({ ...state, note: {  ...this.state.note, title: e.target.value } })} /&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;textarea style={{ margin: "1vh 0" }} type="text" value={note.content||""} className="form-control" onChange={(e) =&gt; this.setState({ ...state, note: {  ...this.state.note, content: e.target.value } })} /&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;ColorPicker color={note.color} changeColor={(color) =&gt; this.setState({ ...state, note: { ...this.state.note, color: color.hex }})} /&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;input disabled={(note.title === "" || note.content === "") &amp;&amp; "disabled"} style={{ margin: "1vh 0" }} type="button" value="Edit Note" className="btn btn-warning btn-lg" onClick={this.editNote} /&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/Dialog&gt;</span><span id="f15c" class="ln kc hu lj b fv mg lp l lq lr">      &lt;Dialog<br/>        open={openViewDialog}<br/>        closeDialog={() =&gt; this.setState({ openViewDialog: false })}<br/>      &gt;<br/>        &lt;div className="container-fluid"&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;h1 style={{ margin: "1vh 0" }}&gt;{note.title}&lt;/h1&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="col-xs-12"&gt;<br/>            &lt;p style={{ margin: "1vh 0" }}&gt;{note.content}&lt;/p&gt;<br/>          &lt;/div&gt;<br/>          {<br/>            !!note.metadata &amp;&amp; !!note.metadata.feature_image &amp;&amp;<br/>            &lt;div className="col-xs-12"&gt;<br/>              &lt;img style={{ margin: "1vh 0" }} width="128" height="128" src={note.metadata.feature_image.imgix_url} /&gt;<br/>            &lt;/div&gt;<br/>          }<br/>          {<br/>            !!note.metadata &amp;&amp; !!note.metadata.attachment &amp;&amp;<br/>            &lt;div className="col-xs-12"&gt;<br/>              &lt;a style={{ margin: "1vh 0" }} href={note.metadata.attachment.imgix_url} target="_blank"&gt;Click on this link to open attachment in the new link&lt;/a&gt;<br/>            &lt;/div&gt;<br/>          }<br/>        &lt;/div&gt;<br/>      &lt;/Dialog&gt;</span><span id="719b" class="ln kc hu lj b fv mg lp l lq lr">      &lt;StickyNotes<br/>        options={notes}<br/>        editOption={this.editOption}<br/>        deleteOption={this.props.deleteNote}<br/>        handleClick={this.goToNote}<br/>      /&gt;<br/>      &lt;/div&gt;<br/>    )<br/>  }<br/>}</span><span id="744a" class="ln kc hu lj b fv mg lp l lq lr">export default Group;</span></pre><h1 id="6c04" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">结论</h1><p id="4fa7" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">因此，这是一个涵盖了Cosmic JS RESTful API所有场景的应用程序。我希望你喜欢这个教程。</p><blockquote class="my mz na"><p id="b093" class="jc jd nb je b jf jg jh ji jj jk jl jm nc jo jp jq nd js jt ju ne jw jx jy jz hn dt translated">这篇文章最初出现在<a class="ae ka" href="https://cosmicjs.com/blog/how-to-build-a-sticky-notes-app-using-react-and-redux" rel="noopener ugc nofollow" target="_blank">宇宙JS博客</a>上。</p></blockquote></div></div>    
</body>
</html>