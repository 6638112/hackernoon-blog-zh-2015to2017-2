<html>
<head>
<title>Bringing Xamarin into the Enduro Scene</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Xamarin带入耐力赛</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/bringing-xamarin-into-the-enduro-scene-f2f87ce508fc?source=collection_archive---------20-----------------------#2017-04-05">https://medium.com/hackernoon/bringing-xamarin-into-the-enduro-scene-f2f87ce508fc?source=collection_archive---------20-----------------------#2017-04-05</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/3e5fb69704fc096679e21a534acd2238.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YIPPhPmKk2AnxjUbTLDh0g.png"/></div></div></figure><h1 id="7cc7" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">我是怎么卷进来的？</h1><p id="2b0f" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">几个月前，我接到一个电话，问我是否有兴趣在耐力赛中为车手自动计时。起初我不知道这是什么意思，这对我来说是一件全新的事情，我从来没有骑过这样的自行车，也不知道这项运动是如何设置的，也不知道任何相关的规则。但是我从未放弃我接受的挑战。</p><h1 id="1800" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated"><strong class="ak">基础知识</strong></h1><p id="a779" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">在我提出任何解决方案之前，我必须理清思路，我需要知道这是怎么回事，规则是什么，基本上是在<a class="ae ky" href="https://en.wikipedia.org/wiki/World_Enduro_Championship" rel="noopener ugc nofollow" target="_blank">耐力赛</a>的世界里的速成班。</p><p id="a192" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">在最简单的版本中，这是一场计时比赛，参赛者分组/成行(根据类别)出发。然后，他们继续通过一个预先定义的路线，并通过几个检查站，然后回到起点完成一圈，并继续这个过程，直到时间用完(大约3小时！)或者他们完成预定圈数。</p><p id="b70a" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">听起来很简单，对吧？没门儿！</p><figure class="le lf lg lh fq iv"><div class="bz el l di"><div class="li lj l"/></div></figure><h1 id="9d2e" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">挑战</h1><p id="7828" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">第一个挑战是<strong class="kc hv">时间</strong>，离第一场比赛还有不到3周的时间，我需要一个从想法到现实的快速转变。</p><p id="9b7e" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">第二个是<strong class="kc hv">硬件</strong>，想到了一些关于使用什么的想法:蓝牙、nfc、信标，但由于时间和预算的限制，它们都被放弃了。</p><p id="5608" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">第三个挑战是最难的，<strong class="kc hv"> 0%错误率:)</strong>。我们工程师倾向于谈论可接受的或低的错误率，我们知道在给定所有变量的情况下会有多少事情出错。但在这种情况下，我们需要确保每个骑手每次通过检查站时都被准确地抓获，没有任何借口。</p><figure class="le lf lg lh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/2dca9e6dcf4e52411c4ea14223af6808.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HzOgEFCljKINli-Cn-RAdw.png"/></div></div></figure><h1 id="61eb" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated"><strong class="ak">现在好戏开始了</strong></h1><p id="2ca5" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">我们的第一个决定是用<a class="ae ky" href="https://hackernoon.com/tagged/xamarin" rel="noopener ugc nofollow" target="_blank"> Xamarin </a>创建一个<a class="ae ky" href="https://hackernoon.com/tagged/mobile-app" rel="noopener ugc nofollow" target="_blank">移动应用</a>，这解决了我们最初的一些挑战:</p><ul class=""><li id="fd48" class="lk ll hu kc b kd kz kh la kl lm kp ln kt lo kx lp lq lr ls dt translated">从一开始就独立于平台(Android、iOS)</li><li id="f502" class="lk ll hu kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls dt translated">通过使用几个组件和nuget包，我们可以很快得到一个工作原型</li><li id="f507" class="lk ll hu kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls dt translated">有了<a class="ae ky" href="https://components.xamarin.com/gettingstarted/zxing.net.mobile.forms" rel="noopener ugc nofollow" target="_blank">Zxing.net Xamarin组件</a>，我们可以拥有一个经过测试的条形码阅读器，而不是从头开始创建自己的条形码阅读器(降低错误率)</li></ul><p id="3c07" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">我们仍然不知道最终的应用程序会是什么样子，但我们需要及时订购硬件进行测试，以确保它能够承受将要受到的虐待。例如:</p><ul class=""><li id="3e43" class="lk ll hu kc b kd kz kh la kl lm kp ln kt lo kx lp lq lr ls dt translated">电池需要在全亮度下支持屏幕3个多小时</li><li id="ec08" class="lk ll hu kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls dt translated">此外，相机大部分时间都是开着的(扫描条形码)，这又是一次电池消耗</li><li id="c308" class="lk ll hu kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls dt translated">我提到灰尘、岩石和泥土了吗？</li></ul><p id="d075" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">嗯，我们选定了一些入门级的LG Android手机，关闭了所有不必要的服务，进行了一些测试，使用了大约4个小时，还不错！</p><figure class="le lf lg lh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ly"><img src="../Images/9813ec054d3b8313862479d5e83e176d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WdB8GbC6tjgZm0PTwJlgqw.png"/></div></div></figure><h1 id="e9ed" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">体系结构</h1><p id="ff21" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">这是我们在移动应用上使用的:</p><ul class=""><li id="3b64" class="lk ll hu kc b kd kz kh la kl lm kp ln kt lo kx lp lq lr ls dt translated"><a class="ae ky" href="https://www.xamarin.com/forms" rel="noopener ugc nofollow" target="_blank"> Xamarin Forms </a> —可重用的UI和后台代码</li><li id="2add" class="lk ll hu kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls dt translated"><a class="ae ky" href="https://github.com/PrismLibrary" rel="noopener ugc nofollow" target="_blank">PRISM</a>—Xamarin表单的最佳MVVM框架</li><li id="2546" class="lk ll hu kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls dt translated"><a class="ae ky" href="https://www.sqlite.org/" rel="noopener ugc nofollow" target="_blank"> Sqlite </a> —存储数据的轻量级数据库</li><li id="b37d" class="lk ll hu kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls dt translated"><a class="ae ky" href="https://components.xamarin.com/gettingstarted/zxing.net.mobile.forms" rel="noopener ugc nofollow" target="_blank">Zxing.net条形码扫描仪</a> —读取条形码</li></ul><p id="c5f7" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">我们最后在每个骑手身上贴上条形码，一个在自行车的前面，一个在头盔的两边(以防万一)。</p><figure class="le lf lg lh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lz"><img src="../Images/a7c7b39614a887b8e7c3980968bc9892.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ODV7EFHH5LSJwt9E7LjvuQ.png"/></div></div><figcaption class="ma mb fg fe ff mc md bd b be z ek">These are the barcodes that are mounted on the bikes that we scan</figcaption></figure><p id="dfb4" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">该应用程序能够扫描条形码并记录时间。最初我的想法是将它实时传递给网络服务，这样我们就可以得到实时结果。但是比赛在没有互联网接入的偏远地区举行。因此，我们将所有信息存储在本地SQLite数据库中，然后当比赛结束时，我们使用ad-hoc wifi网络将所有数据传递到本地服务器，并处理结果。</p><h1 id="aed3" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">比赛时间！</h1><p id="88c7" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">我们表现如何？</p><ul class=""><li id="1416" class="lk ll hu kc b kd kz kh la kl lm kp ln kt lo kx lp lq lr ls dt translated">我们第一次能够为所有车手提供每个检查站之间的准确结果</li><li id="f975" class="lk ll hu kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls dt translated">我们设置的所有设备都运行良好，它们能够准确地扫描条形码</li><li id="425e" class="lk ll hu kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls dt translated">所有类别的结果立即计算出来</li><li id="4130" class="lk ll hu kc b kd lt kh lu kl lv kp lw kt lx kx lp lq lr ls dt translated">所有的结果都在网上公布，供所有人查看！</li></ul><p id="b5ed" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">最后，我们只能说每个人都满脸笑容！</p><figure class="le lf lg lh fq iv"><div class="bz el l di"><div class="li lj l"/></div></figure><figure class="le lf lg lh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ly"><img src="../Images/cd8146b718f348fd903db34aaeea7f8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IASKb02da_Qyuaj9uBopWQ.png"/></div></div></figure><div class="le lf lg lh fq ab cb"><figure class="me iv mf mg mh mi mj paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="me iv mf mg mh mi mj paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="me iv mf mg mh mi mj paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mk ml mm"><p id="f922" class="ka kb mn kc b kd kz kf kg kh la kj kk mo lb kn ko mp lc kr ks mq ld kv kw kx hn dt translated"><a class="ae ky" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是阿妹家庭的一员。我们现在<a class="ae ky" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ky" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ka kb mn kc b kd kz kf kg kh la kj kk mo lb kn ko mp lc kr ks mq ld kv kw kx hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ky" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ky" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="le lf lg lh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mr"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="le lf lg lh fq iv"><div class="bz el l di"><div class="ms lj l"/></div></figure></div></div>    
</body>
</html>