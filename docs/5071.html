<html>
<head>
<title>Publish your first Docker Image to Docker Hub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将您的首个Docker图片发布到Docker Hub</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/publish-your-docker-image-to-docker-hub-10b826793faf?source=collection_archive---------1-----------------------#2017-07-09">https://medium.com/hackernoon/publish-your-docker-image-to-docker-hub-10b826793faf?source=collection_archive---------1-----------------------#2017-07-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="952a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">正如你所熟悉的Docker来自我之前的<a class="ae jp" rel="noopener" href="/@rusrushal13/hello-docker-56e0bc8deede">帖子</a>。让我们深入探索更多。</p><p id="a2ec" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在你知道了如何运行一个容器和拉一个图像，现在我们也应该为其他人发布我们的图像。为什么你应该享受所有的乐趣；)</p><p id="3193" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">那么我们需要什么来发布我们的Docker图像呢？</p><ul class=""><li id="1c7e" class="jq jr hu it b iu iv iy iz jc js jg jt jk ju jo jv jw jx jy dt translated">一份文件</li><li id="be9a" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">你的应用</li></ul><p id="5302" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对，就是这样。</p><h2 id="ab21" class="ke kf hu bd kg kh ki kj kk kl km kn ko jc kp kq kr jg ks kt ku jk kv kw kx ky dt translated">为什么我们需要Docker方式的应用程序？</h2><p id="1add" class="pw-post-body-paragraph ir is hu it b iu kz iw ix iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo hn dt translated">历史上，我们需要我们的应用程序(可能是python应用程序)，我们需要我们的机器上的python(或所有依赖项)运行时环境。但这也造成了一种情况，你的机器上的环境必须如此，才能让你的应用程序按预期运行，也才能让你的服务器运行。有了Docker，你什么都不需要(没有环境)。您可以直接获取一个可移植的Python运行时作为映像，不需要安装。然后，您的构建可以在您的应用程序代码旁边包含基本Python映像，确保您的应用程序、其依赖项和运行时一起运行。这些可移植图像是由一个叫做Dockerfile的东西定义的。</p><p id="c7de" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Dockerfile充当容器内部的环境文件。它有助于为您的容器创建一个隔离的环境，哪些端口将暴露给外部世界，哪些文件您想要“复制”到该环境中。然而，在这样做之后，您可以预期在这个docker文件中定义的应用程序的构建无论在哪里运行都将完全一样。</p><p id="4c10" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以让我们创建一个目录，做一个<strong class="it hv"> <em class="le"> Dockerfile </em> </strong>。</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="05e0" class="ke kf hu lk b fv lo lp l lq lr">FROM python<br/>WORKDIR /app<br/>ADD . /app<br/>RUN pip install -r requirements.txt<br/>EXPOSE 80<br/>ENV NAME world<br/>CMD [“python”, “app.py”]</span></pre><p id="4715" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以你有你的文件。您可以看到语法非常简单，一目了然。</p><p id="2a7e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在我们需要我们的应用程序。我们来创建一个，一个python的app)</p><p id="cf73" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="le"> app.py </em> </strong></p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="538f" class="ke kf hu lk b fv lo lp l lq lr">from flask import Flask<br/>import os<br/>import socket</span><span id="1193" class="ke kf hu lk b fv ls lp l lq lr">app = Flask(__name__)</span><span id="c511" class="ke kf hu lk b fv ls lp l lq lr"><a class="ae jp" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route(“/”)</span><span id="1668" class="ke kf hu lk b fv ls lp l lq lr">def hello():<br/>     html = “&lt;h3&gt;Hello {name}!&lt;/h3&gt;” \<br/>            “&lt;b&gt;Hostname:&lt;/b&gt; {hostname}&lt;br/&gt;”<br/>     return html.format(name=os.getenv(“NAME”, “world”), hostname=socket.gethostname())</span><span id="2930" class="ke kf hu lk b fv ls lp l lq lr">if __name__ == “__main__”:<br/>     app.run(host=’0.0.0.0', port=80)</span></pre><p id="60b9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="le">需求. txt </em> </strong></p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="6d86" class="ke kf hu lk b fv lo lp l lq lr">Flask</span></pre><p id="c6c0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，您已经具备了继续进行的所有条件。现在只需构建您的应用程序。</p><h2 id="4d89" class="ke kf hu bd kg kh ki kj kk kl km kn ko jc kp kq kr jg ks kt ku jk kv kw kx ky dt translated">让我们建造它</h2><p id="9c6c" class="pw-post-body-paragraph ir is hu it b iu kz iw ix iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo hn dt translated">ls现在会给你看这个</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="373c" class="ke kf hu lk b fv lo lp l lq lr">$ ls<br/>app.py requirements.txt Dockerfile</span></pre><p id="72f2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在创建图像。</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="3dd8" class="ke kf hu lk b fv lo lp l lq lr">docker build -t imagebuildinginprocess .</span></pre><p id="ba05" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你的形象在哪里？它在您的本地图像注册表中。</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="4d37" class="ke kf hu lk b fv lo lp l lq lr">$ docker images<br/>REPOSITORY               TAG     IMAGE ID       CREATED     SIZE<br/>imagebuildinginprocess  latest  4728a04a9d39  14 minutes ago  694MB<br/></span></pre><h2 id="dc31" class="ke kf hu bd kg kh ki kj kk kl km kn ko jc kp kq kr jg ks kt ku jk kv kw kx ky dt translated">让我们也运行它</h2><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="9be7" class="ke kf hu lk b fv lo lp l lq lr">docker run -p 4000:80 imagebuildinginprocess</span></pre><p id="d947" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们在这里做的是将端口4000映射到容器公开端口80。您应该会在<a class="ae jp" href="http://0.0.0.0:80" rel="noopener ugc nofollow" target="_blank"> http://0.0.0.0:80 </a>看到Python正在为您的应用程序提供服务的通知。但是该消息来自容器内部，它不知道您将该容器的端口80映射到4000，使得URL<a class="ae jp" href="http://localhost:4000" rel="noopener ugc nofollow" target="_blank">http://localhost:4000</a>。在web浏览器中访问该URL，查看网页上显示的内容，包括“Hello World”文本和容器ID。</p><h2 id="ffaf" class="ke kf hu bd kg kh ki kj kk kl km kn ko jc kp kq kr jg ks kt ku jk kv kw kx ky dt translated">让我们分享一下:D</h2><p id="35f2" class="pw-post-body-paragraph ir is hu it b iu kz iw ix iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo hn dt translated">我们将把我们构建的映像推送到注册表，这样我们就可以在任何地方使用它。默认情况下，Docker CLI使用Docker的公共注册表。</p><ul class=""><li id="ddc5" class="jq jr hu it b iu iv iy iz jc js jg jt jk ju jo jv jw jx jy dt translated">登录到本地机器上的Docker公共注册表。(如果您没有帐户，请在此处填写cloud.docker.com)</li></ul><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="226e" class="ke kf hu lk b fv lo lp l lq lr">docker login</span></pre><ul class=""><li id="7ce1" class="jq jr hu it b iu iv iy iz jc js jg jt jk ju jo jv jw jx jy dt translated">标记图像:这更像是命名图像的版本。它是可选的，但是推荐使用，因为它有助于维护版本(就像ubuntu:16.04和ubuntu:17.04一样)</li></ul><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="d931" class="ke kf hu lk b fv lo lp l lq lr">docker tag imagebuildinginprocess rusrushal13/get-started:part1</span></pre><ul class=""><li id="f74b" class="jq jr hu it b iu iv iy iz jc js jg jt jk ju jo jv jw jx jy dt translated">发布图像:将标记的图像上传到存储库中:一旦完成，此上传的结果将公开。如果您登录Docker Hub，您将在那里看到新的图像及其pull命令。</li></ul><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="e990" class="ke kf hu lk b fv lo lp l lq lr">docker push rusrushal13/get-started:part1</span></pre><p id="22ec" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对，就这样，你完蛋了。现在你可以去码头中心，也可以查看一下；).你发布了你的第一张照片。</p><p id="ddd9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我发现这个GitHub存储库非常棒。看一看<a class="ae jp" href="https://github.com/jessfraz/dockerfiles" rel="noopener ugc nofollow" target="_blank">https://github.com/jessfraz/dockerfiles</a></p><p id="c40a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一定要给我改进的反馈；)</p></div></div>    
</body>
</html>