<html>
<head>
<title>Cheap, yet Powerful App Analytics using Data Studio, BigQuery and Firebase (or Similar services)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Data Studio、BigQuery和Firebase(或类似服务)的廉价而强大的应用分析</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/cheap-yet-powerful-app-analytics-using-data-studio-big-query-and-firebase-or-similar-services-6186ae42c697?source=collection_archive---------5-----------------------#2017-05-10">https://medium.com/hackernoon/cheap-yet-powerful-app-analytics-using-data-studio-big-query-and-firebase-or-similar-services-6186ae42c697?source=collection_archive---------5-----------------------#2017-05-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="acf3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">了解应用程序中发生的事情对应用程序的发展至关重要。俗话说:“不能测量的就不能改进”</p><p id="e368" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">听听这里的odiocast:</p><div class="jq jr fm fo js jt"><a href="https://www.odiocast.com/tech_in_startups/-KjhgDOLXxf16yIfIK7N" rel="noopener  ugc nofollow" target="_blank"><div class="ju ab ej"><div class="jv ab jw cl cj jx"><h2 class="bd hv fv z el jy eo ep jz er et ht dt translated">由tech_in_startups构建您自己的分析基础架构</h2><div class="ka l"><h3 class="bd b fv z el jy eo ep jz er et ek translated">利用Firebase、Big Query和Data Studio构建一个更便宜但功能强大的分析基础设施</h3></div><div class="kb l"><p class="bd b gc z el jy eo ep jz er et ek translated">www.odiocast.com</p></div></div><div class="kc l"><div class="kd l ke kf kg kc kh ki jt"/></div></div></a></div><p id="3cd0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">分析很快就会变得非常昂贵。<a class="ae kj" href="https://hackernoon.com/tagged/google" rel="noopener ugc nofollow" target="_blank">谷歌</a> Analytics Premium的年费为15万美元，其他大多数工具的起价为每月1000美元以上。虽然所有的工具都有很大的自由层，但它们在功能上也有缺陷。自举创业公司负担不起这样的计划，但确实希望获得电力<a class="ae kj" href="https://hackernoon.com/tagged/tools" rel="noopener ugc nofollow" target="_blank">工具</a>。这是我们创办旧公司PureMetrics的原因之一，但市场已经很拥挤了，大公司正在通过为他们的云产品提供分析功能来耀武扬威。总的来说，这对生态系统有好处，因为它降低了每个人的成本。</p><p id="c389" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这篇文章将深入探讨如何使用Data Studio、BigQuery和Firebase来完成近乎免费的分析。</p><p id="b387" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先，我通常建议不要从头开始“滚动你自己的”分析。基本上，如果有人告诉你他们可以有自己的MYSQL或Mongo实例来记录事件，不要听他们的。他们计划只解决一部分问题，存储，还没有想好数据如何推送到服务器，如何查询。</p><p id="bca5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">分析系统可以分为3个主要部分:—接收—存储—查询</p><p id="b2aa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们将使用下面的3</p><ul class=""><li id="24e4" class="kk kl hu it b iu iv iy iz jc km jg kn jk ko jo kp kq kr ks dt translated">针对摄入的Firebase分析</li><li id="6ec6" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">BigQuery用于存储，也可以用于查询</li><li id="5cf2" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">用于查询和可视化的数据工作室</li></ul><p id="c9d5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> Firebase分析</strong></p><p id="ef39" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您脑海中的下一个问题是，为什么我们不直接使用Firebase Analytics？在查询方面，Firebase Analytics相当弱。你甚至不能在分析仪表板上看到所有的事件参数(我不认为它会有所改善，因为那样人们就不会把数据转移到Bigquery上了)。它的超能力是以接近零的成本将我们的事件数据导入BigQuery。</p><p id="645a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> BigQuery </strong></p><p id="c1d1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">BigQuery是Google提供的全托管SQL DB。我喜欢它有三个原因:</p><ul class=""><li id="2b83" class="kk kl hu it b iu iv iy iz jc km jg kn jk ko jo kp kq kr ks dt translated">它是完全托管的，不需要DevOps，不用担心分片、热键或索引。</li><li id="e31e" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">它很快！</li><li id="c201" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">它很便宜。查询1 TB的数据需要花费5美元，每月的第一个TB是免费的</li></ul><p id="7cdc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">数据工作室</strong></p><p id="38f4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Data Studio是Google提供的一个比较新的BI服务，免费使用，容易上手。它确实有一些问题，比如一次只能处理一个表，但它不是一个阻碍，特别是因为我们可以在BQ中合并表，或者创建视图来简化表结构</p><p id="9be8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">通过这种设置，您需要将firebase SDK集成到您的应用程序中，以开始传递事件，并使Blaze plan能够开始将分析数据推送到BQ中。完成后，您可以开始使用data studio构建简单的报告，并与您的组织共享。如果您以前从未使用过BI工具，可能需要一些时间来适应，但是一旦您使用了，创建报告将是轻而易举的事情。这是一份关于我们Alpha版本的超级简单的报告。</p><figure class="kz la lb lc fq ld fe ff paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="fe ff ky"><img src="../Images/e160d433ea79d2707f25d4651c76b640.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QmdU-12BhR4uOB-mjK4jfA.png"/></div></div></figure><h2 id="1658" class="lj lk hu bd ll lm ln lo lp lq lr ls lt jc lu lv lw jg lx ly lz jk ma mb mc md dt translated">这种设置的一些优点</h2><ul class=""><li id="98f4" class="kk kl hu it b iu me iy mf jc mg jg mh jk mi jo kp kq kr ks dt translated">通过合并来自各种其他来源的数据，如CSV文件、Google AdWords或您自己的MySQL数据库，创建高级报告</li><li id="f242" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">完全托管，想想看，没有DevOps，您不需要担心您的机器有多大，或者负载平衡器，或者有寻呼机在凌晨3:00叫醒您。如果你在吹捧你的系统的吞吐量，而该系统不是你销售的主要产品，那你就做错了。</li><li id="422f" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">分析师很容易上手，因为他们已经知道如何使用BI工具。BI工具还利用了过滤器，当您使用过滤器时，它会更新整个视图。</li><li id="b50e" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">BQ很快，非常快。这允许您从多年的历史数据中查询趋势。你可以在这里阅读更多<a class="ae kj" href="https://cloud.google.com/blog/big-data/2016/01/anatomy-of-a-bigquery-query" rel="noopener ugc nofollow" target="_blank">，他们在30秒内查询4 TB的数据</a></li><li id="d48c" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">Firebase自动捕获一些事件，比如First_open，app_updated等</li><li id="517f" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">如果您愿意使用SQL，您几乎可以构建任何类型的报表。您不会被典型的查询机制所束缚，这些机制几乎总是从“已经完成或没有完成X的用户”开始</li></ul><h2 id="ac06" class="lj lk hu bd ll lm ln lo lp lq lr ls lt jc lu lv lw jg lx ly lz jk ma mb mc md dt translated">不足之处</h2><ul class=""><li id="2fb4" class="kk kl hu it b iu me iy mf jc mg jg mh jk mi jo kp kq kr ks dt translated">Firebase Analytics没有web SDK[更新:<a class="ae kj" href="https://firebase.google.com/docs/reference/js" rel="noopener ugc nofollow" target="_blank">，他们现在有了</a>(他们可能永远不会有，因为它几乎会杀死GA Premium)。所以你得不到你的站点数据。或者，您可以使用细分市场，而不是Firebase Analytics。Segment提供的表结构也更容易使用。它相对来说更贵，但是仍然比其他工具便宜，因为您可以从其他来源获取数据到BigQuery中</li><li id="01ba" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">正如我在前面提到的，firebase的表结构不是最好的，它最大限度地利用了BQ的重复记录，但是如果你打算使用其他来源，你将有更多的工作要做</li><li id="364b" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">如果你在AWS上，这个设置在到达时就已经死了。您可以使用AWS mobile hub建立类似的设置，或者直接使用独立的服务，即AWS Mobile analytics、Redshift和QuickSight。</li><li id="2e80" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">像队列这样的图表不是现成的，但是可以构建，大多数图表的SQL都可以在互联网上找到</li><li id="332b" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">DataStudio不会向您发送电子邮件报告。</li><li id="65a0" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">实时报告也将是一个挑战。Firebase为当天的数据创建当天的表格。因此你不能直接合并数据。话说回来，你真的需要实时分析吗？你是实时反应的吗？如果不是，你不需要实时分析。</li><li id="76aa" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">Firebase将iOS和Android中的数据推送到不同的表中。事件和用户属性也被推入不同的表中。因此，如果需要合并数据，您需要运行连接或构建视图。如果这太多，分段是更好的选择</li><li id="6b06" class="kk kl hu it b iu kt iy ku jc kv jg kw jk kx jo kp kq kr ks dt translated">名称和值的长度是有限制的，根据您正在做的事情，这可能是一个问题。从Firebase文档中:</li></ul><blockquote class="mj mk ml"><p id="9835" class="ir is jp it b iu iv iw ix iy iz ja jb mm jd je jf mn jh ji jj mo jl jm jn jo hn dt translated">每个应用程序最多可以报告500个不同类型的事件，每个事件最多可以关联25个唯一参数事件和参数名称可以是40个字符长，每个应用程序最多可以提供25个唯一用户属性。名称最长可达24个字符，值最长可达36个字符</p></blockquote><p id="552d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这就是我们在Odiocast的确切设置。对于网站，我们每天使用Segment将数据传递给BigQuery一次。从那里，我们使用Data studio上的多个报告来查看谁在Alpha应用程序上做什么。</p><p id="54d6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">另外，由于Firebase充当了BigQuery的管道，我们还在需要时传递错误和信息日志。在iOS上，我做了一点欺骗，传递了我的警告框的消息字符串</p><figure class="kz la lb lc fq ld fe ff paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="fe ff mp"><img src="../Images/cd831f7fcf6e561f5bddcf718b7da40c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rGrCzRidOLtlg4b6FZk2lQ.png"/></div></div><figcaption class="mq mr fg fe ff ms mt bd b be z ek">info logs</figcaption></figure><p id="797b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你有任何问题，请在下面发表评论。</p><p id="8035" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你喜欢这篇文章，请点击下面的♡按钮分享</p><div class="kz la lb lc fq ab cb"><figure class="mu ld mv mw mx my mz paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mu ld mv mw mx my mz paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mu ld mv mw mx my mz paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mj mk ml"><p id="f922" class="ir is jp it b iu iv iw ix iy iz ja jb mm jd je jf mn jh ji jj mo jl jm jn jo hn dt translated"><a class="ae kj" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kj" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kj" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae kj" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is jp it b iu iv iw ix iy iz ja jb mm jd je jf mn jh ji jj mo jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kj" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kj" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kz la lb lc fq ld fe ff paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="fe ff na"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>