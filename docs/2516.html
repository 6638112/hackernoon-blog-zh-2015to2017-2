<html>
<head>
<title>Turn any Website into a MicroService/Serverless Endpoint.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将任何网站转变为微服务/无服务器终端。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/turn-any-website-into-a-microservice-serverless-endpoint-4a12446ede7?source=collection_archive---------7-----------------------#2017-02-01">https://medium.com/hackernoon/turn-any-website-into-a-microservice-serverless-endpoint-4a12446ede7?source=collection_archive---------7-----------------------#2017-02-01</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="1ab3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">全部通过一个单一的命令通过通用<a class="ae jp" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>控制台- &gt; <strong class="it hv"> <em class="jq">:服务</em> </strong></p><p id="c5c0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如今，无服务器和基于微服务的应用程序风靡一时。无服务器的定义如下:</p><div class="jr js fm fo jt ju"><a href="https://martinfowler.com/articles/serverless.html" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">无服务器架构</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">无服务器架构用一组第三方服务和FaaS取代了托管服务器</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">martinfowler.com</p></div></div><div class="kd l"><div class="ke l kf kg kh kd ki kj ju"/></div></div></a></div><p id="9955" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这里的微服务:</p><div class="jr js fm fo jt ju"><a href="https://martinfowler.com/articles/microservices.html" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">微服务</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">“微服务”——软件架构拥挤的街道上的又一个新术语。虽然我们的自然…</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">martinfowler.com</p></div></div><div class="kd l"><div class="kk l kf kg kh kd ki kj ju"/></div></div></a></div><p id="4450" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">基本上，这些技术都是指在第三方托管环境中托管和运行代码的能力，而不必担心通常与维护自己的服务器相关的所有devops。两个很好的例子是:</p><p id="0572" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">亚马逊λ:</p><div class="jr js fm fo jt ju"><a href="https://aws.amazon.com/lambda/" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">AWS Lambda -无服务器计算</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">AWS Lambda允许您在不提供或管理服务器的情况下运行代码。您只需为消耗的计算时间付费…</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">aws.amazon.com</p></div></div><div class="kd l"><div class="kl l kf kg kh kd ki kj ju"/></div></div></a></div><p id="314c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">和微软Azure函数:</p><div class="jr js fm fo jt ju"><a href="https://azure.microsoft.com/en-us/services/functions/" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">Azure功能-无服务器架构|微软Azure</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">借助Microsoft Azure功能、无服务器架构、事件驱动的体验，对整个堆栈中的事件做出反应…</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">azure.microsoft.com</p></div></div><div class="kd l"><div class="km l kf kg kh kd ki kj ju"/></div></div></a></div><p id="516b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">虽然这些环境都很棒，我强烈推荐它们用于生产工作，但它们需要相当多的努力才能启动和运行。其他初创公司提供替代方法，以低得多的“摩擦”进行无服务器计算。这方面的一些好例子有:</p><div class="jr js fm fo jt ju"><a href="https://zeit.co/now" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">现在</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">实时全球部署</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">zeit.co</p></div></div><div class="kd l"><div class="kn l kf kg kh kd ki kj ju"/></div></div></a></div><div class="jr js fm fo jt ju"><a href="https://gomix.com/" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">Gomix</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">Gomix将自动部署、即时托管和协作编辑结合在一起，让您直接编码，这样您就可以…</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">gomix.com</p></div></div></div></a></div><div class="jr js fm fo jt ju"><a href="https://serverless.com/" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">无服务器——由AWS Lambda和API Gateway支持的无服务器应用程序框架</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">构建完全由AWS Lambda和API Gateway支持的web、移动和物联网应用</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">serverless.com</p></div></div><div class="kd l"><div class="ko l kf kg kh kd ki kj ju"/></div></div></a></div><div class="jr js fm fo jt ju"><a href="https://webtask.io/" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">网络任务</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">你需要的只是代码！通过HTTP调用运行代码。没有供应。没有部署。</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">webtask.io</p></div></div><div class="kd l"><div class="kp l kf kg kh kd ki kj ju"/></div></div></a></div><p id="5fdd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所有这些解决方案都以最少的设置和配置提供了相当多的功能。</p><p id="2adf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是，有时您只想使用现有的网站或网页作为某些功能的基础。当您试图从现有网站抓取数据或利用其他开发人员已经构建和部署的一些很酷的JavaScript功能时，尤其如此。其他时候，你有一个很棒的想法，想要开发一个应用程序，但你只想快速地构建原型！另一种情况是，您想要托管一些私有的web内容，但是您没有web服务器或通过浏览器提供这些内容的方法。不管是什么原因，你只是想要快速、简单和随处可得的东西。</p><p id="d877" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我有一个为自己构建的解决方案，我很确定其他开发人员也有类似的问题，可以用它来解决。它基于我在本文中构建和讨论的通用JavaScript控制台:</p><div class="jr js fm fo jt ju"><a href="https://hackernoon.com/universal-javascript-console-for-browser-electron-nw-js-node-js-and-windows-272e4bd6f9d9" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">适用于浏览器、电子、NW.js、Node.js和Windows的通用JavaScript控制台</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">我喜欢JavaScript，我喜欢来自一个好的命令行界面的生产力和灵活性。如果你…</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">hackernoon.com</p></div></div><div class="kd l"><div class="kq l kf kg kh kd ki kj ju"/></div></div></a></div><p id="39f7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">请花点时间阅读这篇文章，因为我们将要使用的功能取决于您的浏览器中是否有这个JavaScript控制台。这就像创建一个bookmarklet一样简单，可从以下网址获得:</p><div class="jr js fm fo jt ju"><a href="https://s3.amazonaws.com/mparsons/jsconsole/index.html" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">安慰</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">编辑描述</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">s3.amazonaws.com</p></div></div></div></a></div><p id="b320" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">只需导航到该网站，将bookmarklet拖动到您的书签工具栏，如下所示:</p><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div class="ab fr cl kw"><img src="../Images/600237a022f286299d66f38f344a6316.png" data-original-src="https://miro.medium.com/v2/format:webp/1*pI0mGg_3ulc2rVA6KJBXpA.png"/></div></figure><p id="db11" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦安装了bookmarklet，您就可以导航到任何网站并将JavaScript控制台注入到该页面中。</p><h2 id="ab74" class="ky kz hu bd la lb lc ld le lf lg lh li jc lj lk ll jg lm ln lo jk lp lq lr ls dt translated">注意:使用bookmarklet是可选的，您可以简单地导航到控制台URL并在“独立模式”下使用它</h2><p id="4112" class="pw-post-body-paragraph ir is hu it b iu lt iw ix iy lu ja jb jc lv je jf jg lw ji jj jk lx jm jn jo hn dt translated">在我们的第一个示例中，我们将使用独立模式来演示无服务器/微服务功能。因此，请浏览以下网址:</p><div class="jr js fm fo jt ju"><a href="https://s3.amazonaws.com/mparsons/jsconsole/index.html" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">安慰</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">编辑描述</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">s3.amazonaws.com</p></div></div></div></a></div><p id="037a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您应该有一个如下所示的窗口:</p><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="fe ff ly"><img src="../Images/dfbe78f73c3ad6eb842b73065a9ab01c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SsFcWjj8XhAYEi23Eie-tg.png"/></div></div></figure><p id="f759" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">其中一个命令是<strong class="it hv"> <em class="jq"> :service </em> </strong>，它将为这个页面创建一个微服务端点。在控制台中执行该命令，您应该会得到类似如下的结果:</p><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="fe ff ly"><img src="../Images/655b45257a8d38391a6d905ed4ee7f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rMMH1NernnseWOO6VmTD1w.png"/></div></div></figure><p id="6783" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">几秒钟后，您应该会看到您的服务已经创建好了，并且描述了各个端点。基本上，这个页面(即JavaScript控制台)现在既可以作为HTTPS端点，也可以作为微服务端点，可以通过任何计算机或编程语言访问。</p><h2 id="08cb" class="ky kz hu bd la lb lc ld le lf lg lh li jc lj lk ll jg lm ln lo jk lp lq lr ls dt translated">基本上，您的网页现在可以作为web服务器使用了！</h2><p id="00f3" class="pw-post-body-paragraph ir is hu it b iu lt iw ix iy lu ja jb jc lv je jf jg lw ji jj jk lx jm jn jo hn dt translated">要测试功能，请打开另一个浏览器选项卡，并导航到控制台中显示的服务端点。对我来说，这是</p><p id="e5f1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">https://webpage.mybluemix.net/service/iyn3kmoh-27ekgyqpxih/</p><p id="1764" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当您第一次导航到此URL时，您将会看到一条如下所示的消息:</p><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="fe ff ly"><img src="../Images/019661af0fffcafefac863744f63f564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jvUh_5S-e4l5l7g--XgGwA.png"/></div></div></figure><p id="a278" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">别担心，你的服务没有坏，你只需要提供一个服务命令。当您执行<strong class="it hv"> <em class="jq"> :service </em> </strong>命令时，它会创建一个微服务，对您在URL上指定的任何命令进行JavaScript评估。例如，如果您导航到</p><p id="18c2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://webpage.mybluemix.net/service/iyn3kmoh-27ekgyqpxih/location" rel="noopener ugc nofollow" target="_blank">https://网页. mybluemix . net/service/iyn 3 kmoh-27 ekgyqpxih/location</a></p><p id="88b8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您应该会看到类似这样的内容:</p><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="fe ff ly"><img src="../Images/479e41a739ee8952b2a20dee48a56c2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NJY1N-rAKzMDYS-Wf-edxA.png"/></div></div></figure><p id="fb16" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">基本上，无论您指定什么命令(或代码字符串)，控制台都会尝试并评估它，然后发回一个结果。结果是文本并被JSON序列化。请注意，并不是所有东西都可以序列化到JSON。例如，如果你尝试这样做，</p><p id="ff6d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">https://网页. mybluemix . net/service/iyn 3 kmoh-27 ekgyqpxih/document</p><p id="42c5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您将得不到预期的结果，因为文档对象不能被JSON序列化。</p><p id="8012" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="jq">所以要记住页面的整个对象模型都是可访问的(即窗口对象)，所以你不要在公共互联网上发布你的服务URL！</em>T3】</strong></p><p id="3f07" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可以通过在控制台中键入以下代码来立即禁用它:</p><pre class="kr ks kt ku fq md me mf mg aw mh dt"><span id="2f6c" class="ky kz hu me b fv mi mj l mk ml">client.rpc.unprovide(serviceId)</span></pre><p id="1fed" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">默认微服务端点定义为:</p><pre class="kr ks kt ku fq md me mf mg aw mh dt"><span id="29f6" class="ky kz hu me b fv mi mj l mk ml">client.rpc.provide(serviceId, (req, res) =&gt; {<br/>  var x = '';<br/>  try {<br/>   x = eval(d);<br/>  } catch (e) {<br/>   x = 'Error: ' + e.message<br/>  };<br/>  res.send(x)<br/>});</span></pre><p id="9a83" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可以通过在控制台中键入自己的实现来覆盖它，从而提供自己的功能，如下所示:</p><pre class="kr ks kt ku fq md me mf mg aw mh dt"><span id="007a" class="ky kz hu me b fv mi mj l mk ml">client.rpc.unprovide(serviceId);</span><span id="4835" class="ky kz hu me b fv mm mj l mk ml">//echo the command back<br/>client.rpc.provide(serviceId, (req, res) =&gt; {<br/>  res.send(d)<br/>});</span></pre><p id="7a07" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下面是另一个返回当前日期的示例:</p><pre class="kr ks kt ku fq md me mf mg aw mh dt"><span id="d468" class="ky kz hu me b fv mi mj l mk ml">client.rpc.provide(serviceId, (req, res) =&gt; {<br/>   if(req=="date")<br/>      res.send(Date());<br/>   else<br/>      res.send(req +" is an invalid command");<br/>});</span></pre><p id="fd40" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">只要解析在<strong class="it hv"> <em class="jq"> req </em> </strong>变量中发送的任何内容，您就可以拥有任意多的端点。例如，您可以使用如下switch语句:</p><pre class="kr ks kt ku fq md me mf mg aw mh dt"><span id="7a93" class="ky kz hu me b fv mi mj l mk ml">client.rpc.provide(serviceId, (req, res) =&gt; {<br/> var result="";<br/> switch (req) {<br/>  case "date":<br/>   result=Date();<br/>   break;<br/>  case "hello":<br/>   result="Hello World!";<br/>   break;<br/>  default:<br/>   result=req +" is an invalid command";<br/> }<br/> res.send(result);<br/>});</span></pre><p id="50b0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">服务实现的功能基于awesome DeepStream服务器和相关的JavaScript客户端库。</p><div class="jr js fm fo jt ju"><a href="https://deepstream.io/docs/client-js/client/" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">Javascript客户端</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">deepstream.io js客户端的入口点API文档</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">deepstream.io</p></div></div><div class="kd l"><div class="mn l kf kg kh kd ki kj ju"/></div></div></a></div><p id="6646" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">除了RPC功能之外，服务实现还创建了一个DeepStream记录，可以通过其端点或控制台中的<strong class="it hv"> <em class="jq">记录</em> </strong>变量来访问该记录。</p><p id="20aa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">要通过其端点设置值，调用调用<strong class="it hv"> <em class="jq"> :service </em> </strong>命令时提供的URL:</p><p id="9576" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://webpage.mybluemix.net/set/iyn3kmoh-27ekgyqpxih/name/mike" rel="noopener ugc nofollow" target="_blank">https://网页. mybluemix . net/set/iyn 3 kmoh-27 ekgyqpxih/name/Mike</a></p><p id="f5a1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">其中<strong class="it hv"> <em class="jq">名称</em> </strong>是键，<strong class="it hv"> <em class="jq">麦克</em> </strong>是值</p><p id="3c13" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">要检索该值，请调用以下URL:</p><p id="0eaf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://webpage.mybluemix.net/get/iyn3kmoh-27ekgyqpxih/name" rel="noopener ugc nofollow" target="_blank">https://webpage.mybluemix.net/get/iyn3kmoh-27ekgyqpxih/name</a></p><p id="ffe8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">要在控制台中做到这一点，只需使用<strong class="it hv"> <em class="jq">记录</em> </strong>变量:</p><pre class="kr ks kt ku fq md me mf mg aw mh dt"><span id="8561" class="ky kz hu me b fv mi mj l mk ml">record.set("name","mike");</span><span id="1dc8" class="ky kz hu me b fv mm mj l mk ml">record.get("name");</span></pre><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="fe ff ly"><img src="../Images/97535f3f8a9703b69c8408e7df68296a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t4sI6SweaqB4ZeWyRaQ5NA.png"/></div></div></figure><p id="e747" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">同样，此功能是由DeepStream提供的，因此您可以在此处查看文档:</p><div class="jr js fm fo jt ju"><a href="https://deepstream.io/docs/client-js/datasync-record/" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">记录</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">用于深流记录的API文档</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">deepstream.io</p></div></div><div class="kd l"><div class="mo l kf kg kh kd ki kj ju"/></div></div></a></div><p id="12b8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">通过控制台中的<strong class="it hv"> <em class="jq">客户端</em> </strong>变量，可以使用DeepStream客户端库提供的所有功能。这包括发布和订阅功能，我们将在另一篇文章中讨论。</p><p id="1d8b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">注意:记录是基于服务id(控制台中的service id)保存的，因此即使您的控制台会话已经结束，它们也是可用的。如果您返回到同一台机器上相同URL的控制台，它应该重用相同的服务id(它将它存储在localStorage中)。</strong></p><h1 id="eba0" class="mp kz hu bd la mq mr ms le mt mu mv li mw mx my ll mz na nb lo nc nd ne lr nf dt translated">基于现有网页创建服务</h1><p id="8450" class="pw-post-body-paragraph ir is hu it b iu lt iw ix iy lu ja jb jc lv je jf jg lw ji jj jk lx jm jn jo hn dt translated">在本例中，我们将把控制台注入到一个现有的Web页面中，并使用服务功能为该页面创建一个端点。首先，你需要有<strong class="it hv"> <em class="jq">注入控制台书签</em> </strong>如上所述或在本文中</p><div class="jr js fm fo jt ju"><a href="https://hackernoon.com/universal-javascript-console-for-browser-electron-nw-js-node-js-and-windows-272e4bd6f9d9" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">适用于浏览器、电子、NW.js、Node.js和Windows的通用JavaScript控制台</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">我喜欢JavaScript，我喜欢来自一个好的命令行界面的生产力和灵活性。如果你…</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">hackernoon.com</p></div></div><div class="kd l"><div class="kq l kf kg kh kd ki kj ju"/></div></div></a></div><p id="53a5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">完成此操作后，导航至</p><div class="jr js fm fo jt ju"><a href="https://news.ycombinator.com/news" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">黑客新闻</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">编辑描述</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">news.ycombinator.com</p></div></div></div></a></div><p id="fc70" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">并通过Bookmarklet注入控制台。控制台加载完成后，您可以在控制台中键入以下内容，以确保连接到黑客新闻页面:</p><pre class="kr ks kt ku fq md me mf mg aw mh dt"><span id="fe1e" class="ky kz hu me b fv mi mj l mk ml">page.location</span></pre><p id="5c70" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">记住<strong class="it hv"> <em class="jq">页面</em> </strong>是对宿主页面上窗口对象的全局引用。</p><p id="71ee" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">接下来，执行服务命令:</p><pre class="kr ks kt ku fq md me mf mg aw mh dt"><span id="53f2" class="ky kz hu me b fv mi mj l mk ml">:service</span></pre><p id="c069" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这将需要几秒钟的时间，但是您应该可以获得关于新创建的服务端点的信息:</p><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="fe ff ly"><img src="../Images/d41017b35ce5c8555987655d9799bc95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qGGkweJRShLfNJfIZUg-lQ.png"/></div></div></figure><p id="23a8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">要验证端点是否正常工作并连接到主机页面，请打开一个新的浏览器选项卡，导航到控制台中指定的URL:</p><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="fe ff ly"><img src="../Images/fc97d34d2193f8281901bc232d1b788b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JsXtyHoyC5dI-wBOHzTkQw.png"/></div></div></figure><p id="55c5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，您的端点正在工作，您可以通过做一些简单的事情来抓取页面:</p><p id="81f9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://webpage.mybluemix.net/service/iyn392du-9c7cbhv5vdr/page.document.body.innerText" rel="noopener ugc nofollow" target="_blank">https://网页. mybluemix . net/service/iyn 392 du-9 c 7 cbh V5 VDR/page . document . body . innertext</a></p><p id="9fae" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您应该得到如下所示的内容:</p><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="fe ff ng"><img src="../Images/28aea285e79b834a8e1d174886b8f884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YMqRSypTHDLgaz1FN-xoXw.png"/></div></div></figure><p id="8fd9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当然，正如我在上面演示的那样，通过覆盖端点实现，您可以变得更加复杂。另外，请记住，您可以通过使用控制台中的<strong class="it hv"> <em class="jq"> :load </em> </strong>脚本命令来获取任何您想要的JavaScript库。举例来说，下面是利用出色的AlaSql库抓取页面并将结果显示为JSON的代码:</p><pre class="kr ks kt ku fq md me mf mg aw mh dt"><span id="e6e0" class="ky kz hu me b fv mi mj l mk ml">:load alasql</span><span id="8cca" class="ky kz hu me b fv mm mj l mk ml">hackernews=JSON.stringify(alasql("select href,innerText INTO JSON({headers:true}) from ? where className='storylink'",[[...page.document.all]]));</span></pre><p id="71b3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后，您应该能够简单地通过它的URL访问结果</p><p id="caf6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://webpage.mybluemix.net/service/iyn392du-9c7cbhv5vdr/hackernews" rel="noopener ugc nofollow" target="_blank">https://网页. mybluemix . net/service/iyn 392 du-9 c 7 cbh V5 VDR/hacker news</a></p><p id="7660" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">听听这个:</p><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="fe ff ng"><img src="../Images/cd2ceeaa41a0fdf6686fe4d129e3297c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xsrq5uxwNbdBp6dqV7-Tnw.png"/></div></div></figure><p id="582b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">注意:您可能需要刷新几次URL才能得到结果！</p><p id="3f82" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">正如你所看到的，这提供了一些非常强大，但访问简单的功能，使原型和黑客超级生产力，我敢说，有趣！</p><p id="5be8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因为我们正在使用DeepStream服务器和客户端库来实现这一功能，这也意味着我们可以在浏览器之外访问我们的服务功能，包括在NodeJS、Java和本地移动应用程序中。这超出了本文的范围，但是我会有另一篇后续文章来讨论这个问题。为了支持这一点，我还将撰写另一篇文章，介绍我在IBM Bluemix中运行的服务器实现。</p><div class="jr js fm fo jt ju"><a href="https://www.ibm.com/cloud-computing/bluemix/" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">IBM Bluemix -云基础设施、平台服务、Watson和更多PaaS解决方案</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">使用IBM Bluemix混合云开发平台构建和运行您的应用程序，以访问基础设施目录…</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">www.ibm.com</p></div></div><div class="kd l"><div class="nh l kf kg kh kd ki kj ju"/></div></div></a></div><p id="9370" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">同样值得注意的是，因为我们的JavaScript控制台是“通用的”，所以服务功能在electronic、NWJS、NodeJS以及本地Windows应用程序中都是免费的。请参考我之前关于这方面的文章。</p><p id="cdd6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最终，这项功能会带来一些成本，因为我必须提供服务器来部署它。如果你喜欢这个功能或者我的任何一篇文章，请考虑给汉普斯特夫妇捐一点钱:-)</p><div class="jr js fm fo jt ju"><a href="https://www.paypal.me/michaelparsons" rel="noopener  ugc nofollow" target="_blank"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">用贝宝支付迈克尔·R·帕森斯。我</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">去paypal.me/michaelparsons输入金额。既然是PayPal，那就简单又安全。没有PayPal…</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">www.paypal.me</p></div></div><div class="kd l"><div class="ni l kf kg kh kd ki kj ju"/></div></div></a></div><p id="853b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">谢谢，请推荐并分享这篇文章和我的其他文章:</p><div class="jr js fm fo jt ju"><a rel="noopener follow" target="_blank" href="/@mikeptweet"><div class="jv ab ej"><div class="jw ab jx cl cj jy"><h2 class="bd hv fv z el jz eo ep ka er et ht dt translated">迈克·帕森斯-中等</h2><div class="kb l"><h3 class="bd b fv z el jz eo ep ka er et ek translated">并可选择将其导出到剪贴板或Excel、JSON、HTML、Tab或逗号分隔的文件格式！在较早的时候…</h3></div><div class="kc l"><p class="bd b gc z el jz eo ep ka er et ek translated">medium.com</p></div></div><div class="kd l"><div class="nj l kf kg kh kd ki kj ju"/></div></div></a></div><div class="kr ks kt ku fq ab cb"><figure class="nk kv nl nm nn no np paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="nk kv nl nm nn no np paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="nk kv nl nm nn no np paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="nq nr ns"><p id="f922" class="ir is jq it b iu iv iw ix iy iz ja jb nt jd je jf nu jh ji jj nv jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is jq it b iu iv iw ix iy iz ja jb nt jd je jf nu jh ji jj nv jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="fe ff nw"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="kr ks kt ku fq kv"><div class="bz el l di"><div class="nx ny l"/></div></figure></div></div>    
</body>
</html>