<html>
<head>
<title>How (and why) to use D3 with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何(以及为什么)在React中使用D3</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-and-why-to-use-d3-with-react-d239eb1ea274?source=collection_archive---------0-----------------------#2017-05-01">https://medium.com/hackernoon/how-and-why-to-use-d3-with-react-d239eb1ea274?source=collection_archive---------0-----------------------#2017-05-01</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="4c6e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您计划构建一个包含多个简单数据可视化的React应用程序，您可能会希望选择一种方法:</p><ul class=""><li id="5abd" class="jp jq hu it b iu iv iy iz jc jr jg js jk jt jo ju jv jw jx dt translated">有良好的文档记录，经过验证，并且正在积极开发中</li><li id="2dc9" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated">有一个相对富于表现力的界面——这意味着它可以让你用足够的冗长来编写自定义的数据图形，以表达你想要的东西</li><li id="cd1d" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated">与React配合得很好——也就是说，它不需要直接改变DOM</li><li id="39fe" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated">给你足够的自由来定制它，以适应你的应用程序的需求和视觉风格</li></ul><p id="302d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">根据上述标准，这些是我认为的最佳选项(排名不分先后):</p><ul class=""><li id="a767" class="jp jq hu it b iu iv iy iz jc jr jg js jk jt jo ju jv jw jx dt translated"><a class="ae kd" href="https://github.com/d3/d3" rel="noopener ugc nofollow" target="_blank">https://github.com/d3/d3</a></li><li id="5d7b" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated">https://github.com/vega/vega<a class="ae kd" href="https://github.com/vega/vega" rel="noopener ugc nofollow" target="_blank"/></li><li id="b4d1" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated">【https://github.com/FormidableLabs/victory T4】</li><li id="6c65" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><a class="ae kd" href="https://github.com/recharts/recharts" rel="noopener ugc nofollow" target="_blank">https://github.com/recharts/recharts</a></li></ul><blockquote class="ke kf kg"><p id="7fba" class="ir is kh it b iu iv iw ix iy iz ja jb ki jd je jf kj jh ji jj kk jl jm jn jo hn dt translated">注意:有一些项目，像<a class="ae kd" href="https://github.com/reactjs/react-chartjs" rel="noopener ugc nofollow" target="_blank"> react-chartjs </a>、<a class="ae kd" href="https://github.com/codesuki/react-d3-components" rel="noopener ugc nofollow" target="_blank"> react-d3-components </a>，以及其他一些似乎没有被积极维护的项目，提供了高级react图表组件。如果这些适合你的应用程序，那么你当然可以使用它们！</p></blockquote><h1 id="a8fc" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">比较选项</h1><h2 id="5085" class="lj km hu bd kn lk ll lm kr ln lo lp kv jc lq lr kz jg ls lt ld jk lu lv lh lw dt translated">D3</h2><p id="bc8c" class="pw-post-body-paragraph ir is hu it b iu lx iw ix iy ly ja jb jc lz je jf jg ma ji jj jk mb jm jn jo hn dt translated">首先，我认为<a class="ae kd" href="https://hackernoon.com/tagged/d3" rel="noopener ugc nofollow" target="_blank"> D3 </a>是web上数据可视化的标准库。这是Github上“数据可视化”最受欢迎的结果，领先50k颗星。要了解它的能力，只需查看一下迈克·博斯托克的bl.ocks。</p><figure class="md me mf mg fq mh fe ff paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="fe ff mc"><img src="../Images/aa313f18763b26a5d065a9fef5a875a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*widuiFZ2hOAcJfGdYDCaXg.png"/></div></div><figcaption class="mo mp fg fe ff mq mr bd b be z ek"><a class="ae kd" href="https://bl.ocks.org/mbostock" rel="noopener ugc nofollow" target="_blank">https://bl.ocks.org/mbostock</a></figcaption></figure><h2 id="1528" class="lj km hu bd kn lk ll lm kr ln lo lp kv jc lq lr kz jg ls lt ld jk lu lv lh lw dt translated">低湿平原</h2><p id="01bd" class="pw-post-body-paragraph ir is hu it b iu lx iw ix iy ly ja jb jc lz je jf jg ma ji jj jk mb jm jn jo hn dt translated">看起来Vega和D3的表现力不相上下(毕竟，它是D3的包装器)。Vega最棒的一点是，它让您可以用声明性语法编写很多可以在D3中编写的内容。</p><figure class="md me mf mg fq mh fe ff paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="fe ff ms"><img src="../Images/dbb591bde37d14e2893bbc09abfe1e30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DI1trGqY8zTCZKK94eVU9Q.png"/></div></div><figcaption class="mo mp fg fe ff mq mr bd b be z ek"><a class="ae kd" href="https://vega.github.io/vega/examples/" rel="noopener ugc nofollow" target="_blank">Some Vega examples</a></figcaption></figure><p id="ba53" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">需要注意的是，使用Vega的传统方式似乎是让它改变DOM。这类似于使用D3的约定，但是很快我们将看到如何使用D3的库来缩放数据，将其映射到SVG路径数据，然后返回一个元素树，就像在任何普通的<a class="ae kd" href="https://hackernoon.com/tagged/react" rel="noopener ugc nofollow" target="_blank"> React </a>组件中一样。我不知道你和维嘉会怎么做。</p><h2 id="ae99" class="lj km hu bd kn lk ll lm kr ln lo lp kv jc lq lr kz jg ls lt ld jk lu lv lh lw dt translated">胜利和欢呼</h2><p id="db91" class="pw-post-body-paragraph ir is hu it b iu lx iw ix iy ly ja jb jc lz je jf jg ma ji jj jk mb jm jn jo hn dt translated">Victory和Recharts都公开了高级图表组件，以及一些低级图表“部件”，如轴、工具提示等。虽然这些肯定与React配合得很好，但为了定制和表达，我更喜欢D3的<a class="ae kd" rel="noopener" href="/@mbostock/introducing-d3-scale-61980c51545f#---451-526">“图形理论”</a>方法。我认为，当你控制缩放数据和渲染时，相对于受更高级组件接口的支配，你可以做更多的事情。</p><p id="d98f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">可能我只是受到了大量使用D3制作的令人惊叹的图形的影响，使用Victory和Recharts也有可能制作出同样出色的图形。然而不幸的是，如果我被困住了，我不认为我会有像使用D3那样多的资源来获得帮助。</p><h1 id="ee7a" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">使用D3的库做所有的事情<strong class="ak"> <em class="mt">除了</em> </strong>渲染DOM节点</h1><p id="ad15" class="pw-post-body-paragraph ir is hu it b iu lx iw ix iy ly ja jb jc lz je jf jg ma ji jj jk mb jm jn jo hn dt translated">D3由30个库组成。我浏览了每一个的源代码，找出哪些在某种程度上依赖于DOM，哪些完全独立于DOM。</p><p id="06c9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">大多数(22/30)的D3 APIs没有任何与DOM直接联系的函数！</p><ul class=""><li id="3c8f" class="jp jq hu it b iu iv iy iz jc jr jg js jk jt jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-array" rel="noopener ugc nofollow" target="_blank">d3-array</a></code></li><li id="b09b" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-chord" rel="noopener ugc nofollow" target="_blank">d3-chord</a></code></li><li id="32f7" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-collection" rel="noopener ugc nofollow" target="_blank">d3-collection</a></code></li><li id="37ec" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-color" rel="noopener ugc nofollow" target="_blank">d3-color</a></code></li><li id="ea2f" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-dispatch" rel="noopener ugc nofollow" target="_blank">d3-dispatch</a></code></li><li id="3618" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-dsv" rel="noopener ugc nofollow" target="_blank">d3-dsv</a></code></li><li id="7d51" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-ease" rel="noopener ugc nofollow" target="_blank">d3-ease</a></code></li><li id="e1c9" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-force" rel="noopener ugc nofollow" target="_blank">d3-force</a></code></li><li id="5b40" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-format" rel="noopener ugc nofollow" target="_blank">d3-format</a></code></li><li id="a28f" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-hierarchy" rel="noopener ugc nofollow" target="_blank">d3-hierarchy</a></code></li><li id="8eaa" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-interpolate" rel="noopener ugc nofollow" target="_blank">d3-interpolate</a></code></li><li id="a9c1" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-path" rel="noopener ugc nofollow" target="_blank">d3-path</a></code></li><li id="759f" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-polygon" rel="noopener ugc nofollow" target="_blank">d3-polygon</a></code></li><li id="2d65" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-quadtree" rel="noopener ugc nofollow" target="_blank">d3-quadtree</a></code></li><li id="46f3" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-queue" rel="noopener ugc nofollow" target="_blank">d3-queue</a></code></li><li id="9667" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-random" rel="noopener ugc nofollow" target="_blank">d3-random</a></code></li><li id="dbb6" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-request" rel="noopener ugc nofollow" target="_blank">d3-request</a></code></li><li id="d9df" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-scale" rel="noopener ugc nofollow" target="_blank">d3-scale</a></code></li><li id="825c" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-time" rel="noopener ugc nofollow" target="_blank">d3-time</a></code></li><li id="9fc4" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-time-format" rel="noopener ugc nofollow" target="_blank">d3-time-format</a></code></li><li id="ac29" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-timer" rel="noopener ugc nofollow" target="_blank">d3-timer</a></code></li><li id="be91" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-voronoi" rel="noopener ugc nofollow" target="_blank">d3-voronoi</a></code></li></ul><p id="23bf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">上述API可用于将数据转换成可映射到React元素的形式，这些元素将用于构建图形。</p><p id="8e97" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在我们举例之前，我们将列出<em class="kh">访问或改变DOM的(8/30)D3 API。这些<em class="kh">中的一些</em>可以与React一起使用，但有一些限制(例如，绕过一两个函数，或者小心地使用refs来选择节点，并允许D3对它们进行变异)。</em></p><ul class=""><li id="6f5b" class="jp jq hu it b iu iv iy iz jc jr jg js jk jt jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-axis" rel="noopener ugc nofollow" target="_blank">d3-axis</a></code></li><li id="0375" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-brush" rel="noopener ugc nofollow" target="_blank">d3-brush</a></code></li><li id="ad29" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-drag" rel="noopener ugc nofollow" target="_blank">d3-drag</a></code></li><li id="bf31" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-geo" rel="noopener ugc nofollow" target="_blank">d3-geo</a></code></li><li id="b5f4" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-selection" rel="noopener ugc nofollow" target="_blank">d3-selection</a></code></li><li id="2811" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-shape" rel="noopener ugc nofollow" target="_blank">d3-shape</a></code></li><li id="9c4f" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-transition" rel="noopener ugc nofollow" target="_blank">d3-transition</a></code></li><li id="43a3" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-zoom" rel="noopener ugc nofollow" target="_blank">d3-zoom</a></code></li></ul><h1 id="a270" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">示例:编写复合火花线/散点图组件</h1><p id="9c19" class="pw-post-body-paragraph ir is hu it b iu lx iw ix iy ly ja jb jc lz je jf jg ma ji jj jk mb jm jn jo hn dt translated">例如，让我们做一个简单的时间序列可视化，它是一个带有笛卡尔轴和一些样式的火花线和散点图的组合。</p><figure class="md me mf mg fq mh fe ff paragraph-image"><div class="fe ff my"><img src="../Images/71cfaecf6c4f3add9a2b8094b18f9618.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/format:webp/1*XM-UFO2X9IXosUA46glklg.png"/></div><figcaption class="mo mp fg fe ff mq mr bd b be z ek">Let’s make this with React and D3!</figcaption></figure><blockquote class="ke kf kg"><p id="3c5e" class="ir is kh it b iu iv iw ix iy iz ja jb ki jd je jf kj jh ji jj kk jl jm jn jo hn dt translated">以下是github回购协议，以防你想直接进入来源:<a class="ae kd" href="https://github.com/AnalyticalFlavorSystems/d3ReactExample" rel="noopener ugc nofollow" target="_blank">https://github.com/AnalyticalFlavorSystems/d3ReactExample</a>。</p></blockquote><p id="8afb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我为Analytical Flavor Systems的一个应用程序制作的这个示例图表绘制了过去14天产品的感知质量(0-7)。数据如下:</p><figure class="md me mf mg fq mh"><div class="bz el l di"><div class="mz na l"/></div></figure><h2 id="8e53" class="lj km hu bd kn lk ll lm kr ln lo lp kv jc lq lr kz jg ls lt ld jk lu lv lh lw dt translated">设计组件接口</h2><p id="9d71" class="pw-post-body-paragraph ir is hu it b iu lx iw ix iy ly ja jb jc lz je jf jg ma ji jj jk mb jm jn jo hn dt translated">我们的<code class="eh mu mv mw mx b">TimeSeriesSparkLineScatterPlot</code>组件应该是可重用的，所以我们应该把它设计成接受任何类型对象的数组。为了支持这一点，我们将给予它道具<code class="eh mu mv mw mx b">data</code>、<code class="eh mu mv mw mx b">selectX</code>和<code class="eh mu mv mw mx b">selectY</code>。既然它渲染了一个SVG，我们也应该给它维度属性<code class="eh mu mv mw mx b">width</code>和<code class="eh mu mv mw mx b">height</code>。它的界面现在看起来像这样:</p><figure class="md me mf mg fq mh"><div class="bz el l di"><div class="mz na l"/></div></figure><h2 id="312e" class="lj km hu bd kn lk ll lm kr ln lo lp kv jc lq lr kz jg ls lt ld jk lu lv lh lw dt translated">编写组件</h2><p id="5e51" class="pw-post-body-paragraph ir is hu it b iu lx iw ix iy ly ja jb jc lz je jf jg ma ji jj jk mb jm jn jo hn dt translated">让我们开始吧…我们将从编写一个组件开始，该组件从我们提出的接口中获取道具。</p><figure class="md me mf mg fq mh"><div class="bz el l di"><div class="mz na l"/></div></figure><p id="0d87" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">看起来不错！现在让我们为火花线生成一个SVG路径，然后为火花线渲染一个组和路径。</p><figure class="md me mf mg fq mh"><div class="bz el l di"><div class="mz na l"/></div></figure><figure class="md me mf mg fq mh fe ff paragraph-image"><div class="fe ff nb"><img src="../Images/72dd62faa0a39d3d11f6ab1f5a3fb72e.png" data-original-src="https://miro.medium.com/v2/resize:fit:410/format:webp/1*x-6TBU5leaRXN902H_0Mnw.png"/></div><figcaption class="mo mp fg fe ff mq mr bd b be z ek">That’s a start :)</figcaption></figure><p id="68c8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">那有点丑，但是看起来很准。我们会等到最后再添加样式。让我们添加一些轴。现在，记住<code class="eh mu mv mw mx b">d3-axis</code>在“确实改变了DOM”列表中…让我们看看如何在我们的组件中使用它:</p><figure class="md me mf mg fq mh"><div class="bz el l di"><div class="mz na l"/></div></figure><blockquote class="ke kf kg"><p id="017e" class="ir is kh it b iu iv iw ix iy iz ja jb ki jd je jf kj jh ji jj kk jl jm jn jo hn dt translated"><strong class="it hv">警告</strong>:如果我们的数据更新了，我们的轴不会被重新渲染，因为我们使用D3在它们挂载时直接渲染到它们的组节点中。一个解决方法可能是<strong class="it hv">为每个轴组添加一个</strong> <code class="eh mu mv mw mx b"><strong class="it hv">key</strong></code> <strong class="it hv">，当数据更新时</strong>该轴组发生变化。这将导致它们的节点被卸载，新的节点被装载，然后轴将被再次渲染。也许这是个坏主意...我将感谢反馈！</p></blockquote><figure class="md me mf mg fq mh fe ff paragraph-image"><div class="fe ff nc"><img src="../Images/335a31fcc689ef608d14a8cdcd53e62d.png" data-original-src="https://miro.medium.com/v2/resize:fit:412/format:webp/1*MiLCMmX78xHL7BYZ7Jz28A.png"/></div><figcaption class="mo mp fg fe ff mq mr bd b be z ek">Hmm….</figcaption></figure><p id="c1f9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">好的，看起来我们的y轴正在渲染，但是它的内容超出了我们的SVG的范围。还有，我们的x轴在上面？！</p><p id="41a3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/d3/d3-axis#api-reference" rel="noopener ugc nofollow" target="_blank">d3-axis</a></code> <a class="ae kd" href="https://github.com/d3/d3-axis#api-reference" rel="noopener ugc nofollow" target="_blank">自述</a>中说<em class="kh">“不管方向如何，轴总是在原点渲染。”</em>D3惯例是在内容周围手动添加一个边距，并将y轴向下平移到底部。</p><p id="cfe2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">添加页边空白并没有真正有趣到可以浏览的程度。我编写了一个组件来处理在SVG内容周围添加空白，称为<code class="eh mu mv mw mx b"><a class="ae kd" href="https://github.com/AnalyticalFlavorSystems/d3ReactExample/blob/master/src/components/SVGWithMargin/index.js" rel="noopener ugc nofollow" target="_blank">SVGWithMargin</a></code>。</p><p id="7fca" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">太好了！让我们在内容周围添加一个边距，并将x轴移动到内容的底部:</p><figure class="md me mf mg fq mh"><div class="bz el l di"><div class="mz na l"/></div></figure><figure class="md me mf mg fq mh fe ff paragraph-image"><div class="fe ff nd"><img src="../Images/2cc9add6dd1f4c92358edd373b6c0d3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:446/format:webp/1*w-WojXBCsRYkekEb714B3Q.png"/></div><figcaption class="mo mp fg fe ff mq mr bd b be z ek">Much better.</figcaption></figure><p id="7de7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">太棒了，现在让我们添加散点图。我们将获得数据的缩放点，并在每个点上绘制一个圆:</p><figure class="md me mf mg fq mh"><div class="bz el l di"><div class="mz na l"/></div></figure><figure class="md me mf mg fq mh fe ff paragraph-image"><div class="fe ff ne"><img src="../Images/f37218f57ea8b4494905c23e48bc0bf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:454/format:webp/1*mlavBqC2NxfueIehL1jOEQ.png"/></div><figcaption class="mo mp fg fe ff mq mr bd b be z ek">Nice!</figcaption></figure><p id="68d0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就是这样！现在，如果我们添加一些类名(看一看<a class="ae kd" href="https://github.com/AnalyticalFlavorSystems/d3ReactExample/blob/master/src/components/TimeSeriesSparkLineScatterPlot/index.js" rel="noopener ugc nofollow" target="_blank">完成的组件文件</a>)以及一些CSS:</p><figure class="md me mf mg fq mh"><div class="bz el l di"><div class="mz na l"/></div></figure><p id="0e32" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们得到这个:</p><figure class="md me mf mg fq mh fe ff paragraph-image"><div class="fe ff my"><img src="../Images/71cfaecf6c4f3add9a2b8094b18f9618.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/format:webp/1*XM-UFO2X9IXosUA46glklg.png"/></div><figcaption class="mo mp fg fe ff mq mr bd b be z ek">That was easy!</figcaption></figure><h1 id="c52b" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">结论</h1><p id="54a2" class="pw-post-body-paragraph ir is hu it b iu lx iw ix iy ly ja jb jc lz je jf jg ma ji jj jk mb jm jn jo hn dt translated">大多数D3库不依赖于DOM。这意味着你可以把它们和React、React Native或者其他完全不同的东西一起使用。</p><p id="8d8e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我希望这个条目是令人愉快的和信息性的。如果这种事情是你的拿手好戏，我们正在<a class="ae kd" href="https://www.gastrograph.com/" rel="noopener ugc nofollow" target="_blank">分析风味系统</a>发展我们的团队，我们很乐意进行对话；)</p><p id="cd50" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们仍然处于探索D3和React的可能性的早期阶段。我非常想听听其他在React中进行数据可视化的人的经历——请随意发表评论，链接到你写的相关帖子，或者在Twitter上ping我<a class="ae kd" href="https://twitter.com/danscan" rel="noopener ugc nofollow" target="_blank">@ dans can</a>。</p><h1 id="89a8" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">灵感</h1><p id="d317" class="pw-post-body-paragraph ir is hu it b iu lx iw ix iy ly ja jb jc lz je jf jg ma ji jj jk mb jm jn jo hn dt translated">感谢<a class="ae kd" href="https://twitter.com/dino_joel" rel="noopener ugc nofollow" target="_blank"> Joel Burget </a>在他的<a class="ae kd" href="https://github.com/joelburget/d4" rel="noopener ugc nofollow" target="_blank"> <em class="kh"> D4 </em>示例报告</a>中展示了将D3的一些API与React一起使用的可能性。</p><div class="md me mf mg fq ab cb"><figure class="nf mh ng nh ni nj nk paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="nf mh ng nh ni nj nk paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="nf mh ng nh ni nj nk paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="ke kf kg"><p id="f922" class="ir is kh it b iu iv iw ix iy iz ja jb ki jd je jf kj jh ji jj kk jl jm jn jo hn dt translated"><a class="ae kd" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kd" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kd" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae kd" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is kh it b iu iv iw ix iy iz ja jb ki jd je jf kj jh ji jj kk jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kd" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kd" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="md me mf mg fq mh fe ff paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="fe ff nl"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="md me mf mg fq mh"><div class="bz el l di"><div class="nm na l"/></div></figure></div></div>    
</body>
</html>