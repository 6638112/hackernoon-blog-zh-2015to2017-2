# 无服务器比 FaaS 还大

> 原文：<https://medium.com/hackernoon/serverless-is-bigger-than-faas-a5fe0f088981>

![](img/4dc759dd20db02370e7fa8191444a836.png)

开发人员社区对无服务器模式越来越感兴趣，这种想法让开发人员无需配置或管理服务器即可交付工作负载。

在其核心，无服务器架构依赖于编制一个充满活力的生态系统的全面管理的服务。随着越来越多的此类后端服务(即后端即服务(BaaS))得到所有关键云基础设施(IaaS)提供商的支持，我认为可以说 2018 年将是无服务器年。

令人兴奋的是，对于什么构成了无服务器架构，也存在困惑。传统观点——由云提供商的说辞推动——认为只有功能即服务(FaaS)实现代表无服务器架构。

我写这篇文章是为了挑战其中的一些观点，希望提出一个案例，将这个定义从功能级抽象扩展到应用级抽象，从而被认为是无服务器的。

## 无服务器 1.0

在软件开发过程中没有服务器概念的想法——或者无服务器——并不新鲜。Heroku 可能是第一个在 2008 年左右引入这一概念的人，这一概念被开发人员社区广泛采用(可以说 Google App Engine 是第一个，但将在另一篇文章中讨论)。

Heroku 抱着开发者第一的心态，承诺了三件主要的事情:

1.  与 IaaS 提供商提供的虚拟机相比，通过将工作负载隔离在更小的容器映像中，成本更低，最适合运行大多数应用程序工作负载
2.  一套全面管理的后端，可从具有联合身份和整合计费的市场中访问
3.  使用出色的命令行工具开发、调试和交付工作负载的出色开发人员体验

对于用 Heroku 支持的语言/框架编写的应用程序，开发人员可以遵循一个非常熟悉的基于 git 的工作流程来部署他们的代码。Heroku 将无缝处理工作负载的可用性和扩展。12 因素方法的声明格式承诺最大化迭代速度，并提供与底层操作系统的清晰契约，提供最大的可移植性

由于容器的占用空间比虚拟机小得多，它们允许 Heroku 在不同配置的不同机器上高效地调度工作负载，并优化性价比。

为了实现这一点，Heroku 构建了容器运行时和编排引擎，它们运行在对用户关闭的 Amazon Web Services 之上。

然而，12 因素设计所承诺的简单性缺乏部署具有复杂需求的工作负载的灵活性。您不能部署任何非 12 因素的工作负载，也不能让您的工作负载在私有网络中运行。市场主要由外部供应商组成，很少或根本不关注应用程序和后端之间的延迟，这往往会导致性能下降。

封闭的方法、缺乏灵活性和降级的性能使 Heroku 无法被具有复杂需求的企业所采用，并驱使它继续作为“业余爱好”开发人员非常喜爱的平台。

这一市场缺口催生了平台，即所谓的平台即服务(PaaS)，如 cloud foundry(EMC 和 VMWare 的一个分拆)、Makara (RedHat OpenShift)和 DotCloud(后更名为 Docker)

通过采用开放的方法，这些平台承诺了 Heroku 风格工作流的易用性，同时提供了灵活性或使用您自己的硬件，重点是简单性

像 Heroku 一样，这些平台也严重依赖 Linux 容器——这是一个相对较老但当时不为人知的概念——作为交付工作负载的打包和隔离机制。Linux 提供的本地容器运行时——称为 LXC——使用起来很难，也不舒服；仅限于像 Google 这样的公司的高级团队和构建基础设施工具的团队采用。

DotCloud 是一家相对不知名的公司，其产品无法与竞争对手区分开来——面临灭绝的可能性——开源了他们开发的一款工具，以简化对 LXC 的使用，名为“Docker”

Docker 简单性的关键是图像格式——在清单文件中声明的图像内容然后用于构建图像，该图像可以在任何地方构建，并通过存储在中央存储库中与其他人共享。这种一次构建，随处运行的方法让位于开发人员解决特别棘手的开发到生产的对等问题。

开发人员很快就接受了 Docker，这导致了对云原生生态系统的寒武纪展示。虽然 Docker 为单个工作负载提供了映像格式和运行时，但 Kubernetes 等工具的诞生是为了协调各种工作负载，并以容错方式对它们进行调度。

Heroku 的无服务器承诺——应用程序运行时抽象——为蓬勃发展的生态系统铺平了道路，改变了我们设计分布式工作负载交付的基本方式

## 无服务器 2.0

随着越来越多的工作负载转移到云，IaaS 提供商很快就明白了提供完全托管的后端(如数据库、缓存、负载平衡器等)的价值，这是工作负载所需的支持基础架构

对于 Amazon Web Services (AWS)这样的提供商，从简单的托管对象存储产品开始，扩展到 70 多种服务(截至本文撰写之时)；对于许多提供商来说，一种编排这些丰富的后端的方法是显而易见的。通过利用编排和容器化浪潮，重新思考抽象层次成为可能。

这催生了一个新的抽象层次——功能即服务。AWS Lambda 是一个提供功能抽象的产品，同时承诺更快的迭代速度、零管理和更细粒度的定价模型。

这里的区别在于，开发关注的是单个功能或模块，而不是像应用程序运行时抽象中那样具有大表面积的服务。

应用程序级抽象和功能级抽象之间的另一个基本区别是在哪里以及如何定义工作负载的调用机制。在应用程序抽象中，调用机制在应用程序代码本身中描述，并为开发人员选择框架提供了灵活性。对于功能性调用，调用在提供者设计的清单文件中定义。在 AWS Lamda 的情况下，通过将消息放入受管队列(SQS)的异步调用，以及通过调用受管路由器上的预定义端点(API 网关)的基于 web 的调用

本质上，FaaS 是由提供商创建和管理的应用程序框架。这使得 FaaS 对那些不一定在乎供应商锁定，并且可以灵活地采用供应商清单来换取一点想法的开发人员很有吸引力。

## 结论

现在很明显，应用程序和功能运行时抽象提供了无服务器的承诺——在未来，开发人员可以专注于编写向用户提供功能的代码，而不是处理交付代码的复杂性。