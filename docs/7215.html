<html>
<head>
<title>hmny — Building My First Music App with Django (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">hmny——用Django构建我的第一个音乐应用程序(第2部分)</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/hmny-building-my-first-music-app-with-django-part-2-29f7c88b8335?source=collection_archive---------9-----------------------#2017-10-20">https://medium.com/hackernoon/hmny-building-my-first-music-app-with-django-part-2-29f7c88b8335?source=collection_archive---------9-----------------------#2017-10-20</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="5f30" class="pw-post-body-paragraph is it hu iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp hn dt translated">在我的第一篇博文中，我介绍了<em class="jr"> hmny的概念。</em>我对<a class="ae jq" href="https://chipymentor.org/" rel="noopener ugc nofollow" target="_blank"> ChiPy导师计划</a>的主要目标是创建一个功能原型<em class="jr"> </em>，它将允许用户创建包含来自Soundcloud、Spotify或Youtube的曲目的播放列表，并在<em class="jr"> hmny的</em>自己的定制音频播放器上播放它们。</p><figure class="jt ju jv jw fq jx fe ff paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="fe ff js"><img src="../Images/601023c0f83bd1b6e8e198804007ffd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:394/format:webp/1*IDcAelFDcf88W87xvttapg.png"/></div></div></figure><p id="836c" class="pw-post-body-paragraph is it hu iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp hn dt translated">在开始我的项目之前，我听说过用于软件/应用程序开发的模型-视图-控制器“MVC”架构，但是我完全不知道这实际上意味着什么。<em class="jr"> Django </em>是我第一次接触这项技术，慢慢地，但肯定地，我开始了解这种开发架构所提供的力量和能力。</p><p id="01d9" class="pw-post-body-paragraph is it hu iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp hn dt translated">经过一些初始设置后，我开始浏览Django官方网站上的教程和文档。我最终完成了他们的7部分教程，但对我来说这不是一个简单的过程，我想要一些东西来进一步分解它。我决定在网上搜索一下，找到了Djangogirls.org，这已经被证明是一个很好的学习资源。在了解了模型、视图、url dispatcher和模板如何协同工作以创建一个正常运行的web应用程序之后，是时候定义hmny自己的定制模型了。</p><h1 id="5123" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated"><strong class="ak">型号</strong></h1><p id="b538" class="pw-post-body-paragraph is it hu iu b iv lc ix iy iz ld jb jc jd le jf jg jh lf jj jk jl lg jn jo jp hn dt translated">简单是现在的关键，所以我决定从三个类开始:<strong class="iu hv"> HmnyUser </strong>，<strong class="iu hv"> Playlist </strong>和<strong class="iu hv"> Track </strong>。</p><figure class="jt ju jv jw fq jx fe ff paragraph-image"><div class="fe ff lh"><img src="../Images/ec58f391bd31d78e0243eea85d348076.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*AF120wsGbKLIYEOuOt-tZw.png"/></div><figcaption class="li lj fg fe ff lk ll bd b be z ek">The HmnyUser object, inherits from <em class="ir">Django’s </em>built in User class, imported from django.contrib.auth.models</figcaption></figure><p id="72da" class="pw-post-body-paragraph is it hu iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp hn dt translated">我知道HmnyUser的每个实例应该可以有任意数量的播放列表，并且这些播放列表将包含曲目，但是我很难想象这些模型之间的关系。我的导师带领我神奇地发现了<em class="jr">实体关系图</em> (ERD)。</p><p id="1ef7" class="pw-post-body-paragraph is it hu iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp hn dt translated">我了解到<em class="jr">基数</em>和<em class="jr">普通度</em>分别是一个实体中的实例与另一个实体中的实例相关的最大和最小次数。这绝对是我的第一个“发现了！”因为它让我能够可视化模型关系，并更好地理解<em class="jr"> hmny </em>应用程序的主数据库结构。</p><figure class="jt ju jv jw fq jx fe ff paragraph-image"><div class="fe ff lh"><img src="../Images/f4012e5a96e210ac40b20e7d656258b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*0hgIqLXHg4F3H92szSq4yQ.png"/></div><figcaption class="li lj fg fe ff lk ll bd b be z ek">A HmnyUser should have zero to many playlists, and each of these <strong class="bd lm">Playlist </strong>objects can have zero to many related <strong class="bd lm">Track </strong>objects.</figcaption></figure><h1 id="74a1" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated"><strong class="ak">观点</strong></h1><p id="186e" class="pw-post-body-paragraph is it hu iu b iv lc ix iy iz ld jb jc jd le jf jg jh lf jj jk jl lg jn jo jp hn dt translated">在定义了模型之后，是时候开始处理视图函数了。视图是一个python函数，它接收web请求，并返回web响应。至此，我已经在登录视图上取得了最大的进步，并且成功地验证了我的测试用户“Wendall”。在Wendall(或任何用户)登录后，他被带到播放列表视图，这将最终成为Django站点的主要部分。到目前为止，我已经弄明白了如何使用<em class="jr"> Django内置的</em>模板语言来显示用户的<strong class="iu hv">播放列表</strong>对象，播放列表<strong class="iu hv">轨道</strong>对象嵌套在里面。在指导结束时，<em class="jr"> hmny </em>应该有以下视图/页面:</p><figure class="jt ju jv jw fq jx fe ff paragraph-image"><div class="fe ff ln"><img src="../Images/644667efae8a29d92f9ad6aaec2749ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*52AhnzM_ZqVLQ01EEUdZKg.png"/></div><figcaption class="li lj fg fe ff lk ll bd b be z ek">Login view in action</figcaption></figure><ul class=""><li id="58bf" class="lo lp hu iu b iv iw iz ja jd lq jh lr jl ls jp lt lu lv lw dt translated"><em class="jr"> Welcome </em> —提供应用程序主要功能的描述，并指导用户创建帐户或登录其现有帐户。</li><li id="b588" class="lo lp hu iu b iv lx iz ly jd lz jh ma jl mb jp lt lu lv lw dt translated"><em class="jr">登录</em> —你很可能已经知道这个的目的。不要与肯尼·罗根斯混淆。</li><li id="1f76" class="lo lp hu iu b iv lx iz ly jd lz jh ma jl mb jp lt lu lv lw dt translated"><em class="jr">播放列表/音频播放器</em> —允许用户收听他们的曲目。</li><li id="c13b" class="lo lp hu iu b iv lx iz ly jd lz jh ma jl mb jp lt lu lv lw dt translated"><em class="jr">编辑/创建播放列表</em> —你猜对了。这允许用户编辑/添加歌曲到他们创建的播放列表，或者创建新的播放列表。</li><li id="4803" class="lo lp hu iu b iv lx iz ly jd lz jh ma jl mb jp lt lu lv lw dt translated"><em class="jr">帐户/档案设置</em> —允许用户更改其档案设置，并将他们的档案连接到Youtube和Spotify服务。</li></ul><h1 id="adaf" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">挣扎/障碍</h1><p id="b551" class="pw-post-body-paragraph is it hu iu b iv lc ix iy iz ld jb jc jd le jf jg jh lf jj jk jl lg jn jo jp hn dt translated">目前，Soundcloud不再为他们的API服务提供认证密钥，所以我需要使用网络抓取库为用户添加到播放列表的每个曲目提取嵌入代码，这很可能是一个美丽的汤。网络抓取对我来说是一个全新的概念，所以这将增加Django开发之外的许多工作。</p><figure class="jt ju jv jw fq jx fe ff paragraph-image"><div class="fe ff mc"><img src="../Images/83a34040f7ef4044f09e22625769818a.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*qM0fUFSWK-amprmE3_AADA.png"/></div></figure><h1 id="4489" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">下一步是什么？</h1><ul class=""><li id="5785" class="lo lp hu iu b iv lc iz ld jd md jh me jl mf jp lt lu lv lw dt translated">继续开发播放列表视图，它将显示用户创建的播放列表，以及包含播放列表相关曲目的嵌入式音频播放器。</li><li id="e39a" class="lo lp hu iu b iv lx iz ly jd lz jh ma jl mb jp lt lu lv lw dt translated">将Youtube和Spotify API连接到hmny应用程序。</li><li id="7fa6" class="lo lp hu iu b iv lx iz ly jd lz jh ma jl mb jp lt lu lv lw dt translated">使用beautiful soup找到并拉出一个轨道的Souncloud widget播放器的嵌入链接。这是使用Soundcloud的API的替代品。(不再向他们的API提供认证密钥)。</li><li id="35c1" class="lo lp hu iu b iv lx iz ly jd lz jh ma jl mb jp lt lu lv lw dt translated">创建用户帐户/设置视图，该视图将管理用户的个人信息和对第三方API的授权</li><li id="afd0" class="lo lp hu iu b iv lx iz ly jd lz jh ma jl mb jp lt lu lv lw dt translated">设计hmny的音频播放器。像<a class="ae jq" href="https://webdesign.tutsplus.com/tutorials/create-a-customized-html5-audio-player--webdesign-7081" rel="noopener ugc nofollow" target="_blank">这个</a>。</li><li id="c590" class="lo lp hu iu b iv lx iz ly jd lz jh ma jl mb jp lt lu lv lw dt translated">设计将在网页的每个视图上使用的主要布局/模板。为此，我需要提高我的HTML和CSS技能。对于一些UI设计元素，我可能需要求助于JavaScript，但这可能已经超出了导师的范围。我的主要目标是有一个工作原型，它不需要看起来很漂亮，所以这可能是未来的努力。</li></ul><h1 id="ba92" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated"><strong class="ak">敬请期待</strong></h1><p id="a91b" class="pw-post-body-paragraph is it hu iu b iv lc ix iy iz ld jb jc jd le jf jg jh lf jj jk jl lg jn jo jp hn dt translated">在我的下一篇也是最后一篇博文中，我应该有了一个<em class="jr"> hmny </em>应用的工作原型。(交叉手指)由于这是我创建的第一个web应用程序，我预计功能一开始会受到限制，但会讨论我对整个项目的想法，并提出未来改进整体功能和用户界面的计划。</p></div></div>    
</body>
</html>