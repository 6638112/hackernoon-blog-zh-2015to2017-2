<html>
<head>
<title>Using Ractive.js and HTML5 Fetch API to consume REST API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Ractive.js和HTML5 Fetch API消费REST API</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/using-ractive-js-and-html5-fetch-api-to-consume-rest-api-f03c47904202?source=collection_archive---------1-----------------------#2015-08-11">https://medium.com/hackernoon/using-ractive-js-and-html5-fetch-api-to-consume-rest-api-f03c47904202?source=collection_archive---------1-----------------------#2015-08-11</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/76eb63c10f9e8e6e6266d889d75438cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Rzyj2z4kdAy53qHP1S8bg.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">credit: <a class="ae jg" href="https://burst.shopify.com/photos/developer-reviewing-javascript" rel="noopener ugc nofollow" target="_blank">https://burst.shopify.com/photos/developer-reviewing-javascript</a></figcaption></figure><p id="1f4f" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">最近我接到一个任务，使用<a class="ae jg" href="http://www.ractivejs.org/" rel="noopener ugc nofollow" target="_blank"> Ractive.js </a>和<a class="ae jg" href="https://developer.mozilla.org/en/docs/Web/API/Fetch_API" rel="noopener ugc nofollow" target="_blank"> HTML5的Fetch API </a>从<a class="ae jg" href="http://openweathermap.org/api" rel="noopener ugc nofollow" target="_blank"> Open Weather </a>中使用一个<a class="ae jg" href="http://openweathermap.org/" rel="noopener ugc nofollow" target="_blank">Open</a>rest API</p><p id="5894" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这里的示例<a class="ae jg" href="http://jsfiddle.net/xameeramir/boe2vcj6/embedded/result/#Result" rel="noopener ugc nofollow" target="_blank">应用程序</a>将城市名称作为输入，并在其下方显示相应的天气信息。</p><h1 id="89e8" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">免费获取OpenWeather API密钥！！！</h1><p id="a864" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">为了从OpenWeather的REST API中获取JSON数据，我们需要做的第一件事就是获取他们的<a class="ae jg" href="http://openweathermap.org/appid" rel="noopener ugc nofollow" target="_blank">免费API key </a>。只需将这个应用程序id作为查询参数传入，就可以调用API。就是这样！</p><h1 id="ead4" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">设置UI容器</h1><p id="999f" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">创建一个HTML5元素作为应用程序的前端。在我们的例子中，是<code class="eh li lj lk ll b">div#container</code>。</p><h1 id="7955" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">使用引导实现响应</h1><p id="2e53" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">只是为了实现响应，我们已经包括了<a class="ae jg" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="noopener ugc nofollow" target="_blank">引导参考</a>。类<code class="eh li lj lk ll b">.row .col-md-6 .col-sm-12 </code>负责响应本身。</p><h1 id="9b5e" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">设置活动模板</h1><p id="6147" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">在添加了<a class="ae jg" href="http://cdn.ractivejs.org/latest/ractive.min.js" rel="noopener ugc nofollow" target="_blank"> ractive的链接</a>之后，我们已经确保了小提琴中的代码能够感知ractive。</p><p id="0612" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">模板在脚本标签中。注意，我们已经将<code class="eh li lj lk ll b">script</code>的类型属性设置为‘text/ractive’——尽管它可以是除‘text/<a class="ae jg" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank">JavaScript</a>之外的任何内容。我们可以通过多种方式加载模板。为了方便起见，我们将把它包含在一个脚本标记中，这样我们就不需要使用AJAX或多行字符串了。</p><p id="7b49" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">例如，花括号中包含了ractive函数中的数据集，例如<code class="eh li lj lk ll b">ractive.set('location', JSON.stringify(data.name) + ', ' + JSON.stringify(data.sys.country));</code></p><h1 id="4d0b" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">设置活动上下文</h1><p id="45ff" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated"><code class="eh li lj lk ll b">Ractive</code>构造函数将用于设置活动上下文。参数及其描述如下:</p><ul class=""><li id="10ed" class="lm ln hu jj b jk jl jo jp js lo jw lp ka lq ke lr ls lt lu dt translated"><code class="eh li lj lk ll b">el</code>:前端要渲染到的元素</li><li id="d53d" class="lm ln hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><code class="eh li lj lk ll b">template</code>:活性模板</li><li id="1f4e" class="lm ln hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><code class="eh li lj lk ll b">data</code>:前端数据</li></ul><h1 id="69ed" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">捕捉事件</h1><p id="3261" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">Ractive events看起来与纯粹的<a class="ae jg" href="https://hackernoon.com/tagged/html" rel="noopener ugc nofollow" target="_blank"> HTML </a>事件略有不同，例如点击事件。它们在某种意义上与jQuery类似。</p><h1 id="e3a9" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">启动获取请求</h1><p id="70be" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">使用<code class="eh li lj lk ll b">Request</code>构造函数准备获取请求，并使用<code class="eh li lj lk ll b">fetch(request) </code>触发它。</p><h1 id="7e63" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">使用localStorage维护最近的搜索历史</h1><p id="f315" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">城市输入以数组的形式存储在localStorage实例中，并显示为<code class="eh li lj lk ll b">ul</code>的<code class="eh li lj lk ll b">li</code>，每次单击都会显示天气获取请求摘要。</p><p id="bf06" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">见<a class="ae jg" href="http://jsfiddle.net/xameeramir/boe2vcj6/" rel="noopener ugc nofollow" target="_blank">全码</a>此处。</p><p id="5c6d" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv">来源:</strong></p><ul class=""><li id="8647" class="lm ln hu jj b jk jl jo jp js lo jw lp ka lq ke lr ls lt lu dt translated"><a class="ae jg" href="https://developer.mozilla.org/en/docs/Web/API/Fetch_API" rel="noopener ugc nofollow" target="_blank">获取API </a></li><li id="6571" class="lm ln hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><a class="ae jg" href="http://openweathermap.org/appid" rel="noopener ugc nofollow" target="_blank">开放天气图</a></li><li id="d854" class="lm ln hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><a class="ae jg" href="http://www.ractivejs.org/" rel="noopener ugc nofollow" target="_blank">行动</a></li><li id="0294" class="lm ln hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><a class="ae jg" href="http://xameeramir.github.io/Ractive.js-HTML5-Fetch-API-consume-REST-API/" rel="noopener ugc nofollow" target="_blank">我的博客</a></li></ul><figure class="ma mb mc md fq iv"><div class="bz el l di"><div class="me mf l"/></div></figure></div></div>    
</body>
</html>