<html>
<head>
<title>Continuous Integration Provider Killer Debugging Feature: ssh login</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">持续集成提供者黑仔调试特性:ssh登录</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/continuous-integration-provider-killer-debugging-feature-ssh-login-6515928e0828?source=collection_archive---------12-----------------------#2016-12-05">https://medium.com/hackernoon/continuous-integration-provider-killer-debugging-feature-ssh-login-6515928e0828?source=collection_archive---------12-----------------------#2016-12-05</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="b250" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我很喜欢不用自己运营CI服务。如果可能，我宁愿使用托管解决方案，而不必担心要维护额外的服务器集群。对于开源项目来说尤其如此。然而，大多数CI供应商的调试流程有点麻烦，尤其是初始设置。</p><p id="792d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是典型的工作流程:</p><ol class=""><li id="9f25" class="jp jq hu it b iu iv iy iz jc jr jg js jk jt jo ju jv jw jx dt translated">更新CI构建脚本和配置。</li><li id="2371" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated">将代码提交并推送到<a class="ae kd" href="https://hackernoon.com/tagged/github" rel="noopener ugc nofollow" target="_blank"> GitHub </a>。</li><li id="e46c" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated">登录到配置项提供者日志记录界面，观察它的运行。</li><li id="a689" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated">通常会遇到错误，然后重复步骤1到3，直到构建通过。</li></ol><p id="f0cb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果构建需要几分钟，并且错误发生在最后，那么这个流程会更加痛苦。你最终等了很长时间才看到错误，提交你希望是修复的东西，推它，希望并等待看到构建是否被修复。</p><h1 id="4019" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">黑仔调试功能</h1><p id="faac" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">我不是那种通常会相信单曲杀手特征炒作的人。然而，就<a class="ae kd" href="http://circleci.com" rel="noopener ugc nofollow" target="_blank"> CircleCI </a>而言，他们有一个功能在我第一次看到它时就让我大吃一惊，直到今天仍然如此:<strong class="it hv"> ssh登录</strong>。能够ssh到机器中进行调试，并在<a class="ae kd" href="https://hackernoon.com/tagged/enviroment" rel="noopener ugc nofollow" target="_blank">环境</a>中四处打探，这简直是天赐之物。</p><figure class="lh li lj lk fq ll"><div class="bz el l di"><div class="lm ln l"/></div></figure><figure class="lh li lj lk fq ll"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="2e64" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">该特性的实现方式也使开发人员能够调试实际的错误，而不是必须ping操作团队来找出构建中的错误。CircleCI提供了一个链接，可以在几个地方使用SSH进行构建:</p><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff lo"><img src="../Images/41db0ae774cc7632ce2b9e386dda9e3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*036BLfO79xDwmVTWobIl3Q.png"/></div></div></figure><p id="4793" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">单击“Enable SSH for this build”按钮后，它将提供一个SSH命令，您可以将该命令复制并粘贴到您的终端中以进入虚拟机。</p><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff lv"><img src="../Images/cc1b2e1e25026809890286739189e1ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DzjNrFvTp77K6xFTNW25Yg.png"/></div></div></figure><p id="7840" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦你到了那里，你就可以cd到你的项目，尽情地调试。</p><p id="40af" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">ssh调试演示</strong></p><p id="407a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于这个调试演示，我使用GitHub上的<a class="ae kd" href="https://github.com/tongueroo/hi/tree/circle" rel="noopener ugc nofollow" target="_blank"> tongueroo/hi </a>项目的circle分支。</p><p id="1a3b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于这个例子，我已经提交了代码，但它导致了一个构建错误。我在构建页面上看到了测试部分的错误:</p><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff lw"><img src="../Images/e74e41c49443be8dd6ed87d0d1c4ca91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V0LLuTvWQ68XcCGLXqOEeA.png"/></div></div></figure><p id="1e0f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">显然，我忘了安装UFO gem，作为测试命令的一部分，我用它来构建docker映像。我再次运行构建并启用ssh进行调试。</p><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff lx"><img src="../Images/c4354137baa91601c25407d3d91966a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DP_RKgv5f6NLAzr1naaWXw.png"/></div></div></figure><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff ly"><img src="../Images/a7201f3c25cd9c1007f6a519068f38d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HKIqxQB5G69qGzixIoDg6g.png"/></div></div></figure><p id="0e15" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">调试过程中，箱子将停留30分钟。现在，我复制ssh命令来进入这个盒子。</p><pre class="lh li lj lk fq lz ma mb mc aw md dt"><span id="541f" class="me kf hu ma b fv mf mg l mh mi">$ ssh -p 64633 ubuntu@54.90.9.95<br/>$ cd hi<br/>$ ufo docker build<br/>No command 'ufo' found, did you mean:<br/> Command 'ufw' from package 'ufw' (main)<br/> Command 'dfo' from package 'dfo' (universe)<br/> Command 'udo' from package 'udo' (universe)<br/>ufo: command not found<br/>$</span></pre><p id="729a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">上面，我再次运行命令来确认错误。这是我忘记安装相关ufo工具的一个例子。现在，我要安装飞碟工具，然后继续折腾，直到我得到建设通过。</p><pre class="lh li lj lk fq lz ma mb mc aw md dt"><span id="2e3c" class="me kf hu ma b fv mf mg l mh mi">$ cd hi<br/>$ gem install --no-ri --no-rdoc ufo<br/>$ env # checkout env variables<br/>$ ls # checkout ls<br/>$ ufo docker build<br/>$ docker tag -f $(ufo docker image_name) hi_web<br/>$ docker-compose run web bundle exec rake db:create db:migrate<br/>$ docker-compose run web bundle exec rake<br/>1 runs, 1 assertions, 0 failures, 0 errors, 0 skips<br/>$</span></pre><p id="64a7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这里的美妙之处在于，我可以在不提交代码的情况下提前进行大量测试，因为我可以ssh到环境中，而不必经历较慢的提交和推送周期。我甚至可以四处打探并检查环境变量。最后，一旦我有了高度的信心，我就做最后的提交和上传。这里确认了<a class="ae kd" href="https://circleci.com/gh/tongueroo/hi/10" rel="noopener ugc nofollow" target="_blank">版本是固定的</a>。</p><figure class="lh li lj lk fq ll fe ff paragraph-image"><div class="fe ff mj"><img src="../Images/363b31eab21a914990880ce0d90051b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*mdOCtNYQROlYu3rk65AwGg.png"/></div></figure><h1 id="4f8e" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">摘要</h1><p id="b902" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">CircleCI的ssh功能非常有用，这也是CircleCI在我需要使用托管配置项时使用当前我的goto的主要原因之一。ssh登录特性的CircleCI文档在这里是<a class="ae kd" href="https://circleci.com/docs/ssh-build/" rel="noopener ugc nofollow" target="_blank"/>。我希望其他提供商也能实现这个方便的特性。如果确实有其他托管CI供应商提供此功能，请随时告诉我，我会将它添加到列表中。</p><blockquote class="mk"><p id="9285" class="ml mm hu bd mn mo mp mq mr ms mt jo ek translated">谢谢你读到这里。如果你觉得这篇文章有用，如果你推荐这篇文章(点击拍手按钮)让其他人也能找到它，我会非常感激！还有，在<a class="ae kd" href="https://www.linkedin.com/in/tongueroo/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上和我联系。</p></blockquote></div><div class="ab cl mu mv hc mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="hn ho hp hq hr"><div class="lh li lj lk fq ab cb"><figure class="nb ll nc nd ne nf ng paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="nb ll nc nd ne nf ng paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="nb ll nc nd ne nf ng paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="nh ni nj"><p id="f922" class="ir is nk it b iu iv iw ix iy iz ja jb nl jd je jf nm jh ji jj nn jl jm jn jo hn dt translated"><a class="ae kd" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kd" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kd" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kd" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is nk it b iu iv iw ix iy iz ja jb nl jd je jf nm jh ji jj nn jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kd" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kd" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="lh li lj lk fq ll fe ff paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="fe ff no"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="lh li lj lk fq ll"><div class="bz el l di"><div class="np ln l"/></div></figure></div></div>    
</body>
</html>