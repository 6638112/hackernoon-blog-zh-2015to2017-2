<html>
<head>
<title>Machine Learning for Android Developers with the Mobile Vision API — Part 3 — Text Detection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用移动视觉API的Android开发人员的机器学习—第3部分—文本检测</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/machine-learning-for-android-developers-with-the-mobile-vision-api-part-3-text-detection-20ba34d0d356?source=collection_archive---------2-----------------------#2016-11-22">https://medium.com/hackernoon/machine-learning-for-android-developers-with-the-mobile-vision-api-part-3-text-detection-20ba34d0d356?source=collection_archive---------2-----------------------#2016-11-22</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="0a2e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你错过了，这里是这篇关于移动视觉API的文章的前传。<a class="ae jp" href="https://hackernoon.com/machine-learning-for-android-developers-with-the-mobile-vision-api-part-1-face-detection-e7e24a3e472f#.lludc6dvq" rel="noopener ugc nofollow" target="_blank">第一个帖子</a>在人脸检测API上，<a class="ae jp" href="https://hackernoon.com/machine-learning-for-android-developers-with-the-mobile-vision-api-part-2-barcode-detection-61e84c858518#.ln7czcra0" rel="noopener ugc nofollow" target="_blank">第二个</a>在条码检测API上。</p><h1 id="16fb" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">文本检测API</h1><p id="953f" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">根据<a class="ae jp" href="https://developers.google.com/vision/text-overview" rel="noopener ugc nofollow" target="_blank">的概述</a>，文本检测API允许检测图像和视频中的文本，并将这些文本分解为块(段落/列)、行(同一垂直轴上的单词集)和单词(同一垂直轴上的字母数字字符集)。API可以识别各种基于拉丁语的语言中的文本。</p><h1 id="187d" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">潜在应用</h1><p id="5942" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">在解释如何使用它之前，我将先写下这个API的功能。</p><ol class=""><li id="4d68" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo ky kz la lb dt translated">想象一下，你被邀请参加柏林的Firebase Dev峰会，你非常兴奋，但是你一句德语都不懂。你唯一懂的外语(除了英语)是两年前在多语网上学的一些西班牙语。艰难吧。如果所有的标志都是德语，你会怎么交流？一直在谷歌翻译中输入文本是不可能的，因为你知道德语单词以异常长而闻名。一种选择是用某种方法来检测你想要翻译的任何文本，并能够立即收到你的首选语言的翻译。文本检测API将帮助检测文本，但谷歌翻译API将用于翻译。</li><li id="7de8" class="kt ku hu it b iu lc iy ld jc le jg lf jk lg jo ky kz la lb dt translated">另一种可能性是将大量的文本(例如来自一本书)转换成数字格式。传统的方法是扫描每一页，这可能会损坏<a class="ae jp" href="https://hackernoon.com/tagged/book" rel="noopener ugc nofollow" target="_blank">书</a>。有了文本检测API，所需要的只是一个带有聚焦文本的摄像头的设备，可能还有一些将识别的文本上传到服务器的API。</li></ol><h1 id="150a" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">入门指南</h1><p id="3d29" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">这里，我们将使用文本检测API检测应用程序中预加载的默认图像中的文本。我最初想更进一步，将文本翻译成上面场景中描述的特定语言，但当我发现Google Translate API是按使用计费的时，我就把这部分省略了。</p><p id="c4c8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">又来了……</p><ul class=""><li id="f254" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo lh kz la lb dt translated">在Android Studio中创建新项目。</li><li id="4324" class="kt ku hu it b iu lc iy ld jc le jg lf jk lg jo lh kz la lb dt translated">将用于移动视觉API的Google Play Services SDK导入到您的应用程序级build.gradle文件中。在撰写本文时，最新版本是9.8.0。如果您导入整个SDK而不是您需要的特定SDK(play-services-vision ),您肯定会达到65k的方法限制。</li></ul><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="88d5" class="lr jr hu ln b fv ls lt l lu lv">compile 'com.google.android.gms:play-services-vision:9.8.0'</span></pre><ul class=""><li id="3e4e" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo lh kz la lb dt translated">要为文本检测自动安装vision依赖项，请将此元数据添加到清单文件中。这确保了首次使用该应用程序的用户能够及时下载适当的库。</li></ul><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="e7e6" class="lr jr hu ln b fv ls lt l lu lv">&lt;meta-data<br/>    android:name="com.google.android.gms.vision.DEPENDENCIES"<br/>    android:value="<strong class="ln hv">ocr</strong>"/&gt;</span></pre><ul class=""><li id="aca2" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo lh kz la lb dt translated">我们将创建一个非常简单的布局，由一个<em class="lw">按钮</em>，一个<em class="lw">图像视图</em>和一个<em class="lw">文本视图</em>组成。<em class="lw"> ImageView </em>从drawable文件夹中加载一张可爱的猫图片和一些德语文本。该按钮启动图像处理，同时<em class="lw">文本视图</em>显示从图像中检测到的任何文本。</li><li id="8a87" class="kt ku hu it b iu lc iy ld jc le jg lf jk lg jo lh kz la lb dt translated">就像人脸检测和条形码检测API一样，图像必须转换成<em class="lw">位图</em>才能进行处理。</li></ul><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="befb" class="lr jr hu ln b fv ls lt l lu lv">Bitmap textBitmap = BitmapFactory.<em class="lw">decodeResource</em>(getResources(), R.drawable.cute_cat_image);</span></pre><ul class=""><li id="9032" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo lh kz la lb dt translated">文本识别器被初始化以处理已经存在于<em class="lw">图像视图</em>中的图像。</li></ul><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="4b6e" class="lr jr hu ln b fv ls lt l lu lv">TextRecognizer textRecognizer = new TextRecognizer.Builder(this)<br/>        .build();</span></pre><ul class=""><li id="c919" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo lh kz la lb dt translated">接下来，我们需要检查文本识别器是否已经运行。总有可能第一次不会成功，因为需要将一个库下载到设备上，而它可能没有及时完成供使用。</li></ul><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="38f6" class="lr jr hu ln b fv ls lt l lu lv">if (!textRecognizer.isOperational()) {<br/>    new AlertDialog.Builder(this)<br/>            .setMessage("Text recognizer could not be set up on your device :(").show();<br/>    return;<br/>}</span></pre><ul class=""><li id="e722" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo lh kz la lb dt translated">然后，我们使用文本位图创建一个框架，并调用文本识别器。</li></ul><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="975c" class="lr jr hu ln b fv ls lt l lu lv">Frame frame = new Frame.Builder().setBitmap(textBitmap).build();<br/>SparseArray&lt;TextBlock&gt; text = textRecognizer.detect(frame);</span></pre><ul class=""><li id="bb4d" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo lh kz la lb dt translated">我们的结果现在包含在SparseArray中，然后显示在<em class="lw"> TextView </em>中。</li></ul><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="1182" class="lr jr hu ln b fv ls lt l lu lv">for (int i = 0; i &lt; text.size(); i++) {<br/>    TextBlock textBlock = text.valueAt(i);<br/>    if (textBlock != null &amp;&amp; textBlock.getValue() != null) {<br/>        detectedText += textBlock.getValue();<br/>    }<br/>}<br/>detectedTextView.setText(detectedText);</span></pre><figure class="li lj lk ll fq lx"><div class="bz el l di"><div class="ly lz l"/></div></figure><ul class=""><li id="149a" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo lh kz la lb dt translated">一旦事务完成，就应该释放文本识别器。</li></ul><pre class="li lj lk ll fq lm ln lo lp aw lq dt"><span id="3a97" class="lr jr hu ln b fv ls lt l lu lv">textRecognizer.release();</span></pre><p id="31e2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">请注意，所有这些操作都应该在后台线程上执行。本文的代码在Github上的<a class="ae jp" href="https://github.com/moyheen/text-detector" rel="noopener ugc nofollow" target="_blank">这里是</a>。</p><p id="e1f2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">参考资料:</p><div class="ma mb fm fo mc md"><a href="https://developers.google.com/vision/text-overview" rel="noopener  ugc nofollow" target="_blank"><div class="me ab ej"><div class="mf ab mg cl cj mh"><h2 class="bd hv fv z el mi eo ep mj er et ht dt translated">文本识别API概述|移动视觉| Google开发者</h2><div class="mk l"><h3 class="bd b fv z el mi eo ep mj er et ek translated">文本识别是检测图像和视频流中的文本并识别其中包含的文本的过程</h3></div><div class="ml l"><p class="bd b gc z el mi eo ep mj er et ek translated">developers.google.com</p></div></div><div class="mm l"><div class="mn l mo mp mq mm mr ms md"/></div></div></a></div><div class="ma mb fm fo mc md"><a href="https://codelabs.developers.google.com/codelabs/mobile-vision-ocr/" rel="noopener  ugc nofollow" target="_blank"><div class="me ab ej"><div class="mf ab mg cl cj mh"><h2 class="bd hv fv z el mi eo ep mj er et ht dt translated">通过面向Android的移动视觉文本API使用OCR查看和理解文本</h2><div class="mk l"><h3 class="bd b fv z el mi eo ep mj er et ek translated">光学字符识别(OCR)赋予计算机阅读图像中出现的文本的能力，让…</h3></div><div class="ml l"><p class="bd b gc z el mi eo ep mj er et ek translated">codelabs.developers.google.com</p></div></div><div class="mm l"><div class="mt l mo mp mq mm mr ms md"/></div></div></a></div><div class="ma mb fm fo mc md"><a href="https://github.com/moyheen/text-detector" rel="noopener  ugc nofollow" target="_blank"><div class="me ab ej"><div class="mf ab mg cl cj mh"><h2 class="bd hv fv z el mi eo ep mj er et ht dt translated">moyheen/文本检测器</h2><div class="mk l"><h3 class="bd b fv z el mi eo ep mj er et ek translated">这个应用程序包含了我的文章中关于文本检测器API的所有代码。</h3></div><div class="ml l"><p class="bd b gc z el mi eo ep mj er et ek translated">github.com</p></div></div><div class="mm l"><div class="mu l mo mp mq mm mr ms md"/></div></div></a></div><p id="8368" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="lw">以为这就了不起了？请不要忘记“推荐”和“分享”。</em>T3】</strong></p><div class="li lj lk ll fq ab cb"><figure class="mv lx mw mx my mz na paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mv lx mw mx my mz na paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mv lx mw mx my mz na paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="nc nd ne"><p id="f922" class="ir is lw it b iu iv iw ix iy iz ja jb nf jd je jf ng jh ji jj nh jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is lw it b iu iv iw ix iy iz ja jb nf jd je jf ng jh ji jj nh jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="li lj lk ll fq lx fe ff paragraph-image"><div role="button" tabindex="0" class="nj nk di nl bf nm"><div class="fe ff ni"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="li lj lk ll fq lx"><div class="bz el l di"><div class="nn lz l"/></div></figure></div></div>    
</body>
</html>