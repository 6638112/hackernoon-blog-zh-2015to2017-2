<html>
<head>
<title>Jack and the Elastic Beanstalk —Easy Way to Manage AWS Elastic Beanstalk Environments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jack和弹性豆茎——管理AWS弹性豆茎环境的简单方法</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/jack-and-the-elastic-beanstalk-easily-manage-aws-environments-3ab496f08ad2?source=collection_archive---------11-----------------------#2016-11-30">https://medium.com/hackernoon/jack-and-the-elastic-beanstalk-easily-manage-aws-environments-3ab496f08ad2?source=collection_archive---------11-----------------------#2016-11-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/bbd862711f266191dafd9f6333af443a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*NBEggMTPwD6GAGT-nLPhCQ.png"/></div></figure><p id="d8e0" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">感谢我收到的关于千斤顶工具的反馈:</p><blockquote class="jw jx jy"><p id="7a6e" class="iy iz jz ja b jb jc jd je jf jg jh ji ka jk jl jm kb jo jp jq kc js jt ju jv hn dt translated">Jack真的很酷，很有用，同时也让开始使用EB变得很容易。谢谢你更新版本和详细的说明，我只花了不到10分钟就为它设置好了一切-我对它的简单感到震惊。——图利的本杰明·坎特</p></blockquote><p id="6ce7" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">该工具的文档可在jack-eb.com<a class="ae kd" href="http://jack-eb.com" rel="noopener ugc nofollow" target="_blank">获得</a></p><h1 id="ad7d" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">介绍</h1><p id="b5dd" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">大约2年前，我开始更多地使用AWS ElasticBeanstalk。并非巧合的是，这正是AWS为弹性豆茎添加<a class="ae kd" href="http://aws.amazon.com/blogs/aws/aws-elastic-beanstalk-for-docker/" rel="noopener ugc nofollow" target="_blank"> Docker容器支持的时候。</a></p><p id="8f2e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">首先，<a class="ae kd" href="http://aws.amazon.com/elasticbeanstalk/" rel="noopener ugc nofollow" target="_blank"> Elastic Beanstalk </a>是AWS的PaaS产品，为部署和扩展web应用程序提供易于使用的服务。这有点像AWS版的heroku，至少是在同一个空间里。代码上传到Elastic Beanstalk后，它会自动处理应用程序的容量供应、负载平衡、自动伸缩和健康监控。同时，开发人员保留对支持其应用程序的底层AWS资源的控制权。</p><p id="3a42" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">对于像Elastic Beanstalk这样的PaaS产品，通常会有一个官方支持的语言列表。Elastic Beanstalk官方支持:Go，Java SE，Java with Tomcat，。NET在Windows Server上用IIS，Node.js，PHP，Python，Ruby。</p><p id="fab1" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">不过，有了Docker的支持，Elastic Beanstalk为开发人员提供了一种方法，让他们可以为自己的服务使用任何编程语言和应用服务器。开发人员可以配置Docker容器，安装所需的额外包和库，而不必定制服务器本身。弹性豆茎处理为他们部署Docker容器。</p><p id="43df" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">与大多数AWS服务一样，Elastic Beanstalk非常棒，只需要在服务之上添加一些工具来加速流程。这篇文章也介绍了用于快速创建和管理弹性Beanstalk环境的插孔。</p><h1 id="8761" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">杰克和弹性豆茎</h1><p id="619f" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">我将介绍一些jack工具功能的简短示例。更多细节可以在项目<a class="ae kd" href="https://github.com/tongueroo/jack" rel="noopener ugc nofollow" target="_blank">自述</a>中找到。</p><h1 id="96b0" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">创造环境</h1><p id="4073" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">首先，用jack创建新的EB环境非常容易。通常使用EB，您需要首先创建“EB应用程序”,然后才能创建“EB环境”。作为环境创建的一部分，Jack会自动为您创建应用程序。这里有一个例子来说明它是如何工作的。</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="9ef5" class="lq kf hu lm b fv lr ls l lt lu">$ git clone https://github.com/tongueroo/sinatra<br/>$ cd sinatra<br/>$ jack create hi-web-stag-1<br/>Running: eb init -r us-east-1 -p "64bit Amazon Linux 2016.03 v2.1.0 running Docker 1.9.1" "hi"</span><span id="aa04" class="lq kf hu lm b fv lv ls l lt lu">Running: eb create --sample --nohang --keyname "default" --platform "64bit Amazon Linux 2016.03 v2.1.0 running Docker 1.9.1" --cname hi-web-stag-1 hi-web-stag-1<br/>Environment details for: hi-web-stag-1<br/>  Application name: hi<br/>  Region: us-east-1<br/>  Deployed Version: Sample Application<br/>  Environment ID: e-3kqcygpdmb<br/>  Platform: 64bit Amazon Linux 2016.03 v2.1.0 running Docker 1.9.1<br/>  Tier: WebServer-Standard<br/>  CNAME: hi-web-stag-1.us-east-1.elasticbeanstalk.com<br/>  Updated: 2016-11-30 04:04:56.608000+00:00<br/>Alert: An update to the EB CLI is available. Run "pip install --upgrade awsebcli" to get the latest version.<br/>$ jack deploy # to deploy fresh code now</span></pre><p id="9db3" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">自动创建<code class="eh lw lx ly lm b">hi</code>应用程序并创建<code class="eh lw lx ly lm b">hi-web-stag-1</code>环境。默认的EB样例应用程序最初被上传到环境中，因此您可以在引入自己的代码之前测试环境以确保一切正常。您可以从EB控制台获取DNS端点并测试它是否工作。</p><figure class="lh li lj lk fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="fe ff lz"><img src="../Images/ad7fc7673dc06e0de55eb52672644cab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sPjHOsYDPaSyA_ys_omayA.png"/></div></div></figure><p id="11f1" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">下面是curl命令，用于测试应用程序是否返回200响应:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="30f1" class="lq kf hu lm b fv lr ls l lt lu">$ curl -svo /dev/null hi-web-stag-1.us-east-1.elasticbeanstalk.com 2&gt;&amp;1 | grep '&lt; HTTP'<br/>&lt; HTTP/1.1 200 OK<br/>$</span></pre><h1 id="3bc0" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">创建多个EB环境</h1><p id="6e54" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">创建一个环境并创建应用程序并不是什么大不了的事情。最酷的是，jack可以下载现有的环境配置，您可以使用它来快速重建更多的环境。EB有一个克隆特性也可以做到这一点，但是如果环境之间的配置略有不同，您可以使用文本编辑器快速编辑下载的配置并从中创建一个新环境。我发现这种流动可以更快。</p><p id="2ac8" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">因为jack下载了整个配置，所以它还允许您“重命名”一个EB应用程序。可以理解的是，EB克隆特性只在应用程序中起作用。使用jack，您可以从任何应用程序的环境中下载配置，并在新的应用程序下完全重新创建它。这里有一个例子:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="778c" class="lq kf hu lm b fv lr ls l lt lu">$ jack get hi-web-stag-1 -c hiworld-web-stag-1 # saves jack/cfg/hiworld-web-stag-1.cfg.yml<br/>$ jack create hiworld-web-stag-1 # creates an hiworld app using jack/cfg/hiworld-web-stag-1.cfg.yml<br/>$ jack deploy # deploys fresh code</span></pre><h1 id="08ab" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">比较多个EB环境</h1><p id="b5b1" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">使用jack可以做的另一个技巧是快速比较EB环境之间的差异。您可以遍历多个环境，下载所有配置并快速比较它们的差异。假设您已经创建了两个登台环境:hi-web-stag-1和hi-web-stag-2。现在，您需要比较这两种环境的差异。如果有人使用EB控制台更新其中一个环境，就会发生这种情况。通常这被报告为“其中一个环境被破坏”。这里有一个快速比较的例子。</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="6dab" class="lq kf hu lm b fv lr ls l lt lu">$ for i in {1..2} ; do jack get hi-web-stag-$i ; done<br/>$ colordiff jack/cfg/hi-web-stag-{1,2}.cfg.yml</span></pre><p id="1260" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果您有3个暂存环境:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="129c" class="lq kf hu lm b fv lr ls l lt lu">$ for i in {1..3} ; do jack get hi-web-stag-$i ; done<br/>$ colordiff jack/cfg/hi-web-stag-{1,2}.cfg.yml<br/>$ colordiff jack/cfg/hi-web-stag-{1,3}.cfg.yml<br/>$ colordiff jack/cfg/hi-web-stag-{2,3}.cfg.yml</span></pre><p id="fa74" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这是一种非常快速的方法来检查环境之间的差异，并在有人说“环境关闭”时帮助调试。</p><h1 id="4bc3" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">应用预览</h1><p id="cc40" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">另一个值得强调的有用的jack特性是，它会在上传之前对配置进行区分，以验证您没有意外地忽略之前所做的更改。非常棒的是，Elastic Beanstalk让开发人员可以很容易地使用EB控制台GUI来更新环境。然而，这有时会导致团队成员做出其他人不知道的改变。为了帮助解决这个问题，jack工具将首先下载当前的EB配置，然后对您正在上传的配置进行比较，向您显示差异。这对于避免意外删除配置更改非常有帮助。</p><p id="3201" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">下面是一个实例类型从t2.micro更改为t2.small的示例。</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="c065" class="lq kf hu lm b fv lr ls l lt lu">$ jack apply hi-web-stag-1<br/>Downloading config file...<br/>Running: eb config save --cfg current-2016-11-29_22-19-27 hi-web-stag-1</span><span id="e612" class="lq kf hu lm b fv lv ls l lt lu">Configuration saved at: /Users/tung/src/tongueroo/sinatra/.elasticbeanstalk/saved_configs/current-2016-11-29_22-19-27.cfg.yml<br/>Comparing ./.elasticbeanstalk/saved_configs/current-2016-11-29_22-19-27.cfg.yml and jack/cfg/hi-web-stag-1.cfg.yml<br/>11c11<br/>&lt;     InstanceType: t2.micro<br/>---<br/>&gt;     InstanceType: t2.small</span><span id="c740" class="lq kf hu lm b fv lv ls l lt lu">Are you sure you want to update the environment with your the new config ?<br/>If the difference is not what you expected, you should say no.<br/>A blank newline indicates that there was no difference.<br/>If you want to download the config from the environment and<br/>overwrite your jack/cfg/hi-web-stag-1.cfg.yml instead, you can use this command:<br/>$ jack get hi-web-stag-1<br/>$ jack get help # for more info<br/>yes/no? [no] yes<br/>Copying jack/cfg/hi-web-stag-1.cfg.yml to ./.elasticbeanstalk/saved_configs/hi-web-stag-1-2016-11-29_22-19-27.cfg.yml for the upload<br/>Running: eb config put hi-web-stag-1-2016-11-29_22-19-27</span><span id="84c8" class="lq kf hu lm b fv lv ls l lt lu">Updating environment hi-web-stag-1 with template hi-web-stag-1-2016-11-29_22-19-27<br/>$</span></pre><h1 id="2f85" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">摘要</h1><p id="b37f" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">Jack是一个非常简单的工具，它在eb命令之上提供了一些额外的有用命令，比如<code class="eh lw lx ly lm b">jack create,</code> <code class="eh lw lx ly lm b">jack get</code>和<code class="eh lw lx ly lm b">jack apply</code>。我希望其他人也觉得这个工具有用！</p><blockquote class="me"><p id="4e8c" class="mf mg hu bd mh mi mj mk ml mm mn jv ek translated">谢谢你读到这里。如果你觉得这篇文章有用，如果你推荐这篇文章(点击拍手按钮)让其他人也能找到它，我会非常感激！另外，请在<a class="ae kd" href="https://www.linkedin.com/in/tongueroo/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系。</p></blockquote><div class="mo mp mq mr ms ab cb"><figure class="mt iv mu mv mw mx my paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mt iv mu mv mw mx my paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mt iv mu mv mw mx my paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="jw jx jy"><p id="f922" class="iy iz jz ja b jb jc jd je jf jg jh ji ka jk jl jm kb jo jp jq kc js jt ju jv hn dt translated"><a class="ae kd" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客们下午的开始。我们是<a class="ae kd" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kd" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kd" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="iy iz jz ja b jb jc jd je jf jg jh ji ka jk jl jm kb jo jp jq kc js jt ju jv hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kd" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kd" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="lh li lj lk fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="fe ff mz"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="lh li lj lk fq iv"><div class="bz el l di"><div class="na nb l"/></div></figure></div></div>    
</body>
</html>