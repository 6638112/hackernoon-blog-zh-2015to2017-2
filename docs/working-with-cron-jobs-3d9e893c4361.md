# 使用 Cron 作业

> 原文：<https://medium.com/hackernoon/working-with-cron-jobs-3d9e893c4361>

## 将 10，000 小时的工作缩短到 1 小时...

![](img/25716a2f4db40c4e00d6726dfa60b27d.png)

Bot image by [Menny Barzilay](https://piknu.com/u/bamenny)

# 什么是 cronjob？

> Cron 在特定时间为您运行作业

Cron 作业是计划好的任务，按照程序员设置的固定时间间隔执行。它们通过运行首选脚本来工作。运行这些脚本的时间间隔由 Cron 表达式决定。

> Cron 表达式是由六个或七个子表达式(字段)组成的字符串，描述了计划的各个细节。

根据表达式是什么和函数要做什么，cron 可以每分钟、每周甚至每年运行一次。在消耗大量数据的软件中，cron 作业有许多独特的用例。

例如，一个金融网站可能被编程为根据**层级**为**用户**和**用户**生成备份和电子邮件通知。你可能已经习惯看到的这种条款的一个很好的例子是你可能已经注册了一个免费的在线课程。主持你讲座的电子邮件服务器将根据你注册的时间开始向你发送订购的电子邮件。

这位讲师可能会发现向 5 名学生发送 3 封电子邮件非常容易，但是考虑到你和 5000 名学生在 5 周内注册了同一门课程，这位讲师必须向每个人发送总共 15 封电子邮件。这意味着球场所有者必须注意以下变量:

1.**电子邮件**详情，**姓名**，以及**日期**个人报名。

2.报名参加的课程类型

这样，我们将运行一个作业，在个人注册的当天向他们发送电子邮件，并根据用户的详细信息发送未来 5 周的电子邮件。这种自动化将使网站的管理更加容易。

javascript 内置了一个简单的解决方案。我们有像 **setTimeout** 和 **setInterval** 这样的东西可以使用，但是对于你想要使用 cron 的特定任务来说，它们可能太基础了。然而，有了 Node.js 环境，我们可以做更多的事情，解决复杂的问题。

# Node 如何解决这个问题？

首先我们的入口点是 **start.js** ，我们的 cronjob 将在 **cron.js** 中，最后我们的 **package.json** 为几个 Node.js 依赖项。

首先，我们添加依赖项，并输入我们将托管应用程序的端口的值:

接下来是添加监听端口、启动 cron 方法(我们将在另一个应用程序中创建)和“启动”应用程序的代码行:

另一个文件中的 cron 作业。

***' module . exports { } '****用于导出 cronJob 函数，以便在应用程序中需要它的任何地方使用，在这种情况下是 start.js*

*最后，对于不需要太多工作的依赖项，你可以只使用你现在需要的依赖项。但我将从构建一个更大的应用程序，并继续重构，因此我将需要这里的所有依赖项:*

*你可以通过执行**节点 start.js** 来运行应用程序*

*仅此而已。随着我的工作，更大的应用程序会有更多的更新。*