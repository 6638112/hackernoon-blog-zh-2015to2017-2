<html>
<head>
<title>The ‘I lost my phone’ serverless, IoT button</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">“我丢了手机”无服务器物联网按钮</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/the-i-lost-my-phone-serverless-iot-button-d3550b89ec79?source=collection_archive---------28-----------------------#2017-09-26">https://medium.com/hackernoon/the-i-lost-my-phone-serverless-iot-button-d3550b89ec79?source=collection_archive---------28-----------------------#2017-09-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/c9376d8f4210041994dbd823064a519b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dLsOIvaA8xO7ao953IgACQ.png"/></div></div></figure><div class=""/><p id="5ca3" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是一个关于技术的教程，但它是从我的妻子和三个年幼的孩子开始的。由于忙碌的生活方式和女性衣服通常缺少实用的口袋，我们经常会把妻子的手机丢在家里的某个地方。</p><p id="ad51" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这种场景的通常结果是“詹姆斯！你能打我的电话吗？!"经过几次尝试和一些徘徊，我们通常可以在一个只有1至5岁的孩子才会选择放电话的地方找到它。如果我不在家，这就出现了一个全新的问题。我们有相当一段时间没有座机了，下一步就是登录I cloud…<br/>不方便。</p><p id="6c99" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">因此，当我最近深入研究无服务器计算时，我真的想找到另一个实际的用例来实现。进入“我的手机丢了”无服务器物联网按钮。你只要按下按钮，几秒钟后你的电话就响了！所以现在，我的妻子可以在家里随身携带这个按钮，并根据需要多次按下它，直到她的手机清楚地显示出它的位置。</p><p id="c629" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">它非常实用，但也是在<a class="ae ka" href="https://hackernoon.com/tagged/aws" rel="noopener ugc nofollow" target="_blank"> AWS </a>上体验物联网和Lambda功能的好方法。最重要的是，除了按钮本身，AWS和Twilio的所有功能都在它们的“免费层”中！</p><h2 id="8d83" class="kb kc if bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated"><strong class="ak">第一步:获得一个物联网按钮</strong></h2><p id="dd6d" class="pw-post-body-paragraph jc jd if je b jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv la jx jy jz hn dt translated">你需要做的第一件事是买一个<a class="ae ka" href="https://aws.amazon.com/iotbutton/" rel="noopener ugc nofollow" target="_blank">物联网按钮</a>，你可以从(惊喜！)<a class="ae ka" href="https://aws.amazon.com/iotbutton/" rel="noopener ugc nofollow" target="_blank">亚马逊</a>。它值20美元，但是当你考虑到它实际上是做什么的时候，你会觉得它非常神奇。</p><h2 id="743f" class="kb kc if bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">第二步:注册Twilio</h2><p id="4374" class="pw-post-body-paragraph jc jd if je b jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv la jx jy jz hn dt translated">这里的许多繁重工作实际上是由<a class="ae ka" href="https://www.twilio.com/" rel="noopener ugc nofollow" target="_blank"> Twilio </a>完成的，这是一个了不起的服务，它可以做几乎任何你可以想象的电话服务(查看他们在AWS re:Invent 2016 上的<a class="ae ka" href="https://www.youtube.com/watch?v=r0ejZ_rFoGg" rel="noopener ugc nofollow" target="_blank">演示)。我们需要一个开发者API密匙来打电话，但是不用担心，我们所做的一切都在他们的免费层。继续注册一个帐户，并复制你的帐户SID和认证令牌。</a></p><h2 id="9643" class="kb kc if bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">步骤3:编辑你的Lambda函数代码</h2><p id="bee9" class="pw-post-body-paragraph jc jd if je b jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv la jx jy jz hn dt translated">为了将按钮按压连接到Twilio，我们将使用一个实现Twilio API的小Python函数。继续从我的GitHub Repo 中克隆代码。</p><p id="7f65" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您需要编辑lambda_function.py中的main函数，并提供您的Twilio凭证以及您想要拨打的电话号码(您妻子或其他人的)。这很简单。</p><figure class="lc ld le lf fq hw fe ff paragraph-image"><div class="fe ff lb"><img src="../Images/b284ecb6e3421ad58a347e1a5ee86dd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*OtnnqpmBDBPEei6LqcHfng.png"/></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Just fill in the blanks with your configuration</figcaption></figure><p id="8a36" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">乍一看，AWS Lambda似乎只能执行存在于单个文件中的函数，但事实并非如此。你可以有一个包含很多文件Lambda函数，但是你需要先把它们全部压缩。一旦你在lambda_function.py文件中编辑了我们的主函数，接着把它和repo中的所有子目录一起压缩。</p><figure class="lc ld le lf fq hw fe ff paragraph-image"><div class="fe ff lk"><img src="../Images/b696fa9c084fa1b316dc1960cd1affac.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*QtIILWeUxFeIQj1DBJeYhw.png"/></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">You can call the zip file whatever you want. ‘lambda_function.zip’ works just fine.</figcaption></figure><h2 id="87d7" class="kb kc if bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">步骤4:设置物联网配置</h2><p id="a9ae" class="pw-post-body-paragraph jc jd if je b jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv la jx jy jz hn dt translated"><a class="ae ka" href="https://aws.amazon.com/iotbutton/getting-started/" rel="noopener ugc nofollow" target="_blank">按照入门配置向导</a>在AWS上设置按钮，准备调用您的Lambda函数。请务必下载在此过程中创建的证书文件，并将其保存在安全的地方。你需要稍后将这些放在你的物联网按钮上进行身份验证。</p><p id="4976" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当提示您配置Lambda函数时，选择Python 2.7作为运行时。最初，你会看到你可以在浏览器的什么地方写你的Lambda函数，但是我们想在一个zip文件中提供我们自己的函数和它的依赖项。从“代码输入类型”下拉框中选择“上传. ZIP文件”,并提供我们之前压缩的代码。</p><figure class="lc ld le lf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ll"><img src="../Images/1c0cac4318b5b8d65717083afdc46536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZgPrslWP_Mscj4pdhflw2A.png"/></div></div></figure><p id="ebea" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">请确保将“处理程序”字段设置为“lambda_function.lambda_handler”。这告诉Lambda <a class="ae ka" href="http://docs.aws.amazon.com/lambda/latest/dg/python-programming-model-handler-types.html" rel="noopener ugc nofollow" target="_blank">在哪里寻找我们的主Python函数'<em class="lm">文件名</em>。<em class="lm">函数名</em> ' </a>。</p><p id="0a1f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae ka" href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html" rel="noopener ugc nofollow" target="_blank">角色是AWS管理安全性和权限</a>的一种方式，是一个非常重要的概念。AWS上的安全性是一个很深的主题，但绝对值得理解。一定要给你的AWS角色一个清晰的名字，这样你就能记住它在将来的用途。</p><figure class="lc ld le lf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ll"><img src="../Images/cf3b1504ffe913a97b03dd73cc94e0ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JRv9i7QL73DZGuGMAZ117g.png"/></div></div></figure><h2 id="e6ba" class="kb kc if bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">第五步:连接你的物联网按钮并测试！</h2><p id="5452" class="pw-post-body-paragraph jc jd if je b jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv la jx jy jz hn dt translated">快到了！现在您可以<a class="ae ka" href="http://docs.aws.amazon.com/iot/latest/developerguide/configure-iot.html" rel="noopener ugc nofollow" target="_blank">按照说明</a>将您的物联网按钮连接到您的WiFi <a class="ae ka" href="https://hackernoon.com/tagged/network" rel="noopener ugc nofollow" target="_blank">网络</a>并上传您的证书文件。一旦完成，给它一个压力！现在回想一下本文顶部的图表，惊叹于打电话时实际发生的所有技术奇迹。最重要的是，您不需要为服务器付费、安装补丁或进行故障排除就能实现这一点！</p><figure class="lc ld le lf fq hw"><div class="bz el l di"><div class="ln lo l"/></div></figure></div></div>    
</body>
</html>