<html>
<head>
<title>Using custom styles with Google Maps Android API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在谷歌地图Android API中使用自定义样式</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/using-custom-styles-with-google-maps-android-api-e1e5ec3ac7e9?source=collection_archive---------1-----------------------#2016-09-22">https://medium.com/hackernoon/using-custom-styles-with-google-maps-android-api-e1e5ec3ac7e9?source=collection_archive---------1-----------------------#2016-09-22</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="5857" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Google Play Services 9.6.0 推出了期待已久的功能——自定义地图样式！</p><p id="9a0f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">地图样式允许您自定义几乎所有地图要素的颜色、可见性和密度。</p><p id="9a38" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个真的很厉害！你不仅可以改变风格以完全适应你的品牌，而且你可以<strong class="it hv">隐藏特定的地图元素</strong>。</p><ul class=""><li id="2b6b" class="jq jr hu it b iu iv iy iz jc js jg jt jk ju jo jv jw jx jy dt translated">显示道路或公共交通是否会影响你的内容？隐藏你不需要的东西。</li><li id="72f7" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">不想让商业POI的地图变得杂乱。把它们也藏起来。</li><li id="7f85" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">想要在地图上高亮显示公园？给它们一个明亮的颜色，其他的都是灰色的。</li></ul><p id="a32b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您想在一天中的某个时间改变地图样式，或者当用户放大时，该怎么办？</p><p id="0221" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">完全有可能。</p><p id="ead9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">地图风格可以随时改变。</strong></p><p id="e26c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我决定看看我能做到什么程度。我的目标是实现一个带有“细节层次”地图的示例应用程序。即，随着用户放大，更多的地图特征变得可见。<strong class="it hv">查看样本项目</strong> <a class="ae jp" href="https://github.com/athornz/MapsStyleSample" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv"> <em class="ke">此处</em> </strong> </a>，否则继续阅读！</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff kf"><img src="../Images/0ccb0eb0b63d0960ffc5a6fe984afd3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*asSyUkddyapoodT7ltqY2Q.jpeg"/></div></figure></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><h1 id="e7e2" class="ku kv hu bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">让我们开始吧！</h1><p id="3f08" class="pw-post-body-paragraph ir is hu it b iu ls iw ix iy lt ja jb jc lu je jf jg lv ji jj jk lw jm jn jo hn dt translated">JSON 中定义了地图样式<a class="ae jp" href="https://developers.google.com/maps/documentation/android-api/style-reference" rel="noopener ugc nofollow" target="_blank">。以下是隐藏POI、道路和交通要素的示例样式:</a></p><pre class="kg kh ki kj fq lx ly lz ma aw mb dt"><span id="036e" class="mc kv hu ly b fv md me l mf mg">[<br/>  {<br/>    "featureType": "poi",<br/>    "stylers": [<br/>      {<br/>        "visibility": "off"<br/>      }<br/>    ]<br/>  },<br/>  {<br/>    "featureType": "road.highway",<br/>    "stylers": [<br/>      {<br/>        "visibility": "off"<br/>      }<br/>    ]<br/>  },<br/>  {<br/>    "featureType": "transit",<br/>    "stylers": [<br/>      {<br/>        "visibility": "off"<br/>      }<br/>    ]<br/>  }<br/>]</span></pre><p id="ee29" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你可以自己编辑JSON，或者使用谷歌便利的<a class="ae jp" href="https://mapstyle.withgoogle.com" rel="noopener ugc nofollow" target="_blank">样式向导</a>。</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="fe ff mh"><img src="../Images/055bec5a7b741e160b6b366ba66c52ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XPVIRR7hw0d4eGafeWVtJQ.jpeg"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">Styling wizard — yes please!</figcaption></figure><p id="b093" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">样式向导附带了一些预构建的样式，包括夜间模式样式——请查看。</p><p id="41c4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">或者你可以切换高级模式来调整你的心的地图风格。有大量的选择。快乐造型！</p><p id="d2a9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">完成后，您可以导出JSON以在您的应用程序中使用。</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="fe ff mq"><img src="../Images/cf13ba0d880eeeab7b9b254b08af0d4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ycJYZOO2PgQ6FUI35dG0g.jpeg"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">Styling wizard options — and lots of them!</figcaption></figure></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><h1 id="c642" class="ku kv hu bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">应用样式</h1><p id="98d1" class="pw-post-body-paragraph ir is hu it b iu ls iw ix iy lt ja jb jc lu je jf jg lv ji jj jk lw jm jn jo hn dt translated">将样式应用到地图上非常简单。</p><p id="c977" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">存储样式的推荐方式是通过Android项目中的原始资源文件。</p><p id="60e9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">新的<em class="ke"> MapStyleOptions </em>类提供了一个方便的方法来加载它，并且在GoogleMap类上有一个新的方法来设置样式。</p><pre class="kg kh ki kj fq lx ly lz ma aw mb dt"><span id="93d3" class="mc kv hu ly b fv md me l mf mg">MapStyleOptions style = MapStyleOptions.<em class="ke">loadRawResourceStyle</em>(this.context, R.raw.my_map_style);<br/>map.setMapStyle(style);</span></pre><p id="b1a6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">或者如果你的地图样式以其他方式存储(也许作为一个Firebase远程配置)，你可以直接创建<em class="ke">地图选项样式</em>:</p><pre class="kg kh ki kj fq lx ly lz ma aw mb dt"><span id="a29c" class="mc kv hu ly b fv md me l mf mg">String myMapStyle = "[map style here]";<br/>MapStyleOptions style = new MapStyleOptions(myMapStyle);<br/>map.setMapStyle(style);</span></pre><p id="b55a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就是这样！您的地图现在有了自定义样式。发货吧！🛳 </p><h1 id="eea7" class="ku kv hu bd kw kx mr kz la lb ms ld le lf mt lh li lj mu ll lm ln mv lp lq lr dt translated">MapStyleManager</h1><p id="8db1" class="pw-post-body-paragraph ir is hu it b iu ls iw ix iy lt ja jb jc lu je jf jg lv ji jj jk lw jm jn jo hn dt translated">为了实现细节层次的地图样式，我创建了一个自定义类—<strong class="it hv"><em class="ke">MapStyleManager</em></strong>。</p><p id="2f60" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个类本质上设置了一个<em class="ke"> OnCameraMoveListener，</em>并在相机移动时为当前缩放级别设置合适的地图样式。</p><p id="6a34" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你可以在这里得到它的要点<a class="ae jp" href="https://goo.gl/UdMJ8u" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="e0bc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用<em class="ke">地图样式管理器</em>就像添加地图样式和指定最小缩放级别一样简单。</p><p id="2b72" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当相机缩放级别达到该样式的最低级别时，将应用该样式。简单！</p><pre class="kg kh ki kj fq lx ly lz ma aw mb dt"><span id="2ffb" class="mc kv hu ly b fv md me l mf mg">MapStyleManager styleManager = MapStyleManager.<em class="ke">attachToMap</em>(this, map);<br/>styleManager.addStyle(0, R.raw.<em class="ke">map_style_1</em>);<br/>styleManager.addStyle(10, R.raw.<em class="ke">map_style_2</em>);<br/>styleManager.addStyle(12, R.raw.<em class="ke">map_style_3</em>);</span></pre><p id="857f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">结果如下:</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff mw"><img src="../Images/2ff8778308de1489a4291e0934dd1c7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/1*xXy4hEh9p_hL1CzwUWKs3Q.gif"/></div></figure><p id="c846" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">不错吧？</p><p id="00e2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">它不像我希望的那样顺利。谷歌地图第一次加载样式时，样式之间的转换可能会有点不协调。如果有一个预加载样式的选项就好了。</p><h1 id="6b83" class="ku kv hu bd kw kx mr kz la lb ms ld le lf mt lh li lj mu ll lm ln mv lp lq lr dt translated">这是一个总结！</h1><p id="3101" class="pw-post-body-paragraph ir is hu it b iu ls iw ix iy lt ja jb jc lu je jf jg lv ji jj jk lw jm jn jo hn dt translated">这是对谷歌地图Android API自定义样式的简要概述。</p><p id="042b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我迫不及待地想看到漂亮的谷歌地图风格无处不在！</p><p id="815f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">很高兴看到地图团队解决了一些长期存在的功能需求。继续努力谷歌！</p></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><p id="70c2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你喜欢这篇文章，一定要给它一些👏在推特上关注我<a class="ae jp" href="http://twitter.com/athornz" rel="noopener ugc nofollow" target="_blank"/>。</p><div class="kg kh ki kj fq ab cb"><figure class="mx kk my mz na nb nc paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mx kk my mz na nb nc paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mx kk my mz na nb nc paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="nd ne nf"><p id="f922" class="ir is ke it b iu iv iw ix iy iz ja jb ng jd je jf nh jh ji jj ni jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is ke it b iu iv iw ix iy iz ja jb ng jd je jf nh jh ji jj ni jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kg kh ki kj fq kk fe ff paragraph-image"><a href="https://goo.gl/Ahtev1"><div class="fe ff nj"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></a></figure></div></div>    
</body>
</html>