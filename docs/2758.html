<html>
<head>
<title>Building a CMS-powered Website with MeteorJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用MeteorJS构建一个基于CMS的网站</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/meteor-cms-website-tutorial-2e8da489f92f?source=collection_archive---------6-----------------------#2017-02-17">https://medium.com/hackernoon/meteor-cms-website-tutorial-2e8da489f92f?source=collection_archive---------6-----------------------#2017-02-17</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/56f309a0b4b0f22d53c4648784c111ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TWMx_EwfdYI3taqaXsuLVQ.png"/></div></div></figure><p id="099c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本教程中，我将向你展示如何使用<a class="ae ka" href="https://buttercms.com" rel="noopener ugc nofollow" target="_blank"> ButterCMS </a>向<a class="ae ka" href="https://www.meteor.com/" rel="noopener ugc nofollow" target="_blank"> MeteorJS </a>网站添加CMS。本教程的完成代码是Github 上的<a class="ae ka" href="https://github.com/buttercms/meteor-cms-website" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="8647" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae ka" href="https://www.meteor.com/" rel="noopener ugc nofollow" target="_blank"> Meteor </a>是一个使用Node.js编写的免费开源<a class="ae ka" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a> web框架。</p><p id="a81b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae ka" href="https://buttercms.com" rel="noopener ugc nofollow" target="_blank"> ButterCMS </a>是一个托管的<a class="ae ka" href="https://buttercms.com/cms/" rel="noopener ugc nofollow" target="_blank"> API优先的CMS和内容API </a>，让你使用任何<a class="ae ka" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程</a>语言构建CMS驱动的应用。Butter被称为“<a class="ae ka" href="https://buttercms.com" rel="noopener ugc nofollow" target="_blank"> headless cms </a>”，它类似于WordPress，只是你可以用自己选择的语言建立网站，并使用API插入动态内容。您可以使用您的Github帐户登录ButterCMS。</p><h1 id="51c3" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">入门指南</h1><p id="015a" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我们将从一个基本的流星网站开始，它使用<a class="ae ka" href="http://blazejs.org" rel="noopener ugc nofollow" target="_blank">火焰模板</a>和<a class="ae ka" href="https://github.com/iron-meteor/iron-router/" rel="noopener ugc nofollow" target="_blank">铁路由器</a>进行路由。如果您愿意，可以换入另一个模板解决方案，如React。</p><p id="cb38" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">获取<a class="ae ka" href="https://github.com/buttercms/meteor-cms-website-boilerplate" rel="noopener ugc nofollow" target="_blank">启动器代码</a>并确保其运行:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="635c" class="ln kc hu lj b fv lo lp l lq lr">git clone <a class="ae ka" href="https://github.com/buttercms/meteor-cms-website-boilerplate.git" rel="noopener ugc nofollow" target="_blank">https://github.com/buttercms/meteor-cms-website-boilerplate.git</a><br/>cd meteor-cms-website-boilerplate<br/>meteor npm install<br/>meteor</span></pre><p id="1efd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你是MeteorJS的新手，查看一下他们的<a class="ae ka" href="https://guide.meteor.com/#quickstart" rel="noopener ugc nofollow" target="_blank">快速入门指南</a>的介绍。</p><h1 id="bc0b" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">设置页面模板</h1><p id="027c" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我们要做的第一件事是在<code class="eh ls lt lu lj b">client/main.js</code>中创建一个基本的页面模板。使用ButterCMS，您的客户端将能够创建使用该模板的定制页面。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="5309" class="ln kc hu lj b fv lo lp l lq lr">&lt;head&gt;<br/>  &lt;title&gt;Meteor Website&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>&lt;/body&gt;</span><span id="ceeb" class="ln kc hu lj b fv lv lp l lq lr">&lt;template name="home"&gt;<br/>  Hello world!<br/>&lt;/template&gt;</span><span id="3f53" class="ln kc hu lj b fv lv lp l lq lr">&lt;template name="page"&gt;<br/>  &lt;h2&gt;{{page.title}}&lt;/h2&gt;<br/>  &lt;p&gt;{{page.summary}}&lt;/p&gt;<br/>  {{{page.content}}}<br/>&lt;/template&gt;</span></pre><p id="1a3d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">注意，我们在<code class="eh ls lt lu lj b">page.content</code>周围使用了三个括号。<a class="ae ka" href="http://blazejs.org/api/spacebars.html#Getting-Started" rel="noopener ugc nofollow" target="_blank"> Blaze templates </a>中的三支撑模板标签用于插入原始HTML。总的来说，yu在允许原始HTML时应该小心，因为它暴露了安全威胁，如跨站脚本。因为我们的页面内容将由我们的客户端生成，并由内容管理系统提供，所以我们可以假设它是安全的。</p><h1 id="8c66" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">设置ButterCMS</h1><p id="7e12" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">现在我们将设置<a class="ae ka" href="https://buttercms.com" rel="noopener ugc nofollow" target="_blank"> ButterCMS </a>以便我们的客户端可以使用这个模板创建和管理页面。</p><p id="6433" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae ka" href="https://buttercms.com/github/oauth" rel="noopener ugc nofollow" target="_blank">用Github登录Butter</a>，点击侧边栏上的“新工作区”链接。我们将这个工作区称为“自定义页面”。</p><figure class="le lf lg lh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lw"><img src="../Images/23aedf5d17fc39ce1696206f30832638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZtPee5F0OJuQ6B-qAv1hKw.png"/></div></div></figure><p id="2173" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来，我们将创建一个新的内容字段。内容域提供了一个用于编辑ButterCMS中内容的表单域，以及一个用于访问和显示网站内容的API键。我们将创建一个名为<code class="eh ls lt lu lj b">pages</code>的新集合。</p><figure class="le lf lg lh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lw"><img src="../Images/8c25b1c81b979e6b1d74125632066451.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J9afi_yY2Vnv7uBRPvdeGQ.png"/></div></div></figure><p id="7fd5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在下一个屏幕上，我们将为集合中的项目设置属性。请注意，我们使用了与我们的Meteor模板中相同的键。</p><figure class="le lf lg lh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lx"><img src="../Images/94f25290612b4c360fcb83b04ba69424.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PO7zNIL2LhvTX49iIKU5nQ.png"/></div></div></figure><p id="22d7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后，点击侧边栏中的“自定义页面”链接，创建您的第一个页面。</p><figure class="le lf lg lh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lw"><img src="../Images/1e9dc5bfcabb108b30003f1a9833edef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KAkRcT8NbIbs0KXcjwSvow.png"/></div></div></figure><h1 id="432b" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">集成巴特CMS</h1><p id="a5e7" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我们已经在ButterCMS中创建了我们的第一个页面，现在让我们将它显示在我们的网站上！</p><p id="792b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先安装<a class="ae ka" href="https://github.com/buttercms/buttercms-node" rel="noopener ugc nofollow" target="_blank"> ButterCMS Node.js API客户端</a>:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="7bd2" class="ln kc hu lj b fv lo lp l lq lr">meteor npm install buttercms</span></pre><p id="5fce" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后创建一个动态路由，从ButterCMS获取页面内容，并使用我们之前创建的模板呈现它。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="ead4" class="ln kc hu lj b fv lo lp l lq lr">import Butter from 'buttercms';<br/>import './main.html';</span><span id="58f5" class="ln kc hu lj b fv lv lp l lq lr">const butter = Butter('de55d3f93789d4c5c26fb07445b680e8bca843bd');</span><span id="9f45" class="ln kc hu lj b fv lv lp l lq lr">Router.route('/', function() {<br/>  this.render("Home")<br/>});</span><span id="41f9" class="ln kc hu lj b fv lv lp l lq lr">// Dynamic pages<br/>Router.route('/:slug', function() {<br/>  let slug = this.params.slug;<br/>  <br/>  let resp = await butter.content.retrieve(['pages[slug='+slug+']'])</span><span id="433a" class="ln kc hu lj b fv lv lp l lq lr">  // Get first item in returned collection of pages<br/>  let page = resp.data.data.pages[0];</span><span id="be58" class="ln kc hu lj b fv lv lp l lq lr">  this.render('Page', {data: {page: page}});<br/>});</span></pre><p id="967b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">浏览到<code class="eh ls lt lu lj b"><a class="ae ka" href="http://localhost:3000/first-page" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/first-page</a></code>，你应该会看到ButterCMS显示的内容。</p><h1 id="c340" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">搜索引擎优化</h1><p id="df92" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我们的动态页面工作正常，但是来自搜索引擎和社交网络的爬虫不执行Javascript，所以我们的博客SEO很糟糕。</p><p id="23a7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先，我们将安装<a class="ae ka" href="https://atmospherejs.com/manuelschoebel/ms-seo" rel="noopener ugc nofollow" target="_blank"> ms-seo助手包</a>，并确保我们有好的HTML标题和描述。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="2ce0" class="ln kc hu lj b fv lo lp l lq lr">meteor add check<br/>meteor add manuelschoebel:ms-seo</span><span id="9ea1" class="ln kc hu lj b fv lv lp l lq lr">Router.route('/:slug', function() {<br/>  let slug = this.params.slug;<br/>  <br/>  let resp = await butter.content.retrieve(['pages[slug='+slug+']'])</span><span id="3f3b" class="ln kc hu lj b fv lv lp l lq lr">  // Get first item in returned collection of pages<br/>  let page = resp.data.data.pages[0];</span><span id="4b8f" class="ln kc hu lj b fv lv lp l lq lr">  SEO.set({<br/>    title: page.title,<br/>    meta: {<br/>      description: page.description<br/>    }<br/>  });<br/>    <br/>  this.render('Page', {data: {page: page}});<br/>});</span></pre><p id="ef89" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ms-seo提供了一个简单的<code class="eh ls lt lu lj b">SEO.set</code>方法来配置标签。您可以通过检查DOM来验证标签设置是否正确。</p><p id="d433" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后，我们希望服务器呈现我们的博客，以便搜索引擎和Twitter这样的社交网络可以抓取它。</p><p id="aa91" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最简单的方法是使用<a class="ae ka" href="https://www.meteor.com/galaxy/" rel="noopener ugc nofollow" target="_blank"> Meteor的托管平台Galaxy </a>，它提供了集成的预渲染服务(Prerender.io)。Prerender.io服务作为Galaxy的一部分免费提供。</p><p id="af42" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">遵循流星的<a class="ae ka" href="https://guide.meteor.com/deployment.html#galaxy" rel="noopener ugc nofollow" target="_blank">指南部署到星系</a>。要打开内置的Prerender.io集成，请添加<a class="ae ka" href="https://atmospherejs.com/mdg/seo" rel="noopener ugc nofollow" target="_blank"> Galaxy SEO </a>包:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="56bf" class="ln kc hu lj b fv lo lp l lq lr">meteor add mdg:seo</span></pre><p id="de58" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你不想使用Galaxy，可以手动集成Prerender.io，另一个选择是在你的应用中实现服务器端渲染。在撰写本文时，Meteor本身并不支持服务器端渲染，但是您可以查看SSR支持的<a class="ae ka" href="https://github.com/meteorhacks/meteor-ssr" rel="noopener ugc nofollow" target="_blank"> Meteor SSR </a>或<a class="ae ka" href="https://github.com/kadirahq/flow-router/tree/ssr" rel="noopener ugc nofollow" target="_blank"> Flow Router的</a> alpha版本。</p><h1 id="9ea3" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">包裹</h1><p id="4d83" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">MeteorJS是一个强大的开发平台，它解决了为web、移动和桌面构建Javascript应用程序的许多难题。然而，没有太多的CMS选项可用。</p><p id="5ac3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一定要看看<a class="ae ka" href="https://buttercms.com/" rel="noopener ugc nofollow" target="_blank"> ButterCMS </a>，这是一个<a class="ae ka" href="https://buttercms.com/cms/" rel="noopener ugc nofollow" target="_blank">托管的API优先CMS和内容API </a>以及博客引擎，它让你使用任何编程语言来构建CMS驱动的应用，包括<a class="ae ka" href="https://buttercms.com/ruby-cms" rel="noopener ugc nofollow" target="_blank"> Ruby </a>、<a class="ae ka" href="https://buttercms.com/rails-cms" rel="noopener ugc nofollow" target="_blank"> Rails </a>、<a class="ae ka" href="https://buttercms.com/nodejs-cms" rel="noopener ugc nofollow" target="_blank"> Node.js </a>、<a class="ae ka" href="https://buttercms.com/asp-net-cms" rel="noopener ugc nofollow" target="_blank">。网</a>、<a class="ae ka" href="https://buttercms.com/python-cms" rel="noopener ugc nofollow" target="_blank">蟒蛇</a>、<a class="ae ka" href="https://buttercms.com/phoenix-cms" rel="noopener ugc nofollow" target="_blank">凤凰</a>、<a class="ae ka" href="https://buttercms.com/django-cms" rel="noopener ugc nofollow" target="_blank">姜戈</a>、<a class="ae ka" href="https://buttercms.com/react-cms" rel="noopener ugc nofollow" target="_blank">反应</a>、<a class="ae ka" href="https://buttercms.com/angular-cms" rel="noopener ugc nofollow" target="_blank">角</a>、<a class="ae ka" href="https://buttercms.com/golang-cms" rel="noopener ugc nofollow" target="_blank">围棋</a>、<a class="ae ka" href="https://buttercms.com/php-cms" rel="noopener ugc nofollow" target="_blank"> PHP </a>、<a class="ae ka" href="https://buttercms.com/laravel-cms" rel="noopener ugc nofollow" target="_blank">拉拉夫</a>、<a class="ae ka" href="https://buttercms.com/elixir-cms" rel="noopener ugc nofollow" target="_blank">仙丹</a>、<a class="ae ka" href="https://buttercms.com/meteor-cms" rel="noopener ugc nofollow" target="_blank">流星</a>。</p><p id="22d3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们希望您喜欢学习如何使用ButterCMS在Meteor中构建CMS驱动的应用程序。如果您有任何问题，请通过roger@buttercms.com<a class="ae ka" href="mailto:roger@buttercms.com" rel="noopener ugc nofollow" target="_blank">或Twitter </a>上的或<a class="ae ka" href="https://twitter.com/buttercms" rel="noopener ugc nofollow" target="_blank">联系我们。</a></p><div class="le lf lg lh fq ab cb"><figure class="ly iv lz ma mb mc md paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="ly iv lz ma mb mc md paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="ly iv lz ma mb mc md paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="me mf mg"><p id="f922" class="jc jd mh je b jf jg jh ji jj jk jl jm mi jo jp jq mj js jt ju mk jw jx jy jz hn dt translated"><a class="ae ka" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae ka" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae ka" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ka" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jc jd mh je b jf jg jh ji jj jk jl jm mi jo jp jq mj js jt ju mk jw jx jy jz hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ka" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ka" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="le lf lg lh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ml"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="le lf lg lh fq iv"><div class="bz el l di"><div class="mm mn l"/></div></figure></div></div>    
</body>
</html>