<html>
<head>
<title>Three WombatOAM Agents and a RabbitMQ</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">三个WombatOAM特工和一个RabbitMQ</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/three-wombatoam-agents-and-a-rabbitmq-d5e2c0513fab?source=collection_archive---------29-----------------------#2017-11-14">https://medium.com/hackernoon/three-wombatoam-agents-and-a-rabbitmq-d5e2c0513fab?source=collection_archive---------29-----------------------#2017-11-14</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="8278" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">作者<a class="ae jp" href="http://www.twitter.com/dube_aya" rel="noopener ugc nofollow" target="_blank">阿扬达·杜贝</a></p><p id="65f1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在你继续之前，你应该知道你可以今天用WombatOAM 3.0.0beta  的<a class="ae jp" href="https://www.erlang-solutions.com/products/wombat-oam.html#FreeTrial" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv"> 45天免费试用来测试WombatOAM。</strong></a></p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/ec976fa6081e24f4c57dfffc751a6147.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rAC-8sk4MfcoBrtyo5trBQ.png"/></div></div></figure><p id="2443" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从版本2.7.0开始，<a class="ae jp" href="http://bit.ly/2hwI6HZ" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv"> WombatOAM </strong> </a>增加了三个<a class="ae jp" href="http://bit.ly/2hwqn3v" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv"> RabbitMQ </strong> </a>代理，它们是作为RabbitMQ主插件的一部分提供的。这三个代理更特定于RabbitMQ的内部元素，即<strong class="it hv"> <em class="kc">队列</em> </strong>、<strong class="it hv"> <em class="kc">通道</em> </strong>和<strong class="it hv"> <em class="kc">连接</em> </strong>，每个代理为单独配置和选择的度量属性提供更精细和更详细的度量。</p><p id="068f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">以前，WombatOAM的单个RabbitMQ插件会提供聚合指标的概述，而现在，这三个额外的代理提供了所管理的RabbitMQ节点的更低级别的指标信息。这些如下图所示。</p><h1 id="240e" class="kd ke hu bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">RabbitMQ队列代理</h1><p id="54f7" class="pw-post-body-paragraph ir is hu it b iu lb iw ix iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo hn dt translated"><strong class="it hv"> RabbitMQ队列</strong>代理提供了单独监控队列的能力，每个队列的以下属性是可配置的。</p><ul class=""><li id="fed0" class="lg lh hu it b iu iv iy iz jc li jg lj jk lk jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">messages</code></li><li id="98de" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">messages_ready</code></li><li id="3028" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">messages_unacknowledged</code></li><li id="48b4" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">messages_ready_ram</code></li><li id="6082" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">messages_unacknowledged_ram</code></li><li id="8267" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">messages_ram</code></li><li id="43ec" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">messages_persistent</code></li><li id="de10" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">message_bytes</code></li><li id="21b3" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">message_bytes_ready</code></li><li id="2f99" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">message_bytes_unacknowledged</code></li><li id="d382" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">message_bytes_ram</code></li><li id="1bfc" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">message_bytes_persistent</code></li><li id="9abb" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">disk_reads</code></li><li id="1cbd" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">disk_writes</code></li><li id="9ac2" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">consumers</code></li><li id="eeff" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">memory</code></li></ul><p id="0614" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">默认情况下，RabbitMQ队列代理被配置为监视被监视节点上每个队列的消息总数。关于如何配置这个代理的更多细节可以在WombatOAM文档中找到。下图说明了该代理的使用情况:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff ly"><img src="../Images/5aeb08b7925e07d5cfeb3ef6eb319a9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QCKD79he2NGzN3SL.png"/></div></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek"><em class="md">RabbitMQ Queues Plugin message metric illustration</em></figcaption></figure><h1 id="15f5" class="kd ke hu bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated"><strong class="ak"> RabbitMQ渠道代理</strong></h1><p id="2f47" class="pw-post-body-paragraph ir is hu it b iu lb iw ix iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo hn dt translated"><strong class="it hv"> RabbitMQ通道</strong>代理提供了单独监控通道的能力，对于每个捕获的(活动的)通道，以下属性是可配置的。</p><ul class=""><li id="a909" class="lg lh hu it b iu iv iy iz jc li jg lj jk lk jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">number</code></li><li id="5b87" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">reductions</code></li><li id="0751" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">consumer_count</code></li><li id="4bba" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">messages_unacknowledged</code></li><li id="ccd9" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">messages_unconfirmed</code></li><li id="ba0d" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">messages_uncommitted</code></li><li id="ba12" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">acks_uncommitted</code></li><li id="a59a" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">prefetch_count</code></li><li id="6d97" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">global_prefetch_count</code></li></ul><p id="c67d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下图显示了使用中的代理，其中的<code class="eh lp lq lr ls b">consumer_count</code>属性被配置为对所有通道进行监控:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff me"><img src="../Images/139e393d8f2987ef50f768519a0cade6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*drTbJuApm8xg8WI0.png"/></div></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek"><em class="md">RabbitMQ Channels Plugin message metric illustration</em></figcaption></figure><h1 id="248d" class="kd ke hu bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">RabbitMQ连接代理</h1><p id="615d" class="pw-post-body-paragraph ir is hu it b iu lb iw ix iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo hn dt translated"><strong class="it hv"> RabbitMQ Connections </strong>代理提供了单独监控连接的能力，对于每个捕获的(活动的)连接，可以配置以下属性。</p><ul class=""><li id="36ed" class="lg lh hu it b iu iv iy iz jc li jg lj jk lk jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">frame_max</code></li><li id="79cc" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">channel_max</code></li><li id="fb41" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">recv_oct</code></li><li id="7496" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">recv_cnt</code></li><li id="9170" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">send_oct</code></li><li id="7342" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">send_cnt</code></li><li id="335d" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">send_pend</code></li><li id="6d95" class="lg lh hu it b iu lt iy lu jc lv jg lw jk lx jo ll lm ln lo dt translated"><code class="eh lp lq lr ls b">channels</code></li></ul><p id="7c71" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下图说明了使用中的代理，其中的<code class="eh lp lq lr ls b">channels</code>属性被配置为对所有连接进行监视:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff mf"><img src="../Images/8b420335d83fba0e8c5facc025b3fc5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1bL6I_yjbj8mdcGc.png"/></div></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek"><em class="md">RabbitMQ Connections Plugin message metric illustration</em></figcaption></figure><p id="0a9e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这篇博文摘自Ayanda Dube的<a class="ae jp" href="http://bit.ly/2hxGiib" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv"> RabbitMQ操作&amp;使用WombatOAM </strong> </a>维护。点击 下载<a class="ae jp" href="http://bit.ly/2hxGiib" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv">全攻略。</strong></a></p></div><div class="ab cl mg mh hc mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hn ho hp hq hr"><p id="19a6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="kc">原载于</em><a class="ae jp" href="http://bit.ly/2AGZnSz" rel="noopener ugc nofollow" target="_blank"><em class="kc">www.erlang-solutions.com</em></a><em class="kc">。</em></p></div></div>    
</body>
</html>