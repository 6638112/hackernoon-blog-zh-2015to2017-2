<html>
<head>
<title>HTML5’s responsive image implementation is missing a way to handle aspect ratios</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HTML5的响应图像实现缺少一种处理纵横比的方法</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-crucial-feature-that-html5s-responsive-image-implementation-is-still-missing-9f7b21f8c988?source=collection_archive---------11-----------------------#2017-11-30">https://medium.com/hackernoon/a-crucial-feature-that-html5s-responsive-image-implementation-is-still-missing-9f7b21f8c988?source=collection_archive---------11-----------------------#2017-11-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="4856" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">HTML5的responsive image实现提供了一个极好的工具来解决大量图片网站的性能问题。但是仍然缺少一个关键的特征。</h2></div><p id="8c30" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="kf">最初发表于</em><a class="ae kg" href="http://fabianstiehle.com/HTML5s-missing-responsive-images-feature" rel="noopener ugc nofollow" target="_blank"><em class="kf"/></a><em class="kf">。</em></p><p id="03f5" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果你不知道响应图像是如何工作的，我推荐你阅读Eric Portis在Smashing Magazine 上的文章，因为我不会详细讨论其中的机制。</p><p id="9002" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">但是，要提醒您的是，一个简单的标记应该是这样的:</p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="km kn l"/></div></figure><p id="5676" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在当前的语法中，我们只在宽度上定义了我们的<a class="ae kg" href="https://hackernoon.com/tagged/image" rel="noopener ugc nofollow" target="_blank">图像</a>约束。这基本上没问题，因为大多数布局都受到网站宽度或设备宽度的限制。事实上，这就是我们在CSS中制作响应图像的方式:</p><p id="f040" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh ko kp kq kr b">img { width: 100%; height: auto; }</code></p><p id="e7db" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">但是等等，难道没有一个好的理由来定义一个图像的绝对高度吗？是啊！这一切都归结于网页的渲染。当浏览器加载图片时，它还不知道图片的尺寸。然而，在许多情况下，由于图像没有被<a class="ae kg" href="http://fabianstiehle.com/render-path" rel="noopener ugc nofollow" target="_blank">渲染阻塞</a>，网站的其余部分已经被渲染，而图像仍然在加载。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="fe ff ks"><img src="../Images/2c31d49c0bbf3397a5f657d90f78f331.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ja6AHQjeXPuY25ol.jpg"/></div></div><figcaption class="kz la fg fe ff lb lc bd b be z ek">A normal none responsive image with fixed width and height and a grey background set via CSS. The image is not yet loaded.</figcaption></figure><p id="99d3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在这个阶段，浏览器知道图像的两件事:<code class="eh ko kp kq kr b">width: 100%;</code>和<code class="eh ko kp kq kr b">height: auto;</code>。浏览器可以计算宽度，因为它知道父容器的宽度。然而，高度是相对于图像的宽高比而言的，只有当图像被加载后，浏览器才能知道。目前，浏览器必须猜测高度，但它总是会出错。(Firefox guess是方形格式，chrome将初始高度设为0px)。一旦浏览器知道了图像的实际高度，它就必须重新绘制它。这种重绘通常会强制重绘一堆其他元素。你可能在坏消息网站上注意到了这一点，你已经在阅读一篇文章，突然所有的文字开始跳跃。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="fe ff ld"><img src="../Images/561c14d2c6eaf0cad7df2983395b2e44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YdPOzrVXYf4iUXbu.jpg"/></div></div><figcaption class="kz la fg fe ff lb lc bd b be z ek">A responsive image with variable height in chrome. I marked the position of the image in red. Chrome sets the initial height to zero.</figcaption></figure><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="fe ff le"><img src="../Images/98476b5a08fb28d6fe24562dbad5efab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iFs4m1fgz0n50SqI.jpg"/></div></div><figcaption class="kz la fg fe ff lb lc bd b be z ek">The image pushes the text to the bottom once it’s loaded.</figcaption></figure><p id="0ca0" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">有一个基于容器宽度和长宽比设置图像高度的巧妙技巧。但是这是一项相当大的投资，因为它需要你自己计算长宽比，并把它注入到HTML 标记中。</p><h1 id="da47" class="lf lg hu bd lh li lj lk ll lm ln lo lp ja lq jb lr jd ls je lt jg lu jh lv lw dt translated">如何解决这个问题？</h1><p id="2cd4" class="pw-post-body-paragraph jj jk hu jl b jm lx iv jo jp ly iy jr js lz ju jv jw ma jy jz ka mb kc kd ke hn dt translated">早在2014年就有<a class="ae kg" href="https://github.com/ResponsiveImagesCG/picture-element/issues/85" rel="noopener ugc nofollow" target="_blank">讨论解决这个</a><a class="ae kg" href="https://lists.w3.org/Archives/Public/www-style/2016Jun/0072.html" rel="noopener ugc nofollow" target="_blank">问题</a>。看起来一个额外的基于身高的值可能最终会到来。</p><p id="0934" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh ko kp kq kr b">srcset="https://via.placeholder.com/150x100 150w 100h</code></p><p id="6901" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">但是这能解决我们刚刚讨论的纵横比问题吗？我们将不得不看看。如果你想帮助推动事情的发展，你可以看看GitHub上的讨论。这个问题受到的关注越多越好。</p></div><div class="ab cl mc md hc me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hn ho hp hq hr"><p id="b70c" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="kf">原载于</em><a class="ae kg" href="http://fabianstiehle.com/HTML5s-missing-responsive-images-feature" rel="noopener ugc nofollow" target="_blank"><em class="kf">fabianstiehle.com</em></a><em class="kf">。</em></p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="mj kn l"/></div></figure></div></div>    
</body>
</html>