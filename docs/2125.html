<html>
<head>
<title>How to recreate GitHub’s contribution graph</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何再造GitHub的贡献图</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-recreate-githubs-contribution-graph-a0a8d4d91011?source=collection_archive---------6-----------------------#2017-01-07">https://medium.com/hackernoon/how-to-recreate-githubs-contribution-graph-a0a8d4d91011?source=collection_archive---------6-----------------------#2017-01-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="5faa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我相信大多数读到这篇文章的人都知道GitHub和Reddit。作为两者的狂热用户，我想使用Reddit的数据重新创建GitHub的热图/贡献图，以了解它的实现，并以简洁的可视化方式查看我的Reddit活动。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/745576b9a989ef1ec4c8b4e4e353f8ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*irjodO3hEjM5Jpn1zVlptw.png"/></div></div></figure><p id="d4b0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我使用了<a class="ae kb" href="https://d3js.org/" rel="noopener ugc nofollow" target="_blank"> d3.js </a>，用于构建图形的javascript库，<a class="ae kb" href="https://jquery.com/" rel="noopener ugc nofollow" target="_blank"> jQuery </a>，超级方便的DOM操作，以及B <a class="ae kb" href="http://getbootstrap.com/" rel="noopener ugc nofollow" target="_blank"> ootstrap </a>，对于设计技能较差的开发人员来说非常棒。</p><p id="a5e6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先，我将讨论UI组件以及d3在其中是如何使用的。这个<a class="ae kb" href="http://bl.ocks.org/mbostock/4063318" rel="noopener ugc nofollow" target="_blank">例子</a>给了我很多关于UI的帮助。对于GitHub的用例以及这个用例，图表总是一年的长度，这使得它更简单，因为图表将总是相同的长度。</p><p id="baf1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">整个图是一个SVG元素，它包含子元素，这些子元素也是SVG。每个代表一天的方块将包含一个格式为<code class="eh kd ke kf kg b">%Y-%m-%d</code>的<em class="kc"> id </em>标签，类似于<code class="eh kd ke kf kg b">2017-01-06</code>。正方形首先被渲染成相同的颜色，<code class="eh kd ke kf kg b">#eee</code>。</p><p id="c45c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">正方形的位置由它的星期和日子决定。<em class="kc"> x </em>位置由星期号<code class="eh kd ke kf kg b">%U</code>决定。</p><blockquote class="kh ki kj"><p id="2dfa" class="ir is kc it b iu iv iw ix iy iz ja jb kk jd je jf kl jh ji jj km jl jm jn jo hn dt translated">YYYY的第1周以星期日开始(根据%U)。一年中第一周之前的日子在第0周。</p></blockquote><p id="f358" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">y位置由一周中的某一天决定。周日是第一个，周六是最后一个，无论是0索引还是1索引都没有区别。这看起来会像</p><pre class="jq jr js jt fq kn kg ko kp aw kq dt"><span id="65cf" class="kr ks hu kg b fv kt ku l kv kw">d3.select('.js-heatmap')<br/>  .enter()<br/>  .append('svg')<br/>  .enter()<br/>  .append('rect')<br/>  .attr('width', CELL_SIZE)<br/>  .attr('height', CELL_SIZE)<br/>  .attr('x', (d) =&gt; d3.timeFormat('%U')(d) * CELL_SIZE)<br/>  .attr('y', (d) =&gt; d.getDay() * CELL_SIZE)</span></pre><p id="3a11" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于正方形/网格着色，每个网格需要一个等级或分数来确定它的颜色。在这一点上，让我们假设每个网格已经有一个分数。(我会在这下面讨论我是怎么用Reddit的API计算分数的)。</p><p id="8d26" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">确定一个网格的颜色取决于几个因素:颜色的数量，网格等级和等级极值(最小值和最大值)。基本上，分数将被投射到基于颜色数量的标尺上。在这种情况下，我使用7种颜色，因此排名最高的分数将获得颜色#7，分数接近平均值的分数将获得颜色#3，依此类推。使用d3的API，如下所示。</p><pre class="jq jr js jt fq kn kg ko kp aw kq dt"><span id="44de" class="kr ks hu kg b fv kt ku l kv kw">d3.scaleQuantize()<br/>  .domain([MIN, MAX])<br/>  .range(d3.range(NUMBER_OF_COLORS)<br/>  .map((d) =&gt; `color${d}`)); // Assign the grid the css class.</span></pre><p id="40f0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我将颜色分类到一个css类中，如下所示。</p><pre class="jq jr js jt fq kn kg ko kp aw kq dt"><span id="5417" class="kr ks hu kg b fv kt ku l kv kw">.color0 { fill: #d6e685 }<br/>.color1 { fill: #44a340 }<br/>.color2 { fill: #28752d }<br/>.color3 { fill: #1e6823 }<br/>.color4 { fill: #365e2f }<br/>.color5 { fill: #144e12 }</span></pre></div><div class="ab cl kx ky hc kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hn ho hp hq hr"><p id="a832" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我如何使用Reddit的API获取特定用户的数据。我用Reddit不同类型的贡献来计算一天的活动总量。例如，一天中提交的帖子、评论、向上投票和向下投票的数量转化为总分。幸运的是，这些对象的端点是公共的，所以当用户输入用户名时。因此，我可以轻松地发出一个GET请求或多个请求来提取数据。一旦获取了所有数据，就可以使用这些数据来呈现热图。</p><p id="853f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个工具的源代码在https://github.com/vinnyoodles/reddit-heatmap的<a class="ae kb" href="https://github.com/vinnyoodles/reddit-heatmap" rel="noopener ugc nofollow" target="_blank"/>，工具在https://vinnyoodles.github.io/reddit-heatmap/的<a class="ae kb" href="https://vinnyoodles.github.io/reddit-heatmap/" rel="noopener ugc nofollow" target="_blank"/>发布。</p></div><div class="ab cl kx ky hc kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hn ho hp hq hr"><p id="8f25" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我是弗吉尼亚理工大学计算机科学专业的学生，喜欢写代码和举重💪。<a class="ae kb" href="https://www.linkedin.com/in/vinnyoodles" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a> <a class="ae kb" href="https://github.com/vinnyoodles" rel="noopener ugc nofollow" target="_blank"> Github </a></p><div class="jq jr js jt fq ab cb"><figure class="le ju lf lg lh li lj paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="le ju lf lg lh li lj paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="le ju lf lg lh li lj paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="kh ki kj"><p id="f922" class="ir is kc it b iu iv iw ix iy iz ja jb kk jd je jf kl jh ji jj km jl jm jn jo hn dt translated"><a class="ae kb" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是阿妹家庭的一员。我们现在<a class="ae kb" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kb" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is kc it b iu iv iw ix iy iz ja jb kk jd je jf kl jh ji jj km jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kb" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kb" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff lk"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>