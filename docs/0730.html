<html>
<head>
<title>JavaScript: Desktop Applications with NWJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript:带有NWJS的桌面应用程序</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/javascript-desktop-applications-with-nwjs-40d7c5f56fa3?source=collection_archive---------1-----------------------#2016-04-04">https://medium.com/hackernoon/javascript-desktop-applications-with-nwjs-40d7c5f56fa3?source=collection_archive---------1-----------------------#2016-04-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="c061" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于JavaScript 来说，这是激动人心的几年；新的设备和技术正在拓展我们对语言的认识。</p><p id="6be9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">很多年来，我的游乐场就是浏览器……它并不总是一个好的游乐场，到处都是IE7和他的哥哥IE6这样的恶霸，但随着智能手机和平板电脑的出现，事情开始发生变化，尽管是逐渐的。</p><p id="215b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">过了一会儿，事情开始变得有趣起来。我们从<a class="ae jp" href="https://hackernoon.com/tagged/browser" rel="noopener ugc nofollow" target="_blank">浏览器</a>，到移动浏览器，到混合应用程序，到本地应用程序，到后端，到云协作工具，到机器人和桌面应用程序<strong class="it hv">…所有这些都使用了JavaScript！</strong></p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/2b916c3f67573aad0c5f3b05d53daad3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*hgmGNNxw7yrdBv_d3YoO8w.jpeg"/></div></div></figure><p id="b157" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是我离题了，回到了手头的事情…在研究了JavaScript桌面应用程序的主题并浏览了一些框架之后，我偶然发现了<a class="ae jp" href="http://nwjs.io/" rel="noopener ugc nofollow" target="_blank"><strong class="it hv">nwjs . io</strong></a><strong class="it hv"/>用他们自己的话说:</p><blockquote class="kc kd ke"><p id="9813" class="ir is kf it b iu iv iw ix iy iz ja jb kg jd je jf kh jh ji jj ki jl jm jn jo hn dt translated">让您直接从DOM调用所有的<a class="ae jp" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> Node.js </a> <a class="ae jp" href="https://www.npmjs.org/" rel="noopener ugc nofollow" target="_blank">模块</a>，并启用一种使用所有Web技术编写应用程序的新方法。它以前被称为“node-webkit”项目。</p></blockquote><p id="3be4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">NWJS运行在NodeJS和Chromium上。我将花一些时间来解释如何设置它，创建一个构建过程，该过程将自动为所有支持的平台(Windows、Linux和Mac OS X-32和64位)打包您的应用程序，并开始使用您喜欢的框架和库开发桌面应用程序。</p></div><div class="ab cl kj kk hc kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hn ho hp hq hr"><p id="93e1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">请记住，在撰写本文时，NWJS的稳定版本是v0.13.2。我们还需要一些其他的东西:NodeJS和Gulp。</p><ol class=""><li id="2627" class="kq kr hu it b iu iv iy iz jc ks jg kt jk ku jo kv kw kx ky dt translated">下载并安装<a class="ae jp" href="https://nodejs.org" rel="noopener ugc nofollow" target="_blank"> NodeJS </a>和<a class="ae jp" href="http://nwjs.io" rel="noopener ugc nofollow" target="_blank"> NWJS </a> (SDK版本)</li><li id="1bf4" class="kq kr hu it b iu kz iy la jc lb jg lc jk ld jo kv kw kx ky dt translated">一旦安装了NodeJS，您还可以访问NPM(节点包管理器)，这是一个与NodeJS捆绑在一起的命令行工具。通过在终端中运行<strong class="it hv"> <em class="kf"> node -v </em> </strong>和<strong class="it hv"> <em class="kf"> npm -v </em> </strong>来测试是否一切正常。</li><li id="d32b" class="kq kr hu it b iu kz iy la jc lb jg lc jk ld jo kv kw kx ky dt translated">如果你在装有OSX 10.11 El Capitan的Mac上，你可能会经历一种奇怪的行为，即<strong class="it hv">节点</strong>工作，而<strong class="it hv"> npm </strong>不工作。阅读<a class="ae jp" href="https://coolestguidesontheplanet.com/installing-node-js-on-osx-10-10-yosemite/" rel="noopener ugc nofollow" target="_blank">这篇文章</a>……应该会有帮助。</li><li id="274e" class="kq kr hu it b iu kz iy la jc lb jg lc jk ld jo kv kw kx ky dt translated">你可能已经注意到NWJS没有安装程序……没关系，只需将该文件解压到你选择的位置，并将其添加到你的系统路径中，这样你就可以全局访问<strong class="it hv"> nw </strong>二进制文件。要做到这一点，打开一个终端并运行以下命令之一(<strong class="it hv">确保你没有拼错，并输入nwjs文件夹的正确路径！</strong>):</li></ol><pre class="jr js jt ju fq le lf lg lh aw li dt"><span id="59b4" class="lj lk hu lf b fv ll lm l ln lo"><strong class="lf hv"># windows</strong><br/>set PATH=%PATH%;X:\path\to\nwjs\</span><span id="5a30" class="lj lk hu lf b fv lp lm l ln lo"><strong class="lf hv"># linux &amp; mac</strong><br/>PATH=$PATH:~/path/to/nwjs</span><span id="9f08" class="lj lk hu lf b fv lp lm l ln lo"><strong class="lf hv"># restart all terminals and test if it's working by running</strong><br/>nw</span><span id="c947" class="lj lk hu lf b fv lp lm l ln lo"><strong class="lf hv"># if it works, a dummy desktop app will start</strong></span></pre><p id="876c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">至此，您已经完成了主设置。我们将使用Gulp来处理CSS &amp; JS缩小/打包和分发等任务，因此打开一个终端并安装它(如果您还没有安装的话),运行:</p><pre class="jr js jt ju fq le lf lg lh aw li dt"><span id="9d92" class="lj lk hu lf b fv ll lm l ln lo">npm install -g gulp</span></pre><p id="c370" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">NWJS与你用来创建桌面应用的框架和库无关，所以你可以选择任何你喜欢的。在这一点上，我想为所有不耐烦的读者提供一个到<a class="ae jp" href="https://github.com/raduGaspar/nwjs-boilerplate" rel="noopener ugc nofollow" target="_blank">nwjs-样板文件</a>的链接:</p><div class="lq lr fm fo ls lt"><a href="https://github.com/raduGaspar/nwjs-boilerplate" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab ej"><div class="lv ab lw cl cj lx"><h2 class="bd hv fv z el ly eo ep lz er et ht dt translated">raduga spar/nwjs-样板</h2><div class="ma l"><h3 class="bd b fv z el ly eo ep lz er et ek translated">nwjs桌面应用程序的样板文件设置</h3></div><div class="mb l"><p class="bd b gc z el ly eo ep lz er et ek translated">github.com</p></div></div><div class="mc l"><div class="md l me mf mg mc mh ka lt"/></div></div></a></div><p id="e32c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">样板文件非常简单。它有一些用于打包和构建应用程序的依赖项，以及一个加载一个CSS文件和一个JS文件的HTML文件(用作入口/起始点)。</p><p id="c970" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">JS文件简单地说明了如何打开开发人员工具；除非您自己将该功能添加到应用程序中，否则F12在这里不起作用，Ctrl+Shift+I也不起作用。</p><pre class="jr js jt ju fq le lf lg lh aw li dt"><span id="1dd8" class="lj lk hu lf b fv ll lm l ln lo">npm install -d # will install npm dependencies<br/>nw . # will run the app</span></pre><p id="6b0d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">别忘了最后那个点，它告诉<strong class="it hv"> <em class="kf"> nw </em> </strong>它运行app需要的<strong class="it hv"> <em class="kf"> package.json </em> </strong>在当前文件夹里；如果你不添加它，你会得到一个默认的<strong class="it hv"> <em class="kf"> nwjs </em> </strong>应用程序运行。</p><p id="3f8c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，让我们将样板文件分解成几个部分:</p><ul class=""><li id="e9d1" class="kq kr hu it b iu iv iy iz jc ks jg kt jk ku jo mi kw kx ky dt translated"><strong class="it hv"><em class="kf">package . JSON</em></strong>—这可以通过运行<strong class="it hv"> <em class="kf"> npm init </em> </strong>生成，通常在使用<strong class="it hv"> <em class="kf"> npm </em> </strong>的应用程序中可以找到。在NWJS中，它还有另一个功能:你用它来定义应用程序特定的参数，如:窗口大小、应用程序图标、透明度、工具栏、标题、位置和许多其他参数，以及应用程序入口/起始点……在我们的例子中，这将是<strong class="it hv"><em class="kf">main:index.html</em></strong>。</li><li id="8bde" class="kq kr hu it b iu kz iy la jc lb jg lc jk ld jo mi kw kx ky dt translated"><strong class="it hv"> <em class="kf"> package.json </em> </strong>中的<strong class="it hv"> <em class="kf"> devDependencies </em> </strong>是<strong class="it hv"> <em class="kf"> gulpfile.js </em> </strong>中定义的任务所需要的。</li><li id="b494" class="kq kr hu it b iu kz iy la jc lb jg lc jk ld jo mi kw kx ky dt translated"><strong class="it hv"><em class="kf">gulpfile . js</em></strong>—用于定义任务和自动化；在我们的例子中，我们使用gulp来读取<strong class="it hv"><em class="kf">index.html</em></strong>文件，并找到它加载的所有CSS和JS文件。然后，我们合并并缩小/美化所有的CSS和JS文件，生成一个新的<strong class="it hv">【index.html】</strong>来加载生成的CSS和JS资产，创建一个<strong class="it hv"> <em class="kf"> dist </em> </strong>文件夹来保存我们刚刚创建的所有文件以及任何<strong class="it hv"> <em class="kf"> npm依赖项</em> </strong>(样板文件中没有)和原始的<strong class="it hv"> <em class="kf"> package.json </em></strong></li><li id="12a0" class="kq kr hu it b iu kz iy la jc lb jg lc jk ld jo mi kw kx ky dt translated"><strong class="it hv"><em class="kf">package . js</em></strong>—使用<strong class="it hv"> <em class="kf"> nw-builder </em> </strong>(一个开发者依赖npm包)读取<strong class="it hv"> <em class="kf"> dist </em> </strong>文件夹中的所有文件，并为我们在<strong class="it hv"> <em class="kf">平台</em> </strong>数组中定义的所有操作系统释放应用程序。如您所见，我们只针对x64平台，但是如果需要，您可以添加x32。</li></ul><p id="9701" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">请注意，在本文发表时，打包用v0.13.2构建的NWJS应用程序仍有bug，有时无法工作(希望不会太久)。不过，它在v0.12.3中工作正常。您可以在<strong class="it hv"> <em class="kf">包中更改使用哪个版本。</em></strong></p><p id="6574" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你仔细观察<strong class="it hv"> <em class="kf"> package.json </em> </strong>我们在脚本里面有一个命令叫做<strong class="it hv"> <em class="kf"> nwjs </em> </strong>它调用<strong class="it hv"> <em class="kf"> gulp </em> </strong>和<strong class="it hv"><em class="kf">node package . js</em></strong>。这将创建一个dist文件夹并打包您的应用程序。从命令行运行它很简单:</p><pre class="jr js jt ju fq le lf lg lh aw li dt"><span id="724c" class="lj lk hu lf b fv ll lm l ln lo">npm run nwjs</span></pre></div><div class="ab cl kj kk hc kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hn ho hp hq hr"><p id="648e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我也有一个实际的项目给你看，其中使用:NWJS (v0.12.x)，AngularJS (1.x)，SASS，指南针和NEDB创建一个管理电视节目的桌面应用程序。希望这能让你更好地理解NWJS:</p><div class="lq lr fm fo ls lt"><a href="https://github.com/raduGaspar/nwjs-show-tracker" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab ej"><div class="lv ab lw cl cj lx"><h2 class="bd hv fv z el ly eo ep lz er et ht dt translated">raduga spar/nwjs-展示-跟踪器</h2><div class="ma l"><h3 class="bd b fv z el ly eo ep lz er et ek translated">这是一个跟踪电视节目的简单界面。</h3></div><div class="mb l"><p class="bd b gc z el ly eo ep lz er et ek translated">github.com</p></div></div><div class="mc l"><div class="mj l me mf mg mc mh ka lt"/></div></div></a></div><p id="a391" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为自己探索，寻找nw-builder的新版本，找点乐子，看看你能走多远。不要忘记你是在Chromium上开发的，所以没有必要担心跨浏览器的兼容性，如果它适合你，它也适合所有人。编码快乐！</p><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="mk ml l"/></div></figure></div></div>    
</body>
</html>