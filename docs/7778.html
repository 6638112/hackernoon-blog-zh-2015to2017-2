<html>
<head>
<title>Create a Twitter Politician Bot with Markov Chains, Node.js and StdLib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用马尔可夫链、Node.js和StdLib创建一个Twitter政客机器人</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/create-a-twitter-politician-bot-with-markov-chains-node-js-and-stdlib-14df8cc1c68a?source=collection_archive---------7-----------------------#2017-11-08">https://medium.com/hackernoon/create-a-twitter-politician-bot-with-markov-chains-node-js-and-stdlib-14df8cc1c68a?source=collection_archive---------7-----------------------#2017-11-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="d5d8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在当今世界的政治气候下，宣传是游戏的名称，Twitter是首选的媒介。自动化是王道，如果你不使用<a class="ae jp" href="https://hackernoon.com/tagged/twitter" rel="noopener ugc nofollow" target="_blank"> Twitter </a>机器人来影响大众，你就做错了。在<a class="ae jp" href="https://stdlib.com" rel="noopener ugc nofollow" target="_blank"> StdLib </a>这里，我们真的没有任何政治动机，但我们确实喜欢构建机器人。随着<a class="ae jp" href="https://stdlib.com/sourcecode" rel="noopener ugc nofollow" target="_blank"> StdLib源代码</a>的发布，我们与你们分享我们的最新项目变得前所未有的简单:介绍加拿大古怪的未来总理贾登·特鲁多。我们将教你如何建造这个现代工程奇迹，以及如何在几分钟内建造你自己的“政治终结者”。</p><p id="b097" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了建立一个吸引大众的Twitter机器人，我们选择了结合贾登·史密斯的智慧:</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="jv jw l"/></div></figure><p id="752a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">贾斯廷·特鲁多的健康:</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="jv jw l"/></div></figure><p id="d198" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">创造世界上最完美的政治家:杰登·特鲁多。更具体地说，我们的目标是创建一个机器人，它偶尔会以贾登·史密斯和贾斯廷·特鲁多的风格在推特上发布程序生成的句子。这种结合产生了奇妙的标本，例如:</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="jv jw l"/></div></figure><p id="80ca" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个项目选择的<a class="ae jp" href="https://hackernoon.com/tagged/tools" rel="noopener ugc nofollow" target="_blank">工具</a>是马尔可夫链:马尔可夫链有许多现实世界的应用，比如谷歌的页面排名算法，但是没有一个像这个一样重要。如果你想跳到代码的工作版本，你可以在这里查看它的API页面<a class="ae jp" href="https://stdlib.com/@steve/lib/twitter-markov-chain/" rel="noopener ugc nofollow" target="_blank"/>。在这个页面上，你可以自己尝试这项服务，甚至加入到其他人的推特中！</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="fe ff jx"><img src="../Images/a366155d8217dc1f9b328e57af9f3e0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N9MmEmWSvqiadXiYUprxqw@2x.jpeg"/></div></div><figcaption class="ke kf fg fe ff kg kh bd b be z ek">Coming to an election near you — Jaden Trudeau</figcaption></figure><h2 id="8f03" class="ki kj hu bd kk kl km kn ko kp kq kr ks jc kt ku kv jg kw kx ky jk kz la lb lc dt translated">马尔可夫链是怎么回事？</h2><blockquote class="ld le lf"><p id="9d7c" class="ir is lg it b iu iv iw ix iy iz ja jb lh jd je jf li jh ji jj lj jl jm jn jo hn dt translated">我们描述一个马尔可夫链如下:我们有一组状态，<em class="hu"> S </em> = { <em class="hu"> s_₁，s_₂,…,s_r </em> }。该过程从这些状态之一开始，并从一个状态连续移动到另一个状态。每一步都叫做一步。如果链当前处于状态<em class="hu"> s_i </em>，则它在下一步以由<em class="hu"> p_ij，</em>表示的概率移动到状态<em class="hu"> s_j </em>，并且该概率不取决于链在当前之前处于哪个状态。来源</p></blockquote><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff lk"><img src="../Images/6d64aaa295f833304b4a382ffec1df79.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*E-ZyKzF-wokndU9oQImKxg.png"/></div><figcaption class="ke kf fg fe ff kg kh bd b be z ek">A two state Markov chain [<a class="ae jp" href="https://en.wikipedia.org/wiki/Markov_chain#/media/File:Markovkate_01.svg" rel="noopener ugc nofollow" target="_blank">source</a>]</figcaption></figure><p id="80e9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">简而言之，马尔可夫链是一种数学模型，它通过抛弃以前状态的历史，只检查现在，从一个状态转换到另一个状态。虽然这个解释仍然有点抽象，但是在生成句子的上下文中就变得更加清晰了。下面是如何使用马尔可夫链生成文本的概要。</p><ol class=""><li id="525f" class="ll lm hu it b iu iv iy iz jc ln jg lo jk lp jo lq lr ls lt dt translated">将一段文本(你的语料库)分割成记号(单词和标点符号)。</li><li id="9909" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">建立一个频率表。这个数据结构为您的语料库中的每个惟一标记都提供了一个键。这个键被映射到跟在这个键后面的所有单词的列表，以及它在这个单词后面出现的频率。它也有助于为句子的开始和结束添加特殊的键。这确保了当从模型中取样时，你总能用合适的词开始和结束句子。</li><li id="6c6f" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">选择一个起点(这些特殊的起始字之一)，然后从密钥后面的标记列表中随机选择一个标记。某个键被选中的概率应该与它出现在该键之后的频率成正比。这个新令牌现在是马尔可夫链的状态。在频率表中查找新的令牌并重复。</li></ol><h2 id="0c64" class="ki kj hu bd kk kl km kn ko kp kq kr ks jc kt ku kv jg kw kx ky jk kz la lb lc dt translated">履行</h2><p id="1d8b" class="pw-post-body-paragraph ir is hu it b iu lz iw ix iy ma ja jb jc mb je jf jg mc ji jj jk md jm jn jo hn dt translated">有了如何进行的大致想法，是时候开始了。首先，我们需要获取一些推文。有了<a class="ae jp" href="https://github.com/ttezel/twit" rel="noopener ugc nofollow" target="_blank"> Twit </a>，那没问题。</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="me jw l"/></div></figure><p id="7c18" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">收到推文后，需要对它们进行标记化。对于推特，这不是一个完全琐碎的过程。推特上充斥着网址、表情符号和不规范的句子。我们可以用下面的代码将一个表示tweet的字符串转换成一个令牌数组:</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="me jw l"/></div></figure><p id="c242" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个函数接收一条tweet，剥离它的URL和提及，并将其拆分成单词。然后，这些数组可以输入频率表。</p><p id="7a26" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">生成表格的代码对于一个中等的帖子来说有点长，但是你可以在这里<a class="ae jp" href="https://github.com/steveScripts/twitter-markov-chain" rel="noopener ugc nofollow" target="_blank">看到它</a>。表生成后，条目如下所示:</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="me jw l"/></div></figure><p id="cb18" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这些条目可以通过几种方式进行遍历。在开始，有一个50/50的变化，选择'<em class="lg">我们的</em>'或'<em class="lg">我们的</em>'作为起始单词。假设'<em class="lg">我们的</em>'被选中，那么'<em class="lg">未来</em>'或'<em class="lg">差异</em>'被选中的几率是2/5，而'<em class="lg">关系</em>'被选中的几率是1/5。这个过程不断重复，直到创建一个链，例如:</p><pre class="jq jr js jt fq mf mg mh mi aw mj dt"><span id="3894" class="ki kj hu mg b fv mk ml l mm mn">__START -&gt; our -&gt; future -&gt; office -&gt; __END</span></pre><p id="5201" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">差不多就是这样。如果你想看它的行动，请在推特上关注贾登·特鲁多。当然，有许多可以做的调整。例如，如果你想一次生成多个句子，你可以添加从<code class="eh mo mp mq mg b">__END</code>到<code class="eh mo mp mq mg b">__START</code>的边，并确保你以一个完整的句子结束。</p></div><div class="ab cl mr ms hc mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="hn ho hp hq hr"><h1 id="175e" class="my kj hu bd kk mz na nb ko nc nd ne ks nf ng nh kv ni nj nk ky nl nm nn lb no dt translated">构建您自己的</h1><p id="1d61" class="pw-post-body-paragraph ir is hu it b iu lz iw ix iy ma ja jb jc mb je jf jg mc ji jj jk md jm jn jo hn dt translated">如果你想构建自己的Twitter机器人，你可以在标准库的<a class="ae jp" href="https://code.stdlib.com/?src=@steve/twitter-bot" rel="noopener ugc nofollow" target="_blank">代码中找到机器人的模板。如果您单击该链接，模板将自动打开。如果没有，导航到“<strong class="it hv">社区API源</strong>”选项卡并搜索“<strong class="it hv"> steve/twitter-bot </strong>”。一旦加载完毕，打开<code class="eh mo mp mq mg b">env.json</code>文件，你会看到四个变量。</a></p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="fe ff np"><img src="../Images/ffd89f605a0096f8ecd3ff1d2b152c78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x_QID0kUaKgNqsfSJLGU_w.png"/></div></div></figure><p id="30a1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这些变量可以在您的<a class="ae jp" href="https://apps.twitter.com" rel="noopener ugc nofollow" target="_blank"> Twitter应用程序管理</a>页面上找到。点击“创建应用”并填写表格:</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="fe ff nq"><img src="../Images/52ea8ef38d2dfd2af05684bbb150376a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hyoaRn6Nig7qMEO4TYUThA.png"/></div></div><figcaption class="ke kf fg fe ff kg kh bd b be z ek">Twitter application management page</figcaption></figure><p id="bcc7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">点击“创建”后，您将在下一页找到这四把钥匙。将它们复制到各自在<code class="eh mo mp mq mg b">env.json</code>中的位置。单击屏幕右下角的绿色“运行”按钮(或按cmd/ctrl + r)。这将直接从浏览器部署和执行您的代码。</p><p id="29c2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">默认情况下，这个机器人使用马尔可夫链来生成推文。如果你想换成另一种方法，你可以打开<code class="eh mo mp mq mg b">functions/__main__.js</code>，做一个小小的改变:</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="fe ff nr"><img src="../Images/7f40c7361edd603b6fe92a1111349611.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mPV8c21BHKWZjKYFMkDN7g.png"/></div></div></figure><p id="af6e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在第9行有一个对<code class="eh mo mp mq mg b">lib.steve[twitter-markov-chain]</code>的调用，这是前面的马尔可夫链。你可以直接从<a class="ae jp" href="https://stdlib.com/@steve/lib/twitter-markov-chain/" rel="noopener ugc nofollow" target="_blank"> StdLib库文档页面</a>使用它。您可以创建自己的函数来生成tweets，并简单地将它换入。现在，单击run重新部署您的bot。</p><p id="f2d9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就这些了，感谢阅读！希望你能够了解一点关于马尔可夫链、Twitter机器人和StdLib的知识。构建宣传机器只是开始使用StdLib的众多方法之一。如果你有好主意想分享，请直接通过电子邮件联系我:<strong class="it hv">steven@stdlib.com</strong>，或者在Twitter上关注<a class="ae jp" href="https://twitter.com/notoriaga" rel="noopener ugc nofollow" target="_blank">我</a>和<a class="ae jp" href="https://twitter.com/stdlibhq" rel="noopener ugc nofollow" target="_blank"> StdLib </a>团队。</p><p id="c2b1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一如既往，我们期待您和快乐大厦的回音！</p></div><div class="ab cl mr ms hc mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="hn ho hp hq hr"><p id="f0b3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">史蒂夫·迈耶(Steve Meyer)是欧柏林学院的应届毕业生，是 <a class="ae jp" href="https://stdlib.com" rel="noopener ugc nofollow" target="_blank"> <em class="lg"> StdLib </em> </a> <em class="lg">的软件工程师。当他不编程的时候，你可以看到他在烹饪、烘焙或者玩《野性的呼吸》。</em></p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="ns jw l"/></div></figure></div></div>    
</body>
</html>