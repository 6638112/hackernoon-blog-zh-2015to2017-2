<html>
<head>
<title>On iterating and decoding sum types in Elm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Elm中求和类型的迭代和解码</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/on-iterating-and-decoding-sum-types-in-elm-2329736b9f29?source=collection_archive---------17-----------------------#2017-05-03">https://medium.com/hackernoon/on-iterating-and-decoding-sum-types-in-elm-2329736b9f29?source=collection_archive---------17-----------------------#2017-05-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="15f0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">实验性</em></p><p id="ed1f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">感谢</em><a class="ae jq" href="https://www.reddit.com/user/imright_anduknowit" rel="noopener ugc nofollow" target="_blank"><em class="jp">imright _ andunknowit</em></a><em class="jp">和</em><a class="ae jq" href="https://www.reddit.com/user/Enumerable_any" rel="noopener ugc nofollow" target="_blank"><em class="jp">enumeratable _ any</em></a><em class="jp"/><a class="ae jq" href="https://www.reddit.com/r/elm/comments/68zxvy/on_iterating_and_decoding_sum_types_in_elm/" rel="noopener ugc nofollow" target="_blank"><em class="jp">Reddit</em></a><em class="jp">对他们的建议。</em></p><p id="2704" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在Elm中，您没有一种本地方式来列出sum类型中的所有标签。</p><p id="083a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">假设我们有一个水果类型，定义为:</p><pre class="jr js jt ju fq jv jw jx jy aw jz dt"><span id="ac78" class="ka kb hu jw b fv kc kd l ke kf">type Fruit<br/>  = Orange<br/>  | Lemon<br/>  | Apple</span></pre><p id="82b9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如何创建一个包含所有水果(【橙子、柠檬、水果】)的列表而不遗漏一个？</p><p id="4e32" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先，让我们创建一个函数nextFruit，该函数给定一个水果，将返回一个可能的水果，表示总和中的下一个水果:</p><pre class="jr js jt ju fq jv jw jx jy aw jz dt"><span id="614f" class="ka kb hu jw b fv kc kd l ke kf">nextFruit : Maybe Fruit -&gt; Maybe Fruit<br/>nextFruit maybeCurrentFruit =<br/>    case maybeCurrentFruit of<br/>        Nothing -&gt;<br/>            Just Orange<br/>        Just currentFruit -&gt;<br/>            case currentFruit of<br/>                Orange -&gt;<br/>                  Just Lemon<br/>                Lemon -&gt;<br/>                  Just Apple<br/>                Apple -&gt;<br/>                  Nothing</span></pre><p id="de3a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">接下来，让我们创建水果清单:</p><pre class="jr js jt ju fq jv jw jx jy aw jz dt"><span id="0349" class="ka kb hu jw b fv kc kd l ke kf">fruitList : List Fruit<br/>fruitList =<br/>  let<br/>    buildFruitList : Maybe Fruit -&gt; List Fruit -&gt; List Fruit<br/>    buildFruitList maybeCurrentFruit allFruits =<br/>      case maybeCurrentFruit of<br/>        Nothing -&gt;<br/>          allFruits<br/>        Just currentFruit -&gt;<br/>          buildFruitList (nextFruit maybeCurrentFruit) (currentFruit :: allFruits)<br/>  in<br/>    buildFruitList (nextFruit Nothing) []</span></pre><p id="d936" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你运行水果清单，你会得到[苹果，柠檬，橘子]。</p><p id="f7a6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，如果你在Fruit中添加香蕉，你会得到一个编译器错误，说nextFruit中的case不处理香蕉的可能性。你必须重写它:</p><pre class="jr js jt ju fq jv jw jx jy aw jz dt"><span id="2211" class="ka kb hu jw b fv kc kd l ke kf">nextFruit : Maybe Fruit -&gt; Maybe Fruit<br/>nextFruit maybeCurrentFruit =<br/>    case maybeCurrentFruit of<br/>        Nothing -&gt;<br/>            Just Orange<br/>        Just currentFruit -&gt;<br/>            case currentFruit of<br/>                Orange -&gt;<br/>                  Just Lemon<br/>                Lemon -&gt;<br/>                  Just Apple<br/>                Apple -&gt;<br/>                  Just Banana<br/>                Banana -&gt;<br/>                  Nothing</span></pre><p id="886b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">好吧，实话实说:你可以在编写nextFruit函数的时候出错，但是1/，你会被警告一个新的标签已经被添加到类型和2/，你可以从类型声明中生成这个代码。</p><p id="cf09" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后一步是编写一个函数，给定一个字符串，它将返回一个可能的结果:</p><pre class="jr js jt ju fq jv jw jx jy aw jz dt"><span id="c085" class="ka kb hu jw b fv kc kd l ke kf">fruitFromString : String -&gt; Maybe Fruit<br/>fruitFromString fruitString =<br/>  fruitList<br/>    |&gt; List.filter (\x -&gt; toString x == fruitString)<br/>    |&gt; List.head</span></pre><p id="bb2a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">fruitFromString“Apple”将只返回苹果，fruitFromString“菠萝”将不返回任何内容。</p></div><div class="ab cl kg kh hc ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hn ho hp hq hr"><p id="c1da" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你可以概括水果清单:</p><pre class="jr js jt ju fq jv jw jx jy aw jz dt"><span id="89b2" class="ka kb hu jw b fv kc kd l ke kf">enumList : (Maybe a -&gt; Maybe a) -&gt; List a<br/>enumList nextEnumFn =<br/>  let<br/>    buildEnumList : Maybe a -&gt; List a -&gt; List a<br/>    buildEnumList maybeCurrentEnum allEnums =<br/>      case maybeCurrentEnum of<br/>        Nothing -&gt;<br/>          allEnums<br/>        Just currentEnum -&gt;<br/>          buildEnumList (nextEnumFn maybeCurrentEnum) (currentEnum :: allEnums)<br/>  in<br/>    buildEnumList (nextEnumFn Nothing) []</span></pre><blockquote class="kn ko kp"><p id="1945" class="ir is jp it b iu iv iw ix iy iz ja jb kq jd je jf kr jh ji jj ks jl jm jn jo hn dt translated"><a class="ae jq" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是这个家庭的一员。我们现在<a class="ae jq" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jq" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is jp it b iu iv iw ix iy iz ja jb kq jd je jf kr jh ji jj ks jl jm jn jo hn dt translated">要了解更多信息，<a class="ae jq" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">请阅读我们的“关于”页面</a>、<a class="ae jq" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书上给我们点赞/发消息</a>，或者简单地说，<a class="ae jq" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ir is jp it b iu iv iw ix iy iz ja jb kq jd je jf kr jh ji jj ks jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jq" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jq" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote></div></div>    
</body>
</html>