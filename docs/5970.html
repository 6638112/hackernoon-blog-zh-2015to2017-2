<html>
<head>
<title>All you need to know about Today Extensions (Widget) in iOS 10</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于iOS 10中的Today Extensions (Widget)你需要知道的一切</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/app-extensions-and-today-extensions-widget-in-ios-10-e2d9fd9957a8?source=collection_archive---------0-----------------------#2017-08-27">https://medium.com/hackernoon/app-extensions-and-today-extensions-widget-in-ios-10-e2d9fd9957a8?source=collection_archive---------0-----------------------#2017-08-27</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/2bccd03685d8f3f1f97837b99ab14e08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l7wuN03l2kpFNi-w3Tucsg.jpeg"/></div></div></figure><p id="35c9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">苹果在<strong class="je hv"> iOS 8 </strong>中引入了<strong class="je hv">应用扩展</strong>，从那以后，它们对iOS应用开发领域产生了巨大的影响。让我们先从一些与扩展相关的术语开始。</p></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><h1 id="9ce9" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">术语</h1><h2 id="084d" class="lf ki hu bd kj lg lh li kn lj lk ll kr jn lm ln kv jr lo lp kz jv lq lr ld ls dt translated">什么是App扩展？</h2><p id="3dff" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated">应用程序扩展允许您将自定义功能和内容扩展到应用程序之外，并在用户与其他应用程序或系统交互时提供给用户。它用于一些特定的任务。它不是一个独立的应用。</p><h2 id="bf59" class="lf ki hu bd kj lg lh li kn lj lk ll kr jn lm ln kv jr lo lp kz jv lq lr ld ls dt translated">延伸点</h2><p id="ebe7" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated">扩展绑定到系统的特定区域，称为扩展点。每个扩展最多可以有一个扩展点。</p><p id="535e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">举例</strong>:</p><ol class=""><li id="d2eb" class="ly lz hu je b jf jg jj jk jn ma jr mb jv mc jz md me mf mg dt translated">T <em class="mh"> oday扩展</em>绑定到<em class="mh">通知中心</em></li></ol><figure class="mj mk ml mm fq iv fe ff paragraph-image"><div class="fe ff mi"><img src="../Images/f1ac37755b070ba7ef53083756117ab7.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*KW0w_iagZnAEeeZRyd7WaA.png"/></div></figure><ol class=""><li id="a668" class="ly lz hu je b jf jg jj jk jn ma jr mb jv mc jz md me mf mg dt translated"><em class="mh">共享扩展</em>只能出现在<em class="mh"> UIActivityViewController中。</em></li></ol><figure class="mj mk ml mm fq iv fe ff paragraph-image"><div class="fe ff mi"><img src="../Images/03ce4ce4588405f2eefc12e5ea5270e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*cSTOOsziUnmNO4oeaN8-Bw.png"/></div></figure><h2 id="bab7" class="lf ki hu bd kj lg lh li kn lj lk ll kr jn lm ln kv jr lo lp kz jv lq lr ld ls dt translated">包含应用程序</h2><p id="3fb5" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated">为其创建扩展的应用程序。</p><h2 id="8fd0" class="lf ki hu bd kj lg lh li kn lj lk ll kr jn lm ln kv jr lo lp kz jv lq lr ld ls dt translated">主机应用程序</h2><p id="4d9f" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated">启动扩展的应用程序</p><p id="ce0c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在接下来的章节中，您可以清楚地了解这些术语。有耐心..🙂</p></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><h1 id="2eef" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">扩展生命周期</h1><ol class=""><li id="3f5e" class="ly lz hu je b jf lt jj lu jn mn jr mo jv mp jz md me mf mg dt translated">用户从主机应用程序中选择应用程序扩展。</li><li id="f103" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated">系统启动应用程序扩展。扩展在主机应用程序的上下文中显示其视图。用户在应用程序扩展中执行所需的任务并取消它。</li><li id="4d5e" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated">用户返回到主机应用程序中的上一个上下文。在应用扩展执行其任务后不久，系统终止该扩展。</li></ol><p id="2364" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">示例:</strong></p><figure class="mj mk ml mm fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mv"><img src="../Images/2e4193ec4d5f990a5a1ed9d5997176d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wzauOtjC3RyppPWgOjsFAA.png"/></div></div></figure><p id="d9e9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在上面的截图中，</p><ol class=""><li id="6ae5" class="ly lz hu je b jf jg jj jk jn ma jr mb jv mc jz md me mf mg dt translated"><em class="mh"> App扩展</em>:脸书股份扩展</li><li id="b5a2" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated"><em class="mh">包含App </em>:脸书</li><li id="50c5" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated"><em class="mh">主机App </em>:照片App</li></ol></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><h1 id="22f8" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">应用程序扩展如何通信</h1><ol class=""><li id="84cd" class="ly lz hu je b jf lt jj lu jn mn jr mo jv mp jz md me mf mg dt translated">应用程序扩展和主机应用程序之间的直接通信。系统使用进程间通信进行主机应用程序和扩展之间的通信。有来自主机应用程序的请求和来自扩展的响应。</li><li id="6462" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated">包含应用程序和主机应用程序之间没有通信。</li><li id="cb7b" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated">应用程序扩展和包含应用程序之间的间接通信。<strong class="je hv">举例，</strong> <em class="mh">共享资源</em> : 1。<strong class="je hv"> <em class="mh">框架</em> </strong> —分享代码2。<strong class="je hv"> <em class="mh"> App群</em></strong>——分享数据。</li></ol></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><h1 id="1317" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">今日扩展(小部件)</h1><p id="c083" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated">小工具<em class="mh">是通知中心</em>的扩展。这些是带有一些附加功能的简单视图控制器，因此它们的生命周期与其他视图控制器一样正常工作。</p><p id="c7a3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> <em class="mh">性能最重要:</em> </strong></p><ol class=""><li id="e6a2" class="ly lz hu je b jf jg jj jk jn ma jr mb jv mc jz md me mf mg dt translated">使用<em class="mh">缓存数据。</em></li><li id="9f4a" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated">把昂贵的操作移到<em class="mh">后台</em>。</li><li id="0899" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated">设计一个简单的用户界面。</li></ol></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><h1 id="03c8" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">今天iOS 10中的扩展</h1><p id="7cd8" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated">最初，今天的扩展是在iOS 8中引入的。后来在iOS 10中，对它进行了一些重大的改动。</p><p id="57f7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">举例:<em class="mh"> </em> <strong class="je hv"> <em class="mh"> iOS 8和iOS 9 </em> </strong>，<em class="mh"> Show More/Show Less </em>需要开发者明确处理。这是一项繁琐的任务，因为它需要约束和布局处理来根据内容调整小部件的高度。但是在<strong class="je hv"> <em class="mh"> iOS 10 </em> </strong>中，苹果提供了API来处理这样的功能，没有费太大的劲。</strong></p><figure class="mj mk ml mm fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mw"><img src="../Images/df3ac7dfe572ff29942b5499c69fe7af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7g87y2NDKoEYIZUYdhmiJA.gif"/></div></div></figure></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><h1 id="7df8" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">如何？</h1><p id="3141" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated">在这里，我将为您提供在<em class="mh"> iOS 10 </em>中实现<em class="mh"> Today扩展</em>所需的基本构造。在本文末尾，您可以找到一个指向<em class="mh">示例的链接。</em></p><h2 id="b38d" class="lf ki hu bd kj lg lh li kn lj lk ll kr jn lm ln kv jr lo lp kz jv lq lr ld ls dt translated">应用程序组-与包含应用程序共享数据</h2><p id="1b33" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated">如前所述，您不能在您的扩展和它包含的应用程序之间直接共享数据。要共享数据，您需要使用<strong class="je hv">应用程序组</strong>。</p><blockquote class="mx my mz"><p id="0ac9" class="jc jd mh je b jf jg jh ji jj jk jl jm na jo jp jq nb js jt ju nc jw jx jy jz hn dt translated">即使应用程序扩展包嵌套在其包含的应用程序包中，运行的应用程序扩展和包含的应用程序也不能直接访问彼此的容器。</p><p id="91b1" class="jc jd mh je b jf jg jh ji jj jk jl jm na jo jp jq nb js jt ju nc jw jx jy jz hn dt translated">若要启用数据共享，请使用Xcode或开发者门户来启用包含应用程序及其包含的应用程序扩展的应用程序群组。接下来，在门户中注册应用程序组，并指定要在包含应用程序中使用的应用程序组。</p></blockquote><figure class="mj mk ml mm fq iv"><div class="bz el l di"><div class="nd ne l"/></div></figure><p id="ce28" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您不能使用<em class="mh">标准用户默认值</em>在<em class="mh">应用扩展</em>和包含应用的<em class="mh">之间共享数据。</em></p><p id="9a82" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">仅用于包含App 的<em class="mh">的数据使用<em class="mh">标准</em>之一。使用<em class="mh"> suiteName </em>获取您想要在<em class="mh">扩展和包含应用</em>之间共享的数据。只是不要在两者中保存相同的数据。避免数据冗余。根据上下文使用这两个词。</em></p><h2 id="9674" class="lf ki hu bd kj lg lh li kn lj lk ll kr jn lm ln kv jr lo lp kz jv lq lr ld ls dt translated"><em class="nf"> NCWidgetDisplayMode </em></h2><p id="ca77" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated">有两种模式可以在小部件中显示数据。这些模式在<em class="mh"> NCWidgetDisplayMode </em>下分类为<strong class="je hv"> <em class="mh">紧凑</em> </strong>和<strong class="je hv"> <em class="mh">扩展。</em>T47】</strong></p><ol class=""><li id="e358" class="ly lz hu je b jf jg jj jk jn ma jr mb jv mc jz md me mf mg dt translated"><em class="mh">紧凑模式</em>具有<em class="mh">固定高度</em>和<em class="mh"> 110 </em></li><li id="8ed7" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated"><em class="mh">扩展模式</em>用于<em class="mh">可变高度</em>根据您的内容。</li></ol><p id="9445" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="mh">显示更多或显示更少</em>按钮根据<em class="mh">微件的活动显示模式</em>显示在微件的右上角，即在紧凑模式下，显示更多可见，在扩展模式下，显示更少可见。</p><figure class="mj mk ml mm fq iv"><div class="bz el l di"><div class="nd ne l"/></div></figure><p id="6aeb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">widgetLargestAvailableDisplayMode</strong>表示您的应用程序支持的最大显示模式。</p><ol class=""><li id="6a2b" class="ly lz hu je b jf jg jj jk jn ma jr mb jv mc jz md me mf mg dt translated">当设置为<em class="mh">紧凑模式时，</em>您的应用程序将仅支持紧凑模式，即不再支持显示更多/显示更少功能，并且您的小部件将具有固定的高度110。</li><li id="3ba1" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated">当设置为<em class="mh">扩展时，</em>应用程序将支持压缩和扩展模式，显示更多/显示更少功能将相应工作。</li></ol><h2 id="5879" class="lf ki hu bd kj lg lh li kn lj lk ll kr jn lm ln kv jr lo lp kz jv lq lr ld ls dt translated">根据显示模式的处理高度</h2><p id="f81f" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated"><em class="mh">ncwidgetprovisioning</em>协议提供了一个<em class="mh">委托</em>方法<em class="mh">widgetActiveDisplayModeDidChange(_:maxSize:)</em>处理<em class="mh">紧凑</em>和<em class="mh">扩展</em>模式下小工具的大小。</p><p id="1eba" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">根据您使用的设备，小工具的<strong class="je hv"> <em class="mh">宽度</em> </strong>保持不变。没有规定要改变它。</p><p id="e1ee" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">小工具的<strong class="je hv"> <em class="mh">高度</em> </strong>可以根据<em class="mh">活动显示模式</em>改变。</p><figure class="mj mk ml mm fq iv"><div class="bz el l di"><div class="nd ne l"/></div></figure><p id="ad73" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> <em class="mh">注意:</em> </strong>在扩展模式下，您可以提供给widget的最大高度不能超过通知中心中提供给widget的可见空间。</p><h2 id="66a5" class="lf ki hu bd kj lg lh li kn lj lk ll kr jn lm ln kv jr lo lp kz jv lq lr ld ls dt translated">更新小部件</h2><p id="00d1" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated">为了帮助您的小部件查看最新信息，系统偶尔会捕获小部件视图的快照。当小部件再次可见时，会显示最新的快照，直到系统用视图的实时版本替换它。</p><p id="bab8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"><em class="mh">widgetPerformUpdate</em></strong>:</p><ol class=""><li id="c3e4" class="ly lz hu je b jf jg jj jk jn ma jr mb jv mc jz md me mf mg dt translated">当widget在后台更新<em class="mh">时调用。</em></li><li id="51c7" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated">在拍摄小部件<em class="mh">快照之前调用。</em></li></ol><figure class="mj mk ml mm fq iv"><div class="bz el l di"><div class="nd ne l"/></div></figure><h2 id="705f" class="lf ki hu bd kj lg lh li kn lj lk ll kr jn lm ln kv jr lo lp kz jv lq lr ld ls dt translated">正在打开包含“今日”扩展的应用程序</h2><p id="3713" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated">您可以使用<em class="mh"> open(_ URL:，completionHandler:) </em>从扩展中打开包含您的应用程序</p><figure class="mj mk ml mm fq iv"><div class="bz el l di"><div class="nd ne l"/></div></figure><p id="df71" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你还需要在你包含的app的<strong class="je hv"> <em class="mh"> URL类型</em> </strong>中定义<em class="mh"> YOUR_URL_SCHEME </em>。</p><figure class="mj mk ml mm fq iv fe ff paragraph-image"><div class="fe ff ng"><img src="../Images/877ac0c1a6dc23697cd29bdab3f317f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*lEFXy29K0-4VmpxnOF6Lug.png"/></div></figure><p id="b5e6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当包含的app从扩展打开时，可以在<em class="mh"> AppDelegate的</em> <em class="mh">应用(_:URL:source application:annotation:)</em>方法中获得句柄。</p><figure class="mj mk ml mm fq iv"><div class="bz el l di"><div class="nd ne l"/></div></figure><h2 id="ffd5" class="lf ki hu bd kj lg lh li kn lj lk ll kr jn lm ln kv jr lo lp kz jv lq lr ld ls dt translated">显示/隐藏包含应用程序的小部件</h2><p id="497f" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated">如果您需要根据您想要显示的内容来显示或隐藏扩展，您可以从您包含的应用程序中进行操作。</p><figure class="mj mk ml mm fq iv"><div class="bz el l di"><div class="nd ne l"/></div></figure><h2 id="131a" class="lf ki hu bd kj lg lh li kn lj lk ll kr jn lm ln kv jr lo lp kz jv lq lr ld ls dt translated">框架—与包含应用程序共享代码</h2><p id="0641" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated">您不能在您的扩展和它包含的应用程序之间直接共享代码。要共享数据，需要使用<strong class="je hv">框架</strong>。</p><blockquote class="mx my mz"><p id="7492" class="jc jd mh je b jf jg jh ji jj jk jl jm na jo jp jq nb js jt ju nc jw jx jy jz hn dt translated">您可以创建一个嵌入式框架，在您的应用程序扩展及其包含的应用程序之间共享代码。</p><p id="964a" class="jc jd mh je b jf jg jh ji jj jk jl jm na jo jp jq nb js jt ju nc jw jx jy jz hn dt translated">确保您的嵌入式框架不包含对应用程序扩展不可用的API。如果您有一个包含此类API的自定义框架，您可以从包含它的应用程序安全地链接到它，但不能与应用程序包含的扩展共享该代码。App Store拒绝任何链接到此类框架或使用不可用API的应用程序扩展。</p><p id="f9fb" class="jc jd mh je b jf jg jh ji jj jk jl jm na jo jp jq nb js jt ju nc jw jx jy jz hn dt translated">要将应用程序扩展目标配置为使用嵌入式框架，请将目标的“仅需要应用程序扩展安全API”构建设置设置为“是”。</p></blockquote></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><h1 id="fca4" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">无法加载—当今扩展面临的最常见问题</h1><figure class="mj mk ml mm fq iv fe ff paragraph-image"><div class="fe ff mi"><img src="../Images/e83e5bf4a962a441d3a9f80ccd8ee546.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*RMXMNQpyndbfifDCmyf3SA.png"/></div></figure><p id="f2ca" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">无法在<em class="mh">今天加载扩展</em>主要出现在:</p><ol class=""><li id="652b" class="ly lz hu je b jf jg jj jk jn ma jr mb jv mc jz md me mf mg dt translated">你的分机<strong class="je hv">由于某种原因坠毁</strong>。</li><li id="5fbb" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated">它占用的内存比系统提供的要多。<strong class="je hv">(内存限制:最大16MB左右。)</strong></li></ol><p id="8c12" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">调试您的应用程序扩展，找出确切的问题。</p><p id="7748" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">参考Xcode的<strong class="je hv">调试量表</strong>了解内存和CPU利用率。</p></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><h1 id="bc24" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated"><strong class="ak">要记住的事情:</strong></h1><ol class=""><li id="b57f" class="ly lz hu je b jf lt jj lu jn mn jr mo jv mp jz md me mf mg dt translated">避免使用<em class="mh">滚动视图</em>。</li><li id="0ccb" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated">不支持<em class="mh">键盘输入。</em></li><li id="d145" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated">必须<em class="mh">重量轻</em>。</li><li id="4196" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated">启动太慢的扩展被系统终止。</li><li id="dfb5" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated">低内存限制— <em class="mh">(最大16 MB左右。)</em></li><li id="a022" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated">一些API对应用程序扩展不可用—共享应用程序对象、摄像头、麦克风、使用airdrop接收数据。</li></ol></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><h1 id="b536" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">示例小部件</h1><div class="nh ni fm fo nj nk"><a href="https://github.com/pgpt10/Today-Widget" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab ej"><div class="nm ab nn cl cj no"><h2 class="bd hv fv z el np eo ep nq er et ht dt translated">pgpt10/Today-Widget</h2><div class="nr l"><h3 class="bd b fv z el np eo ep nq er et ek translated">今日-Widget - iOS 10和iOS 8/iOS 9今日扩展(Widget)</h3></div><div class="ns l"><p class="bd b gc z el np eo ep nq er et ek translated">github.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny ja nk"/></div></div></a></div></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><h1 id="1b17" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">促销</h1><p id="5c62" class="pw-post-body-paragraph jc jd hu je b jf lt jh ji jj lu jl jm jn lv jp jq jr lw jt ju jv lx jx jy jz hn dt translated">别忘了阅读我的其他文章:</p><ol class=""><li id="ef55" class="ly lz hu je b jf jg jj jk jn ma jr mb jv mc jz md me mf mg dt translated"><a class="ae nz" href="https://medium.freecodecamp.org/ios-10-notifications-inshorts-all-in-one-ad727e03983a" rel="noopener ugc nofollow" target="_blank">你一直想知道的关于iOS通知的一切</a></li><li id="cb68" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated"><a class="ae nz" rel="noopener" href="/@p.gpt10/drag-it-drop-it-in-collection-table-ios-11-6bd28795b313">拖动&amp;放到收藏&amp;表— iOS 11 </a></li><li id="627c" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated"><a class="ae nz" href="https://hackernoon.com/color-it-with-gradients-ios-a4b374c3c79f" rel="noopener ugc nofollow" target="_blank">用渐变给它上色——iOS</a></li><li id="b604" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated"><a class="ae nz" href="https://hackernoon.com/everything-about-codable-in-swift-4-97d0e18a2999" rel="noopener ugc nofollow" target="_blank">Swift 4中关于Codable的一切</a></li><li id="7841" class="ly lz hu je b jf mq jj mr jn ms jr mt jv mu jz md me mf mg dt translated"><a class="ae nz" href="https://hackernoon.com/uicollectionviewcell-selection-made-easy-41dae148379d" rel="noopener ugc nofollow" target="_blank"> UICollectionViewCell选择变得简单..！！</a></li></ol></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><p id="6b93" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你有任何疑问，请随时发表评论。</p></div></div>    
</body>
</html>