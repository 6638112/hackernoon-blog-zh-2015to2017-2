<html>
<head>
<title>Merkle Trees</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Merkle树</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/merkle-trees-181cb4bc30b4?source=collection_archive---------0-----------------------#2017-12-15">https://medium.com/hackernoon/merkle-trees-181cb4bc30b4?source=collection_archive---------0-----------------------#2017-12-15</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/cf2c3c6d74172328df4c5b691b09515e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o6r1TcDd_zxwSgwogpKpyg.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">The adventitious prop roots of an Indian Banyan Tree.</figcaption></figure><p id="dd7c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Merkle树是区块链技术的基础部分。merkle树是一种允许对大量数据中的内容进行高效和安全验证的结构。这种结构有助于验证数据的一致性和内容。比特币和以太坊都使用Merkle树。</p><p id="e2a0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Merkle树是如何工作的？</p><p id="5a05" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Merkle树通过产生整个事务集的数字指纹来汇总块中的所有事务，从而使用户能够验证块中是否包括事务。</p><p id="3efc" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Merkle树是通过重复散列节点对直到只剩下一个散列(这个散列被称为根散列或Merkle根)来创建的。它们是自底向上构造的，由单个事务的散列(称为事务id)构成。</p><p id="c1bd" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">每个叶节点是事务数据的散列，每个非叶节点是其先前散列的散列。Merkle树是二进制的，因此需要偶数个叶节点。如果事务的数量是奇数，最后一个散列将被复制一次，以创建偶数个叶节点。</p><figure class="kf kg kh ki fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ke"><img src="../Images/b0f635b67c23e1c39cf42d7ff21e9d4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UrjiK3IjdbgoV2dyKRvAGQ.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">The Merkle Tree of transactions A, B, C &amp; D.</figcaption></figure><p id="2194" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们来看一个块中有四个事务的示例:A、B、C和D。每个事务都经过哈希处理，哈希存储在每个叶节点中，产生哈希A、B、C和D。然后，连续的叶节点对在父节点中汇总，哈希A和哈希B产生哈希AB，哈希C和哈希D分别产生哈希CD。这两个散列(散列AB和散列CD)然后被再次散列以产生根散列(Merkle根)。</p><p id="e973" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这个过程也可以在更大的数据集上进行:可以对连续的块进行哈希运算，直到顶部只有一个节点。散列通常使用SHA-2 <a class="ae kj" href="https://hackernoon.com/cryptographic-hashing-c25da23609c3" rel="noopener ugc nofollow" target="_blank">加密散列</a>函数进行，尽管也可以使用其他函数。</p><p id="52a7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Merkle根汇总相关事务中的所有数据，并存储在块头中。它维护数据的完整性。如果任何事务中的一个细节或事务的顺序发生变化，Merkle Root也会发生变化。使用Merkle树可以快速简单地测试特定交易是否包含在集合中。</p><figure class="kf kg kh ki fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kk"><img src="../Images/b127b00f358756db1b2cab3e75b22af2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vn4nOcUXnhIPjYnZ7b3ySA.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">The entire dataset doesn’t need to be downloaded to verify the integrity of Transaction 5.</figcaption></figure><p id="ee43" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Merkle树与哈希表的不同之处在于，使用Merkle树，一次可以下载一个分支，并且可以立即验证每个分支的完整性，即使树的其余部分还不可用。这是有利的，因为文件可以被分割成非常小的数据块，使得如果原始版本被损坏，只需要再次下载小的数据块。</p><p id="b2d0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">用途</strong></p><p id="39b0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">使用Merkle树可以显著减少可信机构为了验证目的而必须维护的数据量。它将数据的验证与数据本身分开。Merkle树可以位于本地，也可以位于分布式系统上。</p><p id="f50c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Merkle树有三大好处:</p><p id="3848" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">1.它们提供了一种证明数据完整性和有效性的方法</p><p id="7b4c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">2.它们需要很少的内存或磁盘空间，因为证明在计算上是容易和快速的</p><p id="7064" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">3.他们的证明和管理只需要通过网络传输极少量的信息</p><p id="c1d0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">证明日志完整且一致的能力对于区块链技术和总账概念至关重要。Merkle树有助于验证日志的较新版本是否包含早期版本的所有内容，以及所有数据是否按时间顺序记录和显示。要证明日志是一致的，需要表明以前的记录没有被添加、更改或篡改，并且日志从未被分支或分叉。</p><p id="83ad" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Merkle树使区块链的矿工和用户受益。当挖掘器从对等体接收事务时，挖掘器可以渐进地计算散列。用户可以单独验证块的各个部分，并且可以使用树的其他分支的散列来检查各个事务。</p><p id="63b8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">简化支付验证(SPV) </strong></p><p id="2e23" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">简化支付验证(SPV)是一种验证特定交易是否包含在一个块中而无需下载整个块的方法。Merkle树被SPV节点广泛使用。</p><p id="87ca" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">SPV节点没有来自块中所有事务的数据。他们只下载块头。Merkle树使区块链上的SPV节点能够检查挖掘者是否已经验证了块中的事务，而无需下载块中的所有事务。这种方法目前被一些轻量级的比特币客户端使用。</p><p id="b0ba" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">以太坊</strong></p><p id="fc0f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">以太坊在每个块中使用三个不同的Merkle根:</p><p id="ec8c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">1.第一个根是块中的事务</p><p id="8816" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">2.第二个词根代表州</p><p id="f9f1" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">3.第三个词根是交易收据</p><p id="1817" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">以太坊使用一种特殊类型的哈希树，称为“Merkle Patricia树”(点击此处了解更多信息:</p><p id="2d51" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">【https://github.com/ethereum/wiki/wiki/Patricia-Tree】T4</p><p id="d7ec" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">区块链上不可或缺的工具</strong></p><p id="8f56" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Merkle树对于区块链的矿工和用户来说是强大且不可或缺的工具。它们非常健壮，是BitTorrent、Git、比特币和以太坊等几个对等网络的核心。</p></div><div class="ab cl kl km hc kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hn ho hp hq hr"><p id="2e59" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><a class="ae kj" href="http://www.shaanray.com/" rel="noopener ugc nofollow" target="_blank">沙恩雷</a></p><p id="97eb" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">请关注媒体上的Lansaar Research ，了解最新的新兴技术和新的商业模式。</p><div class="ks kt fm fo ku kv"><a href="https://twitter.com/shaanray" rel="noopener  ugc nofollow" target="_blank"><div class="kw ab ej"><div class="kx ab ky cl cj kz"><h2 class="bd hv fv z el la eo ep lb er et ht dt translated">沙恩·雷</h2><div class="lc l"><h3 class="bd b fv z el la eo ep lb er et ek translated">来自Shaan Ray的最新推文(@ShaanRay)。创造新价值和探索新兴技术| ENTJ | #科学…</h3></div><div class="ld l"><p class="bd b gc z el la eo ep lb er et ek translated">twitter.com</p></div></div><div class="le l"><div class="lf l lg lh li le lj ja kv"/></div></div></a></div></div></div>    
</body>
</html>