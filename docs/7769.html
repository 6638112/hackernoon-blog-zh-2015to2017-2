<html>
<head>
<title>Monitoring RabbitMQ: Native Nodes vs. Independent Agents</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">监控RabbitMQ:本地节点与独立代理</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/monitoring-rabbitmq-native-nodes-vs-independent-agents-70cbb90d8d44?source=collection_archive---------27-----------------------#2017-11-07">https://medium.com/hackernoon/monitoring-rabbitmq-native-nodes-vs-independent-agents-70cbb90d8d44?source=collection_archive---------27-----------------------#2017-11-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="c23e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">作者:阿扬达·杜贝</p><p id="4008" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这篇博文节选自Ayanda Dube的<a class="ae jp" href="http://bit.ly/2hOGWog" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv"> RabbitMQ操作&amp;维护使用WombatOAM </strong> </a>。点击 下载<a class="ae jp" href="http://bit.ly/2hOGWog" rel="noopener ugc nofollow" target="_blank">的完整指南。</a></p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/c2f58f493088e69710a86dc60b348ba9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QCQ9Jn5vWjd6bupMB-Obvg.jpeg"/></div></div></figure><p id="c0a2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">RabbitMQ用户习惯于使用本地RabbitMQ管理<a class="ae jp" href="https://www.rabbitmq.com/management.html" rel="noopener ugc nofollow" target="_blank">插件</a>来监控和跟踪他们的RabbitMQ安装状态，或者使用第三方监控工具，如<a class="ae jp" href="https://sensuapp.org/" rel="noopener ugc nofollow" target="_blank"> Sensu </a>，这些工具在内部使用RabbitMQ管理<a class="ae jp" href="https://cdn.rawgit.com/rabbitmq/rabbitmq-management/rabbitmq_v3_6_3/priv/www/api/index.html" rel="noopener ugc nofollow" target="_blank"> API </a>来获取指标。</p><p id="6092" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">不管用户喜欢哪种工具，大多数现成工具的一个共同点是完全依赖RabbitMQ管理插件。换句话说，为了通过web界面监控和管理您的RabbitMQ安装，RabbitMQ管理插件必须在RabbitMQ节点上一直处于<strong class="it hv">启用状态。</strong></p><p id="67ec" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这种方法的缺点主要在于RabbitMQ管理插件在每个启用它的节点上引入的开销。下图描述了当RabbitMQ管理插件启用时，在节点上引入的附带和必需的应用程序；</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff fg"><img src="../Images/ef3c216e50e8dcbf446ebafa893c5c3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4Kma7Jdh-NUG5D4H.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek"><em class="kg">Fig. 1: Applications introduced per node when the RabbitMQ Management plugin is enabled</em></figcaption></figure><p id="3432" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">RabbitMQ管理插件总共需要<strong class="it hv"> 13 </strong>个附加应用程序，这些应用程序与运行任何AMQP操作无关，也不是运行这些操作所必需的。</p><p id="3e88" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在内部，RabbitMQ管理插件创建多个基于RAM的Erlang ETS表，以便存储、聚合和计算统计数据和各种RabbitMQ特定的节点指标。除非硬件的规模已考虑到这一点，否则它会对节点的内存提出巨大的要求，并可能在流量负载模式因峰而异时产生许多未知的副作用。</p><p id="c4fa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在理想情况下，RabbitMQ节点应该专用于AMQP协议的交付，即连接的客户端之间的排队和消息交换逻辑。理想情况下，所有潜在的繁重操作，如UI监控和管理，都应该在一个完全独立的节点上处理；可部署在独立于RabbitMQ节点的物理机器上，用于所有OAM功能。几十年来，电信系统就是这样解决监控和运营问题的。</p><p id="45d8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">RabbitMQ管理插件和其他依赖于它的API的监控工具的不灵活性揭示了使用WombatOAM的主要优势。下图是WombatOAM在RabbitMQ节点上引入的应用程序开销；</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff kh"><img src="../Images/2050c8af36c6e069e982b6f8496a6a27.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/0*keiyrybSD6YQCl1q.png"/></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek"><em class="kg">Fig 2: Application overhead WombatOAM introduces on a RabbitMQ node</em></figcaption></figure><h1 id="e9d6" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">用WombatOAM方法监控RabbitMQ</h1><p id="e242" class="pw-post-body-paragraph ir is hu it b iu lg iw ix iy lh ja jb jc li je jf jg lj ji jj jk lk jm jn jo hn dt translated">那么WombatOAM监控RabbitMQ的方法有什么不同呢？</p></div><div class="ab cl ll lm hc ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hn ho hp hq hr"><p id="51de" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">阅读这篇关于www.erlang-solutions.com的博客文章的其余部分。</p><p id="cd1c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这篇博文节选自Ayanda Dube的<a class="ae jp" href="http://bit.ly/2hOGWog" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv"> RabbitMQ操作&amp;维护使用WombatOAM </strong> </a>。点击 下载完整指南<a class="ae jp" href="http://bit.ly/2hOGWog" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv">。</strong></a></p></div><div class="ab cl ll lm hc ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hn ho hp hq hr"><p id="285d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="ls">原载于</em><a class="ae jp" href="http://bit.ly/2Ai8KrQ" rel="noopener ugc nofollow" target="_blank"><em class="ls">www.erlang-solutions.com</em></a><em class="ls">。</em></p></div></div>    
</body>
</html>