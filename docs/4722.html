<html>
<head>
<title>Using Python to automate Facebook group invites</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python自动化脸书群邀请</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/using-python-to-automate-facebook-group-invites-664b4c509acf?source=collection_archive---------1-----------------------#2017-06-17">https://medium.com/hackernoon/using-python-to-automate-facebook-group-invites-664b4c509acf?source=collection_archive---------1-----------------------#2017-06-17</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/27d3deae7a5711dd502f4f95f7de8286.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YPp6FrIYq2EYgAsNAzkvsA.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Using graphics from <a class="ae ih" href="https://experience.sap.com/designservices/approach/scenes" rel="noopener ugc nofollow" target="_blank">SAP Scenes Pack</a></figcaption></figure><div class=""/><p id="cd2e" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在学年开始的时候，我在大学的一个学生社团工作时遇到了一个问题——你如何批量邀请人们加入一个T2脸书的团体？事实证明，使用一点Python就很容易了。源代码见<a class="ae ih" href="https://github.com/danielireson/facebook-bulk-group-inviter" rel="noopener ugc nofollow" target="_blank"> Github库</a>，继续阅读预演。</p><div class="ht hu fm fo hv kf"><a href="https://github.com/danielireson/facebook-bulk-group-inviter" rel="noopener  ugc nofollow" target="_blank"><div class="kg ab ej"><div class="kh ab ki cl cj kj"><h2 class="bd il fv z el kk eo ep kl er et ij dt translated">danielireson/Facebook-批量-群组-邀请人</h2><div class="km l"><h3 class="bd b fv z el kk eo ep kl er et ek translated">Facebook-bulk-group-inviter-Python CLI通过电子邮件向脸书群组批量导入成员</h3></div><div class="kn l"><p class="bd b gc z el kk eo ep kl er et ek translated">github.com</p></div></div><div class="ko l"><div class="kp l kq kr ks ko kt ib kf"/></div></div></a></div><h1 id="cd04" class="ku kv ik bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">为什么是Python？</h1><p id="e08b" class="pw-post-body-paragraph jh ji ik jj b jk ls jm jn jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">Python是这类任务的最佳语言选择，因为它轻量级且易于编写。我个人很喜欢它的阅读效果。考虑下面这段代码，即使您不知道Python语法，也能理解其中的逻辑。它读起来像英语。</p><pre class="lx ly lz ma fq mb mc md me aw mf dt"><span id="58eb" class="mg kv ik mc b fv mh mi l mj mk">secret <strong class="mc il">=</strong> ''<br/><strong class="mc il">while</strong> secret <strong class="mc il">!=</strong> 'medium':<br/>    secret <strong class="mc il">=</strong> input('What's the secret?')<br/>    <strong class="mc il">if</strong> secret <strong class="mc il">==</strong> 'medium':<br/>        print('Correct')<br/>    <strong class="mc il">else</strong>:<br/>        print('Incorrect')</span></pre><p id="6474" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">但是Python实际上只是一个合适的选择——这个脚本可以很容易地用许多其他语言编写。Selenium(我们将使用它来自动化浏览器)也有适用于C#、Java、JavaScript和Ruby的客户端API。也可以使用其他不含硒的溶液。</p><h1 id="a7bb" class="ku kv ik bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">任务</h1><p id="76a0" class="pw-post-body-paragraph jh ji ik jj b jk ls jm jn jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">查看您所属的脸书群组，在右侧，您会看到一个添加成员部分。您可以在这里输入电子邮件地址，它会邀请该人加入该群。</p><figure class="lx ly lz ma fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ml"><img src="../Images/b998e3df1dcc867177c88f425922aec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u3lYMnbBo_0frHzW0cbTCw.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Manchester Startups Facebook group</figcaption></figure><p id="039e" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">无论用户是否拥有脸书帐户，它都会这样做。尝试邀请自己加入该群，看看会发生什么。您应该很快会在收件箱中收到一封电子邮件。</p><figure class="lx ly lz ma fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mm"><img src="../Images/7054191e0bfde37ecb713113be1fe18b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ghg98Kbd1tv5WC40I_88vQ.png"/></div></div></figure><p id="1951" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这个过程分为五个步骤。</p><ol class=""><li id="ca4d" class="mn mo ik jj b jk jl jo jp js mp jw mq ka mr ke ms mt mu mv dt translated">登录脸书。</li><li id="77f4" class="mn mo ik jj b jk mw jo mx js my jw mz ka na ke ms mt mu mv dt translated">导航至脸书组页面。</li><li id="084d" class="mn mo ik jj b jk mw jo mx js my jw mz ka na ke ms mt mu mv dt translated">输入要邀请的用户的电子邮件地址。</li><li id="e7e6" class="mn mo ik jj b jk mw jo mx js my jw mz ka na ke ms mt mu mv dt translated">提交输入。</li><li id="f3c0" class="mn mo ik jj b jk mw jo mx js my jw mz ka na ke ms mt mu mv dt translated">对电子邮件地址列表重复步骤3和4。</li></ol><h1 id="f53d" class="ku kv ik bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">创建CLI</h1><p id="3027" class="pw-post-body-paragraph jh ji ik jj b jk ls jm jn jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">该脚本必须能够登录为一个用户谁有权访问脸书集团，因此，它需要访问个人登录信息。因此，将它设计成CLI是个好主意。Python的好处之一就是它庞大的标准库。有一个名为<em class="nb"> argparse </em>的模块可以用来解析CLI参数，还有一个名为<em class="nb"> getpass </em>的模块可以用来提示用户输入密码。用下面的代码创建一个新的文件<em class="nb"> main.py </em>(如果你还没有安装Python<a class="ae ih" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank">和</a>的话，请预先安装它)。</p><pre class="lx ly lz ma fq mb mc md me aw mf dt"><span id="0b31" class="mg kv ik mc b fv mh mi l mj mk"># main.py</span><span id="655d" class="mg kv ik mc b fv nc mi l mj mk">import argparse<br/>import getpass</span><span id="2bfc" class="mg kv ik mc b fv nc mi l mj mk">def main():<br/>  parser = argparse.ArgumentParser(description='This tool lets you invite people in bulk to your Facebook group')<br/>  parser.add_argument('-e','--email', help='Your personal Facebook account email', required=True)<br/>  parser.add_argument('-g','--group', help='The Facebook group name', required=True)<br/>  args = vars(parser.parse_args())<br/>  args['password'] = getpass.getpass()</span><span id="3927" class="mg kv ik mc b fv nc mi l mj mk">if __name__ == '__main__':<br/>  main()</span></pre><p id="0790" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">打开您的终端，导航到您保存文件的目录并输入<code class="eh nd ne nf mc b">python main.py</code>。您应该会收到一个错误，要求您传递两个必需的参数—电子邮件和组名。这些是通过标志传递的。然后应该会提示您输入密码。</p><pre class="lx ly lz ma fq mb mc md me aw mf dt"><span id="9b5b" class="mg kv ik mc b fv mh mi l mj mk">python main.py -e johndoe@example.com -g groupname</span></pre><h1 id="7484" class="ku kv ik bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">从CSV加载电子邮件</h1><p id="17db" class="pw-post-body-paragraph jh ji ik jj b jk ls jm jn jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">CSV是一种受到广泛支持的文件格式，它存储一系列逗号分隔的值。我将我的电子邮件地址存储在一个CSV文件中，结构如下。</p><pre class="lx ly lz ma fq mb mc md me aw mf dt"><span id="3e45" class="mg kv ik mc b fv mh mi l mj mk">john@example.com,<br/>jane@example.com</span></pre><p id="b962" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">使用Python，我们可以很容易地编写一些代码来解析这个文件。让我们创建一个<em class="nb"> EmailLoader </em>类。</p><pre class="lx ly lz ma fq mb mc md me aw mf dt"><span id="d81c" class="mg kv ik mc b fv mh mi l mj mk"># email_loader.py</span><span id="3857" class="mg kv ik mc b fv nc mi l mj mk">import csv<br/>import os<br/>import sys</span><span id="fd5c" class="mg kv ik mc b fv nc mi l mj mk">class EmailLoader:<br/>  filename = 'emails.csv'<br/>  emails = []</span><span id="3574" class="mg kv ik mc b fv nc mi l mj mk">  def __init__(self):<br/>    dir_path = os.path.dirname(os.path.realpath(__file__))<br/>    file_path = dir_path + '/' + self.filename<br/>    if not os.path.isfile(file_path):<br/>      sys.exit('File does not exist: ' + self.filename)</span><span id="211d" class="mg kv ik mc b fv nc mi l mj mk">    with open(file_path, 'rb') as file:<br/>      csv_reader = csv.reader(file)<br/>      for email in csv_reader:<br/>        self.emails.append(email[0])</span><span id="a2af" class="mg kv ik mc b fv nc mi l mj mk">    if len(self.emails) &lt; 1:<br/>      sys.exit('There are no emails in your supplied file')<br/>    else:<br/>      print('Loaded ' + str(len(self.emails)))</span></pre><p id="e384" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">它假设CSV的文件名为<em class="nb"> emails.csv </em>，并且位于同一个目录中。它将电子邮件地址加载到<em class="nb"> emails </em>数组属性中。</p><pre class="lx ly lz ma fq mb mc md me aw mf dt"><span id="5865" class="mg kv ik mc b fv mh mi l mj mk">from email_loader import EmailLoader</span><span id="cf53" class="mg kv ik mc b fv nc mi l mj mk">email_loader = EmailLoader()<br/>print(email_loader.emails)</span></pre><h1 id="d056" class="ku kv ik bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">设置硒</h1><p id="7364" class="pw-post-body-paragraph jh ji ik jj b jk ls jm jn jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">为了控制网络浏览器，我们将使用<a class="ae ih" href="http://www.seleniumhq.org/" rel="noopener ugc nofollow" target="_blank"> Selenium </a>，一个强大的开源浏览器自动化<a class="ae ih" href="https://hackernoon.com/tagged/tool" rel="noopener ugc nofollow" target="_blank">工具</a>，主要用于测试。您可以使用Python的包管理器pip通过在终端输入<code class="eh nd ne nf mc b">pip install selenium</code>来安装它。Selenium需要供应商驱动程序才能工作。我们将使用<a class="ae ih" href="http://phantomjs.org/" rel="noopener ugc nofollow" target="_blank"> PhantomJS </a>驱动程序，它允许我们控制一个PhantomJS无头浏览器。无头浏览器是没有可视用户界面的浏览器。从他们的<a class="ae ih" href="http://phantomjs.org/download.html" rel="noopener ugc nofollow" target="_blank">下载页面</a>下载适用于您的操作系统的正确的PhantomJS驱动程序，并将其复制到您的工作目录中(您需要从zip下载的<em class="nb"> bin </em>文件夹中提取驱动程序)。继续使用面向对象模式，让我们创建一个<em class="nb"> Browser </em>类来封装Selenium的工作。</p><pre class="lx ly lz ma fq mb mc md me aw mf dt"><span id="0cbc" class="mg kv ik mc b fv mh mi l mj mk"># browser.py</span><span id="ca78" class="mg kv ik mc b fv nc mi l mj mk">import os</span><span id="f190" class="mg kv ik mc b fv nc mi l mj mk">from selenium import webdriver</span><span id="43cc" class="mg kv ik mc b fv nc mi l mj mk">class Browser:<br/>  def __init__(self):<br/>    dir_path = os.path.dirname(os.path.realpath(__file__))<br/>    driver_path = dir_path + '/phantomjs-driver'<br/>    self.browser = webdriver.PhantomJS(executable_path=driver_path)</span></pre><p id="1165" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这个类在实例化时使用PhantomJS驱动程序设置Selenium。它假设驱动程序在工作目录中，文件名为<em class="nb"> phantomjs-driver </em>。</p><h1 id="9ce3" class="ku kv ik bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">航行</h1><p id="b8d9" class="pw-post-body-paragraph jh ji ik jj b jk ls jm jn jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">让我们给<em class="nb">浏览器</em>类添加一个导航方法。</p><pre class="lx ly lz ma fq mb mc md me aw mf dt"><span id="0b94" class="mg kv ik mc b fv mh mi l mj mk"># browser.py</span><span id="5df7" class="mg kv ik mc b fv nc mi l mj mk">import os</span><span id="95d2" class="mg kv ik mc b fv nc mi l mj mk">from selenium import webdriver<br/>from selenium.common.exceptions import TimeoutException<br/>from selenium.webdriver.common.by import By<br/>from selenium.webdriver.support import expected_conditions<br/>from selenium.webdriver.support.ui import WebDriverWait</span><span id="16da" class="mg kv ik mc b fv nc mi l mj mk">class Browser:<br/>  def __init__(self):<br/>    dir_path = os.path.dirname(os.path.realpath(__file__))<br/>    driver_path = dir_path + '/phantomjs-driver'<br/>    self.browser = webdriver.PhantomJS(executable_path=driver_path)</span><span id="58ff" class="mg kv ik mc b fv nc mi l mj mk">  def navigate(self, url, wait_for, error):<br/>    try:<br/>      print('Navigating to: ' + url)<br/>      self.browser.get(url)<br/>      element_present = expected_conditions.presence_of_element_located((By.ID, wait_for))<br/>      WebDriverWait(self.browser, self.delay).until(element_present)<br/>    except TimeoutException:<br/>      sys.exit(error)</span></pre><p id="0001" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">要导航到的页面应该作为第一个参数提供。第二个参数是可以在导航页面上找到的div ID，用于确保它已经成功加载。最后一个参数是导航失败时显示的错误消息。只有在try/catch块失败时才会显示，在这种情况下，它将退出CLI并打印错误消息。使用这种方法，导航到脸书主页变得很简单。</p><pre class="lx ly lz ma fq mb mc md me aw mf dt"><span id="86f1" class="mg kv ik mc b fv mh mi l mj mk">from browser import Browser</span><span id="3d69" class="mg kv ik mc b fv nc mi l mj mk">browser = Browser()<br/>browser.navigate(<br/>  url='<a class="ae ih" href="https://www.facebook.com'" rel="noopener ugc nofollow" target="_blank">https://www.facebook.com'</a>,<br/>  wait_for='facebook',<br/>  error='Unable to load the Facebook website'<br/>)</span></pre><h1 id="2a22" class="ku kv ik bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">登录到脸书</h1><p id="abf7" class="pw-post-body-paragraph jh ji ik jj b jk ls jm jn jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">我们的脚本需要能够自动登录。这是在脸书主页上通过页面右上角的输入字段完成的。很简单，电子邮件字段的ID是<em class="nb"> email </em>，密码字段的ID是<em class="nb"> pass。</em>我们可以使用这些id来查找输入。让我们在我们的<em class="nb">浏览器</em>类上创建一个方法来自动化登录。</p><pre class="lx ly lz ma fq mb mc md me aw mf dt"><span id="23d1" class="mg kv ik mc b fv mh mi l mj mk">def enter_login_details(self, email, password):<br/>  try:<br/>    print('Entering login details')<br/>    email_field = self.browser.find_element_by_id('email')<br/>    pass_field = self.browser.find_element_by_id('pass')<br/>    email_field.send_keys(email)<br/>    pass_field.send_keys(password)<br/>    pass_field.submit()<br/>    element_present = expected_conditions.presence_of_element_located((By.ID, 'userNavigationLabel'))<br/>    WebDriverWait(self.browser, self.delay).until(element_present)<br/>  except TimeoutException:<br/>    sys.exit('Login with your credentials unsuccessful')</span></pre><p id="a5db" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">该方法通过ID查找找到每个字段，并输入作为参数传递的适当值。</p><pre class="lx ly lz ma fq mb mc md me aw mf dt"><span id="d5ec" class="mg kv ik mc b fv mh mi l mj mk">browser.enter_login_details(args['email'], args['password'])</span></pre><h1 id="9eb8" class="ku kv ik bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">导航到组页面</h1><p id="c227" class="pw-post-body-paragraph jh ji ik jj b jk ls jm jn jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">登录后，我们需要导航到脸书组页面。这可以通过前面的导航方法来完成。</p><pre class="lx ly lz ma fq mb mc md me aw mf dt"><span id="329d" class="mg kv ik mc b fv mh mi l mj mk">browser.navigate(<br/>  url='<a class="ae ih" href="https://www.facebook.com/groups/'" rel="noopener ugc nofollow" target="_blank">https://www.facebook.com/groups/'</a> + args['group'],<br/>  wait_for='pagelet_group_',<br/>  error='Couldn\'t navigate to the group\'s members page'<br/>)</span></pre><h1 id="d00d" class="ku kv ik bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">自动化导入</h1><p id="1e07" class="pw-post-body-paragraph jh ji ik jj b jk ls jm jn jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">现在，在群组页面上，我们需要遍历导入的电子邮件地址，一次一个地将它们输入到侧边栏的<em class="nb">添加成员</em>输入框中。为此，我们将在<em class="nb">浏览器</em>上添加一个新的<em class="nb"> import_members </em>方法。</p><pre class="lx ly lz ma fq mb mc md me aw mf dt"><span id="f693" class="mg kv ik mc b fv mh mi l mj mk"># browser.py</span><span id="4ead" class="mg kv ik mc b fv nc mi l mj mk">import os<br/>import random<br/>import sys<br/>import time<br/>import unicodedata</span><span id="414e" class="mg kv ik mc b fv nc mi l mj mk">from selenium import webdriver<br/>from selenium.common.exceptions import TimeoutException<br/>from selenium.webdriver.common.by import By<br/>from selenium.webdriver.common.keys import Keys<br/>from selenium.webdriver.support import expected_conditions<br/>from selenium.webdriver.support.ui import WebDriverWait</span><span id="fa8f" class="mg kv ik mc b fv nc mi l mj mk">class Browser:<br/>  delay = 3</span><span id="90b1" class="mg kv ik mc b fv nc mi l mj mk">  def __init__(self):<br/>    dir_path = os.path.dirname(os.path.realpath(__file__))<br/>    driver_path = dir_path + '/phantomjs-driver'<br/>    self.browser = webdriver.PhantomJS(executable_path=driver_path)</span><span id="1563" class="mg kv ik mc b fv nc mi l mj mk">  def navigate(self, url, wait_for, error):<br/>    try:<br/>      print('Navigating to: ' + url)<br/>      self.browser.get(url)<br/>      element_present = expected_conditions.presence_of_element_located((By.ID, wait_for))<br/>      WebDriverWait(self.browser, self.delay).until(element_present)<br/>    except TimeoutException:<br/>      sys.exit(error)</span><span id="5aff" class="mg kv ik mc b fv nc mi l mj mk">  def enter_login_details(self, email, password):<br/>    try:<br/>      print('Entering login details')<br/>      email_field = self.browser.find_element_by_id('email')<br/>      pass_field = self.browser.find_element_by_id('pass')<br/>      email_field.send_keys(email)<br/>      pass_field.send_keys(password)<br/>      pass_field.submit()<br/>      element_present = expected_conditions.presence_of_element_located((By.ID, 'userNavigationLabel'))<br/>      WebDriverWait(self.browser, self.delay).until(element_present)<br/>    except TimeoutException:<br/>      sys.exit('Login with your credentials unsuccessful')</span><span id="4e42" class="mg kv ik mc b fv nc mi l mj mk">  def import_members(self, emails):<br/>    print('Attempting to import email addresses')<br/>    xpath = "//input[<a class="ae ih" href="http://twitter.com/placeholder" rel="noopener ugc nofollow" target="_blank">@placeholder</a>='Enter name or email address...']"<br/>    add_members_field = self.browser.find_element_by_xpath(xpath)<br/>    for email in emails:<br/>      for c in email:<br/>        add_members_field.send_keys(self._get_base_character(c))<br/>      add_members_field.send_keys(Keys.RETURN)<br/>      time.sleep(random.randint(1,self.delay))</span><span id="4fb1" class="mg kv ik mc b fv nc mi l mj mk">  @staticmethod<br/>  def _get_base_character(c):<br/>    desc = unicodedata.name(unicode(c))<br/>    cutoff = desc.find(' WITH ')<br/>    if cutoff != -1:<br/>        desc = desc[:cutoff]<br/>    return unicodedata.lookup(desc)</span></pre><p id="89a5" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这使用了<a class="ae ih" href="https://en.wikipedia.org/wiki/XPath" rel="noopener ugc nofollow" target="_blank"> XPath </a>，它是一种用于处理HTML文档的查询语言。我们通过查找占位符来搜索<em class="nb">添加成员</em>输入。然后，我们遍历要邀请的电子邮件地址数组，逐个字符地输入每个电子邮件地址。这可以防止浏览器锁定输入。每次提交电子邮件地址后，脚本会等待至少一秒钟，然后继续。将<em class="nb"> import_members() </em>的用法添加到<em class="nb"> main.py </em>中，我们的自动化脚本就完成了。</p><pre class="lx ly lz ma fq mb mc md me aw mf dt"><span id="e5e6" class="mg kv ik mc b fv mh mi l mj mk"># main.py</span><span id="a27c" class="mg kv ik mc b fv nc mi l mj mk">import argparse<br/>import getpass</span><span id="9a53" class="mg kv ik mc b fv nc mi l mj mk">from browser import Browser<br/>from email_loader import EmailLoader</span><span id="1051" class="mg kv ik mc b fv nc mi l mj mk">def main():<br/>  parser = argparse.ArgumentParser(description='This tool lets you invite people in bulk to your Facebook group')<br/>  parser.add_argument('-e','--email', help='Your personal Facebook account email', required=True)<br/>  parser.add_argument('-g','--group', help='The Facebook group name', required=True)<br/>  args = vars(parser.parse_args())<br/>  args['password'] = getpass.getpass()</span><span id="d682" class="mg kv ik mc b fv nc mi l mj mk">  email_loader = EmailLoader()<br/>  browser = Browser()<br/>  browser.navigate(<br/>    url='<a class="ae ih" href="https://www.facebook.com'" rel="noopener ugc nofollow" target="_blank">https://www.facebook.com'</a>,<br/>    wait_for='facebook',<br/>    error='Unable to load the Facebook website'<br/>  )<br/>  browser.enter_login_details(args['email'], args['password'])<br/>  browser.navigate(<br/>    url='<a class="ae ih" href="https://www.facebook.com/groups/'" rel="noopener ugc nofollow" target="_blank">https://www.facebook.com/groups/'</a> + args['group'],<br/>    wait_for='pagelet_group_',<br/>    error='Couldn\'t navigate to the group\'s members page'<br/>  )<br/>  browser.import_members(email_loader.emails)<br/>  print('Import complete')</span><span id="a33e" class="mg kv ik mc b fv nc mi l mj mk">if __name__ == '__main__':<br/>  main()</span></pre><h1 id="3126" class="ku kv ik bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">总结</h1><p id="2394" class="pw-post-body-paragraph jh ji ik jj b jk ls jm jn jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">Python和Selenium使简单的web任务自动化变得轻松。今天，我们只经历了一个用例，但可能性几乎是无限的。自动化快乐！源代码请查看Github 上的<a class="ae ih" href="https://github.com/danielireson/facebook-bulk-group-inviter" rel="noopener ugc nofollow" target="_blank">库。</a></p><div class="ht hu fm fo hv kf"><a href="https://github.com/danielireson/facebook-bulk-group-inviter" rel="noopener  ugc nofollow" target="_blank"><div class="kg ab ej"><div class="kh ab ki cl cj kj"><h2 class="bd il fv z el kk eo ep kl er et ij dt translated">danielireson/Facebook-批量-群组-邀请人</h2><div class="km l"><h3 class="bd b fv z el kk eo ep kl er et ek translated">Facebook-bulk-group-inviter-Python CLI通过电子邮件向脸书群组批量导入成员</h3></div><div class="kn l"><p class="bd b gc z el kk eo ep kl er et ek translated">github.com</p></div></div><div class="ko l"><div class="ng l kq kr ks ko kt ib kf"/></div></div></a></div><div class="lx ly lz ma fq ab cb"><figure class="nh hw ni nj nk nl nm paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="nh hw ni nj nk nl nm paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="nh hw ni nj nk nl nm paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="nn no np"><p id="f922" class="jh ji nb jj b jk jl jm jn jo jp jq jr nq jt ju jv nr jx jy jz ns kb kc kd ke hn dt translated"><a class="ae ih" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是这个家庭的一员。我们现在<a class="ae ih" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ih" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jh ji nb jj b jk jl jm jn jo jp jq jr nq jt ju jv nr jx jy jz ns kb kc kd ke hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ih" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ih" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="lx ly lz ma fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nt"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="lx ly lz ma fq hw"><div class="bz el l di"><div class="nu nv l"/></div></figure></div></div>    
</body>
</html>