<html>
<head>
<title>Currying in the real world</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">真实世界中的谄媚</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/currying-in-the-real-world-b9627d74a554?source=collection_archive---------10-----------------------#2017-07-17">https://medium.com/hackernoon/currying-in-the-real-world-b9627d74a554?source=collection_archive---------10-----------------------#2017-07-17</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/1e5730e507ad9248073b54a4e92b631d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4e3-FqD-FndgA92Ie-OYMQ.png"/></div></div></figure><div class=""/><p id="5504" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当我开始学习函数式<a class="ae ka" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程</a>的时候，我学到了很多有趣的概念。但是我想知道在现实世界中我可以在哪里使用它们。事实上，大多数教程都用简单代码给出了这些概念的例子:</p><figure class="kb kc kd ke fq hw"><div class="bz el l di"><div class="kf kg l"/></div></figure><p id="9c6c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">不错，这是可行的，但是我很少在代码中写加法。我可以用这个来增加一个<code class="eh kh ki kj kk b">addOne()</code>函数。但是大多数语言都有一个简单的方法来实现这个<code class="eh kh ki kj kk b">i++</code>或<code class="eh kh ki kj kk b">i += 1</code>。何必呢？</p><p id="ba1f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">不管怎样，让我们回顾一下这段代码。第一行创建一个接受一个参数的函数<code class="eh kh ki kj kk b">add()</code>，它返回另一个也接受一个参数的函数。返回的<a class="ae ka" href="https://hackernoon.com/tagged/function" rel="noopener ugc nofollow" target="_blank">函数</a>已经有一个<code class="eh kh ki kj kk b">a</code>值，并且正在等待一个<code class="eh kh ki kj kk b">b</code>值。第二个函数将第一个和第二个参数相加，并返回结果。为了清楚起见，第一行可以这样写:</p><figure class="kb kc kd ke fq hw"><div class="bz el l di"><div class="kf kg l"/></div></figure><p id="4962" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以清楚地看到不太冗长的ES6语法的好处…你可以用两种方式调用这个函数:我刚刚展示给你的那个:<code class="eh kh ki kj kk b">const addTwo = add(2)</code>和<code class="eh kh ki kj kk b">const result = add(2)(2)</code>。第一个例子是一个currying的例子，它或多或少是你将在许多教程中看到的例子。第二个其实是给你一个结果(4)。</p><p id="acba" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">谄媚是:</p><blockquote class="kl km kn"><p id="8a5c" class="jc jd ko je b jf jg jh ji jj jk jl jm kp jo jp jq kq js jt ju kr jw jx jy jz hn dt translated"><em class="if">将带有多个参数(或一组参数)的函数的求值转化为带有单个参数的函数序列的求值的技术。</em></p></blockquote><p id="d811" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">好的…我已经创建了一个函数<code class="eh kh ki kj kk b">addTwo()</code>，它总是给你给的任何<code class="eh kh ki kj kk b">int</code>加二。如果你给它一个字符串，把它连接成两个…</p><p id="533e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">好吧…我该怎么处理这个。在现实世界中，奉承在哪里有用。让我们做一些重构:</p><figure class="kb kc kd ke fq hw"><div class="bz el l di"><div class="kf kg l"/></div></figure><p id="234a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是一个小库中的方法，帮助我解析来自API first CMS ( <a class="ae ka" href="https://www.cloudcms.com/" rel="noopener ugc nofollow" target="_blank"> Cloud CMS </a>)的数据。我需要按照公司指南将日期格式化为<em class="ko">，解析降价，创建文档和图像url。这是解析这些URL的方法。</em></p><p id="8a70" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个方法映射所有从API返回的对象，然后映射每个属性并解析适当的属性。让我们应用现有的关于currying的知识来重构这个方法。注意，在第8、15、20和24行，我们一次又一次地调用同一个函数，只是参数略有变化:<code class="eh kh ki kj kk b">self.attachementUrl()</code>。这个函数有三个参数和两个可选参数。首先是一个<code class="eh kh ki kj kk b">baseUrl</code>，然后是一个<code class="eh kh ki kj kk b">type</code>附件和<code class="eh kh ki kj kk b">attachement</code>对象。(attachement是一个云CMS概念，其中文档被附加到一个节点，并通过一个可以被跟踪的关系进行链接。云CMS使用图形数据库)。可选参数是<code class="eh kh ki kj kk b">size</code>和<code class="eh kh ki kj kk b">mimetype</code>。</p><p id="a126" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是我们获得一些功能的机会！我们可以做的是创建一个类似于<code class="eh kh ki kj kk b">add()</code>的函数，我们已经看到了，还有两个部分应用的函数，我们将在代码中使用:</p><figure class="kb kc kd ke fq hw"><div class="bz el l di"><div class="kf kg l"/></div></figure><p id="c28c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">函数<code class="eh kh ki kj kk b">parse()</code>首先接受<code class="eh kh ki kj kk b">baseUrl</code>，然后接受<code class="eh kh ki kj kk b">type</code>(预览或静态)，然后接受两个参数<code class="eh kh ki kj kk b">attachement</code>和<code class="eh kh ki kj kk b">size</code>。我们可以将它们一起传递，因为我们知道我们用特定的大小来格式化每个案例的图像。当我们调用<code class="eh kh ki kj kk b">self.attachementUrl()</code>时，我们做实际的工作，这是基本例子的<code class="eh kh ki kj kk b">a + b</code>。</p><p id="cb8d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后我们可以创建两个部分应用的函数:<code class="eh kh ki kj kk b">parsePreview()</code>和<code class="eh kh ki kj kk b">parseStatic()</code>。这两个函数对应的是我们之前看到的<code class="eh kh ki kj kk b">addTwo()</code>函数。我们部分地应用了两个不会改变的参数，而将另外两个参数专门用于代码中。</p><p id="b045" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">因此，我们可以用下面的代码替换前面的代码:</p><figure class="kb kc kd ke fq hw"><div class="bz el l di"><div class="kf kg l"/></div></figure><p id="86f1" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在第12，19，24，28行，我们给出了部分应用函数的最后一个参数。在这个例子中，我们没有减少行数，但是通过使用curried函数，我们提高了代码的可维护性，因为我们减少了重复。我认为这是函数式编程的目标之一:通过使用小函数，拥有一个更易维护的代码，它做一件事，但是可靠地做这件事。</p><p id="19f6" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这段代码介于两者之间，因为这是我第一次看到在代码中加入函数的机会。但是现在我尝试尽可能多地应用函数式编程，即使是在面向对象的项目中。</p><p id="8762" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后，你有没有想过为什么阿谀奉承被称为阿谀奉承？实际上这与印度无关。它只是指数学家和逻辑学家哈斯凯尔·布鲁克斯·加里。</p></div><div class="ab cl ks kt hc ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hn ho hp hq hr"><p id="46ad" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">感谢<a class="ae ka" href="https://lobste.rs/s/siaj6w/currying_real_world#c_ut9atg" rel="noopener ugc nofollow" target="_blank"> apy </a>的评论。</p><figure class="kb kc kd ke fq hw"><div class="bz el l di"><div class="kz kg l"/></div></figure></div></div>    
</body>
</html>