<html>
<head>
<title>ChatWeb: Build Websites that understand users with full (free) Microsoft Stack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ChatWeb:用完整的(免费的)微软堆栈建立理解用户的网站</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/chatweb-build-websites-that-understand-users-with-full-free-microsoft-stack-dc07ce18b19d?source=collection_archive---------9-----------------------#2017-08-27">https://medium.com/hackernoon/chatweb-build-websites-that-understand-users-with-full-free-microsoft-stack-dc07ce18b19d?source=collection_archive---------9-----------------------#2017-08-27</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/b648161a08857438b0a08bdf69ebefc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FQ4imwe3eXMI7cfImNVlVg.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Just another weekend to C&amp;C (Chill &amp; Code) in Taiwan</figcaption></figure><p id="5adb" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">聊天机器人肯定是一个热门话题。我仍然记得几个月前我和微软在香港组织的黑客马拉松<a class="ae ke" href="http://ecjamming.tech" rel="noopener ugc nofollow" target="_blank">e . c . jaming</a>的12个团队中的4个团队是如何开发聊天机器人项目的。</p><p id="13b1" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">但我是一个真正的网络爱好者和传播者。</p><p id="14b2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">有一些很棒的框架，比如谷歌<a class="ae ke" href="https://api.ai" rel="noopener ugc nofollow" target="_blank"> API.ai </a>、<a class="ae ke" href="https://dev.botframework.com/" rel="noopener ugc nofollow" target="_blank">微软机器人框架</a>和<a class="ae ke" href="https://www.luis.ai" rel="noopener ugc nofollow" target="_blank">微软LUIS </a>(语言理解智能服务)，这些框架让开发人员能够毫不费力地在多个渠道构建和推出聊天机器人。</p><p id="6eae" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">换句话说，为了增强聊天机器人开发者的能力，科技巨头们投入了大量的资源来构建组件和微/网络服务，这些组件和服务可以高效、准确地执行聊天机器人管道中的单一特定任务。例如，LUIS可以帮助您理解具有机器学习支持的训练模型的用户，该模型具有单个API端点。</p><p id="7b33" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，我们为什么不利用这些服务来建立一个网站，像聊天机器人一样理解用户的意图和兴趣，同时，利用网络提供的丰富元素，我们能够提供比传统聊天机器人更多的交互。</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kf"><img src="../Images/e90d8dc746ded6147b629be1532908db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FMBO66chD18WVdITPk_5VQ.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">The background of prototype was from <a class="ae ke" href="https://tympanus.net/codrops/2014/09/23/animated-background-headers/" rel="noopener ugc nofollow" target="_blank">https://tympanus.net/codrops/2014/09/23/animated-background-headers/</a></figcaption></figure><p id="5973" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">就我而言，我现在正在为申请美国毕业项目建立一个个人作品集页面。</p><p id="dcc0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在静态的、标准的类似简历的HTML内容之上，我实现了一个标题，它可以与用户交互，并在用户问了一个关于我的经历的特定问题后，重新排列页面上呈现的样式和组件——就好像我在那里，与该用户一对一地回答诸如“你在微软工作过吗？”。</p><p id="8658" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">更好的是这个教程和所谓的ChatWeb是用无服务器架构构建的(感谢<a class="ae ke" href="https://azure.microsoft.com/en-us/services/functions/" rel="noopener ugc nofollow" target="_blank"> Azure Functions </a>)，这意味着你根本不用担心构建和维护服务器。只是前台。刚刚<strong class="ji hv">反应过来</strong>。</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kk"><img src="../Images/dda8f8cc728351fbdc8107c9a089fd63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JdAeqbbDO3LCP-29FbAPZg.png"/></div></div></figure><p id="c0c2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">下面的一切都假设一个Azure账户。Azure提供一个月的免费试用，供你玩一玩。即使在免费试用到期后，该架构中的所有产品都有每月免费配额，不容易被超过。</p></div><div class="ab cl kl km hc kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hn ho hp hq hr"><h1 id="f9c7" class="ks kt hu bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp dt translated">内容</h1><ul class=""><li id="11a1" class="lq lr hu ji b jj ls jn lt jr lu jv lv jz lw kd lx ly lz ma dt translated">培训和发布Microsoft LUIS端点</li><li id="c6a9" class="lq lr hu ji b jj mb jn mc jr md jv me jz mf kd lx ly lz ma dt translated">构建Azure函数</li><li id="f3a2" class="lq lr hu ji b jj mb jn mc jr md jv me jz mf kd lx ly lz ma dt translated">反应和获取</li></ul></div><div class="ab cl kl km hc kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hn ho hp hq hr"><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mg"><img src="../Images/19ea6692cf70b91a32b39dca8029c216.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ZOlRRQFUcOWumuAqUVBPg.png"/></div></div></figure><h1 id="ec51" class="ks kt hu bd ku kv mh kx ky kz mi lb lc ld mj lf lg lh mk lj lk ll ml ln lo lp dt translated">微软路易斯</h1><p id="f3d9" class="pw-post-body-paragraph jg jh hu ji b jj ls jl jm jn lt jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd hn dt translated">所以再说一遍。LUIS在聊天机器人的生态系统中发挥了重要作用，他让机器人能够理解用户的文字。LUIS端点的最终目标是通过消费一个查询，它返回一个JSON数据以及诸如“用户想要什么？”以及“涉及任何特定实体？”</p><pre class="kg kh ki kj fq mp mq mr ms aw mt dt"><span id="2815" class="mu kt hu mq b fv mv mw l mx my">Example:<br/>query = "What have you done at Microsoft?</span><span id="d5b2" class="mu kt hu mq b fv mz mw l mx my">-----</span><span id="7ed9" class="mu kt hu mq b fv mz mw l mx my">LUIS API returns<br/>{<br/>  "query": "what have you done at microsoft",</span><span id="9fab" class="mu kt hu mq b fv mz mw l mx my">  "topScoringIntent": { <br/>     "intent": "WhatDidYouDo",<br/>     "score": 0.729854763<br/>  },</span><span id="e7dc" class="mu kt hu mq b fv mz mw l mx my">  "entities": [ { <br/>     "entity": "microsoft", <br/>     "type": "Company",<br/>     "startIndex": 22,<br/>     "endIndex": 30,<br/>     "score": 0.9897579 <br/>  } ]<br/>}</span></pre><p id="7c3f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">有了这些信息，以及React JS中的功能组件呈现机制，您就已经准备好构建LUIS web应用程序了。</p><p id="3938" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">但在我们深入了解这一点，以及我们如何使用Azure函数保护我们的订阅密钥之前，让我也向您展示一下我是如何在<a class="ae ke" href="https://www.luis.ai" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv"> LUIS.ai </strong> </a>上训练我的语言理解模型的。</p><h2 id="8fb2" class="mu kt hu bd ku na nb nc ky nd ne nf lc jr ng nh lg jv ni nj lk jz nk nl lo nm dt translated">构建LUIS应用程序的分步指南</h2><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kf"><img src="../Images/187fdc0422635db2240c22ec56d44b0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cnVWjxUFHP_E78--heNZqw.png"/></div></div></figure><p id="93a6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在LUIS上创建一个帐户后，您应该会看到此页面。</p><p id="8b70" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">单击按钮新建应用程序。它应该会询问你应用程序的名称及其文化(例如美国)。我没有尝试过其他文化。).</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nn"><img src="../Images/5af1349c1a29653f81fe8fdf01e4c0ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o-Zd3zuwEVg7hpo5KOYf5A.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">LUIS Dashboard</figcaption></figure><p id="50e3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在侧边栏上，单击Intent，开始定义用户可能拥有的意图。例如，如果你正在制作一个电子商务网站，网站应该遵守的可能意图可以是“购买”、“浏览”、“客户支持”等。基本上，试着列出用户来使用你的应用程序的所有可能的原因。</p><blockquote class="no np nq"><p id="35d3" class="jg jh nr ji b jj jk jl jm jn jo jp jq ns js jt ju nt jw jx jy nu ka kb kc kd hn dt translated">在我构建投资组合页面的情况下，我希望我的LUIS应用程序可以帮助我从一个句子中检测出用户是否对我学到了什么(技术堆栈)，或者我做了什么(项目细节)，以及在哪个公司更感兴趣，这样我就可以提供合适的个性化布局。</p></blockquote><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nn"><img src="../Images/e36a4b871440b84d406198b019591076.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MoMqIagOd6uKOqdyNHXQew.png"/></div></div></figure><p id="32d3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">创建意图后，你可以给LUIS一些例子，说明这种特定的意图是可以预期的。对于这个例子，我告诉LUIS，如果一个用户问“你为微软做了什么”、“你在微软做了什么”等问题，他可能会问“你做了什么”(intent)，而“微软”被映射到公司实体。</p><p id="30b0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在您按照定义的意图输入了10个实例后，转到侧边栏上的<strong class="ji hv">训练&amp;测试</strong>，并点击“<strong class="ji hv">训练应用</strong>”。LUIS会帮你处理机器学习的部分。</p><p id="7495" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">魔法。</strong></p><p id="f728" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我喜欢成为21世纪早期的应用程序开发人员；清新爽，但还没完全被AI接管。</p><p id="da9b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">完成后，转到“<strong class="ji hv">发布应用</strong>”页面，您只需点击一下即可将应用推向生产，并获得如下所示的端点:</p><pre class="kg kh ki kj fq mp mq mr ms aw mt dt"><span id="294e" class="mu kt hu mq b fv mv mw l mx my">https://westus.api.cognitive.microsoft.com/luis/v2.0/apps/{app id}?subscription-key={app key}&amp;timezoneOffset=0&amp;verbose=true&amp;q={user query}</span></pre><p id="ce79" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">砰的一声。</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nv"><img src="../Images/3df2dd43aded6d4bf37682c13a091307.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h5xztCIsevgeFnH15T4Uug.png"/></div></div></figure><p id="3c50" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，您有了一个端点，可以将用户文字输入翻译成JSON格式的结构化和自定义的意图和实体。</p><h1 id="b406" class="ks kt hu bd ku kv mh kx ky kz mi lb lc ld mj lf lg lh mk lj lk ll ml ln lo lp dt translated">Azure函数</h1><p id="039a" class="pw-post-body-paragraph jg jh hu ji b jj ls jl jm jn lt jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd hn dt translated">现在，这一步不是强制的，但是强烈推荐，因为将您的秘密和密钥暴露给客户端浏览器通常是一种不好的做法。</p><p id="20ea" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">尤其是一旦你每月的请求量超过10K，路易斯就开始向你收费——这并不像你想象的那样雄心勃勃。请求意味着交易。一个快乐的用户太兴奋了，以至于不能停止提问来取乐，这可能是一个沉重的负担。</p><p id="0321" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你真的不想冒险让其他人在他们的LUIS应用程序上使用你的订阅密钥——你可能不知道在其他网站上的使用情况，但他们的账单会在你身上。</p><p id="7e1d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们可以通过实现一个代理服务器来解决这个问题，可能是Node和Express，并在后端处理HTTP请求。</p><p id="f650" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">但是，Azure Function即使不是最好的，也是另一个更好的解决方案。</p><p id="f575" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这很简单。</p><p id="3d34" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们看看如何用Azure函数<strong class="ji hv">在5分钟内</strong>构建一个代理端点。</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nw"><img src="../Images/c220750bd2dcec0d5f5a64ad9ab230a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CpRBltKvIAuA47b-4fycjw.png"/></div></div></figure><p id="b8e2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">只需在Azure Dashboard上搜索“功能应用”，然后创建一个带有应用名称(我给自己的应用命名为“LUIS-proxy”)、订阅计划(是的……我在微软的实习结束了。免费试用时间。)和所有其他简单和预期的输入。这里没有什么会让你惊讶的。</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kf"><img src="../Images/2f14af73217ba2fe958e7bc84f875d64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sJ-Rik66EL4JTkluFb1Abg.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Click the + next to “Functions” on sidebar to create a Function App</figcaption></figure><p id="d283" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">因此，这个功能应用程序要做的是，它将像我们在前面的步骤中获得的LUIS端点一样工作，但不允许用户访问您的API IDs和订阅密钥。</p><p id="ae79" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我引用一下Azure Functions官方网站上的话——除了团队本身，谁还能解释Azure Functions呢？</p><blockquote class="nx"><p id="5e15" class="ny nz hu bd oa ob oc od oe of og kd ek translated">“Functions提供了一个完全托管的计算平台，具有高度的可靠性和安全性。通过按需扩展，您可以在需要时获得所需的资源。”</p></blockquote><p id="f736" class="pw-post-body-paragraph jg jh hu ji b jj oh jl jm jn oi jp jq jr oj jt ju jv ok jx jy jz ol kb kc kd hn dt translated">使用Azure函数，客户端代码将调用这个Azure端点，然后在Azure的计算平台上使用LUIS的API key完成HTTP请求，并简单地将LUIS结果返回给客户端。如果你熟悉函数式<a class="ae ke" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程</a>，可以把它想象成Azure cloud上的lambda函数。</p><p id="ba1b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">还是那句话，如果你不熟悉这个，这一步并不是成就一个懂用户的网站的必经之路。这是出于安全原因。另外，欢迎您使用Node和Express stack构建这个代理，并使用<a class="ae ke" href="http://digitalocean.com" rel="noopener ugc nofollow" target="_blank"> Digital Ocean </a>、<a class="ae ke" href="https://www.linode.com/" rel="noopener ugc nofollow" target="_blank"> Linode </a>或<a class="ae ke" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>设置API端点。在这种情况下，他们都很好，很整洁。</p><p id="4361" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">但如果你决定跟着我，</p><p id="9ea4" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">以下是您将在功能应用程序上执行的操作:</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kf"><img src="../Images/5509bdc7cfb14e89118df4a78f816941.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E193G13sLrhjOHUDJv3Vzw.png"/></div></div></figure><p id="b7ea" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这个函数是用C#写的，主要是因为我觉得C#可以用<code class="eh om on oo mq b">WebClient</code>以更高效的方式完成任务(只需从LUIS下载响应资源)。Azure函数确实支持<a class="ae ke" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>，请随意用你觉得舒服的方式来做这一部分。</p><p id="813d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">但是您真的可以使用我编写的这段代码来屏蔽任何web服务提供商提供的任何API密钥。只需将您将在AJAX中使用的Url链接粘贴到我在这张截屏上的占位符中，然后单击右上角的<strong class="ji hv"> &lt; / &gt; Get函数url </strong>即可获得LUIS的代理端点。</p><p id="6bfa" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">最后，在{你的应用} &gt; CORS下，记得定义和管理白名单来源列表以调用此端点。我真的很喜欢这个功能。这确保了<strong class="ji hv">只有您的网站有权使用此API端点</strong>。</p><h1 id="7b58" class="ks kt hu bd ku kv mh kx ky kz mi lb lc ld mj lf lg lh mk lj lk ll ml ln lo lp dt translated">反应和获取</h1><p id="faa5" class="pw-post-body-paragraph jg jh hu ji b jj ls jl jm jn lt jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd hn dt translated">最后，对于客户端代码，我再次选择React。</p><p id="3651" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">但这一次，除了“React很酷很干净”还有原因。我保证。</p><p id="8c6c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">React能够控制使用<code class="eh om on oo mq b">this.state</code>呈现的组件，因此我们不必频繁地将AJAX请求放入回调地狱。返回ES6承诺的polyfill Fetch库可以与React无缝协作。最后，我还希望以后可以将它模块化到一个LUIS Wrapper React组件中，使用npm和yarn。</p><p id="c54a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在我开始展示一些代码之前。记得运行创建-反应-应用程序。</p><pre class="kg kh ki kj fq mp mq mr ms aw mt dt"><span id="312d" class="mu kt hu mq b fv mv mw l mx my"># in your terminal<br/>create-react-app &lt;project name&gt;<br/>cd &lt;project name&gt;<br/>npm install --save whatwg-fetch<br/>npm start</span></pre><p id="40ce" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这将为你设置好你需要的所有东西，并且在localhost:3000打开应用程序。</p><p id="c69a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">随着fetch和React的<code class="eh om on oo mq b">state</code>现在可用，我们将能够让应用程序根据LUIS返回的用户意图呈现组件。我的高级架构将是这样的(一个构造函数，一个处理LUIS查询的函数，和一个渲染函数)</p><pre class="kg kh ki kj fq mp mq mr ms aw mt dt"><span id="0e9f" class="mu kt hu mq b fv mv mw l mx my">... standard React import statements<br/>import 'whatwg-fetch';</span><span id="d4ae" class="mu kt hu mq b fv mz mw l mx my">class ChatWeb extends Component {<br/>  constructor(props) {<br/>    super(props);<br/>    this.state = {<br/>      query: "",<br/>      intent: "",<br/>      company: ""<br/>    }<br/>  }</span><span id="9c35" class="mu kt hu mq b fv mz mw l mx my">  submitLUISQuery(e) {<br/>     e.preventDefault();</span><span id="2e16" class="mu kt hu mq b fv mz mw l mx my">     fetch (`{Azure Functions Endpoint}&amp;query=${this.state.query}`)<br/>       .then(res =&gt; JSON.parse(res.json()))<br/>       .then(json =&gt; {<br/>         this.setState({<br/>           intent: json.topScoringIntent.intent,<br/>           company: json.entities[0].entity <br/>         });<br/>       });<br/>  }</span><span id="0c74" class="mu kt hu mq b fv mz mw l mx my">  render() {<br/>    const { intent, company } = this.state;</span><span id="90b2" class="mu kt hu mq b fv mz mw l mx my">    return (<br/>       { intent === "WhatDidYouDo"<br/>           &amp;&amp; ... // component to render in this case<br/>       }<br/>       { intent === "WhatDidYouLearn"<br/>           &amp;&amp; ... // component to render in this case<br/>       }<br/>    );<br/>  }<br/>}</span></pre><p id="fe09" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在我觉得用<code class="eh om on oo mq b">react-router-dom</code>渲染的控制肯定可以更干净。从现在开始，我在这个组合项目中的工作将完全集中在这一点上——找到一种更有效、更模块化的方式来恰当地传递技术堆栈和数据。</p><p id="c2ed" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">同样，这是一个概念和高水平的原型，我迫不及待地想与社区分享。尤其是这周新(也是最后一个)学期开学，我会卡在研究生项目的申请，GRE和潜在的找工作(是的。我仍然希望有雇主担保我的签证，所以我不需要那么拼命。)</p><h1 id="45dc" class="ks kt hu bd ku kv mh kx ky kz mi lb lc ld mj lf lg lh mk lj lk ll ml ln lo lp dt translated">最后…</h1><p id="7ccf" class="pw-post-body-paragraph jg jh hu ji b jj ls jl jm jn lt jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd hn dt translated">我只想说，当然，这不是一个最佳的用户体验。人们(还)不希望与你的网站交谈，这也是这些技术主要用于聊天机器人的原因。但我认为这绝对是一个有趣的实验，我会继续深入下去——我们绝对可以让网站像聊天机器人一样理解用户。</p><p id="864a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这真让我兴奋！</p><p id="edea" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">这为网络UX打开了许多新的可能性。</strong></p><p id="81a7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你有任何更好的UX设计可以与这个聊天网站的概念相结合，一定要通过kevin@projectable.hk的<a class="ae ke" href="mailto:kevin@projectable.hk" rel="noopener ugc nofollow" target="_blank">联系我，通过Linkedin的</a><a class="ae ke" href="https://www.linkedin.com/in/kai-chun-kevin-hsu-5428bbb4" rel="noopener ugc nofollow" target="_blank">联系我，或者简单地在下面留下评论。我的私人Gitlab中已经有了样板文件，我们还有工作要做！</a></p><figure class="kg kh ki kj fq iv"><div class="bz el l di"><div class="op oq l"/></div></figure></div></div>    
</body>
</html>