<html>
<head>
<title>Hoisting in JavaScript: a Quick Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript提升:快速指南</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/hoisting-in-javascript-a-quick-guide-cc4d9597bbd7?source=collection_archive---------2-----------------------#2017-04-23">https://medium.com/hackernoon/hoisting-in-javascript-a-quick-guide-cc4d9597bbd7?source=collection_archive---------2-----------------------#2017-04-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="bd30" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">提升概念的初学者友好概述</h2></div><p id="b69a" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">提升<a class="ae kf" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>中的</strong>意味着<strong class="jl hv">变量和函数声明被移动到其包含</strong> <a class="ae kf" rel="noopener" href="/@lenafaure/understand-javascript-variable-scope-with-ease-221a6d41dc43"> <strong class="jl hv">作用域</strong> </a>的顶部。</p><p id="0c6c" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这在我的代码中是什么意思？</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff kg"><img src="../Images/4837ad1bcf36b43aeca67b517922bff8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T8xIFtPB1TG2gaWm9PgO_A.jpeg"/></div></div><figcaption class="ks kt fg fe ff ku kv bd b be z ek"><a class="ae kf" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/</a></figcaption></figure><h1 id="db14" class="kw kx hu bd ky kz la lb lc ld le lf lg ja lh jb li jd lj je lk jg ll jh lm ln dt translated">声明在赋值之前</h1><p id="888c" class="pw-post-body-paragraph jj jk hu jl b jm lo iv jo jp lp iy jr js lq ju jv jw lr jy jz ka ls kc kd ke hn dt translated">让我们考虑下面的代码片段来理解提升是如何工作的:</p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="lt lu l"/></div></figure><p id="cfde" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">也许您希望console.log打印出<code class="eh lv lw lx ly b">undefined</code>，因为<code class="eh lv lw lx ly b">var</code>语句(声明)在<code class="eh lv lw lx ly b">rockStar = “Mick Jagger”</code>(赋值)之后。在代码中创建之前，我们给<code class="eh lv lw lx ly b">rockStar</code>变量<em class="lz">赋值。</em></p><p id="5648" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">毕竟，合乎逻辑的想法是，JavaScript程序中编写的所有代码行都是自顶向下读取、解释和执行的。这个假设是有道理的，但是我们刚刚展示的行为告诉我们事实并非如此。</p><p id="b565" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">实际上，就在代码被执行之前，它要经过一个编译器:在这个被称为<em class="lz">词法分析的阶段，</em> <a class="ae kf" rel="noopener" href="/@lenafaure/understand-javascript-variable-scope-with-ease-221a6d41dc43">作用域</a>被定义，<strong class="jl hv">变量和函数声明被移到它们作用域</strong>的顶部。如果它们被定义在一个<a class="ae kf" href="https://hackernoon.com/tagged/function" rel="noopener ugc nofollow" target="_blank">函数</a>内，它们被移动到这个函数的顶部，如果它们在一个函数外，它们被移动到全局范围的顶部。</p><p id="72d3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">考虑另一段代码:</p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="lt lu l"/></div></figure><p id="77fc" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这一次，尽管我们声明并赋值了<code class="eh lv lw lx ly b">rockStar</code>变量，但当我们试图打印变量时，却得到了<code class="eh lv lw lx ly b">undefined</code>响应。这是为什么呢？</p><p id="f6d0" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">解决这个问题的最好方法是记住所有的声明都是首先处理的，对于变量和函数也是如此。</p><blockquote class="ma"><p id="60af" class="mb mc hu bd md me mf mg mh mi mj ke ek translated">ll声明首先被处理，这同样适用于变量和函数。</p></blockquote><p id="e2a8" class="pw-post-body-paragraph jj jk hu jl b jm mk iv jo jp ml iy jr js mm ju jv jw mn jy jz ka mo kc kd ke hn dt translated">让我们通过像JavaScript一样阅读代码来解码它的含义。</p><p id="db4d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">当您看到<code class="eh lv lw lx ly b">var rockStar = “Mick Jagger”</code>时，您会将其视为一条语句，但JavaScript却不这么认为。它实际上将其解释为两种截然不同的陈述:</p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="lt lu l"/></div></figure><p id="17d7" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在我们的例子中，JavaScript首先解释代码，发现<code class="eh lv lw lx ly b">rockStar</code>变量存在，并将其移动到作用域的顶部:这就是所谓的<strong class="jl hv">提升</strong>。</p><p id="369f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">但是第二个语句，即赋值语句，被<strong class="jl hv">留在原地</strong>。然后，JavaScript执行代码，就像它是这样写的:</p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="lt lu l"/></div></figure><p id="ba13" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">换句话说，<strong class="jl hv">声明在赋值</strong>之前:只有变量和函数声明被提升，而赋值则留在原处，就在代码中写它们的地方。</p><blockquote class="ma"><p id="12ed" class="mb mc hu bd md me mf mg mh mi mj ke ek translated">声明出现在赋值之前:只有变量和函数声明被提升，而赋值保留在代码中的位置。</p></blockquote><h1 id="688d" class="kw kx hu bd ky kz la lb lc ld le lf lg ja mp jb li jd mq je lk jg mr jh lm ln dt translated">函数声明会被提升，但函数表达式不会</h1><p id="a2a3" class="pw-post-body-paragraph jj jk hu jl b jm lo iv jo jp lp iy jr js lq ju jv jw lr jy jz ka ls kc kd ke hn dt translated">我们已经看到了<em class="lz">变量</em>提升的例子，现在让我们关注<em class="lz">函数</em>的行为。</p><p id="3cc0" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">请参见下面这段代码:</p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="lt lu l"/></div></figure><p id="4fd0" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">根据我们现在对提升的理解，我们如何重写这段代码，就好像它是JavaScript在解释它一样？</p><p id="88cf" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">首先记住<strong class="jl hv">提升是基于作用域</strong>的，这里<code class="eh lv lw lx ly b">name</code>变量的作用域是函数<code class="eh lv lw lx ly b">movieStar</code>内部的<em class="lz">局部作用域</em>。变量声明将被提升到函数的顶部，而不是全局范围。</p><p id="e244" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然而，我们也在<em class="lz">全局作用域</em>中声明了的<code class="eh lv lw lx ly b">movieStar</code>函数，对于变量和函数的声明，提升也是一样:我们的函数声明将被移到顶部，在函数的<em class="lz">执行</em>之前。</p><p id="4d61" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">JavaScript将对代码进行如下解释:</p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="lt lu l"/></div></figure><p id="091b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在这个例子中，<code class="eh lv lw lx ly b">movieStar</code>函数调用有效，因为函数声明被提升，并被解释为在调用之前声明<em class="lz">。</em></p><p id="ead8" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们再举一个例子:</p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="lt lu l"/></div></figure><p id="e1ac" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这里发生了什么？我赋给变量<code class="eh lv lw lx ly b">movieStar</code>的函数，一个被称为<em class="lz">函数表达式</em>的进程，这次没有被挂起:当我调用该函数时，JavaScript抛出一个TypeError。</p><p id="522b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这是因为赋给变量的函数不会被提升。</p><blockquote class="ma"><p id="83bb" class="mb mc hu bd md me mf mg mh mi mj ke ek translated">赋给变量的函数不会被提升。</p></blockquote><p id="7fed" class="pw-post-body-paragraph jj jk hu jl b jm mk iv jo jp ml iy jr js mm ju jv jw mn jy jz ka mo kc kd ke hn dt translated">作为演示，如果我现在编写如下代码，它现在会打印出预期的结果:</p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="lt lu l"/></div></figure><h1 id="8ff6" class="kw kx hu bd ky kz la lb lc ld le lf lg ja lh jb li jd lj je lk jg ll jh lm ln dt translated">变量前的函数</h1><p id="38f2" class="pw-post-body-paragraph jj jk hu jl b jm lo iv jo jp lp iy jr js lq ju jv jw lr jy jz ka ls kc kd ke hn dt translated">我们现在知道函数声明和变量声明都是被提升的。但是还有一点需要警惕:<strong class="jl hv">先吊函数，再吊变量。</strong></p><blockquote class="ma"><p id="10cd" class="mb mc hu bd md me mf mg mh mi mj ke ek translated"><strong class="ak">先吊函数，再吊变量。</strong></p></blockquote><p id="0166" class="pw-post-body-paragraph jj jk hu jl b jm mk iv jo jp ml iy jr js mm ju jv jw mn jy jz ka mo kc kd ke hn dt translated">考虑以下代码，其中变量和函数用相同的名称声明:</p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="lt lu l"/></div></figure><p id="0598" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">函数在变量之前被提升，所以当我打印<code class="eh lv lw lx ly b">businessStar</code>的值时，它输出函数本身。</p><p id="13ec" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">另一个给变量赋值的例子是:</p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="lt lu l"/></div></figure><p id="0b83" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这一次输出的是变量的值，因为变量被赋予了一个值，这个值覆盖了函数声明。如果你现在试图调用函数<code class="eh lv lw lx ly b">businessStar()</code>，你将得到一个类型错误:这是因为<code class="eh lv lw lx ly b">businessStar</code>已经被赋予了字符串“Gary Vaynerchuck”并且不再是一个函数。</p><h1 id="3b87" class="kw kx hu bd ky kz la lb lc ld le lf lg ja lh jb li jd lj je lk jg ll jh lm ln dt translated">结论</h1><p id="633f" class="pw-post-body-paragraph jj jk hu jl b jm lo iv jo jp lp iy jr js lq ju jv jw lr jy jz ka ls kc kd ke hn dt translated"><strong class="jl hv">提升是Javascript将声明移动到顶部的默认行为。</strong></p><p id="9eaf" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">变量和函数不是在声明后就可以使用，而是实际上在代码中就可以使用，这可能会导致某些行为，如果你对提升一无所知，你就不会想到这些行为。</p><p id="60ce" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这就是为什么作为一项规则，尽可能经常地确保您:</p><p id="47cc" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">→ <strong class="jl hv">在作用域顶部声明所有变量</strong>(在全局作用域顶部或函数作用域顶部)</p><p id="5d88" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">→如果可以的话，确保你把所有的函数都放在它们作用域的顶部。</p></div><div class="ab cl ms mt hc mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hn ho hp hq hr"><p id="cd58" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">想了解更多JavaScript基础知识吗？查看我的其他文章:</p><ul class=""><li id="6202" class="mz na hu jl b jm jn jp jq js nb jw nc ka nd ke ne nf ng nh dt translated"><a class="ae kf" rel="noopener" href="/@lenafaure/understand-javascript-variable-scope-with-ease-221a6d41dc43"> <strong class="jl hv">轻松理解JavaScript变量作用域</strong> </a></li><li id="f056" class="mz na hu jl b jm ni jp nj js nk jw nl ka nm ke ne nf ng nh dt translated"><a class="ae kf" rel="noopener" href="/@lenafaure/get-your-head-around-this-73c23653b102"> <strong class="jl hv">把头缠在“这个”上</strong> </a></li><li id="71c6" class="mz na hu jl b jm ni jp nj js nk jw nl ka nm ke ne nf ng nh dt translated"><a class="ae kf" rel="noopener" href="/@lenafaure/how-to-use-javascript-closures-with-confidence-85cd1f841a6b"> <strong class="jl hv">如何自信地使用JavaScript闭包</strong> </a></li><li id="306b" class="mz na hu jl b jm ni jp nj js nk jw nl ka nm ke ne nf ng nh dt translated"><a class="ae kf" href="https://hackernoon.com/grasp-by-value-and-by-reference-in-javascript-7ed75efa1293" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hv">掌握JavaScript </strong> </a>中的“按值”和“按引用”</li><li id="7bbe" class="mz na hu jl b jm ni jp nj js nk jw nl ka nm ke ne nf ng nh dt translated"><a class="ae kf" href="https://hackernoon.com/a-quick-handbook-for-dates-in-javascript-7b71d0ef8e53" rel="noopener ugc nofollow" target="_blank"><strong class="jl hv">JavaScript中的日期快速手册</strong> </a></li><li id="2784" class="mz na hu jl b jm ni jp nj js nk jw nl ka nm ke ne nf ng nh dt translated"><a class="ae kf" rel="noopener" href="/@lenafaure/work-with-javascript-arrays-like-a-boss-97207a042e42"> <strong class="jl hv">像老板一样使用JavaScript数组</strong> </a></li></ul></div><div class="ab cl ms mt hc mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hn ho hp hq hr"><p id="2c65" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我希望您喜欢这篇关于JavaScript提升的介绍。</p><p id="26f2" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">请随意评论并喜欢这篇文章，以便其他人可以在Medium上轻松找到它！</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><a href="http://eepurl.com/dvio9L"><div class="fe ff nn"><img src="../Images/3183c9cfe7a8644bc0a59d2e3e57fa27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*td_Zl-oX7vl2kIsoldqcLA.png"/></div></a></figure><div class="kh ki kj kk fq ab cb"><figure class="no kl np nq nr ns nt paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="no kl np nq nr ns nt paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="no kl np nq nr ns nt paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="nu nv nw"><p id="f922" class="jj jk lz jl b jm jn iv jo jp jq iy jr nx jt ju jv ny jx jy jz nz kb kc kd ke hn dt translated"><a class="ae kf" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kf" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kf" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae kf" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jj jk lz jl b jm jn iv jo jp jq iy jr nx jt ju jv ny jx jy jz nz kb kc kd ke hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kf" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kf" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff oa"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="ob lu l"/></div></figure></div></div>    
</body>
</html>