<html>
<head>
<title>Sending HTML email using Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Go发送HTML电子邮件</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/sending-html-email-using-go-c464d03a26a6?source=collection_archive---------5-----------------------#2017-11-15">https://medium.com/hackernoon/sending-html-email-using-go-c464d03a26a6?source=collection_archive---------5-----------------------#2017-11-15</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/54d333413aa6f4f4320b364abda1ffda.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*LqI9Ql0ZaWFWh9PrMjZlYw.png"/></div></figure><p id="5974" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在这个快速教程中，我将向你展示如何使用标准的<strong class="ja hv"> Go </strong>库发送<strong class="ja hv"> HTML </strong>电子邮件。在本教程结束时，您将能够发送一封简讯电子邮件，如下所示:</p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff jw"><img src="../Images/36d0e4878fdebea6aed072fffdc90a09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/0*1f_d5lVzRFV8gPac."/></div></figure><p id="b511" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在我开始之前，这个演示中使用的所有代码都可以在我的<a class="ae kb" href="https://github.com/mlabouardy/go-html-email" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hv"> Github </strong> </a>上找到。</p><p id="6ea6" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 1 — HTML模板</strong></p><p id="fcbb" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">编写电子邮件模板是让开发人员热泪盈眶的任务之一，因为电子邮件客户端之间的HTML/CSS呈现存在巨大差异。<strong class="ja hv">电子邮件客户端</strong>呈现HTML的方式与<strong class="ja hv">浏览器</strong>不同。创建HTML电子邮件模板时，CSS属性如<em class="kc">浮动</em>、<em class="kc">背景图片</em>甚至<em class="kc">边距</em>都不应该是你的词汇表的一部分。那么，如何创建一个漂亮的HTML电子邮件模板呢？</p><p id="5176" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">回想一下1999年，这意味着<em class="kc">表格</em>、<em class="kc">单元格边距</em>、<em class="kc">单元格间距</em>、<em class="kc">列跨度</em>。所有那些你以为已经抛在脑后的糟糕的事情现在都成了你最亲密的朋友。</p><p id="b6f1" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">根据我的经验，HTML邮件代码变得非常复杂，非常快。所以最好保持简单，从一个计划开始:</p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff kd"><img src="../Images/2ea3c455c15540794ad8b039579a8115.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/0*EjA1YYjRhOCDQgbs."/></div></figure><p id="ecc8" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">因此，我们将从100%宽度和白色背景的包装表开始。我使用了<em class="kc">单元格填充</em>和<em class="kc">单元格间距</em> HTML属性。把它们想象成使用<em class="kc">边距</em>和<em class="kc">填充</em> CSS属性:</p><figure class="jx jy jz ka fq iv"><div class="bz el l di"><div class="ke kf l"/></div></figure><p id="1e28" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">注意:表中有4行:</p><ul class=""><li id="53b8" class="kg kh hu ja b jb jc jf jg jj ki jn kj jr kk jv kl km kn ko dt translated">一个在顶部用于<strong class="ja hv">集管</strong></li><li id="1611" class="kg kh hu ja b jb kp jf kq jj kr jn ks jr kt jv kl km kn ko dt translated">中间一个为<strong class="ja hv">主要内容</strong></li><li id="e605" class="kg kh hu ja b jb kp jf kq jj kr jn ks jr kt jv kl km kn ko dt translated">一个用于<strong class="ja hv">订阅按钮</strong></li><li id="f26c" class="kg kh hu ja b jb kp jf kq jj kr jn ks jr kt jv kl km kn ko dt translated">一个在底部用于<strong class="ja hv">页脚</strong></li></ul><p id="d080" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在，我们可以开始一节一节地编写新闻稿了:</p><p id="0f17" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 1.1 —标题</strong></p><p id="6fd9" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">标题非常简单，只有一列，一行中间有一段文字:</p><figure class="jx jy jz ka fq iv"><div class="bz el l di"><div class="ke kf l"/></div></figure><p id="0cd8" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 1.2 —内容</strong></p><p id="7c5e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我们的内容部分非常简单，它只是一个段落，所以编码非常简单:</p><figure class="jx jy jz ka fq iv"><div class="bz el l di"><div class="ke kf l"/></div></figure><p id="2731" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">注意:{{。在发送电子邮件之前，<strong class="ja hv">模板引擎</strong>解析HTML模板时，username }}部分将被替换为收件人姓名。</p><p id="4a52" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 1.3 —订阅按钮</strong></p><p id="80b3" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在最困难的部分来了，<strong class="ja hv">按钮元素</strong>在大多数邮件客户端都不支持，因此，我们必须使用<em class="kc">表格</em>和<em class="kc">表格单元格</em>:</p><figure class="jx jy jz ka fq iv"><div class="bz el l di"><div class="ke kf l"/></div></figure><p id="e90b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">注意:我们使用的是<em class="kc">背景颜色</em>而不是<em class="kc">背景</em> CSS属性。这是因为HTML值在电子邮件客户端比CSS属性更受支持。</p><p id="e3e1" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这只是在电子邮件中实现按钮的一种方式。诚然，它在每个客户端看起来并不总是一样的，但web也不总是完美的。我更喜欢这样，因为这样更简单，而且不需要使用<strong class="ja hv">图像资源</strong>或<a class="ae kb" href="https://www.emailonacid.com/blog/article/email-development/emailology_vector_markup_language_and_backgrounds" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hv"> VML </strong> </a></p><p id="8c29" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 1.4 —页脚</strong></p><p id="f964" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">页脚只是重复我们已经在页眉部分做过的事情。</p><p id="52b6" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">注意:不要忘记添加<strong class="ja hv">元标签</strong>:</p><p id="f667" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">视口:</p><blockquote class="ku kv kw"><p id="2135" class="iy iz kc ja b jb jc jd je jf jg jh ji kx jk jl jm ky jo jp jq kz js jt ju jv hn dt translated"><meta name="”viewport”" content="”width=device-width”/"/></p></blockquote><p id="b06c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">它曾经告诉浏览器，你的电子邮件是有响应的，可以适应平板电脑和智能手机这样的小屏幕。</p><p id="1464" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">字符集:</p><blockquote class="ku kv kw"><p id="e386" class="iy iz kc ja b jb jc jd je jf jg jh ji kx jk jl jm ky jo jp jq kz js jt ju jv hn dt translated"><meta http-equiv="”Content-Type”" content="”text/html;" charset="UTF-8&quot;"/></p></blockquote><p id="f572" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">为了在各种电子邮件客户端之间保持字符编码，这一点很重要。</p><p id="924b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">主布局现在已经完成:</p><figure class="jx jy jz ka fq iv"><div class="bz el l di"><div class="ke kf l"/></div></figure><p id="33d1" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 2 —编码部分</strong></p><p id="0ca3" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 2.2 —邮件程序</strong></p><p id="16eb" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">它负责解析HTML模板并发送电子邮件</p><figure class="jx jy jz ka fq iv"><div class="bz el l di"><div class="ke kf l"/></div></figure><p id="1212" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 2.3 —邮件程序配置</strong></p><p id="3733" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">负责将配置文件映射成一个<strong class="ja hv"> Config </strong>对象</p><figure class="jx jy jz ka fq iv"><div class="bz el l di"><div class="ke kf l"/></div></figure><p id="aa82" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">配置文件中有<strong class="ja hv"> SMTP服务器</strong>的信息:</p><blockquote class="ku kv kw"><p id="0d73" class="iy iz kc ja b jb jc jd je jf jg jh ji kx jk jl jm ky jo jp jq kz js jt ju jv hn dt translated">server="smtp.gmail.com "</p><p id="4925" class="iy iz kc ja b jb jc jd je jf jg jh ji kx jk jl jm ky jo jp jq kz js jt ju jv hn dt translated">端口=587</p><p id="4ad8" class="iy iz kc ja b jb jc jd je jf jg jh ji kx jk jl jm ky jo jp jq kz js jt ju jv hn dt translated">email= "您的电子邮件地址"</p><p id="056f" class="iy iz kc ja b jb jc jd je jf jg jh ji kx jk jl jm ky jo jp jq kz js jt ju jv hn dt translated">password= "电子邮件密码"</p></blockquote><p id="daae" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">注意:上面的代码使用一个外部库来解析配置文件，所以一定要通过键入以下命令来获取它:</p><blockquote class="ku kv kw"><p id="3155" class="iy iz kc ja b jb jc jd je jf jg jh ji kx jk jl jm ky jo jp jq kz js jt ju jv hn dt translated">去找github.com/BurntSushi/toml</p></blockquote><p id="7e42" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 2.4 —主要应用</strong></p><p id="04af" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">它用邮件主题和接收者电子邮件创建一个新请求，然后调用<strong class="ja hv"> Send </strong>方法:</p><figure class="jx jy jz ka fq iv"><div class="bz el l di"><div class="ke kf l"/></div></figure><p id="585a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 3 —测试</strong></p><p id="5477" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">有许多客户端需要测试，也有许多测试它们的方法，让我们来看看几组<strong class="ja hv">电子邮件客户端</strong>:</p><p id="6af8" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 3.1 —雅虎</strong></p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff la"><img src="../Images/9014d3eeeea716f63022efe214bc2548.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*hMkvptIKY9dJCFu1."/></div></figure><p id="7d88" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 3.2 — Gmail </strong></p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff la"><img src="../Images/eb5f05c81b9f04d937627eb531ef3d99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*AySuSmGoUrjP6LQP."/></div></figure><p id="271d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 3.3 — Mozilla雷鸟</strong></p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff la"><img src="../Images/5d842a7b38c01ef1c2211e4037fc2379.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*osYyMwYZ1-Q6P8lX."/></div></figure><p id="f6c9" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 3.4 —微软Outlook </strong></p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff la"><img src="../Images/17902e34180d28249393a8c439ae1a9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*FjCD_fm1SqIo_rmD."/></div></figure><p id="d839" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 3.5 —安卓电子邮件(5.0) </strong></p><figure class="jx jy jz ka fq iv fe ff paragraph-image"><div class="fe ff lb"><img src="../Images/a6e4dc862158ed99d8a931688579cdcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/0*JeMm19xg-JoE4MYo."/></div></figure><p id="628d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">所以你可以注意到上面我们创建的模板也是有响应的。</p></div></div>    
</body>
</html>