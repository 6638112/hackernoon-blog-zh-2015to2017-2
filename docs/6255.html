<html>
<head>
<title>Setup Nodemon to auto restart Nodejs application server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设置Nodemon以自动重启Nodejs应用程序服务器</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/setup-nodemon-to-auto-restart-nodejs-application-server-8d8993b7dfd9?source=collection_archive---------7-----------------------#2017-09-10">https://medium.com/hackernoon/setup-nodemon-to-auto-restart-nodejs-application-server-8d8993b7dfd9?source=collection_archive---------7-----------------------#2017-09-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/f01732c7c456dd1d675587d410e28598.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aeWo6e6FC8InJwBl3TmpDw.jpeg"/></div></div></figure><p id="4727" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">手动重启Node.js应用程序是一项既累又繁琐的工作。Nodemon是在开发模式下自动重启nodejs应用服务器的最佳解决方案。</p><h1 id="a3a9" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">第一步</h1><p id="c211" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">组织源目录<code class="eh le lf lg lh b">src</code>，并使用<code class="eh le lf lg lh b">app.js</code>或<code class="eh le lf lg lh b">index.js</code>或<code class="eh le lf lg lh b">server.js</code>或任何其他用于引导Node.js服务器的约定对其进行初始化。</p><p id="3519" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通过添加一个<code class="eh le lf lg lh b">start</code>脚本来相应地更新<code class="eh le lf lg lh b">package.json</code>文件。</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><h1 id="1444" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">第二步</h1><p id="5fa0" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">添加<code class="eh le lf lg lh b">express</code>或任何其他框架作为依赖来引导一个最小的服务器。</p><p id="7885" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最小服务器的代码:</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="9b23" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在第一个终端窗口中启动服务器:</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="7f29" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在第二个终端窗口中，请求url以测试api是否工作，并查看响应消息:</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="9929" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，如果我更改响应消息，我必须重新启动服务器才能获得想要的结果:</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="0b4c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">使用<code class="eh le lf lg lh b">Ctrl + C</code>停止当前正在运行的服务器，并使用之前相同的命令重新启动:<code class="eh le lf lg lh b">npm run start</code>。</p><p id="4844" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在终端窗口中再次使用curl命令，我们得到了想要的结果:</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="56dd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这整个过程是重复的，会减慢你开发任何包或应用程序的速度。更好的解决方案是使用<code class="eh le lf lg lh b">nodemon</code>。</p><h1 id="8523" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">第三步</h1><p id="bb09" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">将nodemon添加为<code class="eh le lf lg lh b">devDependency</code>:</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><h1 id="b6f7" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">第四步</h1><p id="d447" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">在<code class="eh le lf lg lh b">package.json</code>文件中的npm脚本下创建另一个脚本<code class="eh le lf lg lh b">dev</code>:</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="face" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在运行<code class="eh le lf lg lh b">$ npm run dev</code>并使用curl命令请求，我们将看到最后一个熟悉的结果:</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="8eb7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果我将<code class="eh le lf lg lh b">index.js</code>文件中的响应消息改回<code class="eh le lf lg lh b">Hello World</code>，这一次我不需要重启服务器，因为<code class="eh le lf lg lh b">nodemon</code>正在通过其<code class="eh le lf lg lh b">--watch</code>参数监视src目录中的变化。如果我再次使用curl命令，结果是熟悉的更新</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="e72f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">可以通过观察nodemon运行的终端窗口中的日志消息进行验证:</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="326a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要停止nodemon进程，请使用<code class="eh le lf lg lh b">Ctrl + C</code>。</p><p id="fbcc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">全文来源于<a class="ae ka" href="https://github.com/amandeepmittal/nodemon-auto-restart" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv">本</strong> </a> <strong class="je hv"> Github资源库</strong>。</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lo ln l"/></div></figure><h1 id="be20" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">如果你觉得这篇文章有用，请鼓掌👏。</h1><h1 id="24f1" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">谢谢大家！</h1></div></div>    
</body>
</html>