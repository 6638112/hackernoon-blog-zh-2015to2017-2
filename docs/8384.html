<html>
<head>
<title>Curry away in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">柯里反应过来</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/curry-away-in-react-7c4ed110c65a?source=collection_archive---------4-----------------------#2017-11-30">https://medium.com/hackernoon/curry-away-in-react-7c4ed110c65a?source=collection_archive---------4-----------------------#2017-11-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/b902cb4858bb76dd35dd1541d27d71e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*42hGF5inEjXgKZ-dEMw0qg.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Disclaimer: You may or may not have improved your curry making skills by the end of this blog</figcaption></figure><p id="a700" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">因此，你将建立一个销售狗用品的下一代电子商务公司，你已经决定使用React来建立它，因为，你知道，它现在非常流行，选择前端框架是建立任何成功的在线业务的“第一步，也是最重要的一步”。</p><p id="5fce" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我想分享我在建立自己的电子商务网站时学到的一个巧妙的技巧，显然是下一代的coz React！</p><p id="46ae" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">基于各个方面过滤产品是任何购物网站的主要功能，因此让我们在产品结果页面中添加一些过滤器。</p><figure class="kf kg kh ki fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ke"><img src="../Images/a674589d110d83d26d53093ad8fa5e67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KkswTL4obvp-ow3tC84Qfw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">This is where our customers filter and find the right products for their dogs :)</figcaption></figure><p id="86e9" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">正如任何“优秀”的React开发人员所做的那样，让我们将这个UI分解成<a class="ae kj" href="https://reactjs.org/docs/thinking-in-react.html" rel="noopener ugc nofollow" target="_blank">个组件</a>，这在我们的例子中非常简单。</p><figure class="kf kg kh ki fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kk"><img src="../Images/15fa4b59d31bd347afa6e482a38d918a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*efUWRRte_Kk0uUx0SQmHlw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">This is what React developers see when they visit any webpage :D</figcaption></figure><p id="f995" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">接下来，让我们识别应用程序中的<em class="kl">状态</em>。这里可能被视为状态的唯一数据片段是过滤器选择。其他数据，产品列表可能会作为<em class="kl">道具</em>传递下去，不会发生变化。</p><p id="9712" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh km kn ko kp b">filterSelections</code>是一个对象，包含页面中每个过滤器的选定值。</p><pre class="kf kg kh ki fq kq kp kr ks aw kt dt"><span id="1d9d" class="ku kv hu kp b fv kw kx l ky kz">filterSelections = {<br/>  price: ...,<br/>  ages: ...,<br/>  brands: ...,<br/>}</span></pre><p id="cebf" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">因为<code class="eh km kn ko kp b">Products</code>组件是包含需要<code class="eh km kn ko kp b">filterSelections</code>(<code class="eh km kn ko kp b">Filters</code>和<code class="eh km kn ko kp b">ProductResults</code>组件)的组件的公共父组件，所以它将是这个<em class="kl">状态</em>的合适位置。</p><p id="0c67" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在接收到作为道具的<code class="eh km kn ko kp b">filterSelections</code>之后，<code class="eh km kn ko kp b">Filters</code>组件将把相关的过滤器值传递给它的每个子组件。</p><figure class="kf kg kh ki fq iv"><div class="bz el l di"><div class="la lb l"/></div></figure><p id="fc3a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh km kn ko kp b">filterSelections</code>也将被传递到<code class="eh km kn ko kp b">ProductResults</code>组件中，以便可以应用过滤器，并且只显示相关产品。</p><p id="e3e0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这些过滤器不能只是静态控件，我们需要它们在客户调整过滤器时更新<code class="eh km kn ko kp b">filterSelections</code>。</p><p id="94e7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们将<code class="eh km kn ko kp b">filterSelections</code>作为<em class="kl">道具</em>传递给过滤器，我们知道道具在React中是不可变的。那么我们在哪里变异<code class="eh km kn ko kp b">filterSelections</code>呢？答案应该是<code class="eh km kn ko kp b">Products</code>组件，因为它是<code class="eh km kn ko kp b">filterSelections</code>的所有者，它的状态是<em class="kl">。</em></p><p id="4b94" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们继续添加一组更改处理程序函数，这样对过滤器选择的任何更改都会传播到发生实际变化的<code class="eh km kn ko kp b">Products</code>组件。</p><p id="f483" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这里是<code class="eh km kn ko kp b">Products</code>组件。</p><figure class="kf kg kh ki fq iv"><div class="bz el l di"><div class="la lb l"/></div></figure><p id="94bd" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">和<code class="eh km kn ko kp b">Filters</code>组件。</p><figure class="kf kg kh ki fq iv"><div class="bz el l di"><div class="la lb l"/></div></figure><p id="2e37" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这非常简单，而且可行。但是我们在<code class="eh km kn ko kp b">Filters</code>组件中有一堆函数，它们似乎都在做非常相似的事情。</p><p id="d6fc" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果我们将来添加一种新的过滤器，我们将需要在这个组件中编写另一个类似的函数。</p><h2 id="4f42" class="ku kv hu bd lc ld le lf lg lh li lj lk jr ll lm ln jv lo lp lq jz lr ls lt lu dt translated">去营救</h2><p id="2a13" class="pw-post-body-paragraph jg jh hu ji b jj lv jl jm jn lw jp jq jr lx jt ju jv ly jx jy jz lz kb kc kd hn dt translated">这就是诀窍所在，这是一个流行且听起来很有趣的功能性<a class="ae kj" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程</a>概念，叫做<strong class="ji hv"> currying。</strong></p><p id="966b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在讨论curry之前，我想向您展示它如何帮助清理我们的组件。你自己看看—</p><figure class="kf kg kh ki fq iv"><div class="bz el l di"><div class="la lb l"/></div></figure><p id="02f0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">整洁对吗？现在<code class="eh km kn ko kp b">updatedSelections</code>功能据说被<em class="kl">柯里化了。对于函数式编程爱好者来说，这是一个非常简单明了的概念。但是对于像我这样一直生活在强制性的面向对象方面的人来说，这很难理解。所以让我们打开它。</em></p><p id="a729" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">当我说<code class="eh km kn ko kp b">updatedSelections()</code>函数已经被curried时，你可能想知道这个函数的“未被curried”版本会是什么样子。这里是如何—</p><figure class="kf kg kh ki fq iv"><div class="bz el l di"><div class="la lb l"/></div></figure><p id="ba78" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果我们要使用这个而不是我们的curried版本，我们需要让每个过滤器组件子组件自己调用<code class="eh km kn ko kp b">updateSelections</code>，因此必须让它们知道它们需要更新的<code class="eh km kn ko kp b">filterSelections</code>中的属性名，这是一个太多的耦合。</p><p id="2842" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">另一种方法是为每个滤波器组件使用一个专用函数，这将导致我们已经看到的混乱局面。</p><p id="1f64" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们的解决方案是<em class="kl">库里</em>这个功能。</p><h2 id="3565" class="ku kv hu bd lc ld le lf lg lh li lj lk jr ll lm ln jv lo lp lq jz lr ls lt lu dt translated">什么是currying？</h2><p id="49d5" class="pw-post-body-paragraph jg jh hu ji b jj lv jl jm jn lw jp jq jr lx jt ju jv ly jx jy jz lz kb kc kd hn dt translated">Currying将一个函数<code class="eh km kn ko kp b">f</code>转换成一个函数<code class="eh km kn ko kp b">f'</code>，该函数接受<code class="eh km kn ko kp b">f</code>最初需要的参数的一部分，并返回另一个函数，该函数可以接受其余的参数，返回<code class="eh km kn ko kp b">f</code>的结果，或者可以自己curry。</p><p id="4487" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">具体来说，用这个简单的<code class="eh km kn ko kp b">add</code>函数，</p><pre class="kf kg kh ki fq kq kp kr ks aw kt dt"><span id="8c3e" class="ku kv hu kp b fv kw kx l ky kz">add = (x, y) =&gt; x + y;</span></pre><p id="abe6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">当咖喱出现时，它变成了—</p><pre class="kf kg kh ki fq kq kp kr ks aw kt dt"><span id="5db2" class="ku kv hu kp b fv kw kx l ky kz">curriedAdd = (x) =&gt; {<br/>  return (y) =&gt; {<br/>    return x + y;<br/>  }<br/>}</span></pre><p id="e871" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">因此，我们可以调用返回新函数的<code class="eh km kn ko kp b">curriedAdd(1)</code>，而不是调用<code class="eh km kn ko kp b">add(1, 2)</code>，我们可以随后使用<code class="eh km kn ko kp b">add</code>的另一个参数调用它，就像<code class="eh km kn ko kp b">curriedAdd(1)(2)</code>一样，并获得最终结果<code class="eh km kn ko kp b">3</code>。</p><p id="6c04" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">从技术上来说，<code class="eh km kn ko kp b">curriedAdd(x)</code>被称为“部分应用”，因为我们只应用了原始函数<code class="eh km kn ko kp b">add(X, y)</code>需要的部分参数。</p><blockquote class="ma"><p id="9873" class="mb mc hu bd md me mf mg mh mi mj kd ek translated">使用常规函数，让我们对它执行部分应用。</p></blockquote><p id="9e00" class="pw-post-body-paragraph jg jh hu ji b jj mk jl jm jn ml jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd hn dt translated">这是一个天真的玩具例子，没有太多的效用。</p><p id="000d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，如果我们回到最初的例子—</p><figure class="kf kg kh ki fq iv"><div class="bz el l di"><div class="la lb l"/></div></figure><p id="d0ae" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们可以看到<code class="eh km kn ko kp b">updateSelections</code>函数的部分应用——</p><pre class="kf kg kh ki fq kq kp kr ks aw kt dt"><span id="e85d" class="ku kv hu kp b fv kw kx l ky kz">updateSelections('ages');<br/>updateSelections('brands');<br/>updateSelections('price');</span></pre><p id="2b26" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">帮助我们清理组件并减少耦合。那是currying:)</p></div><div class="ab cl mp mq hc mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="hn ho hp hq hr"><p id="3655" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">像软件中的所有问题一样，这不是这个问题的唯一解决方案。这里有一个替代方案—</p><figure class="kf kg kh ki fq iv"><div class="bz el l di"><div class="la lb l"/></div></figure><p id="edf8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我希望您发现这种技术很有用。如果你在你的<a class="ae kj" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a> / React项目中使用了currying，请在下面的评论中分享一些片段，也欢迎你的其他评论和反馈，❤.</p></div><div class="ab cl mp mq hc mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="hn ho hp hq hr"><p id="6f1d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="kl">您是否打算雇佣JavaScript、React或Ruby开发人员来完成您的项目？访问spritle.com的</em><a class="ae kj" href="http://spritle.com" rel="noopener ugc nofollow" target="_blank"><em class="kl"/></a><em class="kl">，雇佣我们的一流团队，让您的想法变成现实。</em></p><figure class="kf kg kh ki fq iv"><div class="bz el l di"><div class="mw lb l"/></div></figure></div></div>    
</body>
</html>