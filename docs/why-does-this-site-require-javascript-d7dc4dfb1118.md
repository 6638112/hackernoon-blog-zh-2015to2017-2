# 为什么这个网站需要 JavaScript？

> 原文：<https://medium.com/hackernoon/why-does-this-site-require-javascript-d7dc4dfb1118>

这是我在黑客新闻论坛上经常看到的问题。每当有人发布一个在 React/Angular/Vue 中实现的 Show HN 站点，这个问题就会出现在评论的顶部。

所以，我想我应该坐下来反思我自己的项目——现在的和过去的——并尝试回答这个问题。

## JavaScript 正在毁灭网络

先说清楚。一般来说，我不喜欢 JS 多的网站。

举个例子，黑客新闻 UX 比红迪网 UX 好得多——尤其是在手机上。Reddit 加载时间太长。HN 几乎立即加载。在移动 Reddit 中点击一个链接或后退按钮绝对会***无所事事*** 几秒钟，这是一个常见的混乱来源。在 HN，链接和反向导航可以立即工作，因为它们是简单的超级链接。

Reddit 做了很多我根本不在乎的事情。边栏里有很多乱七八糟的东西，我从来不看也不关心。我认为它有对我的帖子或诸如此类的回复的实时通知。(根据我的经验，实时更新功能几乎不需要。)Reddit 可能是一个非常基本的分类、可搜索的论坛网站，以传统 MPA 的形式编写,(对我来说)这将是一个巨大的进步。

总的来说，我不希望你的网站“实时更新”我。我不想让 gmail 实时更新我的信息。我不想你的新闻网站实时更新我。我不想要你愚蠢的弹出窗口或滑动通知。我不想要你的动画。除了以清晰、易读、不分散注意力的格式显示的内容，我不想要任何东西。

总的来说，我更喜欢基本的 HTML 和 CSS 网站。水疗网站通常很慢，占用资源，导航中断，移动失败，很垃圾。如果你的网站仅仅是基本的 HTML + CSS，就很难产生这样的垃圾。普通的 HTML 和 CSS 是可缓存的。它的行为在其他普通的 HTML/CSS 站点中是可预测的(ish)和一致的(ish)。它在所有设备上都很快。它的行为符合预期。右键点击一个网址就可以了。

然而……

## 我的网站都是 JS 重

WTF？！你说我是个伪君子。

是啊。

这是为什么呢？

以下是我在过去几年中编写的一些程序:网络研讨会、实时聊天、实时通知、论坛、带条件实时更新区域的复杂表单、丰富的站点编辑器、大量就地修改并需要保留订单/过滤状态的列表页面、丰富的医疗调查构建器、近实时控制货运码头的事件驱动系统(摄像系统、门禁、RFID 传感器、OCR 摄像系统、数字标牌)等等…

希望你会同意这个列表中的大部分证明了使用丰富的前端框架是正确的，所以也许我可以通过？也就是说，让我们看看 JS 是如何进入一个更简单的站点的。

## JavaScript 如何潜入简单网站的悲惨故事

我的大多数应用程序开始时都相对简单。在没有任何真正的前端架构的情况下启动它们是很诱人的(我经常会屈服于这种诱惑)。但是随着时间的推移，它们的复杂性会增加。这个简单的表单现在有一个根据用户输入有条件地显示/隐藏的部分。哦，底部的价格列表应该根据他们在字段 5 中的输入实时更新，等等。每一个看似简单的屏幕都会随着时间变得复杂。随着他们的复杂性增加，我开始希望我有更好的方法来管理前端复杂性，并且我开始后悔没有从一个可靠的前端架构开始。

这里有一个真实的例子。我的一个项目有一个屏幕，主要涉及静态内容(一节课)，在底部有一个讨论线程，供学生和教师使用。

库洛。

这可以通过传统的网络方式完成，在提交评论时需要一个完整的往返行程。

但是这样你可能会失去你的滚动位置，如果屏幕上还包括一个部分填写的测验，你会在发表评论时失去你的测验状态。好的，我们可以在这里加入一点 AJAX。不需要激烈的反应或类似的事情。问题解决了。

但是，客户希望在评论部分的顶部显示评论的数量和独特讨论参与者的数量。没问题。我们可以把它放进去。只是多了几个选择器。问题解决了。

但是，客户希望讨论能够随着人们的聊天而实时更新。嗯。嗯，我们仍然可以这样做，但现在我们的前端逻辑变得混乱。它在后端通过 [Rails](https://hackernoon.com/tagged/rails) 呈现，但在前端实时更新，所以它需要获取 HTML 片段并把它们放在正确的位置……混乱随之而来。好了，让我们把底部的讨论区变成一个迷你版或者 Vue 应用程序什么的。问题解决了。

但是，客户希望讨论统计也显示在页面的顶部，在课程内容的上面。好吧，废话。这意味着更新页面中不属于 React 的部分。现在，我们是否应该将课程内容移到 React 组件中？我们应该通过 DOM 选择器来更新讨论统计数据吗？呃…对所有的事情做出反应！

## 一种统治他们的方法

用一种方法做 UI 比用多种方法要好。有些 UI 是从后端提供的，有些是在前端生成的，这很快就会变得一团糟。将所有的*UI 都放在后端会限制复杂的应用程序。将所有 UI 移到前端允许您处理任何数量的不断增长的复杂性，同时仍然有一种方法来编写 UI。*

## React 是一种优于大多数后端替代方案的开发体验

前面的原因就是为什么我认为 JS 会渗透到我参与的大多数项目中。但是在我目前的项目中，还有另一个原因。我发现 React 为构建 ui 提供了一种最令人愉快的方式。如果后端是用 Clojure 这样的函数式语言编写的，事情可能会有所不同。但我目前的项目是 Rails。

以下是我更喜欢 React 而不是 erb/Rails 的一些原因:

-函数比部分更好
-函数比块更好
-显式导入比隐式导入更好
- MVC 控制器将多个独立的动作(例如索引、显示、更新)完成到一个地方
-传统的 MVC 应用程序完成数据验证、操作和存储，并考虑到 UI 问题
-不变性很容易推理，并且不是 Ruby/Rails 真正鼓励的，但是*在很大程度上受到 React 最佳实践的鼓励*

## API 和 UI 的分离很好

我在上面暗示过这一点，但它有自己的部分。编写简单的后端 API，然后将 UI 留给(各种)前端，这样可以很好地分离关注点。它还给你一个 API，这本身就是一个好处。如果你愿意，你可以选择向外界公开这件事。可以写一个原生的手机 app。如果您的应用程序是以这种方式构建的，有很多事情会变得简单得多。

## 结论

为什么这个网站需要 [JavaScript](https://hackernoon.com/tagged/javascript) ？原因有很多。按理说，不应该。可以说，团队应该更有力地对那些不能增强 UX 的复杂特性说“不”。

但即便如此，有些应用程序还是很复杂。对于普通消费者来说，这种复杂性通常并不明显。前端框架有助于降低前端复杂性。(咄！)此外，一些后端技术很糟糕，这种糟糕可以通过将前端技术转移到不那么糟糕的技术来减轻，而不需要重写整个应用程序。

所以下次你开始批评一个需要 JavaScript 的网站时，希望你会停下来想，“你知道，这可能不像我想的那样黑白分明。”

> [黑客中午](http://bit.ly/Hackernoon)是黑客如何开始他们的下午。我们是这个家庭的一员。我们现在[接受投稿](http://bit.ly/hackernoonsubmission)并乐意[讨论广告&赞助](mailto:partners@amipublications.com)机会。
> 
> 要了解更多信息，[请阅读我们的“关于”页面](https://goo.gl/4ofytp) , [喜欢/在脸书给我们发消息](http://bit.ly/HackernoonFB)，或者简单地，[发推文/DM @HackerNoon。](https://goo.gl/k7XYbx)
> 
> 如果你喜欢这个故事，我们推荐你阅读我们的[最新科技故事](http://bit.ly/hackernoonlatestt)和[趋势科技故事](https://hackernoon.com/trending)。直到下一次，不要把世界的现实想当然！