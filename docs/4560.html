<html>
<head>
<title>Make React Fast Again [Part 1]: Performance Timeline</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">再次快速反应[第1部分]:性能时间表</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/make-react-fast-again-part-1-performance-timeline-b70176a1df5f?source=collection_archive---------17-----------------------#2017-06-07">https://medium.com/hackernoon/make-react-fast-again-part-1-performance-timeline-b70176a1df5f?source=collection_archive---------17-----------------------#2017-06-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/d034abfdeb3fceb015650a521a41c8a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mJFYp7LKVzZM3PPjFb0QXQ.png"/></div></div></figure><p id="2c53" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">React通常非常快，但是很容易犯小错误，导致性能问题。缓慢的组件安装、深度的组件树和不必要的渲染周期很快会让应用程序感觉很慢。</p><p id="f41e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">幸运的是，有很多工具可以帮助诊断性能问题，有些工具甚至是内置的。在本系列中，我们将重点介绍让React应用程序快速运行的工具和技术。每个帖子还会有一个互动的，有趣的演示！</p></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><h1 id="900c" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">绩效时间表</h1><p id="69f8" class="pw-post-body-paragraph jc jd hu je b jf lf jh ji jj lg jl jm jn lh jp jq jr li jt ju jv lj jx jy jz hn dt translated">React 15.4.0引入了一个新的性能时间线特性，可以让您准确地看到组件何时被挂载、更新和卸载。它还允许您可视化组件生命周期之间的相互关系。</p><p id="df02" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注意:</strong>目前，该功能仅在Chrome、Edge和IE中有效，因为它利用了尚未在所有浏览器中实现的用户定时API。</p><h2 id="6874" class="lk ki hu bd kj ll lm ln kn lo lp lq kr jn lr ls kv jr lt lu kz jv lv lw ld lx dt translated">它是如何工作的</h2><ol class=""><li id="328e" class="ly lz hu je b jf lf jj lg jn ma jr mb jv mc jz md me mf mg dt translated">打开您的应用程序并追加查询参数:<code class="eh mh mi mj mk b">react_perf</code>。例如，<code class="eh mh mi mj mk b"><a class="ae ml" href="http://localhost:3000?react_perf" rel="noopener ugc nofollow" target="_blank">http://localhost:3000?react_perf</a></code></li><li id="147b" class="ly lz hu je b jf mm jj mn jn mo jr mp jv mq jz md me mf mg dt translated">打开Chrome DevTools <strong class="je hv">性能</strong>选项卡，按下<strong class="je hv">记录</strong>。</li><li id="0983" class="ly lz hu je b jf mm jj mn jn mo jr mp jv mq jz md me mf mg dt translated">执行您想要分析的操作。</li><li id="754d" class="ly lz hu je b jf mm jj mn jn mo jr mp jv mq jz md me mf mg dt translated">停止记录。</li><li id="7104" class="ly lz hu je b jf mm jj mn jn mo jr mp jv mq jz md me mf mg dt translated">在<strong class="je hv">用户计时下检查可视化。</strong></li></ol><figure class="ms mt mu mv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mr"><img src="../Images/ba86d4892be1f498c489b5b074a54005.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cOO5vUnbkdDUcqMW8ebJqA.png"/></div></div></figure><h2 id="7b23" class="lk ki hu bd kj ll lm ln kn lo lp lq kr jn lr ls kv jr lt lu kz jv lv lw ld lx dt translated">了解输出</h2><p id="f9e5" class="pw-post-body-paragraph jc jd hu je b jf lf jh ji jj lg jl jm jn lh jp jq jr li jt ju jv lj jx jy jz hn dt translated">每个彩色条显示组件正在“工作”的时间。由于JavaScript是单线程的，每当组件被装载或渲染时，它就会霸占主线程并阻止其他代码运行。</p><p id="280d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">括号中的文字像<code class="eh mh mi mj mk b">[update]</code>描述了组件生命周期的哪一部分正在发生。时间线分解了每一步，所以你可以看到像<code class="eh mh mi mj mk b">[componentDidMount]</code> <code class="eh mh mi mj mk b">[componentWillReceiveProps]</code> <code class="eh mh mi mj mk b">[ctor]</code>(构造函数)和<code class="eh mh mi mj mk b">[render].</code>这样的方法的细粒度计时</p><p id="59b1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">堆叠的条形表示组件树。虽然React中通常有相当深的组件树，但如果您正在优化一个频繁挂载的组件，这有助于减少包装器组件的数量，因为每个组件都会增加少量的性能和内存损失。</p><p id="5cb6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这里需要注意的一点是，时间线中的计时数字是针对React的开发构建的，它比prod慢得多。事实上，性能时间线本身甚至会降低应用程序的速度。虽然这些数字不应被视为真实性能的代表，但不同组件之间的<em class="mw">相对</em>时序是准确的。此外，组件是否更新根本不取决于产品版本。</p><h1 id="4267" class="kh ki hu bd kj kk mx km kn ko my kq kr ks mz ku kv kw na ky kz la nb lc ld le dt translated">演示！</h1><p id="4064" class="pw-post-body-paragraph jc jd hu je b jf lf jh ji jj lg jl jm jn lh jp jq jr li jt ju jv lj jx jy jz hn dt translated">为了好玩，我修改了TodoMVC应用程序，让它出现一些<em class="mw">严重的</em>性能问题。您可以在这里尝试一下:</p><div class="nc nd fm fo ne nf"><a href="https://perf-demo.firebaseapp.com/?react_perf" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab ej"><div class="nh ab ni cl cj nj"><h2 class="bd hv fv z el nk eo ep nl er et ht dt translated">TodoMVC</h2><div class="nm l"><h3 class="bd b fv z el nk eo ep nl er et ek translated">针对极低性能进行了优化</h3></div><div class="nn l"><p class="bd b gc z el nk eo ep nl er et ek translated">perf-demo.firebaseapp.com</p></div></div></div></a></div><p id="0299" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要查看时间线，请打开Chrome dev工具，转到“性能”选项卡，然后单击录制。然后在应用程序中添加一些TODOs，停止录制，检查时间线。看看您是否能发现哪些组件导致了性能问题:)</p><h1 id="9392" class="kh ki hu bd kj kk mx km kn ko my kq kr ks mz ku kv kw na ky kz la nb lc ld le dt translated">调试生产中的性能问题</h1><p id="cf23" class="pw-post-body-paragraph jc jd hu je b jf lf jh ji jj lg jl jm jn lh jp jq jr li jt ju jv lj jx jy jz hn dt translated">React中的性能时间线特性只在本地开发中起作用，因为它是在React的生产版本之外编译的。如果你有兴趣了解你的生产应用中的性能问题，试试<a class="ae ml" href="https://logrocket.com" rel="noopener ugc nofollow" target="_blank"> LogRocket </a>。</p><figure class="ms mt mu mv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff no"><img src="../Images/b47f54e433b8f39f62f5fffc5232dd8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s_rMyo6NbrAsP-XtvBaXFg.png"/></div></div></figure><p id="adbd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">LogRocket 就像是网络应用程序的DVR，记录你网站上发生的一切。您可以重放有错误或性能问题的会话，以快速了解根本原因，而不是猜测问题发生的原因。</p><p id="00f2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">LogRocket让你的应用程序记录性能计时、Redux动作/状态、日志、错误、带有头+主体的网络请求/响应以及浏览器元数据。它还记录页面上的HTML和CSS，甚至可以重建最复杂的单页面应用程序的像素级完美视频。</p><div class="nc nd fm fo ne nf"><a href="https://logrocket.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab ej"><div class="nh ab ni cl cj nj"><h2 class="bd hv fv z el nk eo ep nl er et ht dt translated">JavaScript应用程序的日志记录和会话重放</h2><div class="nm l"><h3 class="bd b fv z el nk eo ep nl er et ek translated">LogRocket帮助您了解影响用户的问题，以便您可以重新开始构建优秀的软件。</h3></div><div class="nn l"><p class="bd b gc z el nk eo ep nl er et ek translated">logrocket.com</p></div></div><div class="np l"><div class="nq l nr ns nt np nu ja nf"/></div></div></a></div><h1 id="c2cd" class="kh ki hu bd kj kk mx km kn ko my kq kr ks mz ku kv kw na ky kz la nb lc ld le dt translated">结论</h1><p id="cfb5" class="pw-post-body-paragraph jc jd hu je b jf lf jh ji jj lg jl jm jn lh jp jq jr li jt ju jv lj jx jy jz hn dt translated"><code class="eh mh mi mj mk b">react_perf</code>是可视化React组件生命周期的极好工具。它可以让你快速看到哪些组件正在更新，哪些可能会降低你的应用程序的速度。</p><p id="73e7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">因为<code class="eh mh mi mj mk b">react_perf</code>只在开发中工作，所以请查看<a class="ae ml" href="https://logrocket.com" rel="noopener ugc nofollow" target="_blank"> LogRocket </a>，以诊断生产中的错误和性能问题。</p></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><p id="c5b4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="mw">很难保持前端开发的最新状态。加入我们的每周邮件列表，了解新工具、库和最佳实践，帮助您构建更好的应用:</em></p><figure class="ms mt mu mv fq iv"><div class="bz el l di"><div class="nv nw l"/></div></figure><div class="ms mt mu mv fq ab cb"><figure class="nx iv ny nz oa ob oc paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="nx iv ny nz oa ob oc paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="nx iv ny nz oa ob oc paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="od oe of"><p id="f922" class="jc jd mw je b jf jg jh ji jj jk jl jm og jo jp jq oh js jt ju oi jw jx jy jz hn dt translated"><a class="ae ml" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是AMI家庭的一员。我们现在<a class="ae ml" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ml" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jc jd mw je b jf jg jh ji jj jk jl jm og jo jp jq oh js jt ju oi jw jx jy jz hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ml" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ml" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ms mt mu mv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff oj"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>