# Swift 中的简单样式表

> 原文：<https://medium.com/hackernoon/simple-stylesheets-in-swift-6dda57b5b00d>

您的视图代码看起来像这样吗？

如果答案是肯定的，那么你就像我一样，直到最近，当一个想法闪过我的脑海。我觉得这个想法很美，所以我想和大家分享一下。

闭包中的代码代表了各自子视图的风格。仅此而已，但是它混淆了视图类的接口和实现。此外，相同或相似的代码经常在整个 app [代码库](https://hackernoon.com/tagged/codebase)中重复。我们如何让它变得更好？通过做唯一合乎逻辑的事情——将这样的代码移出视图类。

做这件事的方法很简单。我们将坚持使用上面代码片段中的闭包，但是有一个小的变化——我们不会在闭包中实例化视图，而是给闭包一个视图实例来样式化。我们还将把闭包封装在一个结构中，这样我们可以更容易地使用它。该结构应被称为`Style<View>`。

它只是一个包装单参数闭包的结构。有一个限制，参数类型必须是`UIView`或它的子类。

我们现在可以通过将视图传递给 apply 方法来设置视图的样式。然而，让我们通过定义几个扩展来使它变得更简单。

现在我们可以反过来做，也是使用方便的初始化器。不幸的是， [Swift](https://hackernoon.com/tagged/swift) 泛型有一些限制，因为协方差通常不被支持，我们希望能够用`Style<UIView>`的实例来设计`UILabel`的实例。出于这个原因，我们必须投。小小的代价。

我们现在拥有了改进视图类所需的一切——将表示样式的代码移入样式表类型。它只是一个为我们提供名称空间的枚举。我们可以将相关的样式分组到另一个嵌套的枚举中。它可能是这样的:

如何定义样式表完全取决于你自己。它可以是整个应用程序的一个样式表，也可以是每个模块的单独样式表。您可以使用扩展添加样式或样式组，并且可以定义可重用或私有的样式。这是一种非常灵活、简单的方法，最重要的是，它使视图类变得非常干净:

提出的解决方案非常类似于 web 上的样式设计——一种经受住了时间考验的方法。通过在`Style`类型上定义一些扩展，你可以很容易地将所有这些带到下一个层次，这些扩展提供了继承和其他组合方式，这将使你能够很容易地定义全局或共享样式。

我很想听到你的反馈，所以如果你喜欢或者有任何疑问，请随时留下你的评论。

本解决方案是[无布局](https://github.com/AbsurdAbstractions/Layoutless)库的一部分。除了声明式样式，它还提供了一种简单的声明式布局。