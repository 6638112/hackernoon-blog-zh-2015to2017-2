<html>
<head>
<title>How a startup pivot led to users data leak vulnerability</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创业支点如何导致用户数据泄露漏洞</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-pivoting-a-startup-led-to-users-data-leak-vulnerability-8c27c7ca9143?source=collection_archive---------7-----------------------#2017-02-24">https://medium.com/hackernoon/how-pivoting-a-startup-led-to-users-data-leak-vulnerability-8c27c7ca9143?source=collection_archive---------7-----------------------#2017-02-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="cfab" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们有一个相当有趣的数据泄露故事要分享。存在漏洞的公司拥有超过500万用户。API端点之一可用于迭代所有用户数据，包括姓名、电话号码、电子邮件地址、个人资料图片、用户元数据和保存的物理地址。数据泄漏现在看起来已经修复了，但是我们还没有收到他们的回复或确认，所以我们可以在发布前按照他们的要求分享这篇文章。</p><p id="6970" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">消费科技公司的数据泄露实际上使其用户面临各种问题，包括身份盗窃、物理诈骗、垃圾邮件甚至威胁。最近在印度发生了一起预付费手机充值商店出售随机女性电话号码赚钱的事件。电话号码也可以在脸书上搜索。</p><p id="0c6f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是我们发送的披露漏洞的完整电子邮件以及技术细节。(curl请求中用于第三方服务的额外HTTP头已被移除，并且auth令牌已被更改。我们还删除了带有用户个人数据的curl响应。)API使用一个<a class="ae jp" href="https://jwt.io/" rel="noopener ugc nofollow" target="_blank"> JSON Web令牌(JWT)进行身份验证</a>，这可能会在pivot之前的应用程序中使用。在pivot之后，该公司为较新的应用程序添加了另一个JWT，但继续使用早期的代码从旧令牌中获取经过认证的用户id，从而开放对所有用户数据的访问。解码后的JWT包含以下数据，id是一个小整数，可以迭代并创建新的令牌来获取相应的用户数据。</p><p id="ffc0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jq"> {“用户名”:空，“身份证”:XXXX，“手机”:“YYYYYYYYYY”，“过期”:180558878080} </em></p><blockquote class="jr js jt"><p id="4537" class="ir is jq it b iu iv iw ix iy iz ja jb ju jd je jf jv jh ji jj jw jl jm jn jo hn dt translated">嗨，创始人，</p><p id="52b7" class="ir is jq it b iu iv iw ix iy iz ja jb ju jd je jf jv jh ji jj jw jl jm jn jo hn dt translated">我们研究了移动应用程序使用的API中的一个安全漏洞，该漏洞会暴露用户的个人数据，可能包括电子邮件、电话号码、姓名和地址。以下是重现该问题的技术细节。我们假设通过同一个API同时支持Akosha和Helpchat客户端，使用了两个JWT身份验证令牌，只有Akosha令牌得到验证，但是这个端点的已验证用户id是从Helpchat令牌中提取的。可以更改Helpchat令牌中的userid，并且可以使用枚举所有用户id的脚本来获取所有用户数据。提取的样本数据显示在curl请求的下方。</p><p id="076e" class="ir is jq it b iu iv iw ix iy iz ja jb ju jd je jf jv jh ji jj jw jl jm jn jo hn dt translated">请让我们知道你什么时候修理这个。</p><p id="e88f" class="ir is jq it b iu iv iw ix iy iz ja jb ju jd je jf jv jh ji jj jw jl jm jn jo hn dt translated">问候，</p><p id="38cf" class="ir is jq it b iu iv iw ix iy iz ja jb ju jd je jf jv jh ji jj jw jl jm jn jo hn dt translated">XXXXXX</p><p id="ea31" class="ir is jq it b iu iv iw ix iy iz ja jb ju jd je jf jv jh ji jj jw jl jm jn jo hn dt translated"><a class="ae jp" href="https://fallible.co/" rel="noopener ugc nofollow" target="_blank">https://fallible.co</a></p><p id="323f" class="ir is jq it b iu iv iw ix iy iz ja jb ju jd je jf jv jh ji jj jw jl jm jn jo hn dt translated">curl-H ' Host:<a class="ae jp" href="http://api.helpchat.in/" rel="noopener ugc nofollow" target="_blank">API . HELPCHAT . in</a>'-H ' User-Agent:HELPCHAT/3 . 2 . 1 . 1 cf network/808 . 0 . 2 Darwin/16 . 0 . 0 '-H<strong class="it hv">' X-HELPCHAT-AUTH:eyj 1c 2 vyx 25 hbwuiom 51 bgwsimlkijpwfhywfhywfgsim 1 vymlszsi 6 ilhywfhywfhywfhywfghigilcjlehbpcmvzijoxodawnrc 4 = . ODC 4 mdgwfquza</strong></p></blockquote></div><div class="ab cl jx jy hc jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="hn ho hp hq hr"><h1 id="11fc" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">邮件回复:</h1><p id="92cb" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated"><strong class="it hv"> #1 </strong></p><figure class="li lj lk ll fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lh"><img src="../Images/600eb8c87b109a08536b742424387e54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vd09ltbaF8KP1wAB06jsAw.png"/></div></div><figcaption class="lt lu fg fe ff lv lw bd b be z ek">Interestingly, there was no hall of fame page for the concerned company. It was an improvisation.</figcaption></figure></div><div class="ab cl jx jy hc jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="hn ho hp hq hr"><p id="3fb4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> #2 </strong></p><figure class="li lj lk ll fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lx"><img src="../Images/a6c3605cfc78a961af68c5cc58c3657d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4kroFRZTN46_l4HoaBfmyw.png"/></div></div></figure></div><div class="ab cl jx jy hc jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="hn ho hp hq hr"><p id="d52f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> #3 </strong></p><figure class="li lj lk ll fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff ly"><img src="../Images/6124ded58df42e827d5e50aa8bc37d23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1yPPGV4HvfoHqzZeFufnfA.png"/></div></div></figure></div><div class="ab cl jx jy hc jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="hn ho hp hq hr"><p id="5dea" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> #4 </strong></p><figure class="li lj lk ll fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lz"><img src="../Images/e6441ff797e440ac3938bbf8d1689a8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZFwl9Psc9PGORvIKK8hKwA.png"/></div></div></figure></div><div class="ab cl jx jy hc jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="hn ho hp hq hr"><p id="390b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是我们在2017年2月10日发送的最后一封电子邮件，询问是否应用了修复程序。我们还没有收到回复，但是已经确认错误已经被修复。可悲的是，这种根本不与安全研究人员沟通或在修复后不允许公开披露的做法在南亚比其他成熟市场更为普遍。我们真诚地希望这些公司能够意识到这些安全问题，至少告知他们的用户。</p><div class="li lj lk ll fq ab cb"><figure class="ma lm mb mc md me mf paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="ma lm mb mc md me mf paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="ma lm mb mc md me mf paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="jr js jt"><p id="f922" class="ir is jq it b iu iv iw ix iy iz ja jb ju jd je jf jv jh ji jj jw jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是T21家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is jq it b iu iv iw ix iy iz ja jb ju jd je jf jv jh ji jj jw jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="li lj lk ll fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff mg"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>