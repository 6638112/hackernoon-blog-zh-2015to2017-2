<html>
<head>
<title>A Guide to SpriteKit Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">精灵行动指南</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-guide-to-spritekit-actions-c20b079f5398?source=collection_archive---------4-----------------------#2017-03-21">https://medium.com/hackernoon/a-guide-to-spritekit-actions-c20b079f5398?source=collection_archive---------4-----------------------#2017-03-21</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div class="fe ff hs"><img src="../Images/5701e7710f1ee017158c79334ee676be.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*s2f6Vj9hmiP7d_3pomBFmA@2x.png"/></div></figure><div class=""/><p id="4355" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">继续我最近关于<a class="ae jw" href="https://hackernoon.com/tagged/spritekit" rel="noopener ugc nofollow" target="_blank"> SpriteKit </a>的帖子，我想我会经历<a class="ae jw" href="https://hackernoon.com/tagged/framework" rel="noopener ugc nofollow" target="_blank">框架</a>的另一个有用的方面:SpriteKit动作。由<code class="eh jx jy jz ka b">SKAction</code>类表示的SpriteKit动作允许你在一个<code class="eh jx jy jz ka b">SKNode</code>对象上制作某些属性的动画，比如位置和速度。</p><p id="0125" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">既然有许多类型的SpriteKit动作(<a class="ae jw" href="https://developer.apple.com/reference/spritekit/skaction" rel="noopener ugc nofollow" target="_blank">参见</a> <code class="eh jx jy jz ka b"><a class="ae jw" href="https://developer.apple.com/reference/spritekit/skaction" rel="noopener ugc nofollow" target="_blank">SKAction</a></code> <a class="ae jw" href="https://developer.apple.com/reference/spritekit/skaction" rel="noopener ugc nofollow" target="_blank">参考</a>)，让我们采取一个更实际的路线来使用节点上的动作，而不是经历不同类型的动作。</p><h2 id="4636" class="kb kc ib bd kd ke kf kg kh ki kj kk kl jj km kn ko jn kp kq kr jr ks kt ku kv dt translated">创建操作</h2><p id="6230" class="pw-post-body-paragraph iy iz ib ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hn dt translated">与许多不同的SpriteKit对象不同，你不用初始化器来创建一个<code class="eh jx jy jz ka b">SKAction</code>。相反，您可以调用与您想要执行的操作相对应的类方法之一。</p><figure class="lb lc ld le fq hw"><div class="bz el l di"><div class="lf lg l"/></div></figure><p id="b610" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在这个例子中，<code class="eh jx jy jz ka b">moveBy</code>方法创建了一个动作，在800毫秒的时间内将一个节点向右移动10个像素，向下移动15个像素。其他动作方式有<code class="eh jx jy jz ka b">rotate</code>、<code class="eh jx jy jz ka b">scale</code>、<code class="eh jx jy jz ka b">fadeOut</code>、<code class="eh jx jy jz ka b">applyForce</code>。</p><h2 id="7af7" class="kb kc ib bd kd ke kf kg kh ki kj kk kl jj km kn ko jn kp kq kr jr ks kt ku kv dt translated">运行操作</h2><p id="aedd" class="pw-post-body-paragraph iy iz ib ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hn dt translated">要在一个节点上运行这个操作，在您想要应用操作的节点上调用<code class="eh jx jy jz ka b">run(SKAction)</code>方法。</p><figure class="lb lc ld le fq hw"><div class="bz el l di"><div class="lf lg l"/></div></figure><p id="b25e" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">基于前面的例子，这将通过添加传递给<code class="eh jx jy jz ka b">moveBy</code>调用的值在800毫秒内更新玩家的位置。<code class="eh jx jy jz ka b">run</code>方法的一个变体接受在动作完成后调用的完成回调。</p><p id="b369" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">关于<code class="eh jx jy jz ka b">SKActions</code>的一个有用之处是它们是“写时复制”，这意味着无论何时动作被改变，值都被复制，因此同一个<code class="eh jx jy jz ka b">SKAction</code>可以在多个节点上使用。</p><h2 id="d287" class="kb kc ib bd kd ke kf kg kh ki kj kk kl jj km kn ko jn kp kq kr jr ks kt ku kv dt translated">组和序列</h2><p id="28ed" class="pw-post-body-paragraph iy iz ib ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hn dt translated">有时，需要同时或按顺序运行多个操作。为了实现这一点，方法<code class="eh jx jy jz ka b">SKAction.group([SKAction])</code>和<code class="eh jx jy jz ka b">SKAction.sequence([SKAction])</code>分别创建动作的组和序列。例如，我们需要同时移动和旋转我们的玩家节点。</p><figure class="lb lc ld le fq hw"><div class="bz el l di"><div class="lf lg l"/></div></figure><p id="1487" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在上面的例子中，我们可以将<code class="eh jx jy jz ka b">group</code>调用改为<code class="eh jx jy jz ka b">sequence</code>，这将首先运行<code class="eh jx jy jz ka b">moveAction</code>，等到它完成，然后运行<code class="eh jx jy jz ka b">rotateAction</code>。</p><h2 id="eddb" class="kb kc ib bd kd ke kf kg kh ki kj kk kl jj km kn ko jn kp kq kr jr ks kt ku kv dt translated">重复</h2><p id="58df" class="pw-post-body-paragraph iy iz ib ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hn dt translated">多次运行一个动作同样简单:调用<code class="eh jx jy jz ka b">SKAction.repeat(SKAction, count: Int)</code>传递要重复的动作和应该运行的次数。这与任何其他操作一样使用。</p><figure class="lb lc ld le fq hw"><div class="bz el l di"><div class="lf lg l"/></div></figure><p id="4010" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在我们的玩家节点上下移动五次。要永远重复一个动作，可以用要无限重复的动作调用<code class="eh jx jy jz ka b">SKAction.repeatForever(SKAction)</code>。</p><h2 id="9588" class="kb kc ib bd kd ke kf kg kh ki kj kk kl jj km kn ko jn kp kq kr jr ks kt ku kv dt translated">时机</h2><p id="66ce" class="pw-post-body-paragraph iy iz ib ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hn dt translated">几乎每种类型的动作都有一个持续时间参数，它是一个以秒为单位的<code class="eh jx jy jz ka b">TimeInterval</code>(一个<code class="eh jx jy jz ka b">Double</code>的类型别名)。这告诉引擎运行该操作一定的秒数(或几分之一秒)。还有另一种类型的动作，<code class="eh jx jy jz ka b">wait(forDuration: TimeInterval)</code>，它会等待动作的持续时间。这在动作序列中很有用，可以在动作之间留出时间。</p><h2 id="3fbf" class="kb kc ib bd kd ke kf kg kh ki kj kk kl jj km kn ko jn kp kq kr jr ks kt ku kv dt translated">块和自定义操作</h2><p id="9026" class="pw-post-body-paragraph iy iz ib ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hn dt translated">还有另一个执行代码块的类方法<code class="eh jx jy jz ka b">run(_: () -&gt; Void)</code>。<code class="eh jx jy jz ka b">run</code>的参数是一个不带任何参数并返回<code class="eh jx jy jz ka b">Void</code>的函数。这允许你做常规<code class="eh jx jy jz ka b">SKAction</code>范围之外的事情，比如更新UI或者改变分数。</p><figure class="lb lc ld le fq hw"><div class="bz el l di"><div class="lf lg l"/></div></figure><p id="4b71" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">自定义操作稍微有点复杂。方法<code class="eh jx jy jz ka b">customAction(withDuration: TimeInterval, actionBlock: @escaping (SKNode, CGFloat) -&gt; Void)</code>创建一个在指定持续时间内运行的动作，同时不断调用<code class="eh jx jy jz ka b">actionBlock</code>的节点(<code class="eh jx jy jz ka b">SKNode</code>)和运行时间(<code class="eh jx jy jz ka b">CGFloat</code>)直到持续时间。</p><figure class="lb lc ld le fq hw"><div class="bz el l di"><div class="lf lg l"/></div></figure><p id="316c" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这段代码片段创建了一个动作，将标签节点的文本从<code class="eh jx jy jz ka b">0s</code>向上计数到<code class="eh jx jy jz ka b">5s</code>。</p><h2 id="0a76" class="kb kc ib bd kd ke kf kg kh ki kj kk kl jj km kn ko jn kp kq kr jr ks kt ku kv dt translated">停止操作</h2><p id="d775" class="pw-post-body-paragraph iy iz ib ja b jb kw jd je jf kx jh ji jj ky jl jm jn kz jp jq jr la jt ju jv hn dt translated">有两种基本方法可以在动作运行时停止它们:在节点上调用<code class="eh jx jy jz ka b">removeAllActions()</code>或<code class="eh jx jy jz ka b">removeAction(forKey: String)</code>。前者将停止当前在节点上运行的所有动作，而后者将在调用<code class="eh jx jy jz ka b">run(SKAction, withKey: String)</code>时，根据赋予动作的唯一键删除动作。</p></div><div class="ab cl lh li hc lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="hn ho hp hq hr"><p id="4bb1" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在我最近的SpriteKit游戏<a class="ae jw" href="https://itunes.apple.com/us/app/blueshift-tiles/id1205081032?mt=8" rel="noopener ugc nofollow" target="_blank">蓝移</a>中，我大量使用了<code class="eh jx jy jz ka b">SKActions</code>来移动瓷砖。去App Store看看吧！此外，看看我的其他SpriteKit帖子，<a class="ae jw" href="https://hackernoon.com/swift-spritekit-basics-94b1798ab639#.l6s6k2pha" rel="noopener ugc nofollow" target="_blank">基础</a>和<a class="ae jw" rel="noopener" href="/@jjacobson/spritekit-physics-14331398b308#.ut1673lie">物理</a>。如果您有任何问题，请在此评论或在Twitter上发推文或PM我。快乐的精灵！</p><div class="ht hu fm fo hv lo"><a href="https://itunes.apple.com/us/app/blueshift-tiles/id1205081032?mt=8" rel="noopener  ugc nofollow" target="_blank"><div class="lp ab ej"><div class="lq ab lr cl cj ls"><h2 class="bd ic fv z el lt eo ep lu er et ia dt translated">App Store上的蓝移磁贴</h2><div class="lv l"><h3 class="bd b fv z el lt eo ep lu er et ek translated">阅读评论，比较客户评级，查看截图，并了解更多关于Blueshift瓷砖。下载蓝移磁贴…</h3></div><div class="lw l"><p class="bd b gc z el lt eo ep lu er et ek translated">itunes.apple.com</p></div></div><div class="lx l"><div class="ly l lz ma mb lx mc hx lo"/></div></div></a></div><div class="lb lc ld le fq ab cb"><figure class="md hw me mf mg mh mi paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="md hw me mf mg mh mi paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="md hw me mf mg mh mi paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mj mk ml"><p id="f922" class="iy iz mm ja b jb jc jd je jf jg jh ji mn jk jl jm mo jo jp jq mp js jt ju jv hn dt translated"><a class="ae jw" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是阿妹家庭的一员。我们现在<a class="ae jw" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jw" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="iy iz mm ja b jb jc jd je jf jg jh ji mn jk jl jm mo jo jp jq mp js jt ju jv hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jw" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jw" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="lb lc ld le fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="fe ff mq"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="lb lc ld le fq hw"><div class="bz el l di"><div class="mv lg l"/></div></figure></div></div>    
</body>
</html>