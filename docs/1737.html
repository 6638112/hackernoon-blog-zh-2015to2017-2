<html>
<head>
<title>Slack hack: local mail delivery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Slack:本地邮件递送</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/slack-hack-1-botify-servers-4783cf527981?source=collection_archive---------6-----------------------#2016-12-03">https://medium.com/hackernoon/slack-hack-1-botify-servers-4783cf527981?source=collection_archive---------6-----------------------#2016-12-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/ee82f4bf5f8e56d03d94b38639b592b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_vPQt03EBTpK7CS12yNTTQ.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Then one / Wired</figcaption></figure><p id="a890" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Slack对团队沟通很有帮助，这已经不是什么秘密了。但让它大放异彩的是将任何东西连接到你的团队渠道的能力。</p><h1 id="b5fe" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">“虚拟化”服务器</h1><p id="1003" class="pw-post-body-paragraph jg jh hu ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hn dt translated">如果你运行任何服务器，它们偶尔会给你发送系统通知。因为这些邮件是通过本地邮件发送系统发送的，很可能你永远也不会读到它们，或者等到太迟的时候；默认情况下，所有本地邮件都以<code class="eh lh li lj lk b">/var/spool/mail/root.</code>结束。你需要通过SSH连接到服务器，从终端的一个可爱的<em class="ll">通知中了解它们。</em></p><p id="8f6d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">常见的解决方案是启用转发到外部电子邮件地址。然而，这种解决方案是不可靠的，因为消息经常被标记为垃圾邮件或被接收服务器拒绝——除非您特别小心地使您的主机在外界看来像一个合法的邮件服务器。</p><p id="9476" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">另一个问题是，由于某种原因，Unix服务器在Slack 特性中没有提供<em class="ll">共享。</em></p><p id="8848" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们快速解决这两个问题:</p><ol class=""><li id="38e3" class="lm ln hu ji b jj jk jn jo jr lo jv lp jz lq kd lr ls lt lu dt translated">向您的空闲团队添加新的电子邮件集成，并复制电子邮件地址:</li></ol><figure class="lw lx ly lz fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lv"><img src="../Images/d316c97c3f5a5c6067bbbed57cc6f37c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rWCjkGkcQ1jLu2qzgq15wg.png"/></div></div></figure><p id="f9dd" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">2.在服务器上安装邮件传输代理，例如:</p><pre class="lw lx ly lz fq ma lk mb mc aw md dt"><span id="2c5a" class="me kf hu lk b fv mf mg l mh mi">$ yum -y install mailx postfix &amp;&amp; systemctl enable postfix &amp;&amp; systemctl start postfix</span></pre><p id="c2cf" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">3.启用将所有<code class="eh lh li lj lk b">root</code>邮件转发到备用:</p><pre class="lw lx ly lz fq ma lk mb mc aw md dt"><span id="1c72" class="me kf hu lk b fv mf mg l mh mi">$ echo your-token@your-team.slack.com &gt; /root/.forward</span></pre><p id="9d49" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">搞定了。</p><p id="96e5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您刚刚建立了一条从您的服务器到Slack的直接电子邮件线路。让我们来测试一下:</p><pre class="lw lx ly lz fq ma lk mb mc aw md dt"><span id="779f" class="me kf hu lk b fv mf mg l mh mi">$ echo 'Hello, Slack!' | mail -s 'Check 123' root</span></pre><figure class="lw lx ly lz fq iv fe ff paragraph-image"><div class="fe ff mj"><img src="../Images/6a1a7eaec1ab28beddfcbd4fb5d3af8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*QU17H_TgEJacUzrUGKNPqg.png"/></div></figure><p id="5866" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">或者更有用的东西:</p><pre class="lw lx ly lz fq ma lk mb mc aw md dt"><span id="32b5" class="me kf hu lk b fv mf mg l mh mi">$ pg_dump | mail -s 'DB backup' root</span></pre><p id="bfff" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">…开个玩笑，别这样。但是你明白了。</p><p id="a8e6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如你所见，你现在可以简单地通过邮件发送到<code class="eh lh li lj lk b">root</code>从你的服务器发送消息到Slack。</p><p id="b9f0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">顺便说一下，这就是系统服务——比如<code class="eh lh li lj lk b">cron</code>、<code class="eh lh li lj lk b">logwatch</code>和其他服务——已经用来通知重要的事件和问题。因此，您也会自动将它们松弛下来:</p><figure class="lw lx ly lz fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mk"><img src="../Images/875d2746a658bfc6db854712bb96de2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cE3WSXuNsYkMDUODZnZ3fQ.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Mail from logwatch delivered to Slack</figcaption></figure></div></div>    
</body>
</html>