<html>
<head>
<title>Pitfalls of Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node.js的陷阱</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/pitfalls-of-node-js-c4055dfecd8e?source=collection_archive---------0-----------------------#2016-08-19">https://medium.com/hackernoon/pitfalls-of-node-js-c4055dfecd8e?source=collection_archive---------0-----------------------#2016-08-19</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="c03d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最近，我写了很多Python和围棋，但如果你了解我，你会知道<a class="ae jp" href="http://tejas.io/" rel="noopener ugc nofollow" target="_blank">我</a> <a class="ae jp" href="http://www.meetup.com/nashjs/events/224842082/" rel="noopener ugc nofollow" target="_blank">曾</a> <a class="ae jp" rel="noopener" href="/@tejasmanohar/i-m-on-the-koa-js-team-14a72717504d#.k4vvn14ni">曾</a> <a class="ae jp" rel="noopener" href="/@tejasmanohar/babel-6-and-mocha-657923628b9c?source=user_profile---------4-">一个</a> <a class="ae jp" rel="noopener" href="/@tejasmanohar/understanding-es6-const-ab448906c4e1?source=user_profile---------10-">少校</a> <a class="ae jp" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a> <a class="ae jp" href="https://github.com/tejasmanohar/npm-algos" rel="noopener ugc nofollow" target="_blank">主将</a>。最近，当我不得不伸出手指写一个快速的“生活帮”或数字处理脚本来加快我的一天时，我没有想到JS，所以我肯定不能再把它称为我的首选语言。也就是说，既然我曾经做过，我相信我有权利批评它…所以，让我们开始吧。</p><h2 id="a30e" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">标准程序库</h2><p id="a6ce" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">Node的标准库尽可能的小。尽管这是鼓励社区建立库的好方法，但它也使得标准化和进一步构建任何东西变得更加困难。</p><p id="3647" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是，不要误解我——在使用过<a class="ae jp" href="https://hackernoon.com/tagged/ruby" rel="noopener ugc nofollow" target="_blank"> Ruby </a>和<a class="ae jp" href="https://hackernoon.com/tagged/python" rel="noopener ugc nofollow" target="_blank"> Python </a>之后，我强烈反对庞大、深度的标准库。相反，我更喜欢像Go和Java那样庞大而肤浅的标准库。不同之处在于，这些标准库提供了解决最常见情况所需的所有工具和扩展所需的绑定，而Node的标准库只提供了构建工具以解决最常见情况所需的所有(主要是本机)绑定。代替<a class="ae jp" href="https://github.com/visionmedia/superagent" rel="noopener ugc nofollow" target="_blank"/><a class="ae jp" href="https://github.com/github/fetch" rel="noopener ugc nofollow" target="_blank">另一个</a> <a class="ae jp" href="https://github.com/request/request" rel="noopener ugc nofollow" target="_blank"> HTTP </a> <a class="ae jp" href="https://github.com/mzabriskie/axios" rel="noopener ugc nofollow" target="_blank">客户端</a>，我们开发了<a class="ae jp" href="https://github.com/f2prateek/train" rel="noopener ugc nofollow" target="_blank">种方式</a> <a class="ae jp" href="https://github.com/tylerb/graceful" rel="noopener ugc nofollow" target="_blank">到</a> <a class="ae jp" href="https://github.com/gorilla/mux" rel="noopener ugc nofollow" target="_blank">增强</a>标准实现，这种方式几乎在任何地方都可以重用。</p><h2 id="3404" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">错误处理</h2><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff kq"><img src="../Images/edfb425f719aeb9ba9a85ad6aaff1b07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CaGveP81Tf1Olkb0Sa3A7w.png"/></div></div><figcaption class="lc ld fg fe ff le lf bd b be z ek">Joyent <a class="ae jp" href="https://www.joyent.com/node-js/production/design/errors" rel="noopener ugc nofollow" target="_blank">post</a> on “Error Handling in Node.js”</figcaption></figure><p id="e724" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果上面的片段还不够，看看下面的:</p><pre class="kr ks kt ku fq lg lh li lj aw lk dt"><span id="ca5f" class="jq jr hu lh b fv ll lm l ln lo">function onError(err) {<br/>    log.fatal({<br/>        code: 1,<br/>        err<br/>    }, 'process exit');<br/>    process.exit(1);<br/>}</span><span id="b400" class="jq jr hu lh b fv lp lm l ln lo">process.on('unhandledException', onError);<br/>process.on('unhandledRejection', (p, err) =&gt; onError(err));</span></pre><p id="69dc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">异常冒泡让应该在调用点处理的错误无休止地传播，而无所不包的处理程序只是糟糕的语言结构的一种变通方法。当一个关键函数的第<em class="lq"> n </em>级调用点的控制流可以在没有注意到的情况下影响整个错误处理场景时，要意识到您的更改的影响要困难得多。更重要的是，可子类化的<em class="lq">错误</em> s促进<a class="ae jp" href="http://dave.cheney.net/2014/12/24/inspecting-errors" rel="noopener ugc nofollow" target="_blank">断言类型错误，而不是行为错误</a>。</p><h2 id="5ed3" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">同步码</h2><p id="9cfa" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">尽管异步I/O很重要，但它不是一切。如果有的话，我会说忘记这是Node迄今为止最大的缺点。Node迫使您处处考虑并发性，而Go、Lua、Python(尽管还有其他问题)和其他语言允许您根据需要将它合并进来，而无需切换范例。</p><p id="1d59" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">澄清一下，你可以——我也愿意相信我已经——在Node中用更新的构造实现了这一点，比如基于<a class="ae jp" href="http://tobyho.com/2015/12/27/promise-based-coroutines-nodejs/" rel="noopener ugc nofollow" target="_blank">生成器的协程</a>和<a class="ae jp" href="https://zeit.co/blog/async-and-await" rel="noopener ugc nofollow" target="_blank">异步/等待</a>,但是它们从来都不是一流的，它们需要大量的部落知识以便有效地利用<a class="ae jp" href="https://www.promisejs.org/" rel="noopener ugc nofollow" target="_blank">所有</a><a class="ae jp" href="http://callbackhell.com/" rel="noopener ugc nofollow" target="_blank"/><a class="ae jp" href="https://bjouhier.wordpress.com/2012/03/11/fibers-and-threads-in-node-js-what-for/" rel="noopener ugc nofollow" target="_blank">其他</a> <a class="ae jp" href="http://blog.yld.io/2015/12/15/using-an-event-emitter/" rel="noopener ugc nofollow" target="_blank">范例</a><a class="ae jp" href="https://github.com/substack/stream-handbook" rel="noopener ugc nofollow" target="_blank"/><a class="ae jp" href="http://zef.me/blog/6096/callback-free-harmonious-node-js" rel="noopener ugc nofollow" target="_blank">社区</a> <a class="ae jp" href="https://howtonode.org/step-of-conductor" rel="noopener ugc nofollow" target="_blank">跟随</a>。如果你不相信我，试着从头开始教这些。</p><h1 id="92a1" class="lr jr hu bd js ls lt lu jw lv lw lx ka ly lz ma kd mb mc md kg me mf mg kj mh dt translated">以及超越！</h1><p id="20f2" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">现在，我不是说Node.js是一个糟糕的平台；我只是说给其他平台一个机会，看看情况如何比较！当我被困在Node land时，我经常通过盯着例子笑着来评估其他平台，我见过很多(但不是全部！)JavaScript开发人员也是这样做的，但是，通过走出我的舒适区，我明白了如果不与它建立牢固的关系，就不可能有效地批评它，对于语言来说，这包括调试、解决异常情况以及学习细节。</p><p id="7861" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我在这里真正想指出的是Node.js带来的一些权衡，以及我很高兴看到更多内置的东西，此外，<strong class="it hv">在</strong>(特别是在工具方面)其他平台之上。</p><blockquote class="mi mj mk"><p id="2396" class="ir is lq it b iu iv iw ix iy iz ja jb ml jd je jf mm jh ji jj mn jl jm jn jo hn dt translated">黑客中午是黑客如何开始他们的下午。我们是这个家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is lq it b iu iv iw ix iy iz ja jb ml jd je jf mm jh ji jj mn jl jm jn jo hn dt translated">要了解更多信息，<a class="ae jp" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">请阅读我们的“关于”页面</a> , <a class="ae jp" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">喜欢/在脸书给我们发消息</a>，或者简单地，<a class="ae jp" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank">发推文/DM @HackerNoon。</a></p><p id="708a" class="ir is lq it b iu iv iw ix iy iz ja jb ml jd je jf mm jh ji jj mn jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kr ks kt ku fq kv"><div class="bz el l di"><div class="mo mp l"/></div></figure></div></div>    
</body>
</html>