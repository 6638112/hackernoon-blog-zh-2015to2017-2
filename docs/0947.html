<html>
<head>
<title>Creating USSD Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建USSD应用程序</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/creating-ussd-applications-69e7d6911158?source=collection_archive---------0-----------------------#2016-07-20">https://medium.com/hackernoon/creating-ussd-applications-69e7d6911158?source=collection_archive---------0-----------------------#2016-07-20</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="9b16" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有时或可能所有的时间都很难用外行的语言解释技术概念。这种解释一个2岁可能涉及。今天，我会尽量压低声音，讲一个关于USSD科技的故事。</p><p id="f170" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在我得到了一点技术，但冷静，并假设一切都很好。</p><h1 id="9e51" class="jp jq hu bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">什么是USSD？</h1><p id="4dfa" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">在每天的基础上，我们有许多事情，我们互动，但我们实际上从来不知道他们的真实姓名。USSD就是其中之一。根据维基百科，USSD代表“非结构化补充服务数据”，这是一个全球系统，用于移动设备与服务提供商(Safaricom、Airtel、Orange)计算机上的程序直接通信。</p><p id="84ec" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你没有得到以上我想让你想想任何操作你做你的电话这是不是短信互联网或作出的电话。让我们来选择一个操作，比如检查信用或购买捆绑包(而不是捆绑包“mwitu”)。这个过程通常需要你在手机中输入一个具有独特结构的号码。</p><blockquote class="ks kt ku"><p id="71d9" class="ir is kv it b iu iv iw ix iy iz ja jb kw jd je jf kx jh ji jj ky jl jm jn jo hn dt translated"><strong class="it hv"> *144#或*544# </strong></p><p id="74c5" class="ir is kv it b iu iv iw ix iy iz ja jb kw jd je jf kx jh ji jj ky jl jm jn jo hn dt translated">当您拨打上述号码时，您将会收到一条提示，为您提供获得相应服务所需的数据或说明。</p></blockquote><p id="1409" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此屏幕显示用户发起的USSD请求的示例请求。</p><figure class="la lb lc ld fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff kz"><img src="../Images/290a8b3dfb173fd5337a9144ef550896.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*laClDAx0WUDfhmhNKks45A.jpeg"/></div></div></figure><p id="6da4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我相信现在你可以和这项技术建立联系了。现在我想直截了当地解释一下，为什么会出现这种情况。</p><p id="373d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以基本上情况是这样的:</p><ul class=""><li id="f7c2" class="ll lm hu it b iu iv iy iz jc ln jg lo jk lp jo lq lr ls lt dt translated">用户拨打提供的USSD代码。</li><li id="a5dd" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">该请求被转发到移动服务提供商。</li><li id="b7ea" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">提供程序通过网关将请求路由到承载应用程序的计算机。</li><li id="78c4" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">应用程序处理它接收的请求并发回反馈。</li><li id="3ac3" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">该反馈由提供商处理并被发送回移动电话。</li></ul><p id="8a89" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我将解释如何创建USSD应用程序。</p><h1 id="3c2c" class="jp jq hu bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">USSD背后的魔力</h1><p id="bc64" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">要让咒语成功，你需要一根魔杖，它有几个部分:</p><ul class=""><li id="c8b8" class="ll lm hu it b iu iv iy iz jc ln jg lo jk lp jo lq lr ls lt dt translated">Chrome的邮差客户端</li><li id="242d" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">运行web服务器(LAMP、xamp等)</li><li id="7697" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">崇高文本编辑</li><li id="fee3" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">脑</li><li id="584f" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">一杯咖啡(几杯)</li></ul><p id="a9cc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当你满足以上要求时，你将获得迪迪(一位虚构的古埃及<strong class="it hv">魔术师的<strong class="it hv">名字</strong>)的力量</strong>书写和执行咒语。</p><p id="900b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">请注意，在本教程中，我们不会使用实时网关，而只是模拟它在实际环境中的运行方式。*</p><h2 id="8913" class="lz jq hu bd jr ma mb mc jv md me mf jz jc mg mh kd jg mi mj kh jk mk ml kl mm dt translated">拼写1</h2><p id="1118" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">要为USSD发展，他们是你需要理解的关键。其中一些是基本的编程技能，包括条件语句、Switch语句等。</p><p id="0363" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">原因是因为我们将进行大量的字符串操作，以提取数据并解释USSD网关发送给我们的请求。需要注意的一点是，USSD网关使用不同的语言，即发送具有不同命名的字符串。</p><p id="8fe0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于本教程，我们将采用以下内容作为示例请求参数。</p><blockquote class="ks kt ku"><p id="519a" class="ir is kv it b iu iv iw ix iy iz ja jb kw jd je jf kx jh ji jj ky jl jm jn jo hn dt translated">MSISDN ' = &gt; ' 254714611388 '(发送请求的电话号码)</p><p id="1279" class="ir is kv it b iu iv iw ix iy iz ja jb kw jd je jf kx jh ji jj ky jl jm jn jo hn dt translated">SESSION_ID' =&gt; '355562002 '，(SESSION in case you need to perform audit)</p><p id="beaf" class="ir is kv it b iu iv iw ix iy iz ja jb kw jd je jf kx jh ji jj ky jl jm jn jo hn dt translated">USSD _字符串' =&gt; '58*1234*456*252 '，(这是包含从USSD网关发送的请求的字符串，基本上是用户在电话上得到提示时给出的答案。)</p></blockquote><p id="d1c6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所有答案(用户在移动电话上输入的数据)由“*”分隔，用户输入的每个答案都连接到现有字符串。所以你需要熟悉php的explode()函数。</p><h2 id="f4e5" class="lz jq hu bd jr ma mb mc jv md me mf jz jc mg mh kd jg mi mj kh jk mk ml kl mm dt translated">咒语2</h2><p id="0d79" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">这个魔咒现在是橡胶与路面相遇的地方。它包括创建一个样本代码来模拟一个过程。在本课程中，我将考虑一个选民登记系统。</p><p id="8de8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在USSD你需要知道的一件非常重要的事情是关键字CON和END的用法。</p><p id="28f1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">CON关键字用于暗示连续请求。例如，当您希望用户输入答案时。</p><p id="c907" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">END用于终止USSD会话。当你在你的脚本的开头添加这个的时候，它会告诉提供者会话已经结束了，因此用户不会得到一个输入框，而是一个“确定”或者“退出”</p><p id="22ca" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下面是一个示例php代码，它也被加上了注释，以便更容易理解发生了什么。</p><pre class="la lb lc ld fq mn mo mp mq aw mr dt"><span id="aea4" class="lz jq hu mo b fv ms mt l mu mv">&lt;?php<br/> #We obtain the data which is contained in the post url on our server.<br/> <br/> $text=$_GET[‘USSD_STRING’];<br/> $phonenumber=$_GET[‘MSISDN’];<br/> $serviceCode=$_GET[‘serviceCode’];</span><span id="439c" class="lz jq hu mo b fv mw mt l mu mv">#we explode the text using the separator ‘*’ which will give us an array.</span><span id="b0cd" class="lz jq hu mo b fv mw mt l mu mv">$level = explode(“*”, $text);</span><span id="59aa" class="lz jq hu mo b fv mw mt l mu mv">//check to see of the text variable has data to avoid errors.<br/> if (isset($text)) {</span></pre><p id="ca6d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">第一个请求将有一个空的文本字段，因此应该向用户显示欢迎屏幕。注意CON关键字的使用。</p><pre class="la lb lc ld fq mn mo mp mq aw mr dt"><span id="2f44" class="lz jq hu mo b fv ms mt l mu mv">if ( $text == “” ) {<br/> $response=”CON Welcome to the registration portal.\nPlease enter you full name”;<br/> }</span></pre><p id="f139" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们检查每个级别，以确保它有数据，已经通过或正在排队。希望你能弄清楚这里发生了什么。</p><pre class="la lb lc ld fq mn mo mp mq aw mr dt"><span id="5f92" class="lz jq hu mo b fv ms mt l mu mv">if(isset($level[0]) &amp;&amp; $level[0]!=”” &amp;&amp; !isset($level[1])){</span><span id="0832" class="lz jq hu mo b fv mw mt l mu mv">$response=”CON Hi “.$level[0].”, enter your ward name”;<br/> <br/> }<br/> else if(isset($level[1]) &amp;&amp; $level[1]!=”” &amp;&amp; !isset($level[2])){<br/> $response=”CON Please enter you national ID number\n”;</span><span id="1a08" class="lz jq hu mo b fv mw mt l mu mv">}<br/> else if(isset($level[2]) &amp;&amp; $level[2]!=”” &amp;&amp; !isset($level[3])){<br/> //Save data to database<br/> $data=array(<br/> ‘phonenumber’=&gt;$phonenumber,<br/> ‘fullname’ =&gt;$level[1],<br/> ‘electoral_ward’ =&gt; $level[2],<br/> ‘national_id’=&gt;$level[3]<br/> );</span><span id="1f9e" class="lz jq hu mo b fv mw mt l mu mv">//Insert the values into the db SOMEWHERE HERE!!</span><span id="246f" class="lz jq hu mo b fv mw mt l mu mv">We end the session using the keyword END.</span><span id="2f9e" class="lz jq hu mo b fv mw mt l mu mv">$response=”END Thank you “.$level[1].” for registering.\nWe will keep you updated”; <br/> }</span><span id="fe6f" class="lz jq hu mo b fv mw mt l mu mv">Also note that we echo the response for every successful request.</span><span id="f2c5" class="lz jq hu mo b fv mw mt l mu mv">header(‘Content-type: text/plain’);<br/> echo $response;</span><span id="4703" class="lz jq hu mo b fv mw mt l mu mv">}</span><span id="0fac" class="lz jq hu mo b fv mw mt l mu mv">?&gt;</span></pre><h2 id="865b" class="lz jq hu bd jr ma mb mc jv md me mf jz jc mg mh kd jg mi mj kh jk mk ml kl mm dt translated">咒语3</h2><p id="ebc3" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">如果你忍到这个地步，我应该给你一个忍者贴。:-)</p><p id="4570" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">第三个咒语将帮助我们知道我们的代码是否有效。为了测试代码，请从</p><pre class="la lb lc ld fq mn mo mp mq aw mr dt"><span id="361c" class="lz jq hu mo b fv ms mt l mu mv"><a class="ae mx" href="https://gist.github.com/drizzentic/18522c06e4529c58bc82fefe429e319b" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/drizzentic/18522c06e4529c58bc82fefe429e319b</a></span></pre><p id="e38d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">并遵循以下步骤:</p><ul class=""><li id="cbce" class="ll lm hu it b iu iv iy iz jc ln jg lo jk lp jo lq lr ls lt dt translated">将代码放在您的web服务器文件夹中，即htdocs或/var/www/html</li><li id="df90" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">打开邮递员客户端</li><li id="b097" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">将url放在托管代码的位置，例如localhost</li><li id="1662" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">将拼写1中指定的参数添加到请求url，例如</li></ul><blockquote class="my"><p id="a206" class="mz na hu bd nb nc nd ne nf ng nh jo ek translated"><a class="ae mx" href="http://localhost:9000?MSISDN=0713038301&amp;USSD_STRING=&amp;serviceCode=*144#" rel="noopener ugc nofollow" target="_blank"> http://localhost:9000？MSISDN = 0713038301&amp;USSD _字符串= &amp;服务代码=*144# </a></p></blockquote><ul class=""><li id="2a99" class="ll lm hu it b iu ni iy nj jc nk jg nl jk nm jo lq lr ls lt dt translated">请注意，USSD字符串应该为空，以便您看到欢迎页面。</li><li id="fba7" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">发送请求并检查来自服务器的响应的邮差响应窗口。这代表了用户发出请求时在手机上得到的反馈。</li><li id="6736" class="ll lm hu it b iu lu iy lv jc lw jg lx jk ly jo lq lr ls lt dt translated">通过添加您的姓名来修改USSD字符串，例如</li></ul><blockquote class="my"><p id="9a05" class="mz na hu bd nb nc nd ne nf ng nh jo ek translated"><a class="ae mx" href="http://localhost:9000?MSISDN=0713038301&amp;USSD_STRING=&amp;serviceCode=*144#" rel="noopener ugc nofollow" target="_blank"> http://localhost:9000？MSISDN = 0713038301&amp;USSD _字符串=无名氏&amp;服务代码=*144# </a></p></blockquote><ul class=""><li id="6d96" class="ll lm hu it b iu ni iy nj jc nk jg nl jk nm jo lq lr ls lt dt translated">将会出现不同提示。要继续下一步，请在您的姓名后加一个“*”作为分隔符。对其余的提示重复此操作，直到完成为止。例如</li></ul><blockquote class="my"><p id="e292" class="mz na hu bd nb nc nd ne nf ng nh jo ek translated"><a class="ae mx" href="http://localhost:9000?MSISDN=0713038301&amp;USSD_STRING=&amp;serviceCode=*144#" rel="noopener ugc nofollow" target="_blank"> http://localhost:9000？MSISDN = 0713038301&amp;USSD _字符串=约翰·多伊*内罗比&amp;服务代码=*144# </a></p></blockquote><p id="0124" class="pw-post-body-paragraph ir is hu it b iu ni iw ix iy nj ja jb jc nn je jf jg no ji jj jk np jm jn jo hn dt translated">当您开发USSD应用程序时，上面的过程会很方便。在真实环境中测试是非常昂贵的，所以在你得到一个测试平台来测试之前，坚持使用postman。</p><h2 id="9b20" class="lz jq hu bd jr ma mb mc jv md me mf jz jc mg mh kd jg mi mj kh jk mk ml kl mm dt translated">咒语4</h2><p id="d1ac" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">这不是很重要，但你也可以做。将USSD作为一项技能添加到您的linkedIn个人资料中:-)</p><p id="5c6a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">法术5 </strong></p><p id="b935" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">【https://www.buymeacoffee.com/rono T4】</p><h2 id="727c" class="lz jq hu bd jr ma mb mc jv md me mf jz jc mg mh kd jg mi mj kh jk mk ml kl mm dt translated">为了帮助其他人获得免费新闻，请友好地按下心形按钮，以显示对工作的热爱并传播新闻。</h2><blockquote class="ks kt ku"><p id="cfdb" class="ir is kv it b iu iv iw ix iy iz ja jb kw jd je jf kx jh ji jj ky jl jm jn jo hn dt translated"><a class="ae mx" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae mx" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae mx" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae mx" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is kv it b iu iv iw ix iy iz ja jb kw jd je jf kx jh ji jj ky jl jm jn jo hn dt translated">要了解更多信息，请<a class="ae mx" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">阅读我们的“关于”页面</a>、<a class="ae mx" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书上给我们点赞/发消息</a>，或者简单地说，<a class="ae mx" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ir is kv it b iu iv iw ix iy iz ja jb kw jd je jf kx jh ji jj ky jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae mx" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae mx" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote></div></div>    
</body>
</html>