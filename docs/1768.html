<html>
<head>
<title>Implementing the IRC spec in Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Node.js中实现IRC规范</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/implementing-the-irc-spec-in-node-js-c630b8cd5771?source=collection_archive---------4-----------------------#2016-12-06">https://medium.com/hackernoon/implementing-the-irc-spec-in-node-js-c630b8cd5771?source=collection_archive---------4-----------------------#2016-12-06</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="6b6b" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">为什么阅读RFC不一定是可怕的</h2></div><p id="c275" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">IRC一直是我生活中很重要的一部分。我的一些最牢固的友谊是在我十几岁时每天访问的IRC频道聊天中建立起来的。当我走在通往计算机科学的职业道路上时，我很自然会想知道它是如何在幕后工作的。但是你从哪里开始呢？</p><p id="2b47" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">原来，互联网工程任务组(IETF)的人写了这些东西，叫做征求意见稿(RFC ),详细说明了不同系统和协议如何工作的确切规范。其中许多都设定了人们构建实现的标准。其中之一是IRC协议。听起来有点吓人，对吧？我们再说一遍。来自<strong class="jl hv">互联网工程任务组</strong>的一群<strong class="jl hv">天才</strong>编写<strong class="jl hv">RFC</strong>，这个星球上的<strong class="jl hv">每个人都认为是<strong class="jl hv">标准</strong>。</strong></p><p id="76f3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">不过，不一定要很恐怖。我最初害怕阅读RFC 1459，这是几乎所有IRC服务器和客户端都遵循的规范，因为我认为它太复杂了。我认为它们是由真正的工程师为真正的工程师写的，而不是像我这样的计算机科学学生。但是几年后，我潜入水中，发现水比我想象的要浅得多。</p><p id="7fcf" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">IRC规范实际上是一个简单的协议，你不需要成为天才就能理解它。为了向您证明这一点，我将回顾RFC 1459的一些摘录，以了解该协议是如何工作的。然后，我们将使用我们所学的知识在Node.js中实现我们自己的简单IRC客户端。希望到最后应该清楚RFC是可接近的，任何人都可以编写自己的标准协议实现。了解这一点是您工具箱中的一项重要技能，因为您可以自由地用自己选择的语言实现协议。您不必一直等待其他人来实现它或使用一个糟糕的现有实现。</p><h2 id="e5e9" class="kg kh hu bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la dt translated">什么是IRC？</h2><p id="430a" class="pw-post-body-paragraph jj jk hu jl b jm lb iv jo jp lc iy jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">如果你不知道IRC是什么，谢谢你留下来！让我们直接进入RFC 1459的摘要，而不是给出我自己的解释:</p><blockquote class="lg lh li"><p id="06f7" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">IRC协议是在过去的4年中发展起来的，因为它最初是作为BBS上的用户之间聊天的一种方式来实现的。现在，它支持一个世界范围的服务器和客户端网络，并在不断发展壮大。在过去的两年里，连接到IRC主网络的平均用户数量增长了10倍。</p><p id="bf4d" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">IRC协议是一个基于文本的协议，最简单的客户端是任何能够连接到服务器的套接字程序。</p></blockquote><p id="9d25" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">是聊天室！你拿一个客户端，把它连接到一个服务器上，你就可以用不同的频道和其他人聊天。如果你熟悉的话，这和Slack的分散版本没什么不同。有许多不同的服务器和客户端应用程序。有些客户端完全在终端中运行。有些有图形用户界面。我每天使用的IRC客户端Textual是这样的:</p><figure class="lo lp lq lr fq ls fe ff paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="fe ff ln"><img src="../Images/536031cdbfd89aa77395c2e75adf3e7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Pt0C8h-3L5tZD3BQ05ylw.png"/></div></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek">Me, asking a question in the #choo Freenode IRC channel</figcaption></figure><p id="598e" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我们将显示的数据分解成关于协议的问题，我们可以使用RFC 1459来回答这些问题。</p><ol class=""><li id="3779" class="md me hu jl b jm jn jp jq js mf jw mg ka mh ke mi mj mk ml dt translated">左侧是我连接的服务器列表。您如何连接到服务器并与之通信？</li><li id="31ed" class="md me hu jl b jm mm jp mn js mo jw mp ka mq ke mi mj mk ml dt translated">在每台服务器下，都有我加入的频道列表。<strong class="jl hv">你如何加入一个渠道？</strong></li><li id="2dbd" class="md me hu jl b jm mm jp mn js mo jw mp ka mq ke mi mj mk ml dt translated">右边是焦点频道的人员列表，#choo。<strong class="jl hv">你怎么知道谁在频道里？</strong></li><li id="931a" class="md me hu jl b jm mm jp mn js mo jw mp ka mq ke mi mj mk ml dt translated">在中间，有一个来自通道的消息日志。<strong class="jl hv">你怎么知道频道里说的是什么？</strong></li><li id="5c43" class="md me hu jl b jm mm jp mn js mo jw mp ka mq ke mi mj mk ml dt translated">在底部，我可以输入并向频道发送我自己的消息。如何发送自己的信息？</li></ol><p id="5175" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">IRC客户端通常可以做的事情还有很多，但是对于第一次阅读来说，这已经是相当多的功能了。</p></div><div class="ab cl mr ms hc mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="hn ho hp hq hr"><h2 id="f39f" class="kg kh hu bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la dt translated">如何连接到服务器并与之通信？</h2><p id="3c10" class="pw-post-body-paragraph jj jk hu jl b jm lb iv jo jp lc iy jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">让我们来看看RFC对于如何将服务器作为客户端有什么说法:</p><blockquote class="lg lh li"><p id="a586" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">1.2客户</p><p id="6ac0" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated"><strong class="jl hv">客户端是连接到一个服务器而不是另一个服务器的任何东西。</strong>每个客户端通过一个最大长度为九(9)个字符的<strong class="jl hv">唯一昵称</strong>与其他客户端区分开来。请参阅协议语法规则，了解昵称中可以使用和不可以使用的内容。除了昵称之外，所有服务器必须具有关于所有客户端的以下信息:客户端运行的主机的<strong class="jl hv">真实名称</strong>，该主机上客户端的<strong class="jl hv">用户名</strong>，以及客户端连接到的服务器..</p></blockquote><p id="e274" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">所以我们所需要做的就是连接到服务器，然后嘣，我们就是一个客户端…除非我们是另一个服务器。我们必须确保在继续阅读的同时，不要做服务器端的事情，而要做客户端的事情。</p><p id="9b57" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们还了解到，客户有一个独特的昵称，也有一个真实的姓名和用户名。名字真多。让我们在继续时记住这一点。</p><p id="cdc6" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">一旦我们连接到服务器，我们发送什么，我们得到什么回报？如果我们继续读，我们会找到关于信息的那一章。</p><blockquote class="lg lh li"><p id="c5c2" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">2.3信息</p><p id="9ef5" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">服务器和客户端互相发送消息，这些消息可能会也可能不会产生回复。如果消息包含有效命令，如后面章节中所述的<br/>，客户端应期待指定的<br/>回复，但不建议永远等待回复；客户端到服务器和服务器到服务器的通信本质上是异步的。</p></blockquote><p id="e67a" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">好的，这告诉我们不是所有的消息都会立即收到回复。也许我们可以发送消息并分别对服务器回复做出反应。更重要的是，什么是信息？</p><blockquote class="lg lh li"><p id="aad5" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">每条IRC消息最多可由三个主要部分组成:<strong class="jl hv">前缀</strong>T6(可选)、<strong class="jl hv">命令</strong>和<strong class="jl hv">命令参数</strong>(其中<br/>最多可达15个)。前缀、命令和所有参数由一个(或多个)ASCII空格字符(0x20)分隔。</p></blockquote><p id="c4f6" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">一条消息由三部分组成，用空格隔开。那些部分是什么？</p><blockquote class="lg lh li"><p id="ea79" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">前缀<strong class="jl hv">的存在用一个<strong class="jl hv">单前导ASCII <br/>冒号字符</strong>(':'，0x3b)表示，它必须是<br/>消息本身的第一个字符。冒号<br/>和前缀之间不能有空格。服务器使用前缀来表示消息的真实来源。如果前缀从消息中丢失，则它<br/>被认为是从接收它的连接<br/>中产生的。<strong class="jl hv">客户端自己从<br/>发送消息时不应使用前缀</strong>；如果他们使用前缀，唯一有效的前缀是与客户端相关联的<br/>注册昵称。如果无法从服务器的内部<br/>数据库中找到前缀所标识的源<br/>，或者如果该源是从与消息到达的<br/>不同的链接中注册的，则服务器必须默认忽略消息<br/>。</strong></p></blockquote><p id="a27b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们在这里获得了很多信息，让我们列出我们所学到的:</p><ol class=""><li id="06b6" class="md me hu jl b jm jn jp jq js mf jw mg ka mh ke mi mj mk ml dt translated">消息可以以前缀开头</li><li id="713b" class="md me hu jl b jm mm jp mn js mo jw mp ka mq ke mi mj mk ml dt translated">前缀以一个ASCII冒号(<code class="eh my mz na nb b">:</code>)开始，然后是一些中间没有空格的文本。看起来有点像<code class="eh my mz na nb b">:abcd</code>。</li><li id="ed85" class="md me hu jl b jm mm jp mn js mo jw mp ka mq ke mi mj mk ml dt translated">客户端不应使用前缀。太好了，这对我们来说更容易！记住，我们想做客户端的事情，而不是服务器端的事情，这是其中之一。</li></ol><blockquote class="lg lh li"><p id="76e8" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated"><strong class="jl hv">命令</strong>必须是有效的IRC命令，或者是用ASCII文本表示的三(3)位数字<br/>。</p></blockquote><p id="db93" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们还不知道什么是有效的IRC命令，但是现在我们知道它只是文本(或者ASCII中的3位数)。也许可以是<code class="eh my mz na nb b">COOL</code>或者<code class="eh my mz na nb b">123</code>。</p><blockquote class="lg lh li"><p id="cb50" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">IRC消息始终是以CR-LF  <br/>(回车-换行)对结束的字符行<strong class="jl hv">，这些消息的长度不得超过<br/>512个字符，包括<br/>结尾的CR-LF在内的所有字符。因此，命令及其参数最多允许有510个字符<br/>。没有提供<br/>延续信息行。有关<br/>当前实施的更多详情，请参见第7节。</strong></p></blockquote><p id="789e" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">CR-LF在JavaScript和大多数语言中与<code class="eh my mz na nb b">\r\n</code>相同。现在我们对客户机和服务器之间发送的消息有了一个小概念。它们可能看起来像这样:</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="690e" class="kg kh hu nb b fv ng nh l ni nj">WHATSUP these are params\r\n</span><span id="f49a" class="kg kh hu nb b fv nk nh l ni nj">NOTMUCH i have params also\r\n</span><span id="b3b4" class="kg kh hu nb b fv nk nh l ni nj">:somekindaprefix 123 i have a prefix now\r\n</span></pre><p id="87bf" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果你一直在阅读，你可能会注意到我们跳过了一些段落和细节。这很好，我们不需要第一次就完全理解。你随时可以在以后再读一遍，以填补更多的知识空白。重要的一点是要意识到RFC是用简单的英语编写的，它们应该易于理解。</p><p id="9310" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">当我这么说的时候，下一章有一些奇怪的符号叫做BNF。</p><blockquote class="lg lh li"><p id="b314" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">2.3.1“伪”BNF中的消息格式</p><p id="23d1" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">协议消息必须从连续的<br/>八位字节流中提取。当前的解决方案是指定两个字符CR和<br/> LF作为消息分隔符。空消息被无声忽略，<br/>这允许在消息<br/>之间使用序列CR-LF而没有额外的问题。</p><p id="9ea8" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">提取的消息被解析成组件<prefix>，以及由<middle>或<trailing>组件匹配的参数列表。</trailing></middle></prefix></p><p id="1ea9" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">对此的BNF表示为:</p></blockquote><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="3e36" class="kg kh hu nb b fv ng nh l ni nj">&lt;message&gt;  ::= [':' &lt;prefix&gt; &lt;SPACE&gt; ] &lt;command&gt; &lt;params&gt; &lt;crlf&gt;<br/>&lt;prefix&gt;   ::= &lt;servername&gt; | &lt;nick&gt; [ '!' &lt;user&gt; ] [ '@' &lt;host&gt; ]<br/>&lt;command&gt;  ::= &lt;letter&gt; { &lt;letter&gt; } | &lt;number&gt; &lt;number&gt; &lt;number&gt;<br/>&lt;SPACE&gt;    ::= ' ' { ' ' }<br/>&lt;params&gt;   ::= &lt;SPACE&gt; [ ':' &lt;trailing&gt; | &lt;middle&gt; &lt;params&gt; ]<br/><br/>&lt;middle&gt;   ::= &lt;Any *non-empty* sequence of octets not including SPACE or NUL or CR or LF, the first of which may not be ':'&gt;</span><span id="15b0" class="kg kh hu nb b fv nk nh l ni nj">&lt;trailing&gt; ::= &lt;Any, possibly *empty*, sequence of octets not including NUL or CR or LF&gt;<br/><br/>&lt;crlf&gt;     ::= CR LF</span></pre><p id="9a53" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果你没有上过大学编程语言课程，你可能会想“啊，天哪，这是怎么回事？”。不要担心，一旦你知道它是什么，这个语法就很容易理解。BNF代表Backus-Naur形式，它只是一种描述形式语法的方式，或者某种语言的一套规则。IRC客户端和服务器使用的协议是一种语言，所以这是一种非常简短的方式来描述我们在之前的段落中读到的一切。</p><p id="73d2" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">BNF列出了一堆语法规则，其中每个元素由其他元素或文本组成。你可以这样读</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="c08b" class="kg kh hu nb b fv ng nh l ni nj">&lt;crlf&gt;     ::= CR LF</span></pre><p id="7266" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">上面写着“无论你在规则中的什么地方看到<code class="eh my mz na nb b">&lt;crlf&gt;</code>，那都是一个CR LF或者<code class="eh my mz na nb b">\r\n</code>。如果你看到方括号(<code class="eh my mz na nb b">[]</code>)里的东西，那意味着它是可选的。</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="d9df" class="kg kh hu nb b fv ng nh l ni nj">&lt;message&gt;  ::= [':' &lt;prefix&gt; &lt;SPACE&gt; ] &lt;command&gt; &lt;params&gt; &lt;crlf&gt;</span></pre><p id="5f5f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这表示消息可能以冒号、<code class="eh my mz na nb b">&lt;prefix&gt;</code>和<code class="eh my mz na nb b">&lt;SPACE&gt;</code>开头，但也可能不是。这就像我们之前在RFC中对前缀的描述一样！</p><p id="8783" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">管道符号(<code class="eh my mz na nb b">|</code>)分隔同一符号的多个规则。你可以把它理解成一个“或”。</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="c1fc" class="kg kh hu nb b fv ng nh l ni nj">&lt;prefix&gt;   ::= &lt;servername&gt; | &lt;nick&gt; [ '!' &lt;user&gt; ] [ '@' &lt;host&gt; ]</span></pre><p id="b74a" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">一个<code class="eh my mz na nb b">&lt;prefix&gt;</code>要么是一个<code class="eh my mz na nb b">&lt;servername&gt;</code>要么是一个带有一些可选的其他东西的<code class="eh my mz na nb b">&lt;nick&gt;</code>。</p><p id="f5c0" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">最后，花括号(<code class="eh my mz na nb b">{}</code>)表示“零个或更多”的内容。</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="8a03" class="kg kh hu nb b fv ng nh l ni nj">&lt;SPACE&gt;    ::= ' ' { ' ' }</span></pre><p id="8974" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这意味着一个<code class="eh my mz na nb b">&lt;SPACE&gt;</code>符号至少是一个空格，后跟零个或多个额外空格。</p><p id="2679" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">即使你还没有完全理解这里的BNF，也没关系。我们已经从之前读过的所有材料中对信息的样子有了足够好的理解。现在我们知道了消息是什么样子，我们可以阅读第四章，这基本上是一个巨大的列表，列出了我们可以使用的所有不同类型的消息。具体来说，让我们看看需要发送什么来注册一个连接。</p><blockquote class="lg lh li"><p id="72a5" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">4.1连接注册</p><p id="0e38" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">这里描述的命令用于将一个连接注册为一个用户或服务器，以及正确地断开连接。</p><p id="7bb3" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">对于要注册的客户端或服务器连接，不需要<strong class="jl hv">“通过”命令</strong>，但它必须在服务器消息或NICK/USER组合的后者之前。强烈建议所有服务器连接都有密码，以便为实际连接提供一定程度的安全性。<strong class="jl hv">客户注册的建议顺序如下</strong>:</p><p id="dfd7" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">1.传递消息</p><p id="ddce" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">2.尼克消息</p><p id="31e1" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">3.用户消息</p></blockquote><p id="943a" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">哦，我们终于进入真正的IRC命令了！因为它说PASS命令是可选的，我们将跳过这一点(但是如果您想用密码连接到服务器，您可以自己阅读它)。让我们把重点放在NICK和用户消息上。</p><blockquote class="lg lh li"><p id="dba3" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">尼克消息</p><p id="0caa" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">命令:NICK <br/>参数:&lt;昵称&gt; [ &lt; hopcount &gt;</p><p id="74c6" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">NICK消息用于<strong class="jl hv">给用户一个昵称</strong>或改变之前的<br/>昵称。<strong class="jl hv">服务器</strong>仅使用&lt; hopcount &gt;参数来指示<br/>一个缺口距离其主服务器有多远。本地连接的<br/>跳数为0。如果由客户端提供，则必须忽略它。</p><p id="70cd" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt">…</p><p id="6516" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">示例:</p><p id="d8e1" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated"><code class="eh my mz na nb b">NICK Wiz</code>；介绍新的尼克“威兹”。</p><p id="f648" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated"><code class="eh my mz na nb b">:WiZ NICK Kilroy</code>；维茨把他的昵称改成了基尔罗伊。</p></blockquote><p id="8aa1" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我已经删掉了大部分描述，因为它只是实现服务器的人需要的信息。对于我们的客户来说，NICK命令就是我们的昵称，这是我们之前读到的客户的众多名字之一。参数列表也以BNF格式给出，但是这里非常简单，所以很容易理解。客户端不使用<code class="eh my mz na nb b">&lt;hopcount&gt;</code>，所以我们只需发送<code class="eh my mz na nb b">NICK mycoolnickname</code>。</p><blockquote class="lg lh li"><p id="73b1" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">用户信息</p><p id="3006" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">命令:用户<br/>参数:&lt;用户名&gt;T27】主机名&gt;T29】服务器名&gt;T31】真实名&gt;</p><p id="bafc" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated"><strong class="jl hv">用户消息在连接开始时用于指定新用户的用户名、主机名、服务器名和实名。</strong>它也用于服务器之间的通信，以指示新用户到达IRC，因为只有在从客户端接收到user和NICK之后，用户才被注册。</p><p id="b740" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">在服务器之间，用户必须以客户的昵称为前缀。<strong class="jl hv">注意，当用户命令来自直接连接的客户端</strong>(出于安全原因)时，主机名和服务器名通常会被IRC服务器忽略，但是它们会在服务器到服务器的通信中使用。这意味着当一个新用户被介绍给网络的其余部分时，在伴随的用户被发送之前，NICK必须总是被发送到远程服务器。</p><p id="8bf7" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">必须注意，realname参数必须是最后一个参数，因为它<strong class="jl hv">可能包含空格字符，并且必须以冒号</strong>(':')为前缀，以确保它被识别。</p><p id="3fc1" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt">…</p><p id="39ad" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">示例:</p><p id="bbdf" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated"><code class="eh my mz na nb b">USER guest tolmoon tolsun :Ronnie Reagan</code></p></blockquote><p id="a0c2" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">啊，还有另外两个名字，用户名和真名，还有几个额外的名字！它说主机名和服务器名将被客户机忽略，所以我们可以把我们想要的东西放在那里。我们还学到了一些关于消息格式的新东西:如果最后一个参数以冒号为前缀，它可以有空格。如果你回头看看BNF消息格式规则，你会看到这里也有描述。</p><p id="570c" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">好吧。阅读量很大。但是现在我们已经知道了足够的信息来回答我们的第一个问题:如何连接到服务器并与之通信？要在服务器上注册一个客户端，我们需要连接到它，并接收它的消息。我们发送的第一条消息是尼克和用户消息。它们看起来像这样:</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="0b34" class="kg kh hu nb b fv ng nh l ni nj">NICK rahat\r\n</span><span id="898b" class="kg kh hu nb b fv nk nh l ni nj">USER rahat_ahmed whatever whatever :Rahat Ahmed\r\n</span></pre><p id="692c" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这花了很长时间，但是接下来的问题回答起来会快得多，因为我们已经知道消息格式是什么样子了。</p><h2 id="2349" class="kg kh hu bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la dt translated"><strong class="ak">如何加入渠道？</strong></h2><p id="5ee9" class="pw-post-body-paragraph jj jk hu jl b jm lb iv jo jp lc iy jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">现在我们知道如何连接，我们必须找到如何加入一个频道，以便我们可以在里面聊天。所有类型的信息都在第四章中列出，我们可以浏览目录来找到我们想要的东西。“4.2通道操作”下的“4.2.1加入消息”一节听起来很有希望。</p><blockquote class="lg lh li"><p id="61d6" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">4.2.1加入消息</p><p id="a028" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">命令:加入<br/>参数:&lt;通道&gt; {，&lt;通道&gt; } [ &lt;键&gt; {，&lt;键&gt; }]</p><p id="9cbf" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">客户端使用JOIN命令<strong class="jl hv">开始监听特定频道</strong> …</p><p id="5a87" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">一旦用户加入了一个频道，他们就会收到关于他们的服务器收到的影响该频道的所有命令的通知。这包括<strong class="jl hv">模式、踢、部分、退出，当然还有特权/通知</strong> …</p><p id="a4c8" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">如果加入成功，用户将收到频道主题(使用RPL主题)和频道用户的<strong class="jl hv">列表(使用RPL回复)，其中必须包括加入的用户。</strong></p><p id="fab3" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">示例:</p><p id="7501" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated"><code class="eh my mz na nb b">JOIN #foobar</code>；加入#foobar频道。</p><p id="604a" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated"><code class="eh my mz na nb b">JOIN &amp;foo fubar</code>；使用键“fubar”加入通道&amp; foo。</p><p id="dd15" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated"><code class="eh my mz na nb b">JOIN #foo,&amp;bar fubar</code>；使用键“fubar”连接通道#foo，不使用键连接&amp; bar。</p></blockquote><p id="8475" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">那似乎很容易！要加入一个频道，我们只需发送<code class="eh my mz na nb b">JOIN #channelname</code>，然后我们开始接收该频道的所有消息。这也有助于我们找到下一个问题的答案:</p><h2 id="b90b" class="kg kh hu bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la dt translated"><strong class="ak">你怎么知道谁在频道里？</strong></h2><p id="916a" class="pw-post-body-paragraph jj jk hu jl b jm lb iv jo jp lc iy jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">JOIN命令的描述说，在我们加入一个频道后，我们会自动收到一个RPL_NAMREPLY消息，其中包含该频道中的用户列表。如果你用Ctrl+F搜索RFC中的“RPL_NAMREPLY ”,你会在第六章回复中找到。</p><blockquote class="lg lh li"><p id="f2ea" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">6.答复</p><p id="51be" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">以下是为响应上述命令而生成的数字回复列表。每个数字都有其编号、名称和回复字符串。</p><p id="90c7" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt">…</p><p id="9d5e" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">353 RPL_NAMREPLY <br/> <code class="eh my mz na nb b"> &lt;channel&gt; :[[@|+]&lt;nick&gt; [[@|+]&lt;nick&gt; [...]]]</code></p></blockquote><p id="a975" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这不是严格的BNF，但我们可以告诉353回复将有一个通道参数，后跟一个空格分隔的昵称的最终参数，这正是我们想要的！昵称前面可选的<code class="eh my mz na nb b">@</code>和<code class="eh my mz na nb b">+</code>在RFC的另一部分有描述，现在它们不是很重要。我会把它留给你，作为一个练习，找出他们的意思。</p><h2 id="a6fa" class="kg kh hu bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la dt translated"><strong class="ak">你怎么知道一个频道里说的是什么？</strong></h2><p id="e6e4" class="pw-post-body-paragraph jj jk hu jl b jm lb iv jo jp lc iy jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">我们希望从服务器接收的最后一组信息是在特定通道中发送的消息。检查JOIN命令中列出的命令列表可能是个好主意，一旦我们加入一个频道，就会自动收到这些命令。我们想要的是PRIVMSG:</p><blockquote class="lg lh li"><p id="6083" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">4.4.1私人信息</p><p id="879d" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">命令:PRIVMSG <br/>参数:&lt;接收方&gt; {，&lt;接收方&gt; } &lt;待发送文本&gt;</p><p id="7a18" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">PRIVMSG用于<strong class="jl hv">发送用户之间的私信</strong>。&lt;接收者&gt;是消息接收者的昵称。&lt;接收者&gt;也可以是用逗号分隔的<strong class="jl hv">或</strong>频道列表。</p><p id="d456" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">示例:</p><p id="f92c" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated"><code class="eh my mz na nb b">:Angel PRIVMSG Wiz :Hello are you receiving this message ?</code>；天使给巫师的信息。</p><p id="b865" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated"><code class="eh my mz na nb b">PRIVMSG Angel :yes I'm receiving it!</code>；<br/>给天使的信息。</p></blockquote><p id="fd2e" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">完美。为了检查是谁发送了传入的PRIVMSGs，我们读取了消息的前缀。为了查看消息发送给了谁或发送到了哪里，我们检查第一个参数。示例显示了用户之间的直接消息，但是描述说它也可以是频道名称。</p><h2 id="830d" class="kg kh hu bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la dt translated">如何发送自己的信息？</h2><p id="1d91" class="pw-post-body-paragraph jj jk hu jl b jm lb iv jo jp lc iy jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">这是免费的。如PRIVMSG部分所述，我们将自己的PRIVMSG发送到服务器，并将目的地和消息作为参数。</p><h2 id="e26b" class="kg kh hu bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la dt translated">好吧，让我们做一个客户！</h2><p id="3b64" class="pw-post-body-paragraph jj jk hu jl b jm lb iv jo jp lc iy jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">读够了。现在我们对协议的基础有了足够的了解，我们可以开始实现了。</p><p id="e151" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">首先，我们需要连接到服务器。在此之前，我们需要连接一台服务器。我将使用流行的Freenode(托管官方#node.js通道的地方)。因为我们使用node.js，所以我们可以使用<code class="eh my mz na nb b">net</code>模块来打开一个连接。</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="eb3d" class="kg kh hu nb b fv ng nh l ni nj">var net = require('net')</span><span id="061c" class="kg kh hu nb b fv nk nh l ni nj">var client = net.connect({<br/>  host: 'irc.freenode.net',<br/>  port: '6667'<br/>})</span></pre><p id="f108" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在我们想看看服务器向客户机发送了什么，所以让我们将连接通过管道传输到stdout，以便它打印到屏幕上。</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="9dc3" class="kg kh hu nb b fv ng nh l ni nj">client.pipe(process.stdout)</span></pre><p id="ccd8" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">最后，我们希望能够向服务器发送命令。最简单的方法是通过管道将stdin连接到该连接，但有一点需要注意。终端输入使用<code class="eh my mz na nb b">\n</code>换行，而IRC消息由<code class="eh my mz na nb b">\r\n</code>分隔。没问题，我们只要用<code class="eh my mz na nb b">npm install stream-replace</code>从npm抓取一个流替换包就可以了。</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="b7c6" class="kg kh hu nb b fv ng nh l ni nj">var replace = require('stream-replace')</span><span id="c4d2" class="kg kh hu nb b fv nk nh l ni nj">process.stdin.pipe(replace('\n', '\r\n')).pipe(client)</span></pre><p id="3b0d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">好的，看起来像这样。</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="c563" class="kg kh hu nb b fv ng nh l ni nj">var net = require('net')<br/>var replace = require('stream-replace')</span><span id="9ea3" class="kg kh hu nb b fv nk nh l ni nj">var client = net.connect({<br/>  host: 'irc.freenode.net',<br/>  port: '6667'<br/>})</span><span id="c1cb" class="kg kh hu nb b fv nk nh l ni nj">client.pipe(process.stdout)<br/>process.stdin.pipe(replace('\n', '\r\n')).pipe(client)</span></pre><p id="5b20" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">就是这样。我们完了！</p><h2 id="02a3" class="kg kh hu bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la dt translated">什么？</h2><p id="9fbc" class="pw-post-body-paragraph jj jk hu jl b jm lb iv jo jp lc iy jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">你可能在想，我现在让你白读了这篇文章。不要关闭标签，听我说完。</p><p id="1481" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">经历这一切的目的不是向您展示如何编写IRC客户端。真正的目的是表明任何人都可以阅读RFC，希望现在他们看起来没有以前那么可怕。你看，上面那个程序不是真正的客户。IRC客户端一直在你体内！代码仅仅是为了让你自己能够用你刚刚学过的语言和服务器交流。让我们试一试，好吗？</p><p id="a545" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">将脚本保存到一个文件中，然后用<code class="eh my mz na nb b">node script.js</code>运行它。您应该会立即在屏幕上看到一些来自服务器的文本。</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="9613" class="kg kh hu nb b fv ng nh l ni nj">:sinisalo.freenode.net NOTICE * :*** Looking up your hostname...<br/>:sinisalo.freenode.net NOTICE * :*** Checking Ident<br/>:sinisalo.freenode.net NOTICE * :*** Found your hostname</span></pre><p id="c6a7" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">是一堆通知信息。我们以前没见过，但你不知道的不会伤害你，你以后也可以读到。让我们坚持我们所知道的。</p><p id="a519" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果您让脚本运行一段时间，最终您会得到以下错误:</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="deff" class="kg kh hu nb b fv ng nh l ni nj">ERROR :Closing Link: 127.0.0.1 (Connection timed out)</span></pre><p id="1453" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这意味着我们花了太长时间什么都不做，服务器关闭了连接。我们可以再试一次，但这次我们将尝试注册一个连接，就像我们在第4章中读到的那样。我们需要发送的命令是NICK和USER。这些命令的参数设置了您的昵称、用户名和真实姓名，因此可以选择您喜欢的任何内容(可以随意向上滚动以复习哪个参数是哪个参数)。</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="16fb" class="kg kh hu nb b fv ng nh l ni nj">NICK rahat<br/>USER rahat_ahmed these_params dont_matter :Rahat Ahmed</span></pre><p id="1840" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在上面每一行之后按enter键，您将从服务器收到大量数据。戴上你的室内黑客墨镜，因为<em class="lj">我们在</em>了。</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="9481" class="kg kh hu nb b fv ng nh l ni nj">:verne.freenode.net 001 rahat2 :Welcome to the freenode Internet Relay Chat Network rahat2<br/>:verne.freenode.net 002 rahat2 :Your host is verne.freenode.net[185.30.166.37/6667], running version ircd-seven-1.1.4<br/>:verne.freenode.net 003 rahat2 :This server was created Thu Sep 22 2016 at 20:50:37 UTC<br/>:verne.freenode.net 004 rahat2 verne.freenode.net ircd-seven-1.1.4 DOQRSZaghilopswz CFILMPQSbcefgijklmnopqrstvz bkloveqjfI<br/>:verne.freenode.net 005 rahat2 CHANTYPES=# EXCEPTS INVEX CHANMODES=eIbq,k,flj,CFLMPQScgimnprstz CHANLIMIT=#:120 PREFIX=(ov)@+ MAXLIST=bqeI:100 MODES=4 NETWORK=freenode KNOCK STATUSMSG=@+ CALLERID=g :are supported by this server<br/>:verne.freenode.net 005 rahat2 CASEMAPPING=rfc1459 CHARSET=ascii NICKLEN=16 CHANNELLEN=50 TOPICLEN=390 ETRACE CPRIVMSG CNOTICE DEAF=D MONITOR=100 FNC TARGMAX=NAMES:1,LIST:1,KICK:1,WHOIS:1,PRIVMSG:4,NOTICE:4,ACCEPT:,MONITOR: :are supported by this server<br/>:verne.freenode.net 005 rahat2 EXTBAN=$,ajrxz WHOX CLIENTVER=3.0 SAFELIST ELIST=CTU :are supported by this server<br/>:verne.freenode.net 251 rahat2 :There are 144 users and 82040 invisible on 29 servers<br/>:verne.freenode.net 252 rahat2 33 :IRC Operators online<br/>:verne.freenode.net 253 rahat2 19 :unknown connection(s)<br/>:verne.freenode.net 254 rahat2 53193 :channels formed<br/>:verne.freenode.net 255 rahat2 :I have 4729 clients and 2 servers<br/>:verne.freenode.net 265 rahat2 4729 5738 :Current local users 4729, max 5738<br/>:verne.freenode.net 266 rahat2 82184 92341 :Current global users 82184, max 92341<br/>:verne.freenode.net 250 rahat2 :Highest connection count: 5740 (5738 clients) (579387 connections received)</span></pre><p id="32e6" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">记住我们读到的消息格式，这些似乎是一堆带有各种服务器数据的数字服务器回复。其中一些很容易阅读，另一些有点难，但没有什么比快速搜索RFC第6章中的回复列表更能找到它们的真正含义。既然我们已经加入了，我们可以尝试加入一个频道并在里面聊天。让我们尝试加入#node.js</p><pre class="lo lp lq lr fq nc nb nd ne aw nf dt"><span id="d37b" class="kg kh hu nb b fv ng nh l ni nj">JOIN #node.js</span></pre><p id="6f7b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">(如果没有立即得到响应，请按Enter键一堆次。节点可能会在发送之前缓冲您的输入)。你应该再次收到一些数据，这一次我们收到了大量的353 (RPL_NAMREPLY)回复，其中包含频道中的一堆昵称，以及我们输入#node.js的确认加入。如果有人在频道中发言，你会看到他们的PRIVMSG。你可以尝试向频道发送消息，但你会得到404回复，因为#node.js已经限制只向在Freenode注册了昵称的人发送消息。你可以随时加入另一个频道或加入你自己的频道，在那里玩，只要确保你没有打扰任何其他用户。一件很酷的事情是使用另一个IRC客户端加入同一个频道，和自己聊天。您可以看到您所做的一切的原始协议消息！</p></div><div class="ab cl mr ms hc mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="hn ho hp hq hr"><p id="7c8c" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">不言而喻，在IRC服务器上你还可以做更多的事情，在RFC 1459中你还可以阅读更多的内容并尝试理解更多的内容。我希望这个对IRC内部工作的快速探究能给你继续阅读的信心。即使你对IRC不是特别感兴趣，如果你想了解其他的协议或系统，那就去找RFC吧！</p><p id="60ff" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">快乐阅读！</p><blockquote class="lg lh li"><p id="0eb3" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated"><a class="ae kf" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kf" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kf" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae kf" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">要了解更多信息，请<a class="ae kf" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">阅读我们的“关于”页面</a>、<a class="ae kf" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书上点赞/给我们发消息</a>，或者简单地说，<a class="ae kf" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="jj jk lj jl b jm jn iv jo jp jq iy jr lk jt ju jv ll jx jy jz lm kb kc kd ke hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kf" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kf" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote></div></div>    
</body>
</html>