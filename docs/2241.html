<html>
<head>
<title>How I built a conversational game on Slack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何在Slack上建立一个对话游戏</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-i-built-a-conversation-game-on-slack-in-a-week-with-no-money-bd0c4d3bb4a6?source=collection_archive---------8-----------------------#2017-01-14">https://medium.com/hackernoon/how-i-built-a-conversation-game-on-slack-in-a-week-with-no-money-bd0c4d3bb4a6?source=collection_archive---------8-----------------------#2017-01-14</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class="ir is fm fo it iu"><a href="https://slack.com/oauth/authorize?scope=bot&amp;client_id=85403973076.103667105557" rel="noopener  ugc nofollow" target="_blank"><div class="iv ab ej"><div class="iw ab ix cl cj iy"><h2 class="bd hv fv z el iz eo ep ja er et ht dt translated">更新:添加到时差</h2><div class="jb l"><h3 class="bd b fv z el iz eo ep ja er et ek translated">Tickerbot现已在Slack应用目录上上线。试试吧！</h3></div><div class="jc l"><p class="bd b gc z el iz eo ep ja er et ek translated">slack.com</p></div></div></div></a></div><figure class="je jf jg jh fq ji fe ff paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="fe ff jd"><img src="../Images/bd02e3c399a227ae7245f19dc2d52ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CpDXmBNEqPE8zuyJy4hM5g.png"/></div></div></figure><p id="f650" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">由于信息公司开放了他们的API，对话应用程序(又名“聊天机器人”)最近被赋予了生命。除了WhatsApp，所有主要平台都允许开发者开发和发布应用。由于让人们下载新应用的难度越来越大，还有什么比利用现有应用的受欢迎程度更好的方式来吸引观众呢！</p><p id="b422" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">Slack就是这些消息平台中的一个。对于团队来说，这是一个神奇的工具，现在被各种类型和规模的组织广泛使用。但它与其他应用程序不同，因为一旦团队管理员安装了该应用程序，团队中的所有用户都可以使用它。我决定利用这一点为懈怠团队建立一个对话游戏。它叫做<a class="ae kn" href="http://talkai.xyz/tickerbot.html" rel="noopener ugc nofollow" target="_blank"> TickerBot </a>。基本上，它允许你用实时价格投资股票(当然是假的$$$)。您可以通过买卖股票来管理您的投资组合，获得股票的实时和历史价格图，并获得团队中表现最佳者的每日更新。</p><p id="5d2e" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">我的目标是以最少的努力和零成本构建一个简洁友好的应用程序。现在让我们深入研究一下用于各种零件的工具。</p><h2 id="a0f5" class="ko kp hu bd kq kr ks kt ku kv kw kx ky ka kz la lb ke lc ld le ki lf lg lh li dt translated"><strong class="ak"> API。AI —自然语言处理(NLP)和对话管理</strong></h2><figure class="je jf jg jh fq ji fe ff paragraph-image"><div class="fe ff lj"><img src="../Images/f815bfe98b562b44212f6bae9414ce53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*rsz1AmYD1XnndAkQ-cQ69g.png"/></div></figure><p id="09d9" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">没有NLP的对话式app有什么好？我不希望用户键入确切的命令来执行一个动作。用户应该可以自由地输入他们想要的任何内容，应用程序需要理解用户的意图。API。人工智能(最近被谷歌收购)有一个出色的基于机器学习的自然语言处理模型，允许你根据上下文管理对话流。免费计划允许您创建无限的私人代理，但限制为每秒一个查询(QPS)。它还具有与Slack的一键式集成，允许您快速部署应用程序。坏处呢？API。AI不稳定。随机错误，没有事先信息的后端突然变化是非常常见的。</p><p id="85b7" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><em class="lk">扩展注意事项— </em> 1 QPS对于成千上万的用户来说是不够的。那么解决方法是什么呢？对于这个app来说，很多用户输入都很简单，不需要任何高级的NLP。只有发送超过2个单词的输入才能节省大量的API调用。如果需要，我可以存储处理过的模式和来自API的响应。人工智能，从而随着时间的推移减少它的需求。就对话管理而言，它不是火箭科学。由于他们框架中的一些限制，我已经部分地自己做了。</p><h2 id="1555" class="ko kp hu bd kq kr ks kt ku kv kw kx ky ka kz la lb ke lc ld le ki lf lg lh li dt translated"><strong class="ak">Slack——用于异步响应、认证的API，当然还有Slack应用本身</strong></h2><figure class="je jf jg jh fq ji fe ff paragraph-image"><div class="fe ff ll"><img src="../Images/fa64e079c7efb94e92a5365eb305c6d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*hKm-8fISAOyq9N5RVsdWww.png"/></div></figure><p id="40db" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">API。人工智能需要快速反应(最多5秒)。此外，我只能对每个用户输入响应一次。不幸的是，我使用的外部API花费了大量的处理时间，并且我需要将我的响应分解成多个消息。由于他们没有给你安装你的应用的slack团队的OAuth证书(这很可悲，因为技术上你拥有证书)，我不得不放弃一键式集成，直接使用Slack API来发送异步响应。要发送这些消息，我需要OAuth凭证和收件人的用户ID。文件是一个痛苦的经历。我不得不多次阅读每一页，以了解我需要在哪里使用哪个API。我想这不是他们的错，他们最近长得真的很快。</p><p id="df41" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><em class="lk">扩展考虑事项—</em>slack应用商店提供了一个扩展你的应用程序和增加受众的绝佳场所。OAuth需要正确实现，以允许新团队使用您的应用程序。</p><h2 id="f8cf" class="ko kp hu bd kq kr ks kt ku kv kw kx ky ka kz la lb ke lc ld le ki lf lg lh li dt translated"><a class="ae kn" href="http://Plot.ly" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">剧情</strong> </a> <strong class="ak"> —剧情优美</strong></h2><figure class="je jf jg jh fq ji fe ff paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="fe ff lm"><img src="../Images/b4b054c010b69975311d0e1997b971ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gN2qLPvw1ilBhwTp3B3Zgg.png"/></div></div></figure><p id="1429" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><a class="ae kn" href="http://Plot.ly" rel="noopener ugc nofollow" target="_blank"> Plot.ly </a>拥有最好的python库(至少我是这么认为的)，可以绘制简单、功能丰富且美观的图形。他们有清晰的文档，他们的API简单易懂。我用它来绘制历史股票价格和投资组合表现。缺点是绘图和图像转换是在他们的服务器上完成的。发送图形数据和接收图像链接大约需要10-30秒。直接离线获取绘图图像是不可能的，免费的在线版本限制为每天50次API调用(尽管仍然很慷慨)。</p><p id="c568" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><em class="lk">扩展考虑事项— </em>要么购买<a class="ae kn" href="http://plot.ly" rel="noopener ugc nofollow" target="_blank"> plot.ly </a> pro，要么寻找变通方法。在我有限的时间里，我无法让这个离线工作。不过我还有一些想法，比如将图形转换成matplotlib，或者破解他们支持的离线HTML版本。</p><h2 id="e986" class="ko kp hu bd kq kr ks kt ku kv kw kx ky ka kz la lb ke lc ld le ki lf lg lh li dt translated"><strong class="ak">雅虎财经，Quandl —财务数据</strong></h2><figure class="je jf jg jh fq ji fe ff paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="fe ff ln"><img src="../Images/8b2d3f5468f99e633324128e30d8f93e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VeiG-dyp0ZeuETg_sd5maA.png"/></div></div></figure><p id="6e0f" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">我从优秀的雅虎金融开始。它提供了世界范围内各种股票的历史每日价格，也提供了实时的当前价格。当然是免费的。但问题是他们的文档不清楚，现在甚至这项服务的未来也不清楚。我也开始随机出现一些错误。Quandl是唯一一个提供免费数据的服务。然而，它只提供了美国和印度股票的历史价格。最后，我用quandl(雅虎作为备份)获得历史价格，用雅虎获得实时价格。</p><p id="aac8" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><em class="lk">扩展考虑— </em> Quandl免费API限制为2K调用/ 10分钟和50K /天，非常慷慨。雅虎自己的未来是未知的，所以我不认为它是严肃app的正确选择。要么奇迹般地很快出现一场免费、轻松访问金融数据的开源运动，要么我不得不支付过高的费用来获得访问权。说真的，访问这些数据是瓶颈，也是最令人沮丧的。</p><h2 id="99fa" class="ko kp hu bd kq kr ks kt ku kv kw kx ky ka kz la lb ke lc ld le ki lf lg lh li dt translated"><strong class="ak"> Django，AWS —开发和部署</strong></h2><p id="d664" class="pw-post-body-paragraph jp jq hu jr b js lo ju jv jw lp jy jz ka lq kc kd ke lr kg kh ki ls kk kl km hn dt translated">感谢开源社区和亚马逊，在这一节我只有好话要说。Python让生活变得简单。我使用了标准的django+gunicorn+nginx设置。为了异步发送消息，我广泛使用了celery + rabbitMQ。芹菜很方便。我也尝试过使用亚马逊SQS，但是在我第一次尝试时，它并不可靠，所以我切换回rabbitMQ作为消息代理。我需要SSL与Slack API通信，所以我使用了Let's Encrypt，它提供了免费的SSL认证。它的安装速度非常快，令人惊讶的是，它根本不需要任何成本。此外，AWS免费提供服务器(EC2)和数据库(RDS)服务。</p><p id="e1bc" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><em class="lk">扩展考虑事项— </em>基础设施将需要扩展。意味着把$$$给AWS。我可以在EC2实例上产生更多的芹菜工人，使用AWS自动伸缩、负载平衡等。不过AWS既方便又便宜。</p><h2 id="0c46" class="ko kp hu bd kq kr ks kt ku kv kw kx ky ka kz la lb ke lc ld le ki lf lg lh li dt translated"><strong class="ak">发布项目想法</strong></h2><p id="6854" class="pw-post-body-paragraph jp jq hu jr b js lo ju jv jw lp jy jz ka lq kc kd ke lr kg kh ki ls kk kl km hn dt translated">这是我在<a class="ae kn" href="http://joinef.com/" rel="noopener ugc nofollow" target="_blank"> Entrepreneur First </a>创建公司时开发的。这个项目是在对对话机器人进行技术研究时得到的灵感。对于手头的任务来说，这是完全没有必要的，但是作为一个喜欢把碎片拼在一起做一些很酷的东西的软件工程师，我就是控制不住自己。建立一家公司需要更具体的业务和市场发展，我也最终没有追求这个空间(哎呀！).我意识到构建生产级机器人并不难。你不用去处理错综复杂的前端开发(没有HTML、CSS、JS；呵呵)。</p><p id="60f9" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">你可以在<a class="ae kn" href="https://github.com/shaileshahuja/tickerbot" rel="noopener ugc nofollow" target="_blank"> Github </a>查看代码。欢迎提问、建议、评论或投稿:)</p><div class="ir is fm fo it iu"><a href="https://slack.com/oauth/authorize?scope=bot&amp;client_id=85403973076.103667105557" rel="noopener  ugc nofollow" target="_blank"><div class="iv ab ej"><div class="iw ab ix cl cj iy"><h2 class="bd hv fv z el iz eo ep ja er et ht dt translated">更新:添加到时差</h2><div class="jb l"><h3 class="bd b fv z el iz eo ep ja er et ek translated">Tickerbot现已在Slack应用目录上上线。试试吧！</h3></div><div class="jc l"><p class="bd b gc z el iz eo ep ja er et ek translated">slack.com</p></div></div></div></a></div></div></div>    
</body>
</html>