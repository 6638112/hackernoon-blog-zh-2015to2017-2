<html>
<head>
<title>How to Build SaaS Using Docker-based Tools — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用基于Docker的工具构建SaaS—第1部分</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-build-saas-using-docker-based-tools-part-1-ceb1a96e0907?source=collection_archive---------12-----------------------#2017-06-28">https://medium.com/hackernoon/how-to-build-saas-using-docker-based-tools-part-1-ceb1a96e0907?source=collection_archive---------12-----------------------#2017-06-28</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/533668b1430ee21c28ceb5b7e35404af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I-vXSJj9y5A6kfAevnXYvg.jpeg"/></div></div></figure><p id="866c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你曾经考虑过使用<a class="ae ka" href="https://hackernoon.com/tagged/docker" rel="noopener ugc nofollow" target="_blank"> Docker </a>来构建<a class="ae ka" href="https://hackernoon.com/tagged/saas" rel="noopener ugc nofollow" target="_blank"> SaaS </a>，你可能会问自己是想从头开始还是利用软件(基本上是基础设施编排)来降低复杂性和简化样板任务。我也想到了这一点，并决定尝试第二个选项，因为这更接近于开发人员/devops。当然，相反，它强加了一些限制，但是对于MVP构建的快速开始，这是首选。</p><h2 id="f0bd" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">从哪里开始？</h2><p id="5c6f" class="pw-post-body-paragraph jc jd hu je b jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv la jx jy jz hn dt translated">当我选择使用特殊的库来简化我作为开发人员的生活时，我看了其中的几个，但最终选择了2个——Docker Cloud和Kontena。它们的定位有所不同，但总的来说都可以处理类似的任务—创建和管理节点集群/网格、堆栈、服务、管理Docker映像存储库、网络和其他协调任务。</p><p id="d9a1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">事实上，将Docker Swarm与Kontena平台以及Docker Cloud与Kontena Cloud进行比较是正确的，但我将对两者进行比较，包括每个方面，甚至是云选项和UI。需要提到的是，你可以完全免费尝试这两种方法。</p><h1 id="37d1" class="lb kc hu bd kd lc ld le kh lf lg lh kl li lj lk ko ll lm ln kr lo lp lq ku lr dt translated">Docker云</h1><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ls"><img src="../Images/66395f9c2208d4e3c2d4441a197c7451.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ynfkp3_uggsVeeIuuw5_fg.png"/></div></div></figure><p id="f15f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">老实说，这是我第一次尝试，我投降了。</p><p id="7afe" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先，如果您要构建基于Docker的SaaS，您需要具备快速、简单的集群和节点供应能力。Docker云有两种模式——标准和群。在标准模式下，您将节点、服务和应用作为整个基础设施的独立部分进行工作，而在swarm模式下，您将利用Docker swarm方法，因此您将拥有非常坚实的基础设施，将所有节点结合到一个具有REST API的统一接口中。</p><p id="74c8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Docker Cloud目前为您的节点提供5个云提供商的支持:AWS、Digital Ocean、Microsoft Azure、SoftLayer和Packet。我决定用AWS。为了连接Docker Cloud和AWS，你需要在Amazon IAM上设置一些东西——创建一个角色和内联策略，指定你可能需要的权限——并在Docker Cloud设置页面上粘贴生成的角色ARN。然后，您应该能够直接从Web UI或利用CLI供应群集群(如果您处于群模式)或标准节点集群。</p><h2 id="4d00" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">看起来很酷，但是有什么问题吗？</h2><p id="1fb3" class="pw-post-body-paragraph jc jd hu je b jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv la jx jy jz hn dt translated">第一件让我沮丧的事情是发现蜂群模式还没有REST API。因此，理论上，我可以启动swarm cluster，但它不会有用，因为我无法从SaaS网络应用程序访问它。好的，没问题，你可以使用成熟的标准模式—【https://docs.docker.com/apidocs/docker-cloud/】T4。</p><p id="e2f2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">第二个是连接AWS的混乱:正如我上面描述的，你需要按照这个指南创建一个角色和一个策略—<a class="ae ka" href="https://docs.docker.com/docker-cloud/cloud-swarm/link-aws-swarm/" rel="noopener ugc nofollow" target="_blank">https://docs . docker . com/docker-cloud/cloud-swarm/link-AWS-swarm/</a>(看起来很复杂，对吧？).你的政策文件应该以这个为基础——https://docs.docker.com/docker-for-aws/iam-permissions/<a class="ae ka" href="https://docs.docker.com/docker-for-aws/iam-permissions/" rel="noopener ugc nofollow" target="_blank"/>——我就是这么做的。好了，现在我已经得到了角色ARN，并将其粘贴到Docker Cloud上——设置完成。但是，当我试图创建一个节点集群时，它就是不起作用。这是我在新节点群集“时间线”选项卡下看到的内容(显示一些日志):</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="782d" class="kb kc hu ly b fv mc md l me mf">AWS returned an error: unauthorized operation. Please check that the AWS credentials you have provided have enough permissions</span></pre><p id="9bba" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">相信我，我已经尝试了很多很多次:终止集群并创建新的集群，选择不同的AWS区域，尝试重新创建角色和策略，通过完全重新定义或添加/删除几个具体权限来编辑策略，浏览Docker云论坛，再次重复所有这些—运气不好。</p><p id="d61a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">第三个令人沮丧的事情是社区沉默甚至社区缺席(除了一些热心者)。貌似Docker云团队没有参与官方论坛的讨论。只要看看下面这些话题——它们看起来死气沉沉。</p><div class="mg mh fm fo mi mj"><a href="https://forums.docker.com/t/cannot-create-node-cluster-on-aws-unauthorized-operation/21706" rel="noopener  ugc nofollow" target="_blank"><div class="mk ab ej"><div class="ml ab mm cl cj mn"><h2 class="bd hv fv z el mo eo ep mp er et ht dt translated">无法在AWS上创建节点集群-未经授权的操作</h2><div class="mq l"><h3 class="bd b fv z el mo eo ep mp er et ek translated">嗨，我已经将Docker帐户连接到AWS，就像这里描述的https://docs.docker.com/docker-cloud/infrastructure…</h3></div><div class="mr l"><p class="bd b gc z el mo eo ep mp er et ek translated">forums.docker.com</p></div></div></div></a></div><div class="mg mh fm fo mi mj"><a href="https://forums.docker.com/t/access-gui-created-swarm-via-api/29363" rel="noopener  ugc nofollow" target="_blank"><div class="mk ab ej"><div class="ml ab mm cl cj mn"><h2 class="bd hv fv z el mo eo ep mp er et ht dt translated">通过API访问GUI创建的swarm</h2><div class="mq l"><h3 class="bd b fv z el mo eo ep mp er et ek translated">我使用docker cloud UI成功创建了一个swarm。它被部署到AWS，我可以通过客户端在上面运行东西…</h3></div><div class="mr l"><p class="bd b gc z el mo eo ep mp er et ek translated">forums.docker.com</p></div></div><div class="ms l"><div class="mt l mu mv mw ms mx ja mj"/></div></div></a></div><h2 id="2dfe" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">下一位，请！</h2><p id="013b" class="pw-post-body-paragraph jc jd hu je b jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv la jx jy jz hn dt translated">正如我在文章开头提到的——我投降了……并决定关注Kontena，我将在第2部分回顾它。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="my mz l"/></div></figure><p id="7e02" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">总的来说，Docker Cloud看起来非常有前途，是构建基础设施或基于微服务的SaaS的酷工具，我相信他们可以很快成为这方面的领导者。但是这些日子Docker公司的快速增长，反而妨碍了他们做好几件事。依我拙见。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="na mz l"/></div></figure></div></div>    
</body>
</html>