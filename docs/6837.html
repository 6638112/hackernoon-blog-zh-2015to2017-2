<html>
<head>
<title>Swift 4.0 Migration — ERROR..!! ERROR..!!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift 4.0迁移—错误..！！错误..！！</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/swift-4-0-migration-error-error-8fbf13c2ec2?source=collection_archive---------6-----------------------#2017-10-06">https://medium.com/hackernoon/swift-4-0-migration-error-error-8fbf13c2ec2?source=collection_archive---------6-----------------------#2017-10-06</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="3253" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">担心的..？今天不行..😎</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/91b9e60d2b23e078b433c0c9b4695400.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ErzzDdG4WDc5e4kz2lYSRg.jpeg"/></div></div></figure><p id="83e8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">既然Swift 4已经在这里，我们迟早要迁移我们的代码。</p><p id="1f8c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">早些时候，当雨燕3号抵达⚔️.时，迁移似乎是一项单调乏味的任务<em class="kb"> Swift 3 </em>包含了一些非常重大的API变化。当然，<em class="kb"> Apple </em>为我们提供了migrator工具来减少人工开销，但正如我们所说的，无论我们如何努力，总会留下一些漏洞。即使在swift migrator工具完成了大部分工作之后，开发人员自己仍有许多工作要做😰。</p><p id="2f4a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在我们又要处理另一个这样的迁移🤢。但是不要担心，这次没有以前那么难了。现有的API并没有太多大的变化。虽然，一些新的API肯定会添加到框架中，但这不是我们现在关心的。我们目前唯一关注的是，我们需要在使用更改后的API的代码中进行哪些更改。</p></div><div class="ab cl kc kd hc ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hn ho hp hq hr"><h1 id="7b37" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">我们开始吧..！！！🚀</h1><p id="8397" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">让我们看看在将您的代码迁移到Swift 4.0时可能出现的主要错误和警告。</p><h2 id="822d" class="lm kk hu bd kl ln lo lp kp lq lr ls kt jc lt lu kx jg lv lw lb jk lx ly lf lz dt translated">1.@objc推断</h2><blockquote class="ma mb mc"><p id="2f05" class="ir is kb it b iu iv iw ix iy iz ja jb md jd je jf me jh ji jj mf jl jm jn jo hn dt translated">在Swift 4之前，编译器将一些<strong class="it hv"> Swift声明自动提供给Objective-C </strong>。例如，如果从NSObject派生出一个子类，编译器会为这类中的所有方法创建Objective-C入口点。该机制被称为@objc推理。</p><p id="2d87" class="ir is kb it b iu iv iw ix iy iz ja jb md jd je jf me jh ji jj mf jl jm jn jo hn dt translated"><strong class="it hv">在Swift 4中，这种自动@objc推理被弃用</strong>,因为生成所有这些Objective-C入口点的成本很高。当“Swift 3 @objc推论”设置为“开”时，允许旧代码工作。但是，它会显示需要解决的弃用警告。建议“修复”这些警告，并将<strong class="it hv">设置切换为“默认”</strong>，这是新Swift项目的默认设置。</p></blockquote><p id="158e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我面临的问题是关于<strong class="it hv"> <em class="kb">选择器。</em>😐</strong></p><blockquote class="ma mb mc"><p id="7346" class="ir is kb it b iu iv iw ix iy iz ja jb md jd je jf me jh ji jj mf jl jm jn jo hn dt translated">选择器表达式允许您访问用于引用Objective-C中的方法或属性的getter或setter的选择器。</p><p id="c196" class="ir is kb it b iu iv iw ix iy iz ja jb md jd je jf me jh ji jj mf jl jm jn jo hn dt translated"><em class="hu">方法名</em>和<em class="hu">属性名</em>必须是对Objective-C运行时可用的方法或属性的引用。</p></blockquote><p id="2ebf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">简而言之，<em class="kb"> Swift </em>中的<em class="kb">选择器</em>与<em class="kb">Objective-C</em>API交互，因此需要一个<em class="kb"> @objc </em>推理。早期它是由编译器自动处理的。但是在<em class="kb"> Swift 4 </em>中，需要明确定义。</p><p id="2cd6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="kb">在Swift 3.2 </em> </strong></p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mg"><img src="../Images/e6676530b4be2313605dc5853164a457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0xxJTm76izzexwpmSjXwgg.png"/></div></div></figure><p id="f018" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Swift 4.0中的<strong class="it hv"><em class="kb">—使用Swift编译器建议的修复程序</em>😬它会将@objc推理添加到选择器方法中。T41】</strong></p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="mh mi l"/></div></figure><h2 id="ad0e" class="lm kk hu bd kl ln lo lp kp lq lr ls kt jc lt lu kx jg lv lw lb jk lx ly lf lz dt translated">2.扩展中的声明还不能被覆盖</h2><p id="abef" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">在<em class="kb"> Swift 3 </em>中，对于来自<em class="kb">类</em> <em class="kb">扩展</em>或在其中的方法重写没有限制。但是在<em class="kb"> Swift 4 </em>中，你就是不能<strong class="it hv"> <em class="kb">还不能</em> </strong>(可能在不久的将来会有)。</p><blockquote class="ma mb mc"><p id="8884" class="ir is kb it b iu iv iw ix iy iz ja jb md jd je jf me jh ji jj mf jl jm jn jo hn dt translated"><em class="hu">扩展</em>为现有的类、结构、枚举或协议类型添加新的功能。这包括扩展您无法访问原始源代码的类型的能力</p><p id="43f5" class="ir is kb it b iu iv iw ix iy iz ja jb md jd je jf me jh ji jj mf jl jm jn jo hn dt translated">扩展可以向类型添加新功能，但不能重写现有功能。</p></blockquote><p id="0518" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在迁移到<em class="kb"> Swift 4 </em>时，您会得到<strong class="it hv"> <em class="kb">编译时错误</em> </strong>🙈如果您使用了扩展来重写方法。</p><p id="aed9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="kb">在Swift 3.2 </em> </strong></p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mj"><img src="../Images/d17dd394296ffa539f34bbfa04d53e0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iJBHtavfrUP01arBlBy2Ww.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek"><strong class="bd mo">isValid() is defined in BaseCell’s extension</strong></figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mg"><img src="../Images/8332bc61af2b2a3184f8519cb40bf341.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pFf6p08_PVKYb3MetoydDg.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek"><strong class="bd mo"><em class="mp">isBlank() is defined in BaseCell original source code and overridden in SampleCell’s extension</em></strong></figcaption></figure><p id="1835" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="kb">在Swift 4.0中——只需将被覆盖方法的定义移到原始类源代码中🎯</em> </strong></p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="mh mi l"/></div></figure><h2 id="e45b" class="lm kk hu bd kl ln lo lp kp lq lr ls kt jc lt lu kx jg lv lw lb jk lx ly lf lz dt translated">3.非属性字符串属性的键名</h2><p id="292a" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">在<em class="kb"> NSAttributedString </em> API中引入了一个非常直接的变化——与<em class="kb">属性化字符串</em>的<em class="kb">属性</em>相对应的<strong class="it hv"> <em class="kb">键名</em> </strong>现在将使用<em class="kb">枚举</em><strong class="it hv"><em class="kb">nsattributed stringkey来引用。</em> </strong></p><p id="18df" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="kb">举例:</em> </strong></p><ol class=""><li id="1022" class="mq mr hu it b iu iv iy iz jc ms jg mt jk mu jo mv mw mx my dt translated"><em class="kb"> NSFontAttributeName </em>现在将被称为<em class="kb">nsattributedstringkey . font</em></li><li id="b6a3" class="mq mr hu it b iu mz iy na jc nb jg nc jk nd jo mv mw mx my dt translated"><em class="kb">NSForegroundColorAttributeName</em>现在将被称为<em class="kb">nsattributedstringkey . foregroundcolor</em>等<em class="kb">。</em></li></ol><p id="84a2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="kb">在Swift 3.2 </em> </strong></p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff ne"><img src="../Images/6c8ff56f498d7e8989868687eae91878.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aHPNqzSLun3J_rkmrFU8ww.png"/></div></div></figure><p id="2f64" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Swift 4.0中的<strong class="it hv"><em class="kb">—只需使用Swift编译器建议的修复程序，它将为您完成所有工作</em>😅</strong></p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="mh mi l"/></div></figure></div><div class="ab cl kc kd hc ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hn ho hp hq hr"><h1 id="461f" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">促销</h1><p id="5c62" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">别忘了阅读我的其他文章:</p><ol class=""><li id="e0b2" class="mq mr hu it b iu iv iy iz jc ms jg mt jk mu jo mv mw mx my dt translated"><a class="ae nf" href="https://medium.freecodecamp.org/ios-10-notifications-inshorts-all-in-one-ad727e03983a" rel="noopener ugc nofollow" target="_blank">你一直想知道的关于iOS中通知的一切</a></li><li id="78a9" class="mq mr hu it b iu mz iy na jc nb jg nc jk nd jo mv mw mx my dt translated"><a class="ae nf" rel="noopener" href="/@p.gpt10/drag-it-drop-it-in-collection-table-ios-11-6bd28795b313">拖动&amp;放入收藏&amp;表— iOS 11 </a></li><li id="b604" class="mq mr hu it b iu mz iy na jc nb jg nc jk nd jo mv mw mx my dt translated"><a class="ae nf" href="https://hackernoon.com/everything-about-codable-in-swift-4-97d0e18a2999" rel="noopener ugc nofollow" target="_blank">Swift 4中关于可编码的一切</a></li><li id="b8a5" class="mq mr hu it b iu mz iy na jc nb jg nc jk nd jo mv mw mx my dt translated"><a class="ae nf" href="https://hackernoon.com/color-it-with-gradients-ios-a4b374c3c79f" rel="noopener ugc nofollow" target="_blank">用渐变给它上色——iOS</a></li><li id="99f2" class="mq mr hu it b iu mz iy na jc nb jg nc jk nd jo mv mw mx my dt translated"><a class="ae nf" href="https://hackernoon.com/app-extensions-and-today-extensions-widget-in-ios-10-e2d9fd9957a8" rel="noopener ugc nofollow" target="_blank">关于iOS 10中的今日扩展(Widget)你需要知道的一切</a></li><li id="7841" class="mq mr hu it b iu mz iy na jc nb jg nc jk nd jo mv mw mx my dt translated"><a class="ae nf" href="https://hackernoon.com/uicollectionviewcell-selection-made-easy-41dae148379d" rel="noopener ugc nofollow" target="_blank">uicollectionview单元格选择变得简单..！！</a></li></ol></div><div class="ab cl kc kd hc ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hn ho hp hq hr"><p id="d58b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">随着迁移的深入，我将更新文章。更多关于<strong class="it hv"> <em class="kb">【雨燕4】</em></strong>的信息，敬请关注本空间。</p><p id="4bb9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你有任何疑问，请随时发表评论。🙂🙃</p></div></div>    
</body>
</html>