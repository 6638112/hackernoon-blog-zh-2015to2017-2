<html>
<head>
<title>Drawing on the screen — Introduction to Creative Coding Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在屏幕上绘画——创造性编码介绍之二</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/introduction-to-creative-coding-part-2-d869832d9ffb?source=collection_archive---------3-----------------------#2016-12-30">https://medium.com/hackernoon/introduction-to-creative-coding-part-2-d869832d9ffb?source=collection_archive---------3-----------------------#2016-12-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="13db" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">用Javascript绘制和创建动画</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/c8c4f6e5434c9f0a11f1123c9cae2cc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D8oNfdKrnMx28R4fSzYHcg.png"/></div></div></figure><p id="7ec5" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这是《创造性编码基础》的第二部分——我一年来每天学习编码的指南。</p><p id="44f6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在这里下载你需要跟随龙的文件:【https://github.com/GeorgeGally/creative_coding】</p><p id="101c" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">所以<a class="ae ks" rel="noopener" href="/@radarboy3000/creative-coding-basics-4d623af1c647#.ptbiutpfh">上一篇</a>有点无聊。只是在创作一幅油画。所以让我们做些酷的东西...</p><p id="1c32" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">一旦我们创建了一个画布，我们想开始在它上面画画。我们这样做，就像在处理中一样，使用绘制循环:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="65fd" class="ky kz hu ku b fv la lb l lc ld">var ctx = createCanvas(“canvas1”);</span><span id="df27" class="ky kz hu ku b fv le lb l lc ld">function draw(){<br/>  <em class="kr">// do some stuff</em><br/>}</span></pre><p id="bef6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">像处理，绘图功能，所有的行动发生。这实际上只是一个花哨的requestAnimationFrame调用，它一直在循环，并在窗口中寻找绘制函数。老实说，你真的甚至不需要知道这里发生了什么，除了这以60fps重复(并且可以通过设置全局变量<em class="kr"> frameRate </em>来调整，例如:<em class="kr">frame rate = 120；</em>)。</p><p id="34d5" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="kr">如前所述，我在编码中使用的许多东西都是基于</em> <a class="ae ks" href="https://processing.org/" rel="noopener ugc nofollow" target="_blank"> <em class="kr">处理</em> </a> <em class="kr">的做事方式，通常只是稍微修改一下，以适合我喜欢的工作方式。最棒的是，随着你的进步和库的建立，语法越来越容易记住，你可以更快地找到代码中更有趣的地方。</em></p><p id="5d07" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">好了，让我们开始玩吧。这里有一个基本的html文件，我们可以继续使用它作为模板:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="a17a" class="ky kz hu ku b fv la lb l lc ld">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;</span><span id="9047" class="ky kz hu ku b fv le lb l lc ld">&lt;meta charset="utf-8"&gt;<br/>&lt;title&gt;mouseTest&lt;/title&gt;</span><span id="3bcb" class="ky kz hu ku b fv le lb l lc ld">&lt;link rel="stylesheet" href="css/<a class="ae ks" href="https://raw.githubusercontent.com/GeorgeGally/creative_coding/master/css/reset.css" rel="noopener ugc nofollow" target="_blank">reset.css</a>" type="text/css" media="screen" /&gt;<br/>&lt;link rel="stylesheet" href="css/<a class="ae ks" href="https://raw.githubusercontent.com/GeorgeGally/creative_coding/master/css/style.css" rel="noopener ugc nofollow" target="_blank">style.css</a>" type="text/css" media="screen" /&gt;</span><span id="1ff2" class="ky kz hu ku b fv le lb l lc ld">&lt;script language="javascript" src="js/<a class="ae ks" href="https://raw.githubusercontent.com/GeorgeGally/creative_coding/master/js/canvas.js" rel="noopener ugc nofollow" target="_blank">canvas.js</a>"&gt;&lt;/script&gt;<br/>&lt;script language="javascript" src="js/<a class="ae ks" href="https://raw.githubusercontent.com/GeorgeGally/creative_coding/master/js/creative_coding.js" rel="noopener ugc nofollow" target="_blank">creative_coding.js</a>"&gt;&lt;/script&gt;</span><span id="2eaa" class="ky kz hu ku b fv le lb l lc ld">&lt;/head&gt;</span><span id="70a9" class="ky kz hu ku b fv le lb l lc ld">&lt;body&gt;</span><span id="46aa" class="ky kz hu ku b fv le lb l lc ld">&lt;script type="text/javascript"&gt;</span><span id="9268" class="ky kz hu ku b fv le lb l lc ld">var ctx = createCanvas(“canvas1”);</span><span id="74b1" class="ky kz hu ku b fv le lb l lc ld">function draw(){<br/>  console.log("mouseX:" + mouseX + "mouseY: " + mouseY);<br/>}</span><span id="4f02" class="ky kz hu ku b fv le lb l lc ld">&lt;/script&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="e928" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这里没有什么特别的，一个标准的HTML5文档设置。就像我到目前为止向您展示的所有内容一样，您再也不需要编写这些代码了。但是让我快速解释一下(然后进入有趣的部分)…</p><p id="901c" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">让我们在您的浏览器中查看我们的开发人员工具控制台。从Chrome go的下拉菜单中:查看-&gt;开发者-&gt;Javascript控制台(或者mac上的Cmd-三角乐队或者PC上的Control-Alt-I)，弹出我们的Javascript控制台，大概是这样的:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff lf"><img src="../Images/6099aa2645d068249a099167796a747e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y4mZyIL53J3SsxaMt_l3tg.png"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Press Cmd-Alt-i for developer tools, and you should seeing the log of your mouse position.</figcaption></figure><p id="3aed" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">控制台是你创造性编码中最好的朋友，它会给你错误所在的行号提供线索。</p><p id="b07f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">所以在上面的代码中，draw函数不断地执行，我们可以看到我们的鼠标位置。</p><p id="90f3" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">鼠标位置由一些更全局的变量定义:<em class="kr"> mouseX </em>和<em class="kr"> mouseY </em>，它们来自一个事件监听器。但是现在，甚至不需要担心那个。</p><p id="d059" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">现在让我们开始画画吧！把我们的绘图函数改成这样…</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="dc9b" class="ky kz hu ku b fv la lb l lc ld">function draw(){</span><span id="7b04" class="ky kz hu ku b fv le lb l lc ld"><em class="kr">  // syntax: fillStyle can be colour, <br/>  // or hash: ctx.fillStyle = "#cc0000"; <br/>  // or an rgb value: ctx.fillStyle = rgb(red, green, blue);<br/>  // red, green and blue values are between 0 and 255</em></span><span id="cfb1" class="ky kz hu ku b fv le lb l lc ld">  ctx.fillStyle = "red";</span><span id="efca" class="ky kz hu ku b fv le lb l lc ld">  <em class="kr">// syntax: ctx.fillEllipse(x, y, circle_width, circle_height)</em><br/>  ctx.fillEllipse(mouseX, mouseY, 20, 20);</span><span id="b810" class="ky kz hu ku b fv le lb l lc ld">}</span></pre><p id="785a" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">你应该能画出这样的东西:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff lk"><img src="../Images/aff773db06f07e00290365fb1a77dfe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ROLG8RwMm2GTZ7FGfeYonw.png"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Look mom, it’s art .Drawing with mouse position.</figcaption></figure><p id="52a2" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">太棒了。</p><p id="d138" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">CTX . filllellipse在屏幕上的某个位置画一个特定大小的圆——在本例中是在位置<em class="kr"> mouseX </em>和<em class="kr"> mouseY </em>处，大小为20。(请记住第1部分— ctx只是一个引用我们画布的变量)。</p><p id="bc1d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="kr"> ctx.fillStyle </em>添加一种颜色。你可以使用任何标准的html格式，比如<em class="kr"> #ff0000 </em>或者<em class="kr"> "red" </em>。或者特殊功能:<em class="kr"> rgb(红、绿、蓝)</em>；</p><p id="9e2b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">RGB值从0到255。我们还可以使用rgba为颜色设置一个从0到1的alpha(或透明)值:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="cc71" class="ky kz hu ku b fv la lb l lc ld"><em class="kr">// syntax: ctx.fillStyle = rgba(red, green, blue, alpha);<br/>// alpha is a value between 0 and 1<br/></em>ctx.fillStyle = rgba(255, 0, 0, 0.1);</span></pre><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff ll"><img src="../Images/af3f3f88c09e47164c2206d37c8d429a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SDd5M4WuUMmJhe9eIPuwUA.png"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Using rgba(255,0,0, 0.1) we’d get something like this. But is it art?</figcaption></figure><p id="c2eb" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">让我们画一个实心的正方形来代替:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="5b94" class="ky kz hu ku b fv la lb l lc ld">ctx.fillStyle = “#00aeef”;<br/><em class="kr">// syntax: ctx.fillRect(x, y, rect_width, rect_height)</em><br/>ctx.fillRect(mouseX, mouseY, 20, 20);</span></pre><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff lf"><img src="../Images/ab28bf0111764c8254c6db3ed60db79a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lkeD_7BF7fsB2nMgsty_Jg.png"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Drawing squares, I’m using fill of ctx.fillStyle = “#00aeef”;</figcaption></figure><p id="e74d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果我们只想在按下鼠标的时候画画呢？我也为你做了艰苦的工作...我们有一个名为<em class="kr"> mousePressed </em> …的全局变量，现在您需要知道的只是用一个<em class="kr"> if语句</em>测试条件，如下所示:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="8138" class="ky kz hu ku b fv la lb l lc ld">if(something) {<br/> <em class="kr">// do something</em><br/>}</span></pre><p id="e61b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">所以我们的draw函数应该修改成这样:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="3118" class="ky kz hu ku b fv la lb l lc ld">function draw(){</span><span id="a856" class="ky kz hu ku b fv le lb l lc ld"><strong class="ku hv">if (mousePressed) {</strong><br/>  ctx.fillStyle = "#00aeef";<br/>  ctx.fillRect(mouseX, mouseY, 20, 20);<br/>  <strong class="ku hv">}</strong><br/>}</span></pre><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff lm"><img src="../Images/594a9c2bfea2b6c8c9cf2d18e0450667.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N_vE4UVfSoVUGZexpzZu-g.png"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Woop woop. We can draw.</figcaption></figure><p id="08f3" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们也可以用下面的语法绘制只有轮廓的圆和正方形:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="d1c6" class="ky kz hu ku b fv la lb l lc ld"><em class="kr">// setup stroke colour</em><br/>ctx.strokeStyle = rgb(255, 0, 0);<br/><em class="kr">// draw stroked rectangle</em><br/>ctx.strokeRect(mouseX, mouseY, 20, 20);<br/><em class="kr">// draw stroked circle</em><br/>ctx.strokeEllipse(mouseX, mouseY, 20, 20);</span></pre><p id="70fb" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们会得到这样的结果:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff lf"><img src="../Images/dada842c69128571d9f3be2092c671ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RaWwVX3Mp3gnNuS3BgZgbg.png"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Stroked circles and rectangles</figcaption></figure><p id="a13f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">所以你可能会注意到一些恼人的事情——圆形和矩形从它们的中心点延伸出来的方式不同。解决这个问题的两个简单方法…</p><p id="8f18" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">减去矩形宽度和高度的一半:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="b202" class="ky kz hu ku b fv la lb l lc ld"><em class="kr">// setup stroke colour</em><br/>ctx.strokeStyle = rgb(255, 255, 0);<br/><em class="kr">// draw stroked rectangle starting from half it's width and height</em><br/><strong class="ku hv">ctx.strokeRect(mouseX-10, mouseY-10, 20, 20);</strong></span></pre><p id="9c83" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">…或者通过使用我创建的函数:<em class="kr"> centreFillRect() </em>或<em class="kr">centerstrokerect()</em>(记得我提到过我的规则，如果我需要做一件事三次，我就需要创建一个函数，嗯，就是这种情况……)</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="ea6d" class="ky kz hu ku b fv la lb l lc ld"><em class="kr">// setup stroke colour</em><br/>ctx.strokeStyle = rgb(255, 255, 0);<br/>/<em class="kr">/ draw stroked rectangle starting from half it's width and height</em><br/><strong class="ku hv">ctx.centreStrokeRect(mouseX, mouseY, 20, 20);</strong></span></pre><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff ln"><img src="../Images/f2b22b6d7f767fcf51c59d41a3873a8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c48vS89ePHoujBtzqnBhDA.png"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Ok, that’s better. Circles inside squares</figcaption></figure><p id="d4a8" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们也可以用for来调整线条的宽度，例如<em class="kr">CTX . line width = 4；</em></p><p id="86d4" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">好的，所以这些画都很好。但是，让我们变得更有想象力，让机器来做这项工作…</p><p id="c91d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">所以让我们做一个球。首先我们需要添加一些变量来保存球的位置。让我们把球放在页面的中间(记住，我们的canvas.js让我们可以访问页面的宽度和高度——或者是宽度<em class="kr">和高度</em>或者是高度或者是宽度<em class="kr">和高度</em>因此:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="1ede" class="ky kz hu ku b fv la lb l lc ld">var ball_x = w/2;<br/>var ball_y = h/2;</span></pre><p id="3e00" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">让我们给球一个随机的速度。我们这样调用一个<em class="kr"> random() </em>函数:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="d48e" class="ky kz hu ku b fv la lb l lc ld"><em class="kr">// syntax: random(min_value, max_value)</em> <br/>var speed_x = random(-5, 5); <br/>var speed_y = random(-5, 5);</span></pre><p id="c4f0" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们也可以用<em class="kr"> randomInt() </em>来求一个随机整数(整数)，如下所示:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="3272" class="ky kz hu ku b fv la lb l lc ld">// syntax: randomInt(min_value, max_value)<br/>var speed_x = randomInt(-5, 5);</span></pre><p id="31bf" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">要移动我们的球，我们需要将它的当前位置(球x和球y)与它的速度(速度x和速度y)相加，就像这样:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="f933" class="ky kz hu ku b fv la lb l lc ld">ball_x = ball_x + speed_x;<br/>ball_y = ball_y + speed_y;</span></pre><p id="d4eb" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这有一个捷径，当你添加一些东西到它本身的时候:<em class="kr"> += </em></p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="f680" class="ky kz hu ku b fv la lb l lc ld">ball_x += speed_x;<br/>ball_y += speed_y;</span></pre><p id="60ae" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="kr">同样，从自身减去某个东西(-=)以及乘以(*=)再除以自身(/=)也有一个捷径。</em></p><p id="b3d6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">好了，让我们把它们放在一起:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="c39a" class="ky kz hu ku b fv la lb l lc ld">var ctx = createCanvas("canvas1");</span><span id="89de" class="ky kz hu ku b fv le lb l lc ld">var ball_size = 20;<br/>var ball_x = width/2;<br/>var ball_x = height/2;<br/>var speed_x = randomInt(-5, 5);<br/>var speed_y = randomInt(-5, 5);</span><span id="5d33" class="ky kz hu ku b fv le lb l lc ld">function draw(){</span><span id="525d" class="ky kz hu ku b fv le lb l lc ld">  ball_x += speed_x;<br/>  ball_y += speed_y;</span><span id="ec3c" class="ky kz hu ku b fv le lb l lc ld">  ctx.fillStyle = rgb(255,0,0);<br/>  ctx.fillEllipse(x, y, ball_size, ball_size);</span><span id="f60a" class="ky kz hu ku b fv le lb l lc ld">} </span></pre><p id="c7ba" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">太棒了…但不是…</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff ll"><img src="../Images/1c62225e955460fc4d7024886eca4331.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yp1OEbahjPJsvoGMI9xIFg.png"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Where’d the ball go?</figcaption></figure><p id="801b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">是的，球离开边缘消失了。</p><p id="ffd6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">让我们用一个<em class="kr"> if语句</em>来解决这个问题。</p><p id="14a5" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果你用简单的英语大声说出代码，通常会很容易:“如果球越过了页面的侧面或底部，让我们再次将球放在页面的顶部或左侧……如果球不到页面的顶部或左侧(即是ball_x &lt; 0还是ball_y &lt; 0)让我们把它放回右边还是底部……"</p><p id="159c" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在代码中，我们会这样做:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="5f62" class="ky kz hu ku b fv la lb l lc ld">if (ball_x &lt; 0) {<br/> ball_x = w;<br/>}</span><span id="14b6" class="ky kz hu ku b fv le lb l lc ld">if (ball_y &lt; 0) {<br/> ball_y = h;<br/>}</span><span id="ecc5" class="ky kz hu ku b fv le lb l lc ld">if (ball_x &gt; w) {<br/> ball_x = 0;<br/>}</span><span id="7488" class="ky kz hu ku b fv le lb l lc ld">if (ball_y &gt; h) {<br/> ball_y = 0;<br/>}</span></pre><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff lo"><img src="../Images/88190985bb816ddb76a4b137bed0faf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*avJnA4mE86YSWT_C3fJCqA.png"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Look ma, robot stripes!</figcaption></figure><p id="5f76" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">太棒了。</p><p id="e719" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">现在，让球在边缘反弹……我们这样做，只是让球从另一边运动，我们只是逆转它的速度……我们这样做只是把速度乘以-1(因为，你知道，数学)。</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="26fc" class="ky kz hu ku b fv la lb l lc ld"><em class="kr">// multiply speed by negative number to change direction</em><br/>speed_x = speed_x * -1;</span></pre><p id="8062" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们也可以使用简写*=</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="7aa4" class="ky kz hu ku b fv la lb l lc ld">if (ball_x &lt; 0) {<br/>  <em class="kr">// same as speed_x = speed_x *-1</em><br/>  speed_x *= -1;<br/> }</span><span id="5de0" class="ky kz hu ku b fv le lb l lc ld">if (ball_x &gt; w) {<br/>  <em class="kr">// same as speed_x = speed_x *-1</em><br/>  speed_x *= -1;<br/> }</span><span id="d283" class="ky kz hu ku b fv le lb l lc ld"><em class="kr">// then do same for ball_y...</em></span></pre><p id="0ccf" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">但是即使这样也有点重复…所以让我们通过使用<em class="kr">或</em>来简化，在代码中是这样写的:||</p><p id="bbdc" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">所以我们可以写:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="27bc" class="ky kz hu ku b fv la lb l lc ld"><em class="kr">// ball wall hittest</em></span><span id="8205" class="ky kz hu ku b fv le lb l lc ld">if (ball_x &lt; 0 || ball_x &gt; w) {<br/>  speed_x *= -1;<br/>}</span><span id="437b" class="ky kz hu ku b fv le lb l lc ld">if (ball_y &lt; 0 || ball_y &gt; h) {<br/>  speed_y *= -1;<br/>}</span></pre><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff lp"><img src="../Images/3477d23bca6c8a853686ed9b07e97469.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NK6CMzKMnVdqpBLwamX7BQ.png"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Boom! Robo art!</figcaption></figure><p id="f476" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">但是我们不想要条纹，我们想要一个球。在Javascript中，你必须在每次循环时手动清空屏幕，否则事情只会一个接一个地发生。这是通过在每个循环开始时使用<em class="kr"> clearRect() </em>函数来完成的…</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="38d4" class="ky kz hu ku b fv la lb l lc ld">/<em class="kr">/ clears the whole screen</em><br/>ctx.clearReact(0,0,w,h); </span></pre><p id="853e" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">但是因为我们几乎总是清空整个屏幕，所以我简化了一个函数:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="ab9d" class="ky kz hu ku b fv la lb l lc ld"><em class="kr">// clear with a rgb</em><br/>ctx.background(255,255,255);</span></pre><p id="3f10" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">你也可以只传递一个值，这会给你一个灰度值:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="fd5f" class="ky kz hu ku b fv la lb l lc ld"><em class="kr">// same as going ctx.background(255,255,255);</em><br/>ctx.background(255);</span></pre><p id="c836" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">现在我们有一个弹跳球…</p><p id="70e4" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们还可以在背景中添加一个alpha值，以产生一种酷酷的轨迹效果:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="0e28" class="ky kz hu ku b fv la lb l lc ld"><em class="kr">// same as ctx.background(255,255,255, 0.1);</em><br/>ctx.background(255, 0.1);</span></pre><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff lq"><img src="../Images/2b2104bfa9bdff6692fce7d5fd1cb873.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nGyU2dpC-Y6y_iBOGIROwQ.png"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Note that an alpha of 0.1 will always leave too much of a trail. There’s a technical reason for this, that makes kinda sense, but easiest just set alpha higher, like 0.2</figcaption></figure><p id="7bb2" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们需要解决一个小问题…因为球的x和y点是从中心测量的，你会注意到球在反弹之前实际上有点偏离边缘…所以我们需要调整每一边球的一半大小。</p><p id="9acb" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">以下是完整的代码:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="898f" class="ky kz hu ku b fv la lb l lc ld">var ctx = createCanvas("canvas1");<br/>var ball_size = 20;<br/>var ball_x = width/2;<br/>var ball_y = height/2;<br/>var speed_x = randomInt(-5, 5);<br/>var speed_y = randomInt(-5, 5);</span><span id="e824" class="ky kz hu ku b fv le lb l lc ld">function draw(){</span><span id="f98e" class="ky kz hu ku b fv le lb l lc ld">  ctx.background(255, 0.2);</span><span id="8bfd" class="ky kz hu ku b fv le lb l lc ld">  ball_x = ball_x + speed_x;<br/>  ball_y = ball_y + speed_y;</span><span id="3d99" class="ky kz hu ku b fv le lb l lc ld">  <strong class="ku hv">if (ball_x &lt; ball_size/2 || ball_x &gt; w - ball_size/2) {</strong><br/>   speed_x *= -1;<br/>  }<br/>  <strong class="ku hv">if (ball_y &lt; ball_size/2 || ball_y &gt; h - ball_size/2) {</strong><br/>   speed_y *= -1;<br/>  }</span><span id="87b2" class="ky kz hu ku b fv le lb l lc ld">  ctx.fillStyle = rgb(255,0,0);<br/>  ctx.fillEllipse(ball_x, ball_y, ball_size, ball_size);</span><span id="324c" class="ky kz hu ku b fv le lb l lc ld">}</span></pre><p id="4034" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">嘣，我们有了我们的球…</p><p id="5d79" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">但是同样，这段代码对我来说有点重复…所以，是的，我做了一个函数…叫做<em class="kr"> bounce() </em></p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="7dc1" class="ky kz hu ku b fv la lb l lc ld"><em class="kr">// syntax: bounce(pos, min, max, size)</em><br/>if (bounce(ball_x, 0, w, ball_size) {<br/>  speed_x *=-1;<br/>}</span></pre><p id="c74d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我实际上用了一个更简洁的版本…当我们谈到向量的时候我会讲到它)…</p><p id="56f2" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">下面是最终的代码:</p><pre class="jk jl jm jn fq kt ku kv kw aw kx dt"><span id="1c79" class="ky kz hu ku b fv la lb l lc ld">var ctx = createCanvas("canvas1");</span><span id="a91c" class="ky kz hu ku b fv le lb l lc ld">var ball_size = 20;<br/>var ball_x = width/2;<br/>var ball_y = height/2;<br/>var speed_x = randomInt(-5, 5);<br/>var speed_y = randomInt(-5, 5);</span><span id="a4ba" class="ky kz hu ku b fv le lb l lc ld">function draw(){</span><span id="6573" class="ky kz hu ku b fv le lb l lc ld">  ctx.background(255, 0.2);</span><span id="e54c" class="ky kz hu ku b fv le lb l lc ld">  ball_x = ball_x + speed_x;<br/>  ball_y = ball_y + speed_y;</span><span id="8bc4" class="ky kz hu ku b fv le lb l lc ld">  <strong class="ku hv">if (bounce(ball_x, 0, w, ball_size)) {</strong><br/>    speed_x *=-1;<br/>  }</span><span id="32c2" class="ky kz hu ku b fv le lb l lc ld">  <strong class="ku hv">if (bounce(ball_y, 0 ,h, ball_size)) {</strong><br/>    speed_y *=-1;<br/>  }</span><span id="526d" class="ky kz hu ku b fv le lb l lc ld">  ctx.fillStyle = rgb(255,0,0);<br/>  ctx.fillEllipse(ball_x, ball_y, ball_size, ball_size);</span><span id="e8a7" class="ky kz hu ku b fv le lb l lc ld">}</span></pre><p id="9987" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">现在我们得到了一个合适的弹跳球…</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff lr"><img src="../Images/62960a1e403e66b878207b43407e098f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lDz2lVeLiLW9FmJfBYloNQ.png"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">A simple bouncing ball, the humble start to a particle system…</figcaption></figure><p id="b1d2" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这就是第二部分的内容。希望你喜欢。当球碰到墙时，试着改变球的大小和颜色，就像上面的图片一样，看看你是否能解决它出现的几个问题…</p><p id="0fbf" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">下面是<a class="ae ks" rel="noopener" href="/@radarboy3000/how-to-make-particles-1cbeee937593#.jxk5vd1a3">第三部分……</a></p><p id="4aee" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="kr">(可以在这里关注我和我的#code365进度:</em><a class="ae ks" href="https://www.instagram.com/radarboy3000/" rel="noopener ugc nofollow" target="_blank"><em class="kr">https://www.instagram.com/radarboy3000/</em></a><em class="kr">)</em></p><p id="992a" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这些教程的所有代码和库都可以在这里找到:<a class="ae ks" href="https://github.com/GeorgeGally/creative_coding" rel="noopener ugc nofollow" target="_blank">https://github.com/GeorgeGally/creative_coding</a>(一定要为每个新教程做一个git pull，因为我一直在更新这些)。</p><p id="612d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="kr">边注:我的库很大一部分是抄袭/改编自</em><a class="ae ks" href="http://seb.ly/" rel="noopener ugc nofollow" target="_blank"><em class="kr">Seb Lee Delisle</em></a><em class="kr">。</em></p><p id="fc32" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="kr">如果我走得太慢，也请让我知道速度如何……</em></p><div class="jk jl jm jn fq ab cb"><figure class="ls jo lt lu lv lw lx paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="ls jo lt lu lv lw lx paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="ls jo lt lu lv lw lx paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="ly lz ma"><p id="f922" class="jv jw kr jx b jy jz iv ka kb kc iy kd mb kf kg kh mc kj kk kl md kn ko kp kq hn dt translated"><a class="ae ks" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是阿妹家庭的一员。我们现在<a class="ae ks" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ks" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jv jw kr jx b jy jz iv ka kb kc iy kd mb kf kg kh mc kj kk kl md kn ko kp kq hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ks" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ks" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff me"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>