<html>
<head>
<title>Are you going to write some code? Wait for a sec, I see a design pattern here.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你要写一些代码吗？等一下，我看到了一个设计模式。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/are-you-going-to-write-some-code-wait-for-a-sec-i-see-a-design-pattern-here-783a9377cec6?source=collection_archive---------18-----------------------#2017-11-10">https://medium.com/hackernoon/are-you-going-to-write-some-code-wait-for-a-sec-i-see-a-design-pattern-here-783a9377cec6?source=collection_archive---------18-----------------------#2017-11-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/9c98f931181b8319fe5fb67653251ffb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*YUQKGaXHeKLsyyx97kBkpg.jpeg"/></div></figure><p id="904d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">越来越多的时候，我看到一些工程师想要尽可能快地编写一个代码，解决一个问题，修复一个bug，创建一个特性。最重要的目标是让你的代码运行起来，并按预期工作。从这里开始，我们面临一些挑战，如何<strong class="ja hv">支持、维护、添加特性</strong>到代码中，并希望没有魔法。</p><p id="e322" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我过去和我工作的永久项目是长期项目。工程师可能来来去去，一个团队可以改变，但这里最重要的一点是动力。当一个新人加入一个团队，看到混乱的、不可理解的、没有文档记录的代码时，他们有两个选择。首先，接受它，与它一起工作，解决任务，因为我们有一个冲刺的终点。第二，控制局面，面对挑战，努力带领团队取得更好的成绩。</p><p id="e0c8" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">为了避免在团队中出现这种情况，让我们看看如何讨论、头脑风暴一个功能示例任务并解决两个主要问题，使一个功能工作起来，并为团队成员留下一些文档。</p></div><div class="ab cl jw jx hc jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hn ho hp hq hr"><h1 id="e724" class="kd ke hu bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">谁想实现“找工作”功能？</h1><figure class="lc ld le lf fq iv fe ff paragraph-image"><div class="fe ff lb"><img src="../Images/98c8c0c33d3a6316f6cb66789fc64470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*fRDDRQizABi6ElXptWdY4Q.png"/></div></figure><p id="bd15" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><em class="lg">对话中的一个团队。</em></p><p id="01e7" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">约翰:杰夫，你想拍一部新电影吗？<br/> <strong class="ja hv">杰夫:</strong>当然！哪个，这个简单的有三个下拉名为“找工作”的？<br/> <strong class="ja hv">约翰:</strong>对，“给你找工作”。我会给你的要求，请描述你将如何组织你的代码。记住，要求可能会改变。</p><h2 id="1f9d" class="lh ke hu bd kf li lj lk kj ll lm ln kn jj lo lp kr jn lq lr kv jr ls lt kz lu dt translated">要求</h2><ul class=""><li id="6bdd" class="lv lw hu ja b jb lx jf ly jj lz jn ma jr mb jv mc md me mf dt translated">当从下拉菜单中选择一个选项时,<strong class="ja hv">新任务</strong>应出现在列表中，由所选选项过滤</li><li id="4d6b" class="lv lw hu ja b jb mg jf mh jj mi jn mj jr mk jv mc md me mf dt translated">默认情况下，列表中应该有5个作业</li><li id="b8d9" class="lv lw hu ja b jb mg jf mh jj mi jn mj jr mk jv mc md me mf dt translated">点击“更多”应提供另外5个职位，如果没有，然后隐藏按钮</li></ul><p id="c6a2" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">约翰:杰夫，你准备好讨论了吗？<br/> <strong class="ja hv">杰夫:</strong>确定。请看流程图<em class="lg">(是借助</em><a class="ae ml" href="https://github.com/Bogdan-Lyashenko/js-code-to-svg-flowchart" rel="noopener ugc nofollow" target="_blank">js-code-to-SVG-flow trade</a><a class="mm mn gr" href="https://medium.com/u/d603b362727e?source=post_page-----783a9377cec6--------------------------------" rel="noopener" target="_blank"><em class="lg">boh Dan Liashenko</em></a><em class="lg">)</em></p><figure class="lc ld le lf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="fe ff mo"><img src="../Images/6f534fd372895d19f5b1a1cd7f8b184d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xSxxbB_55cGBMIiOmbQBeA.jpeg"/></div></div><figcaption class="mt mu fg fe ff mv mw bd b be z ek">PROTOTYPE</figcaption></figure><p id="05ad" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">约翰:干得好，杰夫。就在您向我展示流程图之前，需求已经发生了变化，我们知道需要为每个请求支持不同的API，响应数据也将发生变化。简而言之，每个请求都应该有自己的解析器。噢，我差点忘了说，我们还需要添加两个下拉菜单。<br/> <strong class="ja hv">杰夫:</strong>没问题，我再补充:)</p><p id="38e0" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这是解决问题的常见行为和方法，没关系。不过，你知道这个问题将来可能会出现，不是吗？是的，我知道。你是对的，<strong class="ja hv">一个重复，一个复杂的逻辑</strong>对于每一个下拉监听器和尽可能多的下拉我们将有尽可能多的“如果语句”你应该添加到更多的监听器。</p></div><div class="ab cl jw jx hc jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hn ho hp hq hr"><p id="c58a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">所以，让我们进入<a class="ae ml" href="https://addyosmani.com/resources/essentialjsdesignpatterns/book/" rel="noopener ugc nofollow" target="_blank">设计模式</a>，看看我们如何改进代码。</p><blockquote class="mx my mz"><p id="87d0" class="iy iz lg ja b jb jc jd je jf jg jh ji na jk jl jm nb jo jp jq nc js jt ju jv hn dt translated">设计模式是软件设计中常见问题的可重用解决方案。在任何编程语言中，它们都是令人兴奋和令人着迷的话题。<em class="hu"> ~ </em> <a class="ae ml" href="https://addyosmani.com/resources/essentialjsdesignpatterns/book/" rel="noopener ugc nofollow" target="_blank">设计图案</a>，阿迪·奥斯马尼</p></blockquote><p id="05b6" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">看起来<a class="ae ml" href="https://addyosmani.com/resources/essentialjsdesignpatterns/book/#commandpatternjavascript" rel="noopener ugc nofollow" target="_blank">命令模式</a>完全符合我们的需求。</p><blockquote class="mx my mz"><p id="d686" class="iy iz lg ja b jb jc jd je jf jg jh ji na jk jl jm nb jo jp jq nc js jt ju jv hn dt translated">Command模式旨在将方法调用、请求或操作封装到单个对象中，并为我们提供了参数化和传递方法调用的能力，这些方法调用可以根据我们的判断来执行。此外，它使我们能够将调用动作的对象从实现它们的对象中分离出来，从而在交换具体的类(对象)时为我们提供了更大程度的整体灵活性。<em class="hu"> ~ </em> <a class="ae ml" href="https://addyosmani.com/resources/essentialjsdesignpatterns/book/" rel="noopener ugc nofollow" target="_blank">设计图案</a>，Addy Osmani</p></blockquote><p id="367b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">更新后的流程图如下所示:</p><figure class="lc ld le lf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="fe ff mo"><img src="../Images/32e999080b66f6afe2f55a520c7bc8a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gAmiK6jhXPwBo7s_l57YYA.jpeg"/></div></div><figcaption class="mt mu fg fe ff mv mw bd b be z ek">PRODUCTION</figcaption></figure><p id="3464" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">正如您从流程图中看到的，我们将有一种方法来获取作业。</p><pre class="lc ld le lf fq nd ne nf ng aw nh dt"><span id="32e3" class="lh ke hu ne b fv ni nj l nk nl">executeGetJobs(config)</span></pre><p id="3a0f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我们应该只在内部传递一个配置。config有<strong class="ja hv"> getUrl、parser、optionValue、selectName </strong>属性，方法<strong class="ja hv"> executeGetJobs </strong>处理我们需要的所有逻辑。</p></div><div class="ab cl jw jx hc jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hn ho hp hq hr"><h1 id="93d5" class="kd ke hu bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">让我们完成一项工作(自定义元素)</h1><p id="d816" class="pw-post-body-paragraph iy iz hu ja b jb lx jd je jf ly jh ji jj nm jl jm jn nn jp jq jr no jt ju jv hn dt translated">运行并检查存储库。</p><div class="np nq fm fo nr ns"><a href="https://github.com/shystruk/command-pattern-in-web-components" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab ej"><div class="nu ab nv cl cj nw"><h2 class="bd hv fv z el nx eo ep ny er et ht dt translated">shy struk/web组件中的命令模式</h2><div class="nz l"><h3 class="bd b fv z el nx eo ep ny er et ek translated">command-pattern-in-we b-components-在这里您可以找到带有GitHub Jobs API (express和cors)的定制元素</h3></div><div class="oa l"><p class="bd b gc z el nx eo ep ny er et ek translated">github.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og iw ns"/></div></div></a></div><p id="b2df" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在我开始写代码之前，我一直在考虑使用哪种框架来获得更快的结果，这是常有的事。有角度的或者可能有反应的，Vue，哦该死的不，让我们用普通的JS风格用<a class="ae ml" href="https://developers.google.com/web/fundamentals/web-components/customelements" rel="noopener ugc nofollow" target="_blank">自定义元素</a>来做，并且保持组件方法。</p><blockquote class="mx my mz"><p id="8648" class="iy iz lg ja b jb jc jd je jf jg jh ji na jk jl jm nb jo jp jq nc js jt ju jv hn dt translated">有了<a class="ae ml" href="https://html.spec.whatwg.org/multipage/scripting.html#custom-elements" rel="noopener ugc nofollow" target="_blank">定制元素</a>，网络开发者可以<strong class="ja hv">创建新的HTML标签</strong>，增强现有的HTML标签，或者扩展其他开发者创作的组件。API是<a class="ae ml" href="http://webcomponents.org/" rel="noopener ugc nofollow" target="_blank"> web组件</a>的基础。它带来了一种基于web标准的方法，只使用普通的JS/HTML/CSS就可以创建可重用的组件。结果是更少的代码、模块化的代码，以及我们的应用中更多的重用。</p></blockquote><p id="7d6d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这正是我们的应用程序所需要的。</p><p id="b697" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">由于我使用的是GitHub Jobs API，所以CORS可能是个问题。Express和<a class="ae ml" href="https://www.npmjs.com/package/cors" rel="noopener ugc nofollow" target="_blank"> cors </a>也帮我解决了:</p><figure class="lc ld le lf fq iv"><div class="bz el l di"><div class="oh oi l"/></div></figure><p id="4243" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">无论您有多少个下拉列表，侦听器都会发生变化，如下所示:</p><figure class="lc ld le lf fq iv"><div class="bz el l di"><div class="oh oi l"/></div></figure><p id="4ba7" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">正如你在生产流程图中看到的，我们应该有一个方法<code class="eh oj ok ol ne b">executeGetJobs</code>来完成所有的工作。</p><p id="0e12" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">构建一个配置很简单。您需要了解在发出请求并返回UI作为响应的配置中必须包含什么。因此，如您所见，配置非常灵活，如果您需要添加更多选项，很容易做到。看一看:</p><figure class="lc ld le lf fq iv"><div class="bz el l di"><div class="oh oi l"/></div></figure><p id="1962" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">最后一部分是HTTP请求，我称之为<strong class="ja hv">资源。</strong>我使用ES6模块(导入/导出),它们是单例的，实例是在模块加载时创建的。重要的是要记住，当你使用可重用的用户界面部件(组件)时，每个拥有可共享数据的对象/类都应该返回一个新的实例。</p><p id="6afd" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">你问我为什么吗？答案很简单。Singleton初始化一次，所以如果你有一个组件在两个地方，它们将使用相同的实例数据。因此，每个组件都将被修改并共享一个对象。在我的例子中，资源也不例外。因此，让我们在每次使用组件时获得一个新的实例:</p><figure class="lc ld le lf fq iv"><div class="bz el l di"><div class="oh oi l"/></div></figure><p id="1320" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">最后，让我们看看资源main GET方法。正如你所看到的，<code class="eh oj ok ol ne b">executeGetJobs</code>设置了我们需要用于<code class="eh oj ok ol ne b">getMoreJobs</code>请求(lastSelectName，lastOptionValue)的所有数据。这些数据将帮助我们构建正确的配置。</p><figure class="lc ld le lf fq iv"><div class="bz el l di"><div class="oh oi l"/></div></figure></div><div class="ab cl jw jx hc jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="hn ho hp hq hr"><h1 id="db5e" class="kd ke hu bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">结论</h1><p id="7b54" class="pw-post-body-paragraph iy iz hu ja b jb lx jd je jf ly jh ji jj nm jl jm jn nn jp jq jr no jt ju jv hn dt translated">记住，解决任何问题的最好方法是向你的团队成员寻求帮助。不要忘记设计模式，它们使代码更具可读性、可伸缩性，这是软件设计中最著名的解决方案之一，所以每个人都会理解代码的作用。我喜欢Web组件的工作方式和创建方式。我一直在努力，很快会分享我的想法，并向你展示一个基于自定义元素的应用程序。是时候记住香草JS了:)</p><p id="230d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">感谢您的阅读。欢迎建议、评论、想法:)</strong></p><p id="95aa" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">如果你喜欢这个，鼓掌，跟我上</strong> <a class="ae ml" rel="noopener" href="/@shystruk"> <strong class="ja hv">中</strong> </a> <strong class="ja hv">，</strong> <a class="ae ml" href="https://twitter.com/shystrukk" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hv">推特</strong> </a> <strong class="ja hv">，</strong><a class="ae ml" href="https://github.com/shystruk" rel="noopener ugc nofollow" target="_blank"><strong class="ja hv">github</strong></a><strong class="ja hv">跟你的朋友们分享一下</strong> ✌️</p></div></div>    
</body>
</html>