<html>
<head>
<title>Building Your Own Instagram Discovery Engine: A Step-By-Step Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建你自己的Instagram发现引擎:一步一步的教程</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/building-your-own-instagram-discovery-engine-a-step-by-step-tutorial-49f374455636?source=collection_archive---------8-----------------------#2017-11-02">https://medium.com/hackernoon/building-your-own-instagram-discovery-engine-a-step-by-step-tutorial-49f374455636?source=collection_archive---------8-----------------------#2017-11-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/32ecb4b9f0836e03b53a5c7f04907eb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aaR3Dw6BduqI25a05Ktepg.png"/></div></div></figure><p id="6367" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Instagram的“探索”部分显示符合你兴趣的内容，这不是很棒吗？当你打开应用程序时，显示的内容和推荐几乎总是与你特定的喜好、兴趣、关系等相关。虽然认为我们是Instagram宇宙的中心可能很有趣，但现实是，个性化的相关内容也是每天为4亿其他人专门策划的。Instagram有4亿活跃用户，每天发布8000万张照片，它是如何决定在你的探索版块上放什么的？让我们<em class="ka">探索</em>Instagram用来确定你的insta gram时间线和探索部分中帖子分数的关键因素。</p><p id="12ce" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在我们进入实质之前，Instagram使用了一些功能来决定提供什么内容:</p><ul class=""><li id="8902" class="kb kc hu je b jf jg jj jk jn kd jr ke jv kf jz kg kh ki kj dt translated"><strong class="je hv">时机</strong>:帖子越新，分数越高。</li><li id="de35" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated"><strong class="je hv">参与度</strong>:可能由点赞、评论和/或浏览的数量决定。如果用户更频繁地使用某些标签，例如滑雪板，则该用户将会看到更多滑雪板的图像。</li><li id="6c2c" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated"><strong class="je hv">以前的互动:</strong>您过去与该用户互动的频率。你与某些用户接触得越多，表明他们的帖子与你的相关性有多高。</li><li id="8f22" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated"><strong class="je hv">亲和力:</strong>你和这个人是什么关系。朋友的朋友，你还没联系上的朋友，还是你不认识的人？</li></ul><p id="0852" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，让我们使用这些功能来构建我们自己的Instagram发现引擎。为了从Instagram中查询数据，我将使用由Pasha Lev编写的非常酷但非官方的<a class="ae kp" href="https://github.com/LevPasha/Instagram-API-python" rel="noopener ugc nofollow" target="_blank"> Instagram API </a>。对于Mac用户来说，下面的内容应该可以让你开始使用。所有其他库都是pip可安装的，所有Python代码都在一个<a class="ae kp" href="http://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> Jupyter笔记本</a>中运行。</p><h1 id="6897" class="kq kr hu bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln dt translated">步骤1:设置Jupyter笔记本和依赖项</h1><p id="be34" class="pw-post-body-paragraph jc jd hu je b jf lo jh ji jj lp jl jm jn lq jp jq jr lr jt ju jv ls jx jy jz hn dt translated">要启动并运行，请在终端中运行以下命令:</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="5aad" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后在您的终端中运行jupyter notebook，它将在您的默认浏览器中打开。我还建议<strong class="je hv">在继续之前验证您的Instagram电话号码</strong>。这将防止一些意外的重定向。</p><p id="4cd8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在说点好的。让我们从找到我的社交网络和一点图表分析开始。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="a13d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果一切顺利，您应该会看到“T16登录成功！”回应。</p><p id="a756" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们现在可以通过找到我关注的每个人以及他们关注的每个人来建立一个真正的社交网络。关于社交网络分析和个性化页面排名的快速介绍，请看这篇博客文章。</p><p id="e628" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在进入代码之前，让我们看一下我自己的个人资料，看看我们要分析什么。</p><p id="39f2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如你所见，我关注了42个人，他们被认为是我的直接关系网，这并不算多。如果我们开始研究二级连接，这个数字会迅速增长。在我的例子中，如果我们看二级连接，节点的数量达到24，000以上。在步骤2中可以看到一个很好的可视化效果。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="2da7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">酷，现在让我们把它放到一个格式良好的熊猫数据框架中。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><h1 id="1b1a" class="kq kr hu bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln dt translated">步骤2:网络可视化(可选)</h1><p id="db06" class="pw-post-body-paragraph jc jd hu je b jf lo jh ji jj lp jl jm jn lq jp jq jr lr jt ju jv ls jx jy jz hn dt translated">虽然为了构建自己的发现引擎，可视化你的网络并不是必要的，但它非常有趣，并且可能有助于理解个人网页排名。我将使用我最喜欢的图形可视化库之一，<a class="ae kp" href="https://github.com/graphistry/pygraphistry" rel="noopener ugc nofollow" target="_blank"> Graphistry </a>(有时间可以看看)。然而，如果你不想等待API密匙(尽管我得到了当天的回复)，还有很多其他好的库，比如<a class="ae kp" href="http://lightning-viz.org/" rel="noopener ugc nofollow" target="_blank"> Lightning </a>和<a class="ae kp" href="https://networkx.github.io/documentation/stable/index.html" rel="noopener ugc nofollow" target="_blank"> NetworkX </a>。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="b42c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于这个示例，我将显示to src_id和dst_id，以便给我的朋友一点隐私，尽管显示用户名很有趣(下面的代码将会这样做)。第一个图形只显示来源于我并使用Graphistry中的内置工具过滤的边。</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lz"><img src="../Images/e1b5747cc70b43a2e72a41b8f2842768.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*suXjsGO7dF34CgsP."/></div></div></figure><p id="f296" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">第二张图显示了我所有的扩展网络。</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lz"><img src="../Images/7da94b272c4ec99b88220ea233becfc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SmpkzF_0kcberlCk."/></div></div></figure><p id="b246" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">是不是很酷？你已经可以看到一些有趣的特征，比如几个外部质心，以及它们如何与我的社交网络的其余部分进行交互。</p><h1 id="b36d" class="kq kr hu bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln dt translated">第三步:从社交网络中寻找热门图片</h1><p id="2723" class="pw-post-body-paragraph jc jd hu je b jf lo jh ji jj lp jl jm jn lq jp jq jr lr jt ju jv ls jx jy jz hn dt translated">现在是时候从每个人那里抓取最近的图片，并根据它们与我的相关程度进行评级了。由于大约有24，000个节点，下载所有数据可能需要一段时间。</p><p id="8377" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们只对我直接跟踪的44个人进行一次快速试运行，以确保我们在正确的轨道上。<br/> <br/>根据我认为可能决定Instagram帖子相对分数的因素，我们需要获取我关注的人的所有最近照片的<strong class="je hv">、喜欢数、</strong>和<strong class="je hv">拍摄时间</strong>(在这个例子中，我认为最近相当于一周，并删除了早于一周的照片)。掌握<strong class="je hv">我已经“喜欢”了那个用户的帖子</strong>多少次，以及<strong class="je hv">如何将那个人</strong>与我联系起来，这也很有用。除了“如何连接”之外，用户对我来说是一个简单的总和。为了计算“连接”部分，我们将使用个性化的pagerank。一旦我们收集了这些信息，我们就可以定义一个重要性指标，比如:</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/7600a48864029343817d2b0b11d5f515.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hrTjjR_XC8oat2zL."/></div></div></figure><p id="59ca" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">好了，现在我们有了定义，让我们看看它是如何工作的！我为即将出现的大块代码道歉，但是你不要担心…在最后有一张我的新小狗的照片！</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="369b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这给了我:</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/ad143c0e65b238ac77a83ce43f24d4ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NNXIQPpzyX6NofUd."/></div></div></figure><p id="f767" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这实际上看起来非常类似于我的个人时间表——酷！现在我们知道我们正在做一些事情，让我们开始探索部分。</p><h1 id="2f7b" class="kq kr hu bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln dt translated">步骤4:扩大用户群</h1><p id="c687" class="pw-post-body-paragraph jc jd hu je b jf lo jh ji jj lp jl jm jn lq jp jq jr lr jt ju jv ls jx jy jz hn dt translated">我们可以采取和之前一样的方法，通过计算朋友的朋友的每张照片的相对分数。要做到这一点，我们将从我们计算的第一个社交图开始…但它有超过24K个节点，我懒得等待所有的数据。取而代之的是，让我们抓取我“喜欢”的帖子的朋友的朋友的照片。这会将节点数量减少到1500个以上，根据您的网速，这是喝咖啡休息的最佳时间。</p><p id="f74d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了处理扩展的用户群，需要对上面的代码做一些小的调整，但是大部分代码是相同的。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="c07f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">结果显示了很多来自国家地理和红牛的图片，我现在还不太明白，但是可能现在就要开始了！</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/69dfdc90c9457c44702ab68171d1cdff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fapDRNqEqrNwVU7Q."/></div></div></figure><h1 id="e650" class="kq kr hu bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln dt translated">步骤5:基于兴趣的分析</h1><p id="a5fb" class="pw-post-body-paragraph jc jd hu je b jf lo jh ji jj lp jl jm jn lq jp jq jr lr jt ju jv ls jx jy jz hn dt translated">利益还没有被考虑在内。Instagram的一个优点是它有丰富的#标签来描述照片。让我们看看是否可以通过使用我“喜欢”的照片和我被标记的照片的标签来发现我的兴趣。虽然Instagram最有可能使用点击数据和“喜欢”数据，但我们无法获得点击数据，所以我们将只关注喜欢。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="a825" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这给出了:</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="c47d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，让我们为每个标签抓取最受欢迎的图片:</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/618cccf233fc8442e8cee81206132eea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5naLHyWtlrBAFghc."/></div></div></figure><p id="810d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在我们有了每个标签提要中最受欢迎的图片，我们可以显示它们了。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/6f9468a6b6dd1979eefff4d16d448769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0TM5GDqeiOZmzjKx."/></div></div></figure><p id="411f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在让我们结合这两种技术。</p><h1 id="7673" class="kq kr hu bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln dt translated">第六步:把所有东西放在一起</h1><p id="5375" class="pw-post-body-paragraph jc jd hu je b jf lo jh ji jj lp jl jm jn lq jp jq jr lr jt ju jv ls jx jy jz hn dt translated">你可能已经注意到我正在将所有收集到的图像数据保存到<strong class="je hv"> top_graph_img </strong>和<strong class="je hv"> images_top_tags </strong>中。让我们用一种相当简单的技术将它们结合起来，随机抽样:</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/d576bde6501594c0e6a42081221dd141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*em5UF8YYkmboX4lP."/></div></div></figure><p id="2ae1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">那还不算太寒酸！我个人觉得其中一些照片很酷，但它肯定可以做得更好。</p><p id="709e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">改进发现引擎的方法:</strong></p><ul class=""><li id="53ed" class="kb kc hu je b jf jg jj jk jn kd jr ke jv kf jz kg kh ki kj dt translated">通过访问整个社交图，我们可以<a class="ae kp" href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.454.5022&amp;rep=rep1&amp;type=pdf" rel="noopener ugc nofollow" target="_blank">用节点间的权重进行类似的分析</a>，权重由喜欢和评论的数量决定。</li><li id="e50e" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">将点击数据与“喜欢”数据结合起来，利用隐性反馈和参与度指标的<a class="ae kp" href="https://media.netflix.com/en/company-blog/goodbye-stars-hello-thumbs" rel="noopener ugc nofollow" target="_blank">优势</a>。这对于降低没有太多喜欢的点击诱饵风格的帖子的等级，以及显示不经常“喜欢”的用户的兴趣非常有用。</li><li id="b9b7" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">使用卷积神经网络计算图像特征。移除最终的密集层，然后根据这些特征计算并显示与用户喜欢的图像相似的图像。整合脸书的社交网络，显示您联系的人的图像。</li><li id="5633" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">用<a class="ae kp" href="https://getstream.io/blog/factorization-machines-recommendation-systems/" rel="noopener ugc nofollow" target="_blank">矩阵分解</a>看看能不能推荐内容。您甚至可以使用图像特征和标签来构建混合技术的特征向量。</li><li id="35f5" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">使用自然语言处理(NLP)和聚类技术来寻找相似的标签(<a class="ae kp" href="https://engineering.instagram.com/emojineering-part-1-machine-learning-for-emoji-trendsmachine-learning-for-emoji-trends-7f5f9cb979ad" rel="noopener ugc nofollow" target="_blank">，甚至是带有表情符号的标签！</a>)。这提供了标签(自行车与骑自行车)和相似性度量(自然与山)的标准化</li></ul><p id="b4c0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这绝不是一个详尽的列表，所以如果你有任何其他想法，请让我知道！</p><p id="c254" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有关发现引擎的更多信息，请查看我们的<a class="ae kp" href="https://getstream.io/personalization/" rel="noopener ugc nofollow" target="_blank">个性化页面</a>或<a class="ae kp" href="https://getstream.io/demo/" rel="noopener ugc nofollow" target="_blank">安排演示</a>以了解更多关于Stream的个性化订阅。</p><p id="11df" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">快乐大厦！</p><blockquote class="mb mc md"><p id="bed1" class="jc jd ka je b jf jg jh ji jj jk jl jm me jo jp jq mf js jt ju mg jw jx jy jz hn dt translated">这是由GetStream.io的数据科学家Balazs Horanyi领导的GetStream.io团队的合作，原博文可在<a class="ae kp" href="https://getstream.io/blog/building-instagram-discovery-engine-step-step-tutorial/" rel="noopener ugc nofollow" target="_blank">https://getstream . io/blog/building-insta gram-discovery-engine-step-step-tutorial/</a>找到。</p></blockquote></div></div>    
</body>
</html>