<html>
<head>
<title>Deploying a Go application on AWS EC2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在AWS EC2上部署Go应用程序</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/deploying-a-go-application-on-aws-ec2-76390c09c2c5?source=collection_archive---------7-----------------------#2017-08-30">https://medium.com/hackernoon/deploying-a-go-application-on-aws-ec2-76390c09c2c5?source=collection_archive---------7-----------------------#2017-08-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/0d6651b765814b013443ec998cfa1f56.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/0*3GC6Tk7wy1rg1Rww."/></div></figure><p id="e130" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在本教程中，我将向您展示如何将<strong class="ja hv"> Golang </strong> app部署到<strong class="ja hv">亚马逊EC2 </strong>。你需要一个AWS账户。<a class="ae jw" href="http://aws.amazon.com/free" rel="noopener ugc nofollow" target="_blank">你可以免费报名</a>。</p><p id="ff5a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 1 —设置EC2实例</strong></p><p id="cc8f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">创建帐户后，打开<a class="ae jw" href="https://console.aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> AWS管理控制台</a>并点击<strong class="ja hv"> EC2 </strong>:</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/53dafdb8d7829d06d43666814cd6e022.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*HRr14v6RNcY64Fpb."/></div></figure><p id="72b7" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">然后，点击<strong class="ja hv">启动实例</strong>:</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/67673471ecc69976b1ad8e4c627864cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*ov5xrO6cwCpwtrAQ."/></div></figure><p id="236c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">选择一个<strong class="ja hv"> AMI </strong> ( <strong class="ja hv">亚马逊机器镜像</strong>)。我们准备选择“<strong class="ja hv">亚马逊Linux AMI 2017.03.1 5 (HVM)，SSD卷类型</strong>”。确切的版本可能会随着时间的推移而改变。</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/09a94c478bd920f2011196140f36447e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*adnqeTBl99Po2crW."/></div></figure><p id="847d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><em class="kc">注意</em>:还有其他的Linux <strong class="ja hv"> AMI </strong>可以用，里面预装了<strong class="ja hv"> Go </strong>等软件，以后可以作为快捷方式使用。但是对于我们的目的来说，如果您从一个干净的安装开始并自己配置一切，您将能够更好地理解将来如何管理和维护您的实例。</p><p id="ae30" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">接下来，我们将为我们的实例选择硬件配置。因此，我们将使用最低规格和最便宜的配置“<strong class="ja hv"> t2.micro </strong>”，这对于本教程来说已经足够了:</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/566f927571e8c1edc5f6675ee346ab2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*-O8UkpTe2UCk3Vpm."/></div></figure><p id="265b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">然后点击<strong class="ja hv">配置实例详情</strong>。我们将所有内容保留为默认设置，然后单击“<strong class="ja hv">添加存储</strong></p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/f696d6784a495f183252f2b816ac4066.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*DsEIJv4z6Vz1YNQR."/></div></figure><p id="9509" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">接下来，点击“<strong class="ja hv">添加标签</strong>”为我们的实例指定一个名称:</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/13d98c44065dc3b73248d147d5f9dc6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*qrimWMC_yhasTCst."/></div></figure><p id="7b2a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">点击<strong class="ja hv">配置安全组</strong>。然后公开服务器将监听的端口号。对于这个演示，我制作了一个监听端口3000的应用程序，因此，我启用了<strong class="ja hv"> HTTP端口3000 </strong>，并将<strong class="ja hv">源</strong>列设置为“<strong class="ja hv"> Anywhere 0.0.0.0/0 </strong>”。</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/a677295408d4f2ade3c270cc77aec35b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*8F_EKfremhkeRZJ5."/></div></figure><p id="4513" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">以上设置允许从<strong class="ja hv">任何地方</strong>访问端口<strong class="ja hv"> 3000 </strong>，并且<strong class="ja hv"> SSH只能从<strong class="ja hv">任何地方访问</strong>。</strong></p><p id="b4f1" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在，点击“<strong class="ja hv">审查并启动</strong>”，然后点击“<strong class="ja hv">启动</strong>”。</p><p id="e7d5" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">当提示输入<strong class="ja hv">密钥对</strong>时，您可以选择现有的密钥对或创建新的密钥对。将<strong class="ja hv">私钥文件</strong>保存在安全的地方。稍后您需要通过<strong class="ja hv"> SSH </strong>连接到您的实例。</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff kd"><img src="../Images/0222a0ee14b79ba6fa4d4f4276dd9e3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/0*_IWez1IiwX1cLBD9."/></div></figure><p id="ea5b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">准备好后，选择“<strong class="ja hv">启动实例</strong>”:</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/fe91b21d123fbfee7e772ff3bdff63b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*JGNhClZS1ArciE7G."/></div></figure><p id="813e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">您的实例正在启动，这可能需要几分钟时间。单击实例页面上的<a class="ae jw" href="https://console.aws.amazon.com/ec2/home?#s=Instances" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hv">查看实例</strong> </a>链接，您将被重定向到您的“<strong class="ja hv">我的实例</strong>”页面，在这里您可以监视和配置您的EC2实例:</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/72fcbff6484ffbbf03718932e36c7cdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*OpVgZDFk-bLVgfDP."/></div></figure><p id="b6e8" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">等到实例状态变为"<strong class="ja hv">运行</strong>，然后使用<strong class="ja hv">公共DNS </strong>通过<strong class="ja hv"> SSH </strong>连接到您的服务。</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/cfdbb7bd99c4d2e2b8f5489a4e9661f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*YYmS9m_5lk9nBAYy."/></div></figure><p id="b3a3" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 2 —通过SSH连接到AWS EC2</strong></p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/dbc1ab427ff6b069010fc45ecb1751c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*HPhOhuhjgvkj3UfM."/></div></figure><p id="8f9f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在我们已经连接到实例，是时候安装<strong class="ja hv"> Golang </strong>了。</p><p id="3ee4" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 3 —在EC2上安装Golang</strong></p><p id="ab9b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">一旦连接到实例，使用<strong class="ja hv"> yum </strong>配置管理器安装<strong class="ja hv"> Go </strong>:</p><blockquote class="ke kf kg"><p id="b620" class="iy iz kc ja b jb jc jd je jf jg jh ji kh jk jl jm ki jo jp jq kj js jt ju jv hn dt translated">sudo yum更新-y</p><p id="3630" class="iy iz kc ja b jb jc jd je jf jg jh ji kh jk jl jm ki jo jp jq kj js jt ju jv hn dt translated">sudo yum install -y golang</p></blockquote><p id="2eda" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在您需要为您的项目设置<strong class="ja hv"> Go环境变量</strong>。通常需要设置3个环境变量，分别为<strong class="ja hv"> GOROOT </strong>、<strong class="ja hv"> GOPATH </strong>和<strong class="ja hv"> PATH </strong></p><figure class="jy jz ka kb fq iv"><div class="bz el l di"><div class="kk kl l"/></div></figure><p id="9012" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">注意:以上所有命令将只为当前会话设置环境变量。为使其永久化，在<strong class="ja hv"> '~/中添加上述命令。bash_profile' </strong>文件</p><p id="ed25" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在这一步，您已经成功地在系统上安装并配置了go language。</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/c652cb1c6ed6466ce3a280066517ad04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*Ih34ibOgV20cnsIn."/></div></figure><p id="0eae" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">恭喜你！您有一个带有Go的工作EC2实例。</p><p id="3121" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">4—Go应用程序</strong></p><p id="c073" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">注意:如果您已经准备好部署自己的Go应用程序，则可以跳过这一步。</p><p id="9d0a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">将以下内容放入名为“<strong class="ja hv"> app.go </strong>”的文件中:</p><figure class="jy jz ka kb fq iv"><div class="bz el l di"><div class="kk kl l"/></div></figure><p id="10c1" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">使用以下命令运行应用程序:</p><blockquote class="ke kf kg"><p id="2bb9" class="iy iz kc ja b jb jc jd je jf jg jh ji kh jk jl jm ki jo jp jq kj js jt ju jv hn dt translated">去运行app.go</p></blockquote><p id="e2f1" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">最后，如果您将您最喜欢的web浏览器(不是您的IE)指向您实例的<strong class="ja hv">公共DNS名称</strong>，您应该会看到:</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/a22f1c05f69042f267ac778da84b1a2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*R1f99dlS5jpl0Uzi."/></div></figure><p id="4c96" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">恭喜你！您已经将第一个<strong class="ja hv"> Go </strong>应用程序部署到<strong class="ja hv"> AWS EC2 </strong>实例。</p><p id="8af2" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><em class="kc">注意</em>:如果你的应用监听的端口不是3000，你可以把它添加到分配给EC2实例的安全组中。只需进入EC2菜单，然后点击“<strong class="ja hv">安全组</strong>”</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/790a9fcbcb6fea045586ea10f32bff17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*cFeTzce7nzl5MpSY."/></div></figure><p id="42cc" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">点击<strong class="ja hv">编辑</strong>，并遵循本教程<strong class="ja hv">第一部分</strong>中描述的相同步骤。</p><p id="d808" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 5 —清理您的实例</strong></p><p id="e4b6" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在您完成了为本教程创建的实例之后，您应该通过终止该实例来进行清理。</p><figure class="jy jz ka kb fq iv fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/34a114c8cba4d49556eab5a471e6025b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*8oLXPU5IzGKIRRTK."/></div></figure></div></div>    
</body>
</html>