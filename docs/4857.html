<html>
<head>
<title>Go repo structure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Go回购结构</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/go-repo-structure-49bceabee492?source=collection_archive---------14-----------------------#2017-06-26">https://medium.com/hackernoon/go-repo-structure-49bceabee492?source=collection_archive---------14-----------------------#2017-06-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/1da7f5b7d03f84992256b2b79547b7de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dxr8ya8ooBBNBr043s_nLg.jpeg"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Photo by <a class="ae ih" href="http://unsplash.com/photos/GJCWj-n3h4E?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Sanwal Deen</a> on <a class="ae ih" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="0fe0" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在过去的几年里，我已经改变了我构建Go repos的方式几次，所以这里是我目前的观点以及与现在相比我过去做的事情。</p><h2 id="7b03" class="kf kg ik bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz dt translated">重要的事情先来</h2><p id="967f" class="pw-post-body-paragraph jh ji ik jj b jk la jm jn jo lb jq jr js lc ju jv jw ld jy jz ka le kc kd ke hn dt translated">像大多数人一样，当我在2013年开始查看Go back时，我的第一个回购非常简单。没有考虑任何形式的有用的布局。我发现的问题是</p><ul class=""><li id="f020" class="lf lg ik jj b jk jl jo jp js lh jw li ka lj ke lk ll lm ln dt translated">单个包/应用命名空间。这说明了一切。</li><li id="db7b" class="lf lg ik jj b jk lo jo lp js lq jw lr ka ls ke lk ll lm ln dt translated">如果它是一个可运行的程序，而不是一个包，那么任何有用的代码都不能在其他应用程序中使用，并且都在<em class="lt"> main </em>下。</li><li id="3b18" class="lf lg ik jj b jk lo jo lp js lq jw lr ka ls ke lk ll lm ln dt translated">文件的数量会很快变大。</li></ul><h2 id="354b" class="kf kg ik bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz dt translated">包是有用的</h2><p id="2ace" class="pw-post-body-paragraph jh ji ik jj b jk la jm jn jo lb jq jr js lc ju jv jw ld jy jz ka le kc kd ke hn dt translated">我发现几乎总是从一个包开始是非常有用的。第一，这迫使你至少要考虑从包的外部看代码应该是什么样子，第二，暴露代码的有用部分用于其他事情真的很容易。</p><p id="13a3" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">至于如何做到这一点，我尝试了几种方式，并选定了这一点。</p><ul class=""><li id="5fe6" class="lf lg ik jj b jk jl jo jp js lh jw li ka lj ke lk ll lm ln dt translated">回购根中的主包站点。</li><li id="4876" class="lf lg ik jj b jk lo jo lp js lq jw lr ka ls ke lk ll lm ln dt translated">任何其他包都在pkg文件夹下</li></ul><p id="807d" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">就是这样。</p><p id="847d" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">比如说…</p><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="3765" class="kf kg ik lz b fv md me l mf mg">github.com/matzhouse/newPackage<br/>                    /newPackage/ <br/>                    /newPackage/pkg/otherPackageOne<br/>                    /newPackage/pkg/PackageTwo</span></pre><h2 id="930d" class="kf kg ik bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz dt translated">二进制文件在哪里？</h2><p id="edfd" class="pw-post-body-paragraph jh ji ik jj b jk la jm jn jo lb jq jr js lc ju jv jw ld jy jz ka le kc kd ke hn dt translated">从一个包开始，我们还必须分离出二进制文件。使用<em class="lt"> cmd </em>目录已经成为围棋的惯用方式。这有一些微妙的优势。</p><ul class=""><li id="c936" class="lf lg ik jj b jk jl jo jp js lh jw li ka lj ke lk ll lm ln dt translated">我们可以为不同的东西准备多个二进制文件——只需添加一个新的文件夹并编码即可。</li><li id="52d3" class="lf lg ik jj b jk lo jo lp js lq jw lr ka ls ke lk ll lm ln dt translated">我们可以把这个包作为一个包来使用，给我们一个不同的代码视角。</li></ul><pre class="lu lv lw lx fq ly lz ma mb aw mc dt"><span id="0e12" class="kf kg ik lz b fv md me l mf mg">github.com/matzhouse/newPackage<br/>                    /newPackage/cmd<br/>                    /newPackage/cmd/commandOne<br/>                    /newPackage/cmd/commandTwo</span></pre><h2 id="b09e" class="kf kg ik bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz dt translated">还有别的吗？</h2><p id="370a" class="pw-post-body-paragraph jh ji ik jj b jk la jm jn jo lb jq jr js lc ju jv jw ld jy jz ka le kc kd ke hn dt translated">随着时间的推移，还有其他一些东西可能会变得更加普遍。</p><p id="0c11" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">首先是插件。这些是预构建的包，可以在运行时导入到流程中。我不确定是否有任何习惯用法出现，但如果有特定的子包是插件，我会在包的根目录下创建一个插件目录。</p><p id="d880" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">第二个是内部文件夹——这是值得了解的。老实说，这非常简单，它将代码从包中分离出来，因此只允许从包范围调用它——即包中已经存在的代码。</p><h2 id="7ba1" class="kf kg ik bd kh ki kj kk kl km kn ko kp js kq kr ks jw kt ku kv ka kw kx ky kz dt translated">不要相信我的话</h2><p id="e2ed" class="pw-post-body-paragraph jh ji ik jj b jk la jm jn jo lb jq jr js lc ju jv jw ld jy jz ka le kc kd ke hn dt translated">这种布局可能不适用于所有人。可能有更好的方法。让我知道你的想法——要么在这里让每个人都看到你的想法，要么在推特上通过<a class="ae ih" href="https://twitter.com/matzhouse" rel="noopener ugc nofollow" target="_blank"> matzhouse </a>告诉我</p><p id="4907" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果这是有用的，那么为什么不击中心脏:)</p><div class="lu lv lw lx fq ab cb"><figure class="mh hw mi mj mk ml mm paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mh hw mi mj mk ml mm paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mh hw mi mj mk ml mm paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mn mo mp"><p id="f922" class="jh ji lt jj b jk jl jm jn jo jp jq jr mq jt ju jv mr jx jy jz ms kb kc kd ke hn dt translated"><a class="ae ih" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae ih" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae ih" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ih" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jh ji lt jj b jk jl jm jn jo jp jq jr mq jt ju jv mr jx jy jz ms kb kc kd ke hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ih" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ih" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="lu lv lw lx fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mt"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>