<html>
<head>
<title>Kotlin Support Public Beta</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kotlin支持公共测试版</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/kotlin-support-public-beta-7a9cb034483?source=collection_archive---------17-----------------------#2017-07-11">https://medium.com/hackernoon/kotlin-support-public-beta-7a9cb034483?source=collection_archive---------17-----------------------#2017-07-11</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="1f28" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在将Kotlin移植到<a class="ae jp" href="http://github.com/codenameone/CodenameOne/" rel="noopener ugc nofollow" target="_blank"> Codename One </a>方面，我们已经做好了艰苦努力的准备……事实证明，获得基本支持比预期的要容易得多，只是有一些预期的警告，希望在未来可以接受。Steve做了几乎所有的工作，我让他写一篇文章解释这些挑战，因为这不是他第一次将JVM语言移植到Codename One。</p><p id="1ae5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我会尽量涵盖使用Kotlin的用户体验。但是让我们从警告开始:</p><ul class=""><li id="2581" class="jq jr hu it b iu iv iy iz jc js jg jt jk ju jo jv jw jx jy dt translated">你需要使用IntelliJ/IDEA——我不认为这是一个很大的牺牲，因为它是一个优秀的IDE，有很好的Kotlin支持。对于其他IDE来说，这样做可能更具挑战性</li><li id="f8fa" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">你将需要我们前几天发布的最新的3.7.2插件</li><li id="abc5" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">您需要从Codename One首选项中的扩展管理器工具安装Kotlin支持库</li><li id="ab68" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">不要使用项目转换工具或者接受项目不是Kotlin项目的警告。我们自己完成构建过程</li><li id="c5a3" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">警告和错误没有正确列出，一个声称有2个错误的构建实际上通过了…</li><li id="d549" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">这将使您的jar大小增加大约730kb，这对自由层用户来说可能会更难</li></ul><p id="b4c3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">说了这么多，我们得到了几个可以在iOS、Android和网络上运行的应用程序(使用JavaScript端口),没有任何问题。这仍然是一个测试思想，所以我们可能已经错过了一些功能。</p><h1 id="bd2e" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">你好世界</h1><p id="b462" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">理想情况下，当我们改进它时，我们将在新项目向导中有一个Kotlin选项，它已经包含了所有必要的部分。但是现在你可以采取以下步骤。</p><p id="c83e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用3.7.2插件或更新版本打开您的Codename One项目。</p><p id="55a4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在右键菜单中选择代号一→代号一首选项。</p><p id="09bc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在<code class="eh lh li lj lk b">kotlin</code>中选择扩展类型并安装。然后右键单击项目选择Codename One →刷新库。</p><h2 id="b458" class="ll kf hu bd kg lm ln lo kk lp lq lr ko jc ls lt ks jg lu lv kw jk lw lx la ly dt translated">转换</h2><p id="f699" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">hello world Java源文件如下所示(删除了一些注释和空白):</p><figure class="lz ma mb mc fq md"><div class="bz el l di"><div class="me mf l"/></div></figure><p id="4bff" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当我选择该文件并选择菜单选项Code→Convert Java File to kot Lin File时，我得到如下结果:</p><figure class="lz ma mb mc fq md"><div class="bz el l di"><div class="me mf l"/></div></figure><p id="5f26" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这很熟悉。问题是在自动转换中有两个错误…那就是Kotlin的代码与标准Java的行为不同。</p><p id="ef85" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">第一个问题是，除非另行声明，否则Kotlin类是最终类，因此我们需要在类声明前添加open关键字:</p><pre class="lz ma mb mc fq mg lk mh mi aw mj dt"><span id="7cee" class="ll kf hu lk b fv mk ml l mm mn">open class MyApplication</span></pre><p id="20ec" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是很重要的，因为构建服务器会因为与instanceof相关的奇怪错误而失败，所以请注意…我们将来会尝试在模拟器上让它失败。</p><p id="e3d7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">第二个问题是默认情况下参数是非空的。<code class="eh lh li lj lk b">init</code>方法可能有一个没有被使用的空参数…所以这个方法会因异常而失败。解决方法是在通话结束后加一个问号:<code class="eh lh li lj lk b">fun init(context: Any?)</code>。</p><p id="0a37" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以完整的工作样本是:</p><figure class="lz ma mb mc fq md"><div class="bz el l di"><div class="me mf l"/></div></figure><h1 id="5810" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">我们将何去何从？</h1><p id="cde0" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">这取决于你。我们的GUI生成器仍然支持Java文件，我们也许可以让它也支持Kotlin文件，并改进向导以支持新的Kotlin项目。</p><p id="9a3b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们可以添加对NetBeans和Eclipse的支持。我们可以努力修改我们的文档，使之包括各地的Kotlin样本，没有限制…</p><p id="633b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们可以做很多事情，但要做到这些，我们需要反馈和牵引力。反馈有助于我们了解什么对使用我们产品的人来说是重要的。牵引带来新的用户，帮助我们推广我们正在做的事情。如果你关心这个，让你的朋友知道。他们可能会要求更多的Kotlin功能，我们将增加对Kotlin的投资。</p></div></div>    
</body>
</html>