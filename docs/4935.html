<html>
<head>
<title>Turn boring email notifications into actionable Slack conversations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将无聊的电子邮件通知变成可行的轻松对话</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/turn-boring-email-notifications-into-actionable-slack-conversations-3c6b1177e1e1?source=collection_archive---------12-----------------------#2017-06-30">https://medium.com/hackernoon/turn-boring-email-notifications-into-actionable-slack-conversations-3c6b1177e1e1?source=collection_archive---------12-----------------------#2017-06-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="63cb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">昨天，我与一位客户讨论，回答了他们关于我们的<a class="ae jp" href="http://3scale.net" rel="noopener ugc nofollow" target="_blank"> 3scale API管理</a>解决方案的一些问题。除了其他事情之外，他们还对我们的<em class="jq">“警报系统”</em>以及我们如何在他们的API出现高流量的情况下通知他们感到好奇。简单！如果有人即将达到API配额，我们会向您发送电子邮件。</p><p id="4936" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">几乎在我回答这个问题的同时，我想我听到自己在说…“等等，什么？！电子邮件？!"。有点像<a class="ae jp" href="https://hackernoon.com/tagged/apologizing" rel="noopener ugc nofollow" target="_blank">道歉</a>我们没有提供更现代的解决方案。我们结束了通话，我怀着强烈的意愿四处查看，看看我们如何才能改善这种体验。我必须弄清楚！这是我早间黑的故事。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff jr"><img src="../Images/87f2c187175a5956b00ae23e228d03ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bc01avAKIn8kMyN7XZ6s4A.png"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Ugly email notification</figcaption></figure><figure class="js jt ju jv fq jw fe ff paragraph-image"><div class="fe ff kh"><img src="../Images/1eb1ed06c6cce47a4fb8c5191c4eaee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*7pX-AQdOPIjLaUb0Dlamrw.jpeg"/></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Expected result in Slack</figcaption></figure><h2 id="1aaf" class="ki kj hu bd kk kl km kn ko kp kq kr ks jc kt ku kv jg kw kx ky jk kz la lb lc dt translated">连接块🔌🏗</h2><p id="6d20" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">我不知道你，但当我想到通知时，我通常会想到<a class="ae jp" href="http://slack.com" rel="noopener ugc nofollow" target="_blank"> Slack </a>。这就是我试图为我使用的<a class="ae jp" href="https://hackernoon.com/tagged/tools" rel="noopener ugc nofollow" target="_blank">工具</a>收集所有自动报告的地方。这个黑客会向Slack发送通知。</p><p id="f9ce" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此外，遗憾的是，我们的工程师没有时间来构建一个好的警报API，所以我不得不使用我拥有的资源:<em class="jq">一封电子邮件</em>。</p><p id="d06e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有许多像<a class="ae jp" href="http://context.io" rel="noopener ugc nofollow" target="_blank"> Context.io </a>或<a class="ae jp" href="http://nylas.com" rel="noopener ugc nofollow" target="_blank"> Nylas </a>这样的邮件API可以让你获取电子邮件并解析它们，但是这需要处理很多开销(OAuth、过滤电子邮件等等)。最好的解决方案是将通知发送到指定的电子邮件地址，并在那里解析它们。</p><p id="0f3e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Zapier 通过他们的<a class="ae jp" href="http://parser.zapier.com" rel="noopener ugc nofollow" target="_blank">解析器</a>产品提供了这个特性。他们给你一个电子邮件地址，你可以发送所有的电子邮件进行分析。它包括一个解析UI，您可以在其中定义想要提取的变量。</p><p id="8f68" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，为了在消息格式上更加灵活，我们不会直接将Zapier插入Slack，而是使用Zapier webhook操作将提取的数据发送到托管在<a class="ae jp" href="http://glitch.com" rel="noopener ugc nofollow" target="_blank"> Glitch </a>上的应用程序。</p><p id="11dd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们正在构建一个完整的无服务器解决方案😇</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff li"><img src="../Images/3d85a7cbdba55eec14c31480e9cdc177.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EIYMhfIow0kHz_gmfOJyng.png"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Webhook integration form on Slack</figcaption></figure><h2 id="0bb2" class="ki kj hu bd kk kl km kn ko kp kq kr ks jc kt ku kv jg kw kx ky jk kz la lb lc dt translated">设置松弛时间🤖💬</h2><p id="59c0" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">为了能够向您的Slack团队发送消息，我们需要创建一个<strong class="it hv">传入Webhook </strong>集成。按照这个<a class="ae jp" href="https://my.slack.com/services/new/incoming-webhook/" rel="noopener ugc nofollow" target="_blank">链接</a>，它应该会引导你配置集成。在那里，您将定义在哪个通道上发送通知。完成后，将Webhook URL放在手边，我们稍后会用到。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff lj"><img src="../Images/744f190dbe85dabb4ecf25880ecfb692.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z7gQW0QMmxTHXulWtxRI0g.png"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Zapier parser UI</figcaption></figure><h2 id="3157" class="ki kj hu bd kk kl km kn ko kp kq kr ks jc kt ku kv jg kw kx ky jk kz la lb lc dt translated">设置Zapier解析器和触发器📥⚙️</h2><p id="6de5" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">在Zapier上，我们将从配置邮件解析器<a class="ae jp" href="http://parser.zapier.com" rel="noopener ugc nofollow" target="_blank">开始，这里是</a>。一旦你有一个地址，发送一个通知电子邮件的例子，这样我们就可以设置一个模板。几秒钟后，邮件应该被解析器收到，你应该看到它出现了。然后，突出显示您想要从电子邮件中提取的变量，并给它们命名。</p><p id="36ec" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦模板被定义，我们将配置一个<em class="jq"> Zap </em>来连接电子邮件解析器和我们的应用程序。在<em class="jq"> Zap </em>中，选择<strong class="it hv">邮件解析器</strong> app，触发<strong class="it hv">新邮件</strong>动作。如果您测试这一步，您应该能够检索您先前发送到<em class="jq">解析器</em>电子邮件地址的消息。</p><h2 id="f4bc" class="ki kj hu bd kk kl km kn ko kp kq kr ks jc kt ku kv jg kw kx ky jk kz la lb lc dt translated">该应用程序🎏💻</h2><p id="ab71" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">该应用程序将公开一个<strong class="it hv">POST</strong>route<em class="jq">/hook</em>，其中Zapier将发送一个包含提取数据的请求。你可以在Glitch上检查我的例子，并用你自己的变量重新混合它。</p><p id="603d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在<em class="jq">中。env </em>文件，你应该给变量添加值。获取我们之前在Slack上创建的Hook URL，并通过添加用户名和图标为您的通知添加一些个性。ZAPIER_SECRET变量应该是一个随机字符串，我们将使用它来识别请求来自Zapier webhook。</p><p id="dfeb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">消息格式化发生在<em class="jq"> slack.js </em>文件上。您可以从Slack中检查<a class="ae jp" href="https://api.slack.com/docs/messages/builder" rel="noopener ugc nofollow" target="_blank">消息生成器</a>来运行格式化测试。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff lk"><img src="../Images/ae9c0983c361a10c41ab380c1670844a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A5w8rg_IrlmAwKMWXlM5wg.png"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Webhook configuration on Zapier</figcaption></figure><h2 id="3058" class="ki kj hu bd kk kl km kn ko kp kq kr ks jc kt ku kv jg kw kx ky jk kz la lb lc dt translated">将webhook操作添加到Zapier🎣⚙️</h2><p id="fdd5" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">现在，我们的应用程序出现了故障，我们可以向我们的<em class="jq"> Zap </em>添加一个动作。</p><p id="511d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">添加一个指向URL<a class="ae jp" href="https://YOUR_GLITCH_APP_NAME.glitch.me/hook" rel="noopener ugc nofollow" target="_blank">https://YOUR _ GLITCH _ APP _ name . GLITCH . me/hook</a>的POST类型的Webhook操作</p><p id="7ae4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">In应该返回一个JSON有效负载。然后定义将发送到应用程序的变量，并将它们映射到我们提取的变量。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff ll"><img src="../Images/defd84cf89a03061bfe85f95c3bf5955.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WwPma046NW1DY1kwvfX-Rw.png"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Secret header for security</figcaption></figure><p id="0143" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，为了安全起见，我们将定义一个名为<em class="jq"> X-zapier-secret </em>的头，其值与我们之前定义的<strong class="it hv"> ZAPIER_SECRET </strong>环境变量的值相同。</p><h2 id="9439" class="ki kj hu bd kk kl km kn ko kp kq kr ks jc kt ku kv jg kw kx ky jk kz la lb lc dt translated">测试和享受🎉🎊</h2><p id="1149" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">就这样，你现在完成了👍测试流程，看看消息是否按照您想要的方式呈现。当你对结果满意时，打开<em class="jq"> Zap </em>。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div class="fe ff lm"><img src="../Images/707aa9b3d4df7a5f4eb56650205ed9f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*VryUy0b0Gxr57rmceDHp1A.png"/></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Expected result on Slack</figcaption></figure><p id="1768" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，您可以忽略电子邮件通知，因为它们都以一种美丽而全面的方式发送到Slack。</p><p id="5e1e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你想增强这个流程，我们可以稍后添加<a class="ae jp" href="https://api.slack.com/docs/message-buttons" rel="noopener ugc nofollow" target="_blank">可操作按钮</a>，但这需要更多的工作。</p><p id="eef0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我知道你对这些黑客的看法！</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff ln"><img src="../Images/b32d1cf0362615a67e47d52ffc0dc4fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fnEnn1DKryddXYR4jDd2oA.jpeg"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Image by Markus Petritz found on Unsplash</figcaption></figure><div class="js jt ju jv fq ab cb"><figure class="lo jw lp lq lr ls lt paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="lo jw lp lq lr ls lt paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="lo jw lp lq lr ls lt paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="lu lv lw"><p id="f922" class="ir is jq it b iu iv iw ix iy iz ja jb lx jd je jf ly jh ji jj lz jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客们下午的开始。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is jq it b iu iv iw ix iy iz ja jb lx jd je jf ly jh ji jj lz jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff ma"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="js jt ju jv fq jw"><div class="bz el l di"><div class="mb mc l"/></div></figure></div></div>    
</body>
</html>