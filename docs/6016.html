<html>
<head>
<title>Trace/Monitor Chain of Microservice Logs in the Same Transaction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">跟踪/监控同一事务中的微服务日志链</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/trace-monitor-chain-of-microservice-logs-in-the-same-transaction-f13420f2d42c?source=collection_archive---------9-----------------------#2017-08-29">https://medium.com/hackernoon/trace-monitor-chain-of-microservice-logs-in-the-same-transaction-f13420f2d42c?source=collection_archive---------9-----------------------#2017-08-29</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="30d3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在微服务架构中，日志、错误、监视器等可能会丢失...拥有一个公共的日志记录位置是使服务日志可按顺序查询的良好实践。在微服务领域，每个服务负责自己的异常和日志。</p><p id="771d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">考虑调用宇宙内外其他微服务的流水线微服务。如果链中的一个调用失败，我们可以预计链中之前的调用也可能引发错误，但是如何跟踪链中哪个请求导致了这个错误呢？</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/8e5c7d378edb94ebf7fbaebdab300916.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*A989Wjl33B7eVxPXF2sFiA.gif"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Demonstration</figcaption></figure><p id="7a30" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最快的解决方法是:如果请求没有'<strong class="it hv">请求ID </strong>信息，则从请求的开始放入'<strong class="it hv">请求ID </strong>或'<strong class="it hv">事务ID </strong>信息，并通过服务传递相同的“请求ID”。如果您使用HTTP在微服务之间建立连接，您可以将“请求ID”作为HTTP头。</p><p id="7cb9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当您开始记录请求链时，您将拥有<strong class="it hv">相同的‘请求ID’</strong>，这将<strong class="it hv">易于查询</strong>并分析哪一个导致了错误。</p><p id="f111" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，如果你对完全可追踪的系统感兴趣，也可以查看一下opentracing的规格。</p><p id="0874" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">快乐监控！</p></div></div>    
</body>
</html>