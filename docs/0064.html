<html>
<head>
<title>Flip the Switch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">扳动开关</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/flip-the-switch-239d2d479a29?source=collection_archive---------0-----------------------#2015-09-24">https://medium.com/hackernoon/flip-the-switch-239d2d479a29?source=collection_archive---------0-----------------------#2015-09-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="9ec0" class="pw-post-body-paragraph is it hu iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp hn dt translated">这些年来，我看过(也听过)很多switch语句是<a class="ae jq" href="http://ericleads.com/2012/12/switch-case-considered-harmful/" rel="noopener ugc nofollow" target="_blank">害</a>、<a class="ae jq" href="http://debuggable.com/posts/code-insults-round-1---why-switch-blocks-are-dumb:4901d363-d210-482c-9794-65bd4834cda3" rel="noopener ugc nofollow" target="_blank">哑</a>，甚至<a class="ae jq" href="http://c2.com/cgi/wiki?SwitchStatementsSmell" rel="noopener ugc nofollow" target="_blank">T5】臭 </a> (lol)的原因。我不喜欢讨厌某个特定的特性，道格拉斯·克洛克福特在他的传奇书籍<a class="ae jq" href="http://shop.oreilly.com/product/9780596517748.do" rel="noopener ugc nofollow" target="_blank"> <em class="jr">的第一章中解释了为什么:好的部分</em> </a> <em class="jr"> - </em></p><blockquote class="js jt ju"><p id="1afb" class="is it jr iu b iv iw ix iy iz ja jb jc jv je jf jg jw ji jj jk jx jm jn jo jp hn dt translated">大多数<a class="ae jq" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程</a>语言都包含好的部分和不好的部分。我发现，通过只使用好的部分，避免坏的部分，我可以成为一个更好的程序员。</p></blockquote><p id="411a" class="pw-post-body-paragraph is it hu iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp hn dt translated"><em class="jr">开关</em>声明是一个<strong class="iu hv">合格的</strong>特征。像大多数有能力的特性一样，它也有很多问题——需要在一个<em class="jr"> case </em>中的每一条语句之后使用<em class="jr"> break </em>,过程控制流，不合适的语法，代码块的处理，等等！不幸的是，解决这些问题需要我们重写它在核心的运行方式，规范会完全改变，这对于像JavaScript这样的语言来说，会产生大量的向后兼容性问题。我再次引用克罗克福德的话-</p><blockquote class="js jt ju"><p id="49a7" class="is it jr iu b iv iw ix iy iz ja jb jc jv je jf jg jw ji jj jk jx jm jn jo jp hn dt translated">对于标准委员会来说，消除语言中的缺陷几乎是不可能的，因为这样做会导致依赖于那些不良部分的所有不良程序的崩溃。他们通常无能为力，除了在现有的不完美的基础上增加更多的功能。并且新的特征并不总是和谐地相互作用，因此产生了更多坏的部分。</p></blockquote><figure class="jz ka kb kc fq kd fe ff paragraph-image"><div class="fe ff jy"><img src="../Images/3e091afabbd42cf945223dbe5a5af8b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*T8HRLzfoC80FcP27Z1mZ_g.jpeg"/></div></figure><p id="0807" class="pw-post-body-paragraph is it hu iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp hn dt translated">那我们该怎么做呢？我们认为它是一个次优的特性，因为它比JavaScript开发人员可用的其他选项差，所以继续前进。今天，我们将研究这些优越的选择之一——对象文字。创建类似于<em class="jr">开关</em>的控制流的对象字面方法利用了散列表查找，并且显然使用了对象，JavaScript语言的基础——我们将它们用于<a class="ae jq" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Introduction_to_Object-Oriented_JavaScript" rel="noopener ugc nofollow" target="_blank">一切</a>！</p><p id="d8f4" class="pw-post-body-paragraph is it hu iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp hn dt translated">让我们首先来看看这个基本的控制流，它使用一个<em class="jr"> switch </em>语句来报告某种水果的价格。</p><pre class="jz ka kb kc fq kg kh ki kj aw kk dt"><span id="6aa6" class="kl km hu kh b fv kn ko l kp kq">function getPrice(fruit) {<br/>  var price;<br/>  switch (fruit) {<br/>    case 'orange':<br/>      price = 2.99;<br/>      break;<br/>    case 'apple':<br/>      price = 1.24;<br/>      break;<br/>    case 'cherry':<br/>      price = 3.55;<br/>      break;<br/>    default:<br/>      price = 1.11;<br/>  }<br/>  return 'My fruit costs ' + price;<br/>}</span><span id="e8b0" class="kl km hu kh b fv kr ko l kp kq">console.log(get('apple')); // =&gt; My fruit costs 1.24<br/>console.log(getPrice('apricot')); // =&gt; My fruit costs 1.10</span></pre><p id="4658" class="pw-post-body-paragraph is it hu iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp hn dt translated">现在，让我们用一个非常简单的对象来重写它。</p><pre class="jz ka kb kc fq kg kh ki kj aw kk dt"><span id="8ad4" class="kl km hu kh b fv kn ko l kp kq">function getPrice(fruit) {<br/>  var fruits <strong class="kh hv">=</strong> {<br/>    orange<strong class="kh hv">:</strong> 2.99,<br/>    apple<strong class="kh hv">:</strong> 1.24,<br/>    cherry<strong class="kh hv">:</strong> 3.55,<br/>    default<strong class="kh hv">:</strong> 1.11<br/>  };<br/>  return 'My fruit costs' <strong class="kh hv">+</strong> (fruits[fruit] <strong class="kh hv">|| </strong>items['default']);<br/>}</span></pre><p id="7882" class="pw-post-body-paragraph is it hu iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp hn dt translated">这个已经干净了很多，也短了很多。我们可以通过跳过赋值并使用<em class="jr"> || </em> (OR)操作符作为默认值来进一步简化。最重要的是，永远不要忘记一次<em class="jr">再破</em>！</p><pre class="jz ka kb kc fq kg kh ki kj aw kk dt"><span id="95a8" class="kl km hu kh b fv kn ko l kp kq">function getDrink(type) {<br/>  return 'My fruit costs ' <strong class="kh hv">+</strong> ({<br/>    orange<strong class="kh hv">:</strong> 2.99,<br/>    apple<strong class="kh hv">:</strong> 1.24,<br/>    cherry: 3.55<br/>  }[type] || 1.11);<br/>}</span><span id="69bc" class="kl km hu kh b fv kr ko l kp kq">// undefined || 1.11 === 1.11</span></pre><p id="93c6" class="pw-post-body-paragraph is it hu iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp hn dt translated">到目前为止，您应该能够看出，在创建更清晰的控制流方面，对象文字优于<em class="jr"> switch </em>语句。然而，我们也应该探索它们实际上如何更具可扩展性-</p><pre class="jz ka kb kc fq kg kh ki kj aw kk dt"><span id="555c" class="kl km hu kh b fv kn ko l kp kq">function getPrice(fruit) {<br/>  var fruits = {<br/>    orange: function () {<br/>      return 2.99;<br/>    },<br/>    apple: function () {<br/>      return 1.24;<br/>    },<br/>    cherry: function () {<br/>      return 3.55;<br/>    },<br/>    default: function () {<br/>      return 1.11;<br/>    }<br/>  };<br/>  return (fruits[fruit] || fruits[‘default’])();<br/>}</span></pre><p id="3e2d" class="pw-post-body-paragraph is it hu iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp hn dt translated">有时，我们可能需要将复杂的操作分配给控制流中的某个条件，事实上，我们可以将函数内联定义为对象文字的键。显然，在上面的例子中，一个函数是完全不必要的，但它足以证明这种能力。</p></div><div class="ab cl ks kt hc ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hn ho hp hq hr"><p id="2b70" class="pw-post-body-paragraph is it hu iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp hn dt translated">在编写JavaScript应用程序时，使用对象文字来开发自然、干净和灵活的控制流。编码快乐！</p><div class="jz ka kb kc fq ab cb"><figure class="kz kd la lb lc ld le paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="kz kd la lb lc ld le paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="kz kd la lb lc ld le paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="js jt ju"><p id="f922" class="is it jr iu b iv iw ix iy iz ja jb jc jv je jf jg jw ji jj jk jx jm jn jo jp hn dt translated"><a class="ae jq" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jq" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jq" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jq" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="is it jr iu b iv iw ix iy iz ja jb jc jv je jf jg jw ji jj jk jx jm jn jo jp hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jq" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jq" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jz ka kb kc fq kd fe ff paragraph-image"><a href="https://goo.gl/Ahtev1"><div class="fe ff lf"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></a></figure><figure class="jz ka kb kc fq kd"><div class="bz el l di"><div class="lg lh l"/></div></figure></div></div>    
</body>
</html>