<html>
<head>
<title>Debugging React Like a Champ with VSCode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用VSCode，调试反应像冠军一样</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/debugging-react-like-a-champ-with-vscode-66281760037?source=collection_archive---------0-----------------------#2017-10-22">https://medium.com/hackernoon/debugging-react-like-a-champ-with-vscode-66281760037?source=collection_archive---------0-----------------------#2017-10-22</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/4e7de2cdc7118cfe15d2ecf38c1943e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XzK7XPYkM2le0dgoKqxtjA.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">VSCode debugging tools and Facebook’s Jest</figcaption></figure><p id="07c7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我在终端、浏览器和编辑器之间来回切换的日子已经一去不复返了。没人有时间做那个！</p><p id="ad75" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在本指南中，我将向您展示如何使用Visual Studio代码的调试功能来增强React工作流。您将学习如何连接VSCode和Chrome，以便直接从VSCode调试浏览器代码😎</p><h1 id="4296" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">设置测试项目</h1><p id="6fd1" class="pw-post-body-paragraph jg jh hu ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hn dt translated">在开始本教程之前，我们需要创建一个测试应用程序，我们将在本文的后面使用它。我经常使用<a class="ae lh" href="https://github.com/facebookincubator/create-react-app" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>，因为我讨厌写样板文件。我们也将在本教程中使用它。或者，如果您有一个现有的应用程序，您可以使用它。</p><p id="2578" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">首先创建测试项目:</p><ol class=""><li id="33d4" class="li lj hu ji b jj jk jn jo jr lk jv ll jz lm kd ln lo lp lq dt translated">通过运行<code class="eh lr ls lt lu b">npm i -g create-react-app</code>全局安装<code class="eh lr ls lt lu b">create-react-app</code></li><li id="5abc" class="li lj hu ji b jj lv jn lw jr lx jv ly jz lz kd ln lo lp lq dt translated">安装完成后，运行<code class="eh lr ls lt lu b">create-react-app vscode-tutorial</code>创建一个新项目</li></ol><p id="6dc7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这将创建一个包含新React应用程序的新目录。</p><h1 id="ea18" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">设置VSCode</h1><p id="c758" class="pw-post-body-paragraph jg jh hu ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hn dt translated">接下来，我们需要安装VSCode扩展，以便它知道如何与Chrome对话。VSCode通过Chrome的<a class="ae lh" href="https://developer.chrome.com/devtools/docs/debugger-protocol" rel="noopener ugc nofollow" target="_blank">调试器协议</a>连接Chrome。这与Chrome的开发工具使用的调试器协议相同。你可以使用VSCode来调试浏览器代码，而不是使用Chrome的开发工具。</p><h2 id="073e" class="ma kf hu bd kg mb mc md kk me mf mg ko jr mh mi ks jv mj mk kw jz ml mm la mn dt translated">为Chrome扩展安装调试器</h2><p id="0ec8" class="pw-post-body-paragraph jg jh hu ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hn dt translated">为了让VSCode和Chrome相互通信，我们需要为Chrome 安装一个名为<em class="mo">调试器的扩展。通过导航到扩展窗格并搜索:<em class="mo"> debugger for chrome </em>来安装它。它应该类似于下图:</em></p><figure class="mq mr ms mt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mp"><img src="../Images/9dc751fa5046dc75c9910277d1b037b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M9IewWesFpwIILHkje2OVQ.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Debugger for Chrome VSCode Extension</figcaption></figure><h1 id="8a5b" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">配置VSCode以连接到Chrome</h1><p id="c2cd" class="pw-post-body-paragraph jg jh hu ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hn dt translated">接下来我们需要配置VSCode来使用connect to Chrome。</p><ol class=""><li id="a88c" class="li lj hu ji b jj jk jn jo jr lk jv ll jz lm kd ln lo lp lq dt translated">单击调试图标</li><li id="2c34" class="li lj hu ji b jj lv jn lw jr lx jv ly jz lz kd ln lo lp lq dt translated">点击下拉菜单(播放按钮旁边)并按“添加配置…”</li><li id="5951" class="li lj hu ji b jj lv jn lw jr lx jv ly jz lz kd ln lo lp lq dt translated">从“选择环境”下拉菜单中选择“Chrome”。</li></ol><p id="8f84" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">迷茫？这里有一个gif …</p><figure class="mq mr ms mt fq iv"><div class="bz el l di"><div class="mu mv l"/></div></figure><p id="9f5f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">一个新的<code class="eh lr ls lt lu b">.vscode</code>目录将自动添加到您的项目根目录中。该目录将包含一个<code class="eh lr ls lt lu b">launch.json</code>文件，用于为当前项目配置VSCode的调试器。每次创建新项目时，您都必须遵循相同的步骤来设置远程调试(或者将<code class="eh lr ls lt lu b">.vscode</code>目录从一个项目复制到下一个项目)。</p><p id="9551" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">修改<code class="eh lr ls lt lu b">url</code>属性以指向开发服务器的URL。对<code class="eh lr ls lt lu b">create-react-app</code>来说是<code class="eh lr ls lt lu b"><a class="ae lh" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a></code>。您的<code class="eh lr ls lt lu b">launch.json</code>应该看起来像这样(感谢VSCode的<a class="ae lh" rel="noopener" href="/@auchenberg"> Kenneth Auchenberg </a>提供的发布建议)…</p><figure class="mq mr ms mt fq iv"><div class="bz el l di"><div class="mw mv l"/></div></figure><p id="fb06" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">配置选项的完整列表可以在找到<a class="ae lh" href="https://github.com/Microsoft/vscode-chrome-debug#other-optional-launch-config-fields" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="93ca" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">运行调试器</h1><p id="f35b" class="pw-post-body-paragraph jg jh hu ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hn dt translated">别担心，我们快完成了。接下来，我们需要使用我们的测试项目来测试调试器是否正常工作。</p><h2 id="3e5e" class="ma kf hu bd kg mb mc md kk me mf mg ko jr mh mi ks jv mj mk kw jz ml mm la mn dt translated">启动调试器</h2><p id="46be" class="pw-post-body-paragraph jg jh hu ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hn dt translated">您可以通过执行下列操作之一来启动调试器:</p><ul class=""><li id="c1fe" class="li lj hu ji b jj jk jn jo jr lk jv ll jz lm kd mx lo lp lq dt translated">按F5键</li><li id="5e3f" class="li lj hu ji b jj lv jn lw jr lx jv ly jz lz kd mx lo lp lq dt translated">按下调试面板中的绿色播放按钮</li><li id="dfbb" class="li lj hu ji b jj lv jn lw jr lx jv ly jz lz kd mx lo lp lq dt translated">从菜单中选择<code class="eh lr ls lt lu b">Debug &gt; Start Debugger</code></li></ul><p id="80b8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果调试器成功启动，您将看到一个小工具栏出现在VSCode的顶部，类似于下图…</p><figure class="mq mr ms mt fq iv fe ff paragraph-image"><div class="fe ff my"><img src="../Images/4bd5775b627316ad27e06d7e0a798343.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*Ns85-LzoBgClcNatsBuoEQ.png"/></div></figure><h2 id="91da" class="ma kf hu bd kg mb mc md kk me mf mg ko jr mh mi ks jv mj mk kw jz ml mm la mn dt translated">设置断点</h2><p id="c15e" class="pw-post-body-paragraph jg jh hu ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hn dt translated">断点用于告诉调试器在代码中的特定点暂停代码的执行。这允许您在应用程序运行时检查变量、调用堆栈并修改代码。</p><p id="6efe" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们在测试应用中设置一个断点。打开<code class="eh lr ls lt lu b">src/App.js</code>，在第11行旁边的空白处点击鼠标。应该会出现一个红点，表示已经添加了一个断点。如果你有点困惑，请看下面的gif图…</p><figure class="mq mr ms mt fq iv"><div class="bz el l di"><div class="mz mv l"/></div></figure><h2 id="2800" class="ma kf hu bd kg mb mc md kk me mf mg ko jr mh mi ks jv mj mk kw jz ml mm la mn dt translated">启动开发服务器</h2><p id="c7bb" class="pw-post-body-paragraph jg jh hu ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hn dt translated">最后，为了看到一切工作协调一致，在终端中启动开发服务器buy running <code class="eh lr ls lt lu b">npm start</code>。这将启动一个新的服务器，可以在地址<a class="ae lh" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>访问该服务器</p><figure class="mq mr ms mt fq iv fe ff paragraph-image"><div class="fe ff na"><img src="../Images/403d2de3db46e8d73073cb9d4aa18a0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*bxUZwnWT0W0CagUpoSzi1g.png"/></div></figure><p id="d652" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">导航到<a class="ae lh" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>，您应该会看到“冻结”页面。这是因为应用程序遇到了断点。如果切换回VSCode，您会注意到第11行被突出显示，并且调试窗格被更新以反映调用堆栈。</p><figure class="mq mr ms mt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nb"><img src="../Images/6c2f0b62b8e96c2f67cf72ba49fba2ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qn2CeUXCJHuNRTfbFdczQQ.png"/></div></div></figure><p id="216c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果一切顺利，恭喜你！您刚刚学习了如何在VSCode中设置远程调试。如果你想了解更多关于在VSCode <a class="ae lh" href="https://code.visualstudio.com/docs/editor/debugging" rel="noopener ugc nofollow" target="_blank">中调试的信息，请阅读这个</a>。</p><h1 id="be29" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">用Jest进行连续测试</h1><p id="4874" class="pw-post-body-paragraph jg jh hu ji b jj lc jl jm jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd hn dt translated">让我的单元测试和调试器一起运行对我很有帮助。我喜欢在每次修改实现时运行我的测试。幸好<code class="eh lr ls lt lu b">create-react-app</code>是自动设置来做这件事的。只需在终端键入<code class="eh lr ls lt lu b">npm test</code>开始jest。它会自动监视您的文件，并在保存时运行。看起来是这样的…</p><figure class="mq mr ms mt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nc"><img src="../Images/beb0f78dd343c404adf1646506049744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L6X2xS7PqjfkXh4quww1Wg.png"/></div></div></figure><p id="2d5b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">很酷吧？</p><p id="0a3e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在以后的文章中，我将更详细地介绍如何调试JavaScript。如果你觉得这篇文章很有帮助，并且想了解JavaScript和web开发世界中的最新动态<a class="ae lh" href="https://twitter.com/JamesJefferyUK?lang=en" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv">请在Twitter上关注我</strong> </a>。</p><p id="38ff" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">调试愉快！</p><h2 id="ec41" class="ma kf hu bd kg mb mc md kk me mf mg ko jr mh mi ks jv mj mk kw jz ml mm la mn dt translated">进一步阅读</h2><ul class=""><li id="7fe2" class="li lj hu ji b jj lc jn ld jr nd jv ne jz nf kd mx lo lp lq dt translated"><a class="ae lh" href="https://code.visualstudio.com/docs/editor/debugging#_launch-configurations" rel="noopener ugc nofollow" target="_blank">https://code.visualstudio.com/docs/editor/debugging</a></li><li id="63c2" class="li lj hu ji b jj lv jn lw jr lx jv ly jz lz kd mx lo lp lq dt translated"><a class="ae lh" href="https://code.visualstudio.com/blogs/2016/02/23/introducing-chrome-debugger-for-vs-code" rel="noopener ugc nofollow" target="_blank">https://code . visual studio . com/blogs/2016/02/23/introducing-chrome-debugger-for-vs-code</a></li><li id="e271" class="li lj hu ji b jj lv jn lw jr lx jv ly jz lz kd mx lo lp lq dt translated"><a class="ae lh" href="https://github.com/Microsoft/vscode-chrome-debug" rel="noopener ugc nofollow" target="_blank">https://github.com/Microsoft/vscode-chrome-debug</a></li><li id="1fa2" class="li lj hu ji b jj lv jn lw jr lx jv ly jz lz kd mx lo lp lq dt translated"><a class="ae lh" href="https://facebook.github.io/jest/" rel="noopener ugc nofollow" target="_blank">https://facebook.github.io/jest/</a></li></ul></div></div>    
</body>
</html>