<html>
<head>
<title>5 Git Fundamentals</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">5 Git基础知识</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/5-git-fundamentals-ded819a34cfe?source=collection_archive---------1-----------------------#2016-10-18">https://medium.com/hackernoon/5-git-fundamentals-ded819a34cfe?source=collection_archive---------1-----------------------#2016-10-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="32d8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我正在开始一个关于g it技巧和窍门的系列，这些技巧和窍门是我在使用git的五年时间里学到的。我们将跳过日常基础知识，从帮助您利用版本控制的真正力量和便利的基础知识开始。</p></div><div class="ab cl ju jv hc jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hn ho hp hq hr"><p id="b143" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们从在您的主目录中创建一个<code class="eh jq jr js jt b"><strong class="it hv">.gitconfig</strong></code>文件开始。这个文件是所有git配置、定制和别名的基础。如果你好奇，我在最后贴了一个我的链接。</p><pre class="kb kc kd ke fq kf jt kg kh aw ki dt"><span id="bed4" class="kj kk hu jt b fv kl km l kn ko">[user]  <br/>  email = email@gmail.com<br/>  name = Jorge Yau</span><span id="42e1" class="kj kk hu jt b fv kp km l kn ko">[core]<br/>  editor = vim<br/>  ignorecase = false</span><span id="6da8" class="kj kk hu jt b fv kp km l kn ko">[push]<br/>  default = simple</span><span id="7e9d" class="kj kk hu jt b fv kp km l kn ko">[color "diff"]<br/>  meta = yellow bold ul  <br/>  frag = cyan bold ul<br/>  old = red bold  <br/>  new = green bold </span><span id="3610" class="kj kk hu jt b fv kp km l kn ko">[color "status"]  <br/>  added = green bold  <br/>  changed = yellow bold  <br/>  untracked = red bold</span><span id="3f49" class="kj kk hu jt b fv kp km l kn ko">[grep]<br/>  break = true<br/>  heading = true<br/>  lineNumber = true</span><span id="21d0" class="kj kk hu jt b fv kp km l kn ko">[alias]<br/>  g = grep --extended-regexp --break --heading --line-number</span></pre><p id="0ece" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦文件存在，git将预加载这些配置并将其用于所有进一步的命令。试着在回购中运行一个<code class="eh jq jr js jt b">git diff</code>，注意颜色是如何变化的。</p><p id="772d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我还包含了一个<strong class="it hv"> git别名</strong>，它基本上是一个命令的简写。在这种情况下，带有所有附加标志的<code class="eh jq jr js jt b">git grep</code>可以作为<code class="eh jq jr js jt b">git g</code>执行。</p><pre class="kb kc kd ke fq kf jt kg kh aw ki dt"><span id="ae70" class="kj kk hu jt b fv kl km l kn ko"># This longer command:<br/>$ git grep --extended-regexp --line-number --break --heading</span><span id="a004" class="kj kk hu jt b fv kp km l kn ko"># Is the equivalent of:<br/>$ git g</span></pre><p id="5ed6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">还要注意<code class="eh jq jr js jt b">[grep]</code>有一个<strong class="it hv">部分</strong>——在这里您可以指定默认选项和参数，这些选项和参数将在您每次运行<code class="eh jq jr js jt b">git grep</code>时应用。如果您在别名中包含相同的选项，它将覆盖默认选项。最后，区段可以有子区段，例如<code class="eh jq jr js jt b">[section “subsection”]</code></p><p id="4c9a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">每个命令都有数百种设置，每一种都有大量的选项可以自定义——阅读官方gitconfig文档，了解可能的选项。</p></div><div class="ab cl ju jv hc jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hn ho hp hq hr"><p id="2e69" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">虽然<strong class="it hv"> gitignore </strong>文件无处不在，但是您知道吗，您可以通过在您的主目录中创建一个<code class="eh jq jr js jt b"><strong class="it hv">.gitignore_global</strong></code>文件并将其添加到您的<code class="eh jq jr js jt b"><strong class="it hv">.gitconfig </strong></code>核心部分下来全局忽略文件模式。我建议把软件残余，IDE和OS相关的文件放在这里。</p><pre class="kb kc kd ke fq kf jt kg kh aw ki dt"><span id="11ab" class="kj kk hu jt b fv kl km l kn ko">.idea*<br/>**~<br/>.DS_Store</span></pre><p id="be44" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后将这一行添加到您的<code class="eh jq jr js jt b"><strong class="it hv">.gitconfig</strong></code>文件中:</p><pre class="kb kc kd ke fq kf jt kg kh aw ki dt"><span id="8404" class="kj kk hu jt b fv kl km l kn ko">[core]<br/>  excludesfile = ~/.gitignore_global</span></pre><p id="9104" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">或者运行这个命令，它会自动将其附加到您的<code class="eh jq jr js jt b">.gitignore</code></p><pre class="kb kc kd ke fq kf jt kg kh aw ki dt"><span id="cc65" class="kj kk hu jt b fv kl km l kn ko">git config --global core.excludesfile ~/.gitignore_global</span></pre></div><div class="ab cl ju jv hc jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hn ho hp hq hr"><p id="6530" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">说到grep，<code class="eh jq jr js jt b"><strong class="it hv">git grep</strong></code> <strong class="it hv"> </strong>是我搜索代码库的首选，而不是GNU grep或ack。它很快，自带git，默认情况下忽略你的<code class="eh jq jr js jt b"><strong class="it hv">.gitignore</strong></code>中的文件。</p><pre class="kb kc kd ke fq kf jt kg kh aw ki dt"><span id="2518" class="kj kk hu jt b fv kl km l kn ko"># Here's how to use it with more options below.<br/>$ git grep 'debugger'</span><span id="163d" class="kj kk hu jt b fv kp km l kn ko"><br/># Show the count of occurrences found for each file.<br/>$ git grep --count 'debugger'<br/></span><span id="2c97" class="kj kk hu jt b fv kp km l kn ko"># Ignore case sensitivity.<br/>$ git grep --ignore-case 'debugger'<br/></span><span id="3856" class="kj kk hu jt b fv kp km l kn ko"># Search through untracked files.<br/>$ git grep --untracked 'debugger'<br/></span><span id="454e" class="kj kk hu jt b fv kp km l kn ko"># Quiet mode. Exits 0 if match found. Useful for scripts and hooks.<br/>$ git grep --quiet debugger</span></pre></div><div class="ab cl ju jv hc jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hn ho hp hq hr"><p id="d149" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">说到grep，<strong class="it hv"> git ls-files </strong>命令无疑是最有用的git命令之一。我经常将它与<strong class="it hv"> grep </strong>和<strong class="it hv"> sed </strong>一起使用，以执行批量查找和替换或代码修整——偶尔使用regex和捕获的组(将来会有更多关于这个主题的内容)。然而，我也想忽略第三方文件，如<code class="eh jq jr js jt b"><strong class="it hv">node_modules</strong></code>目录，它没有常规grep甚至ack那么性感。</p><pre class="kb kc kd ke fq kf jt kg kh aw ki dt"><span id="f1e9" class="kj kk hu jt b fv kl km l kn ko">$ grep -E debugger . -rl --exclude-dir={*components*,*node_modules*}</span><span id="bc1f" class="kj kk hu jt b fv kp km l kn ko">$ ack debugger -l --ignore-dir={components,node_modules}</span></pre><p id="1d44" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果我需要存储库中所有文件的列表怎么办——没有简单的方法用常规的bash来实现这一点。还好，<code class="eh jq jr js jt b"><strong class="it hv">git ls-files</strong></code>会列出存储库中的所有文件，同时排除gitignore中的文件模式。</p><pre class="kb kc kd ke fq kf jt kg kh aw ki dt"><span id="a918" class="kj kk hu jt b fv kl km l kn ko">$ git ls-files </span><span id="e64c" class="kj kk hu jt b fv kp km l kn ko">.dockerignore<br/>.eslintignore<br/>.eslintrc.yml<br/>.gitignore<br/>.gitlab-ci.yml<br/>.scss-lint.yml<br/>Dockerfile<br/>README.md<br/>...</span></pre><p id="f268" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后，您可以将结果传送到grep来过滤某些文件。在本例中，我过滤了我的存储库中的所有JavaScript文件——<code class="eh jq jr js jt b">$</code>是为了确保排除掉<code class="eh jq jr js jt b">.json</code>文件。</p><pre class="kb kc kd ke fq kf jt kg kh aw ki dt"><span id="248f" class="kj kk hu jt b fv kl km l kn ko">$ git ls-files | grep -E \.js$</span></pre></div><div class="ab cl ju jv hc jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hn ho hp hq hr"><p id="95c3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在许多其他命令中，Git和grep经常成对出现。如果您想搜索提交消息，可以使用<code class="eh jq jr js jt b"><strong class="it hv">git log --grep</strong></code>。从我所看到的提交消息中进行搜索是一个很少使用但非常有用的功能，可以用来跟踪bug、跟踪功能开发和分析代码库。更多内容请见下文。</p><pre class="kb kc kd ke fq kf jt kg kh aw ki dt"><span id="af7e" class="kj kk hu jt b fv kl km l kn ko"># Search for 'bug' in the git commit message history.<br/>git log --grep 'bug'</span><span id="a265" class="kj kk hu jt b fv kp km l kn ko"># I recommend using this flag to ignore merge commits.<br/>git log --no-merges --grep 'bug'</span><span id="88f9" class="kj kk hu jt b fv kp km l kn ko"># Refine your searches to a particular author.<br/>git log --grep 'bug' --author 'codenameyau'</span></pre><p id="13f5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我有一个别名来在一行中漂亮地打印缩短的提交散列、日期、作者和提交消息。你可以这样使用它:</p><pre class="kb kc kd ke fq kf jt kg kh aw ki dt"><span id="f286" class="kj kk hu jt b fv kl km l kn ko"># Put this inside your ~/.gitconfig<br/>[alias]<br/>  search = log --no-merges -i -E --pretty='%h (%ad) - [%an] %s %d' --date=format:'%b %d %Y' --grep<br/></span><span id="ab12" class="kj kk hu jt b fv kp km l kn ko"># Then run the command like so:<br/>$ git search 'bug'</span><span id="6498" class="kj kk hu jt b fv kp km l kn ko"># Pipe it to wc to get the number of occurences for 'fix' or 'bug'.<br/>$ git search 'fix|bug' | wc -l</span></pre><figure class="kb kc kd ke fq ks fe ff paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="fe ff kr"><img src="../Images/48ff0bfc9f9fc91eb82b1b01fcd286c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hw1R1FTomUVB1wy3FmGBwQ.png"/></div></div><figcaption class="kz la fg fe ff lb lc bd b be z ek">Git search in action.</figcaption></figure><p id="a150" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了让<code class="eh jq jr js jt b"><strong class="it hv">git search</strong></code>有用，最好是上下文相关但简洁的提交消息，长度不超过80个字符。一个非常有用的约定是在发行号后面加上一个散列(#)。对于像GitHub这样的存储库管理人员来说，这将自动地将提交与问题联系起来，并且使得记录和调查问题更加可行。</p><pre class="kb kc kd ke fq kf jt kg kh aw ki dt"><span id="387a" class="kj kk hu jt b fv kl km l kn ko">$ git commit -m "#123 - Fix bug with useful git commit message"</span></pre></div><div class="ab cl ju jv hc jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hn ho hp hq hr"><p id="0d1e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">额外提示:一旦你掌握了基本原理，一定要查看一下<strong class="it hv"> git-extras </strong>库。它是git的扩展，带有非常有用的命令(<em class="kq">我正在看着你涂掉)</em>。</p><p id="6445" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://github.com/tj/git-extras/blob/master/Commands.md" rel="noopener ugc nofollow" target="_blank">https://github.com/tj/git-extras/blob/master/Commands.md</a></p></div><div class="ab cl ju jv hc jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hn ho hp hq hr"><p id="b3df" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如前所述，这是我的。<strong class="it hv"> gitconfig </strong>文件。</p><div class="ld le fm fo lf lg"><a href="https://github.com/codenameyau/dotfiles/blob/master/shell/.gitconfig" rel="noopener  ugc nofollow" target="_blank"><div class="lh ab ej"><div class="li ab lj cl cj lk"><h2 class="bd hv fv z el ll eo ep lm er et ht dt translated">codenameyau/dotfiles</h2><div class="ln l"><h3 class="bd b fv z el ll eo ep lm er et ek translated">点文件-我的点文件和文本编辑器配置</h3></div><div class="lo l"><p class="bd b gc z el ll eo ep lm er et ek translated">github.com</p></div></div><div class="lp l"><div class="lq l lr ls lt lp lu kx lg"/></div></div></a></div><p id="32c9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你从这篇文章中学到了什么或者只是喜欢它，请推荐它。我将不胜感激！</p></div><div class="ab cl ju jv hc jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hn ho hp hq hr"><p id="c5fc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这里是我的<strong class="it hv"> Git基础</strong>系列中的一些其他文章</p><ul class=""><li id="3bcf" class="lv lw hu it b iu iv iy iz jc lx jg ly jk lz jo ma mb mc md dt translated"><a class="ae jp" rel="noopener" href="/@codenameyau/updating-multiple-repos-with-one-command-9768c8cdfe46">用一个命令更新多个Git Repos】</a></li></ul><div class="kb kc kd ke fq ab cb"><figure class="me ks mf mg mh mi mj paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="me ks mf mg mh mi mj paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="me ks mf mg mh mi mj paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mk ml mm"><p id="f922" class="ir is kq it b iu iv iw ix iy iz ja jb mn jd je jf mo jh ji jj mp jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is kq it b iu iv iw ix iy iz ja jb mn jd je jf mo jh ji jj mp jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kb kc kd ke fq ks fe ff paragraph-image"><a href="https://goo.gl/Ahtev1"><div class="fe ff mq"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></a></figure><figure class="kb kc kd ke fq ks"><div class="bz el l di"><div class="mr ms l"/></div></figure></div></div>    
</body>
</html>