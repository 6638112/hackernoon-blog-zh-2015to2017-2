<html>
<head>
<title>How I hacked Google Daydream controller</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何黑掉谷歌白日梦控制器</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-i-hacked-google-daydream-controller-c4619ef318e4?source=collection_archive---------0-----------------------#2016-12-14">https://medium.com/hackernoon/how-i-hacked-google-daydream-controller-c4619ef318e4?source=collection_archive---------0-----------------------#2016-12-14</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="f944" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">反转并使其兼容苹果iOS设备。</p><h1 id="d364" class="jp jq hu bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">关于；在…各处 ；大约</h1><p id="28e3" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">大家好，我是<a class="ae ks" href="https://it.linkedin.com/in/matteopisani" rel="noopener ugc nofollow" target="_blank"> Matteo Pisani </a>一名富有创造力、好奇心和灵感的软件开发人员，有着黑客的态度和强烈的逆向工程倾向。<br/>我在物联网、嵌入式系统开发以及弥合物理现实和数字世界之间的差距方面积累了多年的经验。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff kt"><img src="../Images/b6b5f2033d8453ae39b64f0871d85dc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cJiwfM6EoYl_z1wOG9kDIA.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek"><strong class="bd lj">E-mail</strong>: matteo.pisani.91@gmail.com | <strong class="bd lj">LinkedIn</strong>: <a class="ae ks" href="https://it.linkedin.com/in/matteopisani" rel="noopener ugc nofollow" target="_blank">https://it.linkedin.com/in/matteopisani</a></figcaption></figure><h1 id="36a7" class="jp jq hu bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">摘要</h1><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lk"><img src="../Images/7f2a5031f5837b6aa61450d3ecf7b33c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WlX32yItaXqh9MsvTo4NMg.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Google Daydream controller and headset</figcaption></figure><p id="04bd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">移动虚拟现实正在快速发展。谷歌白日梦平台上个月刚刚推出，它表明引人注目的虚拟现实体验可能会比预期更快地广泛提供给消费者。如今，像<strong class="it hv">智能手机+耳机+蓝牙控制器</strong>这样的解决方案非常受开发者、媒体和娱乐公司的青睐，但是……有一个问题:<strong class="it hv">兼容性</strong>。正如宣布的那样，<strong class="it hv"> Daydream控制器</strong>只与一堆运行<strong class="it hv"> Android 7.0牛轧糖</strong>的<strong class="it hv"> Daydream-ready </strong>智能手机绑定。此外，据<strong class="it hv">克莱·巴沃</strong> <em class="ll">(谷歌虚拟现实副总裁)</em><strong class="it hv">谷歌白日梦</strong> <em class="ll">报道，“它目前与iOS不兼容，可能几年内都不会兼容。”</em>。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lm"><img src="../Images/1a31b8df25c1755fa1618bd9bc8ea450.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0VZdSDSYsud_ZqFD10BlZw.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Original post: <a class="ae ks" href="https://www.quora.com/Is-iPhone-compatible-with-Googles-Daydream-VR" rel="noopener ugc nofollow" target="_blank">https://www.quora.com/Is-iPhone-compatible-with-Googles-Daydream-VR</a></figcaption></figure><p id="4739" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">由于我喜欢挑战，我决定使用<em class="ll">代码</em>、<em class="ll">逆向工程</em>技能和一些<em class="ll">数学</em>来破解<strong class="it hv">谷歌白日梦控制器</strong>，以扩展在<strong class="it hv">苹果iOS </strong>设备上的兼容性:这很成功。</p><h1 id="923d" class="jp jq hu bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">分析</h1><p id="0c35" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated"><strong class="it hv"> Google Daydream控制器</strong>通过<strong class="it hv">蓝牙LE </strong> <em class="ll">(低能量)</em>工作，但我在我的<strong class="it hv"> iPhone 5 </strong>的<em class="ll">蓝牙设置</em>中未能发现它，所以我使用了<strong class="it hv">BlueCap</strong><em class="ll">(</em><a class="ae ks" href="http://github.com/troystribling/BlueCapapp" rel="noopener ugc nofollow" target="_blank"><em class="ll">【github.com/troystribling/BlueCapapp</em></a><em class="ll">)</em>，这样可以轻松实现<em class="ll">中央</em>和</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff ln"><img src="../Images/217d46589cf10f1060601db365da659e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wsFXzK-sCpV6Yu27UosGQA.png"/></div></div></figure><p id="200e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我查看了每个<em class="ll">服务</em>的可用数据:有已知的服务，如<em class="ll">设备信息</em>和<em class="ll">电池</em>，但我还在一个未知的服务<em class="ll"> FE55 </em>中发现了一些有趣的东西:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff ln"><img src="../Images/0e1b29d6d507c40253827d351f891186.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*82fu5-1Suau-3k3wWlwoZQ.png"/></div></div></figure><p id="6188" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当我用<strong class="it hv">UUID</strong><em class="ll">000000001–1000–1000–8000–00805 F9 b 34 FB</em>探索第一个<em class="ll">特征</em>内部，打开的<strong class="it hv">通知，<strong class="it hv"> BlueCap </strong>开始显示<em class="ll"> BLE数据包</em>。在空中挥动<strong class="it hv">白日梦控制器</strong>，我可以看到传入的<em class="ll">数据</em>实时变化。同样的事情发生在触摸顶部的垫或随机按下按钮。</strong></p><p id="1796" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">根据<strong class="it hv">蓝牙LE </strong>标准，每个<em class="ll">数据包</em>应重<strong class="it hv"> 20字节</strong>:<strong class="it hv">7be 85 B3 ff 13 b 48003 BF 1 FFA 000000000000070</strong></p><p id="5c8a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="ll">数据包</em>剖析显示，它们被编码并表示为<strong class="it hv">十六进制</strong>符号。在<em class="ll">屏蔽数据的背后</em>奠定了控制器的整体状态，包括<em class="ll">加速度计</em>、<em class="ll">陀螺仪</em>、<em class="ll">磁力计</em>、<em class="ll">触摸板</em>、<em class="ll">按钮</em>等。</p><h1 id="0454" class="jp jq hu bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">环境</h1><p id="017e" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">第一步是建立一个<em class="ll">测试环境</em>，以方便所有的<strong class="it hv">调试</strong>过程。我决定从头开始:我用<strong class="it hv">苹果XCode </strong>开发了一个<strong class="it hv">沙盒</strong>(在<strong class="it hv"> MacBook Pro </strong>上工作)和一个<strong class="it hv"> iOS app </strong>(带有一些<strong class="it hv"> Objective-C </strong>)，其中包括<strong class="it hv">core bluetooth \ core bluetooth . h</strong><em class="ll">框架</em><em class="ll">(</em><a class="ae ks" href="http://developer.apple.com/reference/corebluetooth" rel="noopener ugc nofollow" target="_blank"><em class="ll">developer.apple.com/reference/corebluetooth</em>多亏了这个，我可以通过蓝牙GATT协议建立和管理通信和数据流。</a></p><p id="59e9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在选择了<em class="ll">服务</em> <strong class="it hv"> FE55 </strong>并请求关于<em class="ll">特征</em><strong class="it hv">00000001–1000–1000–8000–00805 f9b 34 FB</strong>的通知后，我能够获得流经控制台的数据输出:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lo"><img src="../Images/07dd59e4c79919f50a7b04be7e4b0723.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4uAl6dTzmnaJzgUci7Gm6A.png"/></div></div></figure><p id="96f3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦数据被收集并及时解码，我决定把它表现成一个3D视图。因此，我将所有的<em class="ll"> iOS原生代码</em>迁移到一个<strong class="it hv">混合</strong> <em class="ll">环境</em>中，将它们全部打包到一个<strong class="it hv"> Cordova插件</strong>中:由于这个过程，我能够节省时间并执行一些优化。</p><p id="8f18" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用<strong class="it hv"> JavaScript </strong>降低了整体复杂性，加快了实验速度，并允许我改进数据可视化嵌入，这也要感谢令人惊叹的<strong class="it hv"> A-Frame </strong> <em class="ll"> WebGL框架</em><em class="ll">(</em><a class="ae ks" href="http://aframe.io" rel="noopener ugc nofollow" target="_blank"><em class="ll">aframe . io</em></a><em class="ll">)</em>在<em class="ll"> HTML5+CSS3 </em>视图内。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lp"><img src="../Images/d26ac4cdfc37b7e54f0b08ee21909532.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SIpZNxxRycZIBuXgSOFnoQ.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">(the entire environment stack)</figcaption></figure><p id="8dfb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">通过使用开源3D创作套件<a class="ae ks" href="http://blender.org" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv"> Blender </strong> </a>，我能够编辑互联网上找到的一个笨重的<strong class="it hv">谷歌白日梦控制器</strong>模型，使其适合我的目的。编辑后，我将其导出为符合<strong class="it hv"> A帧</strong>的格式(<strong class="it hv">)。obj </strong>。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lq"><img src="../Images/372a1970b24ce7d8bb29a77558a54504.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rDgt3szYGwfAFV23DirOPA.png"/></div></div></figure><p id="e77a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">只用几行代码，我就完成了整个设置，结果如下:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lr"><img src="../Images/5d8f92aa1c19321ff24afa09c540659d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pf7yz74L-Vbe4zqL42XYHA.png"/></div></div></figure><h1 id="9f64" class="jp jq hu bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">回动的</h1><p id="e6de" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">现在是最难的部分:理解原始数据。<br/>从关于<em class="ll">十六进制</em>到<em class="ll">十进制</em>转换的一般知识出发，我将<strong class="it hv">的40个字符</strong>拆分成<strong class="it hv">的20个组块</strong>中的<strong class="it hv"> 2个字符</strong>然后转换成<em class="ll">二进制</em>:</p><p id="5010" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">7b E8 5b 3f f1 3b 48 00 3b f1 ff A0 00 00 00 00 00 00 00 00 70</strong></p><p id="c989" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我只是想尝试一下，所以我测试了一个在线的十六进制转换器，这是输出</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff ls"><img src="../Images/edf6fc504ffb2687c48bbf6600bd8579.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d_Rz4DLmRbMLiJeqDDD33Q.png"/></div></div></figure><p id="aa59" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">后来我也试过<em class="ll">十进制</em>到<em class="ll">二进制</em>转换器。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lt"><img src="../Images/4eec8ab8f406d2875d4aa95b511169db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n_c69AUAQ6pPMKmEkuEqAQ.png"/></div></div></figure><p id="dba3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">将一切带到<strong class="it hv"> JavaScript </strong></p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/fd01748493496b7c7a929a8db5f06d27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*-wzmmy2SA2dh8ywddCP2Kw.png"/></div></figure><p id="9895" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">预期的输出是每个数据包的<strong class="it hv"> 160 </strong>位<em class="ll">长度链(8位* 20个块):</em></p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/75eba7163e7bf573b78378e82f90829d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*5GCTBXXls1Bm6W4OEjUWlQ.png"/></div></figure><p id="d080" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我只得到预期的<strong class="it hv"> 94 </strong>而不是<strong class="it hv"> 160 </strong> <em class="ll">位</em>，所以我意识到有些不对劲。<br/>深入问题后，我发现在<em class="ll">位</em>中转换的<em class="ll">十六进制</em>值有时会产生比<em class="ll"> 8 </em>短的结果，换句话说，不是<em class="ll">把</em>塞到<em class="ll"> 8 </em>的组中:<strong class="it hv"> zeropad </strong>到<em class="ll"> 8 </em>解决了所有问题。</p><p id="4665" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦我添加了<strong class="it hv"> zeropad </strong>方法并更改了代码:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/bc53a18b2513695e191fe3b3687f1e03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*yE0s-pMazEgenyNO9j74Ew.png"/></div></figure><p id="6151" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这一次，预期的结果是正确的。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/762e3abf1b12d85c5f782a49bc1b6e56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*Ee-if9f9OyzEEksI-WcDkw.png"/></div></figure><p id="e46d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">几个不眠之夜后，我开始给这个迷人的婊子链一个形状:关于<strong class="it hv"> IMU </strong> <em class="ll">(惯性测量单元)</em>和<strong class="it hv"> MEMS </strong> <em class="ll">(微机电系统)传感器</em>的综合知识，加上巨大的耐心和良好的观察技能，帮助我弄清楚发生了什么。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lv"><img src="../Images/d5d0cf2c7ca651254a8ef23db3f7cb8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Yu8AK0ecn60dK3DZSrLsA.png"/></div></div></figure><p id="854d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">关键点是:</p><p id="53f0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">*观察所有振荡的<em class="ll">位</em>；<br/> *用<em class="ll"> offests </em>多玩一点。</p><p id="d208" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这让我能够识别、提取和分类这些价值。我将它们全部报告如下:</p><p id="26f5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">传感器</strong>(值的12位<em class="ll">+符号</em>的1位<em class="ll"/></p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff lw"><img src="../Images/dfcbe6754646276c0919eaf9fa170de6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*BrAUF2My3Nce5ixD8MDPCA.png"/></div></figure><p id="36aa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">触摸板</strong>(数值的8位<em class="ll">)</em></p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/6d7c85a44605125425e1569bd7fedd7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*2mQTFWMvIKEs_puznbQi6Q.png"/></div></figure><p id="5d42" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">按钮</strong>(值的1位<em class="ll">)</em></p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/1f94e91a05a5e7f5b918c6e1628f279c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*jwx6boogZ1tMD-an8bqSeQ.png"/></div></figure><p id="420f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦我实现了这个目标，我试图操纵所有这些数据，通过<strong class="it hv"> A-Fram </strong> e canvas给3D<strong class="it hv">Google Daydream controller</strong>模型一个连贯的方向:不幸的是，屏幕上的输出导致了一个无意义运动的倾斜控制器。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lu"><img src="../Images/78b5f2fe40da1ee34f5069665f4740de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*EOBDaho_Jx5VcLxYOJgo7w.png"/></div></div></figure><p id="ccc9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">反转一些<strong class="it hv">。<strong class="it hv">谷歌虚拟现实服务</strong>的apk </strong>(在<strong class="it hv">谷歌像素</strong> <em class="ll">操作系统</em>中找到，允许通过<em class="ll"> BLE </em>与<strong class="it hv">谷歌白日梦控制器</strong>进行本地通信)，我能够得到有用的信息。</p><h1 id="5dde" class="jp jq hu bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">工具</h1><p id="eb50" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">通过使用<strong class="it hv"> apktool </strong>、<strong class="it hv"> dex2jar </strong>、<strong class="it hv"> jd-gui </strong>转换<strong class="it hv">对<strong class="it hv"> Android </strong>、Java<em class="ll">app进行逆向工程。apk </em></strong>文件到<strong class="it hv">。java </strong>，有可能:</p><p id="1f05" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">*了解应用程序中的特定UI是如何构造的<br/> *读取应用程序中的AndroidManifest.xml、权限、活动、意图等<br/> *发现应用程序中使用的本机库和映像<br/> *查找废弃代码(<strong class="it hv"> Android SDK </strong>)，默认情况下，使用<strong class="it hv">progguard</strong>工具，该工具通过删除未使用的代码和重命名具有语义模糊名称的类、字段和方法来缩小、优化和混淆代码。</p><p id="4e01" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我使用的工具:</p><p id="4ea1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> ApkTool </strong> ( <em class="ll">出自</em><a class="ae ks" href="http://code.google.com/p/android-apktool/" rel="noopener ugc nofollow" target="_blank"><em class="ll">http://code.google.com/p/android-apktool/</em></a><em class="ll">)</em></p><p id="db39" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">提取<em class="ll"> AndroidManifest.xml </em>和res文件夹中的所有内容(布局xml文件、图像、webview上使用的htmls等..)，运行以下命令:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/9f1fa9c66e0a3436a93d468f4948311e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*2PSrkVgA-ZlXzBUecvAcrA.png"/></div></figure><p id="e4c6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">它还提取了<strong class="it hv">。所有<strong class="it hv">的smali </strong>文件。类</strong>文件，但是很难读取。</p><p id="b76b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> Dex2jar </strong> ( <em class="ll">从</em><a class="ae ks" href="http://code.google.com/p/dex2jar/" rel="noopener ugc nofollow" target="_blank"><em class="ll">http://code.google.com/p/dex2jar/</em></a><em class="ll">)</em><br/>生成<strong class="it hv">。来自<strong class="it hv">的jar </strong>文件。apk </strong>文件，我们需要<strong class="it hv"> JD-GUI </strong>来查看来自这个<strong class="it hv">的源代码。震击器</strong>。<br/>运行以下命令:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff ly"><img src="../Images/613cca496698e066e71d1217fad8f6a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*7rRgzX4ELqsdbemCbefeQw.png"/></div></figure><p id="bb32" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> JD-GUI </strong> <em class="ll">(从</em><a class="ae ks" href="http://java.decompiler.free.fr/?q=jdgui" rel="noopener ugc nofollow" target="_blank"><em class="ll">http://java.decompiler.free.fr/?q=jdgui</em></a><em class="ll">)</em><br/>它反编译了<strong class="it hv">。类</strong>文件(在<strong class="it hv"> Android </strong> app的情况下被废弃，但在其他<strong class="it hv">的情况下获得可读的源代码。jar </strong>文件)。即我们得到<strong class="it hv">。java </strong>从应用程序回来了。<br/>只需在你的<em class="ll">操作系统</em>上运行jd-gui可执行文件，然后<em class="ll">文件- &gt;打开</em>查看<strong class="it hv"> Java </strong>代码<strong class="it hv">。震击器</strong>或<strong class="it hv">。类</strong>文件。</p><p id="90a6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">特别是，我在里面发现了有趣的信息:</p><p id="e572" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">*<strong class="it hv">com . Google . Android . VR . home . apk</strong><br/>*<strong class="it hv">com . Google . VR . VR core . apk</strong></p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lz"><img src="../Images/ff77965730ecc2cbe43634030f5728d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VXC_deOuLQ2ItodYDL8MJA.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">(magnetometer event)</figcaption></figure><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff ma"><img src="../Images/8f4859762c6bc64f8343a15d4ac3149e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7fwfUgPLo_rwMU6pK06RNQ.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">(accelerometer event)</figcaption></figure><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff mb"><img src="../Images/5d42242b02e922a34fc59cf0b8ca121a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ocf3blxR9pjO4KIA3kHsw.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">(gyroscope event)</figcaption></figure><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff mc"><img src="../Images/0dfed54baf339343b0ab97fae9a510a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R9iI6nI08wmUGAJOTEwJnA.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">(compensation methods)</figcaption></figure><p id="337e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">收集了我所有的开发者想法，并把它们组合在一起，我意识到最好的解决方案是使用<strong class="it hv"> AHRS </strong> <em class="ll">(姿态航向参考系统)</em>计算用于<strong class="it hv">JavaScript</strong><em class="ll">(</em><a class="ae ks" href="http://npmjs.com/package/ahrs" rel="noopener ugc nofollow" target="_blank"><em class="ll">npmjs.com/package/ahrs</em></a><em class="ll">)</em>。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff md"><img src="../Images/645a669dbb8a862b602663bfe37c7b7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G1bHmcOoo1l083lC7pm8OA.png"/></div></div></figure><p id="f91b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这可以计算带有以下所有传感器的设备的姿态和方向:磁力计、陀螺仪和加速度计。<em class="ll"> Madgwick </em>或<em class="ll"> Mahony </em>算法可用于实时过滤来自这些传感器的数据，获得极高的精确度。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff me"><img src="../Images/99c39c494e459a64eeea15cbba4fe3be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*PIg8Z4biVTu8VmzkJqCQcA.png"/></div></figure><p id="6f5e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> getEulerAnglesDegrees </strong>方法返回一个带有<em class="ll">欧拉角</em>(航向/偏航、俯仰、滚动)的对象，单位为<em class="ll">度</em>。</p><p id="51ad" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">返回<strong class="it hv">对象</strong>包含:</p><p id="7304" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">* <strong class="it hv">航向</strong>是从北往西(关于<em class="ll"> z轴</em>)。<br/> * <strong class="it hv">螺距</strong>是从垂直，向前(关于<em class="ll"> y轴</em>)。<br/> * <strong class="it hv">滚</strong>从垂直，向右(关于<em class="ll"> x轴</em>)。</p><p id="12cf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，我可以将模型方向设置为正确的坐标</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff mf"><img src="../Images/4770eaef521050dd8dd5aeac9e241bfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*5luMrY_KJisEzNlyoVZtlQ.png"/></div></figure><p id="3fe1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">结果是辉煌的:正如你在下面的YouTube视频中看到的，我记录了整个黑客的潜力</p><figure class="ku kv kw kx fq ky"><div class="bz el l di"><div class="mg mh l"/></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Google Daydream controller running on iOS (on an iPhone 5)</figcaption></figure><p id="d994" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">响应速度非常灵活，根据<strong class="it hv"> PPS </strong> <em class="ll">(每秒数据包数)</em>参数，<strong class="it hv"> ~ 60 </strong>足以覆盖一个VR游戏或3D体验。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lr"><img src="../Images/537e09ad38ec748043c47920f46751c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dC7gH-_qqotIqrwyNq2jOA.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">(Google Daydream controller running on an iPhone)</figcaption></figure><h1 id="a423" class="jp jq hu bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">结论</h1><p id="08e8" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">这种黑客开启的场景是多种多样的。既然秘方已经曝光，兼容性也扩展到了<strong class="it hv"> iOS </strong>设备，那么就有可能将这项工作复制到所有桌面平台。这将帮助开发者在桌面环境中调试他们自己的软件，而不需要每次都在智能手机上部署应用。在<strong class="it hv"> Android </strong>方面，这个黑客将释放<strong class="it hv"> Daydream控制器</strong>的全部潜力，因为它将不再局限于<em class="ll"> OS </em> <strong class="it hv"> Nougat 7.0 </strong>。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff mi"><img src="../Images/01b31e51a6b353ec4476f507bc319dbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zBxSB6-Ol-PIIwmEUAeNkw.png"/></div></div></figure><p id="01d6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从这个角度来看，有可能看到<strong class="it hv"> Daydream控制器</strong>与旧版本的<strong class="it hv"> Android </strong> <em class="ll"> OS </em>一起工作。另一方面，将这个控制器与像<strong class="it hv"> Raspberry PI </strong>或<strong class="it hv"> Arduino </strong>这样的开源平台绑定，将会扩展制作者和创意者的视野。你会想象用<strong class="it hv"> Daydream控制器</strong>来驾驶你的无人机或遥控汽车，演奏虚拟的架子鼓或者用虚拟的合成器制造一些声音吗？</p><p id="3957" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你想看到<strong class="it hv">谷歌白日梦控制器</strong>运行在<strong class="it hv"> Linux </strong>上吗？看看这个:<a class="ae ks" rel="noopener" href="/@matteo.pisani.91/how-i-hacked-google-daydream-controller-part-ii-2d27e6c46aac"> <strong class="it hv">我是如何黑掉谷歌Daydream控制器的(第二部分)</strong> </a> <strong class="it hv">。</strong></p><div class="ku kv kw kx fq ab cb"><figure class="mj ky mk ml mm mn mo paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mj ky mk ml mm mn mo paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mj ky mk ml mm mn mo paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mp mq mr"><p id="f922" class="ir is ll it b iu iv iw ix iy iz ja jb ms jd je jf mt jh ji jj mu jl jm jn jo hn dt translated"><a class="ae ks" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae ks" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae ks" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ks" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is ll it b iu iv iw ix iy iz ja jb ms jd je jf mt jh ji jj mu jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ks" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ks" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff mv"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>