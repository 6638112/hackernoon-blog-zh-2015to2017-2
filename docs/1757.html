<html>
<head>
<title>Where I rant against code comments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我大声反对代码注释</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/where-i-rant-against-code-comments-5e1ca65f6fc2?source=collection_archive---------9-----------------------#2016-12-05">https://medium.com/hackernoon/where-i-rant-against-code-comments-5e1ca65f6fc2?source=collection_archive---------9-----------------------#2016-12-05</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/46d2df12940cc6c20762054f9c5ed82c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D8PKv9hlUys-3yu5IdmMCg.png"/></div></div></figure><p id="f192" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我讨厌代码注释。我讨厌看评论，也讨厌写评论。这是我在一个新项目中首先注意到的事情之一，通常是代码质量的一个危险信号。</p><p id="8e4e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我知道有些人相信代码注释。如果代码没有被广泛地注释，他们会感到无助。他们通常有几个理由来解释为什么需要注释。</p></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><blockquote class="kh ki kj"><p id="1e9c" class="jc jd kk je b jf jg jh ji jj jk jl jm kl jo jp jq km js jt ju kn jw jx jy jz hn dt translated">我必须解释方法是做什么的。</p></blockquote><pre class="ko kp kq kr fq ks kt ku kv aw kw dt"><span id="9a54" class="kx ky hu kt b fv kz la l lb lc">/**<br/> * Retrieves the registration info of the user<br/> * @param args The user's id<br/> */<br/>public String getInfo(int args){<br/>  ...<br/>}</span></pre><p id="d023" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我同意<code class="eh ld le lf kt b">String getInfo(int args)</code>不是一个没有注释解释它实际做什么的方法。但是为什么不用一个更好的名字呢？重命名它不会花费您任何成本:</p><pre class="ko kp kq kr fq ks kt ku kv aw kw dt"><span id="cd7e" class="kx ky hu kt b fv kz la l lb lc">/**<br/> * Retrieves the registration info of the user<br/> * @param userId The user's id<br/> */<br/>public String getRegistrationInfo(int userId){<br/>  ...<br/>}</span></pre><p id="0618" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">哇！看起来评论已经不需要了，是吗？这实际上是复制信息，违反了<a class="ae lg" href="https://en.wikipedia.org/wiki/Don't_repeat_yourself" rel="noopener ugc nofollow" target="_blank">干燥原则</a>。</p><p id="41ab" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">可悲的是，这种多余的注释在实际代码中太常见了。很多时候添加注释是因为愚蠢的编码风格规则要求每个方法都要被注释。而一个可怜的<a class="ae lg" href="https://hackernoon.com/tagged/programmer" rel="noopener ugc nofollow" target="_blank">程序员</a>能做什么呢？加个评论就满足法律了…</p><pre class="ko kp kq kr fq ks kt ku kv aw kw dt"><span id="13ed" class="kx ky hu kt b fv kz la l lb lc">/**<br/> * Set the user's name<br/> */<br/>public void setName(String name){<br/>  ...<br/>}</span></pre><p id="7cda" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果我每删除一条这样的评论就能得到一美元，我可能会靠删除无用的评论谋生。</p></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><blockquote class="kh ki kj"><p id="7dbf" class="jc jd kk je b jf jg jh ji jj jk jl jm kl jo jp jq km js jt ju kn jw jx jy jz hn dt translated">但这没什么坏处！</p></blockquote><p id="1af6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">除了让代码更难阅读，是的，它没有任何害处。暂时如此。但是我向你保证，在将来的某个时刻，有人将需要不同的方法来获取/设置名字和姓氏。他们很可能会使用IDE的重构<a class="ae lg" href="https://hackernoon.com/tagged/tool" rel="noopener ugc nofollow" target="_blank">工具</a>并重命名方法，同时忘记重命名注释:</p><pre class="ko kp kq kr fq ks kt ku kv aw kw dt"><span id="e84f" class="kx ky hu kt b fv kz la l lb lc">/**<br/> * Set the user's name<br/> */<br/>public void setLastName(String lastName){<br/>  ...<br/>}</span></pre><p id="aad7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">嘭！误导性的评论。推断几年后，你会开始慢慢变得疯狂。</p></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><blockquote class="kh ki kj"><p id="90fe" class="jc jd kk je b jf jg jh ji jj jk jl jm kl jo jp jq km js jt ju kn jw jx jy jz hn dt translated">但是如果我不能为一个方法找到一个好名字呢？</p></blockquote><pre class="ko kp kq kr fq ks kt ku kv aw kw dt"><span id="a67f" class="kx ky hu kt b fv kz la l lb lc">/**<br/> * Display an error message to the user, log the error<br/> * and navigate to the login screen<br/> * <br/> * @param exception The exception<br/> */<br/>public void handleError(Exception exception){<br/>  ...<br/>}</span></pre><p id="4373" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我同意，<a class="ae lg" href="http://martinfowler.com/bliki/TwoHardThings.html" rel="noopener ugc nofollow" target="_blank">给事物命名很难</a>。从写下你能想到的最好的名字开始。如果<code class="eh ld le lf kt b">displayAndLogErrorThenGoToLogin()</code>没有准确说出，问问自己为什么。啊，你说动词太多了？可能是因为方法做的事情太多了吧？我可以提醒你一件小事，叫做单一责任原则吗？为什么不分成3个小方法:<code class="eh ld le lf kt b">displayErrorMessage(Exception e)</code>、<code class="eh ld le lf kt b">writeToLog(Exception e)</code>和<code class="eh ld le lf kt b">navigateToLoginScreen()</code>？</p></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><blockquote class="kh ki kj"><p id="1d2e" class="jc jd kk je b jf jg jh ji jj jk jl jm kl jo jp jq km js jt ju kn jw jx jy jz hn dt translated">我需要用不明确的参数来记录这个方法</p></blockquote><pre class="ko kp kq kr fq ks kt ku kv aw kw dt"><span id="28fa" class="kx ky hu kt b fv kz la l lb lc">/**<br/> * Display a dialog at a certain position on the screen<br/> * <br/> * @param type One of Dialog.ALERT, Dialog.ASK or Dialog.NEGATIVE<br/> * @param isBlocking True if the dialog should block the UI<br/> */<br/>public void showDialog(int x, int y, int type, boolean isBlocking){<br/>  ...<br/>}</span></pre><p id="fec5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">哦，男孩…我从哪里开始？</p><p id="fa3c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">布尔参数？99%的情况下，这是一个请求被一分为二的方法。<code class="eh ld le lf kt b">showBlockingDialog()</code>和<code class="eh ld le lf kt b">showNonBlockingDialog()</code>怎么样？</p><p id="6c3c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您必须记录参数的支持值。是什么阻止了某人进入<a class="ae lg" href="https://www.google.ro/search?q=what%27s+the+answer+to+life+the+universe+and+everything" rel="noopener ugc nofollow" target="_blank"> 42 </a>？还是<code class="eh ld le lf kt b">Integer.MIN_VALUE</code>？创建一个枚举来保存可能的值，并限制任何人传入错误的值。或者考虑使用工厂来创建不同类型的对话框。</p></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><blockquote class="kh ki kj"><p id="6773" class="jc jd kk je b jf jg jh ji jj jk jl jm kl jo jp jq km js jt ju kn jw jx jy jz hn dt translated">但是你看，我有一个奇怪的技巧需要记录…</p></blockquote><pre class="ko kp kq kr fq ks kt ku kv aw kw dt"><span id="ac95" class="kx ky hu kt b fv kz la l lb lc">...<br/>Blob blob = getLastUsedBlob();<br/>// the blobs are spread out in memory to make attacks difficult<br/>int nextAddress = blob.getMemoryAddress() &gt;&gt; blob.getByteSize();<br/>Blob nextBlob = Blob.getFromAddress(nextAddress);</span></pre><p id="25c6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我同意，这是那种需要记录的晦涩难懂的知识。有时将这些知识封装在一个单独的方法或类中会有所帮助。在这个具体的例子中，将它封装在<code class="eh ld le lf kt b">Blob</code>类本身中是有意义的:</p><pre class="ko kp kq kr fq ks kt ku kv aw kw dt"><span id="691d" class="kx ky hu kt b fv kz la l lb lc">/**<br/> * Find the next blob<br/> */<br/>public Blob getNextBlob(){<br/>  // the blobs are spread out in memory to make attacks difficult<br/>  int nextAddress = getMemoryAddress() &gt;&gt; getByteSize();<br/>  return Blob.getFromAddress(nextAddress);<br/>}</span></pre><p id="65c7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，您不仅使任何使用blobs的人的生活变得更加容易，还使您的代码更加安全。不再是偶然的<code class="eh ld le lf kt b">&lt;&lt;</code>而是<code class="eh ld le lf kt b">&gt;&gt;</code>。耶！</p></div><div class="ab cl ka kb hc kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hn ho hp hq hr"><p id="04ae" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">代码可以是如此美丽的东西。像大多数美丽的东西一样，需要努力才能创造出来。不幸的是，很容易写出糟糕的代码。而<a class="ae lg" href="https://books.google.ro/books?id=5wBQEp6ruIAC&amp;lpg=PA29&amp;ots=n5npfteIqX&amp;dq=the%20pragmatic%20programmer%20bad%20code%20requires%20comments&amp;hl=ro&amp;pg=PA29#v=onepage&amp;q=the%20pragmatic%20programmer%20bad%20code%20requires%20comments&amp;f=false" rel="noopener ugc nofollow" target="_blank">不良代码<em class="kk">需要</em>注释</a>。但是不要删评论，说你的代码漂亮。一开始就用不需要注释的方式写。</p><p id="6fd0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所以继续编码吧(不带注释)！</p><blockquote class="kh ki kj"><p id="6dc5" class="jc jd kk je b jf jg jh ji jj jk jl jm kl jo jp jq km js jt ju kn jw jx jy jz hn dt translated"><a class="ae lg" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是AMI家庭的一员。我们现在<a class="ae lg" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae lg" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="jc jd kk je b jf jg jh ji jj jk jl jm kl jo jp jq km js jt ju kn jw jx jy jz hn dt translated">要了解更多信息，请<a class="ae lg" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">阅读我们的“关于”页面</a>、<a class="ae lg" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">喜欢/在脸书给我们发消息</a>，或者简单地说，<a class="ae lg" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="jc jd kk je b jf jg jh ji jj jk jl jm kl jo jp jq km js jt ju kn jw jx jy jz hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae lg" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae lg" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ko kp kq kr fq iv"><div class="bz el l di"><div class="lh li l"/></div></figure></div></div>    
</body>
</html>