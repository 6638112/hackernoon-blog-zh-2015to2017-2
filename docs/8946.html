<html>
<head>
<title>Private NPM Packages with Google Cloud Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有谷歌云功能的私人NPM包</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/private-npm-packages-with-google-cloud-functions-4cdfb13c37cc?source=collection_archive---------28-----------------------#2017-12-20">https://medium.com/hackernoon/private-npm-packages-with-google-cloud-functions-4cdfb13c37cc?source=collection_archive---------28-----------------------#2017-12-20</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="e004" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">访问https://www.mikenikles.com的<a class="ae jp" href="https://www.mikenikles.com" rel="noopener ugc nofollow" target="_blank"><strong class="it hv"/></a><strong class="it hv">获取我的最新博文。</strong></p><p id="c220" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jq">TL；dr:现在正式支持</em><a class="ae jp" href="https://cloud.google.com/functions/docs/writing/dependencies#using_private_modules" rel="noopener ugc nofollow" target="_blank"><em class="jq"/></a><em class="jq">🎉！</em></p><p id="0c52" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">作为AWS向GCP迁移的一部分，我们希望利用谷歌云功能(<a class="ae jp" href="https://cloud.google.com/functions/" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/functions</a>)来帮助我们以更易于管理的方式扩展我们的基础设施。</p><blockquote class="jr js jt"><p id="4968" class="ir is jq it b iu iv iw ix iy iz ja jb ju jd je jf jv jh ji jj jw jl jm jn jo hn dt translated">云函数用JavaScript编写，在标准的<a class="ae jp" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>运行时环境中执行。</p></blockquote><p id="ab24" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">多棒啊。—所以我们认为。我们没有迁移我们的AWS整体，而是决定提取孤立的部分，并将它们作为独立的服务部署，一次一个部分。我们现有的应用程序是用Node.js编写的，迁移到GCF (Google Cloud Functions)听起来很简单。如果不是我们的私人NPM套餐…</p><p id="8825" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了清楚起见，如果你只依赖公共的npm包，GCF总是工作得很好。</p><h1 id="2b12" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">私人NPM套餐——问题</h1><p id="0b9d" class="pw-post-body-paragraph ir is hu it b iu kv iw ix iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo hn dt translated">为了让我们的团队共享公共代码，我们使用<a class="ae jp" href="https://docs.npmjs.com/private-modules/intro" rel="noopener ugc nofollow" target="_blank">私有npm包</a>。GCF不喜欢这样……有一个关于解决方法的StackOverflow讨论。如果您的代码具有私有npm包的顶级依赖项，它会工作得很好。如果像在我们的例子中，你有短暂的依赖，也是私有的npm包，你要么在你的脚本上发挥真正的创造力，要么寻找替代方案。在我们的案例中，我们部署了Google App Engine，这是一个临时的解决方案，因为它会很快变得非常昂贵…</p><h1 id="9fcc" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">私人NPM套餐——解决方案</h1><p id="b6b4" class="pw-post-body-paragraph ir is hu it b iu kv iw ix iy kw ja jb jc kx je jf jg ky ji jj jk kz jm jn jo hn dt translated">昨天，我偶然在GCF文档上找到了一个新的章节“<strong class="it hv">使用私有模块</strong>”。等等什么？怎么了？</p><blockquote class="jr js jt"><p id="33d3" class="ir is jq it b iu iv iw ix iy iz ja jb ju jd je jf jv jh ji jj jw jl jm jn jo hn dt translated">为了使用<a class="ae jp" href="https://docs.npmjs.com/private-modules/intro" rel="noopener ugc nofollow" target="_blank">私有npm模块</a>，您必须在位于函数目录的<code class="eh la lb lc ld b">.npmrc</code>文件中提供npm注册表的凭证(auth token)。您可以简单地复制使用<code class="eh la lb lc ld b">npm login</code>命令登录npm时在您的主目录中创建的<code class="eh la lb lc ld b">.npmrc</code>文件。</p></blockquote><p id="a83c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">这是整个章节，它是一个游戏改变者！</strong></p><p id="7980" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果这让你决定迁移到GCF更简单，请在评论中告诉我。有问题吗？尽管问吧，我很乐意尽我所能帮忙。</p></div></div>    
</body>
</html>