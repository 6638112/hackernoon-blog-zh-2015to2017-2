<html>
<head>
<title>Functional JavaScript: Decoupling methods from their objects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">函数式JavaScript:从对象中分离方法</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/functional-javascript-decoupling-methods-from-their-objects-aa3ca13d7ae8?source=collection_archive---------4-----------------------#2017-03-13">https://medium.com/hackernoon/functional-javascript-decoupling-methods-from-their-objects-aa3ca13d7ae8?source=collection_archive---------4-----------------------#2017-03-13</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/4aa3bfbad33fcba7aa6e99857b3263a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OkWOLixnGyTmjucx-9PVRQ.jpeg"/></div></div></figure><p id="5b95" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在我的项目中，我最后总是做的一件事是将方法从它们的对象中分离出来。<code class="eh ka kb kc kd b">map</code>、<code class="eh ka kb kc kd b">filter</code>和<code class="eh ka kb kc kd b">reduce</code>不是唯一的，但他们肯定是第一批被赋予自由的。</p><blockquote class="ke"><p id="f872" class="kf kg hu bd kh ki kj kk kl km kn jz ek translated">解耦一个方法可以让它摆脱父对象的限制，并且在表达代码的方式上给我们更多的自由。</p></blockquote><h1 id="6819" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll dt translated">那看起来像什么？</h1><p id="d3a0" class="pw-post-body-paragraph jc jd hu je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">为了简单起见，我们仅限于从数组中提取<code class="eh ka kb kc kd b">map</code>。幸运的是，JavaScript的原型继承使我们很容易做到这一点，因为我们想要的函数就在<code class="eh ka kb kc kd b">Array.prototype.map</code>中。JavaScript很酷的一点是我们可以直接调用这个方法。我们只需使用<code class="eh ka kb kc kd b">.call</code>，因为<code class="eh ka kb kc kd b">map</code>需要一个<code class="eh ka kb kc kd b">this</code>参数。</p><p id="ca53" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">撒上一点咖喱(未来的文章),我们就完成了这个整洁的小衬垫…</p><pre class="lr ls lt lu fq lv kd lw lx aw ly dt"><span id="44c1" class="lz kp hu kd b fv ma mb l mc md">const map = f =&gt; x =&gt; Array.prototype.map.call(x, f)</span></pre><p id="182d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们现在可以调用我们的<code class="eh ka kb kc kd b">map</code>函数无数组！</p><h1 id="2063" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz me lb lc ld mf lf lg lh mg lj lk ll dt translated">映射的替代方法</h1><p id="5ab9" class="pw-post-body-paragraph jc jd hu je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">调用<code class="eh ka kb kc kd b">map</code>有许多不同的方式，由于V8引擎的优化，在性能上真的没有区别。</p><figure class="lr ls lt lu fq iv fe ff paragraph-image"><div class="fe ff mh"><img src="../Images/7cb65626de823809c008ab7f762f1c17.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/1*i8mZiUCkRGxTFsvwyrU4hw.gif"/></div></figure><p id="ae65" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">任何性能差异都不显著，这些数字每次都会发生变化。结论应该是这些方法是平等的。</p><h1 id="0b9c" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz me lb lc ld mf lf lg lh mg lj lk ll dt translated">脱钩如何让我的生活更美好？</h1><p id="cbb4" class="pw-post-body-paragraph jc jd hu je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">这是一个很好的问题！可以说是最好的问题。我认为最好用代码而不是文字来解释，所以让我们直接进入主题。</p><p id="158d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh ka kb kc kd b">document.querySelectorAll</code>(以及类似的方法)不返回数组，它们返回一个NodeList，NodeList不包含<code class="eh ka kb kc kd b">map</code>方法。有一些魔术可以把一个节点列表转换成一个数组，但是转换不是必须的，因为我们的<code class="eh ka kb kc kd b">map</code>可以枚举一个节点列表，就像它是一个数组一样。</p><figure class="lr ls lt lu fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="5b54" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们甚至可以<code class="eh ka kb kc kd b">map</code>覆盖一个字符串，而不需要首先将它转换成一个字符数组。</p><figure class="lr ls lt lu fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="d7d7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">解耦允许我们轻松地将对象映射转换为列表映射:</p><figure class="lr ls lt lu fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="c19e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们甚至可以<code class="eh ka kb kc kd b">map</code>越过物体。</p><figure class="lr ls lt lu fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="d749" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">解耦允许我们组合函数:</p><figure class="lr ls lt lu fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="2272" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">解耦(使用curry)允许我们部分应用函数参数并创建新函数。</p><figure class="lr ls lt lu fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="d737" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">告别<code class="eh ka kb kc kd b">this</code>！！！</p><figure class="lr ls lt lu fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="c820" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这个例子中，<code class="eh ka kb kc kd b">cat.speak</code>起作用，但是<code class="eh ka kb kc kd b">catSpeak</code>不起作用，因为<code class="eh ka kb kc kd b">this</code>上下文改变了。多痛苦啊！相反我们可以将<code class="eh ka kb kc kd b">speak</code>方法和<strong class="je hv">方法脱钩，再也不用担心</strong> <code class="eh ka kb kc kd b"><strong class="je hv">this</strong></code> <strong class="je hv">了！</strong></p><figure class="lr ls lt lu fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="51b2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后，我们可以创建使用解耦函数的新函数。</p><figure class="lr ls lt lu fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><h1 id="3102" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz me lb lc ld mf lf lg lh mg lj lk ll dt translated">摘要</h1><p id="4d49" class="pw-post-body-paragraph jc jd hu je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">今天，我们已经了解了解耦方法和从对象中提取它们的许多好处。解耦允许一个函数在更多的地方和不同类型的对象中使用，也允许它与其他函数组合使用。我们还删除了所有对<code class="eh ka kb kc kd b">this</code>上下文的引用，这对我来说就足够了！</p><p id="4773" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我知道这是一件小事，但当我在媒体和Twitter上收到这些后续通知时，我感到非常高兴。或者你觉得我满嘴屁话，在下面的评论里告诉我。</p><p id="56ae" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">干杯！</p><h1 id="840e" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz me lb lc ld mf lf lg lh mg lj lk ll dt translated">相关文章</h1><div class="ml mm fm fo mn mo"><a href="https://hackernoon.com/javascript-functional-composition-for-every-day-use-22421ef65a10" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab ej"><div class="mq ab mr cl cj ms"><h2 class="bd hv fv z el mt eo ep mu er et ht dt translated">函数JavaScript:日常使用的函数组合。</h2><div class="mv l"><h3 class="bd b fv z el mt eo ep mu er et ek translated">函数组合是函数式编程中我最喜欢的部分。我希望给你提供一个好的真实的…</h3></div><div class="mw l"><p class="bd b gc z el mt eo ep mu er et ek translated">hackernoon.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc ja mo"/></div></div></a></div><div class="ml mm fm fo mn mo"><a href="https://hackernoon.com/rethinking-javascript-death-of-the-for-loop-c431564c84a8" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab ej"><div class="mq ab mr cl cj ms"><h2 class="bd hv fv z el mt eo ep mu er et ht dt translated">重新思考JavaScript:For循环的死亡</h2><div class="mv l"><h3 class="bd b fv z el mt eo ep mu er et ek translated">JavaScript的for循环为我们提供了很好的服务，但是它现在已经过时了，应该被更新的函数所取代…</h3></div><div class="mw l"><p class="bd b gc z el mt eo ep mu er et ek translated">hackernoon.com</p></div></div><div class="mx l"><div class="nd l mz na nb mx nc ja mo"/></div></div></a></div><div class="ml mm fm fo mn mo"><a href="https://hackernoon.com/rethinking-javascript-the-if-statement-b158a61cd6cb" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab ej"><div class="mq ab mr cl cj ms"><h2 class="bd hv fv z el mt eo ep mu er et ht dt translated">重新思考JavaScript:if语句</h2><div class="mv l"><h3 class="bd b fv z el mt eo ep mu er et ek translated">功能性思维打开了我对编程的思维。它让我对代码有了更深的理解…</h3></div><div class="mw l"><p class="bd b gc z el mt eo ep mu er et ek translated">hackernoon.com</p></div></div><div class="mx l"><div class="ne l mz na nb mx nc ja mo"/></div></div></a></div><div class="lr ls lt lu fq ab cb"><figure class="nf iv ng nh ni nj nk paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="nf iv ng nh ni nj nk paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="nf iv ng nh ni nj nk paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="nl nm nn"><p id="f922" class="jc jd no je b jf jg jh ji jj jk jl jm np jo jp jq nq js jt ju nr jw jx jy jz hn dt translated"><a class="ae mk" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是AMI家庭的一员。我们现在<a class="ae mk" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae mk" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jc jd no je b jf jg jh ji jj jk jl jm np jo jp jq nq js jt ju nr jw jx jy jz hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae mk" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae mk" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="lr ls lt lu fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ns"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>