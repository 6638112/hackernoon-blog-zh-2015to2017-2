<html>
<head>
<title>Deploy Mender on DigitalOcean using Rancher Container Management Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Rancher容器管理平台在数字海洋上部署修补程序</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/deploy-mender-on-digitalocean-using-rancher-container-management-platform-5d844a8cdc95?source=collection_archive---------11-----------------------#2017-07-05">https://medium.com/hackernoon/deploy-mender-on-digitalocean-using-rancher-container-management-platform-5d844a8cdc95?source=collection_archive---------11-----------------------#2017-07-05</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="565c" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">使用Rancher在数字海洋上部署修补服务器堆栈的交互式指南</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/31fc892b3e3c1c131f748e962bd01421.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b_4aVBHPJp6CIiiLOi6R4g.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Mender Server Containers Graph</figcaption></figure><h1 id="8ea9" class="jz ka hu bd kb kc kd ke kf kg kh ki kj ja kk jb kl jd km je kn jg ko jh kp kq dt translated">什么是修理工？</h1><p id="19a6" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt ln translated"><span class="l lo lx bm di ly"> <img alt="M" class="jt lz ma mb mc md ef n hi dh bf" src="../Images/be80bcb231ecf5c4f7f6e48987e7dda5.png" width="87" height="79" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fit:174/1*hQWjrQd5NmLcwNBqX56l0g.png"/> <span class="l lo lp lq bm lr ls lt lu lv di lw"> M </span> </span> Mender是一款针对嵌入式Linux设备的开源远程软件更新程序。</p><p id="f824" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">它支持通过无线或任何TCP/IP网络对远程连接设备的软件更新进行<a class="ae mj" href="https://hackernoon.com/tagged/management" rel="noopener ugc nofollow" target="_blank">管理</a>。您可以将基于映像的更新从修补程序服务器部署到您连接的一台或多台设备。</p><h1 id="67f8" class="jz ka hu bd kb kc kd ke kf kg kh ki kj ja kk jb kl jd km je kn jg ko jh kp kq dt translated">牧场主集装箱管理平台</h1><p id="739b" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">正如您在“修补服务器容器图”中看到的，修补服务器有几个容器，很难维护一个运行所有修补服务器容器的主机集群，Rancher使这变得容易。</p><h1 id="3e6c" class="jz ka hu bd kb kc kd ke kf kg kh ki kj ja kk jb kl jd km je kn jg ko jh kp kq dt translated">先决条件</h1><p id="080d" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">要完成本教程，您必须具备以下条件:</p><ul class=""><li id="852e" class="mk ml hu kt b ku me kx mf la mm le mn li mo lm mp mq mr ms dt translated"><a class="ae mj" href="https://hackernoon.com/tagged/digitalocean" rel="noopener ugc nofollow" target="_blank">数字海洋</a>账号创建<strong class="kt hv">水滴</strong>和<strong class="kt hv">体积</strong></li><li id="5c4a" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated">亚马逊AWS帐户创建一个<strong class="kt hv"> S3桶</strong>用于存储<strong class="kt hv">修补器工件</strong></li></ul><h1 id="ad8b" class="jz ka hu bd kb kc kd ke kf kg kh ki kj ja kk jb kl jd km je kn jg ko jh kp kq dt translated">每月成本估算</h1><p id="9293" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">在准备生产的数字海洋上运行修补服务器有很多成本。下表描述了DigitalOcean在生产环境中维护和运行修补服务器实例的每月成本。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="my mz l"/></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">DigitalOcean monthly costs estimation</figcaption></figure><ul class=""><li id="956e" class="mk ml hu kt b ku me kx mf la mm le mn li mo lm mp mq mr ms dt translated"><strong class="kt hv">第1项</strong>:Rancher服务器的2GB RAM的1x Droplet实例</li><li id="769a" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated"><strong class="kt hv">第2项</strong>:4个1GB RAM的小滴实例，用于维修服务</li><li id="8491" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated"><strong class="kt hv">第3项</strong>:5x 10GB容量，用于保存维修服务的数据库数据</li><li id="c039" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated"><strong class="kt hv">第4项</strong> : 1x数字海洋负载平衡器实例</li></ul><h1 id="7290" class="jz ka hu bd kb kc kd ke kf kg kh ki kj ja kk jb kl jd km je kn jg ko jh kp kq dt translated">步骤1 —创建牧场主服务器Droplet</h1><p id="1486" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">首先，我们需要创建牧场主服务器Droplet。Rancher Server将负责在您的集群中创建和协调修补程序基础架构。</p><p id="e1a5" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">转到你的数字海洋仪表盘，创建一个名为<strong class="kt hv">修理工</strong>的新团队。切换到修补团队，使用以下配置创建一个新的Droplet:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff na"><img src="../Images/2db3fa7bef76958d51051af6087b3d02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uVBlWAaJyszvYFidDemZBA.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Rancher Server Droplet configuration</figcaption></figure><ul class=""><li id="5db6" class="mk ml hu kt b ku me kx mf la mm le mn li mo lm mp mq mr ms dt translated"><strong class="kt hv">发行版</strong> : Ubuntu 16.04 x64</li><li id="bee8" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated">尺寸:20美元/月</li><li id="618e" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated"><strong class="kt hv">数据中心区域</strong>:纽约1</li><li id="1958" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated">添加您的公共SSH密钥(如果有)</li><li id="f1b7" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated">将主机名设置为“牧场主服务器”</li></ul><h1 id="56f1" class="jz ka hu bd kb kc kd ke kf kg kh ki kj ja kk jb kl jd km je kn jg ko jh kp kq dt translated">步骤2 —启动Rancher服务器</h1><p id="704c" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">完成Rancher Server Droplet供应后，您必须登录以启动Rancher Server。</p><p id="3e0f" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">去你的<strong class="kt hv">数字海洋仪表盘</strong>复制牧场主服务器Droplet的IP地址。</p><p id="2e8c" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">现在，连接到Rancher服务器Droplet，在您的计算机终端上运行以下命令:</p><pre class="jk jl jm jn fq nb nc nd ne aw nf dt"><span id="295e" class="ng ka hu nc b fv nh ni l nj nk">$ ssh root@&lt;RANCHER_SERVER_IP&gt;</span></pre><p id="9ab0" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">注意:将<code class="eh nl nm nn nc b">&lt;RANCHER_SERVER_IP&gt;</code>替换为Rancher服务器Droplet的IP地址。</p><p id="d730" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">成功连接到SSH后，运行以下命令启动Rancher服务器:</p><pre class="jk jl jm jn fq nb nc nd ne aw nf dt"><span id="4a4f" class="ng ka hu nc b fv nh ni l nj nk">$ curl <a class="ae mj" href="https://releases.rancher.com/install-docker/17.03.sh" rel="noopener ugc nofollow" target="_blank">https://releases.rancher.com/install-docker/17.03.sh</a> | sh<br/>$ docker run -d -restart=unless-stopped \<br/>             -p 8080:8080 \<br/>             rancher/server:stable</span></pre><p id="c96d" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">Rancher服务器启动只需要几分钟时间。</p><p id="0958" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">Rancher服务器UI暴露在端口8080上，因此为了查看UI，请转到http:// <code class="eh nl nm nn nc b">&lt;RANCHER_SERVER_IP&gt;</code> :8080</p><h1 id="40ee" class="jz ka hu bd kb kc kd ke kf kg kh ki kj ja kk jb kl jd km je kn jg ko jh kp kq dt translated">步骤3 —配置牧场主服务器</h1><p id="0e42" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">默认情况下，Rancher Server没有启用访问控制，这意味着<strong class="kt hv">互联网上的任何人</strong>都可以访问Rancher Server UI。建议在启动Rancher Server后立即配置访问控制。</p><p id="0c01" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">在“管理”选项卡中，单击“访问控制”。选择本地图标。通过提供<strong class="kt hv">登录用户名</strong>、<strong class="kt hv">全名</strong>和<strong class="kt hv">密码</strong>创建一个管理员用户。点击<strong class="kt hv">启用本地认证</strong>开启本地认证。</p><h1 id="b01b" class="jz ka hu bd kb kc kd ke kf kg kh ki kj ja kk jb kl jd km je kn jg ko jh kp kq dt translated">步骤4 —添加牧场主主机</h1><p id="f3c2" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">要添加Rancher主机，请访问Rancher服务器UI并单击<strong class="kt hv">基础设施</strong>，这将立即将您带到<strong class="kt hv">主机</strong>页面。点击<strong class="kt hv">添加主机</strong>。Rancher将提示您选择一个主机注册URL。这个URL是Rancher server运行的地方，并且必须可以从您将要添加的所有主机上访问。点击<strong class="kt hv">保存</strong>即可。</p><p id="b8a7" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">默认情况下，将选择<strong class="kt hv">自定义</strong>选项，选择<strong class="kt hv">数字海洋</strong>图标，输入您的数字海洋<strong class="kt hv">访问令牌</strong>，点击<strong class="kt hv">配置Droplet。</strong></p><blockquote class="no np nq"><p id="b2c3" class="kr ks nr kt b ku me iv kw kx mf iy kz ns mg lc ld nt mh lg lh nu mi lk ll lm hn dt translated">您可以在控制面板的<strong class="kt hv"> </strong> <a class="ae mj" href="https://cloud.digitalocean.com/settings/api/tokens/new" rel="noopener ugc nofollow" target="_blank">应用程序&amp; API部分</a>生成数字海洋<strong class="kt hv">访问令牌</strong>。</p></blockquote><p id="790b" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">在下一页中，为主机设置以下配置:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff na"><img src="../Images/8773d4ae33b1b28c6af67c72f5b1bb8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F_VJChuUc6vRTcuIHJJB4Q.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Rancher Host configuration</figcaption></figure><ul class=""><li id="3fe3" class="mk ml hu kt b ku me kx mf la mm le mn li mo lm mp mq mr ms dt translated"><strong class="kt hv">名称</strong>:主机-</li><li id="07ea" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated"><strong class="kt hv">数量</strong> : 4</li><li id="8ebb" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated"><strong class="kt hv">地区</strong>:纽约1</li><li id="ff0f" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated"><strong class="kt hv">标签</strong>:修理者</li><li id="0885" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated"><strong class="kt hv">(高级选项)Docker安装URL: </strong> v17.03.x</li></ul><p id="f7eb" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">保留所有其他选项的默认值。点击<strong class="kt hv">创建</strong>，等待Rancher为您提供主机。</p><h1 id="7890" class="jz ka hu bd kb kc kd ke kf kg kh ki kj ja kk jb kl jd km je kn jg ko jh kp kq dt translated">步骤5-为牧场主安装修理工目录</h1><p id="d645" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated"><a class="ae mj" href="https://github.com/gustavosbarreto/mender-rancher" rel="noopener ugc nofollow" target="_blank">牧场主的修补程序目录</a>提供了模板，可以轻松部署修补程序服务器堆栈。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nv"><img src="../Images/552df53e7a0c11ced64e94fd33245e1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ifi9_YzswzO6QMgGBSiV6w.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Templates of Mender Catalog for Rancher</figcaption></figure><p id="ef22" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">在Rancher Server UI中，进入<strong class="kt hv">管理</strong> / <strong class="kt hv">设置</strong>并添加一个新的自定义目录:</p><ul class=""><li id="0a4b" class="mk ml hu kt b ku me kx mf la mm le mn li mo lm mp mq mr ms dt translated"><strong class="kt hv">姓名</strong>:修理工</li><li id="3e18" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated"><strong class="kt hv">网址</strong>:<a class="ae mj" href="https://github.com/gustavosbarreto/mender-rancher.git" rel="noopener ugc nofollow" target="_blank">https://github.com/gustavosbarreto/mender-rancher.git</a></li><li id="b7af" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated"><strong class="kt hv">分支</strong>:主</li></ul><h1 id="ce49" class="jz ka hu bd kb kc kd ke kf kg kh ki kj ja kk jb kl jd km je kn jg ko jh kp kq dt translated">步骤6 —生成证书和密钥</h1><p id="b655" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">有关生成证书和密钥的信息，请参见修补程序文档网站的<a class="ae mj" href="https://docs.mender.io/1.0/administration/certificates-and-keys#generating-new-keys-and-certificates" rel="noopener ugc nofollow" target="_blank">生成新密钥和证书部分</a>。</p><div class="nw nx fm fo ny nz"><a href="https://docs.mender.io/1.0/administration/certificates-and-keys#generating-new-keys-and-certificates" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab ej"><div class="ob ab oc cl cj od"><h2 class="bd hv fv z el oe eo ep of er et ht dt translated">证书和密钥|修补程序文档</h2><div class="og l"><h3 class="bd b fv z el oe eo ep of er et ek translated">修理工文件</h3></div><div class="oh l"><p class="bd b gc z el oe eo ep of er et ek translated">mender documentation docs . mender . io</p></div></div><div class="oi l"><div class="oj l ok ol om oi on jt nz"/></div></div></a></div><h1 id="7ea0" class="jz ka hu bd kb kc kd ke kf kg kh ki kj ja kk jb kl jd km je kn jg ko jh kp kq dt translated">步骤7 —部署修补服务器堆栈</h1><p id="953c" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">在这一步中，我们将跨您在第4步中创建的Rancher主机部署一个修补服务器堆栈。</p><h2 id="af8f" class="ng ka hu bd kb oo op oq kf or os ot kj la ou ov kl le ow ox kn li oy oz kp pa dt translated">添加修补程序服务器证书</h2><p id="5a6d" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">Mender通过HTTPS使用安全的客户端-服务器通信。为了在Rancher负载均衡器中启用HTTPS，您需要上传<strong class="kt hv">私钥</strong>和<strong class="kt hv">证书</strong>文件。</p><p id="4a4b" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">在Rancher Server UI中，转至<strong class="kt hv">基础设施/证书</strong>页面。要添加新证书，点击<strong class="kt hv">添加证书</strong>。</p><p id="72b1" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">为证书提供一个<strong class="kt hv">名称</strong>和<strong class="kt hv">描述</strong>。如果您按照步骤6中的说明生成了证书，您必须上传<code class="eh nl nm nn nc b"><em class="nr">keys-generated/certs/api-gateway/private.key</em></code>作为<strong class="kt hv">私钥</strong>和<code class="eh nl nm nn nc b"><em class="nr">keys-generated/certs/api-gateway/cert.crt</em></code>作为<strong class="kt hv">证书</strong>。</p><h2 id="ee08" class="ng ka hu bd kb oo op oq kf or os ot kj la ou ov kl le ow ox kn li oy oz kp pa dt translated">为数字海洋块存储安装Docker卷插件</h2><p id="8773" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">要为Mender Server的所有MongoDB实例启用持久存储，我们需要为DigitalOcean块存储安装Docker卷插件。Rancher的修补程序目录还提供了一个基础结构模板，用于在所有Rancher主机上安装该插件。</p><p id="edcf" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">在Rancher Server UI中，转到<strong class="kt hv">目录/修补程序</strong>并选择<strong class="kt hv">雷克斯-雷数字海洋驱动程序</strong>。在下一页中，输入以下配置:</p><ul class=""><li id="d979" class="mk ml hu kt b ku me kx mf la mm le mn li mo lm mp mq mr ms dt translated"><strong class="kt hv">您的数字海洋访问令牌</strong></li><li id="644c" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms dt translated"><strong class="kt hv"> DigitalOcean默认音量大小</strong> : 10</li></ul><h2 id="a2e0" class="ng ka hu bd kb oo op oq kf or os ot kj la ou ov kl le ow ox kn li oy oz kp pa dt translated">添加修补程序服务器堆栈</h2><p id="62ea" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">在牧场主服务器界面，转到<strong class="kt hv">目录/修理工</strong>，选择<strong class="kt hv">修理工服务器</strong>。在下一页中，输入以下配置:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff na"><img src="../Images/fe63af0c7d190e8e2f986469227ea59e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VPyVTw2jsDt6Jp-Zb6H5QQ.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Mender Stack configuration</figcaption></figure><ol class=""><li id="b4f6" class="mk ml hu kt b ku me kx mf la mm le mn li mo lm pb mq mr ms dt translated"><strong class="kt hv">刻度</strong> : 4</li><li id="0e8d" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated"><strong class="kt hv">数据库卷驱动</strong>:保留默认值，除非你知道自己在做什么。</li><li id="6464" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated"><strong class="kt hv"> API网关证书</strong>:选择您之前添加的修补服务器证书。</li><li id="c332" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated"><strong class="kt hv">用户管理键</strong>:粘贴<code class="eh nl nm nn nc b">keys-generated/keys/useradm/private.key</code>文件的内容。</li><li id="ca33" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated"><strong class="kt hv">设备认证Ke </strong> y:粘贴<code class="eh nl nm nn nc b">keys-generated/keys/deviceauth/private.key</code>文件内容。</li><li id="1f7d" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated"><strong class="kt hv"> S3访问键</strong>:您的AWS访问键。</li><li id="f281" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated"><strong class="kt hv"> S3秘钥</strong>:你的AWS秘钥。</li><li id="8cda" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated">S3·巴克t:S3·巴克的名字，上传的修补器工件将在这里存储和提供服务。</li><li id="dd0d" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated"><strong class="kt hv">S3·URI</strong>:如果您想使用AWS的S3，请保留默认值(推荐)。</li></ol><blockquote class="no np nq"><p id="8328" class="kr ks nr kt b ku me iv kw kx mf iy kz ns mg lc ld nt mh lg lh nu mi lk ll lm hn dt translated">要创建您的AWS访问和密钥，请参见AWS文档网站上的<a class="ae mj" href="http://docs.aws.amazon.com/general/latest/gr/managing-aws-access-keys.html" rel="noopener ugc nofollow" target="_blank">管理您的AWS帐户的访问密钥</a>。</p></blockquote><h1 id="2b59" class="jz ka hu bd kb kc kd ke kf kg kh ki kj ja kk jb kl jd km je kn jg ko jh kp kq dt translated">步骤8-设置数字海洋负载平衡器</h1><p id="e3ae" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">在<strong class="kt hv">数字海洋控制面板</strong>中，从顶部导航栏中选择<strong class="kt hv">网络</strong>进入负载平衡器页面，然后点击<strong class="kt hv">负载平衡器</strong>。这将把我们带到负载平衡器页面。点击<strong class="kt hv">创建负载平衡器</strong>。在“创建负载平衡器”页中:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff pc"><img src="../Images/58d3031eae565e1c54ebf31408a2db7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vEUeZaKPpDixXLwsnhtcVg.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Load Balancer configuration</figcaption></figure><ol class=""><li id="8c35" class="mk ml hu kt b ku me kx mf la mm le mn li mo lm pb mq mr ms dt translated">给负载平衡器一个<strong class="kt hv">名</strong>。</li><li id="dcc4" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated">在<strong class="kt hv">添加水滴</strong>搜索“修理者”标签。</li><li id="e9fb" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated">选择NYC1作为<strong class="kt hv">地区</strong>。</li><li id="0341" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated">添加<strong class="kt hv"> HTTPS </strong>转发规则</li></ol><p id="aec0" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">将所有其他选项保留默认值，并点击<strong class="kt hv">创建负载平衡器</strong>。</p><p id="87c2" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">一旦创建了负载平衡器，其IP地址将自动出现在<strong class="kt hv">负载平衡器</strong>概述页面上。复制IP地址，并简单地在您的网络浏览器中打开它。</p><p id="4e65" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">第一次访问UI时，会要求您创建初始用户。只需输入您的电子邮件和所需的密码，如下所示:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff pd"><img src="../Images/d52396a5310cd5613a62f8522cd82936.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*Kklld1x6DrEsa8tMapkZ3g.png"/></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Mender initial screen</figcaption></figure><h1 id="b6de" class="jz ka hu bd kb kc kd ke kf kg kh ki kj ja kk jb kl jd km je kn jg ko jh kp kq dt translated">支持</h1><p id="0269" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">Rancher的修补程序目录还为Rancher备份代理提供了一个模板，使您能够备份修补程序服务器堆栈。</p><p id="dbf4" class="pw-post-body-paragraph kr ks hu kt b ku me iv kw kx mf iy kz la mg lc ld le mh lg lh li mi lk ll lm hn dt translated">在牧场主服务器UI中，转到<strong class="kt hv">目录/修补程序</strong>并选择<strong class="kt hv">修补程序备份代理</strong>。在下一页中，输入以下配置:</p><ol class=""><li id="2b09" class="mk ml hu kt b ku me kx mf la mm le mn li mo lm pb mq mr ms dt translated"><strong class="kt hv"> S3访问键</strong>:您的AWS访问键。</li><li id="250b" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated"><strong class="kt hv"> S3秘钥</strong>:你的AWS秘钥。</li><li id="b545" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated">S3桶:S3桶名，备份工件将被上传到那里。</li><li id="7618" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated"><strong class="kt hv">S3·URI</strong>:如果想使用AWS的S3，保留默认值(推荐)。</li><li id="b94a" class="mk ml hu kt b ku mt kx mu la mv le mw li mx lm pb mq mr ms dt translated"><strong class="kt hv">备份时间</strong>:默认值为每天00:00一次。使用crontab语法更改备份时间。</li></ol><h1 id="8a34" class="jz ka hu bd kb kc kd ke kf kg kh ki kj ja kk jb kl jd km je kn jg ko jh kp kq dt translated">就是这样</h1><p id="2acc" class="pw-post-body-paragraph kr ks hu kt b ku kv iv kw kx ky iy kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">请随意浏览和贡献给牧场主补缀目录。</p><div class="nw nx fm fo ny nz"><a href="https://github.com/gustavosbarreto/mender-rancher" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab ej"><div class="ob ab oc cl cj od"><h2 class="bd hv fv z el oe eo ep of er et ht dt translated">古斯塔沃斯·巴雷托/修理工-牧场主</h2><div class="og l"><h3 class="bd b fv z el oe eo ep of er et ek translated">修补者-牧场主-修补者平台的牧场主模板</h3></div><div class="oh l"><p class="bd b gc z el oe eo ep of er et ek translated">github.com</p></div></div><div class="oi l"><div class="pe l ok ol om oi on jt nz"/></div></div></a></div><div class="jk jl jm jn fq ab cb"><figure class="pf jo pg ph pi pj pk paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="pf jo pg ph pi pj pk paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="pf jo pg ph pi pj pk paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="no np nq"><p id="f922" class="kr ks nr kt b ku me iv kw kx mf iy kz ns mg lc ld nt mh lg lh nu mi lk ll lm hn dt translated"><a class="ae mj" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae mj" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae mj" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae mj" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="kr ks nr kt b ku me iv kw kx mf iy kz ns mg lc ld nt mh lg lh nu mi lk ll lm hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae mj" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae mj" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff pl"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="pm mz l"/></div></figure></div></div>    
</body>
</html>