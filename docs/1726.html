<html>
<head>
<title>Content vs Container</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">内容与容器</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/content-vs-container-e0a1ada681c1?source=collection_archive---------5-----------------------#2016-12-02">https://medium.com/hackernoon/content-vs-container-e0a1ada681c1?source=collection_archive---------5-----------------------#2016-12-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/3a539fc9e32e091961bc86209247ce70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xr_AhSYxh69OSPtpuu3LIA.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Picture from Amazon.com</figcaption></figure><p id="c0ac" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我肯定你小时候玩过这个游戏几百次了。那时你学会了如何将不同种类的形状放在它们相应的位置上。这个游戏将会是下一个故事的一个很好的隐喻。</p><p id="edbe" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我将通过一个例子来了解如何识别您在组件之间混合职责，以及如何实施<a class="ae ke" href="https://en.wikipedia.org/wiki/Single_responsibility_principle" rel="noopener ugc nofollow" target="_blank">单一职责原则</a>。当我们要强调什么是内容，什么是容器的时候。</p><p id="a2f3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">陷入这种混合职责的糟糕模式会影响源代码中的许多组件，不仅影响组件风格，甚至影响组件逻辑。主要目标是在可重用性方面获得更好的组件。我将用这个例子从以下几个方面进行分析:</p><ul class=""><li id="c62d" class="kf kg hu ji b jj jk jn jo jr kh jv ki jz kj kd kk kl km kn dt translated">组件样式(用户界面)</li><li id="51e7" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">组件业务逻辑(UX)</li></ul><p id="c6ae" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="kt"> *这篇文章中的所有例子都是基于React类和JSX标记，但是这些建议适用于你使用的任何</em> <a class="ae ke" href="https://hackernoon.com/tagged/technology" rel="noopener ugc nofollow" target="_blank"> <em class="kt">技术</em> </a> <em class="kt">。</em></p></div><div class="ab cl ku kv hc kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="hn ho hp hq hr"><h1 id="1344" class="lb lc hu bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly dt translated">购物车商品列表</h1><p id="1cdc" class="pw-post-body-paragraph jg jh hu ji b jj lz jl jm jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd hn dt translated">想象一下您购物车中的物品列表。我们的购物车中有三件商品，其中两件被选中，其中一件是<em class="kt">高级</em>商品。每个商品都有一个按钮，让用户从购物车中删除商品。</p><p id="f3db" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">一个简单的例子可能是这样的:</p><figure class="me mf mg mh fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="53cd" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">样式表是这样的:</p><figure class="me mf mg mh fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="ee25" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">当您开始尝试在组件中转换这种布局时，您想到的第一个方法是这样的:</p><figure class="me mf mg mh fq iv"><div class="bz el l di"><div class="mi mj l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">An example of mixed responsibilities</figcaption></figure><p id="b01e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这个列表将是<code class="eh mk ml mm mn b">CartList</code>组件，而<code class="eh mk ml mm mn b">renderCartItem</code>将<br/>呈现<code class="eh mk ml mm mn b">li</code>节点，其中包含列表中每个项目所需的所有内容<br/>，以及显示所有选定项目所需的所有类。</p><p id="a7ad" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">也许在那一点上你看不到问题，但迟早你会开始面对关于这个决定的问题。</p><p id="a1a9" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">几周后，您的购物车有了新的需求。用户应该能够多选列表中的项目。您开始实现这个特性，并且您开始需要一些方法来在项目之间进行通信，以知道它们是否被选中，发送事件，切换项目中的类，等等。</p><p id="7303" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">等一下，这太疯狂了…</p><p id="4685" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果您在应用程序的另一个地方重用这些项目，可能您不想要选择行为，并且您开始添加越来越多的条件来选择哪些是您想要用于它们的所有地方的行为。您是否要将可选行为添加到一个<code class="eh mk ml mm mn b">Order</code>列表中，但这个是<code class="eh mk ml mm mn b">CartItem</code>类型？</p><p id="ab3b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">所以，把这种行为包含在物品中的答案很可能是<em class="kt">否</em>。</p><p id="0585" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，停下来想一想容器和内容。这个布局的容器和内容是什么？</p></div><div class="ab cl ku kv hc kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="hn ho hp hq hr"><h1 id="ec43" class="lb lc hu bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly dt translated">购物车物品的新列表</h1><p id="ac58" class="pw-post-body-paragraph jg jh hu ji b jj lz jl jm jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd hn dt translated">当你开始构建一个组件结构时，考虑一下每个组件在可重用性方面的责任是很好的。区分内容和容器。问问你自己:</p><ul class=""><li id="2e64" class="kf kg hu ji b jj jk jn jo jr kh jv ki jz kj kd kk kl km kn dt translated"><em class="kt">这些项目负责管理该列表中的选择吗？</em></li><li id="ec26" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><em class="kt">哪个位置是放置处理程序来管理选择的最佳位置？</em></li></ul><p id="f83d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">很容易改变你的想法，开始从另一个角度看待他们。想象一个组件<code class="eh mk ml mm mn b">SelectableList</code>和<code class="eh mk ml mm mn b">CartItem</code>。让我们用这种布局检查一种新方法:</p><figure class="me mf mg mh fq iv"><div class="bz el l di"><div class="mi mj l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">New cart markup, with better responsibilities</figcaption></figure><p id="ccd9" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">差别是微妙的，但是你会开始利用它们。</p><figure class="me mf mg mh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mo"><img src="../Images/762fe0527bc2e45d56fb5663d9d4335e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SmQ1t7ZcEFD0P62KMZ7Ofw.png"/></div></div></figure><h2 id="cf9c" class="mp lc hu bd ld mq mr ms lh mt mu mv ll jr mw mx lp jv my mz lt jz na nb lx nc dt translated">组件样式</h2><p id="bf11" class="pw-post-body-paragraph jg jh hu ji b jj lz jl jm jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd hn dt translated">知道你在组件之间混合职责的一个常见模式是你是否滥用了<code class="eh mk ml mm mn b">margin</code> CSS规则。内容组件应该尽可能地扩展，并且不应该意识到周围的环境。容器组件是<a class="ae ke" href="https://hackernoon.com/tagged/managing" rel="noopener ugc nofollow" target="_blank">管理</a>内容组件之间空间的合适工具，你可以通过<code class="eh mk ml mm mn b">padding</code> CSS规则来实现。</p><figure class="me mf mg mh fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="eb5a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如您所见，我们将<code class="eh mk ml mm mn b">margin-bottom</code>规则从购物车项目移到了<code class="eh mk ml mm mn b">selectable-list</code>中的<code class="eh mk ml mm mn b">padding-bottom</code>规则。</p><blockquote class="nd"><p id="fe87" class="ne nf hu bd ng nh ni nj nk nl nm kd ek translated">尝试将组件边距转换为填充</p></blockquote><p id="94c8" class="pw-post-body-paragraph jg jh hu ji b jj nn jl jm jn no jp jq jr np jt ju jv nq jx jy jz nr kb kc kd hn dt translated">当你开始使用这种方法时，你会发现像<a class="ae ke" href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Using_CSS_flexible_boxes" rel="noopener ugc nofollow" target="_blank"> flexbox </a>这样的规格更适合你的所有需求。</p><h2 id="1021" class="mp lc hu bd ld mq mr ms lh mt mu mv ll jr mw mx lp jv my mz lt jz na nb lx nc dt translated">组件业务逻辑</h2><p id="956a" class="pw-post-body-paragraph jg jh hu ji b jj lz jl jm jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd hn dt translated">DOM最有趣也是最容易被误解的特性之一是事件冒泡。当你理解了它是如何工作的，以及哪些是你需要注意的主要问题时，这种新的组件结构就会大放异彩。</p><p id="cd12" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">事件冒泡的一个简短总结是，在DOM节点中发生的事件会经过所有的父节点，直到您调用<code class="eh mk ml mm mn b">stopPropagation</code>方法。</p><figure class="me mf mg mh fq iv fe ff paragraph-image"><div class="fe ff ns"><img src="../Images/f07cb70db971e2d9e4fa17c69e5bcfc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*O3oECgEI3REF0By5EUrSLA.png"/></div></figure><p id="d740" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">以此为前提，在应用程序中的所有组件之间分担所有的责任真的很容易。</p><p id="e573" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你想一想谁是负责管理选择的人，现在答案真的很简单。肯定是那个<code class="eh mk ml mm mn b">SelectableList</code>。</p><p id="a60c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">可选列表</strong>:</p><figure class="me mf mg mh fq iv"><div class="bz el l di"><div class="mi mj l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">SelectableList is agnostic of CartItems</figcaption></figure><p id="7f30" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv"> CartItem </strong>:</p><figure class="me mf mg mh fq iv"><div class="bz el l di"><div class="mi mj l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">CartItem component knows nothing from SelectableList component</figcaption></figure><p id="e6e2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这件事真正酷的地方在于，现在责任非常明确，两个组件都可以在不冲突的情况下发展。您想在<code class="eh mk ml mm mn b">SelectableList</code>中添加多选吗？去吧。你在给<code class="eh mk ml mm mn b">CartItem</code>加新东西吗？没问题。</p><p id="46cf" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在组件逻辑方面，使用事件冒泡来决定如何在应用程序中生成每个事件的所有者。如果你认为一个事件不应该通过上层组件，用<code class="eh mk ml mm mn b">stopPropagation</code>方法阻止它。</p><p id="0597" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你发现自己试图禁用组件中的某个特定区域，你可以利用<a class="ae ke" href="https://developer.mozilla.org/en/docs/Web/CSS/pointer-events" rel="noopener ugc nofollow" target="_blank">指针事件</a>属性来更好地控制什么是可点击的。</p><h1 id="9c1a" class="lb lc hu bd ld le nt lg lh li nu lk ll lm nv lo lp lq nw ls lt lu nx lw lx ly dt translated">结论</h1><p id="50d2" class="pw-post-body-paragraph jg jh hu ji b jj lz jl jm jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd hn dt translated">您可以将这些例子推广到数百个用例中。结果将是一组非常好的可重用通用组件和一组链接到您的业务逻辑的简单组件。</p><p id="a6e0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">有了这组通用组件，就更容易在应用程序中应用对<a class="ae ke" href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA" rel="noopener ugc nofollow" target="_blank">可访问性</a>的改进。这将提高你的应用程序的质量，同时为它的许多部分增加价值。</p><p id="f9de" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">每当你创建新的<br/>组件时，试着在容器和内容中思考，你将能够找出最适合你的！</p></div><div class="ab cl ku kv hc kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="hn ho hp hq hr"><p id="67fd" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="kt">如果你喜欢这篇文章，请点击下面的</em> ❤️ <em class="kt">按钮，关注这篇文章，这样你就不会错过。</em></p><div class="me mf mg mh fq ab cb"><figure class="ny iv nz oa ob oc od paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="ny iv nz oa ob oc od paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="ny iv nz oa ob oc od paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="oe of og"><p id="f922" class="jg jh kt ji b jj jk jl jm jn jo jp jq oh js jt ju oi jw jx jy oj ka kb kc kd hn dt translated"><a class="ae ke" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是AMI家庭的一员。我们现在<a class="ae ke" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ke" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jg jh kt ji b jj jk jl jm jn jo jp jq oh js jt ju oi jw jx jy oj ka kb kc kd hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ke" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ke" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="me mf mg mh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ok"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="me mf mg mh fq iv"><div class="bz el l di"><div class="ol mj l"/></div></figure></div></div>    
</body>
</html>