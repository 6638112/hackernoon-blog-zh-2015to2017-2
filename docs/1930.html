<html>
<head>
<title>A glowing, crackling fire effect with CSS animations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有CSS动画的发光、噼啪作响的火焰效果</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-glowing-crackling-fire-effect-with-css-animations-8724ff691f44?source=collection_archive---------0-----------------------#2016-12-21">https://medium.com/hackernoon/a-glowing-crackling-fire-effect-with-css-animations-8724ff691f44?source=collection_archive---------0-----------------------#2016-12-21</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/112a4194b730dcf743d26ceb3999731b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wniuZGo-FXakAI4rGXdTWg.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Initial background image from Pexels</figcaption></figure><p id="edec" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">对于任何真正的艺术家或 <a class="ae kf" href="https://hackernoon.com/tagged/css" rel="noopener ugc nofollow" target="_blank"> <em class="ke"> CSS </em> </a> <em class="ke">忍者来说，这个故事可能不会是革命性的，但对于温特来说是一个有趣的副业。享受吧。</em></p><p id="ffc1" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为了庆祝即将到来的假期，我们最近在我们的<a class="ae kf" href="https://inthelocus.com" rel="noopener ugc nofollow" target="_blank">轨迹视频对话</a>应用程序中添加了一个冬季背景主题。我们首先从<a class="ae kf" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank"> Pexels </a>中发现了一张舒适的冬季图片。不错的开始，但气氛还不够。好的，加上劈啪作响的火的声音。简单到可以找到一段来自freesound.org的好听的录音，比如这首“<a class="ae kf" href="http://www.freesound.org/people/hansende/sounds/263994/" rel="noopener ugc nofollow" target="_blank">壁炉3小时</a>”。或者YouTube上有同样声音的视频版本，嵌在下面。</p><figure class="kg kh ki kj fq iv"><div class="bz el l di"><div class="kk kl l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Fireplace sound with video!</figcaption></figure><p id="8a68" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">啊……现在我们开始觉得更舒服了。然而，看着静止的照片，听着噼啪作响的炉火，感觉有点太静态了。让我们使用一些CSS3动画魔法，让火发光！</p><p id="9347" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们想确保我们的动画运行流畅，不会消耗太多的cpu周期。我们的视频会议网络应用已经有足够的计算能力。从文章<a class="ae kf" rel="noopener" href="/outsystems-experts/how-to-achieve-60-fps-animations-with-css3-db7b98610108#.oqvri84ac">流畅如奶油:用CSS3实现60 FPS动画</a>中，我们看到:</p><blockquote class="km kn ko"><p id="b9f0" class="jg jh ke ji b jj jk jl jm jn jo jp jq kp js jt ju kq jw jx jy kr ka kb kc kd hn dt translated">利用<strong class="ji hv">变换</strong>和<strong class="ji hv">不透明</strong>属性，现代浏览器可以很好地制作四种风格的动画。</p><p id="dfd5" class="jg jh ke ji b jj jk jl jm jn jo jp jq kp js jt ju kq jw jx jy kr ka kb kc kd hn dt translated"><strong class="ji hv">位置</strong> —变换:translate x(<em class="hu">n</em>)translate y(<em class="hu">n</em>)translate z<em class="hu">(n</em>)；</p><p id="bc5a" class="jg jh ke ji b jj jk jl jm jn jo jp jq kp js jt ju kq jw jx jy kr ka kb kc kd hn dt translated"><strong class="ji hv">缩放</strong> —变换:缩放(<em class="hu">n</em>)；</p><p id="322f" class="jg jh ke ji b jj jk jl jm jn jo jp jq kp js jt ju kq jw jx jy kr ka kb kc kd hn dt translated"><strong class="ji hv">旋转</strong> —变换:旋转(<em class="hu">n</em>deg)；</p><p id="2f4b" class="jg jh ke ji b jj jk jl jm jn jo jp jq kp js jt ju kq jw jx jy kr ka kb kc kd hn dt translated"><strong class="ji hv">不透明度</strong> —不透明度:<em class="hu">n</em>；</p></blockquote><p id="3adb" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">好的，很好。我们可以利用不透明动画来创建一个发光的效果。我们的背景图像已经有一个明亮的火灾场景。我们可以添加一个半透明的覆盖层来选择性地使这个场景变暗，并设置不透明度来产生发光效果。</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ks"><img src="../Images/ce0ee4b53b4e0601e94b93d136cdfc26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SLzSIP1KFHI1EMG2TA66FQ.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Our simplified goal, darken the fire</figcaption></figure><p id="f092" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">太好了。只不过我们不想让我们的整体形象变暗，我们只想让火焰和被火照亮的区域变暗。大概是这样的:</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ks"><img src="../Images/6f8c78f86ebf5e366f348482a6cf2e59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y49FyocUtAi7GgMpqt4KBw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Tailored fire darkening overlay</figcaption></figure><p id="a8b3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为了创建一个实际场景的覆盖图，我使用了Photoshop。我肯定不是Photoshop高手，所以会保持这个高水平。基本上，我们想要创建一个图像，在有火或火的地方是最暗的，而在其他地方是亮的/完全透明的。我们的最终目标是:</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kt"><img src="../Images/8ce7635014a2c24ee56459648e7a2be1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BUFv95D12rk8ZIswXy2g8g.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Final overlay image for winter scene</figcaption></figure><p id="5814" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">首先，我们删除图像中任何不想被影响的部分，并用黑色替换。把边缘弄光滑一点。</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kt"><img src="../Images/d22ab89140edaaf09ff1c90370b5db44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cr_kwQYXw0Lqij4aaDjXhA.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Just the image portion we want to affect</figcaption></figure><p id="d644" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，我们希望我们的叠加图像优先变暗被火照亮的区域。在这一步，这意味着我们希望所有发光的部分显示得更白，其余的部分显示得更黑。我主要是在特定的颜色上使用色调/饱和度/亮度滤镜。使红色和黄色变亮，并使剩余的颜色变暗。</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kt"><img src="../Images/b79c25720e2d161e1202ac2be28a6b16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RicSGazU2Nwx1KN36nqB6Q.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">After tweaking colors</figcaption></figure><p id="3570" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在我们反转图像:</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kt"><img src="../Images/c8cb5d8ccd8a099bd3bf5747b780d1ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QXGX_jyWqsbcoE6E5Q9rTQ.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Inverted</figcaption></figure><p id="a75f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">快到了。但是等等，看看当我们将这张图像半透明地覆盖在基础图像上时会发生什么:</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ku"><img src="../Images/4f9969e2081c52ebf4850af4e3e339d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NsvTYJDUPvua2OJL3Cl_tw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">That’s not right!</figcaption></figure><p id="03f2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">哎呀，整个图像被洗掉了。这是因为，叠加图像的背景是白色的。如果我们简单地叠加这张图像，并给它一个CSS不透明度，暗区会使基础图像变暗，但是白色区域会使基础图像变亮。我们需要的不是颜色的变化，而是透明度的<em class="ke">变化。我们希望将图像转换为灰度，然后从灰度强度映射到不透明度，创建一个全黑且不透明度不同的新图像。据我所知，Photoshop没有一个简单的方法来做到这一点。但是免费的开源编辑器<a class="ae kf" href="https://www.gimp.org/" rel="noopener ugc nofollow" target="_blank"> GIMP </a>做到了。下面引用的这篇文章告诉我们如何去做。</em></p><blockquote class="km kn ko"><p id="e3aa" class="jg jh ke ji b jj jk jl jm jn jo jp jq kp js jt ju kq jw jx jy kr ka kb kc kd hn dt translated">1)打开您的文档(即黑白照片)</p><p id="d375" class="jg jh ke ji b jj jk jl jm jn jo jp jq kp js jt ju kq jw jx jy kr ka kb kc kd hn dt translated">2)在图层菜单中右击照片选择“添加Alpha通道”</p><p id="4d06" class="jg jh ke ji b jj jk jl jm jn jo jp jq kp js jt ju kq jw jx jy kr ka kb kc kd hn dt translated">3)转到顶部的颜色菜单，选择“颜色到Alpha ”,一个显示颜色的窗口出现，点击确定。</p><p id="daf4" class="jg jh ke ji b jj jk jl jm jn jo jp jq kp js jt ju kq jw jx jy kr ka kb kc kd hn dt translated">就是这样。你完了。只需要一分钟。</p></blockquote><p id="1e5f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">太好了。现在我们终于有了最终的叠加图像。</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ku"><img src="../Images/0872944fe40eda6e033d4b63c5501320.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H_6U2li8rTHlFvpnabbhLA.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">There we go! Dimmed fire.</figcaption></figure><p id="741f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">很好，现在来看CSS部分，它变得相对简单。我们只是绝对地放置两张图片，叠加在上面。然后动画覆盖的不透明度。CSS看起来像这样:</p><pre class="kg kh ki kj fq kv kw kx ky aw kz dt"><span id="4313" class="la lb hu kw b fv lc ld l le lf">img.base{<br/>  position: absolute;<br/>  /* position, height, width, etc as appropriate. */<br/>  z-index: 0;<br/>}</span><span id="f917" class="la lb hu kw b fv lg ld l le lf">img.overlay{<br/>  position: absolute;<br/>  /* position, height, width, etc as appropriate. */<br/>  z-index: 1;<br/>  opacity: 0.0;<br/>  animation-delay: 0.5s;<br/>  animation-duration: 15s;<br/>  animation-direction: normal;<br/>  animation-iteration-count: infinite;<br/>  animation-name: fireFlicker;<br/>  animation-timing-function: linear;<br/>}</span><span id="1a7c" class="la lb hu kw b fv lg ld l le lf"><a class="ae kf" href="http://twitter.com/keyframes" rel="noopener ugc nofollow" target="_blank">@keyframes</a> fireFlicker {<br/>  0%, 10% { opacity: 0; }<br/>  15%,20% { opacity: 0.13; }<br/>  22%,23% { opacity: 0.026; }<br/>  25%,35% { opacity: 0.08; }<br/>  39%,42% { opacity: 0.22; }<br/>  44%,47% { opacity: 0.13; }<br/>  49%,50% { opacity: 0.026; }<br/>  52%,54% { opacity: 0.08; }<br/>  57%,58% { opacity: 0.24; }<br/>  60%,63% { opacity: 0.17; }<br/>  65%,72% { opacity: 0.08; }<br/>  77%,85% { opacity: 0.026; }<br/>  90%,95% { opacity: 0.17; }<br/>  100% { opacity: 0; }<br/>}</span></pre><p id="dcf6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">显然这里有很大的变化空间。我选择了一个以0不透明度开始和结束的动画，并且无限向前循环。或者，你可以有一个向前和向后交替的动画。选择<code class="eh lh li lj kw b">linear </code>中的<code class="eh lh li lj kw b">animation-timing-function</code>,是因为与其他选项相比，它的计算成本更低。然而，我确实认为<code class="eh lh li lj kw b">ease-in-out</code>看起来更好一点。动画关键帧在一段时间内保持恒定值(即每行有2个百分比值，表示不透明度在这些值之间保持不变)。相对于不断变化的动画，这样做也是为了减少计算量。15秒的动画时间似乎太长了，以至于看不出动画是在循环播放。</p><p id="3827" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">就是这样！我相信可以做更多的工作来提高效果。我考虑过添加另一个叠加层来给火焰添加一点闪烁，但是没有时间或者艺术技巧！这种效果是故意相对微妙的，但可以通过调整动画值来夸大。</p><p id="7686" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">前往<a class="ae kf" href="https://inthelocus.com" rel="noopener ugc nofollow" target="_blank">地点</a>，点击“获取您的房间”，观看现场效果。然后点击“进入房间”按钮，一切都准备好了。这个场景应该至少在2016/2017年冬季期间保持直播。或者更简单的是，下面有一个代码笔。</p><p id="5f82" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">感谢阅读！如果你喜欢你所读的，一定要💗下面。如果你想知道为什么我们还在开发另一个视频会议应用程序，看看我的文章“2016年了，为什么视频会议还是很糟糕？”</p><figure class="kg kh ki kj fq iv"><div class="bz el l di"><div class="lk kl l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek"><a class="ae kf" href="http://codepen.io/calchris42/pen/KNEBPq" rel="noopener ugc nofollow" target="_blank">CodePen of the glowing fire effect</a>.</figcaption></figure><div class="kg kh ki kj fq ab cb"><figure class="ll iv lm ln lo lp lq paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="ll iv lm ln lo lp lq paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="ll iv lm ln lo lp lq paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="km kn ko"><p id="f922" class="jg jh ke ji b jj jk jl jm jn jo jp jq kp js jt ju kq jw jx jy kr ka kb kc kd hn dt translated"><a class="ae kf" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是这个家庭的一员。我们现在<a class="ae kf" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kf" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jg jh ke ji b jj jk jl jm jn jo jp jq kp js jt ju kq jw jx jy kr ka kb kc kd hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kf" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kf" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lr"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="kg kh ki kj fq iv"><div class="bz el l di"><div class="ls kl l"/></div></figure></div></div>    
</body>
</html>