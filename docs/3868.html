<html>
<head>
<title>The Mac Pro: A Case for Expansion</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Mac Pro:扩张的案例</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/the-mac-pro-a-case-for-expansion-be5f2962bf47?source=collection_archive---------2-----------------------#2017-04-28">https://medium.com/hackernoon/the-mac-pro-a-case-for-expansion-be5f2962bf47?source=collection_archive---------2-----------------------#2017-04-28</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="6c40" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">我在为深度学习构建GPU平台时学到的一些东西</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/10ae91d7c10e051503cc6ad06a431e24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KQ8wMS6sbYTnJsfl7X4ZkA.jpeg"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">NVIDIA <a class="ae jz" href="https://www.nvidia.com/en-us/geforce/products/10series/titan-x-pascal/" rel="noopener ugc nofollow" target="_blank">TITAN X Pascal </a>— Photo: <a class="ae jz" href="https://tompark.com" rel="noopener ugc nofollow" target="_blank">Tom Park</a> / <a class="ae jz" href="https://creativecommons.org/licenses/by-sa/4.0/" rel="noopener ugc nofollow" target="_blank">CC BY-SA</a></figcaption></figure><p id="f8f8" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">在本月关于Mac Pro 的<a class="ae jz" href="http://www.techmeme.com/170404/p5#a170404p5" rel="noopener ugc nofollow" target="_blank">发布会上，苹果公司表示，他们试图在2013年的Mac Pro中放一个<em class="kw">泰坦X </em>，但它太热了，导致CPU节流。至少这是我的解释。</a></p><p id="c062" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">苹果倾向于在他们的桌面上使用性能不佳的GPU，所以很高兴听到他们正在寻求在下一代Mac Pro中改善这一点。他们已经得到大量<a class="ae jz" href="http://www.shacknews.com/article/93547/oculus-palmer-luckey-will-consider-mac-support-if-apple-ever-releases-a-good-computer" rel="noopener ugc nofollow" target="_blank">反馈</a>“专业”用户想要更强大的GPU，如英伟达的<em class="kw"> GTX 1080 </em>或<em class="kw"> 1080 Ti </em>。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff kx"><img src="../Images/766ef198a34f93cefd3ab6a56883aa14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ztm9i_fQTrIoeTb78vqsoQ.jpeg"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek"><a class="ae jz" href="http://pascaleggert.de/macpro.html" rel="noopener ugc nofollow" target="_blank">2017 Mac Pro concept</a> by Pascal Eggert — [<a class="ae jz" href="http://pascaleggert.de/macpro.html" rel="noopener ugc nofollow" target="_blank">Source</a>]</figcaption></figure><p id="ee44" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">几十年前，CPU增加了<a class="ae jz" href="https://en.wikipedia.org/wiki/SIMD" rel="noopener ugc nofollow" target="_blank"> SIMD </a>单元(例如英特尔的<a class="ae jz" href="https://en.wikipedia.org/wiki/MMX_(instruction_set)" rel="noopener ugc nofollow" target="_blank"> MMX </a>)来处理数字。尽管<a class="ae jz" href="http://people.csail.mit.edu/yaronm/PPoPP17_Matveev_Meirovitch.pdf" rel="noopener ugc nofollow" target="_blank">技术</a>提高了CPU的使用，但不可否认的是，最近这种计算从CPU转移到了GPU。</p><p id="64b8" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">GPU变得如此强大，以至于我们越来越多地使用它们，导致GPU上通用计算的增加。现在是GPU的重要时期，AMD将再次凭借其<a class="ae jz" href="http://wccftech.com/amd-rx-vega/" rel="noopener ugc nofollow" target="_blank"> Vega </a>系列在高端市场展开竞争，NVIDIA <a class="ae jz" href="http://wccftech.com/nvidia-volta-12nm-finfet/" rel="noopener ugc nofollow" target="_blank"> Volta </a>也将紧随其后。</p><blockquote class="ky"><p id="2a94" class="kz la hu bd lb lc ld le lf lg lh kv ek translated">“大多数针对(某些类型的高端电影制作任务)编写的软件不知道如何在多个GPU之间实现良好的平衡，但可以在单个大型GPU之间进行扩展。”<br/> ~ <a class="ae jz" href="https://techcrunch.com/2017/04/06/transcript-phil-schiller-craig-federighi-and-john-ternus-on-the-state-of-apples-pro-macs/" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">克雷格·费德里吉</strong> </a></p></blockquote><p id="be38" class="pw-post-body-paragraph ka kb hu kc b kd li iv kf kg lj iy ki kj lk kl km kn ll kp kq kr lm kt ku kv hn dt translated">诚然<a class="ae jz" href="https://www.provideocoalition.com/adobe-premiere-pro-and-multiple-gpus/" rel="noopener ugc nofollow" target="_blank">一些</a> <a class="ae jz" href="https://www.pugetsystems.com/labs/articles/Adobe-Premiere-Pro-CC-2015-3-Pascal-GPU-Performance-840/" rel="noopener ugc nofollow" target="_blank">应用</a>没有充分利用多个GPU，但真正的问题是，旧的弱GPU不会补偿新的强有力的GPU，我们不应该<a class="ae jz" href="https://twitter.com/panzer/status/849235619788095488" rel="noopener ugc nofollow" target="_blank">在这种背景之外概括</a>。苹果很有可能在2019年出售一款包含两个GPU的Mac Pro配置。</p><h1 id="107b" class="ln lo hu bd lp lq lr ls lt lu lv lw lx ja ly jb lz jd ma je mb jg mc jh md me dt translated">所以你需要一台快速的电脑</h1><p id="6bce" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">几年前，如果你要买一台新的Mac Pro，升级CPU的费用(3500美元)可能与整机本身的费用(3000美元)一样多。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mk ml l"/></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">[<a class="ae jz" href="http://www.macworld.com/article/2082515/mac-pro-late-2013-review-apples-new-mac-pro-really-is-for-pros.html#pricingandconfigurations" rel="noopener ugc nofollow" target="_blank">Source</a>]</figcaption></figure><p id="7769" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">本月早些时候，苹果更新了Mac Pro的配置和定价，以今天的标准来看，价格更加合理。从6核到12核的CPU升级现在只需要<a class="ae jz" href="https://www.apple.com/shop/buy-mac/mac-pro?product=MD878LL/A&amp;step=config" rel="noopener ugc nofollow" target="_blank"> $2000 </a>:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mm"><img src="../Images/85e6b8b14d8874900e90cd6d95c5785b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NCSZivXDHAYeO4-2XIEHDA.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">[<a class="ae jz" href="https://www.apple.com/shop/buy-mac/mac-pro?product=MD878LL/A&amp;step=config" rel="noopener ugc nofollow" target="_blank">Source</a>]</figcaption></figure><p id="3dda" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">这个价格与英特尔6核(<a class="ae jz" href="http://ark.intel.com/products/75780/Intel-Xeon-Processor-E5-1650-v2-12M-Cache-3_50-GHz" rel="noopener ugc nofollow" target="_blank"> $580 </a>)和12核(<a class="ae jz" href="http://ark.intel.com/products/75283/Intel-Xeon-Processor-E5-2697-v2-30M-Cache-2_70-GHz" rel="noopener ugc nofollow" target="_blank"> $2600 </a>)处理器之间的标价差异相当，所以苹果只是简单地传递了英特尔的建议价格。</p><p id="246a" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">请注意，6核单元的时钟速度比12核单元快30%，因此您将升级到较慢的内核。依赖单核性能的应用在更昂贵的CPU上实际上会运行得更慢。</p><p id="530f" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">现在考虑一下，700美元会给你买一台英伟达GTX 1080 Ti。上个月，这是公众可获得的最强大的GPU。<strong class="kc hv">与添加6个CPU内核的成本大致相同，您可以拥有3个世界上最强大的消费级GPU。</strong></p><p id="5d60" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">很遗憾，你无法将这三个怪物都插入下一代Mac Pro。假设，也就是说，苹果将它设计成与奶酪刨丝塔类似的扩展限制，这是他们有史以来最可扩展的Mac Pro。</p><h1 id="9397" class="ln lo hu bd lp lq lr ls lt lu lv lw lx ja ly jb lz jd ma je mb jg mc jh md me dt translated">两个中档GPU。还是单个高端的。</h1><p id="9dba" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">苹果在2013垃圾桶Mac Pro之前支持双GPU。在2012年，奶酪刨丝器Mac Pro有一个股票配置，配备了两个AMD镭龙HD 5770 GPUs。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mn"><img src="../Images/a720214e6197177929052e3adffe3c27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4XfTliirxTGbD0iR_3K0JA.jpeg"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">A dual-GPU, modular Mac Pro (mid-2012) — Photo: <a class="ae jz" href="https://tompark.com" rel="noopener ugc nofollow" target="_blank">Tom Park</a> / <a class="ae jz" href="https://creativecommons.org/licenses/by-sa/4.0/" rel="noopener ugc nofollow" target="_blank">CC BY-SA</a></figcaption></figure><p id="e841" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">与随后的2013年Mac Pro中的GPU一样，这些被认为是中端，而不是高端。它们的额定功率低于110瓦<a class="ae jz" href="https://en.wikipedia.org/wiki/Thermal_design_power" rel="noopener ugc nofollow" target="_blank">TDP</a>，因此它们比工作站级塔式机中的高端GPU(目前通常为250瓦TDP)耗电更少，产生的热量更少。</p><p id="20a5" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">有人可能会说，“但你可以用更强大的卡来取代那些卡。”虽然这是可能的，但盒子的设计不允许这样做。</p><p id="926d" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">它有一个像样的电源，<a class="ae jz" href="https://discussions.apple.com/thread/7859581" rel="noopener ugc nofollow" target="_blank"> 980瓦</a>。然而，它仅向每个视频卡提供150瓦，或总共300瓦。为了支持一对250瓦的GPU，如<em class="kw"> GTX 1080 Ti </em>，你必须以某种方式提供至少200瓦的功率，可能需要从驱动器托架端口或剩余的两个扩展槽连接额外的电源电缆。</p><p id="21de" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">回到2009年至2012年，当这款Mac Pro型号被制造出来时，高端GPU的功率往往是180至210瓦，但即便如此，你仍会至少短缺60瓦。事实上，苹果提供了一个替代的Mac Pro配置，配有一个高端AMD镭龙HD 5870，额定功率为<a class="ae jz" href="https://www.techpowerup.com/gpudb/2189/radeon-hd-5870-mac-edition" rel="noopener ugc nofollow" target="_blank"> 228 </a> - <a class="ae jz" href="http://www.videocardbenchmark.net/gpu.php?gpu=Radeon+HD+5870" rel="noopener ugc nofollow" target="_blank">瓦</a> TDP。没有额外的自定义布线，您无法插入另一个。奶酪刨丝器外壳根本不是为一对高端GPU设计的。</p><p id="0ef7" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">另一方面，这款Mac Pro有一个可更换的CPU模块，允许将系统从单CPU升级到双CPU。这很酷——在大多数其他计算机中，您必须更换主板才能升级到双CPU。但是现在你会想要这种GPU的可升级性。</p></div><div class="ab cl mo mp hc mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hn ho hp hq hr"><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mv ml l"/></div></figure><p id="a2ea" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">好吧，让我们假设苹果的下一款Mac Pro是模块化和可扩展的，就像奶酪刨丝塔一样，并配备了最新的技术:PCIe 4.0，Oculink-2，雷电3，USB-C 3.1，M.2 NVMe固态硬盘，以及LGA-2066或可能的LGA-3647插槽，用于具有44条PCIe连接通道的高端CPU。</p><p id="1b7c" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">这听起来很有前景，但它将支持多少个高端GPU呢？也许两个，如果你摆弄它？</p><h1 id="ff68" class="ln lo hu bd lp lq lr ls lt lu lv lw lx ja ly jb lz jd ma je mb jg mc jh md me dt translated">Pfft，你到底需要多少个GPU？</h1><p id="f8d8" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">这个问题让我想起了去年那些说Macbook Pro不需要超过16 GB内存的人。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mw"><img src="../Images/89555e0e86284e2fff73005db095c973.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/1*sZAfgr8lC42sX-77yc8RjQ.png"/></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">“Own the world’s greatest gaming computer and convince everyone it’s for your research” — <a class="ae jz" href="http://imgur.com/wiLsGqA" rel="noopener ugc nofollow" target="_blank">http://imgur.com/wiLsGqA</a></figcaption></figure><p id="db20" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">一台计算机中的三个GPU可能看起来很荒谬。在购买Mac Pro的Mac客户中，有个位数百分比的人需要两个以上的GPU。</p><p id="4567" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">关于苹果只支持两个GPU，从来没有争议。但是如果出现了一个，人们可能会声称没有人合法地需要两个以上的GPU。那么一个人就错了。</p></div><div class="ab cl mo mp hc mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hn ho hp hq hr"><h2 id="0c67" class="mx lo hu bd lp my mz na lt nb nc nd lx kj ne nf lz kn ng nh mb kr ni nj md nk dt translated">两周，两周，两周</h2><p id="eb82" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">如果你试图让一个人工智能程序识别一张照片中的1000种对象，你会发现，即使有多个GPU，训练一个神经网络也需要几周或几个月的时间。</p><blockquote class="ky"><p id="7dbb" class="kz la hu bd lb lc ld le lf lg lh kv ek translated">我们可以在2周左右的时间里，在8个NVIDIA Tesla K40s的台式机上，将一个模型从零开始训练到最佳性能。<br/> ~ <a class="ae jz" href="https://research.googleblog.com/2016/03/train-your-own-image-classifier-with.html" rel="noopener ugc nofollow" target="_blank">乔恩·施伦斯，谷歌研究</a></p></blockquote><p id="63ec" class="pw-post-body-paragraph ka kb hu kc b kd li iv kf kg lj iy ki kj lk kl km kn ll kp kq kr lm kt ku kv hn dt translated">避免这种延迟的常见建议是使用一种叫做“<a class="ae jz" href="https://www.tensorflow.org/tutorials/image_retraining" rel="noopener ugc nofollow" target="_blank">迁移学习</a>”的技术来改编一个已经训练过的。但取决于你想做什么，你不能总是使用别人预先训练的神经网络——在某些时候，你会陷入一个每次迭代可能需要数周的过程中。如果那时你只使用一个GPU，增加几个会大大减少周转时间。</p><h2 id="22a1" class="mx lo hu bd lp my mz na lt nb nc nd lx kj ne nf lz kn ng nh mb kr ni nj md nk dt translated">突然合成的</h2><p id="9d38" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">由“监督训练”创建的神经网络的一个常见问题是，它们需要大量的训练数据，否则输入中的微小变化就会欺骗它们。也就是说，假设你训练一个神经网络来识别猫，但你的训练数据由所有猫都直立坐着的照片组成。它可能认不出倒挂的猫。如果您通过添加原始文件的旋转和调整大小的副本来扩充训练集，您的程序将更好地处理这些差异。</p><p id="1eaa" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">一个值得注意的例子是，百度研究在语音识别方面取得了突破，这得益于对初始数据集进行噪声分层。</p><blockquote class="ky"><p id="2f39" class="kz la hu bd lb lc ld le lf lg lh kv ek translated">百度收集了大约7000个小时的人们谈话的数据，然后通过将这些文件与包含背景噪音的文件融合在一起，合成了大约10万个小时的数据。<br/> ~ <a class="ae jz" href="https://gigaom.com/2014/12/18/baidu-claims-deep-learning-breakthrough-with-deep-speech/" rel="noopener ugc nofollow" target="_blank">德里克·哈里斯，吉冈</a></p></blockquote><p id="80cc" class="pw-post-body-paragraph ka kb hu kc b kd li iv kf kg lj iy ki kj lk kl km kn ll kp kq kr lm kt ku kv hn dt translated">但是他们有14倍多的数据，需要更长的时间来处理。几年前百度<a class="ae jz" href="http://research.baidu.com/deep-speech-accurate-speech-recognition-with-gpu-accelerated-deep-learning/" rel="noopener ugc nofollow" target="_blank">用了8个GPU</a>。最近，他们报告说使用了多达<a class="ae jz" href="http://research.baidu.com/bringing-hpc-techniques-deep-learning/" rel="noopener ugc nofollow" target="_blank"> 40 </a>或<a class="ae jz" href="https://www.hpcwire.com/2016/06/20/interview-greg-diamos-senior-researcher-silicon-valley-ai-lab-baidu/" rel="noopener ugc nofollow" target="_blank"> 128 </a>的GPU。</p><h2 id="23bb" class="mx lo hu bd lp my mz na lt nb nc nd lx kj ne nf lz kn ng nh mb kr ni nj md nk dt translated">现在你有两个问题</h2><p id="d315" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">最近，人工智能中一些最酷的成果基于一种技术，其中两个神经网络相互竞争(<a class="ae jz" href="https://en.wikipedia.org/wiki/Generative_adversarial_networks" rel="noopener ugc nofollow" target="_blank">生成对抗网络</a>)，以提高它们创建和识别数据类型的能力。</p><blockquote class="ky"><p id="a8e8" class="kz la hu bd lb lc ld le lf lg lh kv ek translated">对于更大的模型和数据集，Ian [Goodfellow]需要在多个GPU上并行化模型。每个作业都会将多台机器的CPU和GPU利用率提高到90%，但即使这样，模型也需要花很多天来训练。<br/> ~ <a class="ae jz" href="https://blog.openai.com/infrastructure-for-deep-learning/" rel="noopener ugc nofollow" target="_blank"> OpenAI博客</a></p></blockquote><p id="2603" class="pw-post-body-paragraph ka kb hu kc b kd li iv kf kg lj iy ki kj lk kl km kn ll kp kq kr lm kt ku kv hn dt translated">这意味着你在训练两个神经网络，而不是一个。同样，你需要尽可能多的计算能力。</p><h1 id="fb69" class="ln lo hu bd lp lq lr ls lt lu lv lw lx ja ly jb lz jd ma je mb jg mc jh md me dt translated">您会为扩展槽支付额外费用吗？</h1><p id="d5d6" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">我开始做深度学习工作的时候，用的是亚马逊云上的GPU spot实例。在积累了一小笔账单后，我开始寻找外部GPU盒，但最终组装了一台PC。</p><blockquote class="ky"><p id="73db" class="kz la hu bd lb lc ld le lf lg lh kv ek translated">AWS上的GPU现在相当慢(一个GTX 1080比AWS GPU快四倍)，价格在最近几个月大幅飙升。现在，购买自己的GPU似乎更加明智。<br/> ~ <a class="ae jz" href="http://timdettmers.com/2017/04/09/which-gpu-for-deep-learning/" rel="noopener ugc nofollow" target="_blank"> Tim Dettmers </a></p></blockquote><p id="9db0" class="pw-post-body-paragraph ka kb hu kc b kd li iv kf kg lj iy ki kj lk kl km kn ll kp kq kr lm kt ku kv hn dt translated">我只买了一个GPU。但是我知道我可能需要添加更多，所以我确保这台电脑最多可以容纳四个。</p><p id="8c71" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">我已经很久没有用组件组装电脑了，那时候我并没有注意我能在里面放多少个GPU。令我惊讶的是，很多电脑都不能全带宽支持两个GPU，大部分都不能支持两个以上。只有少数昂贵的主板可以同时支持4个GPU和PCIe 3.0连接的x16通道。</p><p id="cebe" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">增加3个GPU的能力花费了我大约600美元。如果用标准组件构建，这大约是基本系统(不含GPU)成本的三分之一。这个数字代表了支持四GPU的主板、1500瓦大电源和40 PCI通道(而不是28通道)的CPU的较高价格。我确实为可扩展性本身支付了额外的费用。</p><h1 id="8009" class="ln lo hu bd lp lq lr ls lt lu lv lw lx ja ly jb lz jd ma je mb jg mc jh md me dt translated">苹果会出售额外的扩展作为一种选择吗？</h1><p id="8705" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">Mac Pro被定位为苹果最强大的电脑，但计算能力正以各种形式出现。高速扩展槽提供了在未来以任何形式升级计算能力的能力。我们在这里不仅仅谈论GPUs它可能是<a class="ae jz" href="https://www.nextplatform.com/2017/03/21/can-fpgas-beat-gpus-accelerating-next-generation-deep-learning/" rel="noopener ugc nofollow" target="_blank">FPGA</a>，或者<a class="ae jz" href="https://www.nextplatform.com/2016/08/23/fpga-based-deep-learning-accelerators-take-asics/" rel="noopener ugc nofollow" target="_blank">ASIC</a>，就像谷歌的<a class="ae jz" href="https://www.wired.com/2017/04/building-ai-chip-saved-google-building-dozen-new-data-centers/" rel="noopener ugc nofollow" target="_blank"> TPU </a>。或者<a class="ae jz" href="http://bgr.com/2017/04/24/intel-optane-ssd-fastest-ssd-drives/" rel="noopener ugc nofollow" target="_blank">快速存储</a>。</p><p id="d941" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">电脑制造商一般不销售不同外壳的单一系列台式电脑。例如，您通常不会看到这样的内容:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nl"><img src="../Images/ed5c8bf77f3bfbc0ca6656112b7cf5eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zgOqW_KmslwFDIZ9V4-f7g.jpeg"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek"><a class="ae jz" href="https://forums.macrumors.com/threads/new-mac-pro-release-date-rumours-and-leaked-images.1519861/#post-16609557" rel="noopener ugc nofollow" target="_blank">2013 Mac Pro concept</a> by Scott Richardson —[<a class="ae jz" href="https://forums.macrumors.com/threads/new-mac-pro-release-date-rumours-and-leaked-images.1519861/#post-16609557" rel="noopener ugc nofollow" target="_blank">Source</a>]</figcaption></figure><p id="6fa2" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">相反，计算机系列的型号是根据CPU速度、存储和/或屏幕大小来定位的。这就是典型的情况:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nm"><img src="../Images/6b808c61b06c58139071335a2f03b446.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T39Dioy4fdrJXUj6Hk8DYg.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek"><a class="ae jz" href="https://www.apple.com/mac-pro/specs/" rel="noopener ugc nofollow" target="_blank">https://www.apple.com/mac-pro/specs/</a></figcaption></figure><p id="cafe" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">但是卖可选的可扩展性不是很有意义吗？它有价值。你可以给它定价。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nm"><img src="../Images/961a7c19fc4aceed601256b0150f9563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cXvfCmnxre3Bv_aR9pDxWA.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">C’mon you have to admit it’d be pretty cool 😎</figcaption></figure><p id="8e72" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">我知道你在想什么:“苹果不可能这么做。这不值得，因为没有足够的客户来购买更大的Mac Pro。”</p><p id="1521" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">你可能是对的。</p><p id="5c40" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">此外，它将拥有Thunderbolt-3，可能还有速度更快的Oculink-2，所以如果需要的话，人们可以连接<a class="ae jz" href="https://www.razerzone.com/store/razer-core" rel="noopener ugc nofollow" target="_blank">外部</a>GPU……你知道，就像这样:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nn"><img src="../Images/4b7676861cee15877f67b3b6cc21d4c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mgvlR8tkqC6MC6spV7vsOg.jpeg"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Photo: Peter Wiggins — [<a class="ae jz" href="http://www.fcp.co/final-cut-pro/articles/1595-the-mac-pro-and-final-cut-pro-x-one-year-on-what-has-changed" rel="noopener ugc nofollow" target="_blank">Source</a>]</figcaption></figure><p id="ed4d" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">无论如何，我很期待看到苹果如何重新思考Mac Pro。</p></div><div class="ab cl mo mp hc mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hn ho hp hq hr"><blockquote class="ky"><p id="cc6f" class="kz la hu bd lb lc ld le lf lg lh kv ek translated">当我们达到三个GPU时，我们在技术上属于利基类别…从与华硕的会谈中，尽管一个产品可能面向利基市场，但如果该产品被认为是好的，它可能会在标准市场上卖得很好。<br/> ~ <a class="ae jz" href="http://www.anandtech.com/show/6170/four-multigpu-z77-boards-from-280350-plx-pex-8747-featuring-gigabyte-asrock-ecs-and-evga/31" rel="noopener ugc nofollow" target="_blank"> Ian Cutress，AnandTech </a>(多GPU板综述)</p></blockquote></div><div class="ab cl mo mp hc mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="hn ho hp hq hr"><h1 id="088f" class="ln lo hu bd lp lq no ls lt lu np lw lx ja nq jb lz jd nr je mb jg ns jh md me dt translated">问与答(Question and Answer)</h1><p id="740c" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">问一些尖锐的问题。</p><h2 id="352d" class="mx lo hu bd lp my mz na lt nb nc nd lx kj ne nf lz kn ng nh mb kr ni nj md nk dt translated">多个GPU有什么大不了的——比特币矿工不是在一个<a class="ae jz" href="https://www.google.com/search?tbm=isch&amp;q=bitcoin+mining+rig+milk+crate" rel="noopener ugc nofollow" target="_blank">牛奶箱</a>里的一台PC上放了6或8个GPU吗？</h2><p id="3075" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">是的，但加密货币算法可以在没有大量数据传输的GPU上运行，因此矿工可以使用PCI竖板电缆或PCI分离器，并使用一条PCI通道连接每个GPU。这意味着他们不需要40线CPU和四x16插槽主板。</p><h2 id="9a80" class="mx lo hu bd lp my mz na lt nb nc nd lx kj ne nf lz kn ng nh mb kr ni nj md nk dt translated">比特币挖矿，GPU被ASICs超越。AI不也是这样吗？</h2><p id="1cc3" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">或许，至少<a class="ae jz" href="https://venturebeat.com/2016/11/17/intel-will-test-nervanas-lake-crest-silicon-in-first-half-of-2017-knights-crest-also-coming/" rel="noopener ugc nofollow" target="_blank"> Nervana </a>和<a class="ae jz" href="http://www.techmeme.com/170422/p4#a170422p4" rel="noopener ugc nofollow" target="_blank"> Groq </a>正在努力。与此同时，GPU具有多功能性，这使得它们在可预见的未来非常有用。</p><h2 id="ef17" class="mx lo hu bd lp my mz na lt nb nc nd lx kj ne nf lz kn ng nh mb kr ni nj md nk dt translated">ASIC的功耗要求比GPU低，那么多个ASIC不就没必要用大电源了吗？</h2><p id="a618" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">也许吧，但是你可能会在每个扩展卡上安装更多的ASICs。</p><h2 id="0f1f" class="mx lo hu bd lp my mz na lt nb nc nd lx kj ne nf lz kn ng nh mb kr ni nj md nk dt translated">你提到了FPGAs和ASICs，但是量子处理器呢？</h2><p id="4351" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">哦，是的，我想也是。</p><h2 id="d6c2" class="mx lo hu bd lp my mz na lt nb nc nd lx kj ne nf lz kn ng nh mb kr ni nj md nk dt translated">为什么每个GPU需要16个通道？游戏没有显示出运行在x8和x16上的GPU有任何区别。</h2><p id="89f3" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">游戏确实没有明显的区别，但这可能是因为它们在x8的GPU上运行良好。游戏不会使x16 PCIe 3.0连接饱和，但深度学习程序等其他应用程序可以。</p><h2 id="17fa" class="mx lo hu bd lp my mz na lt nb nc nd lx kj ne nf lz kn ng nh mb kr ni nj md nk dt translated">一个只有40个PCI通道的CPU如何连接到4个各使用16个通道的GPU？</h2><p id="d4a2" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">对，4×16 = 64，也就是40多。主板有两个PCIe开关，每个开关可以将来自CPU的16路信号多路传输到两个插槽的32路信号。因此，4个插槽仅使用来自CPU的32个通道。</p><p id="3809" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><a class="ae jz" href="http://www.anandtech.com/show/7603/mac-pro-review-late-2013/8" rel="noopener ugc nofollow" target="_blank">苹果在2013年的Mac Pro中为Thunderbolt 2控制器使用了</a>一种类似的PCIe开关。</p><h2 id="18fc" class="mx lo hu bd lp my mz na lt nb nc nd lx kj ne nf lz kn ng nh mb kr ni nj md nk dt translated">那些PCI交换机不是引入了很多延迟吗？</h2><p id="0d69" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">有些人说延迟太差了，最好只使用8个通道，但那是一个<a class="ae jz" href="https://www.microway.com/hpc-tech-tips/common-pci-express-myths-gpu-computing/" rel="noopener ugc nofollow" target="_blank">神话</a>。显然，这种想法的传播是由于游戏测试显示x8 GPUs上的帧速率略高于交换式x16 GPUs。但是游戏不适合这种基准测试，因为它们没有超过x8带宽——在无交换机x16插槽上可以得到类似的结果。</p><p id="9446" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">我还没有看到任何好的测试，但是NVIDIA <a class="ae jz" href="https://devblogs.nvidia.com/parallelforall/benchmarking-gpudirect-rdma-on-modern-server-platforms/" rel="noopener ugc nofollow" target="_blank">基准测试</a>显示，PLX (Avago/Broadcom)交换机的延迟或带宽损失非常小。</p><h2 id="aaf1" class="mx lo hu bd lp my mz na lt nb nc nd lx kj ne nf lz kn ng nh mb kr ni nj md nk dt translated">给我们看看你的装备。照片或它没有发生。</h2><p id="241c" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">这是奶酪刨丝器旁边的:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nt"><img src="../Images/5eb94d03f7beba4444770a3b0da6a5cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eDPEy0V7yUH2Wa-6Sv3Qqw.jpeg"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">An open case rig next to a Mac Pro 5,1 — Photo: <a class="ae jz" href="https://tompark.com" rel="noopener ugc nofollow" target="_blank">Tom Park</a> / <a class="ae jz" href="https://creativecommons.org/licenses/by-sa/4.0/" rel="noopener ugc nofollow" target="_blank">CC BY-SA</a></figcaption></figure><h2 id="b079" class="mx lo hu bd lp my mz na lt nb nc nd lx kj ne nf lz kn ng nh mb kr ni nj md nk dt translated">什么……真丑。为什么没有案子？</h2><p id="639c" class="pw-post-body-paragraph ka kb hu kc b kd mf iv kf kg mg iy ki kj mh kl km kn mi kp kq kr mj kt ku kv hn dt translated">好了，所以我要稍微发泄一下关于主板和机箱设计的问题。酷酷的台式电脑设计完全被uATX、mITX和ATX板的标准化方式所阻挠。这个领域在非标准主板和背板方面有很大的创新空间。</p><p id="ee7f" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">许多人呼吁苹果公司将下一代Mac Pro放在一个大盒子里，但我认为如果这正是苹果公司所做的，那将是一种耻辱。他们在2013年的Mac Pro上走了极端，但恢复到标准的塔式机箱也不是那么有吸引力。</p><p id="0a43" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">我想要一个小巧的外形，但主板太大了(扩展ATX)，它必须放在一个相当大的盒子里，我不喜欢我看到的任何东西。所以我尝试了MakerBeam rails，而不是用Carbide Air 540外壳模仿<a class="ae jz" href="https://developer.nvidia.com/devbox" rel="noopener ugc nofollow" target="_blank"> NVIDIA的DevBox </a>。它最终比我预想的要高，但在其他方面却很苗条。</p><p id="8126" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">单风扇液体冷却器对于CPU来说已经完全足够了。GPU通过x16垂直电缆连接，可以在CPU上滑动，因为CPU顶部没有巨大的散热器。这意味着多个GPU之间可以有很大的空隙。</p><p id="d300" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">它有两个140毫米的风扇，即使在持续的高负荷下，也出奇的安静。发出巨大噪音的是一个5TB的硬盘，它在向convnet传输图像时不停地敲打。经过几天恼人的日子，我改用固态硬盘。它没有驱动器托架，只有一个M.2驱动器，可以在侧轨上安装额外的固态硬盘。</p><div class="jk jl jm jn fq ab cb"><figure class="nu jo nv nw nx ny nz paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="nu jo nv nw nx ny nz paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="nu jo nv nw nx ny nz paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="oa ob oc"><p id="f922" class="ka kb kw kc b kd ke iv kf kg kh iy ki od kk kl km oe ko kp kq of ks kt ku kv hn dt translated"><a class="ae jz" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jz" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jz" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jz" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ka kb kw kc b kd ke iv kf kg kh iy ki od kk kl km oe ko kp kq of ks kt ku kv hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jz" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jz" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff og"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>