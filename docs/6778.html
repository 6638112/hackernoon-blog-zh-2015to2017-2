<html>
<head>
<title>How to build a file upload form using DropzoneJS and Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用DropzoneJS和Go构建文件上传表单</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-build-a-file-upload-form-using-dropzonejs-and-go-8fb9f258a991?source=collection_archive---------8-----------------------#2017-10-04">https://medium.com/hackernoon/how-to-build-a-file-upload-form-using-dropzonejs-and-go-8fb9f258a991?source=collection_archive---------8-----------------------#2017-10-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/1e8029f4421ecc84c6419cd1de6fdc3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*dB92b5pGDr0tJbIGpU-3Rw.png"/></div></figure><p id="6eae" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这是DropzoneJS + Go系列的第1部分，共2部分。</p><ul class=""><li id="5116" class="jw jx hu ja b jb jc jf jg jj jy jn jz jr ka jv kb kc kd ke dt translated"><a class="ae kf" rel="noopener" href="/@kataras/how-to-build-a-file-upload-form-using-dropzonejs-and-go-8fb9f258a991">第1部分:如何构建文件上传表单</a></li><li id="bb43" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv kb kc kd ke dt translated"><a class="ae kf" rel="noopener" href="/@kataras/how-to-display-existing-files-on-server-using-dropzonejs-and-go-53e24b57ba19">第二部分:如何显示服务器上的现有文件</a></li></ul><h1 id="b3c2" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">DropzoneJS + Go:如何构建文件上传表单</h1><p id="31d7" class="pw-post-body-paragraph iy iz hu ja b jb lj jd je jf lk jh ji jj ll jl jm jn lm jp jq jr ln jt ju jv hn dt translated">DropzoneJS 是一个开源库，提供图像预览的拖放文件上传。这是一个很棒的JavaScript库，实际上它甚至不依赖于JQuery。<br/>在本教程中，我们将使用DropzoneJS构建一个多文件上传表单，后端将由Go和<a class="ae kf" href="https://iris-go.com" rel="noopener ugc nofollow" target="_blank"> Iris </a>处理。</p><h1 id="d882" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">目录</h1><ul class=""><li id="a79a" class="jw jx hu ja b jb lj jf lk jj lo jn lp jr lq jv kb kc kd ke dt translated">准备</li><li id="83ab" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv kb kc kd ke dt translated">使用DropzoneJS</li><li id="ebc2" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv kb kc kd ke dt translated">使用Go工作</li></ul><h1 id="da91" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">准备</h1><ol class=""><li id="9906" class="jw jx hu ja b jb lj jf lk jj lo jn lp jr lq jv lr kc kd ke dt translated">下载<a class="ae kf" href="https://golang.org/dl" rel="noopener ugc nofollow" target="_blank"> Go(Golang) </a>，按照图中所示设置您的电脑，然后继续2。</li><li id="97c8" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">安装<a class="ae kf" href="https://github.com/kataras/iris" rel="noopener ugc nofollow" target="_blank">光圈</a>；打开终端并执行<code class="eh ls lt lu lv b">go get -u github.com/kataras/iris</code></li><li id="657d" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">从<a class="ae kf" href="https://raw.githubusercontent.com/enyo/dropzone/master/dist/dropzone.js" rel="noopener ugc nofollow" target="_blank">这个URL </a>下载DropzoneJS。DropzoneJS不依赖JQuery，你不用担心升级JQuery版本会破坏你的应用。</li><li id="027c" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">如果你想要一些已经制作好的css，从这个URL下载dropzone.css。</li><li id="95a2" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">创建一个文件夹”。/public/uploads”，这是用于存储上传的文件。</li><li id="f8c3" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">创建一个文件”。/views/upload.html”，这是针对前端表单页面的。</li><li id="f76e" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">创建一个文件”。/main.go "，这是为了处理后端文件上传过程。</li></ol><p id="cd53" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">准备后，您的文件夹和文件结构应该如下所示:</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div class="fe ff lw"><img src="../Images/d34cf5a5b2a2050d534e71b031e26598.png" data-original-src="https://miro.medium.com/v2/resize:fit:574/format:webp/1*z95XwSoJw6fdz5xqlygFHw.png"/></div></figure><h1 id="3aa3" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">使用DropzoneJS</h1><p id="c58d" class="pw-post-body-paragraph iy iz hu ja b jb lj jd je jf lk jh ji jj ll jl jm jn lm jp jq jr ln jt ju jv hn dt translated">打开文件”。/views/upload.html”并创建一个DropzoneJs表单。</p><p id="a4e3" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">将下面的内容复制到”。/views/upload.html”，我们将逐个检查每一行代码。</p><figure class="lx ly lz ma fq iv"><div class="bz el l di"><div class="mb mc l"/></div></figure><ol class=""><li id="6d3c" class="jw jx hu ja b jb jc jf jg jj jy jn jz jr ka jv lr kc kd ke dt translated">包括CSS样式表。</li><li id="22fd" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">包括DropzoneJS JavaScript库。</li><li id="21cb" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">用css类“dropzone”创建一个上传表单，“action”是路由路径“/upload”。请注意，我们确实为回退模式创建了一个输入字段。这都是DropzoneJS库自己处理的。我们需要做的就是将css类“dropzone”分配给表单。默认情况下，DropzoneJS会找到所有带有“dropzone”类的表单，并自动将自己附加到它上面。</li></ol><h1 id="61de" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">使用Go工作</h1><p id="3ac1" class="pw-post-body-paragraph iy iz hu ja b jb lj jd je jf lk jh ji jj ll jl jm jn lm jp jq jr ln jt ju jv hn dt translated">现在你已经到了教程的最后一部分。在本节中，我们将存储从DropzoneJS发送到。/public/uploads”文件夹。</p><p id="fa4f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">打开“main.go”并复制下面的代码:</p><figure class="lx ly lz ma fq iv"><div class="bz el l di"><div class="mb mc l"/></div></figure><ol class=""><li id="e1c0" class="jw jx hu ja b jb jc jf jg jj jy jn jz jr ka jv lr kc kd ke dt translated">创建新的Iris应用程序。</li><li id="a597" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">从“视图”文件夹中注册并加载模板。</li><li id="262a" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">使“/public”路由路径静态地服务于。/public/…文件夹的内容</li><li id="8f81" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">创建一个为上传表单服务的路由。</li><li id="3c0b" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">创建一个路由来处理DropzoneJS表单中的POST表单数据</li><li id="4d45" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">为目标文件夹声明一个变量。</li><li id="3d1c" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">如果文件被发送到页面，将文件对象存储到一个临时“file”变量中。</li><li id="646a" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv lr kc kd ke dt translated">根据uploads dir+上传文件的名称将上传的文件移动到目标位置。</li></ol><h1 id="45cf" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">运行服务器</h1><p id="6fb0" class="pw-post-body-paragraph iy iz hu ja b jb lj jd je jf lk jh ji jj ll jl jm jn lm jp jq jr ln jt ju jv hn dt translated">在当前项目的目录下打开终端并执行:</p><pre class="lx ly lz ma fq md lv me mf aw mg dt"><span id="2cfd" class="mh km hu lv b fv mi mj l mk ml">$ go run main.go<br/>Now listening on: http://localhost:8080<br/>Application started. Press CTRL+C to shut down.</span></pre><p id="82ef" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在进入浏览器，导航到<a class="ae kf" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>，你应该能看到如下页面:</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="fe ff mm"><img src="../Images/e4645ad74335669e9d3051114008ce2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XhPoNeAAHvxMyWTRIO_2Rg.png"/></div></div></figure><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="fe ff mm"><img src="../Images/8fa4db0053c48c2757cc9ebcb62e0979.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QquVRfOw3CMqlq20mGcZ_Q.png"/></div></div></figure><p id="c0ca" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">通过<a class="ae kf" rel="noopener" href="/@kataras/how-to-display-existing-files-on-server-using-dropzonejs-and-go-53e24b57ba19">点击此处</a>前进到第2部分。</p></div><div class="ab cl mr ms hc mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="hn ho hp hq hr"><p id="611c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我想亲自感谢<a class="ae kf" href="https://dev.to/@kataras" rel="noopener ugc nofollow" target="_blank">开发团队在他们的twitter账户上分享我的新文章！</a></p><figure class="lx ly lz ma fq iv"><div class="bz el l di"><div class="my mc l"/></div></figure></div><div class="ab cl mr ms hc mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="hn ho hp hq hr"><p id="b876" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我喜欢不止一次点击按钮时的视觉效果，你呢？很简单:只要点击拍手按钮。如果感觉强烈，再点一下<strong class="ja hv">(或者直接按住</strong> <strong class="ja hv">)。</strong></p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div class="fe ff mz"><img src="../Images/e7bd15bcb40212893d2e7daf3f20813b.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/1*A6fw1R0_Eb7rbfP7sJckmQ.gif"/></div></figure></div></div>    
</body>
</html>