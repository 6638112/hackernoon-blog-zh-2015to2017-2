<html>
<head>
<title>Microservices: shell commands with added flavor</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微服务:更有味道的shell命令</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/microservices-shell-commands-with-added-flavor-b3c0bcfe12fb?source=collection_archive---------18-----------------------#2017-08-23">https://medium.com/hackernoon/microservices-shell-commands-with-added-flavor-b3c0bcfe12fb?source=collection_archive---------18-----------------------#2017-08-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="c71f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">现在在闪亮的新包装中有了更多的网络。</em></p><p id="dee8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Shell命令很神奇。对于不经常使用某种形式的shell交互的人来说，通过shell观看某人工作是一种神奇的计算机语言。你可能会想到一部流行电影中的<a class="ae jq" href="https://www.youtube.com/watch?v=dFUlAQZB9Ng" rel="noopener ugc nofollow" target="_blank">场景，经典的黑客刻板印象坐在那里，</a><a class="ae jq" href="https://hackernoon.com/tagged/typing" rel="noopener ugc nofollow" target="_blank">用看起来像外星语言的东西敲着</a>。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff jr"><img src="../Images/820ae1407251f1f5dfe01120ec83e630.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4VhhGZ4WypLwGipy."/></div></div></figure><p id="2d12" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然而，我在shell中花了相当多的时间，我知道它不是一种外星语言。然而，shell命令仍然很神奇，只是出于不同的原因。</p><p id="f064" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我看过其中一些的代码。我敢肯定，成千上万个小时已经花在编码和测试每一个命令上了。我知道有些被放入我正在使用的shell中，而其他许多是存储在我的路径中某处的独立实用程序。它们为什么有魔力？</p><p id="8d3d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">是因为他们把“把一件事做得非常非常好”这个概念发挥到了极致。比起怀疑<em class="jp"> ls </em>或<em class="jp"> tr </em>或<em class="jp"> grep </em>的正确运行，我更有可能怀疑自己的技能。</p><p id="60e4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">那么这和<a class="ae jq" href="https://hackernoon.com/tagged/microservices" rel="noopener ugc nofollow" target="_blank">微服务</a>有什么关系呢？我认为彼得·西巴赫的《编写Linux实用程序的艺术》中的这句话很好地总结了这一点:</p><blockquote class="kd"><p id="375d" class="ke kf hu bd kg kh ki kj kk kl km jo ek translated">一个好的公用事业公司是尽可能把工作做好的公司。它得和别人玩得好；它必须能够与其他实用程序相结合。一个不与其他程序结合的程序不是一个实用程序；这是一个应用程序。</p></blockquote><p id="3396" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">事实证明，微服务在很多方面都是可以远距离访问的shell命令。有时候是基本的IPC。在许多情况下，它是通过网络。</p><p id="2487" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">丹尼尔·p·德恩在《Linux.com》上发表的文章对此有一个很好的解释:“微服务是‘小型特定任务组件’(例如子程序、Unix命令)和‘大块巨石’之间的宇宙方法钟摆的最新例子之一。”"</p><p id="4cde" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">那么这一切意味着什么呢？有几个重要的想法适用于微服务和shell命令。我们来看几个。</p><h1 id="510b" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">做好一件事</h1><p id="077f" class="pw-post-body-paragraph ir is hu it b iu lr iw ix iy ls ja jb jc lt je jf jg lu ji jj jk lv jm jn jo hn dt translated">这是微服务和shell命令的核心。当然，这并不意味着它必须局限于一个用例。无论您希望通过网络还是通过命令行被调用，您都希望在您的程序中构建一定的灵活性和覆盖范围。</p><p id="1e79" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您是否正在尝试查询系统数据、解析关键行、格式化数据并将其保存到文件中？太棒了，结合了<a class="ae jq" href="https://gitlab.com/procps-ng/procps" rel="noopener ugc nofollow" target="_blank"> procps工具</a>，grep，和sed。您是否有一个正在尝试构建的复杂应用程序？好，写多个微服务。</p><p id="0f4c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这里的想法是<em class="jp">组装</em>你的解决方案，而不是把它建成一个整体。</p><h1 id="99ef" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">持久性</h1><p id="22b2" class="pw-post-body-paragraph ir is hu it b iu lr iw ix iy ls ja jb jc lt je jf jg lu ji jj jk lv jm jn jo hn dt translated">这就是事情变得有点棘手的地方。Shell命令不会像微服务一样失败。然而，这里的核心概念是耐用性。</p><p id="eac7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于shell命令，该软件旨在处理边缘情况、畸形数据、资源问题等。同时，以预期的方式报告。即使在故障模式下，也可以依赖退出代码和错误消息。</p><p id="51b3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于微服务，类似的假设也适用。应该预测故障模式，虽然这可能意味着一个节点将关闭，但这也是可以预测和设计的。</p><p id="ef63" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">耐用不代表完美。它意味着能够承受你扔给它的任何东西。</p><h1 id="2530" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">使用计划</h1><p id="7f15" class="pw-post-body-paragraph ir is hu it b iu lr iw ix iy ls ja jb jc lt je jf jg lu ji jj jk lv jm jn jo hn dt translated">有无数种方法可以组合shell命令。shell脚本的整个基础依赖于以新颖的方式混合和匹配命令的能力。</p><p id="fa59" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这也适用于微服务:构建一个持久的、可预测的、足够通用的微服务，并期待大量的使用。</p><p id="98b0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">那么这对shell命令或者微服务的开发者意味着什么呢？有些事情你需要记住:</p><ul class=""><li id="df2a" class="lw lx hu it b iu iv iy iz jc ly jg lz jk ma jo mb mc md me dt translated">以性能为目标:没有人想依赖一个缓慢的组件</li><li id="7266" class="lw lx hu it b iu mf iy mg jc mh jg mi jk mj jo mb mc md me dt translated">期望被用作更大整体的一部分:使用标准数据格式、简单标志/选项等。</li><li id="3a8c" class="lw lx hu it b iu mf iy mg jc mh jg mi jk mj jo mb mc md me dt translated">透明:无论是传递数据还是返回响应，都要让人们容易理解发生了什么</li></ul><p id="9688" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这些只是开始。你需要从一个寻找解决特定问题的工具的人的角度来思考。你的shell命令或者微服务管用吗？他们<strong class="it hv">T5会想要T7】用吗？</strong></p><h1 id="9929" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">从这里去哪里？</h1><p id="cf30" class="pw-post-body-paragraph ir is hu it b iu lr iw ix iy ls ja jb jc lt je jf jg lu ji jj jk lv jm jn jo hn dt translated">围绕微服务有很多讨论，但这些讨论忽略了一个想法，即<em class="jp">我们在</em>之前就已经经历过了。高质量shell命令的普遍存在可以作为构建高质量微服务的指南，因为许多相同的原则也适用。</p><p id="6cbc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Shell命令是工程师工作流程的重要组成部分。难道我们不应该期望微服务也一样耐用、可用，并且随时可以组装吗？</p><p id="7bb2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下次你在一个团队谈论微服务的时候，只要记住:<em class="jp">这是一个UNIX系统！你知道这个！</em></p></div><div class="ab cl mk ml hc mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hn ho hp hq hr"><p id="6b02" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">如果你有兴趣接触，我在</em> <a class="ae jq" href="https://goo.gl/2tySiH" rel="noopener ugc nofollow" target="_blank"> <em class="jp"> LinkedIn </em> </a> <em class="jp">，</em><a class="ae jq" href="https://goo.gl/xAvf1h" rel="noopener ugc nofollow" target="_blank"><em class="jp">Twitter</em></a><em class="jp">，Medium和许多其他平台上。</em></p><figure class="js jt ju jv fq jw"><div class="bz el l di"><div class="mr ms l"/></div></figure></div></div>    
</body>
</html>