<html>
<head>
<title>Top 5 lessons learned from trying to build my own Serverless website</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">尝试建立我自己的无服务器网站的五大经验教训</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/top-5-lessons-learned-from-trying-to-build-my-own-serverless-website-d65a168c5e6d?source=collection_archive---------1-----------------------#2016-09-09">https://medium.com/hackernoon/top-5-lessons-learned-from-trying-to-build-my-own-serverless-website-d65a168c5e6d?source=collection_archive---------1-----------------------#2016-09-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="2f8a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一个多月前，我开始做一个梦——也就是自我强加的错觉；)</p><h2 id="5fa9" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">在AWS上构建一个移动响应的无服务器web应用程序，它与社交媒体集成，在事件发生时实时显示事件——为什么不在我在的时候加入React呢？</h2><p id="3c3d" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">(<a class="ae kp" href="https://read.acloud.guru/serverless-the-future-of-software-architecture-d4473ffed864#.p7zuwnphe" rel="noopener ugc nofollow" target="_blank">如果你对“无服务器”是什么意思感到好奇，看看这篇便利的时髦文章</a></p><p id="14fa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">是的，我已经开发了其他应用程序，所以我“理智地意识到”我正在开发一个通常需要三个人花三个月时间才能完成的东西——至少——这对我自己和我的《犯罪》搭档T2·普拉斯来说是个不小的任务。但早在6月份，我所在的团队赢得了曼哈顿Angelhack黑客马拉松的大奖。我们被邀请加入黑客计划。看到你的梦想成真，成为百万富翁，他们说！</p><p id="902a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">(添加挥手动作)</p><p id="e780" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">(Angelhack没有这么说，也没有发表任何过于乐观的废话，但如果我假装他们说了，我的故事会更好。)</p><h1 id="572a" class="ks jq hu bd jr kt ku kv jv kw kx ky jz kz la lb kc lc ld le kf lf lg lh ki li dt translated">这些是我打算使用的技术</h1><ul class=""><li id="61af" class="lj lk hu it b iu kk iy kl jc ll jg lm jk ln jo lo lp lq lr dt translated">AWS Cognito用于身份授权和认证</li><li id="3a00" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">针对静态内容托管的AWS S3、CloudFront和Route 53</li><li id="37a2" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">AWS API Gateway，Lambda，DynamoDB，ElasticSearch，用于支持我的CQRS和REST风格的数据架构</li><li id="412f" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">然后自举，反应什么的放到前面。我不是前端开发者。我是一名建筑师。我是来让事情变得复杂的。(“别担心，我是工程师，我可以把这个过程搞复杂。”)和实时消息传递将通过MQTT和/或WebSockets实现。</li></ul><h1 id="00d4" class="ks jq hu bd jr kt ku kv jv kw kx ky jz kz la lb kc lc ld le kf lf lg lh ki li dt translated">我现在在哪里？</h1><p id="320e" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">我已经完成了第二和第三项，第一项也快完成了。我还在研究的最后一个。看看这里。【https://gogobanana.net/ T4】</p><h1 id="1095" class="ks jq hu bd jr kt ku kv jv kw kx ky jz kz la lb kc lc ld le kf lf lg lh ki li dt translated">迄今为止在无服务器方面学到的最重要的经验？</h1><h2 id="d9bf" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">AWS路线53</h2><p id="33f3" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">如果你注册了一些你不关心的域名，比如在一次黑客马拉松中，你在凌晨2点决定你的产品应该叫做jumping spider . info——不是说我——但是后来你意识到你喝了太多的怪物能量饮料。你在内心深处认为拥有一个域名不需要任何成本，对吗？</p><p id="9d0f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是一个警告。默认情况下，当您在Amazon Route 53上购买域名时，Amazon Route 53会为您创建一个DNS托管区域。这就是为你的域名提供快速免费SSL证书的原因。但是DNS的管理费用大概是每月50美分。我已经注册了9个域名，上个月我在DNS托管区域使用了大约5.30美元的信用，这些区域基本上只有两个默认记录。(我通过删除我不使用的托管区域修复了这个问题)</p><h2 id="149e" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">AWS Cognito</h2><p id="0b12" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">这不是一个容易设置的现成服务。我找到的最简单的助手指南是开发者百页SDK文档和<a class="ae kp" href="https://github.com/awslabs/aws-lambda-zombie-workshop" rel="noopener ugc nofollow" target="_blank">僵尸实验室。</a>(不，真的，这是一个很棒的实验室，涵盖了许多其他无服务器主题，看看吧。)</p><h2 id="a2e6" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">API网关、Lambda和DynamoDb</h2><p id="d49d" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">我的目标是从EventBrite中提取大约1000条记录，并将它们存储在我的DynamoDb中，然后这些记录将流向ElasticSearch。(这个DynamoDb streams特性非常棒，Python模板很容易在ElasticSearch上根据您自己的类型和索引方案进行调整)</p><p id="c38d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然而，这是我对Lambda和DynamoDb的主要挑战。将我的Lambda放在128mb的RAM中，将DynamoDb放在较低的写容量中，会很快削弱我的进程，导致超时。我首先尝试将node npm包async合并到我的进程中，以便一次只放一个PUT。</p><p id="70bb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然而，即使这样仍然会导致超过3秒的超时。我还尝试提高Lambda的超时时间。最后，我不得不一次强制一个PUT操作，在我的Lambda上将RAM设置为512mb，超时60秒，在DynamoDb上将写容量设置为25。我现在最大的问题是DynamoDb不再是持久保存我的JSON文档数据的廉价而简单的方法。请注意，还是很便宜，大概每月25美元或更少。但是，当其他人开始使用我的数据库时，我开始焦虑地猜测我将来可能需要扩展多少。</p><p id="c23a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">DynamoDb也有一个写批处理项特性，允许一次插入多达25个文档。(不超过25)</p><p id="8f83" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae kp" rel="noopener" href="/@CodingJoe/dealing-with-dynamodb-write-capacity-limits-and-lambda-timeouts-f4e08d9f4b4f#.kog03oe4c">更新:在这里发布了一个解决方案博客条目</a></p><h2 id="7e91" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">弹性搜索</h2><p id="77fc" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">这并不奇怪，但是ElasticSearch在我的集群上为两个t2.small节点每月花费了我大约26美元。我可能会将它降低到仅一个节点的不安全水平，但是我不愿意在开始对它应用任何有用的东西之前破坏我的数据。它的速度也快得惊人。我在查询中使用了geohash过滤器，并使用高斯函数对邻近度和最近度进行了自定义函数评分。</p><h2 id="109d" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">谷歌地图API V3</h2><p id="c274" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">这可能是也可能不是谷歌地图的问题，但我想我会把它标记出来以防万一。我刚从英国度假回来。(我知道，在为期13周的黑客活动中预订假期是个好主意。但我在4月份买了机票，并在6月份赢得了黑客马拉松，我不相信我能像超人一样环游世界并让时光倒流。只要你相信，你可以做任何事！)</p><p id="52c7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当我在英国的时候，我只能在伦敦的几个小时里使用我的应用程序。我不知道发生了什么。大部分时间地图都画不出来。我想可能是反应或其他原因造成的，但在去除这些问题仍然发生。当然，我必须说服我的妻子让我飞回英国，只是为了再次测试这个错误，但我想我在英国无法让谷歌地图加载到我的手机上，因为某种地区性的超时。(不过在英国的时候，它在我的笔记本电脑上运行得很好。)</p><h2 id="2627" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">试试我的网站</h2><p id="132e" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">不过，使用这款应用还是很棒的。这对于旅游来说非常方便。我们从乘坐伦敦地铁(又名地铁)到伦敦桥站开始。然后我们打算步行去伦敦塔。</p><p id="dd1a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在路上使用我的应用程序时，我发现了“纪念碑”——献给在1666年大火中丧生的人(如果我能正确阅读我的罗马数字的话)。)他们正在分发贴有贴纸的儿童练习册，这对我的孩子来说是一个巨大的胜利。否则，我不会在纪念碑旁边停下来，而是在去伦敦塔的路上一直呆在河边。</p><figure class="ly lz ma mb fq mc fe ff paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="fe ff lx"><img src="../Images/3ecd09448dbf693d4e7175f711487120.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9l1tJDKqwu7QWKYmcSezgA.jpeg"/></div></div><figcaption class="mj mk fg fe ff ml mm bd b be z ek">The Monument, erected in 1677 in memory of the Great Fire of London</figcaption></figure><p id="bb0f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">看看我正在进行的无服务器工作，<a class="ae kp" href="https://gogobanana.net" rel="noopener ugc nofollow" target="_blank">https://gogobanana.net</a></p><p id="17e0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae kp" href="https://docs.google.com/forms/d/e/1FAIpQLSeA4hqUzAByNpd-yGvkiLmLlm_RPj1W9owU3h4ZyFPBT17hUg/viewform" rel="noopener ugc nofollow" target="_blank">请花些时间填写这份调查，并与我分享您的反馈。我本来应该做的事情，而不是去度假。)</a></p><h1 id="2fbe" class="ks jq hu bd jr kt ku kv jv kw kx ky jz kz la lb kc lc ld le kf lf lg lh ki li dt translated">如果你觉得这篇文章有用，请关注我的Medium和heart这个故事。非常感谢！:)</h1><p id="4e69" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">我还会在我的https://twitter.com/@CodingJoe推特<a class="ae kp" href="https://twitter.com/@CodingJoe" rel="noopener ugc nofollow" target="_blank">和https://instagram.com/codingjoe的Instagram】上发布我遇到的问题和解决方案</a></p><div class="ly lz ma mb fq ab cb"><figure class="mn mc mo mp mq mr ms paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mn mc mo mp mq mr ms paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mn mc mo mp mq mr ms paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mt mu mv"><p id="f922" class="ir is mw it b iu iv iw ix iy iz ja jb mx jd je jf my jh ji jj mz jl jm jn jo hn dt translated"><a class="ae kp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae kp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is mw it b iu iv iw ix iy iz ja jb mx jd je jf my jh ji jj mz jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ly lz ma mb fq mc fe ff paragraph-image"><a href="https://goo.gl/Ahtev1"><div class="fe ff na"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></a></figure></div></div>    
</body>
</html>