<html>
<head>
<title>Backup &amp; recovery of infrastructure services</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基础架构服务的备份和恢复</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/backup-recovery-of-infrastructure-services-200b2116930f?source=collection_archive---------3-----------------------#2016-12-31">https://medium.com/hackernoon/backup-recovery-of-infrastructure-services-200b2116930f?source=collection_archive---------3-----------------------#2016-12-31</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/117bf47b44b2354b4f80aedc3b22925f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_gVYW3x-MK7Bjt8s4GaJUw.png"/></div></div></figure><div class=""/><p id="a2d8" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">基础设施应该很无聊吧？这并不意味着<a class="ae ka" href="https://hackernoon.com/tagged/developing" rel="noopener ugc nofollow" target="_blank">为上述基础设施开发</a>工具不能令人兴奋。在一个领域，我相信还有改进的空间:<em class="kb">备份(和恢复)关键的基础设施服务</em>。</p><p id="3f5d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了提供一些背景:我说的是云原生基础设施，即通常管理某种容器的分布式系统。所有这些分布式系统的共同点是，我们使用一些分布式基础设施组件来存储对其操作至关重要的状态:配置、关于领导者或员工的元数据等等:</p><ul class=""><li id="f6f2" class="kc kd if je b jf jg jj jk jn ke jr kf jv kg jz kh ki kj kk dt translated">DC/OS使用由参展商监管的<a class="ae ka" href="https://dcos.io/docs/1.8/administration/faq/#q-does-dc-os-install-zookeeper-or-can-i-use-my-own-zookeeper-quorum-" rel="noopener ugc nofollow" target="_blank"> ZooKeeper，用于其分布式内核(Apache Mesos)及其服务(Marathon、Jobs、Spark、Kafka、Cassandra等等)。</a></li><li id="6a90" class="kc kd if je b jf kl jj km jn kn jr ko jv kp jz kh ki kj kk dt translated">Docker SwarmKit使用内部基于Raft的<a class="ae ka" href="https://github.com/docker/swarmkit/tree/master/manager/state" rel="noopener ugc nofollow" target="_blank">状态存储</a>。</li><li id="036e" class="kc kd if je b jf kl jj km jn kn jr ko jv kp jz kh ki kj kk dt translated">Kubernetes使用<a class="ae ka" href="http://kubernetes.io/docs/admin/etcd/" rel="noopener ugc nofollow" target="_blank"> etcd </a>来持久存储它所有的REST API对象。</li><li id="85f1" class="kc kd if je b jf kl jj km jn kn jr ko jv kp jz kh ki kj kk dt translated">Nomad使用内部基于Raft的<a class="ae ka" href="https://www.nomadproject.io/docs/internals/consensus.html" rel="noopener ugc nofollow" target="_blank">共识</a>协议(以及管理集群成员的gossip协议)。</li></ul><p id="e66d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在任何情况下，您可能会发现自己有时会想要获取infra服务内容的快照，无论是为了调试它还是为了保存健康状态的备份。这就是我开始研究一个工具的动机，我称之为<em class="kb"> burry </em>，意为<em class="kb">B</em>ack<em class="kb">U</em>p&amp;Recove<em class="kb">RY</em>tool:</p><blockquote class="kq kr ks"><p id="deba" class="jc jd kb je b jf jg jh ji jj jk jl jm kt jo jp jq ku js jt ju kv jw jx jy jz hn dt translated"><a class="ae ka" href="http://burry.sh/" rel="noopener ugc nofollow" target="_blank"> http://burry.sh </a></p></blockquote><p id="aced" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">简而言之，<em class="kb"> burry </em>允许您在编写时对<a class="ae ka" href="https://hackernoon.com/tagged/zookeeper" rel="noopener ugc nofollow" target="_blank"> ZooKeepe </a> r &amp; etcd的内容进行快照，然后您可以:</p><ul class=""><li id="e379" class="kc kd if je b jf jg jj jk jn ke jr kf jv kg jz kh ki kj kk dt translated">转储到屏幕上，例如:<code class="eh kw kx ky kz b">burry --endpoint localhost:2181</code></li><li id="f822" class="kc kd if je b jf kl jj km jn kn jr ko jv kp jz kh ki kj kk dt translated">将其存储到本地文件系统，例如:<code class="eh kw kx ky kz b">burry --endpoint etcd.mesos:1026 --isvc etcd --target local</code></li><li id="c332" class="kc kd if je b jf kl jj km jn kn jr ko jv kp jz kh ki kj kk dt translated">将其存储在远程存储系统中，例如:</li></ul><pre class="la lb lc ld fq le kz lf lg aw lh dt"><span id="fb7d" class="li lj if kz b fv lk ll l lm ln">burry --endpoint <!-- -->leader.mesos:2181<!-- --> <!-- -->--target s3<!-- --> --credentials play.minio.io:9000,AWS_ACCESS_KEY_ID=Q3AM3UQ867SPQQA43P2F,AWS_SECRET_ACCESS_KEY=zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG</span></pre><p id="7ba0" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="kb">注:目前可以使用亚马逊S3和</em> <a class="ae ka" href="https://www.minio.io/" rel="noopener ugc nofollow" target="_blank"> <em class="kb"> Minio </em> </a> <em class="kb">作为远程存储系统。</em></p></div><div class="ab cl lo lp hc lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="hn ho hp hq hr"><p id="808b" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我目前正致力于Azure和Google存储支持以及恢复状态(这是恢复部分；).</p><p id="a331" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来你想看什么？请让我知道，要么在这里，要么在GitHub 上提出<a class="ae ka" href="https://github.com/mhausenblas/burry.sh/issues" rel="noopener ugc nofollow" target="_blank">问题。</a></p><div class="la lb lc ld fq ab cb"><figure class="lv hw lw lx ly lz ma paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="lv hw lw lx ly lz ma paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="lv hw lw lx ly lz ma paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="kq kr ks"><p id="f922" class="jc jd kb je b jf jg jh ji jj jk jl jm kt jo jp jq ku js jt ju kv jw jx jy jz hn dt translated"><a class="ae ka" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是阿妹家庭的一员。我们现在<a class="ae ka" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ka" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jc jd kb je b jf jg jh ji jj jk jl jm kt jo jp jq ku js jt ju kv jw jx jy jz hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ka" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ka" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="la lb lc ld fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mb"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="la lb lc ld fq hw"><div class="bz el l di"><div class="mc md l"/></div></figure></div></div>    
</body>
</html>