<html>
<head>
<title>JS WTF 🦄 with Number</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JS WTF🦄带编号</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/js-wtf-with-number-5cd73514befb?source=collection_archive---------15-----------------------#2017-10-29">https://medium.com/hackernoon/js-wtf-with-number-5cd73514befb?source=collection_archive---------15-----------------------#2017-10-29</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="6c60" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">是时候乘坐一些编号为的JavaScript WTF了。</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/55409634b9fc3eccb3a01bca164d5725.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fenkx5eBOlRX6bsjuUf21Q.png"/></div></div></figure><h1 id="9069" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt">‘0.0’</h1><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kn ko l"/></div></figure><p id="ab01" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">当将<code class="eh ll lm ln lo b">String</code>转换为<code class="eh ll lm ln lo b">Number</code>时，JS能够<strong class="kr hv">将数值之前或之后的</strong> <code class="eh ll lm ln lo b"><strong class="kr hv">period</strong></code> <strong class="kr hv">解释为十进制数</strong>的周期。这就是为什么get <code class="eh ll lm ln lo b">0</code>作为前两个表达式的结果。</p><p id="349a" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated"><code class="eh ll lm ln lo b">'0.'</code>和<code class="eh ll lm ln lo b">'.0'</code>都代表小数<code class="eh ll lm ln lo b">0.0</code>。</p><p id="061e" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">这里是<a class="ae lp" href="https://www.ecma-international.org/ecma-262/6.0/index.html#sec-tonumber-applied-to-the-string-type" rel="noopener ugc nofollow" target="_blank">规格</a>:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff lq"><img src="../Images/9e82b7127965e4e3f2d27553e9ed9cd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dzDOgUH9-_GiHO7thV4J2A.png"/></div></div></figure><blockquote class="lr"><p id="2fe2" class="ls lt hu bd lu lv lw lx ly lz ma lk ek translated">我知道。我知道。细节太多！</p></blockquote><p id="e4a0" class="pw-post-body-paragraph kp kq hu kr b ks mc iv ku kv md iy kx ky me la lb lc mf le lf lg mg li lj lk hn dt translated">但是，“我<em class="mh"> f语法</em> <strong class="kr hv"> <em class="mh">无法将字符串解释为StringNumericLiteral</em></strong><em class="mh">的展开，那么</em><a class="ae lp" href="https://www.ecma-international.org/ecma-262/6.0/index.html#sec-tonumber" rel="noopener ugc nofollow" target="_blank"><em class="mh">to number</em></a><em class="mh">的结果就是</em><strong class="kr hv"><em class="mh">NaN</em></strong><em class="mh">。</em>，它解释了<code class="eh ll lm ln lo b">Number('.')</code>的结果。</p><p id="da9f" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">即表达式<code class="eh ll lm ln lo b">'.'</code>与上面红框中高亮显示的<strong class="kr hv">字符串文字</strong>不匹配。</p></div><div class="ab cl mi mj hc mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="hn ho hp hq hr"><h1 id="2786" class="jv jw hu bd jx jy mp ka kb kc mq ke kf ja mr jb kh jd ms je kj jg mt jh kl km dt translated">{}对[]</h1><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kn ko l"/></div></figure><p id="015a" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">当<code class="eh ll lm ln lo b">Number</code>应用于<strong class="kr hv">对象</strong>时，JavaScript试图将其转换为<strong class="kr hv">原始值</strong>。</p><p id="459e" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">根据<a class="ae lp" href="https://www.ecma-international.org/ecma-262/6.0/index.html#sec-toprimitive" rel="noopener ugc nofollow" target="_blank">规范</a>，它首先执行<code class="eh ll lm ln lo b">.valueOf()</code>。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kn ko l"/></div></figure><p id="48c1" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">因为<code class="eh ll lm ln lo b">{}</code>和<code class="eh ll lm ln lo b">[]</code>的<code class="eh ll lm ln lo b">.valueOf()</code>也返回一个对象，所以JS尝试<code class="eh ll lm ln lo b">.toString()</code>。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kn ko l"/></div></figure><blockquote class="lr"><p id="c911" class="ls lt hu bd lu lv lw lx ly lz ma lk ek translated"><strong class="ak">这个WTF的原因在于</strong> <code class="eh ll lm ln lo b">.toString()</code>的结果。</p></blockquote><p id="2e32" class="pw-post-body-paragraph kp kq hu kr b ks mc iv ku kv md iy kx ky me la lb lc mf le lf lg mg li lj lk hn dt translated">操作<code class="eh ll lm ln lo b">({}).toString()</code>实际运行<code class="eh ll lm ln lo b">Object.prototype.toString() </code>，根据定义<a class="ae lp" href="https://www.ecma-international.org/ecma-262/6.0/index.html#sec-object.prototype.tostring" rel="noopener ugc nofollow" target="_blank">为<code class="eh ll lm ln lo b">"[object Object]"</code>。然而，正如我们之前看到的，当字符串不能被解释为数值<em class="mh">时，将字符串转换为数字会返回<code class="eh ll lm ln lo b">NaN</code>。</em>这解释出了第一个结果<code class="eh ll lm ln lo b">Number({}) // NaN</code>。</a></p><p id="7fb7" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">至于<code class="eh ll lm ln lo b">[].toString()</code>，它执行<code class="eh ll lm ln lo b">Array.prototype.toString()</code>并输出<code class="eh ll lm ln lo b">""</code>。<a class="ae lp" href="https://www.ecma-international.org/ecma-262/6.0/index.html#sec-tonumber-applied-to-the-string-type" rel="noopener ugc nofollow" target="_blank">顾名思义</a>，<code class="eh ll lm ln lo b">Number("")</code>就是<code class="eh ll lm ln lo b">0</code>。</p><p id="f794" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">因此<code class="eh ll lm ln lo b">Number([])</code>就是<code class="eh ll lm ln lo b">0</code>。</p><p id="17f5" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated"><em class="mh">好！让我们休息一下，看看这只小猫👀</em></p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mu"><img src="../Images/19ebd0fb97aa7329406c59a12dd6a55f.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/1*RQlAdzsGA9V0fL1XodvKuQ.gif"/></div></figure></div><div class="ab cl mi mj hc mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="hn ho hp hq hr"><h1 id="8795" class="jv jw hu bd jx jy mp ka kb kc mq ke kf ja mr jb kh jd ms je kj jg mt jh kl km dt translated">未定义vs空</h1><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kn ko l"/></div></figure><p id="9ef6" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">根据<a class="ae lp" href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-toboolean" rel="noopener ugc nofollow" target="_blank">到</a>的意思，<code class="eh ll lm ln lo b">null</code>和<code class="eh ll lm ln lo b">undefined</code>都表示缺少某物，意为<code class="eh ll lm ln lo b">false</code>。</p><p id="c74e" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">然而，我们可以把<code class="eh ll lm ln lo b">undefined</code>看作更一般的“缺席”这是因为当没有其他值被赋值时，它被用来表示变量值。</p><blockquote class="lr"><p id="d442" class="ls lt hu bd lu lv mv mw mx my mz lk ek translated"><strong class="ak">未定义</strong>，<strong class="ak">已经声明了一个变量，但是没有给它赋值。</strong></p></blockquote><p id="ec9f" class="pw-post-body-paragraph kp kq hu kr b ks mc iv ku kv md iy kx ky me la lb lc mf le lf lg mg li lj lk hn dt translated">另一方面，<code class="eh ll lm ln lo b">null</code>是一个<strong class="kr hv">分配值</strong>。它可以作为“无值”的表示赋给变量。</p><blockquote class="lr"><p id="eafb" class="ls lt hu bd lu lv mv mw mx my mz lk ek translated">null，变量已声明，但其值为空。</p></blockquote><p id="ec6c" class="pw-post-body-paragraph kp kq hu kr b ks mc iv ku kv md iy kx ky me la lb lc mf le lf lg mg li lj lk hn dt translated">而且，他们有不同的<code class="eh ll lm ln lo b">typeof</code>。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kn ko l"/></div></figure><p id="550d" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">因此我来到<strong class="kr hv">相信</strong>这就是为什么在执行<code class="eh ll lm ln lo b">Number(undefined)</code>时<code class="eh ll lm ln lo b">undefined</code>被转换为<code class="eh ll lm ln lo b">NaN</code>，意味着<strong class="kr hv">没有赋值</strong>。</p><p id="4d80" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">以及<code class="eh ll lm ln lo b">null</code>到值<code class="eh ll lm ln lo b">0</code>，意味着<strong class="kr hv">是值</strong>的<em class="mh">假值</em>表示。</p></div><div class="ab cl mi mj hc mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="hn ho hp hq hr"><h1 id="1e3f" class="jv jw hu bd jx jy mp ka kb kc mq ke kf ja mr jb kh jd ms je kj jg mt jh kl km dt translated">最小值</h1><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kn ko l"/></div></figure><p id="c174" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">很容易理解<code class="eh ll lm ln lo b"><a class="ae lp" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_VALUE" rel="noopener ugc nofollow" target="_blank">Number.MAX_VALUE</a></code>比<code class="eh ll lm ln lo b">0</code>大，但是意识到<code class="eh ll lm ln lo b"><a class="ae lp" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MIN_VALUE" rel="noopener ugc nofollow" target="_blank">Number.MIN_VALUE</a></code>不比<code class="eh ll lm ln lo b">0</code>小就很奇怪了。</p><p id="f664" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">那是因为<code class="eh ll lm ln lo b">Number.MIN_VALUE</code> <strong class="kr hv"> </strong>实际上并不是最小可能值<strong class="kr hv">、</strong>而是<strong class="kr hv">最小可能正值</strong>，这是一个<strong class="kr hv">非常非常小的值</strong> ( <code class="eh ll lm ln lo b">5e-324</code>具体来说)，然而大于<code class="eh ll lm ln lo b">0</code>。</p><blockquote class="lr"><p id="5404" class="ls lt hu bd lu lv mv mw mx my mz lk ek translated">为了表示可能的最小值，我们可以安全地使用<code class="eh ll lm ln lo b"><a class="ae lp" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MIN_SAFE_INTEGER" rel="noopener ugc nofollow" target="_blank">Number.MIN_SAFE_INTEGER</a></code>，即<code class="eh ll lm ln lo b">-(2^53–1)</code></p></blockquote></div><div class="ab cl mi mj hc mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="hn ho hp hq hr"><h1 id="60b5" class="jv jw hu bd jx jy mp ka kb kc mq ke kf ja mr jb kh jd ms je kj jg mt jh kl km dt translated">toFixed()</h1><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kn ko l"/></div></figure><p id="4fd3" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">在数值上有一个<code class="eh ll lm ln lo b">period</code>就是说它有一个<strong class="kr hv">小数部分。</strong>然而，这使得<strong class="kr hv">静态方法</strong>的使用不一致。</p><p id="41b3" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">对于表达式<code class="eh ll lm ln lo b">42.toFixed(2)</code>，因为数值<code class="eh ll lm ln lo b">42.</code>是一个有效的数字，JS继续解释完整的表达式。然而，它发现<code class="eh ll lm ln lo b">toFixed(2)</code>，它的<strong class="kr hv">没有有意义的值</strong>(与表示静态方法执行的表达式<code class="eh ll lm ln lo b">.toFixed(2)</code>相反)。)并抛出语法错误。</p><p id="674b" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">甚至<code class="eh ll lm ln lo b">42.</code>和<code class="eh ll lm ln lo b">toFixed(2)</code>之间的间隔也不能解决问题。</p><p id="8177" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated">然而，<code class="eh ll lm ln lo b">42</code>和<code class="eh ll lm ln lo b">.toFixed(2)</code>之间的间隔解决了问题。甚至是双周期<code class="eh ll lm ln lo b">42..toFixed(2)</code>😮</p><blockquote class="lr"><p id="c1f5" class="ls lt hu bd lu lv mv mw mx my mz lk ek translated">42.toFixed(2)！== 42..toFixed(2)</p></blockquote><p id="7337" class="pw-post-body-paragraph kp kq hu kr b ks mc iv ku kv md iy kx ky me la lb lc mf le lf lg mg li lj lk hn dt translated">尽管如此，这就是JS对代码的解释。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff na"><img src="../Images/04c1f78b9d8c769778cf26ff524acdd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*gSz8xcZE2UPd70CPYtoUZg.gif"/></div></figure><h1 id="1061" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">&lt; your WTF &gt;</h1><p id="e021" class="pw-post-body-paragraph kp kq hu kr b ks nb iv ku kv nc iy kx ky nd la lb lc ne le lf lg nf li lj lk hn dt translated">如果你发现任何应该在这里的WTF，请告诉我👐</p><blockquote class="lr"><p id="5e48" class="ls lt hu bd lu lv mv mw mx my mz lk ek translated">数字到此为止。</p></blockquote><h1 id="5a97" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja ng jb kh jd nh je kj jg ni jh kl km dt translated">由于🍻</h1><ul class=""><li id="c881" class="nj nk hu kr b ks nb kv nc ky nl lc nm lg nn lk no np nq nr dt translated"><a class="ae lp" href="https://developer.mozilla.org/en-US/docs/Web" rel="noopener ugc nofollow" target="_blank"> MDN文档</a></li><li id="3952" class="nj nk hu kr b ks ns kv nt ky nu lc nv lg nw lk no np nq nr dt translated"><a class="ae lp" href="https://twitter.com/getify" rel="noopener ugc nofollow" target="_blank">凯尔·辛普森</a>为他的<a class="ae lp" href="https://www.youtube.com/watch?v=2pL28CcEijU" rel="noopener ugc nofollow" target="_blank">视频</a>和<a class="ae lp" href="https://www.safaribooksonline.com/library/view/you-dont-know/9781491905159/" rel="noopener ugc nofollow" target="_blank">书</a></li><li id="63db" class="nj nk hu kr b ks ns kv nt ky nu lc nv lg nw lk no np nq nr dt translated">世界上所有的小猫</li><li id="5deb" class="nj nk hu kr b ks ns kv nt ky nu lc nv lg nw lk no np nq nr dt translated"><a class="ae lp" href="https://twitter.com/hackernoon" rel="noopener ugc nofollow" target="_blank">黑客正午</a>为出版❤️</li></ul></div><div class="ab cl mi mj hc mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="hn ho hp hq hr"><p id="b433" class="pw-post-body-paragraph kp kq hu kr b ks kt iv ku kv kw iy kx ky kz la lb lc ld le lf lg lh li lj lk hn dt translated"><em class="mh">一定要看看我在JS WTF上的其他文章</em></p><div class="nx ny fm fo nz oa"><a href="https://hackernoon.com/oh-my-goodnejs-arrays-f9e9e4f03c97" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab ej"><div class="oc ab od cl cj oe"><h2 class="bd hv fv z el of eo ep og er et ht dt translated">JS WTF🦄使用数组</h2><div class="oh l"><h3 class="bd b fv z el of eo ep og er et ek translated">让我们利用一些带有JavaScript数组的WTF。</h3></div><div class="oi l"><p class="bd b gc z el of eo ep og er et ek translated">hackernoon.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo jt oa"/></div></div></a></div></div></div>    
</body>
</html>