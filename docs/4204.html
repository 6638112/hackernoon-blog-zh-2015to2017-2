<html>
<head>
<title>Forever Thankful on FB —Using React to bring the Thankful Reaction back to Facebook 🌸</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">永远在FB上感恩——使用React将感恩的反应带回脸书🌸</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/forever-thankful-on-fb-using-react-to-bring-the-thankful-reaction-back-to-facebook-96e31025c5d1?source=collection_archive---------3-----------------------#2017-05-18">https://medium.com/hackernoon/forever-thankful-on-fb-using-react-to-bring-the-thankful-reaction-back-to-facebook-96e31025c5d1?source=collection_archive---------3-----------------------#2017-05-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/4c52ea37a40d0dec7acf44db1c4e01df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HPr8CyIabzlbJOX7w-Qrvw.png"/></div></div></figure><h1 id="be84" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">编辑:在我的产品搜索扩展发布几个小时后，脸书已经从服务器端对此进行了修补。当它持续的时候很有趣。GG，FB。</h1><p id="8a79" class="pw-post-body-paragraph kb kc hu kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky hn dt translated"><a class="ae ka" href="https://hackernoon.com/tagged/facebook" rel="noopener ugc nofollow" target="_blank">脸书</a>带回了限量版的“感恩”<a class="ae ka" href="https://hackernoon.com/tagged/reaction" rel="noopener ugc nofollow" target="_blank">反应</a>这样人们可以在今年的母亲节表达他们的感谢和赞赏。人们用左拥右抱的花束来表达他们的感激之情，一切都是花团锦簇。</p><blockquote class="kz la lb"><p id="0892" class="kb kc lc kd b ke ld kg kh ki le kk kl lf lg ko kp lh li ks kt lj lk kw kx ky hn dt translated">但是，关键时刻到来了，马克·扎克伯格夺走了我们心中的感激，让我们心碎。花又不见了，人们都吓坏了。— <a class="ae ka" href="https://twitter.com/ShanduMul" rel="noopener ugc nofollow" target="_blank">山杜卡尼·穆洛齐</a></p></blockquote><div class="ll lm fm fo ln lo"><a href="http://www.huffingtonpost.co.za/2017/05/17/the-internet-is-freaking-out-because-the-facebook-flower-reactio_a_22095055/" rel="noopener  ugc nofollow" target="_blank"><div class="lp ab ej"><div class="lq ab lr cl cj ls"><h2 class="bd hv fv z el lt eo ep lu er et ht dt translated">互联网正在崩溃，因为脸书之花反应又消失了。原因如下…</h2><div class="lv l"><h3 class="bd b fv z el lt eo ep lu er et ek translated">啊哦。脸书花反应已经过去了，现在我们不知道如何表达我们的感激之情。那朵花回到了…</h3></div><div class="lw l"><p class="bd b gc z el lt eo ep lu er et ek translated">www.huffingtonpost.co.za</p></div></div><div class="lx l"><div class="ly l lz ma mb lx mc ja lo"/></div></div></a></div><p id="9ee6" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">母亲节过了，并不意味着我们不能向他人表达我们的感激之情。每天都是感恩的日子。我决定要恢复人性，带回感恩的反应。</p><p id="7b6b" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">找回突然从我们身边偷走的反应的唯一可能的方法是利用浏览器扩展的力量。凭借我在React和构建谷歌Chrome扩展<em class="lc">方面的经验(例如，我的</em> <a class="ae ka" rel="noopener" href="/@calialec/chrome-ig-story-bribing-the-instagram-story-api-with-cookies-c813e6dff911"> <em class="lc"> Chrome IG Story扩展</em> </a> <em class="lc">拥有37万以上的用户)</em>我能够对脸书Reactions React组件进行逆向工程(FB由其自己的React框架提供支持)，并让枯萎的花朵重新绽放。</p><p id="f923" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">我是怎么做到的？好吧，我必须为Alexandre Kirszenberg的精彩博文而欢呼，这篇博文详细介绍了如何检查和连接React组件。不过，他最终还是收到了脸书的停止通知函，所以希望我的命运不会和他一样。我只想说谢谢你们。</p><p id="7f83" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">我首先检查了当您将鼠标悬停在Like按钮上时出现的反应菜单弹出窗口。</p><figure class="me mf mg mh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff md"><img src="../Images/56a1edb03d9c30b194a9174585664507.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gqcqzo-GuA1oVRRiNk2xGQ.png"/></div></div><figcaption class="mi mj fg fe ff mk ml bd b be z ek">Inspecting the Facebook Reactions menu with <a class="ae ka" href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en" rel="noopener ugc nofollow" target="_blank">React Developer Tools</a></figcaption></figure><p id="48fb" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">从上面的截图可以看出，在右边，'<strong class="kd hv">ufireactionsmenuipl . react '</strong>是处理反应-交互的主要组件之一。如果你仔细观察，你会发现其中一个道具是一个名为<strong class="kd hv"><em class="lc">supported reactions</em></strong>的数组。<em class="lc">宾果</em>。从这里我发现数字映射到反应的类型ID。1是‘喜欢’，2是‘喜欢’，等等。最后一个ID是8，但是如果改成别的会怎么样？</p><figure class="me mf mg mh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mm"><img src="../Images/1e331d8b5885a4de7c4cf901da844109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yYQUPzkrMkyWom38EfjhEA.png"/></div></div><figcaption class="mi mj fg fe ff mk ml bd b be z ek">Modifying the props of the component allows us to dynamically change its behavior with little effort</figcaption></figure><p id="a08b" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">在增加数字后，当我达到11时，我终于得到了我想要的。在React Dev工具中编辑道具的美妙之处在于，一旦你更新了它，它就会传播到状态，一切都会按预期工作。这不像你只是在DOM中编辑一些HTML，然后不得不改变一些JS逻辑。通过简单地将最后一个索引的ID从8改为11，愤怒的反应变成了感激的反应，当你点击它时，它实际上向服务器提交并粘贴。脸书的服务器不会验证你发送的反应类型ID不再可用，所以你可以自由地感谢和被感谢。</p><p id="94d9" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">如果你像我一样对脸书的所作所为感到好奇，我尝试了一些其他的id。还有一些其他隐藏的反应，你可以用这种技术发现，但是脸书实际上是验证这些请求，如果你试图提交请求，就会阻止它。</p><p id="8b66" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">通过我的实验，我发现了5个隐藏的脸书反应:<strong class="kd hv">耶</strong>、<strong class="kd hv">迷糊</strong>、<strong class="kd hv">自拍</strong>、<strong class="kd hv">火</strong>、… <strong class="kd hv">飞机</strong>？唯一有图标的是火和飞机。</p><figure class="me mf mg mh fq iv fe ff paragraph-image"><div class="fe ff mn"><img src="../Images/c76d9d5a904918952aa94546a8a32586.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*vjDFmRiua5NaMl3j0hf20A.png"/></div><figcaption class="mi mj fg fe ff mk ml bd b be z ek">Hidden ‘Selfie’ Reaction with a missing icon</figcaption></figure><figure class="me mf mg mh fq iv fe ff paragraph-image"><div class="fe ff mo"><img src="../Images/2f3783e9e1dbf7a02475c776db365b66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*FZ3w85Q94xSGiV3ckZPe2g.png"/></div><figcaption class="mi mj fg fe ff mk ml bd b be z ek">Hidden ‘Like’ Reaction with a Fire icon</figcaption></figure><figure class="me mf mg mh fq iv fe ff paragraph-image"><div class="fe ff mp"><img src="../Images/360cfea06c901496c8407a6d2e7cd20c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*swVK_XjX1evzcfFfL5h5Kw.png"/></div><figcaption class="mi mj fg fe ff mk ml bd b be z ek">Hidden ‘Like’ Reaction with an Airplane icon</figcaption></figure><p id="dddc" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">现在，我知道我可以通过手动编辑React组件来发布感谢的反应，但是我能够构建一个其他人可以用来做同样事情的产品吗？🤔</p><p id="4369" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">使用前面提到的博文中描述的技术，我开始开发一个Chrome扩展，它可以让大众产生感恩的反应。</p><p id="4867" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">现在，实际上花了一段时间来逆向工程和跟踪组件树，以找到我可以以编程方式挂钩、截取和修改<strong class="kd hv"><em class="lc">supported reactions</em></strong><em class="lc"/>数组的确切位置，但最终我发现我需要的一切都存在于名为“<strong class="kd hv">uficentruupdates</strong>和“<strong class="kd hv"> UFIFeedbackTargets </strong>的两个组件中。</p><p id="5770" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">使用在脸书的窗口对象上公开的“requireLazy”模块，我可以需要这两个组件并使用它们的方法。</p><figure class="me mf mg mh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mq"><img src="../Images/0fa7360511f98caf09fe00bf88dba032.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3vwV1pTjIbJKKJuoVfSFTw.png"/></div></div><figcaption class="mi mj fg fe ff mk ml bd b be z ek">The sight of a callback being registered is surely a sign of an easy in to hook and mutate data</figcaption></figure><p id="936e" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">在<strong class="kd hv"> UFIFeedbackTargets </strong>中，我看到它正在订阅一个名为<em class="lc">‘更新-反馈’</em>的事件，一旦服务器用一个恰好包含<strong class="kd hv"><em class="lc">supported reactions</em></strong><em class="lc"/>数组的对象进行响应，就会调用这个事件。如果我挂钩到这个订阅，我可以确切地知道我何时获得了<strong class="kd hv"><em class="lc">supported reactions</em></strong>数组<strong class="kd hv"> <em class="lc"> </em> </strong>，并且我可以通过附加我们的感恩反应ID来改变它。现在唯一的问题是，在对它进行变异后，我如何让它在React应用程序中传播和实际反映？</p><figure class="me mf mg mh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mr"><img src="../Images/2ad0b6fac73c08e661669c8759838ff1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ip46TJy1XZu42J9D2Hf65g.png"/></div></div><figcaption class="mi mj fg fe ff mk ml bd b be z ek">Once you’ve hooked into a callback, it’s time to broadcast your changes.</figcaption></figure><p id="4ca6" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">在<strong class="kd hv">uficentrulupdates</strong>中，我看到我刚刚订阅的同一个事件“更新反馈”是由一个“通知”方法发出的。这是最后一步。从我订阅的回调中，我可以检索到<strong class="kd hv"><em class="lc">supported reactions</em></strong>数组，将“11”附加到该数组中，并使用修改后的数组广播新对象。现在，由于代码同时订阅和发出相同的事件，我们需要防止无限的回调循环。我的逻辑是，当我们收到数组<strong class="kd hv"><em class="lc">supported reactions</em></strong>时，简单地检查它的大小。如果它的大小是6，这是默认反应的当前数量，我们添加新的感恩反应并发出它。回调将再次接收数组，但是这次它的大小是7，所以我们不发出任何东西。一旦事件发出，React照常运行并接受我们的新道具，现在呈现我们美丽的花卉感恩反应。😀</p><p id="f57f" class="pw-post-body-paragraph kb kc hu kd b ke ld kg kh ki le kk kl km lg ko kp kq li ks kt ku lk kw kx ky hn dt translated">暂时的反应可能很有趣，但我真的恳求脸书正式带回感激的反应。生活中的一切都是短暂的，直到我们失去了对我们来说重要的东西，我们才意识到我们是多么珍惜它们。表达我们的感激之情，让我们爱的人知道我们有多在乎，这很好。永远心存感激，在脸书，在其他任何地方。谢谢🙏✌️</p><h1 id="fe58" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">在FB分机上安装永久感恩</h1><p id="7779" class="pw-post-body-paragraph kb kc hu kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky hn dt translated">你准备好对脸书表示感谢了吗？您可以从Chrome网络商店安装Chrome扩展:</p><div class="ll lm fm fo ln lo"><a href="https://chrome.google.com/webstore/detail/forever-thankful-on-fb/cliikahdjacboccjamlbnfekeooiiicc" rel="noopener  ugc nofollow" target="_blank"><div class="lp ab ej"><div class="lq ab lr cl cj ls"><h2 class="bd hv fv z el lt eo ep lu er et ht dt translated">永远感谢FB</h2><div class="lv l"><h3 class="bd b fv z el lt eo ep lu er et ek translated">Chrome扩展带来了感恩的反应，因为每一天都是感恩的日子。</h3></div><div class="lw l"><p class="bd b gc z el lt eo ep lu er et ek translated">chrome.google.com</p></div></div><div class="lx l"><div class="ms l lz ma mb lx mc ja lo"/></div></div></a></div><h1 id="e116" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">GitHub上的开源</h1><p id="900a" class="pw-post-body-paragraph kb kc hu kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky hn dt translated">好奇它到底是怎么运作的？请随意查看源代码。</p><div class="ll lm fm fo ln lo"><a href="https://github.com/CaliAlec/Forever-Thankful-On-FB" rel="noopener  ugc nofollow" target="_blank"><div class="lp ab ej"><div class="lq ab lr cl cj ls"><h2 class="bd hv fv z el lt eo ep lu er et ht dt translated">卡利亚力克/永远感恩</h2><div class="lv l"><h3 class="bd b fv z el lt eo ep lu er et ek translated">forever-thanking-On-FB-Chrome扩展，带回了感恩的反应，因为每天都是感恩的日子。</h3></div><div class="lw l"><p class="bd b gc z el lt eo ep lu er et ek translated">github.com</p></div></div><div class="lx l"><div class="mt l lz ma mb lx mc ja lo"/></div></div></a></div><div class="me mf mg mh fq ab cb"><figure class="mu iv mv mw mx my mz paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mu iv mv mw mx my mz paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mu iv mv mw mx my mz paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="kz la lb"><p id="f922" class="kb kc lc kd b ke ld kg kh ki le kk kl lf lg ko kp lh li ks kt lj lk kw kx ky hn dt translated"><a class="ae ka" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae ka" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae ka" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae ka" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="kb kc lc kd b ke ld kg kh ki le kk kl lf lg ko kp lh li ks kt lj lk kw kx ky hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ka" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ka" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="me mf mg mh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff na"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="me mf mg mh fq iv"><div class="bz el l di"><div class="nb nc l"/></div></figure></div></div>    
</body>
</html>