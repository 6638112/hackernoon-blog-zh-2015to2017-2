<html>
<head>
<title>Three steps to click a button</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">点击按钮的三个步骤</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/three-steps-to-click-a-button-2098f42732f5?source=collection_archive---------5-----------------------#2017-03-04">https://medium.com/hackernoon/three-steps-to-click-a-button-2098f42732f5?source=collection_archive---------5-----------------------#2017-03-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/cfe200942bac5aa588639406dfae7c1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xq72uz2UqeCV3yMRzfR0mA.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Photo by <a class="ae jg" href="https://unsplash.com/photos/qXn5L9BqRbE?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">James Sutton</a> on <a class="ae jg" href="https://unsplash.com/search/photos/computer-button?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d3a5" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我一直在帮助几个项目的测试自动化。每次我们重新开始，都有良好的意愿保持我们的回归套件干净。每次我们都要折腾东西，花时间调整我们的脚本，以避免每一个小的UI变化都带来大的变化。有没有降低开销的选择？我知道我的规格代表了最初的要求。我也注意到可用性工程师可以从中受益。</p><p id="646a" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我花了一些时间来分析我们在自动化规范过程中的抽象层次。我研究了我们在每个层面上使用的语言类型，这是我的发现:</p><ol class=""><li id="34c9" class="kf kg hu jj b jk jl jo jp js kh jw ki ka kj ke kk kl km kn dt translated">用例的层次。其中定义了业务流程和参与者；</li><li id="cf88" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">屏幕和场景的层次。用例转换成屏幕和场景；</li><li id="e148" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">控制和动作的级别。其中屏幕和场景被转换成低级UI特定的控件和动作。</li></ol><p id="a737" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我们用一些或多或少的实际例子来看看每个层面。</p><h1 id="fbcf" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">用例的层次</h1><p id="9d4a" class="pw-post-body-paragraph jh ji hu jj b jk lr jm jn jo ls jq jr js lt ju jv jw lu jy jz ka lv kc kd ke hn dt translated">我假设你了解行为驱动开发、<a class="ae jg" href="https://github.com/cucumber/cucumber/wiki/Gherkin" rel="noopener ugc nofollow" target="_blank">小黄瓜语言</a>和像<a class="ae jg" href="http://specflow.org/" rel="noopener ugc nofollow" target="_blank"> SpecFlow </a>这样的工具。在这个层面上使用小黄瓜语言很有意义。这一级别与我们产品的商业意义密切相关，因此，如果商业人士能够理解这种测试，这将是很有价值的。因此，让我们的小黄瓜场景使用产品所有者能够理解并使用的语言:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="4788" class="mf ku hu mb b fv mg mh l mi mj"><strong class="mb hv">Feature</strong>: Shopping<br/>  <strong class="mb hv">Scenario</strong>: <strong class="mb hv">I</strong> want to buy a present for Christmas and I don't have any clue what to buy<br/>    <strong class="mb hv">Given</strong> I know my budget<br/>      <strong class="mb hv">And</strong> I know whom I buy a present<br/>    <strong class="mb hv">When</strong> I ask for help to choose a present <br/>     <strong class="mb hv">And</strong> I tell about the person I buy a present <br/>     <strong class="mb hv">And</strong> I tell my budget <br/>    <strong class="mb hv">Then</strong> I'm offered with relevant options</span></pre><p id="4f43" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我敢打赌，我的产品负责人可以阅读上面的脚本，也可以毫不费力地发现错误。我甚至希望他能为我创造一些场景，这样我们就可以互相帮助，有一个合作点。</p><h1 id="c954" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">屏幕和场景的级别</h1><p id="2896" class="pw-post-body-paragraph jh ji hu jj b jk lr jm jn jo ls jq jr js lt ju jv jw lu jy jz ka lv kc kd ke hn dt translated">在这个层次上，我将参考马丁·福勒解释的<a class="ae jg" href="https://martinfowler.com/bliki/PageObject.html" rel="noopener ugc nofollow" target="_blank">页面对象模式</a>。页面对象模式有助于将低级的点击和对象从更有意义的屏幕和页面块中分离出来。这些屏幕和块是特定于产品的。一些团队甚至从这些块中创建一个目录，并在产品中重用它们。这些块通常与可用性工程师正在做的工作紧密相关，这可能是另一篇文章的主题——仍然不像输入、按钮或标签。为了展示一个例子，我使用了<a class="ae jg" href="https://github.com/corker/NOpenPage" rel="noopener ugc nofollow" target="_blank"> NOpenPage </a>库page对象模式的一个轻量级实现，它扩展了<a class="ae jg" href="https://github.com/SeleniumHQ/selenium" rel="noopener ugc nofollow" target="_blank"> Selenium </a>。该示例显示了SpecFlow步骤:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="580f" class="mf ku hu mb b fv mg mh l mi mj">[Binding]<br/><strong class="mb hv">public</strong> <strong class="mb hv">class</strong> <strong class="mb hv">MySteps</strong><br/>{<br/>    [<strong class="mb hv">When</strong>(@"I ask for help to choose a present")]<br/>    <strong class="mb hv">public</strong> <strong class="mb hv">void</strong> <strong class="mb hv">When_I_ask_for_help_to_choose_a_present</strong>()<br/>    {<br/>        Browser.<strong class="mb hv">Do</strong>(TheShopPage.Navigate);<br/>        Browser.On&lt;TheShopPage&gt;().<strong class="mb hv">AskForHelpToChooseAPresent</strong>();<br/>    }</span><span id="71aa" class="mf ku hu mb b fv mk mh l mi mj">    [<strong class="mb hv">Then</strong>(@"I'm offered with relevant options")]<br/>    <strong class="mb hv">public</strong> <strong class="mb hv">void</strong> <strong class="mb hv">Then_Im_offered_with_relevant_options</strong>()<br/>    {<br/>        Browser.On&lt;TheShopPage&gt;().<strong class="mb hv">AssertRelevantOptionsOffered</strong>();<br/>    }<br/>}</span></pre><p id="6112" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这个级别需要一个有开发技能的人的努力，尽管当我们谈论页面、页面上的块和场景时，语言对于可用性工程师来说可能是清楚的。让我们假设寻求帮助就像一个巫师。那么AskForHelpToChooseAPresent方法可能如下所示:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="383c" class="mf ku hu mb b fv mg mh l mi mj"><strong class="mb hv">public</strong> <strong class="mb hv">class</strong> <strong class="mb hv">TheShopPage</strong> : Page<br/>{<br/>    <strong class="mb hv">public</strong> <strong class="mb hv">TheShopPage</strong>(IPageContext context) : <strong class="mb hv">base</strong>(context)<br/>    {<br/>    }</span><span id="ec36" class="mf ku hu mb b fv mk mh l mi mj">    <strong class="mb hv">public</strong> <strong class="mb hv">static</strong> <strong class="mb hv">void</strong> <strong class="mb hv">Navigate</strong>(IWebDriver driver)<br/>    {<br/>        driver.<strong class="mb hv">Navigate</strong>().<strong class="mb hv">GoToUrl</strong>("https://theshop.it");<br/>    }</span><span id="232b" class="mf ku hu mb b fv mk mh l mi mj">    <strong class="mb hv">public</strong> <strong class="mb hv">void</strong> <strong class="mb hv">AskForHelpToChooseAPresent</strong>(<strong class="mb hv">string</strong> gender, <strong class="mb hv">int</strong> age)<br/>    {<br/>        Control&lt;Gender&gt;().<strong class="mb hv">Choose</strong>(gender);<br/>        Control&lt;Age&gt;().<strong class="mb hv">Choose</strong>(age);<br/>    }</span><span id="b8df" class="mf ku hu mb b fv mk mh l mi mj">    <strong class="mb hv">public</strong> <strong class="mb hv">void</strong> <strong class="mb hv">AssertRelevantOptionsOffered</strong>()<br/>    {<br/>        Control&lt;Offers&gt;().<strong class="mb hv">AssertRelevantOptionsOffered</strong>();<br/>    }<br/>}</span></pre><h1 id="6ffb" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">控制和行动水平</h1><p id="a68a" class="pw-post-body-paragraph jh ji hu jj b jk lr jm jn jo ls jq jr js lt ju jv jw lu jy jz ka lv kc kd ke hn dt translated">现在应该清楚了。我们到了底部。按钮、标签和输入都在这里。我们将所有与Selenium相关的代码放在用NOpenPage实现的page对象中:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="3f8c" class="mf ku hu mb b fv mg mh l mi mj"><strong class="mb hv">public</strong> <strong class="mb hv">class</strong> <strong class="mb hv">Gender</strong> : PageControl<br/>{<br/>    <strong class="mb hv">public</strong> <strong class="mb hv">Gender</strong>(IPageControlContext context) : <strong class="mb hv">base</strong>(By.<strong class="mb hv">ClassName</strong>("gender"), context)<br/>    {<br/>    }</span><span id="6df6" class="mf ku hu mb b fv mk mh l mi mj">    <strong class="mb hv">public</strong> <strong class="mb hv">void</strong> <strong class="mb hv">Choose</strong>(<strong class="mb hv">string</strong> gender)<br/>    {<br/>        <strong class="mb hv">var</strong> input = Element.<strong class="mb hv">FindElement</strong>(By.<strong class="mb hv">Id</strong>(gender));<br/>        input.<strong class="mb hv">Click</strong>();<br/>    }<br/>}</span></pre><p id="0cfa" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">通过遵循这三个抽象层次:</p><ul class=""><li id="3f75" class="kf kg hu jj b jk jl jo jp js kh jw ki ka kj ke ml kl km kn dt translated">我有业务人员和可用性工程师可以理解的清晰的规范；</li><li id="4634" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke ml kl km kn dt translated">我可以很容易地扩展我的眼镜。因为我知道我需要在什么层面上引入改变。</li></ul><p id="ad02" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这里的例子非常抽象，虽然我只是想展示在顶部使用商业语言，在中间使用可用性语言，在底部保留底层技术细节的想法。这种方法对我为自动化测试编写干净的代码很有帮助。</p><p id="4d59" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">快乐编码，<br/>迈克尔·博里索夫</p></div><div class="ab cl mm mn hc mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="hn ho hp hq hr"><p id="2b60" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="mt">原载于2017年3月4日</em><a class="ae jg" href="https://corker.github.io/2017/03/04/three-steps-to-click-a-button/" rel="noopener ugc nofollow" target="_blank"><em class="mt">corker . github . io</em></a><em class="mt">。</em></p></div></div>    
</body>
</html>