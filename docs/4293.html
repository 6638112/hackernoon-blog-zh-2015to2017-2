<html>
<head>
<title>Integrate a scratchpad file into your Rails dev workflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将暂存文件集成到您的Rails开发工作流中</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/as-rails-developers-it-is-imperative-that-we-be-comfortable-and-productive-in-the-console-7a72a78d97d3?source=collection_archive---------10-----------------------#2017-05-23">https://medium.com/hackernoon/as-rails-developers-it-is-imperative-that-we-be-comfortable-and-productive-in-the-console-7a72a78d97d3?source=collection_archive---------10-----------------------#2017-05-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="0ecb" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated"><strong class="ak"> <em class="jj">融合了</em> </strong>控制台的即时反馈与Ruby对象的结构和组织</h2></div><p id="0b8f" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">作为Rails开发人员，我们必须在控制台中保持舒适和高效。控制台是我们反馈周期最短的地方，非常适合学习和修补。<a class="ae kg" href="https://hackernoon.com/tagged/rails" rel="noopener ugc nofollow" target="_blank"> Rails </a>控制台在调试代码、<a class="ae kg" href="https://hackernoon.com/tagged/manipulating" rel="noopener ugc nofollow" target="_blank">操作</a>本地数据以及尝试新想法和实现方面非常有用。</p><p id="1bb6" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">然而，一旦我们从杂草中出现并开始处理更复杂的问题，控制台的刀刃就开始失去锋利。幸运的是，我们可以通过使用便笺式文件将控制台的即时反馈与Ruby对象/方法的结构和组织结合起来。</p><blockquote class="kh"><p id="e7fa" class="ki kj hu bd kk kl km kn ko kp kq kf ek translated">草稿栏是自动加载到所有Rails控制台会话中的文件。</p></blockquote><figure class="ks kt ku kv kw kx fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff kr"><img src="../Images/10ce19919300c1f3ac06e8a1ab86ff87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3saXOu4m3wY0SnsTp12jJg.png"/></div></div><figcaption class="le lf fg fe ff lg lh bd b be z ek">Adding a scratchpad file to my workflow has been a game changer</figcaption></figure><h2 id="05bb" class="li lj hu bd lk ll lm ln lo lp lq lr ls jt lt lu lv jx lw lx ly kb lz ma mb mc dt translated">使用Pry制作便笺式文件</h2><p id="5b79" class="pw-post-body-paragraph jk jl hu jm b jn md iv jp jq me iy js jt mf jv jw jx mg jz ka kb mh kd ke kf hn dt translated">我推荐使用撬杆(<a class="ae kg" href="https://github.com/rweng/pry-rails" rel="noopener ugc nofollow" target="_blank">撬杆</a>作为控制台。每当启动控制台(<code class="eh mi mj mk ml b">rails console</code>或<code class="eh mi mj mk ml b">binding.pry</code>)时，Pry会自动在应用程序的根目录(也在<code class="eh mi mj mk ml b">~/.pryrc</code>中)加载一个名为<code class="eh mi mj mk ml b">.pryrc</code>的文件。我们可以使用该文件来加载我们的便签簿。</p><p id="04ee" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">首先，在Rails根目录(<code class="eh mi mj mk ml b">touch scratch.rb</code>)下创建一个scratch.rb文件。然后在<code class="eh mi mj mk ml b">.pryrc</code>中加载文件:</p><pre class="mm mn mo mp fq mq ml mr ms aw mt dt"><span id="01ab" class="li lj hu ml b fv mu mv l mw mx">load ‘./scratch.rb’</span></pre><p id="59b0" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">下面是一个带有示例的基本草稿文件:</p><pre class="mm mn mo mp fq mq ml mr ms aw mt dt"><span id="ea97" class="li lj hu ml b fv mu mv l mw mx">module Scratch<br/>  def scratch!<br/>    load __FILE__<br/>  end</span><span id="f003" class="li lj hu ml b fv my mv l mw mx">  def my_scratch_method<br/>    'placeholder return'<br/>  end<br/>end</span><span id="eb9c" class="li lj hu ml b fv my mv l mw mx">include Scratch</span></pre><p id="74c3" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">Scratch模块加载到<code class="eh mi mj mk ml b">scratch.rb</code>中，并包含在Pry控制台会话中，这意味着在控制台中可以使用其中定义的所有方法。</p><p id="68b0" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">请注意，我在模块中添加了一个<code class="eh mi mj mk ml b">#scratch!</code>方法，它将文件重新加载到最新保存的版本，而无需重新加载整个控制台。这允许您更改<code class="eh mi mj mk ml b">Scratch</code>模块中的代码，并通过链接<code class="eh mi mj mk ml b">#scratch!</code>实时接收反馈:</p><pre class="mm mn mo mp fq mq ml mr ms aw mt dt"><span id="0925" class="li lj hu ml b fv mu mv l mw mx">scratch!; my_scratch_method</span></pre><p id="2a5a" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">scratch文件的另一个便利用途是添加不属于源代码的常用助手方法。例如，我在手边放了一个进度条:</p><pre class="mm mn mo mp fq mq ml mr ms aw mt dt"><span id="5d01" class="li lj hu ml b fv mu mv l mw mx">module Scratch<br/>  ...<br/>  require 'ruby-progressbar'</span><span id="2356" class="li lj hu ml b fv my mv l mw mx">  # Iterates through scope while displaying a progress bar<br/>  def each_with_progress_bar(scope, &amp;block)<br/>    progress_bar = ProgressBar.create<br/>    progress = progress_bar(scope.count)<br/>    scope.find_each do |item|<br/>      block.call(item).tap do<br/>        progress.increment<br/>      end<br/>    end<br/>  end<br/>  ...<br/>end</span><span id="9579" class="li lj hu ml b fv my mv l mw mx">include Scratch</span></pre><p id="7fc6" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">在控制台中提供暂存文件有许多有趣的用例。如果你有一个有趣的，给我留言。我很想知道其他人是如何使用便签簿的。</p></div><div class="ab cl mz na hc nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="hn ho hp hq hr"><p id="b739" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">我从我的同事、朋友、行走的vim百科斯科特·皮尔斯(<a class="ae kg" href="http://ddrscott.github.io/" rel="noopener ugc nofollow" target="_blank"> @ddrscott </a>)那里学到了这个窍门。</p><div class="mm mn mo mp fq ab cb"><figure class="ng kx nh ni nj nk nl paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="ng kx nh ni nj nk nl paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="ng kx nh ni nj nk nl paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="nm nn no"><p id="f922" class="jk jl np jm b jn jo iv jp jq jr iy js nq ju jv jw nr jy jz ka ns kc kd ke kf hn dt translated"><a class="ae kg" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kg" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kg" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kg" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jk jl np jm b jn jo iv jp jq jr iy js nq ju jv jw nr jy jz ka ns kc kd ke kf hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kg" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kg" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="mm mn mo mp fq kx fe ff paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="fe ff nt"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>