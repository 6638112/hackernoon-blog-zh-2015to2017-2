<html>
<head>
<title>Terminal scripts — gog mode.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">终端脚本— gog模式。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/terminal-scripts-gog-mode-2589d45dd714?source=collection_archive---------28-----------------------#2017-11-09">https://medium.com/hackernoon/terminal-scripts-gog-mode-2589d45dd714?source=collection_archive---------28-----------------------#2017-11-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="399f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">“让我们坐下来一个月，安装一些别名，并学习如何制作有效的终端脚本。”</em>~从来没有人说过</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/f47e5ee50f37b63900c62094dc4acd95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LSvepDjrGba26O7eC7fhjg.png"/></div></div></figure><p id="7740" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae kc" href="https://gog.codes" rel="noopener ugc nofollow" target="_blank"> gog </a>是一个开发者社区平台，旨在提高终端脚本的质量——与<a class="ae kc" href="https://github.com/kublikon/gog" rel="noopener ugc nofollow" target="_blank"> gog CLI </a>一起，它允许用户直接从终端快速查找、管理和执行终端脚本。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff kd"><img src="../Images/924ffcbcdda98d490559060583cd54dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J876IGycsnWVdhjIc825Bw.jpeg"/></div></div></figure><h1 id="a2f7" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">为什么我决定开始gog</h1><p id="b0eb" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">2015年年中，在一家初创公司担任高级全栈开发人员时，我遇到了一个构建过程问题，这个问题以越来越麻烦的方式不断出现。在两个月的时间里，我积累了如此多的代码，以至于我有时会忘记它的执行顺序或者与特定症状相关的可选参数。有时，它甚至要求我以非常特殊的方式手动重新安装完整的代码堆栈。我最终决定开始编写问题的解决方案。</p><p id="aa2d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">虽然脚本使它不那么笨重，但我不能永久地修复构建过程，因为我们的项目需要新的功能，每次更新都感觉有人在从我下面拉地毯。这让我想到了一个更好的解决方案。我决定通过在CLI中组织脚本来改进它们。</p><h1 id="0880" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">走向全球</h1><p id="8e76" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">我的第一个任务是找出一种方法，每次都以完全相同的方式一致地执行我的脚本。因为我的脚本可能会因为我从哪个目录执行它们而失败，所以我需要确保我不会意外地从根目录而不是正确的项目文件夹运行它们。于是，<a class="ae kc" href="https://github.com/kublikon/gog" rel="noopener ugc nofollow" target="_blank"> gog </a>诞生了(<em class="jp"> go-global </em>)。我创建了一个CLI，它将驻留在<code class="eh lh li lj lk b">local/bin</code>目录中，并从<code class="eh lh li lj lk b">local/lib</code>目录执行脚本，这样无论我在终端的哪个位置，我都不必花费数小时来修复一个仓促的错误。这也允许我跨用户执行脚本——非常方便！</p><h1 id="1c02" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">结构</h1><p id="d5f3" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">除了正确执行之外，我还希望在我定期更新脚本时跟踪对它们的更改，但是当我们有时恢复更改或对项目应用热修复时，需要一种返回的方法。我可以在GitHub中创建一个repo，并在那里跟踪我的更改。但是谁想处理这些乱七八糟的事情？尤其是凌晨1点的时候，你半睡半醒，在入睡前推送你的第10次更新。</p><p id="946f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我还添加了代码附带的<strong class="it hv">描述</strong>，以及快速列出我所有脚本的能力。由于<a class="ae kc" href="https://github.com/kublikon/gog" rel="noopener ugc nofollow" target="_blank">高格</a>已经执行脚本的名字，这是非常简单的版本一切，并迅速看到什么正在执行，而不是跳来跳去的回购。输入:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff ll"><img src="../Images/5a3fb8a3d2cf166262e692b94837ef6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3zNITpJB1WyzHnoQB9eELQ.jpeg"/></div></div><figcaption class="lm ln fg fe ff lo lp bd b be z ek">Listing all scripts with descriptions with gog CLI</figcaption></figure><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff ll"><img src="../Images/3c5dd291545a332ad0e8c56524be0814.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zShX9RphXESd2alRTb5XSQ.jpeg"/></div></div><figcaption class="lm ln fg fe ff lo lp bd b be z ek">Executing script with gog CLI</figcaption></figure><p id="b700" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于手头的问题来说，这是一个相当不错的解决方案，所以我暂时不去管<a class="ae kc" href="https://github.com/kublikon/gog" rel="noopener ugc nofollow" target="_blank"> gog </a>了，只是为了系统支持而不时更新它。</p><h1 id="6e31" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">创建一个平台</h1><p id="6a2f" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">几年后，我发现我不是唯一一个在构建过程中遇到问题的人，因为混合应用程序开发越来越受欢迎。此外，几乎每个我曾经交谈过的开发人员都告诉我，他们仍然在某种程度上使用终端脚本。要么是为了他们自己的构建过程、一些遗留代码、他们仍然需要支持的平台，要么是为了修复他们系统中的一些问题。具有讽刺意味的是，那些不经常执行脚本的人更难记住如何去做，他们希望能花更多的时间让脚本变得更好。但是，他们不会。</p><p id="0a10" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">与他人分享gog CLI还不够。跨机器共享脚本是有问题的，人们仍然必须寻找解决方案，在StackOverflow上筛选伪代码页面，或者在像<a class="ae kc" href="http://tldp.org/" rel="noopener ugc nofollow" target="_blank">tldp.org</a>这样的网站上筛选困难的例子。我知道我无意中发现了一些其他编码人员可以使用和受益的东西。我创建了<a class="ae kc" href="https://gog.codes" rel="noopener ugc nofollow" target="_blank">Gog . codes</a>——一个门户网站——它连接到<a class="ae kc" href="https://github.com/kublikon/gog" rel="noopener ugc nofollow" target="_blank"> gog CLI </a>并允许用户从终端快速搜索脚本。它还创建了一个地方，人们可以添加自己的脚本，并让其他人根据实际情况对它们进行改进。可执行。代码。我还添加了一些社交功能来推广更好的脚本，并在特定的代码行上标记脚本中的问题。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lq"><img src="../Images/cb63c8625db08446953644464fc61444.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S42M0-XGPOxRj7aNhPdIvQ.jpeg"/></div></div><figcaption class="lm ln fg fe ff lo lp bd b be z ek">Gog.codes user profile with multiple scripts.</figcaption></figure><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lq"><img src="../Images/914b43a20421e8d595cc1b1f8198ca77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hBTcAWGU_pPwmGhBYkuI-g.jpeg"/></div></div><figcaption class="lm ln fg fe ff lo lp bd b be z ek">Script in gog.codes with additional line annotation</figcaption></figure><h1 id="669d" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">利益</h1><p id="d5f5" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">单独使用终端脚本有很多好处，包括:</p><ul class=""><li id="c7ea" class="lr ls hu it b iu iv iy iz jc lt jg lu jk lv jo lw lx ly lz dt translated">构建流程</li><li id="3c0a" class="lr ls hu it b iu ma iy mb jc mc jg md jk me jo lw lx ly lz dt translated">系统信息/监控</li><li id="81c0" class="lr ls hu it b iu ma iy mb jc mc jg md jk me jo lw lx ly lz dt translated">系统配置</li><li id="7441" class="lr ls hu it b iu ma iy mb jc mc jg md jk me jo lw lx ly lz dt translated">应用程序修复</li><li id="1c27" class="lr ls hu it b iu ma iy mb jc mc jg md jk me jo lw lx ly lz dt translated">存储清理</li><li id="7060" class="lr ls hu it b iu ma iy mb jc mc jg md jk me jo lw lx ly lz dt translated">网络结构</li></ul><p id="c2e1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">…以及更多。</p><p id="fe2c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了帮助用户充分利用这些好处，<a class="ae kc" href="https://github.com/kublikon/gog" rel="noopener ugc nofollow" target="_blank"> gog </a>旨在消除脚本开发和执行的所有可怕方面。该平台是为终端脚本构建的，因此只考虑支持终端使用的特性。已经有很好的项目管理平台，比如GitHub或npm，而<a class="ae kc" href="https://github.com/kublikon/gog" rel="noopener ugc nofollow" target="_blank"> gog </a>并不想取代它们。</p><p id="cc55" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">围绕终端使用的最常见的担心是由于执行不正确的命令而导致的系统全面损坏，由于不正确地执行命令而导致的系统全面故障，以及由于将文件转换应用到整个硬盘驱动器而导致的数据损坏。当然，这些问题都可以在gog中通过从一致的位置执行每个命令来解决。此外，拥有完整的可用工作脚本而不是伪代码示例大大降低了出现可怕错误的可能性。</p><p id="0912" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在未来的计划中，机器学习将进一步防止意外执行像RM-RF *或:(){:|:&amp;}这样的命令；:并希望有一天成为人们共享脚本的方式，而不是在博客帖子中键入命令并期待最好的结果。</p><p id="dab4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">(注意:不要执行上述命令。他们绝对会破坏你的系统)</em></p><h1 id="54c7" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">安全性</h1><p id="dc9a" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">我收到的关于<a class="ae kc" href="https://github.com/kublikon/gog" rel="noopener ugc nofollow" target="_blank"> gog </a>的最大负面反馈是，“你从互联网上下载脚本并在你的机器上执行，这很危险！”由于这种担心是完全正确的，而且我绝不会建议在不知道终端功能的情况下盲目地在终端上执行随机代码，所以我必须指出，您一直都在这样做。作为一名开发人员，如果您曾经使用过依赖项，那么您已经安装了代码，包括bash脚本，甚至没有意识到它的存在。作为消费者，您相信您安装的应用程序不会在您的计算机上安装恶意脚本。</p><p id="1a6b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">gog被特别设计成永远不会自动执行你从平台上下载的代码。这允许用户在代码执行前检查他们下载的代码。最终，我计划添加机器学习来自动检测恶意脚本并标记格式错误的代码。目前，我建议阅读注释并编辑您执行的代码。</p><h1 id="1936" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">未来的改进</h1><p id="9e64" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">gog已经计划了许多新增功能，包括:</p><p id="ce4a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">对具有别名的Linux平台或终端的更广泛系统支持</strong></p><p id="01d1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">不同的Linux系统对Bash的支持略有不同，有时会破坏CLI。此外，终端别名可能会因为具有不同的配置文件策略而导致问题，这些策略也会破坏CLI。不幸的是，完整的系统支持需要一些时间，但是CLI目前完全是用Bash编写的，它的运行没有任何特殊的依赖性。这应该会扩展系统支持，尤其是对遗留系统的支持。</p><p id="cbec" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">自动启动和cron作业</strong></p><p id="11a2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">脚本自动化是任何系统生态系统的重要组成部分，gog最终将允许一种简单的方法来添加已安装的脚本到自动启动或cron任务中。</p><p id="1c93" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">门户网站和机器学习中的语法支持</strong></p><p id="b036" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了简化编写优秀脚本的过程，gog将支持Bash、JavaScript和Python的语法，包括可以检测明显问题或恶意代码的机器学习。</p><p id="3d80" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">虚拟功能</strong></p><p id="bbc5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了刺激快速、高效的脚本编写体验，gog将包含一组模块化的脚本片段，它们可以接受参数并返回参数。每个片段或虚函数都将被版本化，并且可以很容易地插入脚本来执行某些功能。将保留函数的每个版本，以防止破坏使用特定版本的当前脚本。</p><p id="3751" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">代码注释</strong></p><p id="fe33" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">除了语法支持之外，代码注释将提供关于您正在编写的代码的信息，包括用户创建脚本时的提示和小示例。</p><h1 id="7b30" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">结论</h1><p id="f7d1" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">我的希望是，其他开发人员不必经历我多年来经历的那种令人毛骨悚然的例行公事。你可以通过访问网站免费使用<a class="ae kc" href="https://gog.codes" rel="noopener ugc nofollow" target="_blank"> gog </a>。我一直在寻找反馈，以便让它更加高效和安全。随时给我发电子邮件:kpx.dev@gmail.com。</p></div></div>    
</body>
</html>