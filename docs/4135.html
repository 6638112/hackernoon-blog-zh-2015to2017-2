<html>
<head>
<title>Building an Inventory Management App Using Vue.js and Laravel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vue.js和Laravel构建库存管理应用程序</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/building-an-inventory-management-app-using-vue-js-and-laravel-1abc492d95d7?source=collection_archive---------5-----------------------#2017-05-15">https://medium.com/hackernoon/building-an-inventory-management-app-using-vue-js-and-laravel-1abc492d95d7?source=collection_archive---------5-----------------------#2017-05-15</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/06446c8654474a48d03049c133238e26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v781ryzP5i4mDVcfVqSXTQ.png"/></div></div></figure><p id="9daa" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这篇文章最初出现在宇宙JS博客上。</p><p id="05b8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本教程中，我们将使用Laravel和Vue.js创建一个简单的库存管理应用程序作为我们的前端。本教程假设您对面向对象的php和javascript有基本的了解，尽管我们将会学习Laravel和Vue.js的基础知识，但建议您对它们的概念有基本的了解。现在我们已经清楚了，启动你的php服务器，让我们来构建一些东西。</p><h1 id="2f7b" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">TL；速度三角形定位法(dead reckoning)</h1><p id="941b" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated"><a class="ae ka" href="http://inventory-app.cosmicapp.co/" rel="noopener ugc nofollow" target="_blank">查看演示</a> <br/> <a class="ae ka" href="https://github.com/cosmicjs/inventory-app" rel="noopener ugc nofollow" target="_blank">查看GitHub上的代码</a></p><h1 id="ad29" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">开始使用:</h1><p id="f38a" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">由于这是一个laravel应用程序，您需要创建一个新的laravel项目，确保您的服务器满足laravel的要求，如这里所述Laravel Servrer要求，并确保您的服务器上安装了Composer。一旦你安装了composer，打开你的命令行和cd进入你的服务器根目录，然后简单的运行</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="e6ce" class="ln kc hu lj b fv lo lp l lq lr">composer create-project --prefer-dist laravel/laravel inventory</span></pre><p id="80eb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一旦成功运行，这将在目录清单中设置一个新的laravel项目。</p><p id="6dac" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">设置好新项目后，您将运行npm install或NPM install——如果您是在windows上开发，没有bin链接。这将下载并设置我们所有的javascript依赖项。为了能够查看我们的空laravel项目，只需从我们的项目目录运行php artisan serve，这将从我们的项目根目录启动一个php服务器，然后您可以在浏览器url中键入<a class="ae ka" href="http://127.0.0.1:8000" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8000 </a>，您应该会看到默认的laravel屏幕。</p><h1 id="af51" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">设置Cosmic JS php库</h1><p id="e1d9" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我们将使用Cosmic JS php库中的一些函数，将repo下载到一个单独的文件夹中，我们将不得不编辑它一点，以便与laravel一起工作。在inventory/app/ folder中，创建一个/Vendor/cosmicjs文件夹，并将cosmicjs-php库的所有内容复制到其中，例如，cosmicjs.php的路径变成app/Vendor/cosmicjs/cosmicjs . PHP。然后将app/Vendor/cosmicjs/curl类重命名为app/Vendor/cosmicjs/cosmiccurl，并更改代码的顶部:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="dc97" class="ln kc hu lj b fv lo lp l lq lr">class Curl {<br/>  ...<br/>  }</span></pre><p id="9ea9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">到</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="5c1f" class="ln kc hu lj b fv lo lp l lq lr">namespace App\Vendor\cosmicjs;</span><span id="1f51" class="ln kc hu lj b fv ls lp l lq lr">class CosmicCurl {<br/>  ....<br/>}</span></pre><p id="e8a1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们所做的是向cosmiccurl文件添加一个名称空间，这样我们就可以导入到laravel中，并更改类名以匹配文件名。之后，替换cosmicjs.php的这一部分</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="096d" class="ln kc hu lj b fv lo lp l lq lr">include("curl.php");<br/>$curl = new Curl;<br/>class CosmicJS {<br/>  function __construct(){<br/>    global $curl;<br/>    global $config;<br/>    $this-&gt;curl = $curl;<br/>    $this-&gt;config = $config;<br/>    $this-&gt;config-&gt;bucket_slug = $config-&gt;bucket_slug;<br/>    $this-&gt;config-&gt;object_slug = $config-&gt;object_slug;<br/>    $this-&gt;config-&gt;read_key = $config-&gt;read_key;<br/>    $this-&gt;config-&gt;write_key = $config-&gt;write_key;<br/>    $this-&gt;config-&gt;url = "https://api.cosmicjs.com/v1/" . $this-&gt;config-&gt;bucket_slug;<br/>    $this-&gt;config-&gt;objects_url = $this-&gt;config-&gt;url . "/objects?read_key=" . $this-&gt;config-&gt;read_key;<br/>    $this-&gt;config-&gt;object_url = $this-&gt;config-&gt;url . "/object/" . $this-&gt;config-&gt;object_slug . "?read_key=" . $this-&gt;config-&gt;read_key;<br/>    $this-&gt;config-&gt;media_url = $this-&gt;config-&gt;url . "/media?read_key=" . $this-&gt;config-&gt;read_key;<br/>    $this-&gt;config-&gt;add_object_url = $this-&gt;config-&gt;url . "/add-object?write_key=" . $this-&gt;config-&gt;write_key;<br/>    $this-&gt;config-&gt;edit_object_url = $this-&gt;config-&gt;url . "/edit-object?write_key=" . $this-&gt;config-&gt;write_key;<br/>    $this-&gt;config-&gt;delete_object_url = $this-&gt;config-&gt;url . "/delete-object?write_key=" . $this-&gt;config-&gt;write_key;<br/>  }</span></pre><p id="2095" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">随着</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="f2e3" class="ln kc hu lj b fv lo lp l lq lr">namespace App\Vendor\cosmicjs;</span><span id="b521" class="ln kc hu lj b fv ls lp l lq lr">use App\Vendor\cosmicjs\CosmicCurl;</span><span id="acd6" class="ln kc hu lj b fv ls lp l lq lr">class CosmicJS {</span><span id="3830" class="ln kc hu lj b fv ls lp l lq lr">    private $config;<br/>    private $curl;<br/>    function __construct($bucket_slug, $type_slug,$object_slug = "", $read_key = "", $write_key = "") {<br/>        $this-&gt;curl = new CosmicCurl();<br/>        $this-&gt;config = new \stdClass();<br/>        //$this-&gt;config = $config;<br/>        $this-&gt;config-&gt;bucket_slug = $bucket_slug;<br/>        $this-&gt;config-&gt;object_slug = $object_slug;<br/>        $this-&gt;config-&gt;type_slug = $type_slug;<br/>        $this-&gt;config-&gt;read_key = $read_key;<br/>        $this-&gt;config-&gt;write_key = $write_key;<br/>        $this-&gt;config-&gt;url = "https://api.cosmicjs.com/v1/" . $this-&gt;config-&gt;bucket_slug;<br/>        $this-&gt;config-&gt;objects_url = $this-&gt;config-&gt;url . "/objects?read_key=" . $this-&gt;config-&gt;read_key;<br/>        $this-&gt;config-&gt;object_type_url = $this-&gt;config-&gt;url . "/object-type/" . $this-&gt;config-&gt;type_slug . "?read_key=" . $this-&gt;config-&gt;read_key;<br/>        $this-&gt;config-&gt;object_url = $this-&gt;config-&gt;url . "/object/" . $this-&gt;config-&gt;object_slug . "?read_key=" . $this-&gt;config-&gt;read_key;<br/>        $this-&gt;config-&gt;media_url = $this-&gt;config-&gt;url . "/media?read_key=" . $this-&gt;config-&gt;read_key;<br/>        $this-&gt;config-&gt;add_object_url = $this-&gt;config-&gt;url . "/add-object?write_key=" . $this-&gt;config-&gt;write_key;<br/>        $this-&gt;config-&gt;edit_object_url = $this-&gt;config-&gt;url . "/edit-object?write_key=" . $this-&gt;config-&gt;write_key;<br/>        $this-&gt;config-&gt;delete_object_url = $this-&gt;config-&gt;url . "/delete-object?write_key=" . $this-&gt;config-&gt;write_key;<br/>    }</span></pre><p id="32cc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这一点变化是，它使用其名称空间导入cosmiccurl，并使我们能够在laravel内快速创建cosmicjs对象的多个实例，只需使用构造函数参数进行初始化，而不必设置一些配置变量，这些变量在用于大型应用程序时会变得混乱。最后将下面的函数添加到cosmicjs.php的文件中。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="7224" class="ln kc hu lj b fv lo lp l lq lr">public function getByObjectSlug($key,$slug)<br/>    {   <br/>        $this-&gt;config-&gt;object_by_meta_object = $this-&gt;config-&gt;url ."/object-type/" . $this-&gt;config-&gt;type_slug ."/search?metafield_key=" . $key ."&amp;metafield_object_slug=" .$slug;<br/>        $data = json_decode($this-&gt;curl-&gt;get($this-&gt;config-&gt;object_by_meta_object));<br/>        return $data;<br/>    }</span></pre><h1 id="5093" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">构建我们的应用</h1><p id="67ff" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">现在，我们已经在app/Vendor文件夹中设置了cosmicjs库，是时候实际构建一些东西了。因为所有请求都将由app/Http/Controller/index Controller . PHP文件处理，所以打开它，复制并粘贴这段代码。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="b48f" class="ln kc hu lj b fv lo lp l lq lr">&lt;?php</span><span id="80be" class="ln kc hu lj b fv ls lp l lq lr">namespace App\Http\Controllers;</span><span id="4221" class="ln kc hu lj b fv ls lp l lq lr">use Illuminate\Http\Request;<br/>use App\Vendor\cosmicjs\CosmicJS;<br/>use GuzzleHttp\Client;</span><span id="4f47" class="ln kc hu lj b fv ls lp l lq lr">class IndexController extends Controller {</span><span id="c7e2" class="ln kc hu lj b fv ls lp l lq lr">    private $locations_cosmic;<br/>    private $items_cosmic;<br/>    private $bucket_slug = '';<br/>    private $read_key = '';<br/>    private $write_key = '';</span><span id="11f7" class="ln kc hu lj b fv ls lp l lq lr">    public function __construct() {<br/>        //initialize cosmicjs php instance for fetching all locations<br/>        $this-&gt;bucket_slug = config('cosmic.slug');<br/>        $this-&gt;read_key = config('cosmic.read');<br/>        $this-&gt;write_key = config('cosmic.write');<br/>        $this-&gt;locations_cosmic = new CosmicJS($this-&gt;bucket_slug, 'locations');<br/>        $this-&gt;items_cosmic = new CosmicJS($this-&gt;bucket_slug, 'items', $this-&gt;read_key, $this-&gt;write_key);<br/>    }</span><span id="b12b" class="ln kc hu lj b fv ls lp l lq lr">    public function index($location = null) {</span><span id="6a25" class="ln kc hu lj b fv ls lp l lq lr">        //get objects with cosmic-js php<br/>        $locations = $this-&gt;locations_cosmic-&gt;getObjectsType();</span><span id="be93" class="ln kc hu lj b fv ls lp l lq lr">        //set locations and bucket_slug variable to be passed to view<br/>        if (property_exists($locations, 'objects')) {<br/>            $data['locations'] = $locations-&gt;objects;<br/>        }<br/>        else<br/>        {<br/>            $data['locations'] = [];<br/>        }</span><span id="ba63" class="ln kc hu lj b fv ls lp l lq lr">        $data['bucket_slug'] = $this-&gt;bucket_slug;</span><span id="e477" class="ln kc hu lj b fv ls lp l lq lr">        //if location slug was passed in url, pass it to view as well<br/>        if ($location) {<br/>            $data['location_slug'] = $location;<br/>        } else {<br/>            $data['location_slug'] = '';<br/>        }</span><span id="8709" class="ln kc hu lj b fv ls lp l lq lr">        //load view<br/>        return view('index', $data);<br/>    }</span><span id="1b9b" class="ln kc hu lj b fv ls lp l lq lr">    //fetch items for location based on slug<br/>    public function itemsByLocation($slug) {<br/>        //fetch items using the cosmicjs library's custom function<br/>        $items = $this-&gt;items_cosmic-&gt;getByObjectSlug('location', $slug);</span><span id="e396" class="ln kc hu lj b fv ls lp l lq lr">        //if the returned value has "object" property, pass it <br/>        if (property_exists($items, 'objects')) {<br/>            //returning arrays in laravel automatically converts it to json string<br/>            return $items-&gt;objects;<br/>        } else {<br/>            return 0;<br/>        }<br/>    }</span><span id="10b6" class="ln kc hu lj b fv ls lp l lq lr">    public function newLocation(Request $request) {<br/>        //get passed input<br/>        $title = $request-&gt;input('title');<br/>        $address = $request-&gt;input('address');<br/>        $picture = $request-&gt;input('image');</span><span id="c3d2" class="ln kc hu lj b fv ls lp l lq lr">        //set data array<br/>        $data['title'] = $title;<br/>        $data['type_slug'] = "locations";<br/>        $data['bucket_slug'] = $this-&gt;bucket_slug;<br/>        $metafields = array();<br/>        $address_data['key'] = "address";<br/>        $address_data['type'] = 'textarea';<br/>        $address_data['value'] = $address;<br/>        if ($picture != '') {<br/>            $picture_data['key'] = "picture";<br/>            $picture_data['type'] = 'file';<br/>            $picture_data['value'] = $picture;<br/>            array_push($metafields, $picture_data);<br/>        }<br/>        array_push($metafields, $address_data);<br/>        $data['metafields'] = $metafields;</span><span id="3e31" class="ln kc hu lj b fv ls lp l lq lr">        //create a new guzzle client<br/>        $client = new Client();<br/>        //create guzzle request with data array passed as json value<br/>        $result = $client-&gt;post('https://api.cosmicjs.com/v1/' . $this-&gt;bucket_slug . '/add-object', [<br/>            'json' =&gt; $data,<br/>            'headers' =&gt; [<br/>                'Content-type' =&gt; 'application/json',<br/>            ]<br/>        ]);<br/>        //flash message<br/>        $request-&gt;session()-&gt;flash('status', 'The location"' . $title . '" was successfully locations');<br/>        //return result body<br/>        return $result-&gt;getBody();<br/>    }</span><span id="e7ed" class="ln kc hu lj b fv ls lp l lq lr">    //create a new item<br/>    public function newItem(Request $request) {<br/>        //get data<br/>        $name = $request-&gt;input('name');<br/>        $count = $request-&gt;input('count');<br/>        $location_id = $request-&gt;input('location');<br/>        $picture = $request-&gt;input('image');</span><span id="f604" class="ln kc hu lj b fv ls lp l lq lr">        //create data array to be passed<br/>        $data['title'] = $name;<br/>        $data['type_slug'] = "items";<br/>        $data['bucket_slug'] = $this-&gt;bucket_slug;<br/>        $count_metafield['key'] = "count";<br/>        $count_metafield['value'] = $count;<br/>        $count_metafield['type'] = "text";<br/>        $location_meta['key'] = "location";<br/>        $location_meta['object_type'] = "locations";<br/>        $location_meta['type'] = "object";<br/>        $location_meta['value'] = $location_id;<br/>        $metafields = array();</span><span id="4cb2" class="ln kc hu lj b fv ls lp l lq lr">        //set picture if passed into request<br/>        if ($picture != '') {<br/>            $picture_data['key'] = "picture";<br/>            $picture_data['type'] = 'file';<br/>            $picture_data['value'] = $picture;<br/>            array_push($metafields, $picture_data);<br/>        }<br/>        array_push($metafields, $count_metafield);<br/>        array_push($metafields, $location_meta);<br/>        $data['metafields'] = $metafields;</span><span id="d791" class="ln kc hu lj b fv ls lp l lq lr">        $client = new Client();<br/>        $result = $client-&gt;post('https://api.cosmicjs.com/v1/' . $this-&gt;bucket_slug . '/add-object', [<br/>            'json' =&gt; $data,<br/>            'headers' =&gt; [<br/>                'Content-type' =&gt; 'application/json',<br/>            ]<br/>        ]);<br/>        //flash message<br/>        $request-&gt;session()-&gt;flash('status', 'The Item "' . $name . '" was successfully created');<br/>        //return result body<br/>        return $result-&gt;getBody();<br/>    }</span><span id="ca6f" class="ln kc hu lj b fv ls lp l lq lr">    public function editItem(Request $request) {<br/>        $name = $request-&gt;input('name');<br/>        $count = $request-&gt;input('count');<br/>        $slug = $request-&gt;input('slug');<br/>        $location_id = $request-&gt;input('location_id');</span><span id="75d1" class="ln kc hu lj b fv ls lp l lq lr">        $data['title'] = $name;<br/>        $data['slug'] = $slug;<br/>        $count_meta['key'] = "count";<br/>        $count_meta['value'] = $count;<br/>        $count_meta['type'] = "text";<br/>        $location_meta['key'] = "location";<br/>        $location_meta['object_type'] = "locations";<br/>        $location_meta['type'] = "object";<br/>        $location_meta['value'] = $location_id;<br/>        $metafields = array();<br/>        //set picture if passed into request<br/>        if ($request-&gt;input('image')) {<br/>            $picture_data['key'] = "picture";<br/>            $picture_data['type'] = 'file';<br/>            $picture_data['value'] = $request-&gt;input('image');<br/>            array_push($metafields, $picture_data);<br/>        }<br/>        array_push($metafields, $count_meta);<br/>        array_push($metafields, $location_meta);<br/>        $data['metafields'] = $metafields;</span><span id="856a" class="ln kc hu lj b fv ls lp l lq lr">        $client = new Client();<br/>        $result = $client-&gt;put('https://api.cosmicjs.com/v1/' . $this-&gt;bucket_slug . '/edit-object', [<br/>            'json' =&gt; $data,<br/>            'headers' =&gt; [<br/>                'Content-type' =&gt; 'application/json',<br/>            ]<br/>        ]);<br/>        //flash message<br/>        $request-&gt;session()-&gt;flash('status', 'The Item was successfully edited!');<br/>        //return result body<br/>        return $result-&gt;getBody();<br/>    }</span><span id="59ac" class="ln kc hu lj b fv ls lp l lq lr">    public function deleteItem(Request $request, $slug) {<br/>        //create new client and delete item<br/>        $client = new Client();<br/>        $result = $client-&gt;delete('https://api.cosmicjs.com/v1/' . $this-&gt;bucket_slug . '/' . $slug, [<br/>            'headers' =&gt; [<br/>                'Content-type' =&gt; 'application/json',<br/>            ]<br/>        ]);</span><span id="f56b" class="ln kc hu lj b fv ls lp l lq lr">        //flash message<br/>        $request-&gt;session()-&gt;flash('status', 'The Item was successfully deleted!');<br/>        return $result;<br/>    }</span><span id="50ea" class="ln kc hu lj b fv ls lp l lq lr">}</span></pre><p id="73a0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">上面的代码是不言自明的，包括注释</p><h1 id="fd66" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">需要注意的事项:</h1><ol class=""><li id="14be" class="lt lu hu je b jf kz jj la jn lv jr lw jv lx jz ly lz ma mb dt translated">我们创建一个新的Cosmic JS实例来检索位置</li><li id="1007" class="lt lu hu je b jf mc jj md jn me jr mf jv mg jz ly lz ma mb dt translated">我们正在设置我们的vuejs前端将与之交互的所有功能</li><li id="5b3e" class="lt lu hu je b jf mc jj md jn me jr mf jv mg jz ly lz ma mb dt translated">$client = new CLient()创建一个新的guzzle实例，我们用它来调用cosmic api</li></ol><p id="f39c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来，我们将在routes/web.php文件中创建我们的路由。打开文件，将这段代码复制并粘贴到其中。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="451f" class="ln kc hu lj b fv lo lp l lq lr">&lt;?php<br/>Route::get('/{location?}', 'IndexController@index');<br/>Route::get('items/{slug}', 'IndexController@itemsByLocation');<br/>Route::post('locations/new','IndexController@newLocation');<br/>Route::post('items/new','IndexController@newItem');<br/>Route::post('items/edit','IndexController@editItem');</span></pre><h1 id="b1e9" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">我们在做什么</h1><p id="f66c" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我们正在将所有的IndexCOntroller函数注册到routes中，这样前端就可以访问它们。</p><h1 id="b575" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">构建前端</h1><p id="64a9" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">记住我们IndexController返回视图中的这段代码(' index '，$ data)；？现在是时候创建将要加载的视图了。打开/resources/views文件夹，打开master.blade.php的<a class="ae ka" href="https://cosmicjs.com/blog/master.blade.php" rel="noopener ugc nofollow" target="_blank"/>，然后复制并粘贴到其中。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="b0eb" class="ln kc hu lj b fv lo lp l lq lr">&lt;html lang="{{ config('app.locale') }}"&gt;<br/>    &lt;head&gt;<br/>        &lt;meta charset="utf-8"&gt;<br/>        &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;<br/>        &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;<br/>        &lt;!-- Set Csrf token on all pages --&gt;<br/>        &lt;meta name="csrf-token" content="{{ csrf_token() }}"&gt;<br/>        &lt;!-- Load Bootstrap--&gt;<br/>        &lt;link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"&gt;<br/>        &lt;link href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.6.2/sweetalert2.css" rel="stylesheet" type="text/css"&gt;<br/>        &lt;title&gt;Inventory Manger&lt;/title&gt;</span><span id="5574" class="ln kc hu lj b fv ls lp l lq lr">        &lt;!-- Fonts --&gt;<br/>        &lt;link rel="stylesheet" href="{{ asset('css/font-awesome/css/font-awesome.min.css')}}"/&gt;<br/>        &lt;link href="https://fonts.googleapis.com/css?family=Raleway:100,600" rel="stylesheet" type="text/css"&gt;<br/>        &lt;script src="https://use.fontawesome.com/682442a8be.js"&gt;&lt;/script&gt;</span><span id="b675" class="ln kc hu lj b fv ls lp l lq lr">        &lt;!-- Set Csrf token to be used by javascript and axios--&gt;<br/>        &lt;script&gt;<br/>window.Laravel = &lt;?php<br/>echo json_encode([<br/>    'csrfToken' =&gt; csrf_token(),<br/>]);<br/>?&gt;<br/>        &lt;/script&gt;<br/>        &lt;!-- Styles --&gt;<br/>        &lt;style&gt;<br/>            .location-tab{<br/>                height:104px;<br/>                padding-left: 150px;<br/>            }<br/>            <br/>            .location-tab &gt; img{<br/>                position: absolute;<br/>                left: 0;<br/>                top: 0;<br/>                height: 100%;<br/>                width: auto;<br/>                max-width: 130px;<br/>            }<br/>            <br/>            .text-primary{<br/>                color: #29ABE2 !important;<br/>            }<br/>            <br/>            .panel-heading{<br/>                background-color: #29ABE2 !important;<br/>                color: white !important;<br/>            }<br/>            <br/>            .panel{<br/>                border-color: #29ABE2 !important;<br/>            }<br/>            <br/>            .btn-primary{<br/>                background-color: #29ABE2 !important;<br/>                color: white !important;<br/>                border-color: #29ABE2 !important;<br/>                border-radius: 3px;<br/>                margin: 10px 0;<br/>            }<br/>        &lt;/style&gt;<br/>    &lt;/head&gt;<br/>    &lt;body&gt;<br/>        &lt;div class="container"&gt;<br/>            &lt;div id="wrapper"&gt;<br/>                @yield('content')<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>        &lt;!-- Load Jquery and bootstrap js--&gt;<br/>        &lt;script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>        &lt;script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>        &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.6.2/sweetalert2.min.js"&gt;&lt;/script&gt;<br/>        &lt;script src="{{ asset('/js/app.js')}}"&gt;&lt;/script&gt;<br/>        @yield('scripts')<br/>    &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="1463" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">master.blade.php的<a class="ae ka" href="https://cosmicjs.com/blog/master.blade.php" rel="noopener ugc nofollow" target="_blank">将作为一个可扩展的布局，我们可以用它作为所有其他视图的父布局。现在在同一个文件夹中创建一个</a><a class="ae ka" href="https://cosmicjs.com/blog/index.blade.php" rel="noopener ugc nofollow" target="_blank">index.blade.php</a>文件，并将它粘贴到这个文件夹中。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="57f7" class="ln kc hu lj b fv lo lp l lq lr">@extends('master')</span><span id="f0c5" class="ln kc hu lj b fv ls lp l lq lr">@section('content')<br/>&lt;div class="row"&gt;<br/>    &lt;div class="col-md-12"&gt;<br/>        &lt;div style="float:left"&gt;<br/>            &lt;h1&gt;Inventory Management&lt;/h1&gt;<br/>        &lt;/div&gt;<br/>        &lt;div style="float:right;padding-top: 20px"&gt;<br/>            &lt;a class="btn btn-default"&gt;&lt;i class="fa fa-github"&gt;&lt;/i&gt; View on Github&lt;/a&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/div&gt;</span><span id="0d8a" class="ln kc hu lj b fv ls lp l lq lr">&lt;div class="row"&gt;<br/>    &lt;div class="col-md-12"&gt;<br/>        &lt;div style="float: right; margin-bottom: 15px;"&gt;&lt;a href="https://cosmicjs.com" target="_blank" style="text-decoration: none;"&gt;&lt;img class="pull-left" src="https://cosmicjs.com/images/logo.svg" width="28" height="28" style="margin-right: 10px;"&gt;&lt;span style="color: rgb(102, 102, 102); position: relative; top: 3px;"&gt;Proudly powered by Cosmic JS&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/div&gt;</span><span id="a0fc" class="ln kc hu lj b fv ls lp l lq lr">&lt;div class="row" style="font-size: 16px"&gt;<br/>    &lt;!-- Display vue component and set props from given data  --&gt;<br/>    &lt;inventory message="{{Session::get('status')}}" :initial-locations="{{ json_encode($locations) }}" slug="{{ $bucket_slug }}" location-slug="{{ $location_slug }}"&gt;&lt;/inventory&gt;<br/>&lt;/div&gt;<br/>@endsection</span><span id="9e72" class="ln kc hu lj b fv ls lp l lq lr">@section('scripts')<br/>&lt;script&gt;<br/>&lt;/script&gt;<br/>@endsection</span></pre><h1 id="ccc3" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">注意事项</h1><ol class=""><li id="bce2" class="lt lu hu je b jf kz jj la jn lv jr lw jv lx jz ly lz ma mb dt translated">我们创建了一个主布局，其中包含内容、脚本和样式的可用部分，我们的其他视图可以扩展这些部分。</li><li id="09d2" class="lt lu hu je b jf mc jj md jn me jr mf jv mg jz ly lz ma mb dt translated">我们添加了vue组件(将在下一节中创建)，由控制器将props作为数据提供给视图</li></ol><h1 id="6a92" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">创建我们的控制器</h1><p id="30a0" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">本节假设你对Vuejs有基本的了解，如果没有，我建议你复习一下，因为解释一些vue函数是如何工作的超出了本教程的范围。现在开始，打开命令提示符和cd到应用程序的文件夹，然后运行npm run watch来启动laravel mix，这将在我们的任何文件发生更改时编译我们的资产，或者您可以在需要自己编译资产时键入npm run dev。打开/resources/assets/js/app.js文件并对其进行更改</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="93a0" class="ln kc hu lj b fv lo lp l lq lr">Vue.component('example', require('./components/Example.vue'));</span></pre><p id="1fbc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">到</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="a7ac" class="ln kc hu lj b fv lo lp l lq lr">Vue.component('inventory', require('./components/Inventory.vue'));</span></pre><p id="dff9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这里我们用一个名为inventory的组件替换默认的示例组件，我们将<a class="ae ka" href="https://cosmicjs.com/blog/creating.In" rel="noopener ugc nofollow" target="_blank">创建这个组件。在</a>的/resources/assets/js/components文件夹中创建和<a class="ae ka" href="https://cosmicjs.com/blog/Inventory.vue" rel="noopener ugc nofollow" target="_blank"> Inventory.vue </a>文件来存放我们的组件。在新创建的文件中，复制并粘贴以下代码</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="6ef7" class="ln kc hu lj b fv lo lp l lq lr">&lt;template&gt;<br/>    &lt;div&gt;<br/>        &lt;!---- ADD LOCATION FORM --&gt;<br/>        &lt;div v-if="add_location"&gt;<br/>            &lt;button class="btn btn-primary" v-on:click="add_location=false"&gt;&lt;span class="glyphicon glyphicon-chevron-left" aria-hidden="true"&gt;&lt;/span&gt; Go back&lt;/button&gt;<br/>            &lt;div class="panel panel-default"&gt;<br/>                &lt;div class="panel-heading"&gt;Add New Location&lt;/div&gt;<br/>                &lt;div class="panel-body"&gt;<br/>                    &lt;form id="location_form" name="location"&gt;<br/>                        &lt;div class="form-group"&gt;<br/>                            &lt;label for="name"&gt;Name&lt;/label&gt;<br/>                            &lt;input type="text" class="form-control" name="title" required=""&gt;<br/>                            &lt;label for="address"&gt;Address&lt;/label&gt;<br/>                            &lt;input type="text" class="form-control" name="address" required=""&gt;<br/>                            &lt;label for="image"&gt;Image&lt;/label&gt;<br/>                            &lt;input type="file" class="form-control media" name="media"/&gt;<br/>                        &lt;/div&gt;<br/>                        &lt;button type="submit" class="btn btn-primary" :class="{disabled: isDisabled}" v-on:click.prevent="addLocation"&gt;Submit&lt;/button&gt;<br/>                    &lt;/form&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>        &lt;div v-else&gt;<br/>            &lt;!---- LOCATIONS LIST --&gt;<br/>            &lt;div v-if="unselected"&gt;<br/>                &lt;button class="btn btn-primary pull-right" v-on:click="add_location = true"&gt;&lt;span class="glyphicon glyphicon-plus" aria-hidden="true"&gt;&lt;/span&gt;Add New&lt;/button&gt;<br/>                &lt;ul class="list-group"&gt;<br/>                    &lt;button type="button" class="list-group-item location-tab text-primary" :class="{disabled: list_disable}" v-for="location in locations" v-on:click="fetchItems(location)"&gt;&lt;img v-if="location.metadata.hasOwnProperty('picture')" :src="location.metadata.picture.url"&gt;{{ location.title }} - {{ location.metadata.address}}&lt;/button&gt;<br/>                &lt;/ul&gt;<br/>            &lt;/div&gt;</span><span id="b74b" class="ln kc hu lj b fv ls lp l lq lr">            &lt;div v-else&gt;<br/>                &lt;!---- ADD ITEM FORM --&gt;<br/>                &lt;div v-if="add_item"&gt;<br/>                    &lt;button class="btn btn-primary" v-on:click="add_item=false"&gt;&lt;span class="glyphicon glyphicon-chevron-left" aria-hidden="true"&gt;&lt;/span&gt; Go back&lt;/button&gt;<br/>                    &lt;div class="panel panel-default"&gt;<br/>                        &lt;div class="panel-heading"&gt;Add New Item&lt;/div&gt;<br/>                        &lt;div class="panel-body"&gt;<br/>                            &lt;form id="item_form"&gt;<br/>                                &lt;div class="form-group"&gt;<br/>                                    &lt;label for="name"&gt;Name&lt;/label&gt;<br/>                                    &lt;input type="text" class="form-control" name="name"&gt;<br/>                                &lt;/div&gt;<br/>                                &lt;div class="form-group"&gt;<br/>                                    &lt;label for="count"&gt;Count&lt;/label&gt;<br/>                                    &lt;input type="number" class="form-control" name="count"&gt;<br/>                                &lt;/div&gt;<br/>                                &lt;div&gt;<br/>                                    &lt;label for="image"&gt;Image&lt;/label&gt;<br/>                                    &lt;input type="file" class="form-control media" name="media"/&gt;<br/>                                &lt;/div&gt;<br/>                                &lt;button type="submit" class="btn btn-primary" :class="{disabled: isDisabled}" v-on:click.prevent="addItem"&gt;Submit&lt;/button&gt;<br/>                            &lt;/form&gt;<br/>                        &lt;/div&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;</span><span id="1b0e" class="ln kc hu lj b fv ls lp l lq lr">                &lt;!---- EDIT ITEM FORM --&gt;<br/>                &lt;div v-else-if="edit_item"&gt;<br/>                    &lt;button class="btn btn-primary" v-on:click="edit_item=false"&gt;&lt;span class="glyphicon glyphicon-chevron-left" aria-hidden="true"&gt;&lt;/span&gt; Go back&lt;/button&gt;<br/>                    &lt;div class="panel panel-default"&gt;<br/>                        &lt;div class="panel-heading"&gt;Edit {{ selected_item.title }}&lt;/div&gt;<br/>                        &lt;div class="panel-body"&gt;<br/>                            &lt;form id="edit_item"&gt;<br/>                                &lt;div class="form-group"&gt;<br/>                                    &lt;label for="name"&gt;Name&lt;/label&gt;<br/>                                    &lt;input type="text" class="form-control" name="name" :value="selected_item.title"&gt;<br/>                                &lt;/div&gt;<br/>                                &lt;div class="form-group"&gt;<br/>                                    &lt;label for="count"&gt;Count&lt;/label&gt;<br/>                                    &lt;input type="number" class="form-control" name="count" :value="selected_item.metadata.count"&gt;<br/>                                &lt;/div&gt;<br/>                                &lt;button type="submit" class="btn btn-primary" :class="{disabled: isDisabled}" v-on:click.prevent="editItem"&gt;Submit&lt;/button&gt;<br/>                            &lt;/form&gt;<br/>                        &lt;/div&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>                &lt;div v-else&gt;<br/>                    &lt;!---- ITEMS LIST --&gt;<br/>                    &lt;button class="btn btn-primary" v-on:click="unselected=true"&gt;&lt;span class="glyphicon glyphicon-chevron-left" aria-hidden="true"&gt;&lt;/span&gt; Go back&lt;/button&gt;<br/>                    &lt;button class="btn btn-primary pull-right" v-on:click="add_item = true"&gt;&lt;span class="glyphicon glyphicon-plus" aria-hidden="true"&gt;&lt;/span&gt;Add New Item&lt;/button&gt;<br/>                    &lt;div class="panel panel-default"&gt;<br/>                        &lt;div class="panel-heading"&gt;{{ selected_location.title }}&lt;/div&gt;<br/>                        &lt;div class="panel-body"&gt;<br/>                            &lt;ul class="list-group"&gt;<br/>                                &lt;button type="button" class="list-group-item text-primary location-tab" :class="{disabled: isDisabled}" v-for="item in items"&gt;&lt;img v-if="item.metadata.hasOwnProperty('picture')" :src="item.metadata.picture.url"&gt;{{ item.title }} - {{ item.metadata.count }} &lt;div class="pull-right"&gt;&lt;span class="glyphicon glyphicon-pencil" aria-hidden="true" v-on:click.prevent="openEdit(item)"&gt;&lt;/span&gt;&lt;span class="glyphicon glyphicon-trash" aria-hidden="true" v-on:click.prevent="deleteItem(item)" style="padding: 0 5px;"&gt;&lt;/span&gt;&lt;/div&gt;&lt;/button&gt;<br/>                            &lt;/ul&gt;<br/>                        &lt;/div&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;</span><span id="5078" class="ln kc hu lj b fv ls lp l lq lr">&lt;/template&gt;</span><span id="7d7b" class="ln kc hu lj b fv ls lp l lq lr">&lt;script&gt;<br/>    export default {<br/>        mounted() {<br/>            var self = this;<br/>            //If location slug was passed show items for that location<br/>            if(this.message)<br/>            {<br/>                swal(this.message);<br/>            }<br/>            if (this.locationSlug)<br/>            {<br/>                this.unselected = false;<br/>                //find location with slug<br/>                var item = this.locations.filter(function (obj)<br/>                {<br/>                    return obj.slug === self.locationSlug;<br/>                });</span><span id="102e" class="ln kc hu lj b fv ls lp l lq lr">                this.selected_location = item[0];<br/>                this.fetchItems(this.selected_location);<br/>            }<br/>        },<br/>        props: ['initial-locations', 'slug', 'location-slug','message'],<br/>        data: function () {<br/>            return {<br/>                edit_item: false,<br/>                locations: this.initialLocations,<br/>                isDisabled: false,<br/>                list_disable: false,<br/>                unselected: true,<br/>                items: [],<br/>                add_location: false,<br/>                selected_location: [],<br/>                selected_item: [],<br/>                add_item: false<br/>            };<br/>        },<br/>        methods: {<br/>            fetchItems(location)<br/>            {<br/>                //disable the list and fetch items from laravel<br/>                var self = this;<br/>                this.list_disable = true;<br/>                axios.get('items/' + location.slug).then(response =&gt; {<br/>                    if (response.data.constructor === Array)<br/>                    {<br/>                        self.items = (response.data);<br/>                        self.selected_location = location;<br/>                        self.unselected = false;<br/>                    } else {<br/>                        self.selected_location = location;<br/>                        self.items = [];<br/>                        self.unselected = false;<br/>                    }<br/>                    self.list_disable = false;</span><span id="5e14" class="ln kc hu lj b fv ls lp l lq lr">                });<br/>            },<br/>            addLocation()<br/>            {<br/>                //disable button<br/>                this.isDisabled = true;<br/>                var image = '';<br/>                var form = $("#location_form")[0];<br/>                var data = new FormData(form);<br/>                //Check if image is selected then upload image first<br/>                if ($("#location_form .media").val() !== '')<br/>                {<br/>                    //delete X-csrf-token default header as it is not accepted by cosmic api<br/>                    delete axios.defaults.headers.common["X-CSRF-TOKEN"];<br/>                    axios.post('https://api.cosmicjs.com/v1/' + this.slug + '/media', data).then(function (response)<br/>                    {<br/>                        //set x-csrf-token again<br/>                        window.axios.defaults.headers.common['X-CSRF-TOKEN'] = window.Laravel.csrfToken;<br/>                        //get image name, append to formdata and send form data to laravel to add location<br/>                        image = response.data.media.name;<br/>                        data.set('image', image);<br/>                        axios.post('locations/new', data).then(response =&gt; {<br/>                            location.reload(true);<br/>                        });<br/>                    });<br/>                } else {<br/>                    window.axios.defaults.headers.common['X-CSRF-TOKEN'] = window.Laravel.csrfToken;<br/>                    //send form data to laravel without image<br/>                    axios.post('locations/new', data).then(response =&gt; {<br/>                        location.reload(true);<br/>                    });<br/>                }</span><span id="c798" class="ln kc hu lj b fv ls lp l lq lr">            },<br/>            //set selected item and open edit item section<br/>            openEdit(item)<br/>            {<br/>                this.selected_item = item;<br/>                this.edit_item = true;<br/>            },<br/>            addItem() {<br/>                var self = this;<br/>                this.isDisabled = true;<br/>                var form = $('#item_form')[0];<br/>                var data = new FormData(form);<br/>                data.append('location', this.selected_location._id);<br/>                //Check if image is selected the upload image first<br/>                if ($("#item_form .media").val() !== '')<br/>                {<br/>                    //delete X-csrf-token default header as it is not allowed by cosmic api and post<br/>                    delete axios.defaults.headers.common["X-CSRF-TOKEN"];<br/>                    axios.post('https://api.cosmicjs.com/v1/' + this.slug + '/media', data).then(function (response)<br/>                    {<br/>                        //set x-csrf-token again<br/>                        window.axios.defaults.headers.common['X-CSRF-TOKEN'] = window.Laravel.csrfToken;<br/>                        //get image name, append to formdata and send form data to laravel to add location<br/>                        var image = response.data.media.name;<br/>                        data.set('image', image);<br/>                        axios.post('items/new', data).then(response =&gt; {<br/>                            //refresh page BUT pass location_slug, which then makes the app load into the passed location<br/>                            window.location.href = "./" + self.selected_location.slug;<br/>                        });<br/>                    });<br/>                } else {<br/>                    //add header back after post<br/>                    window.axios.defaults.headers.common['X-CSRF-TOKEN'] = window.Laravel.csrfToken;<br/>                    //send form data to laravel without image<br/>                    axios.post('items/new', data).then(response =&gt; {<br/>                        window.location.href = "./" + self.selected_location.slug;<br/>                    });<br/>                }<br/>            },<br/>            editItem()<br/>            {<br/>                //edit item, by sending data to IndexController's editItem() function<br/>                var self = this;<br/>                var form = $("#edit_item")[0];<br/>                var data = new FormData(form);<br/>                this.isDisabled = true;<br/>                data.append('slug', this.selected_item.slug);<br/>                if(this.selected_item.metadata.hasOwnProperty('picture')){<br/>                    data.append('image',this.selected_item.metafields[0].value);<br/>                }<br/>                <br/>                data.append('location_id', this.selected_location._id);<br/>                axios.post('items/edit', data).then(response =&gt; {<br/>                    //refresh page BUT pass location_slug, which then makes the app load into the passed location<br/>                    window.location.href = "./" + self.selected_location.slug;<br/>                });<br/>            },<br/>            deleteItem(item)<br/>            {<br/>                var self = this;<br/>                swal({<br/>                    title: 'Are you sure?',<br/>                    text: 'You will not be able to recover this item!',<br/>                    type: 'warning',<br/>                    showCancelButton: true,<br/>                    confirmButtonText: 'Yes, delete it!',<br/>                    cancelButtonText: 'Nope, still need it'<br/>                }).then(function(){<br/>                    axios.get('item/' + item.slug + '/delete').then(response =&gt; {<br/>                    window.location.href = "./" + self.selected_location.slug;<br/>                });<br/>                })<br/>                <br/>            }</span><span id="12d8" class="ln kc hu lj b fv ls lp l lq lr">        }<br/>    }<br/>&lt;/script&gt;</span></pre><h1 id="9db3" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">最大的问题是，这里(很多)发生了什么？</h1><p id="60b3" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">在我们的vue组件中发生了很多事情，因为这是大部分前端所在的地方，为了保持教程的简单性，将陈述部分和变量的主要目标，代码中的注释也解释了该部分代码要完成的任务</p><ol class=""><li id="7e16" class="lt lu hu je b jf jg jj jk jn mh jr mi jv mj jz ly lz ma mb dt translated">我们首先设置几个布尔值(编辑项，添加项，添加位置，未选择)，这些有助于在变量改变时切换应用程序的视图，例如，当编辑项为真时，视图切换到编辑项形式</li><li id="5e46" class="lt lu hu je b jf mc jj md jn me jr mf jv mg jz ly lz ma mb dt translated">isDisable和list_disable用于禁用一些ui元素，如按钮，方法是将它们的值绑定到bootstrap按钮的“disabled”类</li><li id="6598" class="lt lu hu je b jf mc jj md jn me jr mf jv mg jz ly lz ma mb dt translated">mounted函数中的代码只是检查是否传递了一个location slug，如果传递了，就将视图切换到该位置的项目</li><li id="6279" class="lt lu hu je b jf mc jj md jn me jr mf jv mg jz ly lz ma mb dt translated">所创建的方法在采取动作时执行调用，它们的主要逻辑在注释中陈述</li><li id="3b0b" class="lt lu hu je b jf mc jj md jn me jr mf jv mg jz ly lz ma mb dt translated">我们用axios给laravel后端打电话</li><li id="63a8" class="lt lu hu je b jf mc jj md jn me jr mf jv mg jz ly lz ma mb dt translated">对于图像上传，我们首先检查是否选择了一个文件，首先上传选择的文件，然后创建一个新项目，将其图片元数据设置为返回的图片名称。</li></ol><h1 id="b7dc" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">注意</h1><ol class=""><li id="c40e" class="lt lu hu je b jf kz jj la jn lv jr lw jv lx jz ly lz ma mb dt translated">确保在做出更改后成功编译了资产，如果您想要手动编译，只需运行npm run production以编译到production in模式。</li><li id="7e02" class="lt lu hu je b jf mc jj md jn me jr mf jv mg jz ly lz ma mb dt translated">我们创建一个self变量，并在大多数函数的开始将它设置为this，因为如果我们在一些嵌套函数调用中使用它，我们就开始失去this变量的上下文。更多信息可以在这个堆栈溢出帖子中找到</li></ol><h1 id="7c6e" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">设置铲斗段塞</h1><p id="ca62" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">现在我们要设置我们的桶蛞蝓。我们希望能够通过运行artisan命令来设置它，所以运行php artisan make:命令SetSlug。现在导航到app/console/Commands/SetSlug，复制并粘贴到其中:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="c932" class="ln kc hu lj b fv lo lp l lq lr">&lt;?php</span><span id="38c9" class="ln kc hu lj b fv ls lp l lq lr">namespace App\Console\Commands;</span><span id="253f" class="ln kc hu lj b fv ls lp l lq lr">use Illuminate\Console\Command;</span><span id="5270" class="ln kc hu lj b fv ls lp l lq lr">class SetSlug extends Command {</span><span id="4e7d" class="ln kc hu lj b fv ls lp l lq lr">    /**<br/>     * The name and signature of the console command.<br/>     *<br/>     * @var string<br/>     */<br/>    protected $signature = 'bucket {slug} {read?} {write?}';</span><span id="cea5" class="ln kc hu lj b fv ls lp l lq lr">    /**<br/>     * The console command description.<br/>     *<br/>     * @var string<br/>     */<br/>    protected $description = 'Set the bucket slug';</span><span id="17df" class="ln kc hu lj b fv ls lp l lq lr">    /**<br/>     * Create a new command instance.<br/>     *<br/>     * @return void<br/>     */<br/>    protected $files;<br/>    protected $read;<br/>    protected $write;</span><span id="aae1" class="ln kc hu lj b fv ls lp l lq lr">    public function __construct(\Illuminate\Filesystem\Filesystem $files) {<br/>        parent::__construct();<br/>        $this-&gt;files = $files;<br/>        <br/>    }</span><span id="1a09" class="ln kc hu lj b fv ls lp l lq lr">    /**<br/>     * Execute the console command.<br/>     *<br/>     * @return mixed<br/>     */<br/>    public function handle() {<br/>        $this-&gt;read = $this-&gt;argument('slug');<br/>        $this-&gt;write = $this-&gt;argument('slug');<br/>        $config_path = base_path() . "/config/cosmic.php";<br/>        $content = "&lt;?php\n\treturn [\n\t\t'slug' =&gt; '" . $this-&gt;argument('slug') . "',\n\t\t"<br/>                . "'read' =&gt; '" . $this-&gt;argument('read')."',\n\t\t"<br/>                ."'write' =&gt; '" . $this-&gt;argument('write')."',\n\t];";<br/>        $this-&gt;files-&gt;put($config_path, $content);<br/>        echo "Bucket variables set";<br/>    }</span><span id="849e" class="ln kc hu lj b fv ls lp l lq lr">}</span></pre><p id="9631" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们正在做的是在config/cosmic.php中打开/创建一个配置文件，并保存命令中的变量，现在可以用PHP artisan bucket bucket _ slug read _ key write _ key设置bucket slug。现在在您的app/console/kernel.php中的命令部分用</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="a4bb" class="ln kc hu lj b fv lo lp l lq lr">protected $commands = [<br/>        Commands\SetSlug::class<br/>    ];</span></pre><h1 id="40ee" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">结论</h1><p id="616f" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我们能够使用vue、cosmic Js php库、一点点guzzle和许多axios来创建和更新项目。你可以随意修改代码，做出你自己的修改，删除项目，移动到新的位置，你能想到的，记住我们只是触及了Laravel使用Cosmic JS的惊人之处。所以继续努力，创造一些令人惊叹的东西。</p><div class="le lf lg lh fq ab cb"><figure class="mk iv ml mm mn mo mp paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mk iv ml mm mn mo mp paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mk iv ml mm mn mo mp paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mq mr ms"><p id="f922" class="jc jd mt je b jf jg jh ji jj jk jl jm mu jo jp jq mv js jt ju mw jw jx jy jz hn dt translated"><a class="ae ka" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae ka" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae ka" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae ka" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jc jd mt je b jf jg jh ji jj jk jl jm mu jo jp jq mv js jt ju mw jw jx jy jz hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ka" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ka" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="le lf lg lh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mx"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>