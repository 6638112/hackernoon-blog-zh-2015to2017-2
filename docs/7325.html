<html>
<head>
<title>How We Started Sharing Code Components Between Projects as a Team</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们如何开始作为一个团队在项目之间共享代码组件</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-we-started-sharing-components-as-a-team-d863657afaca?source=collection_archive---------4-----------------------#2017-10-24">https://medium.com/hackernoon/how-we-started-sharing-components-as-a-team-d863657afaca?source=collection_archive---------4-----------------------#2017-10-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="7eb8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">我们如何作为一个团队，使用一个名为</em> <a class="ae jq" href="https://bitsrc.io" rel="noopener ugc nofollow" target="_blank"> <em class="jp"> Bit </em> </a> <em class="jp">的工具，在项目之间共享和同步我们的组件和模块的故事。</em></p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff jr"><img src="../Images/8defc20e053b9aac1fe6254de3d5bf5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L6CQpXzbvkfzNQKIVCackw.png"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">How we started sharing code as a team</figcaption></figure><p id="d4ab" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">共享代码<a class="ae jq" rel="noopener" href="/@jeffwhelpley/the-problem-with-shared-code-124a20fc3d3b">硬</a>。即使对于使用可重用UI组件的团队，如<a class="ae jq" href="https://hackernoon.com/tagged/react" rel="noopener ugc nofollow" target="_blank"> React </a>组件，<a class="ae jq" rel="noopener" href="/walmartlabs/how-to-achieve-reusability-with-react-components-81edeb7fb0e0#.brpw2m2yu">实现真正的可重用性</a>也是一个挑战。</p><p id="12fc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在过去的两年中，我们的团队发展到包括超过15名开发人员，他们从事多个项目。此外，我们正在使用Node.js微服务和React UI组件构建一个<a class="ae jq" href="https://bitsrc.io" rel="noopener ugc nofollow" target="_blank"> web应用</a>。</p><p id="5a6e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">随着每个新特性和每个新成员加入我们的团队，我们发现在我们的项目之间共享代码和保持代码同步变得更加困难。为了避免重复，我们考虑了从子模到Lerna的所有解。</p><p id="df73" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然而，诸如发布开销、可发现性和可维护性困难等问题阻碍了我们成功地大规模共享代码。</p><p id="2e8e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，我们决定构建自己的解决方案；一个名为Bit 的<a class="ae jq" href="https://hackernoon.com/tagged/open-source" rel="noopener ugc nofollow" target="_blank">开源</a>项目<a class="ae jq" href="https://bitsrc.io" rel="noopener ugc nofollow" target="_blank">，它将组件转化为构建模块，我们的团队可以在我们的项目之间组织、共享和同步。这是我们学到的东西。</a></p><div class="kh ki fm fo kj kk"><a href="https://bitsrc.io" rel="noopener  ugc nofollow" target="_blank"><div class="kl ab ej"><div class="km ab kn cl cj ko"><h2 class="bd hv fv z el kp eo ep kq er et ht dt translated">用代码组件进行位共享和构建</h2><div class="kr l"><h3 class="bd b fv z el kp eo ep kq er et ek translated">Bit使用更小的组件构建软件变得有趣而简单，与你的团队共享它们，并在你的…</h3></div><div class="ks l"><p class="bd b gc z el kp eo ep kq er et ek translated">bitsrc.io</p></div></div><div class="kt l"><div class="ku l kv kw kx kt ky kb kk"/></div></div></a></div><h1 id="6b2e" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">寻找解决方案</h1><p id="6ef4" class="pw-post-body-paragraph ir is hu it b iu lx iw ix iy ly ja jb jc lz je jf jg ma ji jj jk mb jm jn jo hn dt translated">起初，我们考虑将我们不同的组件和模块作为一个微包库发布给NPM。然而，在几十个回购中发布和维护变更的开销让我们很快放弃了这个选项。</p><p id="f42d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们还考虑了Lerna ,它非常适合从一个库发布多个包。这个解决方案对我们来说有两个主要问题。</p><p id="4373" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">第一个事实是，为了共享代码，我们必须将我们的代码库重构为几个monorepos。虽然monorepo对于某些用例来说很棒，但我们需要一种更好的方法来共享代码，而不需要强制进行重构。</p><p id="6538" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">第二个问题是，我们仍然必须手动维护repo中的许多包，包括它们的配置和复杂的依赖树。每个变更仍然意味着在原始回购协议(及其所有者)的不同包之间进行变更。</p><p id="aabe" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">由于共享库也不是一个很好的解决方案，我们开始意识到我们需要一个更好的方法来在我们的项目之间共享我们的代码。</p><p id="c0b2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们认为这个解决方案是我们组件的“iTunes播放列表”,这将使从不同项目中发现、共享和开发它们变得容易，同时保持我们代码库之间的变化同步。</p><p id="585c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以，我们决定建造<a class="ae jq" href="https://bitsrc.io" rel="noopener ugc nofollow" target="_blank">钻头</a>。这是它的工作原理。</p><h1 id="e2fc" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">在项目之间直接共享组件</h1><p id="2320" class="pw-post-body-paragraph ir is hu it b iu lx iw ix iy ly ja jb jc lz je jf jg ma ji jj jk mb jm jn jo hn dt translated"><a class="ae jq" href="https://bitsrc.io" rel="noopener ugc nofollow" target="_blank"> Bit的</a>概念相当简单。在Bit之前，我们必须为我们想要共享的每一段代码创建一个新的存储库并发布一个新的包。对软件包进行更改也必须通过回购。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff mc"><img src="../Images/cf05e1382a4374336d5e2cde768c5edd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Qnouzyubt4aGswZb."/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Splitting repos just to share code</figcaption></figure><p id="361f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有了Bit，你就不用拆分回购来共享代码了。你也不必重组现有项目的代码库(<a class="ae jq" href="https://github.com/teambit/movie-app" rel="noopener ugc nofollow" target="_blank">例子</a>)。</p><p id="f1e6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">相反，您可以将Bit指向我们想要共享的任何repo的部分，使用它来自动隔离它们(Bit将定义它们的文件/包依赖树)，并将它们共享到一个称为Scope的远程位置(<a class="ae jq" href="https://bitsrc.io/bit/movie-app" rel="noopener ugc nofollow" target="_blank">示例</a>)。</p><p id="3267" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这根本不会改变现有repo的结构，因为Bit将定义依赖图，并且所有的<a class="ae jq" href="https://bitsrc.io/bit/envs" rel="noopener ugc nofollow" target="_blank">构建/测试环境</a>可以在共享之前简单地添加到组件中，所以只需要几秒钟。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff md"><img src="../Images/a2d6a192a5d01807777cb3f31f8fee20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v80uUezNcVr0Ztqx."/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Sharing components with Bit</figcaption></figure><p id="fe53" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从那里，这些共享组件可以很容易地发现和安装在其他repos使用NPM(和纱线)。</p><p id="08ab" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当需要对组件进行更改时，您可以简单地使用Bit将它的实际源代码<code class="eh me mf mg mh b">import</code>到您正在工作的任何项目中，进行所需的更改，并共享新版本(到相同的范围或新的范围)。</p><p id="e8f8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当您将更改的代码共享回您的范围时，您甚至可以<code class="eh me mf mg mh b">eject</code>它再次成为您项目的包依赖项。</p><p id="8ad1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当一个组件被改变时，Bit通过一个事件驱动的可定制的更新策略(仍在工作中)保持它在项目间的同步。我可以从我的团队成员那里建议和接收修改，看看测试是否仍然通过，并轻松地处理依赖关系，对我的代码库进行巨大的更改。</p><h1 id="e547" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">具有反应组分例子</h1><p id="7e80" class="pw-post-body-paragraph ir is hu it b iu lx iw ix iy ly ja jb jc lz je jf jg ma ji jj jk mb jm jn jo hn dt translated">例如，<a class="ae jq" href="https://github.com/teambit/movie-app" rel="noopener ugc nofollow" target="_blank">这里有一个带有React电影应用组件的应用</a>。使用Bit(并且不创建新的回购)，我们将其组件共享到<a class="ae jq" href="https://github.com/teambit/movie-app" rel="noopener ugc nofollow" target="_blank">这个范围</a>。</p><p id="be85" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">正如你所看到的，它包含了一个<a class="ae jq" href="https://github.com/teambit/movie-app/tree/scss/src/components/hero" rel="noopener ugc nofollow" target="_blank">英雄组件</a>，我们团队中的一些人可能想在不同的项目中使用它。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff mi"><img src="../Images/88e689e11b77d481ddaf6eb1eda21c9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NyxY7HYrtBWxoFzCPmod0w.png"/></div></div></figure><p id="6560" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">通过内置的搜索引擎和组件的可视化UI特性，从渲染到测试结果(独立运行)和自动解析的文档和示例，可发现性得到了增强。</p><p id="4403" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">任何团队成员都可以很容易地找到这个组件，在他们的项目中使用，在项目中进行必要的更改，并在他们的repos之间同步它们。我们自己已经使用了500多个组件和模块。</p><h1 id="81a1" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">结论</h1><figure class="js jt ju jv fq jw"><div class="bz el l di"><div class="mj mk l"/></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">A demo of Bit (without the NPM workflow)</figcaption></figure><p id="b306" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Bit 诞生于我们多年来渴望用更好的模块化来构建软件的经验。我们的团队使用它已经超过10个月了，每天都有更多的团队和库使用它。</p><p id="39eb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用Bit，我们能够有效地消除回购和项目之间共享代码的开销。我们使我们的共享代码对我们的团队来说是有组织的和可发现的，减少了维护的repos数量，并从多个方面轻松地合作开发共享代码。</p><p id="b8ca" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在投入使用几个月后，Bit帮助我们创建了一个统一的、有组织的组件知识库，并在项目间共享它们。</p><p id="7226" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是一个社区协作项目，旨在使代码共享变得简单而有效。欢迎您来<a class="ae jq" href="https://bitsrc.io" rel="noopener ugc nofollow" target="_blank">试用</a>，建议反馈和<a class="ae jq" href="https://github.com/teambit/bit" rel="noopener ugc nofollow" target="_blank">帮帮忙</a>！</p><div class="kh ki fm fo kj kk"><a href="https://bitsrc.io" rel="noopener  ugc nofollow" target="_blank"><div class="kl ab ej"><div class="km ab kn cl cj ko"><h2 class="bd hv fv z el kp eo ep kq er et ht dt translated">用代码组件进行位共享和构建</h2><div class="kr l"><h3 class="bd b fv z el kp eo ep kq er et ek translated">Bit使用更小的组件构建软件变得有趣而简单，与你的团队共享它们，并在你的…</h3></div><div class="ks l"><p class="bd b gc z el kp eo ep kq er et ek translated">bitsrc.io</p></div></div><div class="kt l"><div class="ku l kv kw kx kt ky kb kk"/></div></div></a></div></div><div class="ab cl ml mm hc mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="hn ho hp hq hr"><h1 id="adff" class="kz la hu bd lb lc ms le lf lg mt li lj lk mu lm ln lo mv lq lr ls mw lu lv lw dt translated">了解更多信息</h1><div class="kh ki fm fo kj kk"><a href="https://blog.bitsrc.io/monorepo-architecture-simplified-with-bit-and-npm-b1354be62870" rel="noopener  ugc nofollow" target="_blank"><div class="kl ab ej"><div class="km ab kn cl cj ko"><h2 class="bd hv fv z el kp eo ep kq er et ht dt translated">比特和NPM让Monorepos变得更简单</h2><div class="kr l"><h3 class="bd b fv z el kp eo ep kq er et ek translated">如何利用比特+ NPM去单一回购没有开销？</h3></div><div class="ks l"><p class="bd b gc z el kp eo ep kq er et ek translated">blog.bitsrc.io</p></div></div><div class="kt l"><div class="mx l kv kw kx kt ky kb kk"/></div></div></a></div><div class="kh ki fm fo kj kk"><a href="https://blog.bitsrc.io/how-to-easily-share-react-components-between-projects-3dd42149c09" rel="noopener  ugc nofollow" target="_blank"><div class="kl ab ej"><div class="km ab kn cl cj ko"><h2 class="bd hv fv z el kp eo ep kq er et ht dt translated">如何在项目和应用程序之间共享React UI组件</h2><div class="kr l"><h3 class="bd b fv z el kp eo ep kq er et ek translated">如何使用Bit在团队的所有项目和应用程序之间轻松共享和同步React UI组件。</h3></div><div class="ks l"><p class="bd b gc z el kp eo ep kq er et ek translated">blog.bitsrc.io</p></div></div><div class="kt l"><div class="my l kv kw kx kt ky kb kk"/></div></div></a></div><div class="kh ki fm fo kj kk"><a href="https://blog.bitsrc.io/5-tools-for-faster-development-in-react-676f134050f2" rel="noopener  ugc nofollow" target="_blank"><div class="kl ab ej"><div class="km ab kn cl cj ko"><h2 class="bd hv fv z el kp eo ep kq er et ht dt translated">在React中加快开发的5个工具</h2><div class="kr l"><h3 class="bd b fv z el kp eo ep kq er et ek translated">加速React应用程序开发的5个工具，侧重于组件。</h3></div><div class="ks l"><p class="bd b gc z el kp eo ep kq er et ek translated">blog.bitsrc.io</p></div></div><div class="kt l"><div class="mz l kv kw kx kt ky kb kk"/></div></div></a></div><figure class="js jt ju jv fq jw"><div class="bz el l di"><div class="na mk l"/></div></figure></div></div>    
</body>
</html>