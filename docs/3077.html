<html>
<head>
<title>3 Insanely Easy Changes You Can Make To Clean Up Your Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你可以做3个非常简单的改变来清理你的代码</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/3-insanely-easy-changes-you-can-make-to-clean-up-your-code-4c9f6e2b4d80?source=collection_archive---------2-----------------------#2017-03-11">https://medium.com/hackernoon/3-insanely-easy-changes-you-can-make-to-clean-up-your-code-4c9f6e2b4d80?source=collection_archive---------2-----------------------#2017-03-11</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/dddcf6fdfce5246c22a3f7b1b227cb30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z-wD0XNg6lZqski9qxTjJw.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Photo by <a class="ae jg" href="https://unsplash.com/@maicoamorim" rel="noopener ugc nofollow" target="_blank">Maico Amorim</a></figcaption></figure><p id="4608" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">一个<a class="ae jg" href="https://hackernoon.com/tagged/code" rel="noopener ugc nofollow" target="_blank">代码</a>重构总是给我一种成就感。尽管主要的重构是最令人满意的，但是每个<a class="ae jg" href="https://hackernoon.com/tagged/project" rel="noopener ugc nofollow" target="_blank">项目</a>并不总是保证它们。为了提高代码可读性，我对我的所有项目<em class="kf">进行了3次快速简单的重构:</em></p><h2 id="952d" class="kg kh hu bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la dt translated">1.清除格式</h2><p id="d478" class="pw-post-body-paragraph jh ji hu jj b jk lb jm jn jo lc jq jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">代码的整体格式使得快速导航到感兴趣的区域成为可能。一致的缩进、换行符和模式有助于程序员浏览大块的代码。以下面的草率格式化的代码为例:</p><pre class="lg lh li lj fq lk ll lm ln aw lo dt"><span id="d586" class="kg kh hu ll b fv lp lq l lr ls">Inventory inventory = new Inventory();<br/>for (int i = 0; i &lt; cars.Count; i++){<br/>    inventory.Cars.Add(cars[i]);<br/>    <br/>    var owner = owners.Where(x =&gt; x.VIN == cars[i].VIN).OrderByDescending(x =&gt; x.PurchaseDate).FirstOrDefault();</span><span id="280c" class="kg kh hu ll b fv lt lq l lr ls">inventory.PreviousOwners.Add(new Owner { VIN = cars[i].VIN,<br/>                                        Name = owner.Name});<br/>}</span></pre><p id="e651" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">和这个比较一下:</p><pre class="lg lh li lj fq lk ll lm ln aw lo dt"><span id="facc" class="kg kh hu ll b fv lp lq l lr ls">Inventory inventory = new Inventory();</span><span id="aef6" class="kg kh hu ll b fv lt lq l lr ls">for (int i = 0; i &lt; cars.Count; i++)<br/>{<br/>    inventory.Cars.Add(cars[i]);<br/>    <br/>    var owner = owners.Where(x =&gt; x.VIN == cars[i].VIN)<br/>                        .OrderByDescending(x =&gt; x.PurchaseDate)<br/>                        .FirstOrDefault();</span><span id="eb68" class="kg kh hu ll b fv lt lq l lr ls">    inventory.PreviousOwners.Add(new Owner <br/>                                     {<br/>                                        VIN = cars[i].VIN,<br/>                                        Name = owner.Name<br/>                                     });<br/>}</span></pre><p id="ebf6" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">上面的第二个例子一致地缩进行，添加新行，并遵循一致的编码模式。这使得快速浏览代码变得很容易。</p><p id="b5e0" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">书籍有通过格式化定义的章节、标题和段落，这样很容易一眼就能找到需要的内容——格式化代码也使查找内容变得容易。</p><h2 id="7767" class="kg kh hu bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la dt translated">2.重命名类、方法和变量</h2><p id="d4f4" class="pw-post-body-paragraph jh ji hu jj b jk lb jm jn jo lc jq jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">类、方法和变量的命名应该有助于程序员理解代码中发生了什么。对象的范围越小，越允许使用较短的名字(比如在只有一两行的循环中用“I”作为计数器)。</p><p id="0e94" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在编写程序的“初稿”时，很容易使用无信息的名字，但是使用想到的名字并不总是最好的选择。看一下下面的例子:</p><pre class="lg lh li lj fq lk ll lm ln aw lo dt"><span id="3fe0" class="kg kh hu ll b fv lp lq l lr ls">public IEnumerable&lt;string&gt; GetData(int year)<br/>{<br/>    var result = CallApi("/Cars", year); </span><span id="153b" class="kg kh hu ll b fv lt lq l lr ls">    IEnumerable&lt;string&gt; output = new IEnumerable&lt;string&gt;();</span><span id="e05a" class="kg kh hu ll b fv lt lq l lr ls">    foreach(var c in result)<br/>    {<br/>        output.Add(c.Make);<br/>    }<br/>}</span></pre><p id="5281" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">对比:</p><pre class="lg lh li lj fq lk ll lm ln aw lo dt"><span id="bed3" class="kg kh hu ll b fv lp lq l lr ls">public IEnumerable&lt;string&gt; RetrieveCarMakes(int year)<br/>{<br/>    var inventory = CallApi("/Cars", year);</span><span id="854b" class="kg kh hu ll b fv lt lq l lr ls">    IEnumerable&lt;string&gt; carMakes = new IEnumerable&lt;string&gt;();<br/>    <br/>    foreach(var car in inventory)<br/>    {<br/>        carMakes.Add(car.Make);<br/>    }<br/>}</span></pre><p id="5380" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">使用有意义的名字会让其他人(或者你的未来)更容易理解你的代码在做什么。</p><h2 id="aede" class="kg kh hu bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la dt translated">3.拆分长表达式</h2><p id="d435" class="pw-post-body-paragraph jh ji hu jj b jk lb jm jn jo lc jq jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">当您进入代码编写的最佳状态时，很容易将命令链接在一起或使用单行语法来加快编写速度。很多时候，一天后我回头看我的代码，我会看到类似这样的长表达式。看看这两行表达式:</p><pre class="lg lh li lj fq lk ll lm ln aw lo dt"><span id="ce35" class="kg kh hu ll b fv lp lq l lr ls">bool hasHighSaleProbability = (daysOnLot &lt; 60) ? true : (color == "Red" ? true : false);</span><span id="987b" class="kg kh hu ll b fv lt lq l lr ls">var highSaleProbabilityVehicles = Inventory.Where(x =&gt; x.DaysOnLot &lt; 60 or x.Color == "Red").Select(x =&gt; new { Make = x.Make, Model = x.Model, Year = x.Year }).Distinct().Select(x =&gt; new RecentInventoryView { YearDropdown = new SelectListItem { Text = x.Year, Value = x.Year }, MakeModelDropdown = new SelectListItem { Text = x.Make + " " + x.Model, Value = x.Make + " " + x.Model } });</span></pre><p id="8032" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">与这个被分成多行的表达式相比:</p><pre class="lg lh li lj fq lk ll lm ln aw lo dt"><span id="a031" class="kg kh hu ll b fv lp lq l lr ls">bool hasHighSaleProbability = false;</span><span id="2897" class="kg kh hu ll b fv lt lq l lr ls">if (daysOnLot &lt; 60 || color == "Red")<br/>{<br/>    hasHighSaleProbability = true;<br/>}</span><span id="0349" class="kg kh hu ll b fv lt lq l lr ls">var distinctMakesModelsYears = Inventory<br/>   .Where(x =&gt; x.DaysOnLot &lt; 60 or x.Color == "Red")<br/>   .Select(x =&gt; new <br/>   { <br/>    Make = x.Make, <br/>    Model = x.Model, <br/>    Year = x.Year <br/>   })<br/>   .Distinct()<br/>   .ToList();</span><span id="313e" class="kg kh hu ll b fv lt lq l lr ls">var recentInventoryView = distinctMakesModelsYears<br/>    .Select(x =&gt; new RecentInventoryView <br/>    { <br/>     YearDropdown = new SelectListItem <br/>     { <br/>      Text = x.Year, <br/>      Value = x.Year <br/>     }, <br/>     MakeModelDropdown = new SelectListItem <br/>     { <br/>      Text = x.Make + " " + x.Model, <br/>      Value = x.Make + " " + x.Model <br/>     } <br/>    });</span></pre><p id="e52b" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">尽管第一段代码在技术上更短，行数更少，但它几乎不可读。第二个代码片段分解了if逻辑，并将所有链接的方法分解成更多的逻辑变量。结果呢？更容易理解的代码逻辑。</p></div><div class="ab cl lu lv hc lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hn ho hp hq hr"><p id="9663" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">你有什么经常做的“快速重构”吗？请在下面的评论中分享！</p><div class="lg lh li lj fq ab cb"><figure class="mb iv mc md me mf mg paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mb iv mc md me mf mg paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mb iv mc md me mf mg paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mh mi mj"><p id="f922" class="jh ji kf jj b jk jl jm jn jo jp jq jr mk jt ju jv ml jx jy jz mm kb kc kd ke hn dt translated"><a class="ae jg" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jg" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jg" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae jg" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jh ji kf jj b jk jl jm jn jo jp jq jr mk jt ju jv ml jx jy jz mm kb kc kd ke hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jg" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jg" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="lg lh li lj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="lg lh li lj fq iv"><div class="bz el l di"><div class="mo mp l"/></div></figure></div></div>    
</body>
</html>