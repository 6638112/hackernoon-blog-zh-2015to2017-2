<html>
<head>
<title>When it comes to debugging, believe no one.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">说到调试，相信没有人。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/when-it-comes-to-debugging-believe-no-one-5d6d5bb6c333?source=collection_archive---------17-----------------------#2017-03-30">https://medium.com/hackernoon/when-it-comes-to-debugging-believe-no-one-5d6d5bb6c333?source=collection_archive---------17-----------------------#2017-03-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="121b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当你写软件时，调试是一项你必须使用的技能，但是需要一种独特的不同类型的思维方式。软件工程(对于大多数代码)主要是面向过程的，调试通常是非线性的，看起来像是面向直觉的。但是有<em class="jp">就有</em>的过程。</p><p id="08b0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我在调试中的第一条规则是:<strong class="it hv">不要相信任何人。</strong></p><p id="7695" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当你听到另一个开发人员一直在调试一些没有用的东西时，你很容易遵循一个错误的假设，他肯定<br/>“错误在我们如何做foobar，所以我们只需要改变它以正确编码”或“这是这两件事的竞争条件”或“这是导致问题的代码，我只是还没有找到它”。有多少次我因为相信他人并采纳他们关于代码如何工作或bug的根本原因的假设而在错误的道路上花费时间而被咬？</p><p id="f14a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，我唯一的问题是:“这个bug是如何出现的？”</p><p id="4426" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">给我根栈跟踪，重现它的步骤，bug的截图，日志——不管它是如何出现的。这就是我想要的。</p><p id="ac9e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">那我就从头开始，没有假设。</p><p id="a632" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">不要忽略堆栈痕迹</strong>。在调试时，堆栈跟踪是最好的东西之一。它直接告诉你错误出现在代码的哪个位置。然而，令我惊讶的是，有这么多开发人员忽略了堆栈跟踪的细节。</p><p id="f33b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先从最近的一帧开始，仔细分析那一行代码。许多代码行都在做不止一件事情，处理不止一条数据。用调试器(或printf语句)确认您对代码和数据状态的假设；))，并将其与您认为<em class="jp">应该如何</em>工作进行比较。</p><p id="52fd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">排除错误在堆栈帧的逻辑或数据中的可能性(或确认它)，然后上移一帧并重复该过程，直到找到导致错误的数据或逻辑的根本原因。</p><p id="3c4f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">从数据开始，而不是大理论。这是调试新手经常出错的地方。如果你没有一个干净的崩溃或堆栈跟踪，这是非常诱人的开始制定大理论，为什么事情会出错。当您调试性能问题、竞争条件等问题时，可能会发生这种情况。</strong></p><p id="54f3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">示例:“CardProcessor模块中的代码很乱，因为我知道在我单击按钮的某个时刻会用到它，所以它肯定在那里。”“它慢的原因是因为写入磁盘很慢，所以它必须是我们在FileWriter包中写入文件的位置”。</p><p id="b9ac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这里的危险是在错误的道路上浪费时间。你怎么知道什么理论是对的，什么是错的？</p><p id="284a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">了解你的工具。</strong>像这样的问题，往往人们会忽略有价值的工具。你需要工具给你数据来形成好的理论。如果您正在调试C/C++，您必须知道如何将gdb附加到核心文件。如果您正在调试一个查询性能问题，请询问某人数据库查询分析器是如何工作的。如果浏览器渲染很慢，或者你认为你正在泄漏内存，使用chrome dev工具进行分析。</p><p id="c644" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果很明显你没有很多关于问题原因的好数据，你应该首先考虑如何获得这些数据<em class="jp">，然后再制定关于根本原因的理论。有时检测工具会有所帮助，有时您必须添加日志记录。同样，开始添加日志记录和工具的第一个地方是错误出现的地方，(例如，如果速度慢是在浏览/foo页面时，首先剖析它)。</em></p><p id="99e8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">做好抛弃理论的准备。</strong>开发人员经常被他们认为的问题所困扰——他们已经投入了大量的时间进行调试。为了避免这一点，尽可能保持你的理论的狭隘性和可测试性。先从最有可能的开始，有条不紊的检验理论，一路排除。在一个问题上花了30多分钟后，问自己:我确定这真的是问题所在吗？</p><p id="36e9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">它有助于为问题带来新的视角——拥有一个记录良好的bug(同样，您的文档应该关注问题如何出现以及如何重现(T10，而不是您对其根本原因的理论),这使得与其他开发人员进行交流变得容易。</p><blockquote class="jq jr js"><p id="fdb0" class="ir is jp it b iu iv iw ix iy iz ja jb jt jd je jf ju jh ji jj jv jl jm jn jo hn dt translated"><a class="ae jw" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是AMI家庭的一员。我们现在<a class="ae jw" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jw" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is jp it b iu iv iw ix iy iz ja jb jt jd je jf ju jh ji jj jv jl jm jn jo hn dt translated">要了解更多信息，请<a class="ae jw" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">阅读我们的“关于”页面</a>、<a class="ae jw" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">喜欢/在脸书给我们发消息</a>，或者简单地说，<a class="ae jw" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ir is jp it b iu iv iw ix iy iz ja jb jt jd je jf ju jh ji jj jv jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jw" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jw" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote></div></div>    
</body>
</html>