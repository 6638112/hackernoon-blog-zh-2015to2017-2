# 理解 Javascript 中的映射、过滤和归约

> 原文：<https://medium.com/hackernoon/understanding-map-filter-and-reduce-in-javascript-5df1c7eee464>

![](img/9ef542a32144137bb9c87d916996c36e.png)

Photo by [Joshua Earle](http://unsplash.com/photos/9idqIGrLuTE?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

在从事 [Javascript](https://hackernoon.com/tagged/javascript) 项目时，您不可避免地会遇到必须进行一些数据操作的情况。你总是可以使用一个`for-loop`来得到想要的结果，但是`for-loops`很快会变得有点混乱和庞大。大多数情况下，使用`map`、`filter`或`reduce`操作符会容易得多。您的代码保持更整洁，更易于阅读。至少，如果你明白它们是如何工作的，以及何时应该使用它们。

我用来确定应该使用哪个运算符的经验法则如下:

*   如果我已经有了一个数组，我想对数组中的每个元素进行完全相同的操作，并返回数组中相同数量的元素，使用`map`。
*   如果我已经有了一个数组，但是我只想让数组中的项目符合某些标准，那么使用`filter`。
*   如果我已经有了一个数组，但是我想使用数组中的值来创建一个全新的东西，那么使用`reduce`。

这些规则可能看起来有点模糊，所以让我们深入一些例子。对于我们的示例，我们使用一个小动物数组，如下所示:

# 地图操作员

假设我们想要一个只包含所有动物名字的数组。使用一个`for-loop`我们可以写这样的东西:

使用`map-operator`我们可以这样写:

[映射](https://hackernoon.com/tagged/map)操作符接受回调函数中的三个值，即:

*   数组的当前项
*   当前项目的当前索引
*   整个阵列

虽然这是一个非常简单的例子，但是当我们使用`map`时，我们的代码可读性有一些关键的改进:

1.  使用`map`，我们不必管理 for 循环的状态。
2.  我们不必使用 for 循环的索引来访问数组中的正确项。
3.  我们不必创建一个新的数组并将我们的值放入其中。`Map`一次性返回完成的数组，所以我们可以简单地将它赋给一个变量。

使用地图时，有一件非常重要的事情你可能永远不会忘记。使用一个`return`语句，否则你的数组将以所有条目作为`undefined`结束。

# 过滤器操作符

假设我们只想要一组小动物。使用 for 循环，我们将编写如下内容:

使用`filter-operator`我们可以这样写:

filter 操作符在回调函数中接受相同的参数(当前项、索引和整个数组)。但是因为我们不使用索引和整个数组，所以我把它们省略了。`filter-operator`还有和`map`一样的其他好处。我们还必须再次使用`return`来使`filter`正常工作。但是这次我们必须确保`return`返回一个布尔值。如果你不这样做，过滤器将总是返回假。

# 归约运算符

假设我们想计算数组中所有动物的总重量。使用一个`for-loop`我们可以写这样的东西:

使用`reduce-operator`我们可以这样写:

回调函数中的参数工作方式与`map`和`filter`稍有不同。它的工作原理如下:

*   第一个参数是结束值的当前值。我们必须在函数结束时设置初始值。在这种情况下，我们将其设置为`o`。但是这可以是任何值。
*   第二个参数是数组中的当前项。
*   第三个又是指数。
*   最后是全数组。

我们再次改进了`map`和`filter`的可读性。我们还需要再次使用`return`。这一次重要的是我们在每个`reduce`函数的末尾返回最终值，即第一个参数。

# 结论

通过这些简单的例子，你应该对`map`、`filter`和`reduce`的工作原理有了更好的理解。当您的代码或数据变得更加复杂时，这些操作符会更加出色。如果你还没有经常使用它们，我会建议你使用它们。它真的可以让你的代码变得更容易。

# 在阿姆斯特丹找工作？

我在 Sytac 工作，是一名高级前端开发人员，我们正在寻找精通 Angular、React、Java 或 Scala 的中级/高级开发人员。Sytac 是荷兰一家雄心勃勃的咨询公司，为银行、航空、政府和零售部门的许多知名公司工作。你可以想到荷兰国际集团、荷兰皇家航空公司、德勤公司、阿霍尔德·德尔海兹公司、ABN·AMRO 公司、弗洛拉·荷兰公司等等。

从个人的观点来看，Sytac 确实与他们的客户组合不同，但也与他们如何照顾他们的员工不同。他们真的很关心员工的福利。除了丰厚的薪水(50K-75k)，你会在与咨询经理的定期会议中注意到这一点，还会从他们组织的活动数量以及他们为让所有员工满意而提供的所有其他津贴中注意到这一点。

如果你认为自己具备与最优秀的人共事的条件，请发邮件给我，邮箱是 [luuk.gruijs@sytac.io](mailto:luuk.gruijs@sytac.io) ，我很乐意告诉你更多。