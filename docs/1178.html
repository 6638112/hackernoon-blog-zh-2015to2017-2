<html>
<head>
<title>Applications of the Vector Dot Product for Game Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向量点积在游戏编程中的应用</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/applications-of-the-vector-dot-product-for-game-programming-12443ac91f16?source=collection_archive---------0-----------------------#2016-09-20">https://medium.com/hackernoon/applications-of-the-vector-dot-product-for-game-programming-12443ac91f16?source=collection_archive---------0-----------------------#2016-09-20</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="5a6b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是我5年前写的，但从未在任何地方发布过。一个朋友的推文提醒我它在我的草稿中，我想它可能对某人有用。</p><p id="74ed" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">点积是一个可以应用于两个等维向量的函数，有时被道德纤维较低的人称为标量或内积。通常，您会看到点积定义如下:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff jq"><img src="../Images/e98308967076ccf4b5bdd4fcde52a0de.png" data-original-src="https://miro.medium.com/v2/resize:fit:456/format:webp/0*Up336WJl5thSJNEt.png"/></div><figcaption class="jy jz fg fe ff ka kb bd b be z ek">bold letters are vectors, ||‘s surrounding a vector means the magnitude or length of the vector, and 𝜃 (pronounced “theta”) is the angle between the two vectors.</figcaption></figure><p id="416e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">看着吓人？换句话说，点积是两个向量之间的夹角的余弦乘以它们的长度。起初，它的用途似乎很有限，但实际上它会到处出现。让我们看几个:</p><h1 id="e789" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">测量方向</h1><p id="ec74" class="pw-post-body-paragraph ir is hu it b iu la iw ix iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo hn dt translated">如果你仔细观察，你可能注意到的第一件事是，你可以通过一点重新排列得到两个向量之间角度的余弦值:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff lf"><img src="../Images/feab42ef25ac026ed016a4e8b1ac398b.png" data-original-src="https://miro.medium.com/v2/resize:fit:346/format:webp/0*rWZs0HYpPAi3ByC4.png"/></div></figure><p id="0a10" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后使用<em class="jp"> arccos </em>函数(也称为<em class="jp"> cos^-1 </em>)来获得角度，或者如果你想用你的<a class="ae lg" href="https://hackernoon.com/tagged/cpu" rel="noopener ugc nofollow" target="_blank"> CPU </a>周期比<a class="ae lg" href="https://hackernoon.com/tagged/ikea" rel="noopener ugc nofollow" target="_blank">宜家</a>家具便宜的话，就测试典型角度的余弦值。如果两个向量<strong class="it hv"> x </strong>和<strong class="it hv"> y </strong>都是单位长度(我们通常通过在向量上方放置一个^符号来表示这一点，但是我在这里的段落中省略了^'s，因为medium不支持它)，那么我们不需要向量长度的除法或计算，并且可以节省平方根。如果我们更仔细地观察这个方程和余弦的性质，我们可以看到一些捷径:</p><ul class=""><li id="3b76" class="lh li hu it b iu iv iy iz jc lj jg lk jk ll jo lm ln lo lp dt translated">由于将负数引入该等式的唯一方式是余弦函数，因此当且仅当向量指向彼此相距大于π/2弧度(90度)的方向时，点积的结果为负。简单来说:负的点积意味着向量指向不同的方向。</li><li id="dc5c" class="lh li hu it b iu lq iy lr jc ls jg lt jk lu jo lm ln lo lp dt translated">如果点积为零，则两个向量是正交的(垂直的)。</li><li id="8e7e" class="lh li hu it b iu lq iy lr jc ls jg lt jk lu jo lm ln lo lp dt translated">如果向量是单位长度，点积的结果是1，则向量相等。</li></ul><h1 id="f914" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">投影向量</h1><p id="e98a" class="pw-post-body-paragraph ir is hu it b iu la iw ix iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo hn dt translated">假设我们想知道一个向量在某个方向上移动了多少。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff lv"><img src="../Images/fcfd680c3ceef3cf43a78c1322fada05.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/0*8mSAMcSuGR-E-nmH.png"/></div></figure><p id="09f1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">示例用途包括计算角色在斜坡或墙壁方向上移动的速度，找出角色在重力方向上的速度，找出距离移动越过阈值还有多长时间，等等。</p><p id="e92b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当至少一个向量是单位长度时，点积是非单位长度向量在归一化向量的轴上的投影长度(当它们都是单位长度时，它们都在彼此的方向上移动相同的量)。</p><p id="d254" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一位读者指出，术语<em class="jp">归一化向量</em>(指的是单位长度指向某个向量相同方向的向量，一种称为归一化的操作)和<em class="jp">法线向量</em>(指的是垂直于表面局部平面的向量)可能会让向量数学新手感到困惑。这是一个不幸的命名冲突，但现在你知道了——它们是两回事。好的。让我们继续，因为我现在要提到另一个。</p><h1 id="5a0e" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">平面(又名墙/斜坡/三角形)</h1><p id="319b" class="pw-post-body-paragraph ir is hu it b iu la iw ix iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo hn dt translated">给定一个由单位法向量<strong class="it hv"> n </strong>和点<strong class="it hv"> p </strong>定义的平面，我们可以通过查看以下等式的结果是正、零还是负来找到向量<strong class="it hv"> x </strong>在平面的哪一侧:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff lw"><img src="../Images/fc1c7500a6326a2a92213430db80901e.png" data-original-src="https://miro.medium.com/v2/resize:fit:240/format:webp/0*zCLUoe--kLSR3EYK.png"/></div><figcaption class="jy jz fg fe ff ka kb bd b be z ek">positive indicates in front of the plane, negative behind, and zero indicates the point is coincident with the plane.</figcaption></figure><p id="2329" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们可能还想反射一个平面上的向量。假设我们在点<strong class="it hv"> x </strong>有一个质点，以速度<strong class="it hv"> v </strong>运动。我们通过检查<strong class="it hv">x+v</strong><em class="jp">dt</em><strong class="it hv"><em class="jp"/></strong>是否与<strong class="it hv"> x </strong>在平面的相对侧来测试在时间片<em class="jp"> dt </em>中是否会发生碰撞。一旦我们确认了一次碰撞(对我们来说，这将是一次弹性碰撞)，我们需要找出点质量的终点。假设平面是固定的(重量为无穷大),点质量将以相同的速度绕平面的法线反射。新速度由下式给出:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/9126ed9650b9af5d21feb728c593c086.png" data-original-src="https://miro.medium.com/v2/resize:fit:302/format:webp/0*3L_U0ZPkIfGPkyOm.png"/></div></figure><p id="fee3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">新位置由以下等式给出:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff ly"><img src="../Images/12dda5b51da705bb9df6465086edcf0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/0*kC2iKNPAHgZKxO03.png"/></div></figure><p id="a092" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下图显示了上述关系:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff lz"><img src="../Images/2dd03c40af2b028da2455bc10e6321d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*DU1G90Snix-lvq-owZPc7w.png"/></div></figure><h1 id="0bf9" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">我能看看吗？</h1><p id="5e20" class="pw-post-body-paragraph ir is hu it b iu la iw ix iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo hn dt translated">在我们的游戏中，我们经常想知道某个物体是否在某个观察者的视野中。给定一个在点<strong class="it hv"> p </strong>的观察者，一个在点<strong class="it hv"> o </strong>的物体，并假设该物体没有被遮挡(用一个或几个光线投射来测试)，用从观察者到该物体的归一化矢量取观察者观察方向<strong class="it hv"> v </strong>的点积。结果是它们之间角度的余弦值。测试观察者最大视角<em class="jp">CPI</em>的余弦值。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff ma"><img src="../Images/aef96bb22ee806b9799922c33c1472fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/0*orFBpuv2R_ua2IoE.png"/></div></figure><h1 id="56bc" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">后续步骤</h1><p id="059e" class="pw-post-body-paragraph ir is hu it b iu la iw ix iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo hn dt translated">这里有一些点积技巧，但还有更多发现。如果你有有用的技巧或解释，请发表评论。如果你感到有信心，也许你想冒险做下一个<a class="ae lg" href="https://en.wikipedia.org/wiki/Cross_product" rel="noopener ugc nofollow" target="_blank">叉积</a>？</p><div class="jr js jt ju fq ab cb"><figure class="mb jv mc md me mf mg paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mb jv mc md me mf mg paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mb jv mc md me mf mg paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mh mi mj"><p id="f922" class="ir is jp it b iu iv iw ix iy iz ja jb mk jd je jf ml jh ji jj mm jl jm jn jo hn dt translated"><a class="ae lg" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae lg" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae lg" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae lg" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is jp it b iu iv iw ix iy iz ja jb mk jd je jf ml jh ji jj mm jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae lg" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae lg" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jr js jt ju fq jv fe ff paragraph-image"><a href="https://goo.gl/Ahtev1"><div class="fe ff mn"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></a></figure><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="mo mp l"/></div></figure></div></div>    
</body>
</html>