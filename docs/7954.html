<html>
<head>
<title>Headless in Love with Sanity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">无头的爱与理智</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/headless-in-love-with-sanity-689960571dc?source=collection_archive---------1-----------------------#2017-11-14">https://medium.com/hackernoon/headless-in-love-with-sanity-689960571dc?source=collection_archive---------1-----------------------#2017-11-14</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/077cae1574792ffe19051a6faff234c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*azZfpt4kUruNCGOalYBrtg.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Illustration from <a class="ae ih" href="https://sanity.io" rel="noopener ugc nofollow" target="_blank">sanity.io</a></figcaption></figure><div class=""/><div class=""><h2 id="b191" class="pw-subtitle-paragraph jh ij ik bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy ek translated"><em class="jz">你应该尝试无头CMS理智的5个理由</em></h2></div><p id="4e62" class="pw-post-body-paragraph ka kb ik kc b kd ke jl kf kg kh jo ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">当<a class="ae ih" href="https://www.netlife.com" rel="noopener ugc nofollow" target="_blank"> Netlife </a>决定重塑品牌时，我们不仅使用了<a class="ae ih" href="https://www.underconsideration.com/brandnew/archives/new_logo_and_identity_for_and_by_netlife.php" rel="noopener ugc nofollow" target="_blank">一个包括我们自己字体</a>的新视觉标识，而且我们还决定探索新的技术前沿。我们非常满意我们之前的<a class="ae ih" href="https://retro.netliferesearch.com" rel="noopener ugc nofollow" target="_blank">网站</a>建立在<a class="ae ih" href="https://hackernoon.com/20-principles-for-craft-cms-ae08d80c17de" rel="noopener ugc nofollow" target="_blank">多功能的Craft CMS </a>之上，但是我们决定探索一下在网络上具有独立前端的无头CMS是否像宣传的那样(剧透:它们确实如此)。</p><p id="8612" class="pw-post-body-paragraph ka kb ik kc b kd ke jl kf kg kh jo ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">当来自<a class="ae ih" href="https://bengler.no" rel="noopener ugc nofollow" target="_blank"> Bengler </a>的朋友带着<a class="ae ih" href="https://sanity.io" rel="noopener ugc nofollow" target="_blank"> Sanity </a>出现时，我们已经开始在另一个解决方案中点击鼠标来实现基本的信息架构，这是他们过去三年一直在开发的CMS，并为其成立了一家新公司。我尝试了一下，很快就被说服了，只用了不到一天的时间，就通过编写简单的JavaScript对象，从零开始重新创建了我们刚刚花了几个星期的东西。尽管它还处于测试阶段，我们还是决定把它作为我们新网站的后端，并且从未回头。</p><h2 id="01de" class="kw kx ik bd ky kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq dt translated">如果你正在考虑变得没头没脑，以下是你应该考虑让理智旋转一下的5个理由:</h2><h1 id="f827" class="lr kx ik bd ky ls lt lu lc lv lw lx lg jq ly jr lj jt lz ju lm jw ma jx lp mb dt translated">1.两分钟后你就可以开始工作了。🏃</h1><p id="d691" class="pw-post-body-paragraph ka kb ik kc b kd mc jl kf kg md jo ki kj me kl km kn mf kp kq kr mg kt ku kv hn dt translated">启动你的终端，写下<code class="eh mh mi mj mk b">npm install -g @sanity/cli &amp;&amp; sanity init</code>，遵循一些指令，你就可以开始了。如果您是第一次，我建议您从“电影数据库模式”开始。通过遵循<a class="ae ih" href="https://www.sanity.io/docs/reference/schema-types" rel="noopener ugc nofollow" target="_blank">模式指令</a>，数据类型和内容字段在简单的JavaScript中定义。一旦你掌握了窍门(例如，记住了大部分数据类型)，你就可以和你的编辑同事坐下来，快速地构建、测试和调整Content Studio，使之对他们有意义。它有热模块重装，这意味着你可以立即看到你的变化。又瘦又贱！</p><pre class="ml mm mn mo fq mp mk mq mr aw ms dt"><span id="b454" class="kw kx ik mk b fv mt mu l mv mw">$ npm install -g @sanity/cli &amp;&amp; sanity init<br/>updated 1 package in 14.462s<br/>This utility walks you through creating a Sanity installation.<br/>Press ^C at any time to quit.<br/>Looks like you already have a Sanity-account. Sweet!<br/>? <strong class="mk il">Select project to use</strong> Create new project<br/>? <strong class="mk il">Informal name for your project</strong> test-project<br/>? <strong class="mk il">Name of your first data set:</strong> production<br/>? <strong class="mk il">Output path:</strong> ~/Sites/SanityDemo<br/>? <strong class="mk il">Select project template</strong> Clean, minimal project<br/>✔ Bootstrapping files from template<br/>✔ Resolving latest module versions<br/>✔ Creating default project files<br/>✔ Fetching packages      ▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪ 100% (0.68s)<br/>✔ Linking dependencies   ▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪ 100% (14.26s)<br/>● Linking dependencies   ▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫ 0% (0.00s)<br/>● Linking dependencies   ▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫▫ 0% (0.00s)<br/>✔ Saved lockfile</span><span id="2839" class="kw kx ik mk b fv mx mu l mv mw">Success! You can now run "sanity start"</span></pre><p id="d358" class="pw-post-body-paragraph ka kb ik kc b kd ke jl kf kg kh jo ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">虽然其他headless CMSes提供了用于编辑内容模型和字段的控制面板，但我更喜欢用代码来完成。这意味着跨项目重用模式更容易。虽然明智的做法是保持这段代码相当冗长和简单，但是您也可以通过迭代数组等来<a class="ae ih" href="https://www.sanity.io/docs/content-studio/localization" rel="noopener ugc nofollow" target="_blank">生成字段集。您还可以模块化常见的可疑内容，例如标题字段。挺俏皮的！</a></p><figure class="ml mm mn mo fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff my"><img src="../Images/5300921915cbb64a485ae0bbf1d74eb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*V9aaHWgYi0E3-vwfYAedDA.gif"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Starting from scratch is easy. If you put a <a class="ae ih" href="https://www.sanity.io/docs/schema-types/block-type" rel="noopener ugc nofollow" target="_blank">`block` type in an `array`</a> type you’ll get the rich text editor. Adding other types to the array gets available in the ‘insert’ menu. Yes, rich text is just an array where one of the types happens to be block text.</figcaption></figure><h1 id="03c2" class="lr kx ik bd ky ls lt lu lc lv lw lx lg jq ly jr lj jt lz ju lm jw ma jx lp mb dt translated">2.你可以编辑编辑🖋🔧</h1><p id="ff1b" class="pw-post-body-paragraph ka kb ik kc b kd mc jl kf kg md jo ki kj me kl km kn mf kp kq kr mg kt ku kv hn dt translated">让Sanity脱颖而出的是，它的编辑器，即<a class="ae ih" href="https://www.sanity.io/docs/content-studio" rel="noopener ugc nofollow" target="_blank"><em class="mz">Content Studio</em></a><em class="mz">，</em>可以根据您的需要进行调整、扩展和定制。第一步是配置内容的预览。这是通过将一个<code class="eh mh mi mj mk b">preview</code>对象附加到您想要在预览中显示的类型来完成的。您还可以通过<code class="eh mh mi mj mk b">prepare</code>功能发送您选择的任何内容，进行更多定制。</p><figure class="ml mm mn mo fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff na"><img src="../Images/4398921bbc5092504e86701552673950.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kGhyKH-Zdfsg3fkNSPFiXQ.jpeg"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">We use Sanity for handling registrations to workshops and other events. Here we can preview how many seats there are left on each event.</figcaption></figure><p id="7a69" class="pw-post-body-paragraph ka kb ik kc b kd ke jl kf kg kh jo ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">我们已经开始对客户工作使用理智。在我们与<a class="ae ih" href="https://beta.u4.no" rel="noopener ugc nofollow" target="_blank"> U4反腐败资源中心</a>的项目中(仍在开发中！)他们希望将富文本域与文本分析服务相集成，以帮助他们跟踪文本质量。我不是React专家，但我设法扩展了富文本编辑器，使其包含一行由<a class="ae ih" href="https://readable.io" rel="noopener ugc nofollow" target="_blank"> readable.io的API </a>提供的许多数据点中的一小部分。你可以在下面看到概念证明。我们还制作了一个类似于电子表格的输入字段，用于创建和编辑表格数据，并且有传言说存在一个用于实时3D渲染蛋白质分子的输入字段。).</p><figure class="ml mm mn mo fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nb"><img src="../Images/363ed6e302d3c5cdf2762f4e00938cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*h0VovYKNsXjY31vCtHoD8w.gif"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">I set the editor to check the text every five seconds of writing. It’s also interesting to have the running estimated reading time while you write. Hopefully it will encourage brevity.</figcaption></figure><h1 id="d166" class="lr kx ik bd ky ls lt lu lc lv lw lx lg jq ly jr lj jt lz ju lm jw ma jx lp mb dt translated">3.GROQ给你API超能力🚀</h1><p id="4832" class="pw-post-body-paragraph ka kb ik kc b kd mc jl kf kg md jo ki kj me kl km kn mf kp kq kr mg kt ku kv hn dt translated">选择无头<a class="ae ih" href="https://hackernoon.com/tagged/cms" rel="noopener ugc nofollow" target="_blank">CMS</a>的全部原因是内容可以通过API访问。通常这是RESTful APIs，管理起来有点麻烦。虽然这通常是有意义，但是在这样的API上构建一个稍微高级一点的网站或者任何应用程序也可能是一件麻烦的事情。特别是当您需要多次查询API以获得必要的id来获得您想要的数据时。这也是脸书制造GraphQL的部分原因，graph QL现在似乎是未来无头CMSes和“后端即服务”的首选武器。</p><p id="76e2" class="pw-post-body-paragraph ka kb ik kc b kd ke jl kf kg kh jo ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><a class="ae ih" href="https://www.sanity.io/docs/front-ends/what-about-graphql" rel="noopener ugc nofollow" target="_blank">graph QL</a>还没有带来理智，但可以说是更好的东西:<a class="ae ih" href="https://www.sanity.io/docs/front-ends/query-cheat-sheet" rel="noopener ugc nofollow" target="_blank"> GROQ </a>。我看到它的第一个想法是，它感觉像“GraphQL的降价”。语法也是你必须习惯的东西，但是一旦你习惯了:🚀。如果你想查询我在上面的例子中写的文章，只需输入<code class="eh mh mi mj mk b">*[_type == 'article']</code>就可以了，但是你也可以疯狂地使用它:</p><figure class="ml mm mn mo fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nc"><img src="../Images/eda6c7ee7c075ad073f071e5d1fe4410.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T1izRBuf6C4rN_g47uEyDw.jpeg"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">We use a version of this query to generate <a class="ae ih" href="https://beta.u4.no/topics" rel="noopener ugc nofollow" target="_blank">the topic list on U4</a>. It is way easier to write than to read: “Fetch documents with the type ‘topics’ and return the title in addition to the number of documents of the types ‘publication’ and ’helpdesk’ that references each ‘topics’-document and place them under the key ‘relatedCount’, sort this array after this count descending from the largest, and give only the five most referenced topics-document”.</figcaption></figure><h1 id="9886" class="lr kx ik bd ky ls lt lu lc lv lw lx lg jq ly jr lj jt lz ju lm jw ma jx lp mb dt translated">4.底层技术超级无聊💤</h1><p id="329c" class="pw-post-body-paragraph ka kb ik kc b kd mc jl kf kg md jo ki kj me kl km kn mf kp kq kr mg kt ku kv hn dt translated">尽管您在本地配置数据模式和content studio，但Sanity CMS是云托管的，所有的<em class="mz">数据</em>都是即时同步的，这意味着studio也是<em class="mz">实时的</em>。让其他人可以使用您的Content Studio配置是终端中的一个简单的<code class="eh mh mi mj mk b">$ sanity deploy</code>。有了能够托管无数文档的承诺，令人欣慰的是，在理智之下，你会发现诸如PostgreSQL、ElasticSearch和JavaScript这样的成熟和超级无聊的技术(好吧，这里有<em class="mz">也有</em>一些令人兴奋的技术，它们也是使理智如此快速的秘方)。我们还感到安全的是，React不会很快消失。没有HTML或XML保存在数据库中，甚至没有富文本，一切都在合理的对象结构中:例如，你不希望为了让Alexa从你的文本字段中读取而必须解析HTML。有了Sanity，你甚至可以制作一个编辑器，让你标记文本的节奏等等，当语音界面支持的时候。</p><p id="5bda" class="pw-post-body-paragraph ka kb ik kc b kd ke jl kf kg kh jo ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">Sanity有自己维护和维护的JavaScript、HTML和PHP客户端，因此您也可以快速启动和运行任何您想要连接的前端。通过API编写和更新数据也很容易，即使是事务(是的，它有事务！).你希望这些东西无聊，尤其是当你的内容和数据对你很重要的时候。健全性是为了让您更难丢失或损坏数据而构建的。</p><p id="cf63" class="pw-post-body-paragraph ka kb ik kc b kd ke jl kf kg kh jo ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">在撰写本文时，托管和SLA的定价尚未公布，但我们非常肯定，无论是从费用还是功能上来说，这都是明智的。它还将用于学术领域<a class="ae ih" href="https://vegapublish.com/" rel="noopener ugc nofollow" target="_blank">为在线研究出版物</a>提供解决方案。</p><h1 id="1659" class="lr kx ik bd ky ls lt lu lc lv lw lx lg jq ly jr lj jt lz ju lm jw ma jx lp mb dt translated">5.对每个人来说，使用无头内容模型终于变得容易了🙇‍♀🙇</h1><figure class="ml mm mn mo fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nd"><img src="../Images/fefe11590095e71ce537f8ecbbf0d7d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*EoRDlRFYv8IHS-LYFQU0vg.gif"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">With the <a class="ae ih" href="https://www.invisionapp.com/craft" rel="noopener ugc nofollow" target="_blank">Craft by Invision plugin</a> we can also use Sanity to provide real content when designing new interfaces.</figcaption></figure><p id="e1b3" class="pw-post-body-paragraph ka kb ik kc b kd ke jl kf kg kh jo ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">为了开始使用Sanity，你暂时依赖于对JavaScript有初步了解的人。然而，作为网络上最流行的编程语言，这样的人应该不难找到。我们真正喜欢这个CMS的地方是，它邀请了技术专家、视觉/交互设计师和内容编辑更紧密地合作，来创建一个对它的用途有意义的信息架构。</p><h2 id="7095" class="kw kx ik bd ky kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq dt translated">我们在热恋中昏了头！💚</h2><p id="9c50" class="pw-post-body-paragraph ka kb ik kc b kd mc jl kf kg md jo ki kj me kl km kn mf kp kq kr mg kt ku kv hn dt translated">能够在会议或研讨会期间调整和调整内容模型、输入字段甚至预览，只是为了测试这些建议，这是非常强大的。事实上，新的内容字段一旦生成，就可以通过API立即到达，这为前端用户消除了很多摩擦。我们以前从未能够如此轻松地构建一个信息架构，以便前端人员和内容编辑人员可以立即进行试验。魔鬼也存在于所有的小细节中，这些细节太多了，在这篇文章中无法探究，但要强调其中的一些:理智分析你的图像的配色方案(对图像上的文字对比问题说再见吧！)，处理来自Microsoft Word的粘贴，让多个用户同时编辑相同的文档，用一个终端命令导出和导入整个数据集，有CDNs，有预览OpenGraph-tags的插件，让您用一个简单的<code class="eh mh mi mj mk b">sanity init plugin</code>向工作室编写自己的插件，让您在富文本中制作自己的标记和注释，让您要求您想要的任何大小、裁剪或旋转的图像。这个名单每周都在增加。</p><p id="215a" class="pw-post-body-paragraph ka kb ik kc b kd ke jl kf kg kh jo ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">也从来没有这么容易定制的编辑器，这一切都发生在-它有助于新的和令人兴奋的冒险！</p></div><div class="ab cl ne nf hc ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="hn ho hp hq hr"><p id="db53" class="pw-post-body-paragraph ka kb ik kc b kd ke jl kf kg kh jo ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><em class="mz">应该注意的是，我们与理智没有经济联系，除了用理智来帮助我们的客户，我们按小时收费。如果你对尝试理智感兴趣，你可以通过阅读它的</em> <a class="ae ih" href="https://sanity.io/docs" rel="noopener ugc nofollow" target="_blank"> <em class="mz">文档</em> </a> <em class="mz">来了解更多。我们相信理智的人们会感谢反馈，关于</em><a class="ae ih" href="https://gitter.im/sanity-io/sanity?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" rel="noopener ugc nofollow" target="_blank"><em class="mz">gitter</em></a><em class="mz">或各种</em><a class="ae ih" href="https://github.com/sanity-io/sanity" rel="noopener ugc nofollow" target="_blank"><em class="mz">github-repos</em></a><em class="mz">的问题。</em></p><p id="63a7" class="pw-post-body-paragraph ka kb ik kc b kd ke jl kf kg kh jo ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc il"> <em class="mz">如果你有兴趣与Netlife合作一个理智的项目，只需给我们发一封老式的电子邮件</em></strong><strong class="kc il"><em class="mz"/></strong><a class="ae ih" href="mailto:hei@netlife.com" rel="noopener ugc nofollow" target="_blank"><strong class="kc il"><em class="mz">，我们会想出办法的！</em>T13】</strong></a></p><figure class="ml mm mn mo fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/301b17a41a21ecbed27f49d3681f6b4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uP92O7Olv9PXBnU-KGw98Q.jpeg"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Knit your content together with Sanity. Illustration from <a class="ae ih" href="https://sanity.io" rel="noopener ugc nofollow" target="_blank">sanity.io</a></figcaption></figure><figure class="ml mm mn mo fq hw"><div class="bz el l di"><div class="nl nm l"/></div></figure></div></div>    
</body>
</html>