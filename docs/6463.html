<html>
<head>
<title>This Robot Fights Back Against Robocalls</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">这个机器人反击机器人电话</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/this-robot-fights-back-against-robocalls-e61c7d89bf27?source=collection_archive---------10-----------------------#2017-09-19">https://medium.com/hackernoon/this-robot-fights-back-against-robocalls-e61c7d89bf27?source=collection_archive---------10-----------------------#2017-09-19</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="4350" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">我如何使用Twilio和几行Python来永久阻止所有不需要的呼叫者。</h2></div><p id="6a3f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我和大多数人一样，对电话推销员感到恼火。但最近，由于诈骗电话的自动化，这个问题变得更加严重。这一点在NPR的《金钱星球》中有详细报道，并在一个令人惊讶的2集播客中被《回复》广泛调查。《星球货币》显示，这些机器人电话不太可能很快结束，因为联邦贸易委员会在这个问题上进展非常缓慢。然后，就在这个片段的中间，他们播放了一个谷歌云平台的广告，我有了一个想法。我可以做一个机器人来过滤不想要的电话，只让高质量的电话通过。就像数字个人助理。</p><figure class="kg kh ki kj fq kk"><div class="bz el l di"><div class="kl km l"/></div></figure><p id="48b3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">当谈到阻止机器人电话时，有几个应用程序以可承受的成本做得很好。<a class="ae kf" href="https://www.nytimes.com/2017/05/11/smarter-living/stop-robocalls.html" rel="noopener ugc nofollow" target="_blank">《纽约时报》的这篇文章强调了一些最佳选择。</a>我想更进一步，在我和不必要的电话之间设置一道坚固的防线。</p><h2 id="20a6" class="kn ko hu bd kp kq kr ks kt ku kv kw kx js ky kz la jw lb lc ld ka le lf lg lh dt translated">机器人如何工作:</h2><ol class=""><li id="4e5b" class="li lj hu jl b jm lk jp ll js lm jw ln ka lo ke lp lq lr ls dt translated">电话打进了我的普通电话线。</li><li id="5e20" class="li lj hu jl b jm lt jp lu js lv jw lw ka lx ke lp lq lr ls dt translated">如果号码在我的联系人里，电话会自动接通。</li><li id="a0a8" class="li lj hu jl b jm lt jp lu js lv jw lw ka lx ke lp lq lr ls dt translated">如果没有，机器人会回答并询问打电话的人有什么事。</li><li id="66a7" class="li lj hu jl b jm lt jp lu js lv jw lw ka lx ke lp lq lr ls dt translated">然后，打电话的人被置于等待状态，他们的回答会通过短信发给我。</li><li id="97b2" class="li lj hu jl b jm lt jp lu js lv jw lw ka lx ke lp lq lr ls dt translated">如果这个电话看起来是合法的，我回短信“ok ”,机器人就给我接通了。</li><li id="48e4" class="li lj hu jl b jm lt jp lu js lv jw lw ka lx ke lp lq lr ls dt translated">如果我没有回应，打电话的人会被要求留言。</li><li id="85b3" class="li lj hu jl b jm lt jp lu js lv jw lw ka lx ke lp lq lr ls dt translated">信息被转录并发送到我的电子邮件。</li></ol><h1 id="526c" class="ly ko hu bd kp lz ma mb kt mc md me kx ja mf jb la jd mg je ld jg mh jh lg mi dt translated">分解每个功能:</h1><h2 id="0c53" class="kn ko hu bd kp kq kr ks kt ku kv kw kx js ky kz la jw lb lc ld ka le lf lg lh dt translated"><em class="mj">第一步:保持正常的电话线路。</em></h2><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div class="fe ff mk"><img src="../Images/2c94128f1c7adeb146320680b65ef1d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*8CZC984hgpSw4JF7iP1UVA.png"/></div></figure><p id="7f54" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">把软件放在你的手机和世界之间要比想象中困难得多。Twilio 为创建程序电话系统提供了一个很好的界面，但是<a class="ae kf" href="https://support.twilio.com/hc/en-us/articles/223179348-Porting-a-Phone-Number-to-Twilio" rel="noopener ugc nofollow" target="_blank">将一个电话号码移植到Twilio </a>需要六个步骤，可能需要长达四周的时间。</p><p id="3a5f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在我看来，一个更好的选择(如果你有iPhone)，包括为Twilio创建一个新号码，你将公开使用它，然后限制你的个人电话线路，只接受来自你通讯录中号码的电话。您可以限制未知号码让您的电话响铃，方法是将“请勿打扰”模式设定为允许来自您的联系人的来电，并将所有其他号码设为静音。这里的关键是设置从晚上10:00到晚上9:59的时间表，这样免打扰模式将永久保持。</p><p id="c42c" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这本身就是一个良好的开端，将有助于清理不想要的电话。但这有点矫枉过正，所以设置一个新号码，你可以公开使用，根据你设置的标准将来电转移给你，这是一个很好的下一步。</p><h2 id="c48b" class="kn ko hu bd kp kq kr ks kt ku kv kw kx js ky kz la jw lb lc ld ka le lf lg lh dt translated">第二步:通过Google API检查联系人</h2><p id="9263" class="pw-post-body-paragraph jj jk hu jl b jm lk iv jo jp ll iy jr js mn ju jv jw mo jy jz ka mp kc kd ke hn dt translated">如果你用谷歌同步你的iPhone联系人，通过API访问你的联系人列表相对简单。你只需要<a class="ae kf" href="https://developers.google.com/people/api/rest/v1/people#Person" rel="noopener ugc nofollow" target="_blank">从Google People API获取人力资源</a>。我发现最好每天抓取这个更新，并将所有“已知号码”保存到一个JSON文件中，以便于访问(它只是一个电话号码列表，将被传递到您的真实号码)。</p><p id="a589" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">当您设置的Twilio号码有新的来电时(并且是免费发出的)，Python会打开包含所有存储号码的JSON文件，并检查来电者是否在列表中。如果是，来电将被自动转接，而来电者并不知道这一过程；如果不是，来电者将被提示解释他们是谁以及为什么来电。</p><h2 id="3910" class="kn ko hu bd kp kq kr ks kt ku kv kw kx js ky kz la jw lb lc ld ka le lf lg lh dt translated">步骤3:通过Twilio语音识别提示呼叫者进行解释</h2><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="fe ff mq"><img src="../Images/523ffc557267c7e33d15f7a216f1e69a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9vBqXiQtvnrQciXq99DTxQ.jpeg"/></div></div></figure><p id="634d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Twilio提供<a class="ae kf" href="https://www.twilio.com/blog/2017/05/introducing-speech-recognition.html" rel="noopener ugc nofollow" target="_blank">出色的开箱即用语音识别</a>，允许你给来电者提示信息，然后自动记录和转录他们的回复。</p><pre class="kg kh ki kj fq mv mw mx my aw mz dt"><span id="58c5" class="kn ko hu mw b fv na nb l nc nd">from twilio.twiml.voice_response import Gather, VoiceResponse, Say<br/><br/>speech_result = VoiceResponse()<br/>gather = Gather(input='speech', action='/completed')<br/>gather.say('<!-- -->You have reached John's automated answering service, please state your name and why you are calling.<!-- -->')<br/>speech_result.append(gather)</span></pre><p id="ae47" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这将返回一个转录的<strong class="jl hv"> <em class="ne"> SpeechResult </em> </strong>对象以供进一步处理。有机会在这个步骤中注入一些机器学习，以了解为什么有人打电话，也许可以将它与我的日历或最近的电子邮件相关联，并相应地处理电话，但这超出了本文的范围。</p><h2 id="c59c" class="kn ko hu bd kp kq kr ks kt ku kv kw kx js ky kz la jw lb lc ld ka le lf lg lh dt translated">第四步:通过可编程的短信把转录文本发给我</h2><p id="3b30" class="pw-post-body-paragraph jj jk hu jl b jm lk iv jo jp ll iy jr js mn ju jv jw mo jy jz ka mp kc kd ke hn dt translated">对于Twilio来说，通过文本将结果发送给我是微不足道的。python代码如下所示:</p><pre class="kg kh ki kj fq mv mw mx my aw mz dt"><span id="ecab" class="kn ko hu mw b fv na nb l nc nd">client = Client(account_sid, auth_token)</span><span id="1d46" class="kn ko hu mw b fv nf nb l nc nd">client.messages.create(<br/>  to="YOUR PHONE NUMBER HERE",<br/>  from_="YOUR TWILIO NUMBER HERE",<br/>  body="Call {}. Message: {}".format(caller_number, speech_result))</span></pre><p id="9c6f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然后，根据号码和转录的信息，如果看起来像一个值得接听的电话，我可以回复“是”以便接通。</p><h2 id="2384" class="kn ko hu bd kp kq kr ks kt ku kv kw kx js ky kz la jw lb lc ld ka le lf lg lh dt translated">第五步:如果我同意，将电话转给我。</h2><p id="d108" class="pw-post-body-paragraph jj jk hu jl b jm lk iv jo jp ll iy jr js mn ju jv jw mo jy jz ka mp kc kd ke hn dt translated">一旦得到肯定的答复，这个电话就需要接到我的真实号码上。由于我在通讯录中保存了我的Twilio号码，因此电话会接通并在我的私人线路上响起。<a class="ae kf" href="https://www.twilio.com/labs/twimlets/forward" rel="noopener ugc nofollow" target="_blank"> Twilio Labs开发了一款小应用，可以实现简单的呼叫转移。URL结构很简单，我只是替换了我自己的电话号码，并记录了一个语音邮件，以防呼叫失败。</a></p><pre class="kg kh ki kj fq mv mw mx my aw mz dt"><span id="b060" class="kn ko hu mw b fv na nb l nc nd">from twilio.twiml.voice_response import Dial, Number, VoiceResponse<br/><br/>response = VoiceResponse()<br/>dial = Dial()<br/>dial.number('<!-- -->YOUR PHONE NUMBER HERE<!-- -->')<br/>response.append(dial)<br/><br/>print(response)</span></pre><p id="19e0" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">幸运的是，这一步只需要很少的定制。</p><h2 id="cf7a" class="kn ko hu bd kp kq kr ks kt ku kv kw kx js ky kz la jw lb lc ld ka le lf lg lh dt translated">第六步:如果我不想说话，请留言。</h2><p id="44e3" class="pw-post-body-paragraph jj jk hu jl b jm lk iv jo jp ll iy jr js mn ju jv jw mo jy jz ka mp kc kd ke hn dt translated">如果我很忙，没有回复短信，Twilio就会提示来电者留言。我认为60秒是让未知来电者等待的最长时间，所以Twilio脚本在请求留言之前会等待60秒的响应。</p><h2 id="b342" class="kn ko hu bd kp kq kr ks kt ku kv kw kx js ky kz la jw lb lc ld ka le lf lg lh dt translated">第七步:转录信息并发送到我的电子邮件。</h2><p id="594a" class="pw-post-body-paragraph jj jk hu jl b jm lk iv jo jp ll iy jr js mn ju jv jw mo jy jz ka mp kc kd ke hn dt translated">就像以前一样，语音消息使用Twilio的语音识别服务进行转录，然后使用Python的简单smtplib通过电子邮件发送给我。<a class="ae kf" href="https://www.tutorialspoint.com/python/python_sending_email.htm" rel="noopener ugc nofollow" target="_blank">用Python发送电子邮件是有据可查的</a>，所以我不会在这里详述如何做。</p><h1 id="36f5" class="ly ko hu bd kp lz ma mb kt mc md me kx ja mf jb la jd mg je ld jg mh jh lg mi dt translated">后续步骤:</h1><p id="f373" class="pw-post-body-paragraph jj jk hu jl b jm lk iv jo jp ll iy jr js mn ju jv jw mo jy jz ka mp kc kd ke hn dt translated">我很想在未来将它变成一个自助服务应用程序，并与其他感兴趣的人分享，但目前我有太多的事情要做，我相信在不久的将来，公司会开始将这些功能添加到电话系统中。</p><p id="569e" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果你想要一个更基本的版本，你可以使用<a class="ae kf" href="http://voice.google.com" rel="noopener ugc nofollow" target="_blank">谷歌语音</a>来筛选电话，并获得一些相同的功能，尽管它的可定制性要差得多。谷歌语音呼叫屏蔽解决方案仍然会让你的手机真正响起来(相比之下，侵入性小得多的短信)。</p><p id="ad97" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我完全可以理解有些人可能会认为这有点过了，但我认为这对我们当前的社会交流模式来说是合适的。越来越多的传统电话系统被滥用于垃圾邮件，大多数人已经转向短信或各种社交平台作为主要的沟通形式。我很想让联邦贸易委员会推出一个解决这个问题的好办法，但我认为这还不够快。在那之前，我可能会继续让<a class="ae kf" href="https://hackernoon.com/tagged/hacking" rel="noopener ugc nofollow" target="_blank">黑</a>我的手机，直到我的生活中有最少的可容忍的分心。</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="fe ff ng"><img src="../Images/7a9428b00bcd6ce0a9a4059286cabf22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f7hYv0zwPypteWQza7K7oA.jpeg"/></div></div></figure></div><div class="ab cl nh ni hc nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="hn ho hp hq hr"><p id="d656" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv"> <em class="ne">感谢阅读！如果你觉得这很有趣，请点击拍手按钮！</em>T9】</strong></p><p id="7436" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv"> <em class="ne">你可以在推特上联系我:</em></strong><a class="ae kf" href="http://www.twitter.com/johncoogan" rel="noopener ugc nofollow" target="_blank"><strong class="jl hv"><em class="ne">www.twitter.com/johncoogan</em></strong></a></p><figure class="kg kh ki kj fq kk"><div class="bz el l di"><div class="no km l"/></div></figure><figure class="kg kh ki kj fq kk"><div class="bz el l di"><div class="np km l"/></div></figure></div></div>    
</body>
</html>