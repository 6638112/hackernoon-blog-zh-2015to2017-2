<html>
<head>
<title>What can we learn from Googles AMP-project?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们能从谷歌AMP-project中学到什么？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/what-can-we-learn-from-googles-amp-project-6eff05154f8e?source=collection_archive---------15-----------------------#2017-03-20">https://medium.com/hackernoon/what-can-we-learn-from-googles-amp-project-6eff05154f8e?source=collection_archive---------15-----------------------#2017-03-20</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="6a85" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我最近参加了纽约AMPConf 2017，围绕为什么以及如何实施<a class="ae jp" href="https://hackernoon.com/tagged/amp" rel="noopener ugc nofollow" target="_blank"> AMP </a>进行了一些精彩的讨论。不管AMP是否适合你，它都为营销人员和开发者敲响了警钟。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/c4b7541d0697244122c081a7275cb7d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VVX5vA9hfwsfsYr9Hx1BBg.jpeg"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek"><strong class="bd kg">A faster lane for a better user experience?</strong> photo: Glenn Wedin</figcaption></figure><p id="77d8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先，AMP不仅仅是一种新的<a class="ae jp" href="https://hackernoon.com/tagged/technology" rel="noopener ugc nofollow" target="_blank">技术</a>，也是一种<strong class="it hv">哲学</strong>和一种前端开发人员应该知道的行动号召<strong class="it hv"> </strong>。AMP的目标是改善移动设备的用户体验，并为每个人改善网络。</p><p id="c44b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">那么，我们为什么要专注于在移动端创造更好的用户体验呢？原因很简单，这是我们的终端用户目前花费大部分时间的地方，我们让他们的体验太痛苦了。缓慢加载的广告、阻碍页面内容的广告、由于javascript操作而导致的多次重画页面以及几秒钟内无法工作的滚动只是AMP旨在解决的一些问题。</p><p id="9572" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="http://theoatmeal.com/" rel="noopener ugc nofollow" target="_blank">燕麦片</a>也想要更好的用户体验:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff kh"><img src="../Images/b63057cd92aa4b610177250155965b54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5brTrf1BKlXzPHGsxe6S9w.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek"><a class="ae jp" href="http://theoatmeal.com/comics/mobile_website" rel="noopener ugc nofollow" target="_blank">http://theoatmeal.com/comics/mobile_website</a></figcaption></figure><h2 id="b2c2" class="ki kj hu bd kk kl km kn ko kp kq kr ks jc kt ku kv jg kw kx ky jk kz la lb lc dt translated">死亡白屏</h2><p id="927e" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">移动网络通常看起来像下面的图片。这种所谓的“死亡白屏”通常会让用户返回搜索结果，而不是等待页面最终出现。嗯，至少对我来说是这样的。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff li"><img src="../Images/084f74fcbfcc417e6a042f96d0f8c949.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*jb12aWpWUoXBjIsLx6cSiA.png"/></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">The white screen of death.. please wait, wait, wait, wait…</figcaption></figure><h2 id="f638" class="ki kj hu bd kk kl km kn ko kp kq kr ks jc kt ku kv jg kw kx ky jk kz la lb lc dt translated">渲染时间慢=转换和浏览量丢失</h2><p id="8878" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">一个被充分证明的事实是，页面加载的时间越长，就会有越多的用户在页面呈现之前离开页面。Jacob Nielsen甚至在90年代早期做了研究来证明这一点。然而，获得确凿的事实和数字可能很困难。例如，如果用户在页面呈现之前离开，我们用标准的分析工具不会注意到。根据谷歌和SOASTA的研究，即使几秒钟也足以失去大量的访问，亚马逊的收入据说每提高100毫秒增长1%。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff lj"><img src="../Images/d119cc7369a02ab4f985719251fcda61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*kAkUrvc5l6Rof8Gk-kuO3Q.png"/></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Source: Google/SOASTA Research, 2017</figcaption></figure><p id="1c39" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在AMPConf 2017 Natalia巴尔塔萨从<a class="ae jp" href="https://www.theguardian.com" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv">《卫报》</strong> </a> <strong class="it hv"> </strong>告诉我们，他们<strong class="it hv">在AMP页面上的点击率</strong>比普通页面高8.6%，他们发现<strong class="it hv"> AMP链接被点击的几率</strong>高2%。<a class="ae jp" href="https://www.wego.com/" rel="noopener ugc nofollow" target="_blank"> Wego </a>还谈到了他们在基于AMP的渐进式网络应用程序上的转化率比旧网站提高了93%。</p><h1 id="8a16" class="lk kj hu bd kk ll lm ln ko lo lp lq ks lr ls lt kv lu lv lw ky lx ly lz lb ma dt translated">但是AMP是什么呢？</h1><p id="b1a7" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">AMP是一套严格的规则和一些javascript，它让你以一种标准化的方式构建快速的网页，因此你的页面可以在任何设备和平台上被高速缓存和交付。谷歌——很快会有很多其他公司——会把你的内容缓存在他们自己的服务器上。缓存和预呈现内容的好处是，谷歌可以实现搜索结果的高速交付。AMP可以在任何网络视图中可靠地工作，无论是浏览器、LinkedIn、脸书、谷歌搜索、雅虎搜索、必应搜索还是任何其他实现它的应用程序。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff li"><img src="../Images/c3f64a7bb03edbdadbb4eb5101eabc46.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*2FNo9PFY5kQOMhzp3g9ARw.png"/></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">An example of how an AMP-enabled page will be displayed on Google</figcaption></figure><p id="ba6d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">至于谷歌搜索结果，当他们将你的页面验证为AMP-page时，你的页面会显示一个小闪电。Bing和LinkedIn也开始呈现AMP-content，但迄今为止他们还没有实现AMP-cache。</p><h2 id="13a8" class="ki kj hu bd kk kl km kn ko kp kq kr ks jc kt ku kv jg kw kx ky jk kz la lb lc dt translated">放大器缓存</h2><p id="c899" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">谷歌作为AMP-pages的消费者，提供了自己的AMP-cache。缓存用于在全球范围内即时提供预渲染体验，并验证页面以确保页面正常工作。出于安全原因，目前只有谷歌可以托管AMP-cache。正如<strong class="it hv"> Cloudflare首席执行官Matthew Prince </strong>在AMPConf 2017上提到的，Cloudflare已经创建了自己的AMP-cache，并将提供自己的服务和SDK，供希望在自己的应用程序中呈现AMP-pages的所有人使用。</p><p id="4081" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">提高速度的关键</strong><br/>AMP的关键部分之一是，它不允许任何会阻止页面呈现的代码。呈现阻塞元素在大多数情况下是同步脚本、链接和导入标签。AMP将只允许异步JavaScript。自己写的JavaScript也不会被允许(！)相反，所有交互功能都必须由AMP-components处理。iframes中允许使用自定义JavaScript只要它不会阻止主页的呈现。关键的和高于折叠的CSS <em class="mb">有</em>要内联渲染，大小小于50kB。这也意味着是时候告别像Bootstrap和Foundation这样的CSS框架了。</p><blockquote class="mc"><p id="e415" class="md me hu bd mf mg mh mi mj mk ml jo ek translated">"只做能快速完成的事情。"</p></blockquote><p id="2f73" class="pw-post-body-paragraph ir is hu it b iu mm iw ix iy mn ja jb jc mo je jf jg mp ji jj jk mq jm jn jo hn dt translated">AMPs的设计原则之一是只做能快速完成的事情。这意味着你需要重新考虑你放在网站上的所有东西。这也意味着你应该考虑你的营销部门是否真的应该访问谷歌标签管理器。这个原则也强调了我对AMP的一个问题。具有讽刺意味的是，如果开发人员负责，我们可能一开始就不需要AMP。然而，比起修复现有的解决方案，创建第二个性能更好的移动网站似乎更容易被接受。在AMPConf 2017期间发表的一个有趣的评论是<strong class="it hv">“AMP比你的CEO更强大”</strong>。</p><h2 id="48ad" class="ki kj hu bd kk kl km kn ko kp kq kr ks jc kt ku kv jg kw kx ky jk kz la lb lc dt translated">带AMP的渐进式网络应用</h2><p id="4fc7" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">Progressive web apps引入了一个名为应用外壳模型的概念，它专注于即时呈现应用程序的最小部分，然后异步加载其余内容。按照应用程序外壳模型，可以通过内联呈现关键CSS，并用Cache-API缓存“应用程序外壳”来做到这一点。“应用程序外壳”是基本的用户界面。这与AMP的不同之处在于，AMP的目标是即时呈现所有内容，而不是阻止页面呈现和/或由Google预呈现。</p><p id="d0fb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">尽管PWA和AMP通常适用于不同的用例，但它们可以很好地共存，甚至可以共存，如Paul Bakaus在本文中所述:<a class="ae jp" href="https://www.smashingmagazine.com/2016/12/progressive-web-amps/" rel="noopener ugc nofollow" target="_blank">https://www . smashingmagazine . com/2016/12/progressive-we b-amps/</a></p><h2 id="08ac" class="ki kj hu bd kk kl km kn ko kp kq kr ks jc kt ku kv jg kw kx ky jk kz la lb lc dt translated">评论</h2><p id="8b14" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">即使tough AMP有很多使用它的好理由，也有一些非常重要的反对理由。我个人遇到的第一个问题是“为什么我们不能做一个快速的移动网站？”以及“我想要自己的域名”。</p><p id="c577" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，如前所述，可以做很多事情来提高常规移动网站的页面速度，特别是如果你遵循AMP的设计原则(以及性能最佳实践)。如果你想让AMP闪电出现在搜索结果和LinkedIn等应用中，你<em class="mb">必须</em>实现AMP并让它生效。据谷歌称，这是因为这是他们验证你的页面是否真的很快的唯一方法。如果你的网站没有AMP，他们就不能保证你的页面会持续快速的发布。他们只是检查你的网站，看看它是否遵循放大器的限制，如果是的话，你值得闪电。</p><p id="8bf9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">域名</strong>页面所有者自然希望显示正确的域名，这或者是出于品牌推广的目的，或者是因为出版商可能只有权在他们自己的域名下提供某些内容。</p><p id="e92a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">由于谷歌对谁可以操作AMP-cache一直很严格，并且不确定它是否会影响排名，人们担心这会使网络更加封闭，并锁定谷歌的服务。根据谷歌的说法，情况并非如此。这是一个开源项目，任何人都可以实现对AMP的支持。谷歌也希望有更多的开发者参与他们的开源项目。</p><p id="3146" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> AMP对排名没有影响<br/> </strong>许多人似乎认为AMP对网站谷歌排名有影响，但是<strong class="it hv">根据</strong>大卫·贝斯布里斯<strong class="it hv">谷歌</strong>工程副总裁的说法——AMP是<em class="mb">不是</em>一个排名信号，而且可能不会是。这是因为AMP不能告诉谷歌任何其他当前活跃的排名信号已经告诉他们的事情。由于这是一个测试和研究的持续过程，他还说<strong class="it hv">他们不能排除任何可能性</strong>。</p><h1 id="caba" class="lk kj hu bd kk ll lm ln ko lo lp lq ks lr ls lt kv lu lv lw ky lx ly lz lb ma dt translated">那么我认为我们可以从AMP学到什么呢？</h1><p id="4551" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">根据我的经验，作为开发人员，我们需要学会关注页面性能，并完全控制页面内容。你知道你的400kb CSS文件中的每一段代码是做什么的吗？大概不会。如果你仔细想想，一个CSS文件可能永远不需要超过50kb的大小来用于一个单独的页面。开发人员还需要弄清楚我们网站上的所有脚本在做什么。它们什么时候加载，是阻止渲染还是触发页面重画？如果一个脚本没有被标记为“async”或者“deferred ”,那么为什么不是呢？</p><p id="7034" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果它不适合你的解决方案，你不必生气，我个人更愿意优先考虑一般的页面性能。考虑到AMPs的设计原则和性能最佳实践，无疑将是对任何webapp的一个很好的改进，但真正使AMP快速的是不阻塞关键的renderpath、优化资源、延迟加载，当然还有谷歌AMP-cache帮助下的缓存和预渲染的结合。</p><p id="d675" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">AMP项目确实为开发商和营销人员敲响了警钟。它试图解决一个严重的问题，而且快速、简单、有针对性。如果你的移动网站就像上面奥茨先生画的那样，你可能会被禁止使用我们所有的互联网。</p><p id="c703" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以我认为我们应该对我们的网页做的是:</p><ul class=""><li id="89e5" class="mr ms hu it b iu iv iy iz jc mt jg mu jk mv jo mw mx my mz dt translated">从遵循最佳性能实践开始(您为什么还没有这样做呢？)</li><li id="f3cf" class="mr ms hu it b iu na iy nb jc nc jg nd jk ne jo mw mx my mz dt translated">静态调整所有资源的大小</li><li id="3a2b" class="mr ms hu it b iu na iy nb jc nc jg nd jk ne jo mw mx my mz dt translated">内联关键CSS并使javascript异步加载</li><li id="dbf2" class="mr ms hu it b iu na iy nb jc nc jg nd jk ne jo mw mx my mz dt translated">优化字体</li><li id="a3cd" class="mr ms hu it b iu na iy nb jc nc jg nd jk ne jo mw mx my mz dt translated">让营销部门远离标签经理(是的，没错)</li><li id="3e56" class="mr ms hu it b iu na iy nb jc nc jg nd jk ne jo mw mx my mz dt translated">考虑AMP)</li></ul><p id="2cfb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">以及AMP设计原则的一些总结</p><blockquote class="mc"><p id="c4a4" class="md me hu bd mf mg mh mi mj mk ml jo ek translated">“如有疑问，请选择最有利于终端用户体验的方式”</p></blockquote><div class="nf ng nh ni nj ab cb"><figure class="nk jv nl nm nn no np paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="nk jv nl nm nn no np paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="nk jv nl nm nn no np paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="nq nr ns"><p id="f922" class="ir is mb it b iu iv iw ix iy iz ja jb nt jd je jf nu jh ji jj nv jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is mb it b iu iv iw ix iy iz ja jb nt jd je jf nu jh ji jj nv jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff nw"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="nx ny l"/></div></figure></div></div>    
</body>
</html>