<html>
<head>
<title>Bring static to life using serverless⚡</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用serverless⚡赋予静电以生命</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/bring-static-to-life-using-serverless-e722be5eaf84?source=collection_archive---------13-----------------------#2017-02-07">https://medium.com/hackernoon/bring-static-to-life-using-serverless-e722be5eaf84?source=collection_archive---------13-----------------------#2017-02-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="bc4e" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">使用Azure函数给你的静态网站注入活力</h2></div><p id="0ec7" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt kf translated">静态网站确实是最新的时尚，它们真的很棒，有很多好处。但是有时候需要提供一些动态内容，存储表单数据等。将小的动态部件/生命岛带到静态网站。<br/>在我看来，Azure Functions是一个完美的选择，您可以使用各种语言，如C#、F#、PowerShell、JavaScript等，快速创建定制的、易于使用的按使用付费功能。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div class="fe ff ko"><img src="../Images/fcac33c64da30e0b351da91d84c3f31b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*0T4t6t0Z0hgqmMnzFrciCw.png"/></div></figure><p id="1254" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在这篇文章中，我们将举例说明如何在网站上添加最后十篇中型博客文章，这些文章也必须有指定的标签。</p><p id="246e" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们将使用在<code class="eh kw kx ky kz b">https://medium.com/feed/@user</code>找到的用户媒体RSS提要提供的数据。</p><p id="8a42" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在这篇文章中，我假设你已经对Azure函数有了一些了解，如果你想了解更多关于函数入门的知识，我在这篇文章的末尾放了我以前的Azure函数的链接。</p><h1 id="e189" class="la lb hu bd lc ld le lf lg lh li lj lk ja ll jb lm jd ln je lo jg lp jh lq lr dt translated">服务器(少)端</h1><p id="8a73" class="pw-post-body-paragraph jj jk hu jl b jm ls iv jo jp lt iy jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">我们的Azure函数将下载RSS XML数据，只选择需要的内容(标题、链接和日期)显示在网站上，并从JavaScript可消费的JSON格式轻松返回，副作用是这也导致只下载一小部分数据，完全控制哪些项目和哪些数据被暴露。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/30373cee244ff3dbc97521830b53b44b.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*dY2cdBx5k1TTA0InKSt5DQ.png"/></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">First line medium unfiltered RSS feed, second line Azure Function data</figcaption></figure><p id="b61e" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这也使得它非常适合使用第三方API的移动应用程序，这样你可以节省字节，因为你不会吃掉他们的蜂窝数据计划，所以应用程序响应更快，用户更开心。</p><h2 id="3bac" class="mc lb hu bd lc md me mf lg mg mh mi lk js mj mk lm jw ml mm lo ka mn mo lq mp dt translated">该功能</h2><figure class="kp kq kr ks fq kt"><div class="bz el l di"><div class="mq mr l"/></div></figure><p id="1b85" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这个函数基本上将调用一个RSS feed helper方法，该方法将映射的数据作为JSON返回，然后该函数将其作为动态JavaScript文件返回，从而公开一个feed变量。</p><p id="5519" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">helper方法放在一个外部文件中，这使得它很容易被其他函数重用。</p><p id="25eb" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">根据设计，浏览器不允许缓存函数，这在大多数情况下非常合理。但是通过设置响应对象头的CacheControl属性，我们可以覆盖默认行为，让函数结果缓存10分钟。<br/>这意味着当用户浏览你的网站时，他们只会每十分钟点击一次那个功能，其余的时间从本地缓存获取，这将导致你省钱，用户获得更快的页面加载。</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div class="fe ff ms"><img src="../Images/86574471da9f0d6c19a27a53cca6afcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*p1AxKm1Jdet9RnL1YIs_Iw.png"/></div></figure><h2 id="6718" class="mc lb hu bd lc md me mf lg mg mh mi lk js mj mk lm jw ml mm lo ka mn mo lq mp dt translated">助手方法</h2><p id="1ba5" class="pw-post-body-paragraph jj jk hu jl b jm ls iv jo jp lt iy jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">因为函数给了你。NET和C#你可以用很少的代码行，获取，解析和映射你想要的数据。下面我使用XML/objects的LINQ来解析至少指定了一个类别的条目的标题、链接和发布日期(按照我的要求格式化)，然后使用JSON.Net将结果序列化为JSON。</p><figure class="kp kq kr ks fq kt"><div class="bz el l di"><div class="mq mr l"/></div></figure><h1 id="4f28" class="la lb hu bd lc ld le lf lg lh li lj lk ja ll jb lm jd ln je lo jg lp jh lq lr dt translated">客户端</h1><p id="eafa" class="pw-post-body-paragraph jj jk hu jl b jm ls iv jo jp lt iy jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">由于该函数是在JavaScript中公开的，因此不存在跨站点问题，您只需使用Script标记，就像从CDN中获取数据时一样。</p><h2 id="a6b1" class="mc lb hu bd lc md me mf lg mg mh mi lk js mj mk lm jw ml mm lo ka mn mo lq mp dt translated">模板</h2><p id="f518" class="pw-post-body-paragraph jj jk hu jl b jm ls iv jo jp lt iy jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">在这篇文章中，我选择了一个名为<a class="ae mt" href="https://github.com/janl/mustache.js/" rel="noopener ugc nofollow" target="_blank"> mustache.js </a>的非常基本的视图模板引擎，它是<a class="ae mt" href="http://mustache.github.io/" rel="noopener ugc nofollow" target="_blank"> mustache </a>模板语言的JavaScript实现。它支持提供对象作为模型，迭代和应用模板到数组中的每一项。</p><figure class="kp kq kr ks fq kt"><div class="bz el l di"><div class="mq mr l"/></div></figure><p id="78fc" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">只要绑定一个JavaScript对象作为变量，就可以很容易地使用任何你想要的模板引擎，无论是React，Angular，Aurelia等等。<br/> Azure functions确实支持<a class="ae mt" href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing" rel="noopener ugc nofollow" target="_blank"> CORS </a>，当然也只是返回JSON consumable作为任何rest API。</p><h2 id="f1d3" class="mc lb hu bd lc md me mf lg mg mh mi lk js mj mk lm jw ml mm lo ka mn mo lq mp dt translated">结果</h2><p id="69fd" class="pw-post-body-paragraph jj jk hu jl b jm ls iv jo jp lt iy jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">模板的最终结果看起来像下面这样</p><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div class="fe ff mu"><img src="../Images/3b11b1c5ba1df080f1cc133045254aa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*ghzsUXz3ROLByLwwrG-85g.png"/></div></figure><h1 id="9424" class="la lb hu bd lc ld le lf lg lh li lj lk ja ll jb lm jd ln je lo jg lp jh lq lr dt translated">结论</h1><p id="d776" class="pw-post-body-paragraph jj jk hu jl b jm ls iv jo jp lt iy jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">我认为云和天空才是真正的极限，天蓝色的功能确实比第一眼看到的更多样。</p><h2 id="7635" class="mc lb hu bd lc md me mf lg mg mh mi lk js mj mk lm jw ml mm lo ka mn mo lq mp dt translated">代码</h2><p id="5d31" class="pw-post-body-paragraph jj jk hu jl b jm ls iv jo jp lt iy jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">这个函数的完整代码示例可以在GitHub上找到</p><div class="mv mw fm fo mx my"><a href="https://github.com/azurevoodoo/BreathLifeIntoStaticSiteWithAzureFunctions" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab ej"><div class="na ab nb cl cj nc"><h2 class="bd hv fv z el nd eo ep ne er et ht dt translated">azurevoodoo/breathlifintostaticsite with azurefunctions</h2><div class="nf l"><h3 class="bd b fv z el nd eo ep ne er et ek translated">用Azure功能给静态网站注入活力</h3></div><div class="ng l"><p class="bd b gc z el nd eo ep ne er et ek translated">github.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm ku my"/></div></div></a></div><h2 id="3ca0" class="mc lb hu bd lc md me mf lg mg mh mi lk js mj mk lm jw ml mm lo ka mn mo lq mp dt translated">之前关于Azure函数的帖子</h2><div class="mv mw fm fo mx my"><a rel="noopener follow" target="_blank" href="/@devlead/azure-deployment-microsoft-teams-ed1c15df4a08"><div class="mz ab ej"><div class="na ab nb cl cj nc"><h2 class="bd hv fv z el nd eo ep ne er et ht dt translated">⚡Azure部署-&gt;微软团队</h2><div class="nf l"><h3 class="bd b fv z el nd eo ep ne er et ek translated">使用Azure函数将Azure应用服务部署通知连接到微软团队通道</h3></div><div class="ng l"><p class="bd b gc z el nd eo ep ne er et ek translated">medium.com</p></div></div><div class="nh l"><div class="nn l nj nk nl nh nm ku my"/></div></div></a></div><div class="mv mw fm fo mx my"><a rel="noopener follow" target="_blank" href="/@devlead/going-serverless-with-powershell-705677a9ae86"><div class="mz ab ej"><div class="na ab nb cl cj nc"><h2 class="bd hv fv z el nd eo ep ne er et ht dt translated">使用PowerShell实现无服务器化</h2><div class="nf l"><h3 class="bd b fv z el nd eo ep ne er et ek translated">为什么JavaScript开发者应该享受所有的乐趣？</h3></div><div class="ng l"><p class="bd b gc z el nd eo ep ne er et ek translated">medium.com</p></div></div><div class="nh l"><div class="no l nj nk nl nh nm ku my"/></div></div></a></div><div class="kp kq kr ks fq ab cb"><figure class="np kt nq nr ns nt nu paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="np kt nq nr ns nt nu paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="np kt nq nr ns nt nu paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="nv nw nx"><p id="f922" class="jj jk ny jl b jm jn iv jo jp jq iy jr nz jt ju jv oa jx jy jz ob kb kc kd ke hn dt translated"><a class="ae mt" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae mt" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae mt" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae mt" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jj jk ny jl b jm jn iv jo jp jq iy jr nz jt ju jv oa jx jy jz ob kb kc kd ke hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae mt" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae mt" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kp kq kr ks fq kt fe ff paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="fe ff oc"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>