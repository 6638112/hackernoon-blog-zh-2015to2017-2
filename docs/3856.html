<html>
<head>
<title>Code Reviews</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">代码审查</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/code-reviews-8c496601b9a9?source=collection_archive---------2-----------------------#2017-04-27">https://medium.com/hackernoon/code-reviews-8c496601b9a9?source=collection_archive---------2-----------------------#2017-04-27</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="b687" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">这是我的</em> <a class="ae jq" href="https://www.samjarman.co.nz/diaries" rel="noopener ugc nofollow" target="_blank"> <em class="jp">初级开发者日记</em> </a> <em class="jp">博客系列的第五篇文章。我每周都在写更多，你可以在我的网站</em> <a class="ae jq" href="https://www.samjarman.co.nz/diaries/" rel="noopener ugc nofollow" target="_blank"> <em class="jp">上注册收听更多并阅读以前的帖子。</em>T11】</a></p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff jr"><img src="../Images/946186d3d0048bfb774519f25888d650.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6C1fZeVS8STUNPiFewdCbA.jpeg"/></div></div></figure><p id="b6b7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">参与代码评审是我职业生涯中最有趣的学习经历之一。我做了一些非常愚蠢的事情，在过去的两年里，我参与了400多条评论，从中我学到了很多。他们可以教你很多关于你自己和你的代码的东西，今天我很高兴告诉你更多关于他们的事情。</p><p id="94bc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">那么什么是代码审查，<em class="jp">真的是</em>？代码评审是讨论和辩论代码的时间，这些代码将由团队继续前进。团队的一个或多个成员将编写代码，团队的其他成员或子集将确定代码是否符合标准，从而为代码库增加价值。</p><p id="952d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从更微观的角度来看，代码评审是一个抽象的概念，指的是当你完成一项任务时，对方法和代码进行评审的过程。在我看来，代码审查有两个不同的阶段。</p><p id="1ba3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以，你已经花了几个小时或几天阅读现有的代码，了解那里有什么，数据如何流动，以及你需要做什么改变。在这一点上，你大概有20%的投入。从这里开始，你向上级提出你的改变。首先，他们会尊重你在打扰他们之前所做的工作(他们的时间有时有点宝贵)，其次，凭借你的知识，以及他们也可能拥有的知识，他们将能够与你就方法进行讨论，可能会建议一些小的调整，甚至要求你重新开始(抱歉，但这发生在我们所有人身上)。</p><p id="bb83" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦决定了，就该写代码了。这将把您带到主要的代码审查，此时您大约完成了90%,这实际上只是就代码设计和其他一些事情达成一致的问题。</p><h1 id="17d6" class="kd ke hu bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">作为提交者</h1><p id="a255" class="pw-post-body-paragraph ir is hu it b iu lb iw ix iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo hn dt translated">因此，让我们来谈谈创建伟大的拉式请求(PR)的关键技巧，这是审查代码的现代机制。</p><p id="788f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先是用你的PR讲一个故事。你已经花了所有的时间去思考它，但是评论者没有。所以告诉他们你的思考过程，然后描述你实现它的一系列逻辑步骤。作为评论者，我关注两件事:你的提交日志和你的公关描述。</p><p id="cddc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您的提交应该是采取的一系列步骤。所有代码都应与其各自的单元测试配对，并且每次提交都应遵循以下规则:</p><ol class=""><li id="0b9f" class="lg lh hu it b iu iv iy iz jc li jg lj jk lk jo ll lm ln lo dt translated">用一个空行将主题和正文分开</li><li id="189c" class="lg lh hu it b iu lp iy lq jc lr jg ls jk lt jo ll lm ln lo dt translated">将主题行限制在50个字符以内</li><li id="c656" class="lg lh hu it b iu lp iy lq jc lr jg ls jk lt jo ll lm ln lo dt translated">大写主题行</li><li id="b776" class="lg lh hu it b iu lp iy lq jc lr jg ls jk lt jo ll lm ln lo dt translated">不要以句号结束主题行</li><li id="fe5e" class="lg lh hu it b iu lp iy lq jc lr jg ls jk lt jo ll lm ln lo dt translated">在主题行中使用祈使语气</li><li id="8aa6" class="lg lh hu it b iu lp iy lq jc lr jg ls jk lt jo ll lm ln lo dt translated">在72个字符处换行</li><li id="958b" class="lg lh hu it b iu lp iy lq jc lr jg ls jk lt jo ll lm ln lo dt translated">用身体来解释什么和为什么以及如何</li></ol><p id="80be" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">更多细节可以在Chris Beams的博客上找到。你应该读一读。</p><p id="e0ab" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，一旦您有了逻辑提交，没有“从主服务器合并”或“修复”或“尝试一些fbdifha ahhh”提交，我们就可以开始审查了。PS，一旦你准备好开始准备提交，使用交互式git重置和软git重置可能会对你有所帮助。</p><p id="d8fe" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，公关描述。在我看来，这应该包含几样东西</p><ol class=""><li id="ce4d" class="lg lh hu it b iu iv iy iz jc li jg lj jk lk jo ll lm ln lo dt translated">你正在解决的原始问题的链接(如GitHub问题或JIRA门票或其他)</li><li id="b3ed" class="lg lh hu it b iu lp iy lq jc lr jg ls jk lt jo ll lm ln lo dt translated">思维过程概述</li><li id="34b4" class="lg lh hu it b iu lp iy lq jc lr jg ls jk lt jo ll lm ln lo dt translated">你如何在本地进行测试(例如“我运行了这个服务和X服务，并使用cURL来确认新的请求行为是否如预期的那样工作”)</li><li id="7786" class="lg lh hu it b iu lp iy lq jc lr jg ls jk lt jo ll lm ln lo dt translated">你认为你可能会打破这个公关(但你已经检查了它没有)</li><li id="485c" class="lg lh hu it b iu lp iy lq jc lr jg ls jk lt jo ll lm ln lo dt translated">你想让评论者具体评论什么(比如类名，代码的时间复杂度，等等)</li></ol><p id="a3fc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦你这样做了，评审者就能够快速地跟上代码的速度，并关注代码的质量和影响。接近团队中的一个成员，也许是两个，要求进行代码评审。尽量确保是在整个编码过程中没有给你太多帮助的人，这样你对代码就有了一个新的视角。</p><p id="5bf0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，在你提交你的评论之前，做你自己的。检查，我的提交看起来对吗？我有没有留下调试代码？我有没有在任何测试关键词中离开(我总是在rspec的焦点中离开)。代码是否与我预期的有所不同？这90秒的检查可以让审查者避免一大堆混乱。</p><h1 id="aad5" class="kd ke hu bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la dt translated">作为评审者</h1><p id="733d" class="pw-post-body-paragraph ir is hu it b iu lb iw ix iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo hn dt translated">我必须向代码审查者指出的最重要的一点是<strong class="it hv">审查代码是工作</strong>。这是给公司增加价值，虽然这可能不是你的<em class="jp">任务，但也同样重要。团队已经决定由提交者完成的工作足够重要，应该马上完成，所以你应该这样对待它，并真正拥有它。</em></p><p id="d195" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以，花点时间进行代码评审。花很多时间审查代码是可以的，把它作为你正在做的事情说出来也是可以的。仓促的代码评审将来只会反过来咬你一口。你可能是下一个在那个领域工作的人！</p><p id="cb32" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在开始阅读代码之前，请确保点击提交和PR描述以获得更多的上下文信息。如果评论者有问题，也要回答，慢慢来。如果您不确定代码是否真的能工作，那么检查一下分支，并尝试按照步骤来重现测试。记住；如果有疑问，请查看。</p><p id="88b3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，如果你发现自己对款式吹毛求疵，请扪心自问，为什么验绒员没有发现这一点？这是一个可以添加的新规则，还是我可以教给编码人员的东西？请记住，代码审查并不是真的可以由工具自动检查的东西，例如<a class="ae jq" href="http://www.swiftcleanapp.com/" rel="noopener ugc nofollow" target="_blank"> SwiftClean </a>、<a class="ae jq" href="https://github.com/rrrene/credo" rel="noopener ugc nofollow" target="_blank"> Credo </a>、<a class="ae jq" href="http://findbugs.sourceforge.net/" rel="noopener ugc nofollow" target="_blank"> FindBugs </a>、<a class="ae jq" href="http://batsov.com/rubocop/" rel="noopener ugc nofollow" target="_blank"> Rubocop </a>或<a class="ae jq" href="https://github.com/StyleCop" rel="noopener ugc nofollow" target="_blank"> StyleCop </a>，所以请确保您的代码拥有这些，并且它在您的CI上运行，如果发现任何违规行为，<strong class="it hv">则编译失败。</strong></p><p id="a0ac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，这个代码评审阶段可能有一些迭代。新的变更需要在现有变更的背景下重新审核，这可能会促使更多的必要变更。保持耐心，也鼓励提交者保持耐心。代码审查也是一个“离线”的好时机，鼓励白板或结对编程会话来讨论他们代码中的任何主要缺陷，或者做一些指导/辅导。理想情况下，来自同一个人的代码评审不应该包含相同的缺陷。</p><p id="4fb1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这就是代码审查。总之，作为一个提交者，计划，讲述故事，并把审查作为一个学习经验。作为评审者，放慢速度，仔细检查，尽可能自动化，并抓住机会改进你的团队。</p><p id="0cd3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">祝你好运！有什么问题吗？我很想听听！</p></div><div class="ab cl lu lv hc lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hn ho hp hq hr"><p id="a735" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">这是我的</em> <a class="ae jq" href="https://www.samjarman.co.nz/diaries" rel="noopener ugc nofollow" target="_blank"> <em class="jp">初级开发者日记</em> </a> <em class="jp">博客系列的第5篇帖子。我每周都在写更多，你可以在我的网站</em> <a class="ae jq" href="https://www.samjarman.co.nz/diaries/" rel="noopener ugc nofollow" target="_blank"> <em class="jp">上注册收听更多，阅读以前的帖子。</em> </a></p><div class="js jt ju jv fq ab cb"><figure class="mb jw mc md me mf mg paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mb jw mc md me mf mg paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mb jw mc md me mf mg paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mh mi mj"><p id="f922" class="ir is jp it b iu iv iw ix iy iz ja jb mk jd je jf ml jh ji jj mm jl jm jn jo hn dt translated"><a class="ae jq" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是阿美族家庭的一员。我们现在<a class="ae jq" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jq" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is jp it b iu iv iw ix iy iz ja jb mk jd je jf ml jh ji jj mm jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jq" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jq" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff mn"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>