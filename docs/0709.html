<html>
<head>
<title>Facebook API — The URL couldn’t be validated. Callback verification failed with the following errors</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">脸书API无法验证该URL。回调验证失败，出现以下错误</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/facebook-api-the-url-couldnt-be-validated-c1980581587b?source=collection_archive---------1-----------------------#2016-03-24">https://medium.com/hackernoon/facebook-api-the-url-couldnt-be-validated-c1980581587b?source=collection_archive---------1-----------------------#2016-03-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/e0e5601af0327720090f223805f953f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/format:webp/0*iWuHbqbp-b4ztsak.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">credit: <a class="ae jc" href="https://my.kualo.com/uk/knowledgebasekualo.php?kbcat=0&amp;article=120" rel="noopener ugc nofollow" target="_blank">https://my.kualo.com/uk/knowledgebasekualo.php?kbcat=0&amp;article=120</a></figcaption></figure><p id="a176" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">试图<a class="ae jc" href="https://developers.facebook.com/docs/messenger-platform/getting-started/app-setup/#webhook_setup" rel="noopener ugc nofollow" target="_blank">用强验证令牌设置FB messenger webhook </a>。有点像这样:<code class="eh kb kc kd ke b">o\/ERviEE\/vt0|&lt;E|\|</code></p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="fe ff kf"><img src="../Images/eea9843228de8dccac39fcef6d1d3453.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TWoxg-89HobSdkFo.png"/></div></div></figure><p id="9ba3" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">代码中也验证了这一点:</p><pre class="kg kh ki kj fq ko ke kp kq aw kr dt"><span id="bf27" class="ks kt hu ke b fv ku kv l kw kx">req.query['hub.verify_token'] === 'o\/ERviEE\/vt0|&lt;E|\|'</span></pre><p id="4bec" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">但是，从FB收到的值是:<code class="eh kb kc kd ke b">o\\/ERviEE\\/vt0|&lt;E|\\|</code></p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div class="fe ff ky"><img src="../Images/0d22fa30440bf116ebdb734161a252bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/0*MyvTgMCjMY-QEu9A.png"/></div></figure><p id="b650" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><strong class="jf hv">这是奇怪的</strong>。似乎没有关于<a class="ae jc" href="https://hackernoon.com/tagged/facebook" rel="noopener ugc nofollow" target="_blank">脸书</a>如何对特殊字符进行转义以验证令牌之类的<a class="ae jc" href="https://hackernoon.com/tagged/document" rel="noopener ugc nofollow" target="_blank">文档</a>参考。不确定其他实体是否也会出现这种情况。</p><p id="16bf" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated">结论:在使用特殊字符作为验证标记时，需要稍微小心一点。</p></div><div class="ab cl kz la hc lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="hn ho hp hq hr"><p id="2152" class="pw-post-body-paragraph jd je hu jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hn dt translated"><em class="lg">最初发布于</em><a class="ae jc" href="http://xameeramir.github.io/" rel="noopener ugc nofollow" target="_blank"><em class="lg">xameeramir . github . io</em></a><em class="lg">。</em></p><figure class="kg kh ki kj fq iv"><div class="bz el l di"><div class="lh li l"/></div></figure></div></div>    
</body>
</html>