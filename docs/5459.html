<html>
<head>
<title>Running and debugging AWS Lambda functions locally with the Serverless framework and VS Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用无服务器框架和VS代码在本地运行和调试AWS Lambda函数</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/running-and-debugging-aws-lambda-functions-locally-with-the-serverless-framework-and-vs-code-a254e2011010?source=collection_archive---------3-----------------------#2017-07-27">https://medium.com/hackernoon/running-and-debugging-aws-lambda-functions-locally-with-the-serverless-framework-and-vs-code-a254e2011010?source=collection_archive---------3-----------------------#2017-07-27</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="a87a" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">开发人员对AWS Lambda的抱怨之一是无法在本地运行和调试功能。至少对于Node.js来说，无服务器框架和VS代码提供了一个很好的解决方案。</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/2c9cb9a5aac459d2405f49be8430b367.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iu-ScNJcyMp1hFIkt2pAeA.png"/></div></div></figure><p id="afe8" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">无服务器框架的一个经常未被充分利用的特性是<a class="ae kr" href="https://serverless.com/framework/docs/providers/aws/cli-reference/invoke-local/" rel="noopener ugc nofollow" target="_blank">调用本地</a>命令，它通过模拟AWS Lambda环境在本地运行您的代码。当然，这不是一个完美的模拟，只适用于Node.js和Python，但对于大多数本地开发需求来说已经足够好了。</p><div class="ks kt fm fo ku kv"><a href="https://serverless.com/framework/docs/providers/aws/cli-reference/invoke-local/" rel="noopener  ugc nofollow" target="_blank"><div class="kw ab ej"><div class="kx ab ky cl cj kz"><h2 class="bd hv fv z el la eo ep lb er et ht dt translated">无服务器框架命令- AWS Lambda -调用本地</h2><div class="lc l"><h3 class="bd b fv z el la eo ep lb er et ek translated">使用无服务器框架在本地模拟AWS Lambda函数的调用</h3></div><div class="ld l"><p class="bd b gc z el la eo ep lb er et ek translated">serverless.com</p></div></div></div></a></div><p id="4795" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">使用VS代码，您可以<a class="ae kr" href="https://code.visualstudio.com/docs/nodejs/nodejs-debugging" rel="noopener ugc nofollow" target="_blank">调试Node.js </a>应用程序，包括启动外部程序的选项。</p><div class="ks kt fm fo ku kv"><a href="https://code.visualstudio.com/docs/nodejs/nodejs-debugging" rel="noopener  ugc nofollow" target="_blank"><div class="kw ab ej"><div class="kx ab ky cl cj kz"><h2 class="bd hv fv z el la eo ep lb er et ht dt translated">使用VS代码调试Node.js应用程序</h2><div class="lc l"><h3 class="bd b fv z el la eo ep lb er et ek translated">Visual Studio代码编辑器包括Node.js调试支持。设置断点、单步执行、检查变量等等。</h3></div><div class="ld l"><p class="bd b gc z el la eo ep lb er et ek translated">code.visualstudio.com</p></div></div><div class="le l"><div class="lf l lg lh li le lj jt kv"/></div></div></a></div><p id="fc15" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">将两者放在一起，你就有能力在本地运行和调试你的Lambda函数。</p><h2 id="e5a2" class="lk ll hu bd lm ln lo lp lq lr ls lt lu ke lv lw lx ki ly lz ma km mb mc md me dt translated">步骤1:安装无服务器框架作为开发依赖</h2><p id="3cee" class="pw-post-body-paragraph jv jw hu jx b jy mf iv ka kb mg iy kd ke mh kg kh ki mi kk kl km mj ko kp kq hn dt translated">一般来说，将<a class="ae kr" href="https://serverless.com/" rel="noopener ugc nofollow" target="_blank">无服务器</a>框架作为开发依赖项安装在项目中是个好主意，因为:</p><ol class=""><li id="b325" class="mk ml hu jx b jy jz kb kc ke mm ki mn km mo kq mp mq mr ms dt translated">它允许其他开发人员(和CI服务器)使用无服务器框架进行部署，而不必自己安装</li><li id="4fc9" class="mk ml hu jx b jy mt kb mu ke mv ki mw km mx kq mp mq mr ms dt translated">当您安装的无服务器框架版本与项目中的<code class="eh my mz na nb b">serverless.yml</code>文件所使用的版本不兼容时，它可以防止出现不兼容问题</li><li id="b27c" class="mk ml hu jx b jy mt kb mu ke mv ki mw km mx kq mp mq mr ms dt translated">因为无服务器版本1.16.0 <a class="ae kr" href="https://serverless.com/blog/serverless-v1.16.0/" rel="noopener ugc nofollow" target="_blank">开发依赖项被从部署包中排除</a>，所以它不会增加您的部署规模</li></ol><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff nc"><img src="../Images/9866af9bcd94a1db028a931a20105313.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*lkWbmVY_VbNVW5XdQOSH_g.png"/></div></figure><h2 id="0d64" class="lk ll hu bd lm ln lo lp lq lr ls lt lu ke lv lw lx ki ly lz ma km mb mc md me dt translated">步骤2:添加调试配置</h2><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nd"><img src="../Images/0b065fae99045037d6a1dd8296afeac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jrxODChsP8CCPReSoprDrg.png"/></div></div><figcaption class="ne nf fg fe ff ng nh bd b be z ek">Invoke the “sls invoke local” CLI command against the “hello” function with an empty object {} as input. It’s also possible to invoke the function with a JSON file, see doc: <a class="ae kr" href="http://bit.ly/2w1HrQh" rel="noopener ugc nofollow" target="_blank">http://bit.ly/2w1HrQh</a></figcaption></figure><h2 id="fd8a" class="lk ll hu bd lm ln lo lp lq lr ls lt lu ke lv lw lx ki ly lz ma km mb mc md me dt translated">第三步:享受！</h2><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff ni"><img src="../Images/b1240c08c9a3fc39165d8612fcc7674e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pAtRSsRQ_w3t3gfkbZsfig.png"/></div></div></figure><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nj"><img src="../Images/3cd25fb1805e649474f2fab41e1664d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HDz-9IXbf70KY2Kf_vsHVg.png"/></div></div></figure><p id="7921" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">好了，好了，简单了:-)</p><p id="4d21" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">有几点需要注意:</p><ul class=""><li id="0dfa" class="mk ml hu jx b jy jz kb kc ke mm ki mn km mo kq nk mq mr ms dt translated">如果您的函数依赖于环境变量，那么您可以在第2步的<code class="eh my mz na nb b">launch.json</code>配置文件中设置这些变量</li><li id="8223" class="mk ml hu jx b jy mt kb mu ke mv ki mw km mx kq nk mq mr ms dt translated">如果您的函数需要访问其他aws资源，那么您还需要为aws-sdk设置相关的环境变量(例如<code class="eh my mz na nb b">AWS_PROFILE</code>，以便在正确的AWS帐户中访问这些资源</li><li id="877f" class="mk ml hu jx b jy mt kb mu ke mv ki mw km mx kq nk mq mr ms dt translated">这种方法不适用于递归函数(好吧，递归将发生在已部署的Lambda函数上，所以您无法调试它)</li></ul></div><div class="ab cl nl nm hc nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="hn ho hp hq hr"><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="ab fr cl ns"><img src="../Images/8b4e4721bb1973db389b5b533d727ad1.png" data-original-src="https://miro.medium.com/v2/format:webp/0*b_1R345KzKSaI8sg.png"/></div></figure><p id="f870" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">嗨，我的名字是<strong class="jx hv">崔琰</strong>。我是一个<a class="ae kr" href="https://aws.amazon.com/developer/community/heroes/yan-cui/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv"> AWS无服务器英雄</strong> </a>和<a class="ae kr" href="https://bit.ly/production-ready-serverless" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv">量产无服务器</strong> </a>的作者。我已经在AWS中运行了近10年的大规模生产工作负载，我是一名架构师或首席工程师，涉足从银行、电子商务、体育流媒体到移动游戏等多个行业。我目前是一名专注于AWS和无服务器的独立顾问。</p><p id="c37e" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">你可以通过<a class="ae kr" href="mailto:theburningmonk.com" rel="noopener ugc nofollow" target="_blank">邮箱</a>、<a class="ae kr" href="https://twitter.com/theburningmonk" rel="noopener ugc nofollow" target="_blank"> Twitter </a>和<a class="ae kr" href="https://www.linkedin.com/in/theburningmonk/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系我。</p></div><div class="ab cl nl nm hc nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="hn ho hp hq hr"><p id="404d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">查看我的新课程，<a class="ae kr" href="https://theburningmonk.thinkific.com/courses/complete-guide-to-aws-step-functions" rel="noopener ugc nofollow" target="_blank"><strong class="jx hv">AWS步骤功能完整指南</strong> </a>。</p><p id="a329" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在本课程中，我们将介绍有效使用AWS Step Functions服务所需了解的一切。包括基本概念、HTTP和事件触发器、活动、设计模式和最佳实践。</p><p id="cd40" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在这里拿到你的副本。</p></div><div class="ab cl nl nm hc nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="hn ho hp hq hr"><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nt"><img src="../Images/2faf40b47320300fed81b3e09483ffb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZYcHhOOzUf5VB-Ri.png"/></div></div></figure><p id="ee8c" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">来了解AWS Lambda: CI/CD的操作性<strong class="jx hv">最佳实践</strong>，本地测试&amp;调试功能、日志记录、监控、分布式跟踪、canary部署、配置管理、认证&amp;授权、VPC、安全性、错误处理等等。</p><p id="8bb5" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">还可以用代码<strong class="jx hv"> ytcui </strong>获得<strong class="jx hv">票面价格6折</strong>。</p><p id="6aaf" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">点击此处获取您的副本<a class="ae kr" href="https://bit.ly/production-ready-serverless" rel="noopener ugc nofollow" target="_blank"/>。</p></div></div>    
</body>
</html>