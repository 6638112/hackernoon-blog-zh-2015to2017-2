<html>
<head>
<title>Running Docker on AWS EC2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在AWS EC2上运行Docker</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/running-docker-on-aws-ec2-83a14b780c56?source=collection_archive---------2-----------------------#2017-08-30">https://medium.com/hackernoon/running-docker-on-aws-ec2-83a14b780c56?source=collection_archive---------2-----------------------#2017-08-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/0649a415f8692cc1d981bb1071dcd6b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/0*N7-EQZy2B2ddAjr1."/></div></figure><p id="a651" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在这个快速教程中，我将向你展示如何在<strong class="ja hv"> AWS EC2 </strong>实例上安装<strong class="ja hv"> Docker </strong>并运行你的第一个<strong class="ja hv"> Docker容器</strong>。</p><p id="350a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 1 —设置EC2实例</strong></p><p id="8c4b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我已经做过一个关于如何创建一个<strong class="ja hv"> EC2 </strong>实例的<a class="ae jw" href="http://www.labouardy.com/deploying-go-app-to-aws-ec2/" rel="noopener ugc nofollow" target="_blank">教程</a>，所以我不再重复。有几个方面你会想与教程不同:</p><ul class=""><li id="774d" class="jx jy hu ja b jb jc jf jg jj jz jn ka jr kb jv kc kd ke kf dt translated">我们选择“<strong class="ja hv">亚马逊Linux AMI 2017.03.1 (HVM)，SSH卷类型</strong>”作为<strong class="ja hv"> AMI </strong>。确切的版本可能会随着时间的推移而改变。</li><li id="4346" class="jx jy hu ja b jb kg jf kh jj ki jn kj jr kk jv kc kd ke kf dt translated">我们将<strong class="ja hv">安全组</strong>配置如下。该设置允许从任何地方访问端口<strong class="ja hv"> 80 </strong> ( <strong class="ja hv"> HTTP </strong>)，也允许访问<strong class="ja hv"> SSH </strong>。</li></ul><figure class="km kn ko kp fq iv fe ff paragraph-image"><div class="fe ff kl"><img src="../Images/91f4469ffbd1867e28485991619d5f97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*2heo_vFJwCov2B-D."/></div></figure><p id="dfa9" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">继续启动实例，这需要几分钟时间:</p><figure class="km kn ko kp fq iv fe ff paragraph-image"><div class="fe ff kl"><img src="../Images/320e46a7178eb5dac19b8c5889741e59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*qaF_gxOAetG3Lh-c."/></div></figure><p id="6422" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 2 —安装对接器</strong></p><p id="74ed" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">一旦您的实例准备好使用，使用<strong class="ja hv">公共DNS </strong>和<strong class="ja hv">公共密钥</strong>通过<strong class="ja hv"> SSH </strong>连接到服务器:</p><figure class="km kn ko kp fq iv fe ff paragraph-image"><div class="fe ff kl"><img src="../Images/e70c575440b681bff302680bffdf3ae9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*05ADWWhy7NSXBaeA."/></div></figure><p id="c5fd" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">连接后，通过键入以下命令，使用<strong class="ja hv"> yum </strong>配置管理器安装<strong class="ja hv"> Docker </strong>:</p><blockquote class="kq kr ks"><p id="18a0" class="iy iz kt ja b jb jc jd je jf jg jh ji ku jk jl jm kv jo jp jq kw js jt ju jv hn dt translated">sudo yum更新-y</p><p id="5421" class="iy iz kt ja b jb jc jd je jf jg jh ji ku jk jl jm kv jo jp jq kw js jt ju jv hn dt translated">sudo yum install -y docker</p></blockquote><p id="6a21" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">接下来，启动docker服务:</p><figure class="km kn ko kp fq iv fe ff paragraph-image"><div class="fe ff kx"><img src="../Images/6fe2c96efe7b5c7e0818d08671bfec60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/0*vcv00FR7QZTtx0ro."/></div></figure><p id="d383" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">为了在没有<strong class="ja hv">根</strong>权限(<strong class="ja hv"> sudo </strong>)的情况下使用docker命令，我们需要将<strong class="ja hv"> ec2-user </strong>添加到<strong class="ja hv"> docker组</strong>:</p><blockquote class="kq kr ks"><p id="2647" class="iy iz kt ja b jb jc jd je jf jg jh ji ku jk jl jm kv jo jp jq kw js jt ju jv hn dt translated">sudo usermod-aG docker ec2-用户</p></blockquote><p id="3287" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">要验证docker是否正确安装，只需键入:</p><figure class="km kn ko kp fq iv fe ff paragraph-image"><div class="fe ff kl"><img src="../Images/2d0925e2ba82385a51ad9fbd278ab7a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*xzxQbl4M5tCYIO7e."/></div></figure><p id="04a4" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">正如你所看到的，docker的最新版本已经安装好了(<strong class="ja hv"> v17.03.1-ce </strong>)</p><p id="a670" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">恭喜你！现在您已经有了一个安装了<strong class="ja hv"> Docker </strong>的<strong class="ja hv"> EC2 </strong>实例。</p><p id="a985" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 3 —部署Docker容器</strong></p><p id="90bf" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">是时候运行您的第一个容器了</p><p id="3241" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">。我们将使用以下命令创建一个<strong class="ja hv"> nginx </strong>容器:</p><figure class="km kn ko kp fq iv fe ff paragraph-image"><div class="fe ff kl"><img src="../Images/6740ef134e8d3566f4f3ae35a7d19a39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*v5kqNV3-UP8MdteL."/></div></figure><p id="af67" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果我们运行list命令"<strong class="ja hv"> docker ps </strong>，我们可以看到一个<strong class="ja hv"> nginx容器</strong>已经从<strong class="ja hv"> nginx官方镜像</strong>中创建出来了。</p><figure class="km kn ko kp fq iv fe ff paragraph-image"><div class="fe ff kl"><img src="../Images/4639c3202eb8393a05b01d92e40f0007.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*Pi0pM3bavcd7a1et."/></div></figure><p id="fdb3" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">最后，您在浏览器中访问您的实例<strong class="ja hv">公共DNS名称</strong>，您应该看到如下所示:</p><figure class="km kn ko kp fq iv fe ff paragraph-image"><div class="fe ff kl"><img src="../Images/9965cfe866dc5db2fd945a987e98c4a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*eCDjHx2Z_Y09YN67."/></div></figure></div></div>    
</body>
</html>