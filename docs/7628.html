<html>
<head>
<title>From Zero to Production with Angular, Firebase, and GitLab CI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用Angular、Firebase和GitLab CI从零到生产</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/from-zero-to-production-with-angular-firebase-and-gitlab-ci-598181cfc6e5?source=collection_archive---------5-----------------------#2017-11-02">https://medium.com/hackernoon/from-zero-to-production-with-angular-firebase-and-gitlab-ci-598181cfc6e5?source=collection_archive---------5-----------------------#2017-11-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/b0c473a2857ef4f2ea677950d702d303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SbCpB0aCnNQSQYEu4NgNgg.png"/></div></div></figure><h1 id="0c11" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">短篇小说</h1><p id="5798" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">我将介绍从头构建应用程序的所有步骤:</p><ol class=""><li id="bf93" class="ky kz hu kc b kd la kh lb kl lc kp ld kt le kx lf lg lh li dt translated">我们将使用<a class="ae lj" href="https://github.com/angular/angular-cli" rel="noopener ugc nofollow" target="_blank"> angular-cli </a>生成一个新的应用程序。<em class="lk">(是流行的CLI工具，用于构建</em><a class="ae lj" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc hv"><em class="lk"/></strong></a><em class="lk">应用)</em></li><li id="2661" class="ky kz hu kc b kd ll kh lm kl ln kp lo kt lp kx lf lg lh li dt translated">接下来，我们将为我们的新项目设置<a class="ae lj" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc hv"> Firebase </strong> </a>以进行可能的API调用。(<em class="lk"> Firebase是非常受欢迎的后端替代品，它有助于轻松构建应用程序，而无需在基础架构上花费精力</em>)</li><li id="dcee" class="ky kz hu kc b kd ll kh lm kl ln kp lo kt lp kx lf lg lh li dt translated">此外，我们将使用Firebase托管来使我们的应用程序在开发和生产环境中运行。</li><li id="8592" class="ky kz hu kc b kd ll kh lm kl ln kp lo kt lp kx lf lg lh li dt translated">毕竟，我们将使用GitLab CI将所有部分整合在一起，并自动化<strong class="kc hv">构建</strong>、<strong class="kc hv">测试</strong>和<strong class="kc hv">部署</strong>阶段！</li></ol><p id="3a29" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">您可以在这里查看<strong class="kc hv"> </strong> <a class="ae lj" href="https://gitlab.com/kobvel/ng-gitlab-firebase" rel="noopener ugc nofollow" target="_blank"> <strong class="kc hv">最终回购</strong> </a>。但是请记住，该教程包括一些关于GitLab repo本身配置的信息。</p></div><div class="ab cl lt lu hc lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hn ho hp hq hr"><h1 id="9211" class="jc jd hu bd je jf ma jh ji jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz dt translated">#1生成应用程序</h1><p id="f095" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">首先，我们需要<a class="ae lj" href="https://docs.gitlab.com/ee/gitlab-basics/create-project.html" rel="noopener ugc nofollow" target="_blank">在<a class="ae lj" href="https://gitlab.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc hv"> GitLab </strong> </a>中创建一个空项目</a>。</p><p id="7b50" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">确保您已经在计算机上安装了angular-cli。你可以在这里找到说明<a class="ae lj" href="https://github.com/angular/angular-cli#installation" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="cf54" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">现在，我们能够生成新项目:</p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="5cb9" class="mo jd hu mk b fv mp mq l mr ms">$ ng new ng-gitlab-firebase</span><span id="6ae8" class="mo jd hu mk b fv mt mq l mr ms">$ cd ng-gitlab-firebase</span></pre><p id="9d88" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">接下来，我们将把一个新创建的本地项目与远程GitLab项目链接起来。</p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="9a21" class="mo jd hu mk b fv mp mq l mr ms">$ git init</span><span id="da94" class="mo jd hu mk b fv mt mq l mr ms">$ git remote add origin <a class="ae lj" href="https://gitlab.com/kobvel/ng-gitlab-firebase.git" rel="noopener ugc nofollow" target="_blank">https://gitlab.com/kobvel/ng-gitlab-firebase.git</a></span></pre></div><div class="ab cl lt lu hc lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hn ho hp hq hr"><h1 id="08eb" class="jc jd hu bd je jf ma jh ji jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz dt translated">#2消防基地设置</h1><p id="2b84" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">让我们在<a class="ae lj" href="https://console.firebase.google.com/u/0/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc hv"> Firebase控制台</strong> </a>中创建两个项目。第一个将对应于我们的默认生产环境(<strong class="kc hv"> ng-firebase)。</strong>其次是开发环境，负责开发周期需求(<strong class="kc hv"> ng-firebase-dev </strong>)。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mu"><img src="../Images/b1db571b8f2d84a15e64fcf7123342b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EEpQGKZbxQjvwfZAaSt0lQ.png"/></div></div><figcaption class="mv mw fg fe ff mx my bd b be z ek"><strong class="bd mz">ng-firebase-dev</strong> and <strong class="bd mz">ng-firebase </strong>new created projects in the Firebase console</figcaption></figure><p id="9275" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">向我们的本地项目添加与Firebase相关的npm模块。</p><pre class="mf mg mh mi fq mj mk ml mm aw mn dt"><span id="b775" class="mo jd hu mk b fv mp mq l mr ms">$ npm install angularfire2 firebase --save</span></pre><p id="ab25" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">下一步是初始化配置<strong class="kc hv"> Angular </strong>应用程序，以便与Firebase一起工作。打开<code class="eh na nb nc mk b">src/app/app.module.ts</code> …</p><figure class="mf mg mh mi fq iv"><div class="bz el l di"><div class="nd ne l"/></div><figcaption class="mv mw fg fe ff mx my bd b be z ek">src/app/app.module.ts</figcaption></figure><p id="dc70" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">LOC 4–6:Angular-Firebase对应库的导入。</p><p id="bded" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">LOC 17:用未知的配置初始化Firebase模块，我们将把它添加到我们的<code class="eh na nb nc mk b">src/environments/environment.ts</code>文件中。</p><p id="8273" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">让我们从我们的<strong class="kc hv">开发</strong>项目(<strong class="kc hv"> ng-firebase-dev </strong>)中获取firebase config，这是我们之前在firebase控制台中创建的。你可以从Firebase控制台的主页<em class="lk">概览</em>屏幕中点击“<strong class="kc hv">将Firebase添加到你的web应用</strong>”来获得它。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nf"><img src="../Images/6fa1f7af25e6cc795c13021e44769637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vnfOEqM8D6uJF_G0Ju469A.png"/></div></div><figcaption class="mv mw fg fe ff mx my bd b be z ek">Getting config from <strong class="bd mz">Firebase console </strong>by clicking on the <em class="ng">“</em><strong class="bd mz"><em class="ng">Add Firebase to your web app</em></strong><em class="ng">”</em></figcaption></figure><p id="bed9" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">基本上，从这个代码片段中，我们只需要获取<code class="eh na nb nc mk b">config</code>对象。让我们将它复制并粘贴到环境对象中，这样我们就可以将它用于Angular-Firebase配置。</p><figure class="mf mg mh mi fq iv"><div class="bz el l di"><div class="nd ne l"/></div></figure><p id="fe00" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">现在<code class="eh na nb nc mk b">firebaseConfig</code>属性匹配我们开发项目的配置对象。</p><p id="4429" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">对于<a class="ae lj" href="https://hackernoon.com/tagged/future" rel="noopener ugc nofollow" target="_blank">未来的</a>配置，我们需要几个<a class="ae lj" href="https://hackernoon.com/tagged/enviroment" rel="noopener ugc nofollow" target="_blank">环境</a>文件，它们将对应于不同的环境(开发/生产)。复制原始<code class="eh na nb nc mk b">environment.ts</code>文件，创建<code class="eh na nb nc mk b">environment.develop.ts</code>和<code class="eh na nb nc mk b">environment.production.ts</code>。</p><p id="5075" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">点睛之笔是将<code class="eh na nb nc mk b">environment.production.ts</code>的<code class="eh na nb nc mk b">firebaseConfig</code>对象更改为我们之前创建的<strong class="kc hv"> Firebase </strong>的生产项目中的相应配置。查例题<a class="ae lj" href="https://gitlab.com/kobvel/ng-gitlab-firebase/tree/master/src/environments" rel="noopener ugc nofollow" target="_blank"> <strong class="kc hv">此处</strong> </a>。</p><h2 id="add7" class="mo jd hu bd je nh ni nj ji nk nl nm jm kl nn no jq kp np nq ju kt nr ns jy nt dt translated"><em class="ng">在第2步之后，我们已经做好了使用Firebase的准备</em></h2><p id="a3cb" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">让我们设置一些基本的API调用来在屏幕上显示一些东西</p><figure class="mf mg mh mi fq iv"><div class="bz el l di"><div class="nd ne l"/></div><figcaption class="mv mw fg fe ff mx my bd b be z ek">src/app/app.component.ts</figcaption></figure><figure class="mf mg mh mi fq iv"><div class="bz el l di"><div class="nd ne l"/></div><figcaption class="mv mw fg fe ff mx my bd b be z ek">src/app/app.component.html</figcaption></figure><blockquote class="nu nv nw"><p id="a93d" class="ka kb lk kc b kd la kf kg kh lb kj kk nx lq kn ko ny lr kr ks nz ls kv kw kx hn dt translated">只有当您将<strong class="kc hv">关闭您实时数据库的安全规则</strong>时，上面的例子才有效。我们将在后面介绍如何从本地文件部署规则。但是为了确保您与<strong class="kc hv"> Firebase </strong>的交互工作正常，只需在Firebase设置中将<strong class="kc hv">写/读</strong>规则设置为真。</p></blockquote><p id="3a8b" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">您可以在Firebase控制台的<strong class="kc hv"> Database = &gt; Rules </strong>选项卡中找到提到的配置。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff oa"><img src="../Images/e1e8909e1766b364bb1dd95c356e2a12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jQtYWUNo1FmYmSiUkm5mzg.png"/></div></div><figcaption class="mv mw fg fe ff mx my bd b be z ek">Database/rules</figcaption></figure></div><div class="ab cl lt lu hc lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hn ho hp hq hr"><h1 id="9fb2" class="jc jd hu bd je jf ma jh ji jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz dt translated">#3 Firebase托管</h1><p id="a602" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">让我们的应用在现实世界中可见！</p><p id="fab1" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">正在安装<code class="eh na nb nc mk b">firebase-tools</code>，因此我们的CI将能够使用firebase相关命令。</p><p id="8962" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated"><code class="eh na nb nc mk b">$ npm install firebase-tools --save-dev</code></p><p id="7a74" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated"><code class="eh na nb nc mk b">$ touch .firebaserc firebase.json</code></p><p id="94ab" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">上面的命令将创建两个文件，我们将在稍后讨论，每个文件负责Firebase主机配置的一部分。</p><h2 id="bf98" class="mo jd hu bd je nh ni nj ji nk nl nm jm kl nn no jq kp np nq ju kt nr ns jy nt dt translated">firebase.json</h2><figure class="mf mg mh mi fq iv"><div class="bz el l di"><div class="nd ne l"/></div><figcaption class="mv mw fg fe ff mx my bd b be z ek">firebase.json</figcaption></figure><p id="cb26" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated"><strong class="kc hv">数据库</strong> : <code class="eh na nb nc mk b">rules</code>属性相当于Firebase控制台中的数据库/规则配置。基本上，保存数据库设置比在Firebase控制台中更改它们更方便。它们将在部署后<strong class="kc hv">更新</strong>。</p><p id="155b" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">通常情况下，你的项目不应该有<code class="eh na nb nc mk b">.write: true</code>！这不安全！我已经将它们设置为true，只是为了演示的目的，因为认证不会在本文中讨论。</p><p id="c34e" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated"><strong class="kc hv">托管:</strong> <code class="eh na nb nc mk b">public</code>属性是说我们要托管什么文件夹。只要我们在开发单页面应用程序，我们就希望我们的前端决定向每条路线显示什么，所以我们将<code class="eh na nb nc mk b">rewrites</code>设置为将任何URL重定向到<code class="eh na nb nc mk b">index.html</code>。</p><h2 id="1893" class="mo jd hu bd je nh ni nj ji nk nl nm jm kl nn no jq kp np nq ju kt nr ns jy nt dt translated">。firebaserc</h2><figure class="mf mg mh mi fq iv"><div class="bz el l di"><div class="nd ne l"/></div></figure><p id="ffba" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated"><code class="eh na nb nc mk b">.firebaserc</code>简单地说就是在哪里部署代码。<code class="eh na nb nc mk b">develop</code>是默认的。</p><p id="a057" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">确保值等于firebase项目实例的键名。而不是项目的名称。在我的例子中，生产实例等于<code class="eh na nb nc mk b">ng-firebase-241bb</code>，而不仅仅是<code class="eh na nb nc mk b">ng-firebase</code></p></div><div class="ab cl lt lu hc lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hn ho hp hq hr"><h1 id="cb60" class="jc jd hu bd je jf ma jh ji jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz dt translated">#4 GitLab Ci配置</h1><p id="c94b" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">为了能够从GitLab CI部署任何东西，我们需要允许它使用我们的主机。为此，我们只需生成<code class="eh na nb nc mk b">$FIREBASE_DEPLOY_KEY</code>。</p><p id="193a" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated"><code class="eh na nb nc mk b">$ firebase login:ci</code></p><p id="ac2e" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">执行此命令后，您将被重定向到浏览器。选择您的Firebase帐户并返回控制台。您应该会发现类似这样的内容:</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ob"><img src="../Images/ca73e403dfecba7014f957ad25738af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u6btTTLSY7c7ITvePVeUWA.png"/></div></div><figcaption class="mv mw fg fe ff mx my bd b be z ek">Firebase generating of the deploy token</figcaption></figure><p id="d87c" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">这一长串“成功！”信息是我们的新令牌。点击<strong class="kc hv">设置/CI CD/Secret变量打开GitLab项目配置。</strong></p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff oc"><img src="../Images/c4bfb15605ad8346a0d52fee9e37ee09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0w2sXw1N5868BS14Vfudqw.png"/></div></div><figcaption class="mv mw fg fe ff mx my bd b be z ek">Adding FIREBASE_DEPLOY_KEY</figcaption></figure><p id="cc09" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">如上所示填写键/值输入，然后单击—添加新变量。</p><h2 id="fd09" class="mo jd hu bd je nh ni nj ji nk nl nm jm kl nn no jq kp np nq ju kt nr ns jy nt dt translated">package.json</h2><p id="6bc1" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">现在，我们准备设置部署流程。我们需要在<code class="eh na nb nc mk b">package.json</code>中描述npm脚本，gitlab配置将使用这些脚本。</p><figure class="mf mg mh mi fq iv"><div class="bz el l di"><div class="nd ne l"/></div><figcaption class="mv mw fg fe ff mx my bd b be z ek">scripts object in the <strong class="ak">package.json</strong> file</figcaption></figure><ol class=""><li id="d9a3" class="ky kz hu kc b kd la kh lb kl lc kp ld kt le kx lf lg lh li dt translated"><code class="eh na nb nc mk b">predeploy</code> —告知firebase要在当前部署中使用预定义的别名。我们已经在<strong class="kc hv"> #3 Firebase Hosting </strong>一节中定义了它们。可用的有— <code class="eh na nb nc mk b">default</code>、<code class="eh na nb nc mk b">develop</code>、<code class="eh na nb nc mk b">production</code>。通过<code class="eh na nb nc mk b">$CI_ENVIRONMENT_SLUG</code>，我们将获得别名(生产或开发)的相应值，稍后我们将在。<code class="eh na nb nc mk b">gitlab-ci.yml</code>文件。</li><li id="6005" class="ky kz hu kc b kd ll kh lm kl ln kp lo kt lp kx lf lg lh li dt translated"><code class="eh na nb nc mk b">deploy</code> —使用我们之前定义为可变环境的deploy键简单地部署我们的应用程序。</li></ol><h2 id="e5f3" class="mo jd hu bd je nh ni nj ji nk nl nm jm kl nn no jq kp np nq ju kt nr ns jy nt dt translated">。gitlab-ci.yml</h2><figure class="mf mg mh mi fq iv"><div class="bz el l di"><div class="nd ne l"/></div></figure><p id="23fb" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">Yaml文件是非常自描述的，但是让我们注意一些时刻。</p><ul class=""><li id="99f7" class="ky kz hu kc b kd la kh lb kl lc kp ld kt le kx od lg lh li dt translated"><strong class="kc hv">部署</strong>由于每个阶段底部的参数<code class="eh na nb nc mk b">only</code>，开发/生产只发生在相应的分支。</li><li id="6fac" class="ky kz hu kc b kd ll kh lm kl ln kp lo kt lp kx od lg lh li dt translated"><strong class="kc hv"> LOC 16，27 </strong>:对于<strong class="kc hv">开发/生产</strong>部署，我们正在定义将由<code class="eh na nb nc mk b">npm run build</code>使用的环境变量。引擎盖下会发生类似<code class="eh na nb nc mk b">npm run build -e develop</code>的事情。</li><li id="c0de" class="ky kz hu kc b kd ll kh lm kl ln kp lo kt lp kx od lg lh li dt translated">同样在<strong class="kc hv"> package.json </strong>文件中我们使用了<code class="eh na nb nc mk b">firebase use $CI_ENVIRONMENT_SLUG</code>，所以它将变成<code class="eh na nb nc mk b">firebase use develop</code>。Firebase将从<code class="eh na nb nc mk b">.firebaserc</code>中知道当前部署使用哪个别名。</li></ul><h1 id="294a" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">结论</h1><p id="9b41" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">GitLab具有强大的内置CI/CD，使您的代码的整个交付周期易于设置。将它与<strong class="kc hv"> Firebase </strong>和<strong class="kc hv"> Angular </strong>框架相结合，将我们带到了快速web应用开发的新高度。</p><p id="bd82" class="pw-post-body-paragraph ka kb hu kc b kd la kf kg kh lb kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx hn dt translated">作为本教程的结果，一旦有一个提交被推送到<strong class="kc hv">主</strong>或<strong class="kc hv">开发</strong>分支，您将拥有应用程序的自动部署。这将链接到不同的数据库实例和主机。主分支对应于<strong class="kc hv">生产</strong>环境，<strong class="kc hv">开发</strong>分支对应于<strong class="kc hv">开发</strong>环境。</p><h1 id="262f" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">家庭任务</h1><p id="223f" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">在<code class="eh na nb nc mk b">.gitlab-ci.yml</code>文件中只描述了一个阶段——<strong class="kc hv">部署</strong>。尝试添加名为— <strong class="kc hv"> test </strong>的新阶段，以便在开始部署阶段之前运行测试。</p><figure class="mf mg mh mi fq iv"><div class="bz el l di"><div class="oe ne l"/></div></figure></div></div>    
</body>
</html>