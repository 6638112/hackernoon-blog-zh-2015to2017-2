<html>
<head>
<title>How to Construct the Web Application to Sleep Well at Night?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构造Web应用才能晚上睡得好？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-construct-the-web-application-to-sleep-well-at-night-302e7e7dc39f?source=collection_archive---------13-----------------------#2017-11-14">https://medium.com/hackernoon/how-to-construct-the-web-application-to-sleep-well-at-night-302e7e7dc39f?source=collection_archive---------13-----------------------#2017-11-14</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/876aeb38683f37a03c1e04d5b6b83536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TMLTessMIUwn3J_qNvq8PQ.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek"><a class="ae jg" href="https://pixabay.com/en/woman-girl-bella-read-sleep-2197947/" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><p id="e633" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv">你有多少次努力为你的前端项目</strong>挑选合适的技术堆栈？<strong class="jj hv">当我们在项目中第一次构建网络框架的时候有多难</strong>？<strong class="jj hv">你有多少个晚上睡不好觉</strong>？如果你喜欢我，那么这篇文章只适合你。</p><p id="b955" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如今，网络发展非常迅速。我们觉得如果我们不学习新的东西，那么从那天起我们就成了穴居人。有很多技术是用于web开发的，但是在这篇文章中，我只想关注React生态系统。因为我喜欢React library和它的生态系统，所以我花了很多时间对它进行了长期的研究和工作。</p><p id="4e26" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">本系列的前一篇文章可以在<a class="ae jg" href="https://hackernoon.com/applying-clean-architecture-on-web-application-with-modular-pattern-7b11f1b89011" rel="noopener ugc nofollow" target="_blank">如何在10分钟内将干净的架构组织成模块化模式</a>中找到</p><p id="5816" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">所以让我们开始吧。</p></div><div class="ab cl kf kg hc kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hn ho hp hq hr"><h1 id="3ae9" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">依赖性(框架和技术)</h1><ul class=""><li id="cd7d" class="lk ll hu jj b jk lm jo ln js lo jw lp ka lq ke lr ls lt lu dt translated"><a class="ae jg" href="https://github.com/aspnet/JavaScriptServices" rel="noopener ugc nofollow" target="_blank">JavaScript services</a>(React/Redux模板)</li><li id="b89b" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><a class="ae jg" href="https://github.com/mrholek/CoreUI-Free-Bootstrap-Admin-Template/tree/master/React_Full_Project" rel="noopener ugc nofollow" target="_blank">科瑞</a>(带<a class="ae jg" href="https://github.com/reactstrap/reactstrap" rel="noopener ugc nofollow" target="_blank">反应堆</a></li><li id="d875" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><a class="ae jg" href="https://github.com/Microsoft/TypeScript" rel="noopener ugc nofollow" target="_blank">打字稿</a></li><li id="ef89" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><a class="ae jg" href="https://github.com/webpack/webpack" rel="noopener ugc nofollow" target="_blank">网络包</a></li><li id="88e7" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><a class="ae jg" href="https://github.com/yarnpkg/yarn" rel="noopener ugc nofollow" target="_blank">纱</a></li><li id="aaab" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><a class="ae jg" href="https://github.com/sass/sass" rel="noopener ugc nofollow" target="_blank">萨斯</a></li><li id="e834" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated">其他:<a class="ae jg" href="https://github.com/ReactTraining/react-router" rel="noopener ugc nofollow" target="_blank"> react-router </a>，<a class="ae jg" href="https://github.com/react-tools/react-table" rel="noopener ugc nofollow" target="_blank"> react-table </a>，<a class="ae jg" href="https://github.com/erikras/redux-form" rel="noopener ugc nofollow" target="_blank"> redux-form </a>，<a class="ae jg" href="https://github.com/redux-observable/redux-observable" rel="noopener ugc nofollow" target="_blank"> redux-observable </a> …</li></ul></div><div class="ab cl kf kg hc kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hn ho hp hq hr"><h1 id="9108" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">SSR和CSR</h1><p id="080e" class="pw-post-body-paragraph jh ji hu jj b jk lm jm jn jo ln jq jr js ma ju jv jw mb jy jz ka mc kc kd ke hn dt translated">SSR代表<strong class="jj hv">服务器端渲染</strong>，CSR代表<strong class="jj hv">客户端渲染</strong>。查看<a class="ae jg" rel="noopener" href="/walmartlabs/the-benefits-of-server-side-rendering-over-client-side-rendering-5d07ff2cefe8">上的文章服务器端渲染优于客户端渲染的优势</a>，获得关于它的完整解释。我只提一点，因为我知道有人会问为什么我要用JavaScriptServices包来构建这篇文章的框架。很明显，我正在集中精力。NET Core，我看了一下其他技术，如NodeJS、Java、PHP、Python等，发现他们也有办法让服务器呈现脚本和相关的东西，如style、HTML…所以在这一次，我将告诉你我们如何使用。网络世界。</p><p id="69fe" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这种方法的一些警告是:</p><ul class=""><li id="6d05" class="lk ll hu jj b jk jl jo jp js md jw me ka mf ke lr ls lt lu dt translated">这使得开发更加复杂，因为现在我们还需要查看服务器控制台的启动，一些情况使得调试更加复杂。</li><li id="9832" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated">如果你预先转储了很多任务，那么第一次渲染会慢一点。</li></ul><p id="4091" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这种方法的好处是</p><ul class=""><li id="7d52" class="lk ll hu jj b jk jl jo jp js md jw me ka mf ke lr ls lt lu dt translated">这使得搜索引擎优化更好，更一致</li><li id="47bd" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated">最终用户会觉得内容出现得非常快，因为它已经在服务器端预先编写好了(如果我们缓存输出内容，那就更有意义了)</li></ul><blockquote class="mg mh mi"><p id="3944" class="jh ji mj jj b jk jl jm jn jo jp jq jr mk jt ju jv ml jx jy jz mm kb kc kd ke hn dt translated">老实说，如果你想建立一个网站，非常重搜索引擎优化相关，那么你应该考虑一下。有人问我这样一个问题，如果他们只为内部用户构建web应用程序，那么他们是否也需要考虑使用SSR方法来构建Web应用程序？在这种情况下，我想建议他们在前端开发方面自然地采用CSR方法。但这还是取决于你，我让你选择。</p></blockquote><p id="834f" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">敬请关注Visual Studio 2017中使项目采用SSR方法的一些简单步骤。首先，您需要选择为下图创建一个新的解决方案:</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/abe71c25a1fc5fc2be3862196383a637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0bwmHh8GAluiQDa4dmhePA.png"/></div></div></figure><p id="99ac" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">其次，它会将您带到以下屏幕:</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ms"><img src="../Images/9811731ea286251ee495d460be206d02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rolbFbM4sSuevVlk9kS83A.png"/></div></div></figure><p id="e3ee" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">最后一步，我们的项目结构如下</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div class="fe ff mt"><img src="../Images/b4b36bf9534ba81219796e7be65069b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:338/format:webp/1*ozmTyUDxfcwrX2yQBevgaQ.png"/></div></figure><p id="bca2" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">简单。不是吗？这只是为了任何人。NET开发人员与一个基本水平:)让推出其他以下激动人心的事情</p></div><div class="ab cl kf kg hc kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hn ho hp hq hr"><h1 id="1dca" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">为什么使用TypeScript？</h1><p id="b4b3" class="pw-post-body-paragraph jh ji hu jj b jk lm jm jn jo ln jq jr js ma ju jv jw mb jy jz ka mc kc kd ke hn dt translated">在这一节中，我只想说明我使用TypeScript的原因不仅是因为它的好处，而且我的团队也熟悉它。让我们先分析一下它的优点:</p><ul class=""><li id="0462" class="lk ll hu jj b jk jl jo jp js md jw me ka mf ke lr ls lt lu dt translated">我不再关心ES6、ES7、ES8…的发布了</li><li id="e694" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated">我不想在产品中出现一些与类型约束相关的幼稚异常</li><li id="25d1" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated">一个大的团队在一个大的基于代码的环境中工作，那么你需要有一种方法来避免常见的错误(类型系统错误)</li><li id="692b" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated">一个熟悉C#的后端团队，那么我们将受益于使用TypeScript(来自静态类型语言的许多概念，如类、接口……)</li></ul><p id="95a0" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">除此之外，我们还与输入系统斗争了许多个夜晚，就像在这篇文章中，当我使用react-table时，我试图从NPM获得<a class="ae jg" href="http://twitter.com/types/react-table" rel="noopener ugc nofollow" target="_blank"> @types/react-table </a>包，但是与最新的react-table包有很多冲突和不兼容。然后我才意识到，实际上，那个类型库并不属于react-table的作者(其他人维护它)。然后我决定在使用这个库时使用任何变量声明。</p><blockquote class="mg mh mi"><p id="47cb" class="jh ji mj jj b jk jl jm jn jo jp jq jr mk jt ju jv ml jx jy jz mm kb kc kd ke hn dt translated">我不想在TypeScript和Flow之间进行比较，因为这里有很多偏见。还有一个原因，因为我正在处理TypeScript，如果我谈论它将是不公平的。很多人在那里做比较。刚刚谷歌了一下<strong class="jj hv">。</strong></p></blockquote><h2 id="347d" class="mu kn hu bd ko mv mw mx ks my mz na kw js nb nc la jw nd ne le ka nf ng li nh dt translated">在TypeScript中使用非类型库(react-table)</h2><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/6b9e47988d17da2fa31387fec9e444f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*voHlryGHGFzFbD4xwrYqnQ.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek"><a class="ae jg" href="https://pixabay.com/en/dogs-pensive-reluctant-pet-sad-2195708/" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><p id="b5ce" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">实际上，在做项目时，我们发现有时我们需要使用非类型库(在这个例子中是react-table ),所以我们需要用<a class="ae jg" href="https://www.ecma-international.org/ecma-262/5.1/" rel="noopener ugc nofollow" target="_blank"> ES 5.1 </a>风格来声明它。让我们深入探讨一下如何让反应桌与他人合作愉快。我们需要将以下代码放入代码中:</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="addd" class="mu kn hu nj b fv nn no l np nq">const ReactTable: any = require('react-table').default;</span></pre><p id="3680" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在，我们可以在这个文件中的任何地方使用可重复获取的实例。假设我们按照如下方式处理和绑定表的数据</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="eae3" class="mu kn hu nj b fv nn no l np nq">const table = (<br/>  &lt;ReactTable<br/>    columns={columns}<br/>    manual<br/>    data={this.props.blogs}<br/>    className="-striped -highlight"<br/>    defaultPageSize={10}<br/>    showPageSizeOptions={false}<br/>    filterable<br/>    defaultSorted={[<br/>      {<br/>        id: 'title',<br/>        desc: true<br/>      }<br/>    ]}<br/>    pages={this.props.totalPages}<br/>    loading={this.props.loading}<br/>    onFetchData={this.fetchData}<br/>    getTdProps={(state: any, rowInfo: any, column: any, instance: any) =&gt; {<br/>      return {<br/>        onClick: (event: any, handleOriginal: any) =&gt; {<br/>          this.props.history.replace(`/admin/blog/${rowInfo.original.id}`);<br/>          if (handleOriginal) {<br/>            handleOriginal();<br/>          }<br/>        }<br/>      };<br/>    }}<br/>    previousText={&lt;i className="icon-arrow-left" /&gt;}<br/>    nextText={&lt;i className="icon-arrow-right" /&gt;}<br/>  /&gt;<br/>);</span></pre><p id="a2b6" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">正如您在上面的代码中看到的，有几个地方声明了任意类型。这很公平。因为现在我们将<strong class="jj hv">自己处理类型</strong>。这很简单，但是当我开始编码的时候，我遇到了很多麻烦，要找到一种方法使非类型库和其他库很好地工作。希望这个建议能帮助像我这样的人摆脱前期阶段的麻烦。</p></div><div class="ab cl kf kg hc kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hn ho hp hq hr"><h1 id="6cb2" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">鸭子打字</h1><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/f4093db59ae099b9a6376a0c50cb8fe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EmER71a0KyEt0cpr249dsw.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek"><a class="ae jg" href="https://pixabay.com/en/geese-goose-family-family-goslings-2494952/" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><blockquote class="mg mh mi"><p id="4437" class="jh ji mj jj b jk jl jm jn jo jp jq jr mk jt ju jv ml jx jy jz mm kb kc kd ke hn dt translated">“如果它走路像鸭子，叫声像鸭子，那它一定是鸭子。”— <a class="ae jg" href="https://en.wikipedia.org/wiki/Duck_typing" rel="noopener ugc nofollow" target="_blank">维基</a></p></blockquote><p id="2224" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">为了组织良好的代码，我使用duck typing来绑定web应用程序中的reducers、action类型和action。根据我的经验，我们需要在redux代码中反复处理<strong class="jj hv"> {actionTypes，actions，reducer} </strong>。有了<a class="ae jg" href="https://github.com/erikras" rel="noopener ugc nofollow" target="_blank"> Erik Rasmussen </a>提出的<a class="ae jg" href="https://github.com/erikras/ducks-modular-redux" rel="noopener ugc nofollow" target="_blank"> duck typing，我们可以避免大量杂乱的代码(功能代码)，并将它们转化为模块(业务代码)，这在将来修复bug方面也更有意义。让我们想象一下，你有一个bug，你需要找出引起bug的地方，那么你只需要去一个地方(这里是特定的模块)读取代码并调试它。</a></p><p id="a147" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我们看看如何组织下图中的代码:</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div class="fe ff nr"><img src="../Images/c81cdc6df70cadd3f3cc5d129d8fa12e.png" data-original-src="https://miro.medium.com/v2/resize:fit:404/format:webp/1*WBGzhqYxxDUDF3AvZMRWZw.png"/></div></figure><ul class=""><li id="3c97" class="lk ll hu jj b jk jl jo jp js md jw me ka mf ke lr ls lt lu dt translated"><strong class="jj hv">组件</strong>文件夹包含所有转储组件</li><li id="fe5b" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><strong class="jj hv"> Configs </strong>文件夹只包含配置信息，在这种情况下，它将文字对象导出到外部</li><li id="9a56" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><strong class="jj hv">容器</strong>文件夹包含所有智能组件</li><li id="c02a" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated">redux 文件夹包含modules文件夹，其中有几个duck typing这里那里管理redux副作用的中间件文件夹</li><li id="1a86" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><strong class="jj hv"> utils </strong>文件夹中包含了一些实用的代码，可以帮助完成一些复杂的工作，通常它是一个纯函数，这样就可以很容易地进行测试</li><li id="5b63" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><strong class="jj hv"> boot-client.tsx </strong>是一个引导客户端文件(因为我们跟进了JavaScript服务)</li><li id="272f" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><strong class="jj hv"> boot-server.tsx </strong>是一个引导服务器文件(做一些工作，比如准备路由器，再次存储…因为我们使用JavaScript服务)</li><li id="e6bb" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><strong class="jj hv"> routes.tsx </strong>包含系统中所有可能的路线</li></ul><p id="0c03" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在任何redux应用程序中，我们都需要动作、动作创建者、存储、副作用等等。随后，我会告诉你我如何用鸭子打字。</p><p id="f1b4" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">首先，我们添加我们想要使用的结构类型。假设博客类型如下</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="f460" class="mu kn hu nj b fv nn no l np nq">export type Blog = {<br/>  id: string;<br/>  title: string;<br/>  description?: string;<br/>  theme?: number;<br/>  image?: string;<br/>  postsPerPage: number;<br/>  daysToComment: number;<br/>  moderateComments: boolean;<br/>};</span></pre><p id="9bb2" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然后，我们添加BlogState接口</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="e8d2" class="mu kn hu nj b fv nn no l np nq">export interface BlogState {<br/>  loading: boolean;<br/>  loaded: boolean;<br/>  addLoading: boolean;<br/>  ids: any;<br/>  blogByIds: any;<br/>  blogSelected: Blog | null;<br/>  themes: Theme[];<br/>  error: any;<br/>  page: number;<br/>  totalPages: number;<br/>}</span></pre><blockquote class="mg mh mi"><p id="8cc4" class="jh ji mj jj b jk jl jm jn jo jp jq jr mk jt ju jv ml jx jy jz mm kb kc kd ke hn dt translated">原谅我这里的一些<strong class="jj hv">任何</strong>类型声明:(</p></blockquote><p id="2f0a" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们需要将几个动作类型声明为</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="56c5" class="mu kn hu nj b fv nn no l np nq">// Load blogs<br/>const LOAD_BLOGS = 'LOAD_BLOGS';<br/>const LOAD_BLOGS_SUCCESSED = 'LOAD_BLOGS_SUCCESSED';<br/>const LOAD_BLOGS_FAILED = 'LOAD_BLOGS_FAILED';</span><span id="533b" class="mu kn hu nj b fv ns no l np nq">// The rest of the source code in my GitHub</span></pre><p id="9424" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">他们每个人的行动</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="767d" class="mu kn hu nj b fv nn no l np nq">interface LoadBlogAction extends Action {<br/>  type: typeof LOAD_BLOGS;<br/>  page: number;<br/>}</span><span id="492f" class="mu kn hu nj b fv ns no l np nq">interface LoadBlogSuccessedAction extends Action {<br/>  type: typeof LOAD_BLOGS_SUCCESSED;<br/>  items: any;<br/>  totalPages: number;<br/>  page: number;<br/>}</span><span id="8eda" class="mu kn hu nj b fv ns no l np nq">interface LoadBlogFailedAction {<br/>  type: typeof LOAD_BLOGS_FAILED;<br/>  error: any;<br/>}</span><span id="b456" class="mu kn hu nj b fv ns no l np nq">// The rest of the source code in my GitHub<br/>...</span></pre><p id="d1a3" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然后，我们定义了减速器的知识</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="4f75" class="mu kn hu nj b fv nn no l np nq">export type KnownAction =<br/> | LoadBlogAction<br/> | LoadBlogSuccessedAction<br/> | LoadBlogFailedAction<br/> // The rest of the source code in my GitHub<br/>;</span></pre><p id="3dd7" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">一些史诗(在这种情况下是可重复观察的)来处理副作用</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="ae42" class="mu kn hu nj b fv nn no l np nq">export const blogEpics: any = [<br/>  (action$: ActionsObservable&lt;LoadBlogAction&gt;): Observable&lt;Action&gt; =&gt; {<br/>    return action$<br/>      .ofType(LOAD_BLOGS)<br/>      .debounceTime(100)<br/>      .switchMap(action =&gt;<br/>        blogRequest<br/>          .loadBlogs(action.page)<br/>          .map(result =&gt; {<br/>            return actionCreators.loadBlogsByPageSuccessed(result.response);<br/>          })<br/>          .catch(error =&gt;<br/>            Observable.of(actionCreators.loadBlogsByPageFailed(error))<br/>          )<br/>      );<br/>  }</span><span id="1273" class="mu kn hu nj b fv ns no l np nq">  // The rest of the source code in my GitHub.<br/>];</span></pre><p id="309f" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在这篇文章中，我不会解释我用redux-observable做了什么。查看<a class="ae jg" rel="noopener" href="/dailyjs/using-redux-observable-to-handle-asynchronous-logic-in-redux-d49194742522">使用redux-observable处理Redux </a>中的异步逻辑，了解您需要的更多信息。</p><p id="1c13" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们将他们的操作创建者定义如下:</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="f8f1" class="mu kn hu nj b fv nn no l np nq">export const actionCreators = {<br/>  loadBlogsByPage: (page: number): Action =&gt;<br/>    &lt;LoadBlogAction&gt;{ type: LOAD_BLOGS, page },</span><span id="a607" class="mu kn hu nj b fv ns no l np nq">  loadBlogsByPageSuccessed: (data: any) =&gt;<br/>    &lt;LoadBlogSuccessedAction&gt;{ type: LOAD_BLOGS_SUCCESSED, ...data     },</span><span id="588c" class="mu kn hu nj b fv ns no l np nq">  loadBlogsByPageFailed: (error: any) =&gt;<br/>    &lt;LoadBlogFailedAction&gt;{ type: LOAD_BLOGS_FAILED, error },</span><span id="2dff" class="mu kn hu nj b fv ns no l np nq">  // The rest of the source code in my GitHub<br/>};</span></pre><p id="e5bd" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">最后一步，我们为缩减器定义以下代码</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="a76e" class="mu kn hu nj b fv nn no l np nq">export const reducer: Reducer&lt;BlogState&gt; = (<br/>  state: BlogState,<br/>  action: KnownAction<br/>) =&gt; {<br/>  switch (action.type) {<br/>    case LOAD_BLOGS:<br/>      return {<br/>        ...state,<br/>        loading: true<br/>      };</span><span id="cb70" class="mu kn hu nj b fv ns no l np nq">    case LOAD_BLOGS_SUCCESSED:<br/>      console.log(action);<br/>      return {<br/>        ...state,<br/>        ids: action.items.map((blog: Blog) =&gt; blog.id),<br/>        blogByIds: action.items.reduce((obj: any, blog: Blog) =&gt; {<br/>          obj[blog.id] = blog;<br/>          return obj;<br/>        }, {}),<br/>        loaded: true,<br/>        loading: false,<br/>        page: action.page || 0,<br/>        totalPages: action.totalPages,<br/>        blogSelected: null<br/>      };</span><span id="4468" class="mu kn hu nj b fv ns no l np nq">     case LOAD_BLOGS_FAILED:<br/>      return {<br/>        ...state,<br/>        ids: [],<br/>        blogByIds: {},<br/>        error: action.error,<br/>        loaded: true,<br/>        loading: false,<br/>        page: 0,<br/>        blogSelected: null<br/>      };</span><span id="dcf6" class="mu kn hu nj b fv ns no l np nq">     // The rest of the source code in my GitHub</span><span id="952b" class="mu kn hu nj b fv ns no l np nq">     default:<br/>      const exhaustiveCheck: never = action;<br/>      if (typeof exhaustiveCheck != 'undefined') break;<br/>  }</span><span id="270d" class="mu kn hu nj b fv ns no l np nq">return (<br/>    state || {<br/>      loading: true,<br/>      loaded: false,<br/>      redirectTo: '/',<br/>      ids: [],<br/>      blogByIds: [],<br/>      blogSelected: null,<br/>      themes: [<br/>        {<br/>          value: 1,<br/>          label: 'Default'<br/>        }<br/>      ],<br/>      error: null,<br/>      page: 0,<br/>      totalPages: 0<br/>    }<br/>  );<br/>};</span></pre><p id="a48b" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">就是这样。并且应该在一个文件(blog.ts)中。</p><blockquote class="mg mh mi"><p id="888d" class="jh ji mj jj b jk jl jm jn jo jp jq jr mk jt ju jv ml jx jy jz mm kb kc kd ke hn dt translated"><strong class="jj hv">有时候，觉得这个文件太长了。你对有效组织有什么建议吗？欢迎在最后评论，我很乐意讨论它。</strong></p></blockquote></div><div class="ab cl kf kg hc kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hn ho hp hq hr"><h1 id="7344" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">几个点或太多点</h1><p id="4ccd" class="pw-post-body-paragraph jh ji hu jj b jk lm jm jn jo ln jq jr js ma ju jv jw mb jy jz ka mc kc kd ke hn dt translated">你的代码有没有遇到过以下问题？</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="3207" class="mu kn hu nj b fv nn no l np nq">import {  ComponentA,  ComponentB,  ComponentC,  ComponentE} from '../../../../components';</span></pre><p id="ac86" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">它会把你的代码变成混乱臃肿的结构。如果你觉得在这个问题上很烦，我会帮你做得更好。</p><p id="8541" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">第一步，将index.js文件放在每个根文件夹结构中，收集相关的东西，如下图所示:</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div class="fe ff nt"><img src="../Images/dec457b3580e009d1fbe5542450914de.png" data-original-src="https://miro.medium.com/v2/resize:fit:344/format:webp/1*9D-0ZprRu3c8uUlPUAxjug.png"/></div></figure><p id="866e" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在这种情况下，里面的代码是</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="bee4" class="mu kn hu nj b fv nn no l np nq">export { default as Aside } from './Aside/Aside';<br/>export { default as Breadcrumb } from './Breadcrumb/Breadcrumb';<br/>export { default as Footer } from './Footer/Footer';<br/>export { default as Header } from './Header/Header';<br/>export { default as Sidebar } from './Sidebar/Sidebar';<br/>export { renderTextBoxField as TextBoxField, renderNumberField as NumberField, renderSingleSelectField as SingleSelectField } from './Form/Input';<br/>export { default as CheckboxField } from './Form/Checkbox';<br/>export { confirmationBox as ConfirmationBox } from './Confirmation/ConfirmationBox';</span></pre><p id="94cf" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">第二步，我们需要让Webpack config也知道它</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="3443" class="mu kn hu nj b fv nn no l np nq">resolve: {<br/>  extensions: [".js", ".jsx", ".ts", ".tsx"],<br/>  alias: {<br/>    OurComponents: path.resolve(__dirname, "./ClientApp/components/"),<br/>    OurModules: path.resolve(__dirname, "./ClientApp/redux/modules/"),<br/>    OurConfigs: path.resolve(__dirname, "./ClientApp/configs/"),<br/>    OurUtils: path.resolve(__dirname, "./ClientApp/utils/")<br/>  }<br/>}</span></pre><p id="ab64" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在Webpack将为您的代码做别名，但我们还需要让TypeScript解释器知道这一点:)。在tsconfig.json文件中放入以下代码</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="25bd" class="mu kn hu nj b fv nn no l np nq">"paths": {<br/>  "OurComponents": ["./ClientApp/components"],<br/>  "OurComponents/*": ["./ClientApp/components/*"],<br/>  "OurModules": ["./ClientApp/redux/modules"],<br/>  "OurModules/*": ["./ClientApp/redux/modules/*"],<br/>  "OurConfigs": ["./ClientApp/configs"],<br/>  "OurConfigs/*": ["./ClientApp/configs/*"],<br/>  "OurUtils": ["./ClientApp/utils"],<br/>  "OurUtils/*": ["./ClientApp/utils/*"]<br/>}</span></pre><p id="28d1" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">就是这样。让我们看看现在引用我们的组件有多容易</p><pre class="mo mp mq mr fq ni nj nk nl aw nm dt"><span id="a3fd" class="mu kn hu nj b fv nn no l np nq">import { Breadcrumb, Sidebar, Header, Footer } from 'OurComponents';</span></pre><p id="0aa4" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我真的很喜欢这种方式。你呢？</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div class="fe ff nu"><img src="../Images/256d5fbf75577afba2dd418d387159ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*ROWyhfd-NVtlcL7g0XE3hg.jpeg"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek"><a class="ae jg" href="https://pixabay.com/en/baby-happy-clap-smile-fun-2320701/" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure></div><div class="ab cl kf kg hc kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hn ho hp hq hr"><h1 id="ba05" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">概述</h1><p id="32d7" class="pw-post-body-paragraph jh ji hu jj b jk lm jm jn jo ln jq jr js ma ju jv jw mb jy jz ka mc kc kd ke hn dt translated">在本文中，我们将介绍几种更有效地组织代码的方法。我们分析了我们<strong class="jj hv">选择SSR方法</strong>的一些原因，然后我们<strong class="jj hv">喜欢用TypeScript进行代码打字</strong>的原因。随后，我们<strong class="jj hv">以冗余的方式讨论鸭分型</strong>。最后，我们给你一个在代码中操作文件结构时避免过多点的提示。再者，我们其实越来越想分享，只是想让你建议一下。我知道我有很多东西要学，所以请随意评论如下。我非常渴望收到你的来信。</p></div><div class="ab cl kf kg hc kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hn ho hp hq hr"><h1 id="0afa" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">资源</h1><p id="7d56" class="pw-post-body-paragraph jh ji hu jj b jk lm jm jn jo ln jq jr js ma ju jv jw mb jy jz ka mc kc kd ke hn dt translated">本文的源代码可以在我的<a class="ae jg" href="https://github.com/thangchung/blog-core" rel="noopener ugc nofollow" target="_blank"> GitHub </a>找到</p></div><div class="ab cl kf kg hc kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hn ho hp hq hr"><h1 id="6df0" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">附加阅读</h1><ul class=""><li id="17c8" class="lk ll hu jj b jk lm jo ln js lo jw lp ka lq ke lr ls lt lu dt translated"><a class="ae jg" rel="noopener" href="/walmartlabs/the-benefits-of-server-side-rendering-over-client-side-rendering-5d07ff2cefe8">https://medium . com/walmartlabs/the-benefits-of-server-side-rendering-over-client-side-rendering-5d 07 ff 2 EFE 8</a></li><li id="2e27" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><a class="ae jg" rel="noopener" href="/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0">https://medium . com/@ Dan _ abra mov/smart-and-dumb-components-7 ca 2 f 9 a 7 c 7d 0</a></li><li id="a561" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><a class="ae jg" href="https://github.com/erikras/ducks-modular-redux" rel="noopener ugc nofollow" target="_blank">https://github.com/erikras/ducks-modular-redux</a></li><li id="b121" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><a class="ae jg" href="https://hackernoon.com/the-100-correct-way-to-structure-a-react-app-or-why-theres-no-such-thing-3ede534ef1ed?source=bookmarks---------18----------------" rel="noopener ugc nofollow" target="_blank">https://hacker noon . com/the-100-correct-way-to-structure-a-react-app-or-why-there-that-this-3ede 534 ef1ed</a></li><li id="8683" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><a class="ae jg" rel="noopener" href="/dailyjs/using-redux-observable-to-handle-asynchronous-logic-in-redux-d49194742522">https://medium . com/daily js/using-redux-observable-to-handle-asynchronous-logic-in-redux-d 49194742522</a></li><li id="89a3" class="lk ll hu jj b jk lv jo lw js lx jw ly ka lz ke lr ls lt lu dt translated"><a class="ae jg" href="https://hackernoon.com/applying-clean-architecture-on-web-application-with-modular-pattern-7b11f1b89011" rel="noopener ugc nofollow" target="_blank">https://hacker noon . com/applying-clean-architecture-on-web-application-with-modular-pattern-7b 11 f1 b 89011</a></li></ul></div><div class="ab cl kf kg hc kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hn ho hp hq hr"><p id="398e" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">感谢阅读！如果你喜欢这篇文章，一定要点击👏所以<strong class="jj hv">下面的符号别人</strong>会<strong class="jj hv">看</strong>吧。</p></div></div>    
</body>
</html>