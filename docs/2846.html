<html>
<head>
<title>🍰Bringing Cake to Microsoft Teams📣</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">🍰给微软团队带来蛋糕📣</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/bringing-cake-to-microsoft-teams-b49848981d5d?source=collection_archive---------13-----------------------#2017-02-22">https://medium.com/hackernoon/bringing-cake-to-microsoft-teams-b49848981d5d?source=collection_archive---------13-----------------------#2017-02-22</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="bc46" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">从蛋糕构建脚本向微软团队发送通知</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/3d0d222511b7e1051f8772fa98731441.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hIiZT9P7Tqkl8gWKnmipgw.png"/></div></div></figure><p id="8690" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">尽管微软的团队会感谢你带给他们这不是这篇文章的内容，而是微软团队协作/团队聊天产品的通知。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff kr"><img src="../Images/d38d8559ecabafee7f24469c30784d90.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*2LeKaD4JpOt_osFuA8UntA.png"/></div></figure><p id="b70e" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">蛋糕呢？<a class="ae ks" href="http://cakebuild.net/" rel="noopener ugc nofollow" target="_blank"> Cake </a>是一个开源的构建系统，它让你以一种非侵入性的方式使用C# DSL跨平台和跨环境地编排围绕你的构建过程的一切——如果你是. NET开发人员，所有这些都使用现有的技能。<br/> ( <em class="kt">看多了</em><a class="ae ks" href="http://cakebuild.net/" rel="noopener ugc nofollow" target="_blank"><em class="kt"/></a><em class="kt"/>)</p><p id="990b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">就这么定了，如果你能从你的蛋糕脚本发送通知到微软团队频道不是很好吗？猜猜看——有！</p><h2 id="4924" class="ku kv hu bd kw kx ky kz la lb lc ld le ke lf lg lh ki li lj lk km ll lm ln lo dt translated">插件</h2><p id="0670" class="pw-post-body-paragraph jv jw hu jx b jy lp iv ka kb lq iy kd ke lr kg kh ki ls kk kl km lt ko kp kq hn dt translated">蛋糕可以通过插件扩展，蛋糕插件可以是任何。NET程序集作为NuGet包在任何nuget feed上可用，其中<a class="ae ks" href="https://www.nuget.org/" rel="noopener ugc nofollow" target="_blank">nuget.org</a>是最广为人知的包源。然而，您可以通过使用几个属性(<em class="kt">即</em><a class="ae ks" href="http://cakebuild.net/api/Cake.Core.Annotations/CakeAliasAttribute/" rel="noopener ugc nofollow" target="_blank"><em class="kt">CakeMethodAliasAttribute</em></a><em class="kt">和</em><a class="ae ks" href="http://cakebuild.net/api/Cake.Core.Annotations/CakeNamespaceImportAttribute/" rel="noopener ugc nofollow" target="_blank"><em class="kt">cakenamespace importattribute</em></a>)成为一个更“原生”的Cake addin，因为它们允许您使用<a class="ae ks" href="http://cakebuild.net/docs/fundamentals/preprocessor-directives" rel="noopener ugc nofollow" target="_blank"> #addin </a>预处理器指令来扩展DSL和导入名称空间。</p><p id="9f03" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我已经创建了这样一个插件，它可以让你轻松地与微软团队频道交流</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="lu lv l"/></div></figure><p id="949a" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><code class="eh lw lx ly lz b">#addin</code>指令从nuget获取程序集，引用它，找到任何Cake扩展方法并导入名称空间——使它们在您的Cake脚本中方便地全局可用。</p><h2 id="6967" class="ku kv hu bd kw kx ky kz la lb lc ld le ke lf lg lh ki li lj lk km ll lm ln lo dt translated">安装/拆卸</h2><p id="2a15" class="pw-post-body-paragraph jv jw hu jx b jy lp iv ka kb lq iy kd ke lr kg kh ki ls kk kl km lt ko kp kq hn dt translated">通过在Cake脚本主机上的<a class="ae ks" href="http://cakebuild.net/api/Cake.Core.Scripting/IScriptHost/9CF7C412" rel="noopener ugc nofollow" target="_blank"> Setup </a>和<a class="ae ks" href="http://cakebuild.net/api/Cake.Core.Scripting/IScriptHost/E94DA692" rel="noopener ugc nofollow" target="_blank"> Teardown </a>方法上注册动作，可以实现脚本何时启动以及脚本何时成功/失败的报告，设置在Cake任务执行之前执行，而拆除总是在任务执行之后执行。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="lu lv l"/></div></figure><p id="c867" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">正如您所看到的，拆卸<a class="ae ks" href="http://cakebuild.net/api/Cake.Core/ITeardownContext/" rel="noopener ugc nofollow" target="_blank">上下文</a>具有指示构建成功/失败的<a class="ae ks" href="http://cakebuild.net/api/Cake.Core/ITeardownContext/64379305" rel="noopener ugc nofollow" target="_blank">成功</a>属性和包含失败异常的<a class="ae ks" href="http://cakebuild.net/api/Cake.Core/ITeardownContext/246CAB42" rel="noopener ugc nofollow" target="_blank">抛出异常</a>属性。一个成功的构建应该是这样的:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff ma"><img src="../Images/8b4ef9113b21b3ad98f2a13343a549e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EwQRS42mLpyadKbzPlxWVA.png"/></div></div></figure><p id="2451" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">失败的构建将包含如下异常/堆栈跟踪:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mb"><img src="../Images/9f52af26f6d43fcdc789646ba1611b9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7seWkFNglMJTBrf2HAZLqQ.png"/></div></div></figure><h2 id="da90" class="ku kv hu bd kw kx ky kz la lb lc ld le ke lf lg lh ki li lj lk km ll lm ln lo dt translated">任务设置/拆除</h2><p id="3417" class="pw-post-body-paragraph jv jw hu jx b jy lp iv ka kb lq iy kd ke lr kg kh ki ls kk kl km lt ko kp kq hn dt translated">如果您想跟踪单个任务的进度，可以使用<a class="ae ks" href="http://cakebuild.net/api/Cake.Core.Scripting/IScriptHost/BAFADA5D" rel="noopener ugc nofollow" target="_blank">任务设置</a>和<a class="ae ks" href="http://cakebuild.net/api/Cake.Core.Scripting/IScriptHost/3BE7A7EB" rel="noopener ugc nofollow" target="_blank">任务拆卸</a>来注册任务执行前后执行的动作。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="lu lv l"/></div></figure><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mc"><img src="../Images/3ab8292f7a10118aadce062355dbcb80.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*7xTjxnsebPJhp_TFwK0cAw.png"/></div></figure><p id="959a" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><a class="ae ks" href="http://cakebuild.net/api/Cake.Core/ITaskSetupContext/" rel="noopener ugc nofollow" target="_blank">设置</a>和<a class="ae ks" href="http://cakebuild.net/api/Cake.Core/ITaskTeardownContext/" rel="noopener ugc nofollow" target="_blank">拆卸</a>上下文都提供了<a class="ae ks" href="http://cakebuild.net/api/Cake.Core/ITaskTeardownContext/EDEBEFE1" rel="noopener ugc nofollow" target="_blank">任务</a>属性，该属性为您提供了关于任务的元数据，<a class="ae ks" href="http://cakebuild.net/api/Cake.Core/ITaskTeardownContext/" rel="noopener ugc nofollow" target="_blank">拆卸</a>上下文还提供了<a class="ae ks" href="http://cakebuild.net/api/Cake.Core/ITaskTeardownContext/D4FAFF2B" rel="noopener ugc nofollow" target="_blank">持续时间</a>和<a class="ae ks" href="http://cakebuild.net/api/Cake.Core/ITaskTeardownContext/685F941C" rel="noopener ugc nofollow" target="_blank">跳过的</a>属性，指示任务是否被执行以及执行该任务需要多长时间。</p><h2 id="7ef6" class="ku kv hu bd kw kx ky kz la lb lc ld le ke lf lg lh ki li lj lk km ll lm ln lo dt translated">高级格式</h2><p id="9f49" class="pw-post-body-paragraph jv jw hu jx b jy lp iv ka kb lq iy kd ke lr kg kh ki ls kk kl km lt ko kp kq hn dt translated">因此，除了添加只接受字符串作为消息的方法<a class="ae ks" href="http://cakebuild.net/api/Cake.MicrosoftTeams/MicrosoftTeamsAliases/F57266C4" rel="noopener ugc nofollow" target="_blank">之外，还有一个</a><a class="ae ks" href="http://cakebuild.net/api/Cake.MicrosoftTeams/MicrosoftTeamsAliases/F75AA2A9" rel="noopener ugc nofollow" target="_blank">microsoftteamsopstmessage</a>重载，它接受一个<a class="ae ks" href="http://cakebuild.net/api/Cake.MicrosoftTeams/MicrosoftTeamsMessageCard" rel="noopener ugc nofollow" target="_blank">MicrosoftTeamsMessageCard</a>，这让您可以更好地控制消息布局。</p><p id="5544" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">为构建的每一步发布一条消息可能会变得非常冗长，剪裁这条消息，而不是像下面这样在一条消息中简洁地总结构建，从长远来看可能更具可持续性。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff md"><img src="../Images/dbfc108e74c2ce043ef015e8ca429186.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*l2F49DR-P3TwTMJtTYtEHA.png"/></div></div></figure><p id="39a9" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这与Cake输出到控制台的内容非常相似</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff me"><img src="../Images/559b390f8b344e7d66b8e8b716679e94.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*Yiv_SQiUfRO8nEVHfZXe1g.png"/></div></div></figure><p id="9c9a" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">失败时，你会得到一个图标，清楚地表明失败和成功时执行的步骤。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mf"><img src="../Images/94289f24912dac497eb0f5e23a611b4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ib5naISI4lZIi3_tiQq_Lw.png"/></div></div></figure><p id="3b9d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">但是在扩展消息时，您也可以从任何错误中获得完整的堆栈跟踪</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mg"><img src="../Images/ffa31fb99c5c5118740f968fe19b8554.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*OE9xF2ERjZVwVX4-jMYSUg.png"/></div></figure><p id="a724" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">那么这个代码会是什么样子呢？你可以在下面测试一个完整的例子</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="lu lv l"/></div></figure><p id="06ba" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">上面的代码基本上是将<a class="ae ks" href="http://cakebuild.net/api/Cake.Core.Scripting/IScriptHost/9CF7C412" rel="noopener ugc nofollow" target="_blank">设置</a>、<a class="ae ks" href="http://cakebuild.net/api/Cake.Core.Scripting/IScriptHost/E94DA692" rel="noopener ugc nofollow" target="_blank">拆卸</a>和<a class="ae ks" href="http://cakebuild.net/api/Cake.Core.Scripting/IScriptHost/3BE7A7EB" rel="noopener ugc nofollow" target="_blank">任务拆卸</a>的动作挂钩。仅在最终调用<a class="ae ks" href="http://cakebuild.net/api/Cake.Core.Scripting/IScriptHost/E94DA692" rel="noopener ugc nofollow" target="_blank">拆卸</a>之前收集数据。这只是C#所以你可以去疯狂，因为你想要的，但以上是一个很好的起点。</p><h2 id="3708" class="ku kv hu bd kw kx ky kz la lb lc ld le ke lf lg lh ki li lj lk km ll lm ln lo dt translated">结论</h2><p id="5291" class="pw-post-body-paragraph jv jw hu jx b jy lp iv ka kb lq iy kd ke lr kg kh ki ls kk kl km lt ko kp kq hn dt translated">希望这篇文章已经向你展示了如何从你的cake脚本发送通知，以及Cake为此提供了什么扩展点。这显然可以在其他消息平台上重复使用，如果你查看Cake网站上的<a class="ae ks" href="http://cakebuild.net/addins/" rel="noopener ugc nofollow" target="_blank">插件</a>部分，你会发现Slack、HipChat、Gitter、Twitter等插件。</p><div class="jk jl jm jn fq ab cb"><figure class="mh jo mi mj mk ml mm paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mh jo mi mj mk ml mm paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mh jo mi mj mk ml mm paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mn mo mp"><p id="f922" class="jv jw kt jx b jy jz iv ka kb kc iy kd mq kf kg kh mr kj kk kl ms kn ko kp kq hn dt translated"><a class="ae ks" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是阿妹家庭的一员。我们现在<a class="ae ks" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ks" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jv jw kt jx b jy jz iv ka kb kc iy kd mq kf kg kh mr kj kk kl ms kn ko kp kq hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ks" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ks" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mt"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>