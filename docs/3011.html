<html>
<head>
<title>Here’s my minimal setup to write a piece of typescript code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">下面是我编写一段类型脚本代码的最小设置</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/heres-my-minimal-setup-to-write-a-piece-of-typescript-code-510cd6cb1861?source=collection_archive---------5-----------------------#2017-03-06">https://medium.com/hackernoon/heres-my-minimal-setup-to-write-a-piece-of-typescript-code-510cd6cb1861?source=collection_archive---------5-----------------------#2017-03-06</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/e448896648e7a16f3be0c2707c5a95ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*ZZRtwzUVGyBkfkKurbHjwg.png"/></div></figure><p id="8684" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">写10行<a class="ae jw" href="https://hackernoon.com/tagged/typescript" rel="noopener ugc nofollow" target="_blank">的打字稿</a>应该不需要高深的devOps知识。这里有一个最小的构建来编写和调试任何一段类型脚本代码，而不需要了解gulp或webpack。</p><p id="94f6" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">别误会，webpack很牛逼。但有时我只想写10行代码，让它尽可能快地运行。有些人能熟练使用gulp或webpack，几秒钟内就能完成安装。我不是，所以这是我经常想到的最小“构建”。</p><h2 id="8cd9" class="jx jy hu bd jz ka kb kc kd ke kf kg kh jj ki kj kk jn kl km kn jr ko kp kq kr dt translated">我们想要什么？</h2><ul class=""><li id="8d55" class="ks kt hu ja b jb ku jf kv jj kw jn kx jr ky jv kz la lb lc dt translated">让我们编写并运行一小段代码。现在我已经习惯了typescript，写普通的js简直让我害怕。因此我想写一段并运行一小段<em class="ld">类型脚本</em>代码。</li><li id="d499" class="ks kt hu ja b jb le jf lf jj lg jn lh jr li jv kz la lb lc dt translated">即使是10分钟的项目，<em class="ld">保存- &gt;编译- &gt;运行</em>也只是一个繁琐的工作流程。我们至少应该实现自动化。</li><li id="4062" class="ks kt hu ja b jb le jf lf jj lg jn lh jr li jv kz la lb lc dt translated">在电脑上安装东西很无聊。我已经安装了docker。这足以让一切正常运转。</li></ul><h2 id="c928" class="jx jy hu bd jz ka kb kc kd ke kf kg kh jj ki kj kk jn kl km kn jr ko kp kq kr dt translated">我们什么时候想要它？</h2><p id="8fbf" class="pw-post-body-paragraph iy iz hu ja b jb ku jd je jf kv jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv hn dt translated">很明显，不到一分钟的时间就可以设置好一些有用的东西。</p><h2 id="65bc" class="jx jy hu bd jz ka kb kc kd ke kf kg kh jj ki kj kk jn kl km kn jr ko kp kq kr dt translated">设置</h2><p id="1257" class="pw-post-body-paragraph iy iz hu ja b jb ku jd je jf kv jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv hn dt translated"><em class="ld">整个【项目】</em> <a class="ae jw" href="https://github.com/aherve/docker-nodemon" rel="noopener ugc nofollow" target="_blank"> <em class="ld">可以在github </em> </a>上找到</p><p id="f800" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">不得不说我喜欢nodemon。在我看来，它提供了有史以来最简单的工作流程:观察某个东西，如果它在移动，就运行某个东西。我倾向于记住的事情。</p><p id="8e35" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">首先，让我们构建一个docker映像，在其中安装typescript和nodemon:</p><figure class="lm ln lo lp fq iv"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="d560" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我基本上采用一个节点映像，并在其上安装nodemon和typescript。然后它会安装您的<code class="eh ls lt lu lv b">package.json</code>依赖项，如果您有一些的话。这里我们用纱，因为我们完全属于酷小孩。</p><p id="bcd3" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我们需要的第二件也是最后一件事是自动化<code class="eh ls lt lu lv b">save -&gt; compile -&gt; run</code>工作流。这就是docker-compose派上用场的地方:</p><figure class="lm ln lo lp fq iv"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="b45f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如您所见，我们使用了3个容器:</p><ul class=""><li id="a4ea" class="ks kt hu ja b jb jc jf jg jj lw jn lx jr ly jv kz la lb lc dt translated">数据负责文件的逻辑。我们告诉它与容器共享我们自己的src目录，并拥有自己的<code class="eh ls lt lu lv b">dist</code>和<code class="eh ls lt lu lv b">node_modules</code>目录。其他容器将共享卷，因此它们共享相同的<code class="eh ls lt lu lv b">src, dist</code>和<code class="eh ls lt lu lv b">node_modules</code>目录。</li><li id="8e20" class="ks kt hu ja b jb le jf lf jj lg jn lh jr li jv kz la lb lc dt translated">transpiler将监视<code class="eh ls lt lu lv b">src</code>目录(其中的*。ts文件live)，并将类型脚本代码转换到<code class="eh ls lt lu lv b">dist</code></li><li id="b238" class="ks kt hu ja b jb le jf lf jj lg jn lh jr li jv kz la lb lc dt translated">服务器将使用nodemon来监视<code class="eh ls lt lu lv b">dist</code>目录，并在<code class="eh ls lt lu lv b">index.js</code>发生变化时运行<code class="eh ls lt lu lv b">index.js</code>。</li></ul><p id="3a15" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这将顺利工作，无论你是写一个服务器，还是一个简单的脚本启动后退出。</p><p id="b94d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在，一个简单的<code class="eh ls lt lu lv b">docker-compose up</code>命令将运行服务器，我们已经准备好开始我们令人敬畏的<code class="eh ls lt lu lv b">ts</code>脚本了。在更改了typescript文件后，会发生以下情况:</p><figure class="lm ln lo lp fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="fe ff lz"><img src="../Images/d8d2517b2c34bc5fb7a1d745d46fc4cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0do-NXAe9rz-KckqxSdmqA.png"/></div></div><figcaption class="me mf fg fe ff mg mh bd b be z ek">About exactly what we would expect: the script is transpiled, then launched</figcaption></figure><p id="1a30" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">不用说，如果我们写一些虚构的东西，比如</p><figure class="lm ln lo lp fq iv"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="389f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">然后，我们的控制台输出一个奇特的错误，正如所料:</p><figure class="lm ln lo lp fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="fe ff mi"><img src="../Images/2b2fbcf5242f53be4834de3e097f4798.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OIFdplWsZK_haNv9eMTVag.png"/></div></div></figure><p id="915e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">希望你喜欢！</p><p id="9b3e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><a class="ae jw" href="https://github.com/aherve/docker-nodemon" rel="noopener ugc nofollow" target="_blank"> <em class="ld">喜欢就下载项目</em> </a></p><div class="lm ln lo lp fq ab cb"><figure class="mj iv mk ml mm mn mo paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mj iv mk ml mm mn mo paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mj iv mk ml mm mn mo paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mp mq mr"><p id="f922" class="iy iz ld ja b jb jc jd je jf jg jh ji ms jk jl jm mt jo jp jq mu js jt ju jv hn dt translated"><a class="ae jw" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是这个家庭的一员。我们现在<a class="ae jw" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jw" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="iy iz ld ja b jb jc jd je jf jg jh ji ms jk jl jm mt jo jp jq mu js jt ju jv hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jw" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jw" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="lm ln lo lp fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="fe ff mv"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="lm ln lo lp fq iv"><div class="bz el l di"><div class="mw lr l"/></div></figure></div></div>    
</body>
</html>