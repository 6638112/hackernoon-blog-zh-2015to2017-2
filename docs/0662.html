<html>
<head>
<title>Spring Boot: REST + TDD from scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Spring Boot:从零开始休息+ TDD</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/spring-boot-rest-tdd-from-scratch-15f13ed799e0?source=collection_archive---------0-----------------------#2016-03-03">https://medium.com/hackernoon/spring-boot-rest-tdd-from-scratch-15f13ed799e0?source=collection_archive---------0-----------------------#2016-03-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/a11da0550f266abaa96b430190b339d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4KYwtIRqMla55nDXo7p27Q.png"/></div></div></figure><div class=""/><blockquote class="jc jd je"><p id="665b" class="jf jg jh ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">免责声明:因为有很多关于单元测试的东西，在这篇文章中，我将关注如何编写一个带有集成测试的RESTful应用程序，以及如何在构建过程中运行它们。</p></blockquote><p id="6e3b" class="pw-post-body-paragraph jf jg if ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">在离开Java开发整整一年后，我决定回去看看事情进展如何。我可以说，我喜欢它。Spring总是吸引我的注意力，因为他们的目标(和成功)是让Java企业开发尽可能简单。我们将在本文中使用的Spring <a class="ae kh" href="https://hackernoon.com/tagged/boot" rel="noopener ugc nofollow" target="_blank"> Boot </a>，是一个出色地做到这一点的项目。用它来开始我们项目的框架很容易，因为他们更喜欢约定而不是配置。</p><p id="99ea" class="pw-post-body-paragraph jf jg if ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">在Spring Boot上，我们可以使用RESTful服务来创建一个客户端无关的应用程序，并使它与TDD方法一起没有bug。</p><h2 id="fc6c" class="ki kj if bd kk kl km kn ko kp kq kr ks ke kt ku kv kf kw kx ky kg kz la lb lc dt translated">建立Spring Boot</h2><p id="896c" class="pw-post-body-paragraph jf jg if ji b jj ld jl jm jn le jp jq ke lf jt ju kf lg jx jy kg lh kb kc kd hn dt translated">重要的事情先来。尽管TDD声称我们首先编写失败的测试，为了让它们通过，我们首先需要制作一个可引导的软件。主要是因为在Maven的集成测试阶段，我们需要能够启动一个服务器来看到我们的第一次测试失败。</p><p id="1912" class="pw-post-body-paragraph jf jg if ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">用Spring Boot启动一个应用程序真的很容易，我们只需要两个文件和一个命令。让我们从pom.xml文件开始。</p><figure class="li lj lk ll fq hw"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="3b79" class="pw-post-body-paragraph jf jg if ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">这个文件应该放在我们应用程序的根目录中，它将我们的项目定义为<em class="jh">spring-boot-starter-parent</em>的子项目，并添加了<em class="jh"> spring-boot-start-web </em>作为依赖项。这种组合使我们能够用一个非常小类来运行web应用程序。看看这个:</p><figure class="li lj lk ll fq hw"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="d6a7" class="pw-post-body-paragraph jf jg if ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">创建此类后，该类应放在。/src/main/Java/br/com/brunokrebs/directory，我们将能够在我们的根目录上发出以下命令来运行它:mvn spring-boot:run。</p><p id="d830" class="pw-post-body-paragraph jf jg if ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">当然，这个应用程序现在做的不多。实际上，它只是启动并继续运行一个web服务器。但是没有RESTful端点，没有网页，什么都没有。因此，由于我们遵循TDD方法，让我们编写一个非常简单的集成测试，期望我们的web应用程序响应GET请求。</p><h2 id="fa04" class="ki kj if bd kk kl km kn ko kp kq kr ks ke kt ku kv kf kw kx ky kg kz la lb lc dt translated">集成Spring Boot和Maven</h2><p id="a8b6" class="pw-post-body-paragraph jf jg if ji b jj ld jl jm jn le jp jq ke lf jt ju kf lg jx jy kg lh kb kc kd hn dt translated">为了能够在Maven的集成测试阶段自动运行我们的测试，我们必须对之前创建的pom.xml进行一些更改。首先，让我们在<em class="jh"> spring-boot-starter-web </em>之后添加以下三个依赖项:</p><figure class="li lj lk ll fq hw"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="f893" class="pw-post-body-paragraph jf jg if ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">然后我们添加<em class="jh"> maven-failsafe-plugin </em>插件来执行我们将要创建的集成测试。</p><figure class="li lj lk ll fq hw"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="9cf4" class="pw-post-body-paragraph jf jg if ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">最后，我们向<em class="jh"> spring-boot-maven-plugin </em>添加两个执行任务，部署我们的应用程序，以便能够响应测试。注意，我们之前已经在pom.xml文件中添加了这个插件。所以我们只需要添加两个任务:</p><figure class="li lj lk ll fq hw"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="f754" class="pw-post-body-paragraph jf jg if ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">现在，为了开始执行集成测试的构建过程，我们发出以下命令:mvn verify。这个命令将构建我们的项目，启动一个Tomcat容器，部署我们的项目，并针对它发布测试。嗯，它会发布测试，我们还没有写任何。</p><h2 id="2db3" class="ki kj if bd kk kl km kn ko kp kq kr ks ke kt ku kv kf kw kx ky kg kz la lb lc dt translated">编写我们的第一个测试</h2><p id="78f5" class="pw-post-body-paragraph jf jg if ji b jj ld jl jm jn le jp jq ke lf jt ju kf lg jx jy kg lh kb kc kd hn dt translated">最后添加的插件，<em class="jh"> maven-failsafe-plugin </em>，默认情况下，认为任何以它结尾的类都是必须运行的集成测试。所以让我们添加一个，看看我们的第一个测试失败。</p><figure class="li lj lk ll fq hw"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="12e5" class="pw-post-body-paragraph jf jg if ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">我们必须遵循Java和Maven约定，在。/src/test/Java/br/com/brunokrebs/echoit . Java文件。创建后，我们可以运行“mvn verify”命令来查看它是否失败。</p><p id="b70d" class="pw-post-body-paragraph jf jg if ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">很好，我们有了针对我们项目的第一个失败测试。所以，让我们解决它。为了简单起见，让我们对我们的主类AbtbvApplication.java做一些修改:</p><figure class="li lj lk ll fq hw"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="e2fa" class="pw-post-body-paragraph jf jg if ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">正如我们在上面看到的，我们对我们的类做了四个改变。首先，我们向它添加了一个新的@RestController注释，将它标记为REST控制器。其次，我们创建了一个名为Message的内部类来保存被回显的消息。第三，我们添加了一个用@RequestMapping注释的新方法，该方法将其配置为在“/echo/{message}”处响应GET请求。该方法将一个用@PathVariable注释的字符串消息作为参数，这使它自动获取代替{message}传递的任何值。第四，我们让这个方法返回一个新的消息实例。这个新实例被序列化为JSON，正如我们的测试所预期的那样。</p><p id="1b7a" class="pw-post-body-paragraph jf jg if ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">搞定了。我们现在可以再次执行“mvn verify ”,并看到我们的第一次测试成功。</p><h2 id="e575" class="ki kj if bd kk kl km kn ko kp kq kr ks ke kt ku kv kf kw kx ky kg kz la lb lc dt translated">结论</h2><p id="00e1" class="pw-post-body-paragraph jf jg if ji b jj ld jl jm jn le jp jq ke lf jt ju kf lg jx jy kg lh kb kc kd hn dt translated">正如我们在这篇文章中看到的，用Spring Boot创建一个面向REST的企业应用程序的框架非常容易。这个框架并没有做很多事情，但是，随着构建过程中运行的集成测试的出现，它为创建任何生产就绪、无错误的应用程序提供了一个非常好的基础。</p><p id="aadc" class="pw-post-body-paragraph jf jg if ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">我希望你们喜欢这篇文章，因为我期待着写更多的相关文章。下面的文章，我还没有决定如何构建，将会增加一些企业应用程序中所期望的好的特性。给出的例子:<a class="ae kh" rel="noopener" href="/@krebs.bruno/spring-boot-persisting-data-with-rest-jpa-33a063e8b147">数据源</a>，图形用户界面(可能从基于Angular的web层开始)等等。</p><blockquote class="jc jd je"><p id="402a" class="jf jg jh ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我叫布鲁诺·克雷布斯，你可以通过我的<a class="ae kh" href="https://twitter.com/brunoskrebs/" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、我的<a class="ae kh" href="https://www.linkedin.com/in/brunokrebs" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和我的<a class="ae kh" href="https://github.com/brunokrebs" rel="noopener ugc nofollow" target="_blank"> Github </a>账户找到我。此外，请随意在这里或我的任何文章中添加任何评论。</p></blockquote><div class="li lj lk ll fq ab cb"><figure class="lo hw lp lq lr ls lt paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="lo hw lp lq lr ls lt paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="lo hw lp lq lr ls lt paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="jc jd je"><p id="f922" class="jf jg jh ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><a class="ae kh" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kh" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kh" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kh" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jf jg jh ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kh" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kh" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="li lj lk ll fq hw fe ff paragraph-image"><a href="https://goo.gl/Ahtev1"><div class="fe ff lu"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></a></figure><figure class="li lj lk ll fq hw"><div class="bz el l di"><div class="lv ln l"/></div></figure></div></div>    
</body>
</html>