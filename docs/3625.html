<html>
<head>
<title>How to run and automate E2E tests using Laravel Dusk</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Laravel Dusk运行和自动化E2E测试</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-run-and-automate-e2e-tests-using-laravel-dusk-b4792493f126?source=collection_archive---------10-----------------------#2017-04-12">https://medium.com/hackernoon/how-to-run-and-automate-e2e-tests-using-laravel-dusk-b4792493f126?source=collection_archive---------10-----------------------#2017-04-12</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/cc879a6df4a088f98fc0c94a7af6ebdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FkL57EiF76P_IYsMNIogZw.png"/></div></div></figure><div class=""/><h1 id="2e3e" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">介绍</h1><p id="fd03" class="pw-post-body-paragraph ka kb if kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated"><a class="ae ky" href="https://buddy.works/guides/first-steps-with-laravel-and-continuous-delivery?utm_source=medium&amp;utm_medium=post&amp;utm_campaign=how-to-run-and-automate-e2e-tests-using-laravel-dusk&amp;utm_content=link" rel="noopener ugc nofollow" target="_blank">的前一篇文章</a>解释了创建单元和特性测试的过程，并向您展示了如何用Buddy自动化它们。通过这篇指南，你将学习如何使用<a class="ae ky" href="https://hackernoon.com/tagged/laravel" rel="noopener ugc nofollow" target="_blank"> Laravel </a> Dusk运行<a class="ae ky" href="https://hackernoon.com/tagged/e2e" rel="noopener ugc nofollow" target="_blank"> E2E </a>测试。</p><p id="7f11" class="pw-post-body-paragraph ka kb if kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">Laravel Dusk只是Laravel 5.4中引入的一种浏览器测试。默认情况下，测试使用ChromeDriver，但您也可以将它们配置为在不同的浏览器中使用Selenium。</p><h1 id="35da" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">测试项目</h1><p id="1dd0" class="pw-post-body-paragraph ka kb if kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">如果您不知道如何添加测试，我们将使用一个简单的计算器示例来指导您完成这个过程。在本指南中，你可以看到如何创建这样的计算器。</p><ol class=""><li id="c9de" class="le lf if kc b kd kz kh la kl lg kp lh kt li kx lj lk ll lm dt translated">在开始时，确保分叉和克隆项目<a class="ae ky" href="https://github.com/buddy-works/laravel-first-steps" rel="noopener ugc nofollow" target="_blank">github.com/buddy-works/laravel-first-steps</a></li><li id="7261" class="le lf if kc b kd ln kh lo kl lp kp lq kt lr kx lj lk ll lm dt translated">然后，您可以通过运行以下命令来立即检查应用程序:</li></ol><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="82c0" class="mb jd if lx b fv mc md l me mf">$ laravel-first-steps<br/>$ composer install<br/>$ php artisan serve</span></pre><p id="1d08" class="pw-post-body-paragraph ka kb if kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">注意:如果您有任何问题，请检查您是否安装了<a class="ae ky" href="https://buddy.works/guides/guides/first-steps-with-laravel-and-continuous-delivery?utm_source=medium&amp;utm_medium=post&amp;utm_campaign=how-to-run-and-automate-e2e-tests-using-laravel-dusk&amp;utm_content=link#install-laravel" rel="noopener ugc nofollow" target="_blank">所有需要的东西</a>。</p><figure class="ls lt lu lv fq hw"><div class="bz el l di"><div class="mg mh l"/></div></figure><h1 id="7df3" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">安装黄昏</h1><p id="ce24" class="pw-post-body-paragraph ka kb if kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">如果你想安装黄昏，只需按照以下步骤:</p><ul class=""><li id="dafc" class="le lf if kc b kd kz kh la kl lg kp lh kt li kx mi lk ll lm dt translated">安装Laravel Dusk并将其添加到项目的依赖项中:</li></ul><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="9019" class="mb jd if lx b fv mc md l me mf">$ composer require laravel/dusk</span></pre><ul class=""><li id="c9fc" class="le lf if kc b kd kz kh la kl lg kp lh kt li kx mi lk ll lm dt translated">注册DuskServiceProvider。打开<br/> <code class="eh mj mk ml lx b">app\Providers\AppServiceProvider.php</code>并添加名称空间:</li></ul><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="4851" class="mb jd if lx b fv mc md l me mf">use Laravel\Dusk\DuskServiceProvider;</span></pre><ul class=""><li id="1110" class="le lf if kc b kd kz kh la kl lg kp lh kt li kx mi lk ll lm dt translated">通过添加以下内容在<code class="eh mj mk ml lx b">register</code>方法中注册提供者:</li></ul><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="63a3" class="mb jd if lx b fv mc md l me mf">if ($this-&gt;app-&gt;environment('local', 'testing')) {<br/>     $this-&gt;app-&gt;register(DuskServiceProvider::class);<br/>    }</span></pre><p id="4772" class="pw-post-body-paragraph ka kb if kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">整个<code class="eh mj mk ml lx b">AppServiceProvider</code>文件应该是这样的:</p><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="8de8" class="mb jd if lx b fv mc md l me mf">&lt;?php</span><span id="1861" class="mb jd if lx b fv mm md l me mf">namespace App\Providers;</span><span id="d8cf" class="mb jd if lx b fv mm md l me mf">use Illuminate\Support\ServiceProvider;<br/>use Laravel\Dusk\DuskServiceProvider;</span><span id="5cc3" class="mb jd if lx b fv mm md l me mf">class AppServiceProvider extends ServiceProvider<br/>{<br/>    /**<br/>     * Bootstrap any application services.<br/>     *<br/>     * @return void<br/>     */<br/>    public function boot()<br/>    {<br/>        //<br/>    }</span><span id="81cf" class="mb jd if lx b fv mm md l me mf">    /**<br/>     * Register any application services.<br/>     *<br/>     * @return void<br/>     */<br/>    public function register()<br/>    {<br/>        if ($this-&gt;app-&gt;environment('local', 'testing')) {<br/>            $this-&gt;app-&gt;register(DuskServiceProvider::class);<br/>        }<br/>    }<br/>}</span></pre><ul class=""><li id="9745" class="le lf if kc b kd kz kh la kl lg kp lh kt li kx mi lk ll lm dt translated">最后，通过执行以下命令来安装Dusk</li></ul><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="6d7b" class="mb jd if lx b fv mc md l me mf">$ php artisan dusk:install</span></pre><h1 id="cdb6" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">编写第一个黄昏测试</h1><p id="5cc0" class="pw-post-body-paragraph ka kb if kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">首先，应该删除示例性测试，否则它将返回错误:</p><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="bec8" class="mb jd if lx b fv mc md l me mf">$ rm tests/Browser/ExampleTest.php</span></pre><p id="eaa8" class="pw-post-body-paragraph ka kb if kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">一旦完成，确保通过执行<code class="eh mj mk ml lx b">artisan</code>命令添加我们的第一个测试。然后…</p></div><div class="ab cl mn mo hc mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="hn ho hp hq hr"><h1 id="017a" class="jc jd if bd je jf mu jh ji jj mv jl jm jn mw jp jq jr mx jt ju jv my jx jy jz dt translated">想了解更多？<a class="ae ky" href="https://buddy.works/guides/how-run-laravel-dusk-selenium-tests?utm_source=medium&amp;utm_medium=post&amp;utm_campaign=how-to-run-and-automate-e2e-tests-using-laravel-dusk&amp;utm_content=link" rel="noopener ugc nofollow" target="_blank">点击此处查看全文</a>。</h1><figure class="ls lt lu lv fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mz"><img src="../Images/237fecb458d889482966108f09dae68f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W1Y4HuHEBAocrtsRNwFIAw.png"/></div></div></figure></div><div class="ab cl mn mo hc mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="hn ho hp hq hr"><div class="ls lt lu lv fq ab cb"><figure class="na hw nb nc nd ne nf paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="na hw nb nc nd ne nf paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="na hw nb nc nd ne nf paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="ng nh ni"><p id="f922" class="ka kb nj kc b kd kz kf kg kh la kj kk nk lb kn ko nl lc kr ks nm ld kv kw kx hn dt translated"><a class="ae ky" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae ky" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae ky" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ky" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ka kb nj kc b kd kz kf kg kh la kj kk nk lb kn ko nl lc kr ks nm ld kv kw kx hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ky" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ky" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ls lt lu lv fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nn"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="ls lt lu lv fq hw"><div class="bz el l di"><div class="no mh l"/></div></figure></div></div>    
</body>
</html>