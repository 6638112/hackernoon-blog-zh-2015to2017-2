<html>
<head>
<title>How to cope with a legacy codebase — survival guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何应对遗留代码库——生存指南</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-cope-with-a-legacy-codebase-survival-guide-6838cde54050?source=collection_archive---------18-----------------------#2017-04-26">https://medium.com/hackernoon/how-to-cope-with-a-legacy-codebase-survival-guide-6838cde54050?source=collection_archive---------18-----------------------#2017-04-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="e8bc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在长期接触充满遗留解决方案的难以维护的单一应用程序的过程中，很难保持良好的态度和动力。本指南是一套10个好的想法和主意，如何应对这种情况，并在两个领域提高:个人技能和代码质量。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/c5f64dc6a26c583665cd07bf38c705c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QMdFX5I5OqWuTNFD69QObw.jpeg"/></div></div></figure><h1 id="a552" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">进退两难</h1><blockquote class="kz"><p id="ba66" class="la lb hu bd lc ld le lf lg lh li jo ek translated"><em class="lj">改写或不改写。</em></p></blockquote><p id="192a" class="pw-post-body-paragraph ir is hu it b iu lk iw ix iy ll ja jb jc lm je jf jg ln ji jj jk lo jm jn jo hn dt translated">这是大多数团队<a class="ae lp" href="https://hackernoon.com/tagged/maintaining" rel="noopener ugc nofollow" target="_blank">维护</a>和<a class="ae lp" href="https://hackernoon.com/tagged/developing" rel="noopener ugc nofollow" target="_blank">开发</a>一个遗留的不断发展的应用程序时一直在问的问题，或者一直在问的问题。或者至少一直在他们的脑海里。</p><p id="2662" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这有时是一个很难的问题，有时也没那么难。然而，无论如何，这超出了本指南的范围。本指南面向需要使用这些代码的人，即使正在进行重大的重建工作或者已经计划好了——有时我们只是需要有人来处理那些“正在工作”并且是业务的种马的遗留问题。</p><h1 id="22ee" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">开始加粗</h1><p id="7997" class="pw-post-body-paragraph ir is hu it b iu lq iw ix iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo hn dt translated">所以你在一个维护团队，或者你负责一个。或者你只是一只孤独的狼，被一个所有人都害怕的遗留巨石的所有者雇佣。首先——别急，大胆一点。让我们从几个重要的步骤开始，这会给你的探索一个好的方向。</p><p id="2541" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 1。使用VCS </strong></p><p id="6eda" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有些人无法想象没有适当的<code class="eh lv lw lx ly b">Version Control System</code>的软件开发——他们已经习惯了。你知道吗，现在仍有一些人无法想象像VCS这样的东西存在？如果这是你的情况，从一个好的<code class="eh lv lw lx ly b">.gitignore</code>文件开始，做你的<code class="eh lv lw lx ly b">Initial commit</code>，永远不要回头。</p><p id="bdaf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 2。尽可能强制格式化</strong></p><p id="2e46" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为你的语言和平台选择一些好的格式约定。强迫它，我是认真的。设置一个自动过磅器，尽可能修复现有的代码库。不要忘记修剪空白和添加结束行，如果需要的话，将所有内容转换为<code class="eh lv lw lx ly b">UTF</code>。然后在每次代码更改时运行linter。</p><p id="3184" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为什么要这么戏剧化呢？一个很好的处理遗留问题的工具，通常是膨胀的代码，当没有人真正知道它是如何工作的时候，版本和变化之间的差异，不要浪费资源和你的能力去解决被空白污染的差异。</p><p id="7c48" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 3。拥抱当前架构</strong></p><p id="1d5d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">既然你正在读这篇文章，你可能需要继续写一些非常大的代码。大到你不能在一周内重构它。让我们拥抱你所拥有的。</p><p id="32fc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当代码出现时，试着找出当前解决方案的好的方面。这对以后的工作很重要，对你的动力也很重要，不要被当前解决方案带来的困难所压倒。</p><p id="1673" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">回答这个简单的问题——这个项目有什么好处？可能是遵循了一些行业标准或者一些常见的模式。我敢肯定，当你看到这些代码时，你已经想到了10个更好的解决方案。但是真的有那么糟糕吗？更糟不代表坏。找到好的部分，记下来，你马上就会用到。</p><p id="f616" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 4。笑骂</strong></p><p id="3396" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在是严格的法官。列出所有薄弱部分。维护、安全和进一步发展可能面临的威胁。记住你现在要对那件事负责。要明确目前的状态是什么。</p><p id="7360" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 5。找到自己的路</strong></p><p id="d3a4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以现在你应该有好的一面和坏的一面。从零开始一个新项目的R&amp;D部门，有一个轻松的说法，它应该在一个确定的未来结束。你不能，你应该精确地知道你现在在哪里，但未来大多是未知的。</p><p id="51c3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你的日常工作可能被短期目标所驱动，而短期目标可能会扼杀任何伟大的长期技术路线图。让我们面对它，不要做一个复杂的“我们不想去的地方”的计划，而是专注于一个日常工作的普通指南。这个指导方针将塑造你的应用和你未来的工作。</p><p id="d05c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在好的部分和坏的部分之间画一条线。选择那些你不能接受的——主要是任何安全威胁或严重的不稳定性。</p><ul class=""><li id="a88c" class="lz ma hu it b iu iv iy iz jc mb jg mc jk md jo me mf mg mh dt translated">定义构建新要素和更改现有要素的方式</li><li id="41fe" class="lz ma hu it b iu mi iy mj jc mk jg ml jk mm jo me mf mg mh dt translated">然后定义你想随着时间慢慢修改的部分— <em class="mn">“每次我遇到这样的实现，我都会用下面的方式替换那个部分”</em></li><li id="1fa9" class="lz ma hu it b iu mi iy mj jc mk jg ml jk mm jo me mf mg mh dt translated">计划对不可接受的部分进行更密集的重建，如果可能的话，为压缩工作安排一个小型项目，以移除最薄弱的部分</li></ul><h1 id="3482" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">大胆地站在每天的基础上</h1><p id="9074" class="pw-post-body-paragraph ir is hu it b iu lq iw ix iy lr ja jb jc ls je jf jg lt ji jj jk lu jm jn jo hn dt translated">当你做了准备阶段，你需要开始工作。创建你自己的日常工作环境，包括工具和程序，以帮助你和你的团队更加自律，并执行你在高层计划的低层想法。</p><p id="4596" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 1。决定工作流程</strong></p><p id="774e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">决定你想要如何处理日常维护和开发。它将与您的组织已经拥有的项目管理系统相关，所以让我们为它添加技术支持。获取一些VCS流——例如GIT流。决定您想要如何测试、审查和部署发布。对你来说释放是什么。坚持使用一些版本控制模式。如果可能，尝试创建并维护<code class="eh lv lw lx ly b">CHANGELOG</code>文件。</p><p id="c046" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 2。设置应用环境</strong></p><p id="679f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">很有可能，应用程序已经有了一些生产环境，但是可能没有任何准备、测试或开发环境和工具。</p><p id="5d5c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果有，就像代码库本身一样对待它——利用好的部分，去掉不好的部分。如果什么都没有，那就去创造。从本地开发实例开始，然后是试运行和测试。考虑CI/CD并记住12个因素应用程序规则。这种训练需要时间。不要着急，如果项目没有完整的框架，它将继续工作得很好。</p><p id="46a2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 3。确保监控和报警</strong></p><p id="73d4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果还没有，添加基本间隔监控来测量正常运行时间。添加错误处理，可能还有一些初始日志记录。你关心你病人，所以确保你知道什么时候会恶化。</p><p id="3cf3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">设置错误监控时，不要忘记定期检查。一个月一次可能太少了。</p><p id="7ae3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 4。做代码审查</strong></p><p id="08de" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当团队中至少有两个开发人员时，效果最好。保持代码审查是确保您的维护和开发路线图被执行的最重要的工具，一行接一行，一次一个拉请求。</p><p id="3660" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你是一个人，那么使用diff的pull请求会有所帮助——至少你会清楚地看到你正在应用什么变化，以及哪个变化会导致你用监控工具检测到的令人讨厌的退化错误(总是比赛谁会首先发现错误，你或者用户，或者是你老板的朋友的用户)。</p><p id="0236" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">作为每次代码审查的一部分，运行您的lint检查和测试套装。</p><p id="d7b4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 5。提高您的高水平指南</strong></p><p id="9c09" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">确保你的日常事务可以改善你的高层次计划和路线图。花时间重复你的主要维护和开发指南。做一个回顾，看看哪些成功了，哪些失败了。解决这个问题，并进行自我反思。</p><p id="04e0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">每当你遇到有趣的案例时，试着记录下来。这将有助于你的回顾，也有助于那些在你之后接手项目并重新开始整个故事的人。</p><div class="jq jr js jt fq ab cb"><figure class="mo ju mp mq mr ms mt paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mo ju mp mq mr ms mt paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mo ju mp mq mr ms mt paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mu mv mw"><p id="f922" class="ir is mn it b iu iv iw ix iy iz ja jb mx jd je jf my jh ji jj mz jl jm jn jo hn dt translated"><a class="ae lp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae lp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae lp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae lp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is mn it b iu iv iw ix iy iz ja jb mx jd je jf my jh ji jj mz jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae lp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae lp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff na"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="nb nc l"/></div></figure></div></div>    
</body>
</html>