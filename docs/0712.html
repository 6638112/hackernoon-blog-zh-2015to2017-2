<html>
<head>
<title>Offline web pages by persisting DOM to IndexedDB/WebSQL.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过将DOM持久化到IndexedDB/WebSQL来离线网页。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/domsnap-offline-web-pages-by-persisting-dom-to-indexeddb-websql-a4750d591ea1?source=collection_archive---------1-----------------------#2016-03-25">https://medium.com/hackernoon/domsnap-offline-web-pages-by-persisting-dom-to-indexeddb-websql-a4750d591ea1?source=collection_archive---------1-----------------------#2016-03-25</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class="ir is fm fo it iu"><a href="https://github.com/unbug/DOMSnap" rel="noopener  ugc nofollow" target="_blank"><div class="iv ab ej"><div class="iw ab ix cl cj iy"><h2 class="bd hv fv z el iz eo ep ja er et ht dt translated">unbug/DOMSnap</h2><div class="jb l"><h3 class="bd b fv z el iz eo ep ja er et ek translated">DOMSnap -通过将DOM持久化到IndexedDB/WebSQL来离线网页</h3></div><div class="jc l"><p class="bd b gc z el iz eo ep ja er et ek translated">github.com</p></div></div><div class="jd l"><div class="je l jf jg jh jd ji jj iu"/></div></div></a></div><h1 id="82b4" class="jk jl hu bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dt translated">DOMSnap</h1><p id="b347" class="pw-post-body-paragraph ki kj hu kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf hn dt translated">通过将DOM持久化到IndexedDB/WebSQL来离线网页。请尝试<a class="ae lg" href="http://unbug.github.io/DOMSnap/" rel="noopener ugc nofollow" target="_blank">演示</a>。</p><h1 id="13a5" class="jk jl hu bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dt translated">它是如何工作的</h1><p id="68a8" class="pw-post-body-paragraph ki kj hu kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf hn dt translated">HTML5提供了LocalStorage、IndexedDB和<a class="ae lg" href="https://googlechrome.github.io/samples/service-worker/window-caches/" rel="noopener ugc nofollow" target="_blank">window . cache</a>来构建离线web应用。但是所有这些技术，我们不能错过本地数据库。DOMSnap充分利用了离线技术。将HTML存储到本地IndexedDB/WebSQL并在脱机时恢复。有了DOMSnap，web页面可以恢复到它们最后的状态，对服务器的请求更少，模板呈现也更少。觉得线下很远，为什么不直接给DOMSnap试试？</p><h1 id="dd15" class="jk jl hu bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dt translated">使用</h1><p id="c96f" class="pw-post-body-paragraph ki kj hu kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf hn dt translated">1.在HTML中包含<code class="eh lh li lj lk b"><a class="ae lg" href="https://github.com/unbug/DOMSnap/tree/master/dist" rel="noopener ugc nofollow" target="_blank">dist/DOMSnap.min.js</a></code>文件</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="4595" class="lt jl hu lk b fv lu lv l lw lx">&lt;script src="DOMSnap.min.js"&gt;&lt;/script&gt;</span></pre><p id="02a7" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">2.或者安装软件包</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="ebbe" class="lt jl hu lk b fv lu lv l lw lx">npm install --save domsnap</span></pre><p id="3707" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">并在你的文件中要求它</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="53d9" class="lt jl hu lk b fv lu lv l lw lx">var DOMSnap = require('domsnap');</span></pre><p id="c6a9" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">例子</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="7285" class="lt jl hu lk b fv lu lv l lw lx">//init DOMSnap<br/>var DS = DOMSnap({<br/>  onReady: function(){<br/>    console.log('DOMSnap is ready');<br/>  }<br/>});</span><span id="c7cc" class="lt jl hu lk b fv md lv l lw lx">//capture snapshot html of #main<br/>DS.capture('#main');<br/>//capture with specified capture id<br/>DS.capture('#main', {id: 'my_id'});</span><span id="c378" class="lt jl hu lk b fv md lv l lw lx">//set the html of #main by it's captured snapshot html<br/>DS.resume('#main');<br/>//set by specified capture id<br/>DS.resume('#main',{id: 'my_id'});</span></pre><figure class="ll lm ln lo fq mf fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff me"><img src="../Images/4867c9a8b755c3d4405f32560a6bea7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ChcTZ0do5rY5IpRn.gif"/></div></div></figure><h1 id="f7df" class="jk jl hu bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dt translated">蜜蜂</h1><h1 id="42a4" class="jk jl hu bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dt translated">DOMSnap(配置)</h1><p id="dc2a" class="pw-post-body-paragraph ki kj hu kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf hn dt translated">初始化DOMSnap</p><p id="84a1" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">因素</p><ul class=""><li id="c354" class="ml mm hu kk b kl ly kp lz kt mn kx mo lb mp lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">config</code>对象【可选】</li><li id="a29a" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">config.onReady</code>当DOMSnap准备好时，将调用函数</li><li id="2715" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">config.version</code>编号版本控制，非零。如果web应用程序已更新，则需要更新。默认值为1</li><li id="a688" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">config.scope</code>字符串“主机|路径|或任何字符串值”。“主机”:location.host“路径”:location . host+location . pathname；默认为“路径”</li><li id="1808" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">config.storeType</code>存储要使用的字符串数据。“IndexedDB”或“WebSQL”，如果没有定义，iOS使用“WebSQL”，其他使用“IndexedDB”。</li><li id="81ca" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">config.expires</code>每个快照将过期的毫秒数，默认为1周。请注意，在页面重新加载之前，新快照永远不会过期。</li></ul><p id="fd75" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">返回对象{{capture: capture，resume: resume，get: get，getAll: getAll，remove: remove，clear: clear}|*}</p><h1 id="d56e" class="jk jl hu bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dt translated">。捕获(选择器，选项)</h1><p id="d2bb" class="pw-post-body-paragraph ki kj hu kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf hn dt translated">元素的捕获快照html匹配选择器，并使用捕获id存储结果</p><p id="e2ef" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">因素</p><ul class=""><li id="e70a" class="ml mm hu kk b kl ly kp lz kt mn kx mo lb mp lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">selector</code>元素的字符串选择器</li><li id="1a1e" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">options</code>对象【可选】</li><li id="0e7c" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">options.id</code>字符串或函数捕获id，如果html不为空，则将id设置为空，以将html存储为默认快照</li><li id="0b90" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">options.html</code>字符串或函数快照html，设置id为null将html存储为默认快照</li><li id="28d0" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">options.expires</code>快照将过期的毫秒数。如果未指定，则与initialize DOMSnap的值相同。</li></ul><p id="cb4e" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">返回DOMSnap</p><h1 id="c825" class="jk jl hu bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dt translated">。简历(选择器，选项)</h1><p id="7550" class="pw-post-body-paragraph ki kj hu kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf hn dt translated">将元素的html设置为通过其捕获的快照html来匹配选择器[和捕获id]</p><p id="0edb" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">因素</p><ul class=""><li id="2283" class="ml mm hu kk b kl ly kp lz kt mn kx mo lb mp lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">selector</code>元素的字符串选择器</li><li id="4bf9" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">options</code>对象【可选】</li><li id="033d" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">options.id</code>字符串或函数捕获id，如果html不为空，则将id设置为空以将html存储为默认快照</li><li id="0dc2" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">options.fallback</code>函数一个回调函数，如果没有匹配的快照将被调用</li></ul><p id="06bb" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">返回DOMSnap</p><h1 id="2e19" class="jk jl hu bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dt translated">。手表(选择器，选项)</h1><p id="a641" class="pw-post-body-paragraph ki kj hu kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf hn dt translated">观察并自动捕获与选择器匹配的元素</p><p id="d3e3" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">因素</p><ul class=""><li id="8cdf" class="ml mm hu kk b kl ly kp lz kt mn kx mo lb mp lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">selector</code>元素的字符串或数组选择器</li><li id="2238" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">options</code>对象【可选】</li><li id="ff8f" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">options.id</code>字符串或函数捕获id</li><li id="f918" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">options.html</code>字符串或函数快照html</li></ul><p id="b31d" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">例子</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="faf9" class="lt jl hu lk b fv lu lv l lw lx">//e.g.1<br/>DS.watch('#main');</span><span id="1e12" class="lt jl hu lk b fv md lv l lw lx">//e.g.2<br/>DS.watch('#main',{<br/>  id: 'my_capture_id',//capture id<br/>  html: 'my_snapshot_html'//snapshot html<br/>});</span><span id="10a0" class="lt jl hu lk b fv md lv l lw lx">//e.g.3<br/>DS.watch('#main',{<br/>  id: function(selector){ return 'generated_capture_id_for_'+selector;}, //return capture id<br/>  html: function(selector){ return 'generated_snapshot_html_for_'+selector;} //return snapshot html<br/>});</span><span id="10b9" class="lt jl hu lk b fv md lv l lw lx">//e.g.4<br/>DS.watch(['#main', '#another']);//watch multi elements</span></pre><p id="9bb8" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">返回DOMSnap</p><h1 id="c2b1" class="jk jl hu bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dt translated">。get(选择器，id)</h1><p id="85d6" class="pw-post-body-paragraph ki kj hu kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf hn dt translated">retrun元素的捕获快照html匹配选择器和捕获id</p><p id="4dad" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">因素</p><ul class=""><li id="a18d" class="ml mm hu kk b kl ly kp lz kt mn kx mo lb mp lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">selector</code>元素的字符串选择器</li><li id="c8d9" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">id</code>string[可选]捕获id，如果没有指定，结果是默认快照</li></ul><p id="8ab6" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">返回字符串html</p><h1 id="9e15" class="jk jl hu bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dt translated">。getAll(选择器)</h1><p id="159b" class="pw-post-body-paragraph ki kj hu kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf hn dt translated">retrun元素的所有捕获的快照html匹配选择器</p><p id="f249" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">因素</p><ul class=""><li id="2b85" class="ml mm hu kk b kl ly kp lz kt mn kx mo lb mp lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">selector</code>元素的字符串选择器</li></ul><p id="ec6b" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">将对象所有快照作为对象返回，例如{ DEFAULT _ CAPTURE _ ID:' html of DEFAULT _ CAPTURE '，my_id: 'html of my_id'}</p><h1 id="d9a5" class="jk jl hu bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dt translated">。移除(选择器，id)</h1><p id="011d" class="pw-post-body-paragraph ki kj hu kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf hn dt translated">删除与选择器[和捕获id]匹配的元素的捕获快照html</p><p id="9806" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">因素</p><ul class=""><li id="18e5" class="ml mm hu kk b kl ly kp lz kt mn kx mo lb mp lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">selector</code>元素的字符串选择器</li><li id="6b15" class="ml mm hu kk b kl mu kp mv kt mw kx mx lb my lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">id</code>string[可选]捕获id，如果未指定，将清空所有快照</li></ul><p id="9b4d" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">返回DOMSnap</p><h1 id="9e48" class="jk jl hu bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dt translated">。清除(版本)</h1><p id="d0ea" class="pw-post-body-paragraph ki kj hu kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf hn dt translated">清除所有捕获的快照</p><p id="cd95" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">因素</p><ul class=""><li id="deb6" class="ml mm hu kk b kl ly kp lz kt mn kx mo lb mp lf mq mr ms mt dt translated"><code class="eh lh li lj lk b">version</code>number[可选]如果未指定，与初始化DOMSnap的值相同。</li></ul><p id="b084" class="pw-post-body-paragraph ki kj hu kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf hn dt translated">返回DOMSnap</p><blockquote class="mz na nb"><p id="179e" class="ki kj nc kk b kl ly kn ko kp lz kr ks nd ma kv kw ne mb kz la nf mc ld le lf hn dt translated"><a class="ae lg" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae lg" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae lg" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae lg" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ki kj nc kk b kl ly kn ko kp lz kr ks nd ma kv kw ne mb kz la nf mc ld le lf hn dt translated">要了解更多信息，请<a class="ae lg" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">阅读我们的“关于”页面</a>、<a class="ae lg" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书上点赞/给我们发消息</a>，或者简单地说，<a class="ae lg" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ki kj nc kk b kl ly kn ko kp lz kr ks nd ma kv kw ne mb kz la nf mc ld le lf hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae lg" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae lg" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote></div></div>    
</body>
</html>