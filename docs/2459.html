<html>
<head>
<title>What does it mean to use Elm?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用榆树是什么意思？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/what-does-it-mean-to-use-elm-cbf00d6bdfa5?source=collection_archive---------1-----------------------#2017-01-29">https://medium.com/hackernoon/what-does-it-mean-to-use-elm-cbf00d6bdfa5?source=collection_archive---------1-----------------------#2017-01-29</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="aa48" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">学习一门新的<a class="ae jp" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程</a>语言似乎每次都遵循相同的步骤:安装、Hello World、算术、一些很酷的功能，然后你就拥有了自己的语言。虽然导游可能会在你的旅程开始时提供一些流行语，但要看到森林的树木并意识到这种新语言的独特性、值得了解和使用并不容易。</p><p id="8f02" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是我最近才明白的一点。当我们在录制《T4》榆树镇播客第八集时，墨菲·兰德尔和我扯到了哈斯克尔。他说:</p><blockquote class="jq jr js"><p id="e503" class="ir is jt it b iu iv iw ix iy iz ja jb ju jd je jf jv jh ji jj jw jl jm jn jo hn dt translated">当我读Haskell的时候，我真的不明白为什么，为什么我读的所有的书都在谈论类型类，应用函数，函子等等。我为什么在乎？一年来，这种语言并没有真正成为一种语言。学习使用语言就是学习那些东西是什么。</p></blockquote><p id="17f4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我最近也在看一堆Ruby大会的讲座。一个常见的主题是随着应用程序的老化和遗留代码的积累，重构和发展应用程序。这些OOP大师传播他们的设计模式和代码味道的知识，旨在指导他们的追随者何时以及如何提取一个对象。从表面上看，Ruby关心的是类、继承、对象和方法。但是据我所知，Ruby实际上是关于对象可以扮演的角色，以及在这些角色之间划分职责和知识。它是关于用几十或几百行程序代码来交换一组连贯的、松散耦合的对象及其消息。</p><p id="94d1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所有这些都引出了一个问题，使用Elm意味着什么？这门语言到底是关于什么的？这些原则给你带来了什么？学习语法和库而不真正理解他们试图讲述的故事是可能的。如果他们会说话，我想他们会这么说。</p><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="fe ff jx"><img src="../Images/4f6972389d772a2d6116c43746531a90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bspzo3390sdbpmVtJdmgYQ.jpeg"/></div></div><figcaption class="kj kk fg fe ff kl km bd b be z ek">Elm enforces a strict separation between the programmer and effects. The effects must be handled carefully, but the rest of the program is much less constrained. (Photo: ESA Astronaut André Kuipers in 2009)</figcaption></figure><p id="6342" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">编写Elm代码的基本原则是将效果从计算中分离出来，并对每种效果使用不同的技术。</p><p id="3341" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所有的计算都是“纯”的，这意味着函数返回什么只取决于它的参数。这是可以预测的，也很容易理解。</p><p id="703d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">“效果”就是其他一切。这些可以是随机数生成(如果您没有显式地管理种子)、当前时间，当然，也可以是来自外部世界的任何东西。所以网络请求、本地存储和URL都是影响。毕竟，我们没有办法保证HTTP请求每次都会返回相同的内容。</p><p id="b3df" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Elm将效果分开，使它们更难使用，因此计算更容易编写。这样做的原因是你的大部分代码是计算，而不是效果。有一些通用策略可以帮助你编写计算代码:</p><p id="e51f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jt">拥抱管道</em>。如果C是一系列不太明显的机器指令，而Ruby是一系列对象之间的消息，那么Elm代码通常采用一系列转换的形式。这些通常由| &gt;操作符连接。如果您需要直觉，请考虑UNIX管道。它用于将数据从一个操作传递到下一个操作。(此外，它是由编译器优化的，因此不会比圆括号更贵。)这里有个例子:</p><pre class="jy jz ka kb fq kn ko kp kq aw kr dt"><span id="bebd" class="ks kt hu ko b fv ku kv l kw kx">sanitize : String -&gt; Maybe Float<br/>sanitize token =<br/>  token<br/>    |&gt; String.trim<br/>    |&gt; String.toFloat<br/>    |&gt; Result.toMaybe</span><span id="1372" class="ks kt hu ko b fv ky kv l kw kx">sumOfString : Float<br/>sumOfString =<br/>  commaSeparatedFloats<br/>    |&gt; String.split ","<br/>    |&gt; List.filterMap sanitize<br/>    |&gt; List.sum</span></pre><p id="e4da" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jt">提取功能</em>。没有人喜欢给一个函数传递大量的参数，不管是什么语言。但是在Elm中，您特别需要找到一个地方，在那里可以干净地拆分计算，传递最少的状态。这导致了连贯的功能:它们很好地完成一件事。相同的属性使得函数是可测试的:没有隐藏状态可模仿。分解函数有助于将算法分解成有用的、可能可重用的代码块。</p><p id="6f22" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jt">建模问题</em>。在Elm中，数据是哑的，但是可预测的。(对比OOP，数据是隐藏的，和行为捆绑在一起。)你应该明确地描述你在做什么。不同的州应该分开。不可能的国家不应该有代表性。通常这意味着定义联合类型，然后使用case语句处理每个可能的值。您可以使用类型别名来表示值的含义(例如URL、PersonID、ShoppingCartItem)，而不是表示值的方式(例如字符串、整数、记录)。</p><p id="21d6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jt">编译器是你的助手</em>。使用类型注释来指定您的意图，因为代码被读取的次数远远多于它被编写的次数。适应映射几乎任何东西的想法；你会及时发现其他有用的模式和习惯用法。对于应用程序，不要担心大量代码是否知道模型是如何定义的；如果你改变它，编译器会告诉你什么中断了。(对于库，您应该尝试隐藏实现，以避免做出破坏性的更改。)不，但是说真的:Elm的编译器消息不同于你在C语言中看到的任何东西。</p><p id="e788" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是对计算代码工具箱的高级概述。当需要处理这些讨厌的影响时，纯计算的一切仍然有效。您显式地对消息类型建模，并在一个巨大的case语句中使用它。编译器仍然会给你有用的错误信息，如果你真的需要，你可以写一些函数来管理效果，管道操作符仍然有效。只有一个主要的补充:榆树建筑。</p><p id="e40f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">人们亲切地称TEA为处理程序外围效果的一种模式，每个Elm程序都使用它。如果你没有看过<a class="ae jp" href="https://guide.elm-lang.org/architecture/" rel="noopener ugc nofollow" target="_blank">指南</a>，大意是你定义了一个模型类型和一个Msg(消息)类型。当消息传入您的应用程序时，您更新模型，该模型被传递给创建虚拟DOM的视图函数(如React)。你也可以向外界发送信息。</p><p id="6362" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您为TEA定义了更新、查看和一些其他函数，Elm运行时会在必要时调用它们。所有的计算——记住，大部分程序——都是从这些函数中的一个调用的。</p><p id="9168" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以，也许榆树的秘密就是没有秘密。你不需要像在Haskell中那样预先学习很多抽象。你不必像在Ruby中那样，为了避免六个月内的灾难而做得完全正确。Elm不鼓励事后批评自己:如果代码做了你想让它做的事情，它可能是好的。以后很容易改变，所以现在不要担心变得完美。</p><p id="3a3d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以试试吧。你可能会惊讶于它的工作效率。</p><div class="jy jz ka kb fq ab cb"><figure class="kz kc la lb lc ld le paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="kz kc la lb lc ld le paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="kz kc la lb lc ld le paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="jq jr js"><p id="f922" class="ir is jt it b iu iv iw ix iy iz ja jb ju jd je jf jv jh ji jj jw jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is jt it b iu iv iw ix iy iz ja jb ju jd je jf jv jh ji jj jw jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="fe ff lf"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="jy jz ka kb fq kc"><div class="bz el l di"><div class="lg lh l"/></div></figure></div></div>    
</body>
</html>