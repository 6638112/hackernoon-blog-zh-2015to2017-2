<html>
<head>
<title>zksnarks and blockchain scalability</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">zksnarks和区块链可伸缩性</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/zksnarks-and-blockchain-scalability-af85e350a93a?source=collection_archive---------8-----------------------#2017-06-07">https://medium.com/hackernoon/zksnarks-and-blockchain-scalability-af85e350a93a?source=collection_archive---------8-----------------------#2017-06-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="e70b" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">实现区块链可伸缩性四种有趣方法</h2></div><p id="b726" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">免责声明:</strong>我不是zksnark专家。接下来的可能是垃圾，任何错误都是我的。非常感谢<a class="ae kf" rel="noopener" href="/@chriseth">克里斯·雷特维纳</a>审阅这篇文章。我推荐他在zksnarks 上的<a class="ae kf" href="http://chriseth.github.io/notes/articles/zksnarks/zksnarks.pdf" rel="noopener ugc nofollow" target="_blank">介绍文章。也感谢来自Zcash的Ariel Gabizon指出了我忽略的几个细微之处。</a></p><h2 id="4753" class="kg kh hu bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la dt translated">定义</h2><p id="1f27" class="pw-post-body-paragraph jj jk hu jl b jm lb iv jo jp lc iy jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">设<strong class="jl hv"> P </strong>是一个有两个输入的程序。第一个输入<strong class="jl hv"> i </strong>是公共的。第二个输入<strong class="jl hv"> w </strong>是可以保密的见证。我们使用<strong class="jl hv"> o </strong>作为<strong class="jl hv"> P </strong>的输出。</p><p id="5868" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">给定一个程序<strong class="jl hv"> P </strong>，一个输入<strong class="jl hv"> i </strong>和一个输出<strong class="jl hv"> o </strong>，如果证明者知道一个证人<strong class="jl hv"> w </strong>使得<strong class="jl hv"> o = P(i，w) </strong>那么证明者可以给出一个证明，其中:</p><ol class=""><li id="1883" class="lg lh hu jl b jm jn jp jq js li jw lj ka lk ke ll lm ln lo dt translated">(空间密度)证明非常短(即使对于非常大的程序也只有几百个字节；例如Zcash达到288字节)</li><li id="d58a" class="lg lh hu jl b jm lp jp lq js lr jw ls ka lt ke ll lm ln lo dt translated">(时间密度)证明时间与<strong class="jl hv"> i </strong>和<strong class="jl hv"> o </strong>的长度成线性关系</li><li id="6b5c" class="lg lh hu jl b jm lp jp lq js lr jw ls ka lt ke ll lm ln lo dt translated">(零知识)除了<strong class="jl hv"> w </strong>的存在之外，该证明没有泄露关于<strong class="jl hv"> P </strong>的执行或<strong class="jl hv"> w </strong>的内容</li></ol><p id="4ece" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这样的证明被称为zksnarks。</p><p id="158e" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">(作为一个技术题外话，zksnarks只为验证程序<strong class="jl hv"> P </strong>所知，这些验证程序在多项式时间内运行到<strong class="jl hv"> i </strong>和<strong class="jl hv"> w </strong>的长度。我们还假设安全参数“λ”是固定的。)</p><h2 id="b8df" class="kg kh hu bd ki kj kk kl km kn ko kp kq js kr ks kt jw ku kv kw ka kx ky kz la dt translated">直觉</h2><p id="e70a" class="pw-post-body-paragraph jj jk hu jl b jm lb iv jo jp lc iy jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">我喜欢把zksnarks同时看作是用于计算的<a class="ae kf" href="https://hackernoon.com/tagged/cryptographic" rel="noopener ugc nofollow" target="_blank">加密</a>散列和签名的等价物(将这两种加密原语扩展到数据之外)。像哈希一样，zksnarks将计算“压缩”成一个短而快速的验证指纹。像签名一样，zksnarks“证明”计算的有效性。</p><p id="f64f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">下面我们展示了使用zksnarks解决<a class="ae kf" href="https://hackernoon.com/tagged/blockchain" rel="noopener ugc nofollow" target="_blank">区块链</a>可伸缩性的方法。鉴于当今的技术水平，这些大多是理论上的。zksnarks的验证很便宜，但证明的生成是真正的瓶颈。近年来，围绕zksnarks的密码学研究进展迅速。数量级的改进使Zcash成为现实。下面概述的方法有可能在几年后变得实用。</p><h1 id="eb0b" class="lu kh hu bd ki lv lw lx km ly lz ma kq ja mb jb kt jd mc je kw jg md jh kz me dt translated">1)快速同步</h1><p id="3caf" class="pw-post-body-paragraph jj jk hu jl b jm lb iv jo jp lc iy jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">传统上，同步区块链需要带宽、存储和计算。例如，在比特币中，大部分计算都是检查签名。有了zksnarks，就可以消除逐个显式验证事务签名的负担。一个zksnark可以证明一个块的所有签名。这意味着同步比特币的计算要求可以大大降低。</p><p id="2014" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">看到这个让<strong class="jl hv"> P </strong>是程序在哪里:</p><ul class=""><li id="25cc" class="lg lh hu jl b jm jn jp jq js li jw lj ka lk ke mf lm ln lo dt translated"><strong class="jl hv"> i </strong>是一个块哈希</li><li id="74a1" class="lg lh hu jl b jm lp jp lq js lr jw ls ka lt ke mf lm ln lo dt translated"><strong class="jl hv"> w </strong>是块</li><li id="d47a" class="lg lh hu jl b jm lp jp lq js lr jw ls ka lt ke mf lm ln lo dt translated">如果<strong class="jl hv"> w </strong>具有hash <strong class="jl hv"> i </strong>并且<strong class="jl hv"> w </strong>中的所有事务都具有有效签名，则<strong class="jl hv"> P </strong>返回True，否则<strong class="jl hv"> P </strong>返回False</li></ul><p id="b821" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">假设块的大小是有限的(例如1 MB ),那么只要<strong class="jl hv"> o </strong>为真，就可以为<strong class="jl hv"> P </strong>生成zksnarks。这种zksnarks用密码证明签名是有效的，而不需要验证(甚至下载！)的签名。这是有效的类固醇。请注意，<strong class="jl hv"> i </strong>和<strong class="jl hv"> o </strong>的大小是恒定的(分别为256位和1位),因此验证需要恒定的时间。</p><h1 id="917f" class="lu kh hu bd ki lv lw lx km ly lz ma kq ja mb jb kt jd mc je kw jg md jh kz me dt translated">2)超轻客户端</h1><p id="a2d1" class="pw-post-body-paragraph jj jk hu jl b jm lb iv jo jp lc iy jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">传统上，想要回答一些关于区块链的问题的轻客户端必须做两件事。首先，它必须下载相关的区块链数据，然后对这些数据进行相关的计算。例如，一个想回答问题“这个特定的众筹基金达到目标了吗？”会下载众筹交易并把金额加起来。有了zksnarks，就可以用密码向客户展示这些事实，而无需下载数据或对数据进行计算。这为“超轻”客户端打开了大门，这些客户端拥有接近于零的带宽、存储和计算资源，但仍然保持加密主权。</p><p id="795f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">要了解这一点，让<strong class="jl hv"> P </strong>成为一个轻客户端查询虚拟机，其中:</p><ul class=""><li id="d991" class="lg lh hu jl b jm jn jp jq js li jw lj ka lk ke mf lm ln lo dt translated">I包含指定要查询的区块链的块散列和指定对该区块链的查询的脚本(例如，一些web3 JavaScript)</li><li id="cf26" class="lg lh hu jl b jm lp jp lq js lr jw ls ka lt ke mf lm ln lo dt translated">w是查询所需的区块链数据，以及用于轻型客户端验证的Patricia-Merkle树的所需部分</li><li id="b0c6" class="lg lh hu jl b jm lp jp lq js lr jw ls ka lt ke mf lm ln lo dt translated"><strong class="jl hv"> o </strong>是脚本的输出</li></ul><p id="37ec" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">给定一个查询<strong class="jl hv"> i </strong>和一个输出<strong class="jl hv"> o </strong>，可以产生一个相应的zksnark来证明查询结果的有效性。</p><p id="c752" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">你可以想象这样一个世界，专用证明者为超轻客户端提供zksnarks-as-a-service。因为生成zksnarks可能会很昂贵，所以专用集成电路会加速这个过程。证明者将成为新的矿工，专用硬件的效用从提供安全性转变为提供可扩展性，采矿费转变为“证明费”。</p><h1 id="4b3c" class="lu kh hu bd ki lv lw lx km ly lz ma kq ja mb jb kt jd mc je kw jg md jh kz me dt translated">3)抽象出代码和存储</h1><p id="ac8f" class="pw-post-body-paragraph jj jk hu jl b jm lb iv jo jp lc iy jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">目前在以太坊上，智能合约的代码和存储(它们一起描述状态)完全存储在区块链上。这会占用资源，而且不利于隐私。事实证明，zksnarks可以将智能合约的状态浓缩到一个哈希中，混淆底层代码和存储。</p><p id="3075" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">要了解这一点，让<strong class="jl hv"> P </strong>成为以太坊轻客户端验证器，其中:</p><ul class=""><li id="4dd9" class="lg lh hu jl b jm jn jp jq js li jw lj ka lk ke mf lm ln lo dt translated"><strong class="jl hv"> i </strong>是哈希的三元组。第一个散列是指定当前状态的区块链的块散列。第二个散列值<strong class="jl hv"> h_now </strong>记录了当前在区块链中表示的智能合约的状态。最后，<strong class="jl hv"> h_future </strong>是智能合约在未来某个时间的状态的散列。</li><li id="4bc9" class="lg lh hu jl b jm lp jp lq js lr jw ls ka lt ke mf lm ln lo dt translated"><strong class="jl hv"> w </strong>具有智能合约在时间<strong class="jl hv"> h_now </strong>的状态，加上将状态从<strong class="jl hv"> h_now </strong>推进到<strong class="jl hv"> h_future </strong>的中介交易，加上Patricia-Merkle树中需要进行状态的轻型客户端验证的部分</li><li id="d846" class="lg lh hu jl b jm lp jp lq js lr jw ls ka lt ke mf lm ln lo dt translated">如果<strong class="jl hv"> h_future </strong>对应的状态有效，P 返回真，否则返回假</li></ul><p id="1858" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">可以为<strong class="jl hv"> P </strong>生成zksnarks，其证明智能合约的状态改变的有效性，而不暴露智能合约的代码或其存储。</p><h1 id="d009" class="lu kh hu bd ki lv lw lx km ly lz ma kq ja mb jb kt jd mc je kw jg md jh kz me dt translated"><strong class="ak"> 4)通用状态通道</strong></h1><p id="f650" class="pw-post-body-paragraph jj jk hu jl b jm lb iv jo jp lc iy jr js ld ju jv jw le jy jz ka lf kc kd ke hn dt translated">上述用于从区块链中抽象出代码和存储的技术(将状态推离链，例如在IPFS上)还允许批处理在<strong class="jl hv"> h_now </strong>和<strong class="jl hv"> h_future </strong>之间发生的状态变化。<strong class="jl hv"> </strong>这个构造实际上是一个通用的状态通道。除了设置和结算交易之外，所有活动都发生在链外。</p><p id="9468" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这种构造允许状态通道仅在区块链上存储单个散列，并且通过单个zksnark验证在区块链上强制执行状态更改。</p><p id="8c71" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">你可以想象一个区块链(zEthereum？)中，它只存储智能合约的散列，其中唯一的操作码用于zksnark验证。</p><blockquote class="mg mh mi"><p id="d58c" class="jj jk mj jl b jm jn iv jo jp jq iy jr mk jt ju jv ml jx jy jz mm kb kc kd ke hn dt translated"><a class="ae kf" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kf" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kf" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae kf" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="jj jk mj jl b jm jn iv jo jp jq iy jr mk jt ju jv ml jx jy jz mm kb kc kd ke hn dt translated">要了解更多信息，请<a class="ae kf" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">阅读我们的“关于”页面</a>、<a class="ae kf" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书上点赞/给我们发消息</a>，或者简单地说，<a class="ae kf" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="jj jk mj jl b jm jn iv jo jp jq iy jr mk jt ju jv ml jx jy jz mm kb kc kd ke hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kf" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kf" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="mn mo mp mq fq mr"><div class="bz el l di"><div class="ms mt l"/></div></figure></div></div>    
</body>
</html>