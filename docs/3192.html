<html>
<head>
<title>Exposing HomeObject</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">暴露HomeObject</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/exposing-homeobject-e61061cbfe17?source=collection_archive---------4-----------------------#2017-03-19">https://medium.com/hackernoon/exposing-homeobject-e61061cbfe17?source=collection_archive---------4-----------------------#2017-03-19</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="385c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">随着我阅读更多的规范，我对<code class="eh jp jq jr js b">super</code>关键字所使用的<code class="eh jp jq jr js b"><a class="ae jt" href="https://tc39.github.io/ecma262/#table-16" rel="noopener ugc nofollow" target="_blank">[[HomeObject]]</a>.</code> <code class="eh jp jq jr js b">[[HomeObject]]</code>变得更加好奇:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="6b2d" class="kc kd hu js b fv ke kf l kg kh">let parent = {<br/>    x: 'parent'<br/>};<br/>let child = {<br/>    x: 'child',<br/>    papaX() { return super.x; }<br/>};</span><span id="9ebf" class="kc kd hu js b fv ki kf l kg kh">child.papaX(); // undefined<br/>Object.setPrototypeOf(child, parent);<br/>child.papaX(); // 'parent'</span></pre><p id="b1f7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh jp jq jr js b">super</code>在<code class="eh jp jq jr js b">child</code>的一个方法中使用时，基本上相当于<code class="eh jp jq jr js b">Object.getPrototypeOf(child)</code>，它的值可以在调用之间改变。然而，要做到这一点，一个方法(澄清:一个方法是一个类似于<code class="eh jp jq jr js b">papaX</code>的函数，用简写符号声明)需要知道它是在哪个对象中定义的。众所周知，这可能与函数的<code class="eh jp jq jr js b">this</code>值大相径庭——<code class="eh jp jq jr js b">this</code>可以随着<code class="eh jp jq jr js b">call</code>和朋友以及无数其他原因而改变。</p><p id="1091" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">输入<code class="eh jp jq jr js b">[[HomeObject]]</code>。这是一个在创建时分配给方法的神奇属性，指的是创建它们的对象。在上面的例子中，<code class="eh jp jq jr js b">papaX</code>内的<code class="eh jp jq jr js b">super.x</code>实际上转化为:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="c69a" class="kc kd hu js b fv ke kf l kg kh">Object.getPrototypeOf(papaX.[[HomeObject]]).x</span></pre><p id="37af" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当然，除了访问函数的<code class="eh jp jq jr js b">[[HomeObject]]</code>超出了常规JavaScript代码的能力之外。</p><p id="cab6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这引起了我的兴趣。如果我们<em class="kj">有权力访问函数的<code class="eh jp jq jr js b">[[HomeObject]]</code>会怎么样？如果函数确实与创建它们的对象有一个常量绑定？我不是说拥有一个是个好主意，事实上我是说这是个坏主意，但这是个有趣的T21。</em></p><p id="5a8d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以问一个问题:我们如何在不同的引擎中实现对<code class="eh jp jq jr js b">[[HomeObject]]</code>的访问？</p><p id="25b3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我假设没有JavaScript引擎的先验知识，它们是如何实现的，C++，对鲸鱼的理解，呼吸的专业知识，以及大多数一般的东西。如果你曾经想知道发动机内部，我希望这将娱乐和惊喜！</p><h1 id="6674" class="kk kd hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">V8</h1><p id="eb81" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">让我们从问V8的来源到底在哪里开始。你可能会忍不住回答说是github上的<a class="ae jt" href="https://github.com/v8/v8" rel="noopener ugc nofollow" target="_blank"/>。虽然这(部分)是真的，但让我给你介绍互联网上最好的网站:https://cs.chromium.org</p><p id="7927" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们从乐观地搜索<code class="eh jp jq jr js b">HomeObject</code>开始</p><figure class="ju jv jw jx fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="fe ff lm"><img src="../Images/ca917e801e91087b80de9622997f2320.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v46vQMPIfZmUCyYs9Lk5uQ.png"/></div></div></figure><p id="cab0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">看起来很有希望！我们可以继续搜索以查看所有搜索结果，但是让我们看看我们面前的内容:</p><ul class=""><li id="c108" class="lu lv hu it b iu iv iy iz jc lw jg lx jk ly jo lz ma mb mc dt translated">我们现在听起来并不感兴趣，因为它可能只会检查一个函数是否是一个方法。</li><li id="24fe" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">听起来更好，听起来像是在<code class="eh jp jq jr js b">HomeObject</code>的地方，所以也许我们可以去那里找应召者？</li><li id="4019" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">哦，<code class="eh jp jq jr js b">TestHomeObject</code>！测试永远是了解像v8这样复杂的庞然大物如何工作的最佳场所之一，<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/test/mjsunit/es6/object-literals-super.js?l=8&amp;rcl=8dd39fe35df127390b0f1de3e236c39cd9222697" rel="noopener ugc nofollow" target="_blank">让我们打开那个</a>:</li></ul><figure class="ju jv jw jx fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="fe ff mi"><img src="../Images/bb5d4d61573730b9452cad3dde8c5078.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZgMWPJhuGw_Vfjl38uvhMA.png"/></div></div></figure><p id="5b6d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">嗯，太奇怪了。这个<code class="eh jp jq jr js b">%HomeObjectSymbol()</code>是怎么回事？那个<code class="eh jp jq jr js b">%</code>在那里做什么，为什么他们把<code class="eh jp jq jr js b">HomeObject</code>叫做一个符号？</p><p id="acb0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">事实证明，v8有一部分是用JavaScript编写的(例如<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/js/array.js?l=1222&amp;rcl=8dd39fe35df127390b0f1de3e236c39cd9222697" rel="noopener ugc nofollow" target="_blank"> Array.prototype.reduce </a>以及许多其他函数！)有时需要使用不能用普通js编写的特性(例如，运行GC、优化这个函数等等)，或者出于性能原因应该用本机代码完成的特性。<a class="ae jt" href="https://github.com/v8/v8/wiki/Built-in-functions" rel="noopener ugc nofollow" target="_blank">那些特殊功能</a>用前缀<code class="eh jp jq jr js b">%</code>表示。通过传递一个特殊的<code class="eh jp jq jr js b">--allow-natives-syntax</code>标志，我们实际上可以将它们与可信的ol’node(运行在v8上)一起使用:</p><figure class="ju jv jw jx fq ln fe ff paragraph-image"><div class="fe ff mj"><img src="../Images/66f73b63eb7a57b30f99a4efbf5f3b8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*8rVULYur_0UIVh0i4Ctbhg.png"/></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">I should probably go to sleep!</figcaption></figure><p id="afe0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这有点酷！嘿，让我们把这些功能都列出来。我们碰巧已经看到了其中一个的名字，<code class="eh jp jq jr js b">HomeObjectSymbol</code>，所以让我们<a class="ae jt" href="https://cs.chromium.org/search/?q=HomeObjectSymbol&amp;type=cs" rel="noopener ugc nofollow" target="_blank">搜索一下那个</a>:</p><figure class="ju jv jw jx fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="fe ff mo"><img src="../Images/c5db734e0d24325b7a65a6fd1d9c74cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YmxCgXF3UIBVANr2y4OF0g.png"/></div></div></figure><p id="b644" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">只有十个结果，所以没有什么明显的不太坏，我们可以一个一个来。你知道吗…第一个结果看起来很有希望:</p><figure class="ju jv jw jx fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="fe ff mp"><img src="../Images/5ce6f4d28e1a3be52ceabd793276a786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IC1g1KhLnjwNiYDypnYwMQ.png"/></div></div></figure><p id="aa41" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们看看它们是真的都是内置的，还是只是用来戏弄我们的。检查上面列表中的两个可能内置的:</p><figure class="ju jv jw jx fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="fe ff mq"><img src="../Images/bb2c71ee5943a60ae361756f8f718758.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LeUxvSadTZwKp9wQdavx8g.png"/></div></div></figure><p id="af05" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">第二个是测试如果我们尝试运行一个不存在的内置会发生什么，看起来其他两个确实是内置的，所以我们有了它，所有内置的列表！</p><p id="d11c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是等等，是什么把我们带到这个兔子洞的？我们在看<code class="eh jp jq jr js b">HomeObject</code>是如何被访问的，并发现了<code class="eh jp jq jr js b">%HomeObjectSymbol</code>。让我们回到我们的搜索，看看它是在哪里实现的:</p><figure class="ju jv jw jx fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="fe ff mo"><img src="../Images/c5db734e0d24325b7a65a6fd1d9c74cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YmxCgXF3UIBVANr2y4OF0g.png"/></div></div></figure><p id="6efb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"> <code class="eh jp jq jr js b"><a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/runtime/runtime-classes.cc?l=96&amp;rcl=06d36330e481d098c19fe047809d45955837ee46" rel="noopener ugc nofollow" target="_blank">runtime-classes.cc</a></code>里面的宏调用<code class="eh jp jq jr js b"><a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/runtime/runtime-classes.cc?l=96&amp;rcl=06d36330e481d098c19fe047809d45955837ee46" rel="noopener ugc nofollow" target="_blank">RUNTIME_FUNCTION</a></code> <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/runtime/runtime-classes.cc?l=96&amp;rcl=06d36330e481d098c19fe047809d45955837ee46" rel="noopener ugc nofollow" target="_blank">看起来很有前途，尤其是在<code class="eh jp jq jr js b">runtime.h</code>中声明该函数的时候。让我们看看！</a></p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="989d" class="kc kd hu js b fv ke kf l kg kh"><a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/runtime/runtime-classes.cc?l=96&amp;gs=cpp%253Av8%253A%253Ainternal%253A%253ARuntime_HomeObjectSymbol(int%252C%2Bv8%253A%253Ainternal%253A%253AObject%2B**%252C%2Bv8%253A%253Ainternal%253A%253AIsolate%2B*)%253A%253Aargs%2540chromium%252F..%252F..%252Fv8%252Fsrc%252Fruntime%252Fruntime-classes.cc%253A4294967295%257Cdef&amp;gsn=R&amp;ct=xref_usages" rel="noopener ugc nofollow" target="_blank">R</a>UNTIME_FUNCTION(<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/runtime/runtime-classes.cc?l=96&amp;gs=cpp%253Av8%253A%253Ainternal%253A%253ARuntime_HomeObjectSymbol(int%252C%2Bv8%253A%253Ainternal%253A%253AObject%2B**%252C%2Bv8%253A%253Ainternal%253A%253AIsolate%2B*)%2540chromium%252F..%252F..%252Fv8%252Fsrc%252Fruntime%252Fruntime-classes.cc%257Cdef&amp;gsn=Runtime_HomeObjectSymbol&amp;ct=xref_usages" rel="noopener ugc nofollow" target="_blank">Runtime_<strong class="js hv">HomeObjectSymbol</strong></a>) {<br/>  <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/runtime/runtime-classes.cc?l=97&amp;gs=cpp%253Av8%253A%253Ainternal%253A%253A__RT_impl_Runtime_HomeObjectSymbol(v8%253A%253Ainternal%253A%253AArguments%252C%2Bv8%253A%253Ainternal%253A%253AIsolate%2B*)%253A%253A_msg%2540chromium%252F..%252F..%252Fv8%252Fsrc%252Fruntime%252Fruntime-classes.cc%253A4294967295%257Cdef&amp;gsn=D&amp;ct=xref_usages" rel="noopener ugc nofollow" target="_blank">D</a>CHECK_EQ(0, <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/runtime/runtime-classes.cc?l=96&amp;ct=xref_jump_to_def&amp;gsn=args" rel="noopener ugc nofollow" target="_blank">args</a>.<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/arguments.h?l=62&amp;ct=xref_jump_to_def&amp;gsn=length" rel="noopener ugc nofollow" target="_blank">length</a>());<br/>  return <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/runtime/runtime-classes.cc?l=96&amp;ct=xref_jump_to_def&amp;gsn=isolate" rel="noopener ugc nofollow" target="_blank">isolate</a>-&gt;<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/isolate.h?l=856&amp;ct=xref_jump_to_def&amp;gsn=heap" rel="noopener ugc nofollow" target="_blank">heap</a>()-&gt;<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/heap/heap-inl.h?l=139&amp;ct=xref_jump_to_def&amp;gsn=home_object_symbol" rel="noopener ugc nofollow" target="_blank">home_object_symbol</a>();<br/>}</span></pre><p id="c7cb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这并不能告诉我们太多，让我们点击<code class="eh jp jq jr js b">home_object_access</code>和<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/heap/heap-inl.h?l=139&amp;rcl=06d36330e481d098c19fe047809d45955837ee46" rel="noopener ugc nofollow" target="_blank">，看看它会把我们带到哪里</a>:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="24cb" class="kc kd hu js b fv ke kf l kg kh">#define <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/heap/heap-inl.h?l=137&amp;gs=cpp%253Amacro-SYMBOL_ACCESSOR()%2540chromium%252F..%252F..%252Fv8%252Fsrc%252Fheap%252Fheap-inl.h%257Cdef&amp;gsn=SYMBOL_ACCESSOR&amp;ct=xref_usages" rel="noopener ugc nofollow" target="_blank">SYMBOL_ACCESSOR</a>(name) \<br/>  Symbol* Heap::name() { return Symbol::cast(roots_[k##name##RootIndex]); }<br/><a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/heap/heap-inl.h?l=139&amp;gs=cpp%253Av8%253A%253Ainternal%253A%253Aclass-Heap%253A%253Aarray_iteration_kind_symbol()%2540chromium%252F..%252F..%252Fv8%252Fsrc%252Fheap%252Fheap-inl.h%257Cdef&amp;gsn=P&amp;ct=xref_usages" rel="noopener ugc nofollow" target="_blank">P</a>RIVATE_SYMBOL_LIST(<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/heap/heap-inl.h?l=137&amp;ct=xref_jump_to_def&amp;gsn=SYMBOL_ACCESSOR" rel="noopener ugc nofollow" target="_blank">SYMBOL_ACCESSOR</a>)<br/>#undef <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/heap/heap-inl.h?l=137&amp;ct=xref_jump_to_def&amp;gsn=SYMBOL_ACCESSOR" rel="noopener ugc nofollow" target="_blank">SYMBOL_ACCESSOR</a></span></pre><p id="a51d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以我不知道你，但我不是一个C预处理器，所以所有这些对我来说就像一堆胡言乱语。然而，看着它让我想到:齐拉克，你这个英俊的生物，你这个黑暗宇宙中光明的化身，我早上醒来的原因，我的馅饼中的核桃和我牙齿中的金块，如果它像任何其他符号一样是一个符号，那么要怎样才能揭露它，我们才能做<code class="eh jp jq jr js b">func[Symbol.homeObject]</code>？</p><p id="6635" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了回答这个问题，让我们看看其他符号是如何声明并复制它们的。当我们这样做的时候，记住我们在上面看到的代码行:<code class="eh jp jq jr js b"><a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/runtime/runtime-classes.cc?l=96&amp;ct=xref_jump_to_def&amp;gsn=isolate" rel="noopener ugc nofollow" target="_blank">isolate</a>-&gt;<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/isolate.h?l=856&amp;ct=xref_jump_to_def&amp;gsn=heap" rel="noopener ugc nofollow" target="_blank">heap</a>()-&gt;<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/heap/heap-inl.h?l=139&amp;ct=xref_jump_to_def&amp;gsn=home_object_symbol" rel="noopener ugc nofollow" target="_blank">home_object_symbol</a>()</code>。我们不需要了解它是做什么的，只需要了解它的整体感觉。我们将选择一个较少使用的符号，这样我们可以更容易地搜索，<code class="eh jp jq jr js b"><a class="ae jt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/unscopables" rel="noopener ugc nofollow" target="_blank">unscopables</a></code>和<a class="ae jt" href="https://cs.chromium.org/search/?q=unscopables+file:src/v8+-file:test+-lang:javascript&amp;type=cs" rel="noopener ugc nofollow" target="_blank">将搜索范围缩小到仅在v8中搜索，并排除测试和javascript文件</a>:</p><figure class="ju jv jw jx fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="fe ff mr"><img src="../Images/4a5c582a5b31a21a91791a6cc50b7717.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J_KNJYpvcIeB2kbAEkjgXA.png"/></div></div></figure><p id="f0f9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">酷，只有6个结果，很容易就能全部看完。让我们看看:</p><ul class=""><li id="34a2" class="lu lv hu it b iu iv iy iz jc lw jg lx jk ly jo lz ma mb mc dt translated"><code class="eh jp jq jr js b">api.cc</code>看起来不相关，我们正在寻找实施和<code class="eh jp jq jr js b">GetUnscopables</code>不是。</li><li id="98cc" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated"><code class="eh jp jq jr js b">v8.h</code>相同，只声明<code class="eh jp jq jr js b">GetUnscopables</code>。</li><li id="2906" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated"><code class="eh jp jq jr js b">contexts.cc</code>中的所有结果都与<code class="eh jp jq jr js b">UnscopablesLookup</code>相关。</li><li id="df94" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">变更日志。的确很吸引人，但不是为了我们的目的。</li><li id="1428" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">看起来刚刚好。还记得上面那行吗？通过获取一些堆，我们得到了对<code class="eh jp jq jr js b">home_object_symbol</code>的引用。让我们在另一个选项卡中打开它，看看最终的结果。</li><li id="17c4" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated"><code class="eh jp jq jr js b">bootstrapper.cc</code>多么奇怪的名字，但是在一个名为<code class="eh jp jq jr js b">InitializeGlobal</code>的函数中调用<code class="eh jp jq jr js b">InstallConstant</code>足以让我在一周的任何一天都感兴趣！在另一个标签中打开它。</li></ul><p id="8f44" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以让我们<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/heap-symbols.h?l=238&amp;rcl=f7036b132f6bcce9312b52a9ba386ae487280713" rel="noopener ugc nofollow" target="_blank">看看这个堆是关于什么的</a>:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="6362" class="kc kd hu js b fv ke kf l kg kh">#define <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/heap-symbols.h?l=190&amp;gs=cpp%253Amacro-PRIVATE_SYMBOL_LIST()%2540chromium%252F..%252F..%252Fv8%252Fsrc%252Fheap-symbols.h%257Cdef&amp;gsn=PRIVATE_SYMBOL_LIST&amp;ct=xref_usages" rel="noopener ugc nofollow" target="_blank">PRIVATE_SYMBOL_LIST</a>(V)              \<br/>  V(array_iteration_kind_symbol)            \<br/>  V(array_iterator_next_symbol)             \<br/>  // ...<br/>  V(home_object_symbol)                     \<br/>  // ...<br/>  V(uninitialized_symbol)<br/><br/>#define <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/heap-symbols.h?l=228&amp;gs=cpp%253Amacro-PUBLIC_SYMBOL_LIST()%2540chromium%252F..%252F..%252Fv8%252Fsrc%252Fheap-symbols.h%257Cdef&amp;gsn=PUBLIC_SYMBOL_LIST&amp;ct=xref_usages" rel="noopener ugc nofollow" target="_blank">PUBLIC_SYMBOL_LIST</a>(V)                    \<br/>  V(async_iterator_symbol, Symbol.asyncIterator) \<br/>  V(iterator_symbol, Symbol.iterator)            \<br/>  // ...<br/>  V(to_primitive_symbol, Symbol.toPrimitive)     \<br/>  V(<strong class="js hv">unscopables</strong>_symbol, Symbol.<strong class="js hv">unscopables</strong>)</span></pre><p id="8b3a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">漫游到我们的城镇是两个列表，一个<code class="eh jp jq jr js b">PRIVATE</code>和一个<code class="eh jp jq jr js b">PUBLIC</code>符号列表。我们看到亲爱的<code class="eh jp jq jr js b">unscopables</code>在<code class="eh jp jq jr js b">PUBLIC</code>列表中，但是我们的门徒<code class="eh jp jq jr js b">home_object</code>在<code class="eh jp jq jr js b">PRIVATE</code>列表中！在这一集“内向者到外向者:极端符号改造”中，是时候摇摇它害羞的举止，把它暴露给世界了:</p><figure class="ju jv jw jx fq ln"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="76ea" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">只需将符号向下移动到<code class="eh jp jq jr js b">PUBLIC</code>列表，并给它那个奇怪的第二个参数，<code class="eh jp jq jr js b">PUBLIC</code>列表现在看起来像:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="5504" class="kc kd hu js b fv ke kf l kg kh">#define <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/heap-symbols.h?l=228&amp;gs=cpp%253Amacro-PUBLIC_SYMBOL_LIST()%2540chromium%252F..%252F..%252Fv8%252Fsrc%252Fheap-symbols.h%257Cdef&amp;gsn=PUBLIC_SYMBOL_LIST&amp;ct=xref_usages" rel="noopener ugc nofollow" target="_blank">PUBLIC_SYMBOL_LIST</a>(V)                    \<br/>  V(async_iterator_symbol, Symbol.asyncIterator) \<br/>  V(iterator_symbol, Symbol.iterator)            \<br/>  V(intl_fallback_symbol, IntlFallback)          \<br/>  V(match_symbol, Symbol.match)                  \<br/>  V(replace_symbol, Symbol.replace)              \<br/>  V(search_symbol, Symbol.search)                \<br/>  V(species_symbol, Symbol.species)              \<br/>  V(split_symbol, Symbol.split)                  \<br/>  V(to_primitive_symbol, Symbol.toPrimitive)     \<br/>  V(home_object_symbol, Symbol.homeObject)       \<br/>  V(unscopables_symbol, Symbol.unscopables)</span></pre><p id="934a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">酷毙了。然而，我们只是使这个符号成为“公共的”，不管这意味着什么，我们还是要以某种方式公开它的<code class="eh jp jq jr js b">Symbol</code>功能！还记得我们上面看到的<code class="eh jp jq jr js b">InstallConstant</code>结果吗？让我们来看看这段代码。</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="3d49" class="kc kd hu js b fv ke kf l kg kh">// Install well-known symbols.<br/>InstallConstant(isolate, symbol_fun, "hasInstance",<br/>                factory-&gt;has_instance_symbol());<br/>InstallConstant(isolate, symbol_fun, "isConcatSpreadable",<br/>                factory-&gt;is_concat_spreadable_symbol());<br/>// ...<br/>InstallConstant(isolate, symbol_fun, "unscopables",<br/>                factory-&gt;unscopables_symbol());</span></pre><p id="9161" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">好了…这些就是<code class="eh jp jq jr js b">Symbol</code>的全部属性。我们自己加吧！</p><figure class="ju jv jw jx fq ln"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="7c93" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们准备好了！</p><h2 id="0b8f" class="kc kd hu bd kl mu mv mw kp mx my mz kt jc na nb kx jg nc nd lb jk ne nf lf ng dt translated">让我们玩v8吧</h2><p id="2cf4" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">一方面，编译v8并不难，但另一方面，开始时会有点麻烦，所以让我们来完成这些步骤。我将使用Linux，OSX的指令应该是非常相似的(wooo shells！)，文档链接提供了Windows的安装说明。</p><p id="8b49" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">反正！谷歌有许多大型的、相互关联的项目，以及他们自己的一套工具来管理这些项目，这套工具叫做<a class="ae jt" href="http://dev.chromium.org/developers/how-tos/depottools" rel="noopener ugc nofollow" target="_blank"> depot_tools </a>。它包含帮助者克隆回购，保持第三方依赖关系最新，创建问题和补丁等。它们还包含必要的构建系统(<a class="ae jt" href="https://ninja-build.org/" rel="noopener ugc nofollow" target="_blank"> ninja </a>)和makefile生成器(<a class="ae jt" href="https://chromium.googlesource.com/chromium/src/tools/gn/" rel="noopener ugc nofollow" target="_blank"> gn </a>)。谁说软件开发不好玩？</p><p id="ac7c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们将从<a class="ae jt" href="https://www.chromium.org/developers/how-tos/install-depot-tools" rel="noopener ugc nofollow" target="_blank">安装depot_tools </a>开始:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="8dd7" class="kc kd hu js b fv ke kf l kg kh">$ mkdir awesome-v8-playground &amp;&amp; cd awesome-v8-playground<br/>$ git clone <a class="ae jt" href="https://chromium.googlesource.com/chromium/tools/depot_tools.git" rel="noopener ugc nofollow" target="_blank">https://chromium.googlesource.com/chromium/tools/depot_tools.git</a><br/>$ export PATH=”$(pwd)/depot_tools”:”$PATH”<br/>$ which gn<br/>/home/zirak/awesome-v8-playground/depot_tools/gn</span></pre><p id="0e0d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">库里奥。如果你计划大量使用v8或chromium，我建议你把这个<code class="eh jp jq jr js b">export</code>放到你最喜欢的shell配置文件中。让我们看看这给我们带来了什么:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="65c2" class="kc kd hu js b fv ke kf l kg kh">$ ls depot_tools | wc<br/>165</span></pre><p id="d826" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">呀，真多。我们将使用的是:</p><ul class=""><li id="d1dd" class="lu lv hu it b iu iv iy iz jc lw jg lx jk ly jo lz ma mb mc dt translated">fetch:用于下载Chromium系列项目。</li><li id="6cb4" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">gclient:依赖管理器，类似于子模块包装/替换</li><li id="6656" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">忍者:建造系统，一个<code class="eh jp jq jr js b">make</code>选择</li><li id="c910" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">gn: makefile(确切地说，ninja文件)生成器</li></ul><p id="49dc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在让我们<a class="ae jt" href="https://github.com/v8/v8/wiki/Building-from-Source#getting-the-v8-source-tldr" rel="noopener ugc nofollow" target="_blank">获取v8源</a>:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="75c6" class="kc kd hu js b fv ke kf l kg kh">$ fetch v8<br/>Running: gclient root<br/>Running: gclient config --spec 'solutions = [<br/>  {<br/>    "url": "<a class="ae jt" href="https://chromium.googlesource.com/v8/v8.git" rel="noopener ugc nofollow" target="_blank">https://chromium.googlesource.com/v8/v8.git</a>",<br/>    "managed": False,<br/>    "name": "v8",<br/>    "deps_file": "DEPS",<br/>    "custom_deps": {},<br/>  },<br/>]<br/>'<br/>Running: gclient sync --with_branch_heads<br/>... take time to contemplate your existence ...</span><span id="59e6" class="kc kd hu js b fv ki kf l kg kh">... did you contemplate? maybe it'll go faster if you do ...</span><span id="e2d0" class="kc kd hu js b fv ki kf l kg kh">... maybe reconsider software dev. pick up the viola ...</span><span id="dd13" class="kc kd hu js b fv ki kf l kg kh">... the viola is a great instrument ...</span><span id="5219" class="kc kd hu js b fv ki kf l kg kh">... such a tender sound, and a greater amplitude than the violin ...</span><span id="737a" class="kc kd hu js b fv ki kf l kg kh">... hey remember that guy you saw at the gas station that one time who looked kinda weird and preoccupied? wonder what's up with him ...</span><span id="32f5" class="kc kd hu js b fv ki kf l kg kh">... maybe he's a viola player wondering what's up with violottas ...</span><span id="3ef3" class="kc kd hu js b fv ki kf l kg kh">... oh look it finished ...</span><span id="eb30" class="kc kd hu js b fv ki kf l kg kh">Running: git submodule foreach 'git config -f $toplevel/.git/config submodule.$name.ignore all'<br/>Running: git config --add remote.origin.fetch '+refs/tags/*:refs/tags/*'<br/>Running: git config diff.ignoreSubmodules all</span></pre><p id="2bf3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">维奥拉。现在让我们<a class="ae jt" href="https://www.youtube.com/watch?v=VCTOpdlZJ8U" rel="noopener ugc nofollow" target="_blank">跳一下构建工具舞</a>:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="ef54" class="kc kd hu js b fv ke kf l kg kh">$ gclient sync<br/>... maybe pmj are hiring...<br/>$ tools/dev/v8gen.py x64.release</span></pre><p id="3983" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下一步是汇编。在修改源代码之前，我们先做一个干净的构建:(给<code class="eh jp jq jr js b">make</code>爱好者的提示:你不需要通过<code class="eh jp jq jr js b">-j</code>，忍者很聪明)</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="388c" class="kc kd hu js b fv ke kf l kg kh">$ ninja -C out.gn/x64.release/<br/>ninja: Entering directory `out.gn/x64.release/'<br/>[88/1475] CXX obj/src/inspector/inspector/violas.o</span></pre><p id="069c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你在x86系统上，你应该重新考虑一些生活选择，把上面几个命令中的<code class="eh jp jq jr js b">x64.release</code>替换成<code class="eh jp jq jr js b">ia32.release</code>，即</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="d7da" class="kc kd hu js b fv ke kf l kg kh"># Note: only for x86 compilations<br/>$ tools/dev/v8gen.py ia32.release<br/>$ ninja -C out.gn/ia32.release/</span></pre><p id="8681" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们还可以看到可能的编译目标列表:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="bfb3" class="kc kd hu js b fv ke kf l kg kh">$ tools/dev/v8gen.py list<br/>arm.debug<br/>arm.optdebug<br/>arm.release<br/>arm64.debug<br/>arm64.optdebug<br/>arm64.release<br/>ia32.debug<br/>ia32.optdebug<br/>ia32.release<br/>mips64el.debug<br/>mips64el.optdebug<br/>mips64el.release<br/>...</span></pre><p id="0d58" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们正在编译以发布，因为我们不打算调试v8的本机代码。如果你喜欢冒险，想要调试符号，除了编译到一个<code class="eh jp jq jr js b">debug</code>目标，我建议将<code class="eh jp jq jr js b">is_component_build</code>标志传递给<code class="eh jp jq jr js b">gn</code>来加速每次重新编译。跳过<code class="eh jp jq jr js b">v8gen.py</code>步骤，然后<a class="ae jt" href="https://www.youtube.com/watch?v=4Cnm0tdkJEU" rel="noopener ugc nofollow" target="_blank">运行类似下面的</a>:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="5f17" class="kc kd hu js b fv ke kf l kg kh"># Note: This is for debug builds. I'll get on with the regular<br/># article after this!<br/>$ gn gen out.gn/awesome --args='is_debug=true target_cpu="x64" is_component_build=true'<br/>$ ninja -C out.gn/awesome/</span></pre><h2 id="032c" class="kc kd hu bd kl mu mv mw kp mx my mz kt jc na nb kx jg nc nd lb jk ne nf lf ng dt translated">它完成编译了！</h2><p id="e1b7" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">万岁！编译v8给了我们一些很酷的玩具，首先也是最重要的<code class="eh jp jq jr js b">d8</code>，一个基本的javascript repl:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="0205" class="kc kd hu js b fv ke kf l kg kh">$ out.gn/x64.release/<br/>V8 version 5.9.0 (candidate)<br/>d8&gt; 4 + 4<br/>8<br/>d8&gt;</span></pre><p id="f6e1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">性感。让我们应用我们的补丁(<a class="ae jt" href="https://gist.github.com/Zirak/f166cd9a724d855e05aa6a62f6f84d98" rel="noopener ugc nofollow" target="_blank"> bootsrapper.cc </a>，<a class="ae jt" href="https://gist.github.com/Zirak/562560509d15bc5d37e5962a888923f2" rel="noopener ugc nofollow" target="_blank"> heap-symbols.h </a>)。将它们下载到本地目录并<code class="eh jp jq jr js b">git apply</code>:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="b040" class="kc kd hu js b fv ke kf l kg kh">$ git apply heap-symbols.h.diff<br/>$ git apply bootstrapper.cc.diff</span></pre><p id="25fe" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">注意<code class="eh jp jq jr js b">apply</code>非常非常敏感，省略<code class="eh jp jq jr js b">diff</code>的某些部分可能会冒犯它，导致它哭着冲出房间。此外，我预计这些差异现在随时会打破，所以不要依赖它们:如果<code class="eh jp jq jr js b">apply</code>抛出一个合适的没关系，没有理由放弃，你可以手动进行这些编辑。</p><p id="202c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们重新编译一下，看看是什么情况:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="5bfd" class="kc kd hu js b fv ke kf l kg kh">$ ninja -C out.gn/x64.release/<br/>ninja: Entering directory `out.gn/x64.release/’<br/>[12/751] CXX obj/v8_base/life-regret-analysis.o</span></pre><p id="c177" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在编译的同时，我们来回顾一下中的<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/bootstrapper.cc?l=1174&amp;rcl=4e3e384275b567b0b518412e7c78cb25dd3f1782" rel="noopener ugc nofollow" target="_blank">和<code class="eh jp jq jr js b"><a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/bootstrapper.cc?l=1174&amp;rcl=4e3e384275b567b0b518412e7c78cb25dd3f1782" rel="noopener ugc nofollow" target="_blank">bootstrapper.cc</a></code>中的<code class="eh jp jq jr js b"><a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/bootstrapper.cc?l=1174&amp;rcl=4e3e384275b567b0b518412e7c78cb25dd3f1782" rel="noopener ugc nofollow" target="_blank">InitializeGlobal</a></code>和</a><a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/bootstrapper.cc?l=1174&amp;rcl=4e3e384275b567b0b518412e7c78cb25dd3f1782" rel="noopener ugc nofollow" target="_blank">。我发现这是一个很好的剧本，偶尔看看，了解新的或模糊的功能。比如你知道</a><a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/bootstrapper.cc?l=1539&amp;rcl=4e3e384275b567b0b518412e7c78cb25dd3f1782" rel="noopener ugc nofollow" target="_blank">关于</a>T2的事情吗？我当然没有！不过显然它是ES2015的一部分(<a class="ae jt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isSafeInteger" rel="noopener ugc nofollow" target="_blank"> mdn </a>，<a class="ae jt" href="https://tc39.github.io/ecma262/#sec-number.issafeinteger" rel="noopener ugc nofollow" target="_blank"> spec </a>)。大致浏览一下这个文件，还蛮有意思的。</p><p id="5e9a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">哦看，它完成编译了。让我们快速看一下…</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="9af4" class="kc kd hu js b fv ke kf l kg kh">$ out.gn/x64.release/d8<br/>V8 version 5.9.0 (candidate)<br/>d8&gt; Symbol.homeObject<br/>Symbol(Symbol.homeObject)</span></pre><p id="b6aa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">成功！是时候试试这个坏男孩了。记住，<code class="eh jp jq jr js b">super</code>应该是作为某种</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="cfd7" class="kc kd hu js b fv ke kf l kg kh">Object.getPrototypeOf(func.[[HomeObject]])</span></pre><p id="e7a1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以<code class="eh jp jq jr js b">HomeObject</code>应该是函数上的一个属性。</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="fd80" class="kc kd hu js b fv ke kf l kg kh">d8&gt; var o = { f() {} };<br/>d8&gt; o.f[Symbol.homeObject]<br/>undefined</span></pre><p id="06bc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">嗯，太奇怪了。让我们多玩一会儿，也许我们错过了什么？让我们再试一次。退出d8，并使用作弊代码再次运行:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="2b7c" class="kc kd hu js b fv ke kf l kg kh">$ out.gn/x64.release/d8 --allow-natives-syntax <br/>V8 version 5.9.0 (candidate)<br/>d8&gt; %HomeObjectSymbol() === Symbol.homeObject // sanity<br/>true<br/>d8&gt; var o = { f() {} }; <br/>undefined <br/>d8&gt; o.f[%HomeObjectSymbol()] <br/>undefined</span></pre><p id="d5da" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">看来我们有更深层次的问题。我们的<code class="eh jp jq jr js b">Symbol.homeObject</code>补丁可以用，但是似乎<code class="eh jp jq jr js b">o.f</code>没有<code class="eh jp jq jr js b">HomeObject</code>！花几分钟时间看看你是否能找到原因。</p><p id="ab2c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我会等的。</p><p id="4340" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt">(｡◕‿‿◕｡)</p><p id="2367" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt">༼ʘ̚ل͜ʘ̚༽</p><p id="816f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以！什么会出错？我一开始写了几行<em class="kj">需要</em>使用<code class="eh jp jq jr js b">HomeObject</code>的内容:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="c5a8" class="kc kd hu js b fv ke kf l kg kh">d8&gt; var parent = { x: 4 };<br/>d8&gt; var child = { __proto__: parent, whatsX() { return super.x; } };<br/>d8&gt; child.whatsX[Symbol.homeObject]<br/>{whatsX: whatsX() { return super.x; }}</span></pre><p id="b67d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这很有效，所以区别似乎源于使用<code class="eh jp jq jr js b">super</code>。哦，等等，还记得我们第一次搜索<code class="eh jp jq jr js b">HomeObject</code>吗？</p><figure class="ju jv jw jx fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="fe ff lm"><img src="../Images/ca917e801e91087b80de9622997f2320.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v46vQMPIfZmUCyYs9Lk5uQ.png"/></div></div></figure><p id="8c95" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">看到那个<code class="eh jp jq jr js b">NeedsHomeObject</code>方法了吗？听起来现在很重要！让我们<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/full-codegen/full-codegen.h?l=493&amp;rcl=bac1574dc0e70844dac5fd210df041061b2b430b" rel="noopener ugc nofollow" target="_blank">来看看</a>:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="af42" class="kc kd hu js b fv ke kf l kg kh">static <a class="ae jt" href="https://cs.chromium.org/chromium/usr/lib/clang/google3-trunk/include/stdbool.h?l=37&amp;ct=xref_jump_to_def&amp;gsn=bool" rel="noopener ugc nofollow" target="_blank">bool</a> <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/full-codegen/full-codegen.h?l=493&amp;gs=cpp%253Av8%253A%253Ainternal%253A%253Aclass-FullCodeGenerator%253A%253ANeedsHomeObject(v8%253A%253Ainternal%253A%253AExpression%2B*)%2540chromium%252F..%252F..%252Fv8%252Fsrc%252Ffull-codegen%252Ffull-codegen.h%257Cdef&amp;gsn=NeedsHomeObject&amp;ct=xref_usages" rel="noopener ugc nofollow" target="_blank">Needs<strong class="js hv">HomeObject</strong></a>(<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.h?l=289&amp;ct=xref_jump_to_def&amp;gsn=Expression" rel="noopener ugc nofollow" target="_blank">Expression</a><a class="ae jt" href="https://cs.chromium.org/chromium/src/out/Debug/GENERATED/figments/cpp/PointerTo/start-with-v8/v8/internal/class-Expression.cc?l=3&amp;ct=xref_jump_to_def&amp;gsn=*" rel="noopener ugc nofollow" target="_blank">*</a> <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/full-codegen/full-codegen.h?l=493&amp;gs=cpp%253Av8%253A%253Ainternal%253A%253Aclass-FullCodeGenerator%253A%253ANeedsHomeObject(v8%253A%253Ainternal%253A%253AExpression%2B*)%253A%253Aparam-expr%2540chromium%252F..%252F..%252Fv8%252Fsrc%252Ffull-codegen%252Ffull-codegen.h%257Cdef&amp;gsn=expr&amp;ct=xref_usages" rel="noopener ugc nofollow" target="_blank">expr</a>) {<br/>    return <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.h?l=2549&amp;ct=xref_jump_to_def&amp;gsn=FunctionLiteral" rel="noopener ugc nofollow" target="_blank">FunctionLiteral</a>::<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.cc?l=347&amp;ct=xref_jump_to_def&amp;gsn=NeedsHomeObject" rel="noopener ugc nofollow" target="_blank">Needs<strong class="js hv">HomeObject</strong></a>(<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/full-codegen/full-codegen.h?l=493&amp;ct=xref_jump_to_def&amp;gsn=expr" rel="noopener ugc nofollow" target="_blank">expr</a>);<br/>}</span></pre><p id="739c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">嗯，间接……点击<code class="eh jp jq jr js b">NeedsHomeObject</code>,出于某种原因，它将<em class="kj">几乎</em>带到<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.cc?l=355&amp;rcl=f8189977d2cf40ce3c0b1e1d10f0717c2e2a3e7a" rel="noopener ugc nofollow" target="_blank">正确的位置</a>:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="57cc" class="kc kd hu js b fv ke kf l kg kh"><a class="ae jt" href="https://cs.chromium.org/chromium/usr/lib/clang/google3-trunk/include/stdbool.h?l=37&amp;ct=xref_jump_to_def&amp;gsn=bool" rel="noopener ugc nofollow" target="_blank">bool</a> <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.h?l=2549&amp;ct=xref_jump_to_def&amp;gsn=FunctionLiteral" rel="noopener ugc nofollow" target="_blank">FunctionLiteral</a>::<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.cc?l=352&amp;gs=cpp%253Av8%253A%253Ainternal%253A%253Aclass-FunctionLiteral%253A%253ANeedsHomeObject(v8%253A%253Ainternal%253A%253AExpression%2B*)%2540chromium%252F..%252F..%252Fv8%252Fsrc%252Fast%252Fast.cc%257Cdef&amp;gsn=NeedsHomeObject&amp;ct=xref_usages" rel="noopener ugc nofollow" target="_blank">NeedsHomeObject</a>(<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.h?l=289&amp;ct=xref_jump_to_def&amp;gsn=Expression" rel="noopener ugc nofollow" target="_blank">Expression</a><a class="ae jt" href="https://cs.chromium.org/chromium/src/out/Debug/GENERATED/figments/cpp/PointerTo/start-with-v8/v8/internal/class-Expression.cc?l=3&amp;ct=xref_jump_to_def&amp;gsn=*" rel="noopener ugc nofollow" target="_blank">*</a> <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.cc?l=352&amp;gs=cpp%253Av8%253A%253Ainternal%253A%253Aclass-FunctionLiteral%253A%253ANeedsHomeObject(v8%253A%253Ainternal%253A%253AExpression%2B*)%253A%253Aparam-expr%2540chromium%252F..%252F..%252Fv8%252Fsrc%252Fast%252Fast.cc%257Cdef&amp;gsn=expr&amp;ct=xref_usages" rel="noopener ugc nofollow" target="_blank">expr</a>) {<br/>  if (<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.cc?l=347&amp;ct=xref_jump_to_def&amp;gsn=expr" rel="noopener ugc nofollow" target="_blank">expr</a> == nullptr || !<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.cc?l=347&amp;ct=xref_jump_to_def&amp;gsn=expr" rel="noopener ugc nofollow" target="_blank">expr</a>-&gt;<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.h?l=3639&amp;ct=xref_jump_to_def&amp;gsn=IsFunctionLiteral" rel="noopener ugc nofollow" target="_blank">IsFunctionLiteral</a>()) return <a class="ae jt" href="https://cs.chromium.org/chromium/usr/lib/clang/google3-trunk/include/stdbool.h?l=38&amp;ct=xref_jump_to_def&amp;gsn=false" rel="noopener ugc nofollow" target="_blank">false</a>;<br/>  <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/base/logging.h?l=225&amp;ct=xref_jump_to_def&amp;gsn=DCHECK_NOT_NULL" rel="noopener ugc nofollow" target="_blank">DCHECK_NOT_NULL</a>(<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.cc?l=347&amp;ct=xref_jump_to_def&amp;gsn=expr" rel="noopener ugc nofollow" target="_blank">expr</a>-&gt;<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.h?l=3639&amp;ct=xref_jump_to_def&amp;gsn=AsFunctionLiteral" rel="noopener ugc nofollow" target="_blank">AsFunctionLiteral</a>()-&gt;<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.h?l=2567&amp;ct=xref_jump_to_def&amp;gsn=scope" rel="noopener ugc nofollow" target="_blank">scope</a>());<br/>  return <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.cc?l=347&amp;ct=xref_jump_to_def&amp;gsn=expr" rel="noopener ugc nofollow" target="_blank">expr</a>-&gt;<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.h?l=3639&amp;ct=xref_jump_to_def&amp;gsn=AsFunctionLiteral" rel="noopener ugc nofollow" target="_blank">AsFunctionLiteral</a>()-&gt;<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/ast.h?l=2567&amp;ct=xref_jump_to_def&amp;gsn=scope" rel="noopener ugc nofollow" target="_blank">scope</a>()-&gt;<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/scopes.h?l=643&amp;ct=xref_jump_to_def&amp;gsn=NeedsHomeObject" rel="noopener ugc nofollow" target="_blank">NeedsHomeObject</a>();<br/>}</span></pre><p id="9838" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">好了，<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/scopes.h?l=643&amp;rcl=f8189977d2cf40ce3c0b1e1d10f0717c2e2a3e7a" rel="noopener ugc nofollow" target="_blank">再点击</a><code class="eh jp jq jr js b"><a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/scopes.h?l=643&amp;rcl=f8189977d2cf40ce3c0b1e1d10f0717c2e2a3e7a" rel="noopener ugc nofollow" target="_blank">NeedsHomeObject</a></code><a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/scopes.h?l=643&amp;rcl=f8189977d2cf40ce3c0b1e1d10f0717c2e2a3e7a" rel="noopener ugc nofollow" target="_blank"/>:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="f841" class="kc kd hu js b fv ke kf l kg kh">// src/scopes.h<a class="ae jt" href="https://cs.chromium.org/chromium/usr/lib/clang/google3-trunk/include/stdbool.h?l=37&amp;ct=xref_jump_to_def&amp;gsn=bool" rel="noopener ugc nofollow" target="_blank"><br/>bool</a> <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/scopes.h?l=643&amp;gs=cpp%253Av8%253A%253Ainternal%253A%253Aclass-DeclarationScope%253A%253ANeedsHomeObject()-const%2540chromium%252F..%252F..%252Fv8%252Fsrc%252Fast%252Fscopes.h%257Cdef&amp;gsn=NeedsHomeObject&amp;ct=xref_usages" rel="noopener ugc nofollow" target="_blank">NeedsHomeObject</a>() const {<br/>    return <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/scopes.h?l=882&amp;ct=xref_jump_to_def&amp;gsn=scope_uses_super_property_" rel="noopener ugc nofollow" target="_blank">scope_uses_super_property_</a> ||<br/>           (<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/scopes.h?l=553&amp;ct=xref_jump_to_def&amp;gsn=inner_scope_calls_eval_" rel="noopener ugc nofollow" target="_blank">inner_scope_calls_eval_</a> &amp;&amp; (<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/globals.h?l=1151&amp;ct=xref_jump_to_def&amp;gsn=IsConciseMethod" rel="noopener ugc nofollow" target="_blank">IsConciseMethod</a>(<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/scopes.h?l=632&amp;ct=xref_jump_to_def&amp;gsn=function_kind" rel="noopener ugc nofollow" target="_blank">function_kind</a>()) ||<br/>                                        <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/globals.h?l=1166&amp;ct=xref_jump_to_def&amp;gsn=IsAccessorFunction" rel="noopener ugc nofollow" target="_blank">IsAccessorFunction</a>(<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/scopes.h?l=632&amp;ct=xref_jump_to_def&amp;gsn=function_kind" rel="noopener ugc nofollow" target="_blank">function_kind</a>()) ||<br/>                                        <a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/globals.h?l=1189&amp;ct=xref_jump_to_def&amp;gsn=IsClassConstructor" rel="noopener ugc nofollow" target="_blank">IsClassConstructor</a>(<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/ast/scopes.h?l=632&amp;ct=xref_jump_to_def&amp;gsn=function_kind" rel="noopener ugc nofollow" target="_blank">function_kind</a>())));<br/>}</span></pre><p id="37bf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">头奖！介质可能会弄乱一些缩进，但这看起来很有希望。v8是一个喜欢优化的生物，只想把<code class="eh jp jq jr js b">HomeObject</code>放在需要它的函数上。卑鄙的动物。</p><p id="9a08" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一个有趣的话题是发现<code class="eh jp jq jr js b">NeedsHomeObject</code>在哪里被使用，以及它如何影响函数，我就不赘述了。如果你想走那条路，我个人建议你去<a class="ae jt" href="https://cs.chromium.org/chromium/src/v8/src/full-codegen/full-codegen.h?l=493&amp;rcl=f8189977d2cf40ce3c0b1e1d10f0717c2e2a3e7a" rel="noopener ugc nofollow" target="_blank">原来的调用点</a>点击方法名。这将显示该方法的外部参照(交叉参照)列表:</p><figure class="ju jv jw jx fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="fe ff nh"><img src="../Images/cf5426f93182d4e1ad4cc5e2940ba7a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vFudkuByTf7mdmuIUyOPrg.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">ooohhh, fancy</figcaption></figure><p id="a31a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">(关于chromium的源代码浏览器有一点需要注意(除了它有多棒之外),那就是它通过索引一个编译目标来工作，我怀疑是x64 linux。这意味着有些事情可能无法正常工作，比如检查Windows专用函数的外部引用，或者在这种情况下，检查非x64架构(如mips)的codegen的外部引用。我们现在不必在意，只要记住一件事。)</p><p id="888a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于所有重视他们的理智并如此渴望继续这一危险旅程的人，继续钻研吧！</p><h2 id="9f3e" class="kc kd hu bd kl mu mv mw kp mx my mz kt jc na nb kx jg nc nd lb jk ne nf lf ng dt translated">修补需要对象</h2><p id="7e03" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">这是一个简单的区别，真的:</p><figure class="ju jv jw jx fq ln"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="8cfd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">本地保存并进行修补/重新编译:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="0516" class="kc kd hu js b fv ke kf l kg kh">$ git apply scopes.h.diff<br/>$ ninja -C out.gn/x64.release/<br/>ninja: Entering directory `out.gn/x64.release/'<br/>[175/175] STAMP obj/going.postal.aarrgghhh<br/>$ out.gn/x64.release/d8<br/>V8 version 5.9.0 (candidate)<br/>d8&gt; var o = { f() {} };<br/>undefined<br/>d8&gt; o.f[Symbol.homeObject]<br/>{f: f() {}}<br/>d8&gt;</span></pre><p id="b15a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt">̿̿ ̿̿ ̿̿ ̿’̿’\̵͇̿̿\з= ( ▀ ͜͞ʖ▀) =ε/̵͇̿̿/’̿’̿ ̿ ̿̿ ̿̿ ̿̿</p><h1 id="bdeb" class="kk kd hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">跳舞</h1><p id="664c" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">我们今天学了什么？</p><ul class=""><li id="db11" class="lu lv hu it b iu iv iy iz jc lw jg lx jk ly jo lz ma mb mc dt translated">Chromium的全部源代码都有索引，可以通过<a class="ae jt" href="https://cs.chromium.org/" rel="noopener ugc nofollow" target="_blank">https://cs.chromium.org/</a>轻松访问</li><li id="e095" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">我们可以通过猜测和谷歌搜索来理解代码的特定部分是如何工作的，而不需要确切知道<em class="kj">如何</em>或<em class="kj">为什么</em>它们是如何工作的</li><li id="6bbb" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">此外，我们可以使用源代码中的知识来修改现有的部分</li><li id="4911" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">测试是一个惊人的知识宝库</li><li id="f899" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">编译v8没那么糟糕</li><li id="1298" class="lu lv hu it b iu md iy me jc mf jg mg jk mh jo lz ma mb mc dt translated">ASCII脸很有趣</li></ul><p id="8a7a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，完成<code class="eh jp jq jr js b">git diff</code>:</p><figure class="ju jv jw jx fq ln"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="2fea" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们有一个暴露的<code class="eh jp jq jr js b">homeObject</code>。我称之为胜利。</p><div class="ju jv jw jx fq ab cb"><figure class="ni ln nj nk nl nm nn paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="ni ln nj nk nl nm nn paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="ni ln nj nk nl nm nn paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="no np nq"><p id="f922" class="ir is kj it b iu iv iw ix iy iz ja jb nr jd je jf ns jh ji jj nt jl jm jn jo hn dt translated"><a class="ae jt" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jt" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jt" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jt" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is kj it b iu iv iw ix iy iz ja jb nr jd je jf ns jh ji jj nt jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jt" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jt" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ju jv jw jx fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="fe ff nu"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>