<html>
<head>
<title>How to display existing files on server using DropzoneJS and Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用DropzoneJS和Go显示服务器上的现有文件</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-display-existing-files-on-server-using-dropzonejs-and-go-53e24b57ba19?source=collection_archive---------6-----------------------#2017-10-04">https://medium.com/hackernoon/how-to-display-existing-files-on-server-using-dropzonejs-and-go-53e24b57ba19?source=collection_archive---------6-----------------------#2017-10-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/763203385ea25cbd2d0a3dfe0e4d3cd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ak1e9MjESSPcbsjtelnYcA.png"/></div></div></figure><p id="e490" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是DropzoneJS + Go系列的第2部分。</p><ul class=""><li id="36f6" class="ka kb hu je b jf jg jj jk jn kc jr kd jv ke jz kf kg kh ki dt translated"><a class="ae kj" rel="noopener" href="/@kataras/how-to-build-a-file-upload-form-using-dropzonejs-and-go-8fb9f258a991">第1部分:如何构建文件上传表单</a></li><li id="3788" class="ka kb hu je b jf kk jj kl jn km jr kn jv ko jz kf kg kh ki dt translated"><a class="ae kj" rel="noopener" href="/@kataras/how-to-display-existing-files-on-server-using-dropzonejs-and-go-53e24b57ba19">第二部分:如何显示服务器上的现有文件</a></li></ul><h1 id="acd1" class="kp kq hu bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">DropzoneJS + Go:如何显示服务器上的现有文件</h1><p id="5aca" class="pw-post-body-paragraph jc jd hu je b jf ln jh ji jj lo jl jm jn lp jp jq jr lq jt ju jv lr jx jy jz hn dt translated">在本教程中，我们将向您展示如何在使用DropzoneJS和Go时显示服务器上的现有文件。本教程基于<a class="ae kj" rel="noopener" href="/@kataras/how-to-build-a-file-upload-form-using-dropzonejs-and-go-8fb9f258a991">如何使用DropzoneJS和Go </a>构建文件上传表单。在继续学习本教程的内容之前，请确保您已经阅读了它。</p><h1 id="254f" class="kp kq hu bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">目录</h1><ul class=""><li id="c1c0" class="ka kb hu je b jf ln jj lo jn ls jr lt jv lu jz kf kg kh ki dt translated">准备</li><li id="9d84" class="ka kb hu je b jf kk jj kl jn km jr kn jv ko jz kf kg kh ki dt translated">修改服务器端</li><li id="f46e" class="ka kb hu je b jf kk jj kl jn km jr kn jv ko jz kf kg kh ki dt translated">修改客户端</li><li id="635d" class="ka kb hu je b jf kk jj kl jn km jr kn jv ko jz kf kg kh ki dt translated">参考</li><li id="d969" class="ka kb hu je b jf kk jj kl jn km jr kn jv ko jz kf kg kh ki dt translated">结束了</li></ul><h1 id="d24e" class="kp kq hu bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">准备</h1><p id="e0a6" class="pw-post-body-paragraph jc jd hu je b jf ln jh ji jj lo jl jm jn lp jp jq jr lq jt ju jv lr jx jy jz hn dt translated">用<code class="eh lv lw lx ly b">go get github.com/nfnt/resize</code>安装go包“github.com/nfnt/resize”，我们需要它来创建缩略图。</p><p id="3699" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在之前的<a class="ae kj" href="https://dev.to/kataras/README.md" rel="noopener ugc nofollow" target="_blank">教程</a>中。我们已经设置了一个适当的工作DropzoneJs上传表单。本教程不需要额外的文件。我们需要做的是对下面的文件做一些修改:</p><ol class=""><li id="6722" class="ka kb hu je b jf jg jj jk jn kc jr kd jv ke jz lz kg kh ki dt translated">main.go</li><li id="de5d" class="ka kb hu je b jf kk jj kl jn km jr kn jv ko jz lz kg kh ki dt translated">view/upload . html</li></ol><p id="601b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们开始吧！</p><h1 id="bf0f" class="kp kq hu bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">修改服务器端</h1><p id="0598" class="pw-post-body-paragraph jc jd hu je b jf ln jh ji jj lo jl jm jn lp jp jq jr lq jt ju jv lr jx jy jz hn dt translated">在之前的教程中。所有“/upload”所做的就是将上传的文件存储到服务器目录中。/public/uploads”。因此，我们需要添加一段代码来检索存储文件的信息(名称和大小)，并以JSON格式返回。</p><p id="baa2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">将下面的内容复制到“main.go”。详情请看评论。</p><figure class="ma mb mc md fq iv"><div class="bz el l di"><div class="me mf l"/></div></figure><h1 id="63b6" class="kp kq hu bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">修改客户端</h1><p id="8da8" class="pw-post-body-paragraph jc jd hu je b jf ln jh ji jj lo jl jm jn lp jp jq jr lq jt ju jv lr jx jy jz hn dt translated">将下面的内容复制到”。/views/upload.html "。我们将逐个进行修改。</p><figure class="ma mb mc md fq iv"><div class="bz el l di"><div class="me mf l"/></div></figure><ol class=""><li id="c97a" class="ka kb hu je b jf jg jj jk jn kc jr kd jv ke jz lz kg kh ki dt translated">我们在页面中添加了Jquery库。这其实不是直接针对DropzoneJs的。我们使用的是Jquery的ajax函数<strong class="je hv"> $。仅获取</strong>。您将在下面看到</li><li id="45fa" class="ka kb hu je b jf kk jj kl jn km jr kn jv ko jz lz kg kh ki dt translated">我们在表单中添加了一个ID元素(my-dropzone)。这是必需的，因为我们需要将配置值传递给Dropzone。要做到这一点，我们必须有它的ID引用。这样我们就可以通过给Dropzone.options.myDropzone赋值来配置它了，很多人在配置Dropzone的时候都会面临困惑。简单地说。不要把Dropzone当成Jquery插件，它有自己的语法，你需要遵循它。</li><li id="9bfe" class="ka kb hu je b jf kk jj kl jn km jr kn jv ko jz lz kg kh ki dt translated">这开始了修改的主要部分。我们在这里做的是传递一个函数来监听Dropzone的init事件。初始化Dropzone时调用此事件。</li><li id="d865" class="ka kb hu je b jf kk jj kl jn km jr kn jv ko jz lz kg kh ki dt translated">通过ajax从新的“/uploads”中检索文件细节。</li><li id="9d67" class="ka kb hu je b jf kk jj kl jn km jr kn jv ko jz lz kg kh ki dt translated">使用服务器中的值创建模拟文件。mockFile只是具有名称和大小属性的JavaScript对象。然后我们显式调用Dropzone的<strong class="je hv"> addedfile </strong>和<strong class="je hv"> thumbnail </strong>函数，将现有文件放入Dropzone上传区并生成其缩略图。</li></ol><h1 id="acd7" class="kp kq hu bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">运行服务器</h1><p id="e15a" class="pw-post-body-paragraph jc jd hu je b jf ln jh ji jj lo jl jm jn lp jp jq jr lq jt ju jv lr jx jy jz hn dt translated">在当前项目的目录下打开终端并执行:</p><pre class="ma mb mc md fq mg ly mh mi aw mj dt"><span id="68e5" class="mk kq hu ly b fv ml mm l mn mo">$ go run main.go<br/>Now listening on: http://localhost:8080<br/>Application started. Press CTRL+C to shut down.</span></pre><p id="cdff" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你成功地做到了。现在去上传一些图片，并重新加载上传页面。已经上传的文件应该自动显示在拖放区。</p><figure class="ma mb mc md fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mp"><img src="../Images/8fa4db0053c48c2757cc9ebcb62e0979.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QquVRfOw3CMqlq20mGcZ_Q.png"/></div></div></figure><h1 id="5e79" class="kp kq hu bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">参考</h1><ul class=""><li id="bd3e" class="ka kb hu je b jf ln jj lo jn ls jr lt jv lu jz kf kg kh ki dt translated">【http://www.dropzonejs.com/#server-side-implementation T4】</li><li id="daad" class="ka kb hu je b jf kk jj kl jn km jr kn jv ko jz kf kg kh ki dt translated"><a class="ae kj" href="https://www.startutorial.com/articles/view/how-to-build-a-file-upload-form-using-dropzonejs-and-php" rel="noopener ugc nofollow" target="_blank">https://www . startutorial . com/articles/view/how-to-build-a-file-upload-form-using-drop zone js-and-PHP</a></li><li id="ddc7" class="ka kb hu je b jf kk jj kl jn km jr kn jv ko jz kf kg kh ki dt translated"><a class="ae kj" href="https://docs.iris-go.com" rel="noopener ugc nofollow" target="_blank">https://docs.iris-go.com</a></li><li id="61a2" class="ka kb hu je b jf kk jj kl jn km jr kn jv ko jz kf kg kh ki dt translated"><a class="ae kj" href="https://github.com/kataras/iris/tree/master/_examples/tutorial/dropzonejs" rel="noopener ugc nofollow" target="_blank">https://github . com/kataras/iris/tree/master/_ examples/tutorial/drop zone js</a></li></ul><h1 id="f0d0" class="kp kq hu bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">结束了</h1><p id="43ab" class="pw-post-body-paragraph jc jd hu je b jf ln jh ji jj lo jl jm jn lp jp jq jr lq jt ju jv lr jx jy jz hn dt translated">希望这个简单的教程对你的开发有所帮助。<br/>如果你喜欢我的帖子，请在<a class="ae kj" href="https://twitter.com/makismaropoulos" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我，帮助传播消息。我需要你的支持才能继续。</p><div class="mq mr fm fo ms mt"><a href="https://twitter.com/makismaropoulos" rel="noopener  ugc nofollow" target="_blank"><div class="mu ab ej"><div class="mv ab mw cl cj mx"><h2 class="bd hv fv z el my eo ep mz er et ht dt translated">Gera simos Maropoulos(@ MakisMaropoulos)|推特</h2><div class="na l"><h3 class="bd b fv z el my eo ep mz er et ek translated">Gerasimos Maropoulos的最新推文(@MakisMaropoulos)。那个叫#golang的家伙。自学10多年的开发人员…</h3></div><div class="nb l"><p class="bd b gc z el my eo ep mz er et ek translated">twitter.com</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh ja mt"/></div></div></a></div></div><div class="ab cl ni nj hc nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="hn ho hp hq hr"><p id="7050" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我喜欢我不止一次点击鼓掌按钮时的视觉效果，你呢？很简单:只要点击拍手按钮。如果感觉强烈，再点一下<strong class="je hv">(或者直接按住</strong> <strong class="je hv">)。</strong></p><figure class="ma mb mc md fq iv fe ff paragraph-image"><div class="fe ff np"><img src="../Images/e7bd15bcb40212893d2e7daf3f20813b.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/1*A6fw1R0_Eb7rbfP7sJckmQ.gif"/></div></figure></div></div>    
</body>
</html>