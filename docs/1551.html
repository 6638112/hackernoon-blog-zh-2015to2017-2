<html>
<head>
<title>Node.js Tip - Minimal Babel with Node v6</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node.js提示-带有节点v6的最小巴别塔</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/node-js-tip-minimal-babel-with-node-v6-e6f5abd8f04e?source=collection_archive---------3-----------------------#2016-11-14">https://medium.com/hackernoon/node-js-tip-minimal-babel-with-node-v6-e6f5abd8f04e?source=collection_archive---------3-----------------------#2016-11-14</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/7de24ac30cb4d6fc368f3496c6f867b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EO8TUwHcFJ-XIvqbMhwyNw.jpeg"/></div></div></figure><p id="d461" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">TL；DR </strong>如果你碰巧使用的是<a class="ae ka" href="https://hackernoon.com/node-js-v6-transitions-to-lts-be7f18c17159#.hwnsy6yuh" rel="noopener ugc nofollow" target="_blank">节点v6 LTS </a>你应该考虑用<a class="ae ka" href="https://github.com/Salakar/babel-preset-node6" rel="noopener ugc nofollow" target="_blank"> babel-preset-node6 </a>替换babel-preset-es2015，以最大限度地减少<em class="kb"> transpiler </em>的工作量并更多地使用节点v6对ES6/ES2015的原生支持。</p><h1 id="1194" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">ES 2015和巴别塔</h1><p id="a9e7" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">众所周知，JS社区认为<a class="ae ka" href="http://www.ecma-international.org/ecma-262/6.0/" rel="noopener ugc nofollow" target="_blank"> ES2015 </a>是该语言自创建以来得到的最广泛的更新。它带来了人们期待已久的特性，比如作用于运行执行上下文的<a class="ae ka" href="http://www.ecma-international.org/ecma-262/6.0/#sec-let-and-const-declarations" rel="noopener ugc nofollow" target="_blank">变量、</a><a class="ae ka" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters" rel="noopener ugc nofollow" target="_blank">默认参数</a>和<a class="ae ka" href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects" rel="noopener ugc nofollow" target="_blank">承诺</a>等等。</p><p id="4892" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae ka" href="https://babeljs.io/" rel="noopener ugc nofollow" target="_blank"> Babel </a>使开发者能够在浏览器和<a class="ae ka" href="https://hackernoon.com/tagged/nodejs" rel="noopener ugc nofollow" target="_blank"> Node.js </a>中使用所有很酷的ES2015更新，就好像规范已经得到100%的支持一样。大致来说，他们是通过使用<a class="ae ka" href="http://babeljs.io/docs/plugins/" rel="noopener ugc nofollow" target="_blank">预置</a>将新<a class="ae ka" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>转换成旧JavaScript来实现的。</p><h1 id="1bba" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">节点v6 LTS</h1><p id="f76e" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">随着一年左右的时间过去，Node.js更新逐渐增加了对ES2015功能的原生支持，Node v6 LTS最近发布，它支持ES2015的97%，正如你在这里看到的<a class="ae ka" href="http://node.green/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="d79f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">不幸的是，ES2015 <a class="ae ka" href="http://www.ecma-international.org/ecma-262/6.0/#sec-imports" rel="noopener ugc nofollow" target="_blank">导入</a>和<a class="ae ka" href="http://www.ecma-international.org/ecma-262/6.0/#sec-exports" rel="noopener ugc nofollow" target="_blank">导出</a>模块语法属于节点v6遗漏的特性。</p><p id="c0c7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">因此，如果你想在Node v6中编写100%符合ES2015的代码，你仍然需要Babel。你不需要的是让Babel将你的代码转换成旧的ES5，因此<a class="ae ka" href="https://github.com/Salakar/babel-preset-node6" rel="noopener ugc nofollow" target="_blank"> babel-preset-node6 </a>。</p><h2 id="aea6" class="lf kd hu bd ke lg lh li ki lj lk ll km jn lm ln kq jr lo lp ku jv lq lr ky ls dt translated"><strong class="ak">预设-es2015 vs </strong>预设-节点6 <strong class="ak">对比</strong></h2><p id="4f97" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">下面是使用这两种不同预设的变换结果的简单比较。</p><p id="a327" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">作为基线，使用ES2015的一些功能给出了基本的<a class="ae ka" href="https://github.com/expressjs/express" rel="noopener ugc nofollow" target="_blank"> express </a>路线定义:</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="a92b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">使用巴别塔官方预设-es2015时，产生的代码将是:</p><pre class="lt lu lv lw fq lz ma mb mc aw md dt"><span id="61b6" class="lf kd hu ma b fv me mf l mg mh">//.babelrc<br/>{<br/> “presets”: [“es2015”]<br/>}</span></pre><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="0c30" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">正如你所看到的，预置将代码转换成了旧的ES5，而没有利用Node v6的任何原生支持。</p><p id="65a1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当使用非官方的babel-preset-node6时，产生的代码将是:</p><pre class="lt lu lv lw fq lz ma mb mc aw md dt"><span id="66a9" class="lf kd hu ma b fv me mf l mg mh">// .babelrc<br/>{<br/> “presets”: [“node6”]<br/>}</span></pre><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="1166" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这次生成的代码利用了Node v6本身支持的特性。只有节点v6不支持的部分像模块导入和导出一样被转换。</p><p id="72c3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个小样本可能看起来不够有意义，但在真正的生产规模的应用程序中，使用V8比围绕它工作更好。用插件创建者"<em class="kb">的话说，最终结果几乎总是更快的构建和脚本执行时间</em> " <a class="ae ka" href="https://github.com/leebenson" rel="noopener ugc nofollow" target="_blank">李·本森</a>。</p><p id="097f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">结论</strong></p><p id="448d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Babel是一个令人惊叹的工具，它允许我们立即利用语言中的更新，但检查您实际需要的预置部分是有益的，您可能会避免不必要的构建时间，并利用Node.js原生实现的更多优势。</p><p id="ba55" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">就我个人而言，在我的应用程序中，我将努力在我真正想要使用的新JavaScript特性和保持运行的最小巴别塔预设量之间取得平衡，因此有了最小巴别塔名称。</p><div class="lt lu lv lw fq ab cb"><figure class="mi iv mj mk ml mm mn paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mi iv mj mk ml mm mn paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mi iv mj mk ml mm mn paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mo mp mq"><p id="f922" class="jc jd kb je b jf jg jh ji jj jk jl jm mr jo jp jq ms js jt ju mt jw jx jy jz hn dt translated"><a class="ae ka" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是阿妹家庭的一员。我们现在<a class="ae ka" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ka" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>的机会。</p><p id="708a" class="jc jd kb je b jf jg jh ji jj jk jl jm mr jo jp jq ms js jt ju mt jw jx jy jz hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ka" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ka" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="lt lu lv lw fq iv fe ff paragraph-image"><a href="https://goo.gl/Ahtev1"><div class="fe ff mu"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></a></figure><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="mv ly l"/></div></figure></div></div>    
</body>
</html>