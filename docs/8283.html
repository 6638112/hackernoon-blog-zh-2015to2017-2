<html>
<head>
<title>A Tutorial to Bundle Cockpit CMS &amp; Nuxt.js in a full JAMstack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在完整的JAMstack中捆绑Cockpit CMS &amp; Nuxt.js的教程</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/in-depth-cockpit-cms-tutorial-with-a-nuxt-js-app-live-demo-4809e7cd1218?source=collection_archive---------14-----------------------#2017-11-27">https://medium.com/hackernoon/in-depth-cockpit-cms-tutorial-with-a-nuxt-js-app-live-demo-4809e7cd1218?source=collection_archive---------14-----------------------#2017-11-27</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/090cba11430a756dd49d8075fc480cf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JO771nBqs7oR5vNusHVKzQ.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Photo by <a class="ae jg" href="https://unsplash.com/photos/4pHcmcPsP8A?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Austin Neill</a> on <a class="ae jg" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7d08" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">三年前，我们掉进了兔子洞。</p><p id="8392" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们进入了一个奇怪的网络开发的前沿。</p><p id="c3d5" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">关于“静态”和“无服务器”网站、专用API和新兴前端奇迹的讨论非常普遍。JavaScript无处不在。开发者们兴奋地再次建设网站。我们已经进入了<a class="ae jg" href="https://jamstack.org/" rel="noopener ugc nofollow" target="_blank"> JAMstack </a>宇宙。</p><p id="1b63" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在我们的博客上，我们已经讨论了无数的<a class="ae jg" href="https://snipcart.com/blog/netlify-cms-react-git-workflow" rel="noopener ugc nofollow" target="_blank">无头</a>T4】CMS来存储内容和JS框架来呈现内容。</p><p id="225f" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">今天我们继续探索:1) <strong class="jj hv"> Cockpit CMS </strong>，一个朋友推荐的API优先的CMS，2) <strong class="jj hv"> Nuxt.js </strong>，一个kickass Vue.js框架(从爱上Vue 开始我们就想用它<a class="ae jg" href="https://medium.freecodecamp.org/vue-js-tutorial-a-prerendered-seo-friendly-example-live-demo-771e974e909c" rel="noopener ugc nofollow" target="_blank">)。</a></p><p id="c53b" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们将涵盖:</p><ul class=""><li id="3887" class="kf kg hu jj b jk jl jo jp js kh jw ki ka kj ke kk kl km kn dt translated">如何设置驾驶舱CMS安装&amp;用Snipcart插入它。</li><li id="733c" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">如何使用Nuxt.js静态生成来渲染我们app的前端？</li></ul><p id="cc8e" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">结果呢？一个完整的JAMstack应用程序:无头内容管理，JS框架中呈现的前端，以及通过电子商务API购物。我们还将在最后提供现场演示和代码回购！</p><p id="99c0" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">但首先，几个重要的定义。</p><h1 id="3586" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">什么是驾驶舱CMS？</h1><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lr"><img src="../Images/891bba1326cbe0f98b0f4bd1cbe6f6d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nUoTlFmsjSUAuTTM.png"/></div></div></figure><p id="42ea" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们的内容数据将存储在<a class="ae jg" href="https://getcockpit.com/" rel="noopener ugc nofollow" target="_blank">驾驶舱</a>中:</p><blockquote class="lw lx ly"><p id="2d6c" class="jh ji lz jj b jk jl jm jn jo jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd ke hn dt translated">Cockpit是一个开源的、API驱动的CMS，它可以让你毫不妥协地实现你的站点。 </p></blockquote><p id="b61c" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">开发者Artur Heinze精心制作了一个系统，用来构建简单的动态网站，而不需要通过WordPress、Drupal等网站的束缚。</p><p id="3277" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">其API优先的方法(又名“headless”)允许内容管理从内容呈现中分离出来<em class="lz"/>。你可以在这本关于无头CMS 的入门书中了解更多。</p><p id="21eb" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Cockpit运行在PHP上，其核心是一个开发者优先的CMS。</p><p id="aabc" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">以下是它的一些很酷的功能:</p><ul class=""><li id="1135" class="kf kg hu jj b jk jl jo jp js kh jw ki ka kj ke kk kl km kn dt translated"><strong class="jj hv">自主持</strong></li><li id="1140" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated"><strong class="jj hv">快速&amp;轻量级</strong>:在<a class="ae jg" href="https://www.sqlite.org/" rel="noopener ugc nofollow" target="_blank">轻量级数据库引擎</a>上运行，不需要完整的SQL server</li><li id="6c83" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated"><strong class="jj hv">灵活</strong>:在你的网站上以你想要的方式实现</li><li id="7620" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated"><strong class="jj hv">可扩展</strong>:开发者可以轻松创建自己的模块</li><li id="31fe" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated"><strong class="jj hv">现代&amp;简单UI </strong></li><li id="47d3" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated"><strong class="jj hv">内置工具</strong>:降价、资产、缩略图等。</li></ul><h1 id="e224" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">Nuxt.js是什么？</h1><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff md"><img src="../Images/b7d05f6c621d171745f66cd792dac4cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2lV7VT17xsGuIucX.png"/></div></div></figure><p id="b2da" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Nuxt.js 将负责我们的前端。</p><p id="efac" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们最近有机会用Vue.js 玩<a class="ae jg" href="https://css-tricks.com/creating-vue-js-transitions-animations/" rel="noopener ugc nofollow" target="_blank">游戏</a>和<a class="ae jg" rel="noopener" href="/@udyux/a-killer-vue-js-blog-demo-launch-in-2-hours-tops-6a59199eb2b1">，自然对Nuxt的Vue应用框架感兴趣。</a></p><p id="3f32" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">简而言之，Nuxt允许你创建<em class="lz">通用</em> <a class="ae jg" href="https://hackernoon.com/tagged/vue-js" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>应用，你的<a class="ae jg" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>可以在客户端和服务器上执行。</p><blockquote class="lw lx ly"><p id="f3e5" class="jh ji lz jj b jk jl jm jn jo jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd ke hn dt translated"><em class="hu">它的主要范围是UI渲染，同时抽象出客户机/服务器分布。</em> <strong class="jj hv"> <em class="hu">和Vue一样，它可以用来从头开始一个项目，或者对现有的项目进行改进。</em> </strong></p></blockquote><p id="d977" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">受React的Next.js 的启发，Nuxt是构建SSR(服务器端渲染)Vue应用的首选解决方案。由于它的<code class="eh me mf mg mh b">generate</code>命令，它在生成静态站点方面也非常出色。</p><p id="f4b2" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">以下是这个小奇迹实际工作原理的一瞥:</p><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div class="fe ff mi"><img src="../Images/5e59976d2944c951d584d6fe7e9e95b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/0*whjGku1IDu7EfkX0.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Nuxt.js rendering process <a class="ae jg" href="https://nuxtjs.org/guide" rel="noopener ugc nofollow" target="_blank">[source]</a></figcaption></figure><p id="9c61" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们最近已经看到全面的Nuxt.js示例&amp;教程弹出(<a class="ae jg" href="https://css-tricks.com/simple-server-side-rendering-routing-page-transitions-nuxt-js/" rel="noopener ugc nofollow" target="_blank">此处</a> &amp; <a class="ae jg" href="https://www.sitepoint.com/nuxt-js-universal-vue-js/" rel="noopener ugc nofollow" target="_blank">此处</a>)。在这一篇中，我们将看到Nuxt.js与API优先的CMS的实际集成是如何工作的。</p><h1 id="f551" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">使用Nuxt.js和Snipcart的驾驶舱CMS教程</h1><h2 id="31fa" class="mj ku hu bd kv mk ml mm kz mn mo mp ld js mq mr lh jw ms mt ll ka mu mv lp mw dt translated">先决条件</h2><p id="68fe" class="pw-post-body-paragraph jh ji hu jj b jk mx jm jn jo my jq jr js mz ju jv jw na jy jz ka nb kc kd ke hn dt translated">在构建我们令人敬畏的cosplay商店演示之前(是的，没错)，您需要:</p><p id="c143" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="lz">如果您在本地托管驾驶舱</em></p><ul class=""><li id="3db5" class="kf kg hu jj b jk jl jo jp js kh jw ki ka kj ke kk kl km kn dt translated">PHP &gt;= 5.4</li><li id="5242" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">支持SQLite的PDO(或MongoDB)</li><li id="7f8a" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">GD扩展已启用</li></ul><p id="b798" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="lz">如果你在某个地方托管它</em></p><ul class=""><li id="d414" class="kf kg hu jj b jk jl jo jp js kh jw ki ka kj ke kk kl km kn dt translated">具有上述规格的web服务器</li><li id="2e24" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">一个Snipcart账户(测试模式下永远免费)</li></ul><h2 id="5c8f" class="mj ku hu bd kv mk ml mm kz mn mo mp ld js mq mr lh jw ms mt ll ka mu mv lp mw dt translated">1.安装驾驶舱CMS</h2><p id="e4b0" class="pw-post-body-paragraph jh ji hu jj b jk mx jm jn jo my jq jr js mz ju jv jw na jy jz ka nb kc kd ke hn dt translated">转到CMS <a class="ae jg" href="https://getcockpit.com/download" rel="noopener ugc nofollow" target="_blank">下载页面</a>。为了避免不稳定的特性，我们将在这里使用“官方版本”。</p><p id="a93f" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我将在它自己的实例上安装驾驶舱。然后就可以用<code class="eh me mf mg mh b">cockpit.local</code>访问它，用<code class="eh me mf mg mh b">snipcart-shop.local</code>访问公共网站。</p><p id="969b" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">一旦安装完成，去<code class="eh me mf mg mh b">cockpit.local/install</code>完成。</p><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nc"><img src="../Images/62a86b91fbb3ab67dac584c2581ba910.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Kza-f7_oyl7K0X-o.png"/></div></div></figure><p id="b9ad" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果您打算实时推送此安装，<strong class="jj hv">您应该更改您的用户名和密码</strong>。</p><h2 id="5b13" class="mj ku hu bd kv mk ml mm kz mn mo mp ld js mq mr lh jw ms mt ll ka mu mv lp mw dt translated">2.使用Snipcart创建要销售的产品</h2><p id="9c23" class="pw-post-body-paragraph jh ji hu jj b jk mx jm jn jo my jq jr js mz ju jv jw na jy jz ka nb kc kd ke hn dt translated">我们将首先在CMS中创建产品。</p><p id="3fd6" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">开始名为<code class="eh me mf mg mh b">Product</code>的新<em class="lz">收藏</em>。集合是一种保存数据结构中所有内容的方式。在某种程度上，这是驾驶舱CMS的面包和黄油；许多操作都在这个部分完成。</p><p id="7b0a" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在这个集合中，我们添加了以下字段:</p><ul class=""><li id="f407" class="kf kg hu jj b jk jl jo jp js kh jw ki ka kj ke kk kl km kn dt translated">一片名为<code class="eh me mf mg mh b">Name</code>的<code class="eh me mf mg mh b">text</code>田地。</li><li id="99df" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">名为<code class="eh me mf mg mh b">Description</code>的字段<code class="eh me mf mg mh b">text</code>。</li><li id="f93f" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">名为<code class="eh me mf mg mh b">Image</code>的字段<code class="eh me mf mg mh b">media</code>。</li><li id="e002" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">名为<code class="eh me mf mg mh b">Price</code>的字段<code class="eh me mf mg mh b">text</code>。</li></ul><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nd"><img src="../Images/4a7121aff2611e775622c196b0fb554b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rjpVGxguY1OIN-Ca.png"/></div></div></figure><p id="8803" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们现在必须生成一个API密钥来使用Cockpit的服务，为此，进入设置(汉堡包菜单，左上角)，然后通用&gt; API &gt;生成API令牌。</p><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ne"><img src="../Images/c3c106ecb17268587b85d84ed427eea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FDTOAG35hA1gB41r.png"/></div></div></figure><p id="1826" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">最后，我们只需将产品添加到我们商店的内容回购中:</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nf ng l"/></div></figure><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nf ng l"/></div></figure><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nf ng l"/></div></figure><p id="1473" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">对于这个演示，我们在Azure免费网站上安装了Cockpit。这很容易设置:我们在GitHub上推送代码，并在Azure中启用自动Git部署。</p><h2 id="4892" class="mj ku hu bd kv mk ml mm kz mn mo mp ld js mq mr lh jw ms mt ll ka mu mv lp mw dt translated">3.使用和理解Nuxt.js</h2><p id="468d" class="pw-post-body-paragraph jh ji hu jj b jk mx jm jn jo my jq jr js mz ju jv jw na jy jz ka nb kc kd ke hn dt translated">对于面向客户的商店本身，我们将深入研究Nuxt。</p><p id="3c2e" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">首先，我必须说我喜欢和Nuxt一起工作。这非常简单，他们的文档非常整洁，而且，正如你已经知道的，我们目前正在与Vue.js度蜜月。</p><p id="8edf" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">首先要做的是安装Nuxt并搭建我们的项目。我们需要安装<code class="eh me mf mg mh b">vue-cli</code>。如果没有，运行:<code class="eh me mf mg mh b">npm install vue-cli -g</code>。</p><p id="567e" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然后，我们将使用Nuxt starter模板搭建项目:</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nf ng l"/></div></figure><p id="49e4" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">安装到此为止。您可以使用以下命令启动开发服务器:</p><pre class="ls lt lu lv fq nh mh ni nj aw nk dt"><span id="89f1" class="mj ku hu mh b fv nl nm l nn no">npm run dev</span></pre><p id="333f" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv"> Nuxt.js关键概念</strong></p><p id="7d93" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我们谈一谈Nuxt是如何工作的。首先要明白的是<code class="eh me mf mg mh b">pages</code>。Nuxt中的页面是一种<code class="eh me mf mg mh b">route</code>。这是一个会自动添加到应用程序路由中的Vue组件。例如，在默认文件中，你有这个组件:<code class="eh me mf mg mh b">pages/index.vue</code>。当您在<code class="eh me mf mg mh b">http://localhost:3000</code>点击您的应用程序根URL时，这个组件将被呈现(如果您正在运行开发服务器)。</p><p id="c1c0" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果你想创建一个产品页面，你可以在<code class="eh me mf mg mh b">pages</code>文件夹中添加一个名为<code class="eh me mf mg mh b">products.vue</code>的组件，然后你会得到这个URL:<code class="eh me mf mg mh b"><a class="ae jg" href="https://localhost:3000/products." rel="noopener ugc nofollow" target="_blank">https://localhost:3000/products</a></code><a class="ae jg" href="https://localhost:3000/products." rel="noopener ugc nofollow" target="_blank">。</a></p><p id="0f65" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Nuxt自动负责路由；不用登记路线什么的。该组件将被立即挂载，您甚至可以用它来呈现一个静态生成的站点。我们将在教程的后面做这件事。</p><p id="3a22" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Nuxt中还有另一个重要的概念:<code class="eh me mf mg mh b">components</code>。您将在由starter模板创建的项目中看到此文件夹。在其中，您将希望添加要在页面中使用的子组件。我们将在邮件中创建一个。</p><p id="61b8" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们将看到的另一件事是<code class="eh me mf mg mh b">layouts</code>。布局是用来定义你的网站的框架，例如，它通常是你添加导航和页脚的地方。</p><p id="5c00" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们要处理的最后一件事是<code class="eh me mf mg mh b">nuxt.config.js</code>文件。它允许你定义你想要全局包含哪些库或CSS以及更多的内容。</p><p id="a4e5" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果需要，您还可以添加自己的配置设置。这是我们首先要做的，驾驶舱设置。我们将在调用Cockpit CMS API来检索产品数据时使用这些。</p><p id="5731" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv">配置Nuxt.js </strong></p><p id="6c40" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">打开<code class="eh me mf mg mh b">nuxt.config.js</code>并添加:</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nf ng l"/></div></figure><p id="50f7" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们将用我们自己的URL替换<code class="eh me mf mg mh b">&lt;cockpit-url&gt;</code>,用我们在Cockpit中生成的API令牌替换<code class="eh me mf mg mh b">&lt;api-token&gt;</code>。</p><p id="1187" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在，您可以在页面中访问这些环境变量。</p><p id="2b94" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv">创建我们的布局</strong></p><p id="4ce3" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在创建第一页之前，我们需要对布局进行一些修改。除了<code class="eh me mf mg mh b">pages</code>和<code class="eh me mf mg mh b">components</code>，Nuxt还有一个布局的概念。将它视为“主”页面。这个页面必须包含一个特殊的标签:<code class="eh me mf mg mh b">&lt;nuxt /&gt;</code>。</p><p id="222b" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我的看起来像:</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nf ng l"/></div></figure><p id="1fb8" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">页面组件将在<code class="eh me mf mg mh b">&lt;nuxt /&gt;</code>标签中呈现。</p><p id="ac91" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv">创建页面</strong></p><p id="c957" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在是我们的第一页。打开<code class="eh me mf mg mh b">index.vue</code>并移除所有东西。让我们从头开始。</p><p id="d728" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们将从创建组件的模板部分开始。这个模板将负责渲染所有产品。</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nf ng l"/></div></figure><p id="c55f" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">问问自己<code class="eh me mf mg mh b">columns, is-mobile, is-multiline, is-centered, etc.</code>类来自哪里？我使用了<code class="eh me mf mg mh b"><a class="ae jg" href="http://bulma.io/" rel="noopener ugc nofollow" target="_blank">Bulma</a></code>，一个用于演示的CSS框架。它提供了有用的组件和样式来快速获得好看的演示。</p><p id="d608" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">为了添加对<code class="eh me mf mg mh b">Bulma</code>的引用，我打开了<code class="eh me mf mg mh b">nuxt.config.js</code>并将这个对象添加到了<code class="eh me mf mg mh b">link</code>数组中:</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nf ng l"/></div></figure><p id="9b7f" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在这里，我们还将添加Snipcart的默认CSS:</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nf ng l"/></div></figure><p id="9e08" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们的头部对象现在应该看起来像:</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nf ng l"/></div></figure><p id="dfe6" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在那里添加的任何样式表都将自动包含在所有页面中。</p><p id="561d" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">注意到<code class="eh me mf mg mh b">small-product</code>标签了吗？这是我们稍后将创建的组件。</p><p id="c082" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在，我们需要取回我们的产品。Nuxt为pages组件提供了一个非常棒的方法:<code class="eh me mf mg mh b">asyncData</code>。<strong class="jj hv">要知道这个方法不能在子组件中使用，只能在pages组件中使用。</strong></p><p id="c811" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这个方法将允许我们在呈现页面本身之前远程获取数据。这在创建静态站点时特别有用！</p><p id="3886" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">为了与Cockpit API交互，我们将使用<a class="ae jg" href="https://github.com/mzabriskie/axios" rel="noopener ugc nofollow" target="_blank"> Axios </a>，这是一个流行的JavaScript HTTP客户端:</p><pre class="ls lt lu lv fq nh mh ni nj aw nk dt"><span id="3c01" class="mj ku hu mh b fv nl nm l nn no">npm install axios --save</span></pre><p id="93a4" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们的组件应该看起来像:</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nf ng l"/></div></figure><p id="53b0" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在<code class="eh me mf mg mh b">asyncData</code>方法中，我使用Axios获取我的产品并生成缩略图。Cockpit为此提供了API端点。注意该方法接收的参数:<code class="eh me mf mg mh b">{env, params}</code>。<code class="eh me mf mg mh b">env</code>对象将包含在<code class="eh me mf mg mh b">nuxt.config.js</code>中设置的设置。</p><p id="c0d2" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">您的页面组件将在挂载时收到一个产品列表。太棒了，对吧？</p><p id="3bb9" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv">创建组件</strong></p><p id="fba4" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">为此，我们需要创建组件<code class="eh me mf mg mh b">SmallProduct.vue</code>。在<code class="eh me mf mg mh b">components</code>文件夹中，创建一个名为<code class="eh me mf mg mh b">SmallProduct.vue</code>的新文件。</p><p id="0219" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">该组件将呈现产品细节和Snipcart的购买按钮。</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nf ng l"/></div></figure><p id="39bc" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在运行:</p><pre class="ls lt lu lv fq nh mh ni nj aw nk dt"><span id="8d63" class="mj ku hu mh b fv nl nm l nn no">npm run dev</span></pre><p id="59ac" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">打开你的浏览器到<code class="eh me mf mg mh b">http://localhost:3000</code>，你应该会看到一些很棒的东西！</p><h2 id="11f6" class="mj ku hu bd kv mk ml mm kz mn mo mp ld js mq mr lh jw ms mt ll ka mu mv lp mw dt translated">4.部署我们的JAMstack包</h2><p id="86bf" class="pw-post-body-paragraph jh ji hu jj b jk mx jm jn jo my jq jr js mz ju jv jw na jy jz ka nb kc kd ke hn dt translated">工作(几乎)完成了！我们的Cockpit + Nuxt商店缺少最后一样东西:部署。正如我们经常做的那样，我们将使用Netlify进行托管。只需在Netlify中创建一个新站点，并使用:</p><pre class="ls lt lu lv fq nh mh ni nj aw nk dt"><span id="8066" class="mj ku hu mh b fv nl nm l nn no">npm install &amp;&amp; npm run generate</span></pre><p id="6b2e" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们将发布目录设置为<code class="eh me mf mg mh b">dist</code>。</p><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff np"><img src="../Images/c25c77c1d92de2725f54f929b97cf7d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Hm1PuOVn-aTMa0DI.png"/></div></div></figure><p id="467b" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">给Netlify一些时间来建立你的网站，你就大功告成了！</p><h1 id="84a0" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">GitHub回购和现场演示</h1><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nq"><img src="../Images/e2fb8012ed218f05823ad0b2f46eb376.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5QiAbhvr4Fz7yHw0.png"/></div></div></figure><p id="7d5a" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">去吧，看看这个tuts的演示和代码报告！</p><blockquote class="lw lx ly"><p id="d7b1" class="jh ji lz jj b jk jl jm jn jo jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd ke hn dt translated"><a class="ae jg" href="https://github.com/snipcart/snipcart-nuxt-getcockpit" rel="noopener ugc nofollow" target="_blank"> <em class="hu">参见GitHub代码回购</em> </a></p><p id="2110" class="jh ji lz jj b jk jl jm jn jo jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd ke hn dt translated"><a class="ae jg" href="https://snipcart-nuxtjs-getcockpit.netlify.com/" rel="noopener ugc nofollow" target="_blank"> <em class="hu">见直播驾驶舱+ Nuxt.js演示</em> </a></p></blockquote><h1 id="e2a3" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">结论</h1><p id="3fe0" class="pw-post-body-paragraph jh ji hu jj b jk mx jm jn jo my jq jr js mz ju jv jw na jy jz ka nb kc kd ke hn dt translated">嗯，这是一个漫长的。我会尽量简短。；)</p><p id="bd51" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">虽然Cockpit不提供托管实例，但它为开发人员提供了一个可塑性很强的内容API。尤其是如果你是一个PHP爱好者。根据我的测试，perf看起来相当不错&amp;也很稳定。它仍然是一个年轻的，免费的无头CMS，从视觉和功能上来说，还有改进的空间。好消息是:是<a class="ae jg" href="https://github.com/agentejo/cockpit" rel="noopener ugc nofollow" target="_blank">开源</a>！因此，不要犹豫，立即加入合作。</p><p id="d35a" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">至于Nuxt，嗯，我喜欢它！我想这件事在邮报上已经曝光了。如果您想快速跟踪SSR或静态Vue应用程序开发，请尝试一下。</p><p id="ea42" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="lz">如果你喜欢这篇文章，请花点时间在推特</em>  <em class="lz">上分享一下。评论，问题？下面的部分都是你的了！</em></p></div><div class="ab cl nr ns hc nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="hn ho hp hq hr"><p id="dc02" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我最初在Snipcart博客上发表了这篇文章，并在我们的时事通讯上分享了它。</p><p id="39d9" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><a class="ae jg" href="https://upscri.be/hackernoon/" rel="noopener ugc nofollow" target="_blank">https://upscri.be/hackernoon/</a></p></div><div class="ab cl nr ns hc nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="hn ho hp hq hr"><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="ny ng l"/></div></figure></div></div>    
</body>
</html>