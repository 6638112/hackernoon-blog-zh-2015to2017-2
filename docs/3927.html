<html>
<head>
<title>Using PixiJS to generate or animate a Chrome Extension icon.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用PixiJS生成或动画化一个Chrome扩展图标。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/using-pixijs-to-generate-or-animate-a-chrome-extension-icon-cad2d5ff40c9?source=collection_archive---------15-----------------------#2017-05-01">https://medium.com/hackernoon/using-pixijs-to-generate-or-animate-a-chrome-extension-icon-cad2d5ff40c9?source=collection_archive---------15-----------------------#2017-05-01</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/ffb27fcc51261426a62ce28a99ca20e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*INDPbjoKv1glkuTj2DkzBg.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">PixiJS home page splash</figcaption></figure><h1 id="5793" class="jg jh hu bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">简介:</h1><p id="b5c9" class="pw-post-body-paragraph ke kf hu kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">在过去的几个月里，我主要在修补不同的<a class="ae lc" href="https://hackernoon.com/tagged/chrome" rel="noopener ugc nofollow" target="_blank"> chrome </a>扩展/插件。从只是让你的网页变暗的扩展，到覆盖新标签并在其中注入大量网站的扩展，以创建某种工作空间。你可以在这里查看我的最新作品<a class="ae lc" href="https://chrome.google.com/webstore/search/k.ivanow" rel="noopener ugc nofollow" target="_blank">https://chrome.google.com/webstore/search/k.ivanow</a></p><h1 id="b167" class="jg jh hu bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">免责声明:</h1><p id="7732" class="pw-post-body-paragraph ke kf hu kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">下面描述的一切都可以用纯canvas js编码来完成，而不是用<a class="ae lc" href="http://www.pixijs.com/" rel="noopener ugc nofollow" target="_blank"> PixiJS </a>。然而，自从我在工作中和几个兼职项目中使用PixiJS后，我变得非常喜欢它。</p></div><div class="ab cl ld le hc lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hn ho hp hq hr"><h1 id="77cc" class="jg jh hu bd ji jj lk jl jm jn ll jp jq jr lm jt ju jv ln jx jy jz lo kb kc kd dt translated">为什么会有人这么做？</h1><p id="e626" class="pw-post-body-paragraph ke kf hu kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">起初，图标是任何项目中最无聊的部分(尤其是对于像我这样的开发人员)。然而，这正是为什么图标上的一些小的触摸会对用户产生很大的影响。我见过很多Chrome的扩展(all adblockers，Limitless等)使用图标徽章在其中显示文本(阻止了多少广告，你在当前网页上花了多少时间等)。</p><p id="a8d0" class="pw-post-body-paragraph ke kf hu kg b kh lp kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx lt kz la lb hn dt translated">然而今天早些时候，我认为我没有看到任何扩展，动画图标。我搜索了一会儿，看到了几个StackOverflow帖子，解释了如何通过在清单中定义的一组图像之间切换来使<a class="ae lc" href="https://hackernoon.com/tagged/animate" rel="noopener ugc nofollow" target="_blank">图标动画化。我认为这是一个更好的方法，并且发现<code class="eh lu lv lw lx b">chrome.browserAction.setIcon()</code>不仅接收图标的路径，还可以接收图像数据！<em class="ly">万岁！！！现在，让我们进入这篇文章的主要部分。</em></a></p><h1 id="4118" class="jg jh hu bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">如何制作图标动画</h1><p id="2b48" class="pw-post-body-paragraph ke kf hu kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">思考过程简单明了，执行起来也很容易:</p><ol class=""><li id="0656" class="lz ma hu kg b kh lp kl lq kp mb kt mc kx md lb me mf mg mh dt translated">创建背景页面(它将负责图标的渲染和更新)</li><li id="a223" class="lz ma hu kg b kh mi kl mj kp mk kt ml kx mm lb me mf mg mh dt translated">在背景页面中创建<a class="ae lc" href="http://www.pixijs.com/" rel="noopener ugc nofollow" target="_blank"> PixiJS </a> stage(它实际上会激活图标)</li><li id="d6d2" class="lz ma hu kg b kh mi kl mj kp mk kt ml kx mm lb me mf mg mh dt translated">决定动画— <a class="ae lc" href="http://www.pixijs.com/" rel="noopener ugc nofollow" target="_blank"> PixiJS </a>有一套非常棒的滤镜、色彩、比例、倾斜等等…决定你想要制作什么动画，并弄清楚如何制作动画。对我来说，我决定使用我最新的扩展——<a class="ae lc" href="https://chrome.google.com/webstore/detail/mindfulness/blpljgcghbboofdodkmciihhacgjoffo" rel="noopener ugc nofollow" target="_blank">正念</a>主要集中在你还剩多少时间可以活(死亡纪念品之类的东西)，所以我决定一个可以改变颜色的动画时钟会是合适的。</li><li id="8320" class="lz ma hu kg b kh mi kl mj kp mk kt ml kx mm lb me mf mg mh dt translated">执行所述动画并在每一帧上更新chrome扩展图标。</li></ol><h2 id="ca05" class="mn jh hu bd ji mo mp mq jm mr ms mt jq kp mu mv ju kt mw mx jy kx my mz kc na dt translated">有几件事要记住:</h2><ol class=""><li id="1e8e" class="lz ma hu kg b kh ki kl km kp nb kt nc kx nd lb me mf mg mh dt translated"><a class="ae lc" href="http://www.pixijs.com/" rel="noopener ugc nofollow" target="_blank"> PixiJS </a> ticker在背景页面中不工作。基于requestAnimation的任何东西都不起作用，因为背景页面永远不会被聚焦。使用setInterval并在其中设置动画。我用了大约33毫秒，但我也可以用1000毫秒，这完全取决于你决定制作的动画。</li><li id="e0c9" class="lz ma hu kg b kh mi kl mj kp mk kt ml kx mm lb me mf mg mh dt translated">将舞台提取为imageData时，不要使用舞台的大小，而是使用渲染器的大小。舞台只是一个容器，因此，它的宽度和高度会被其子对象更改。这可能会导致拉伸，挤压或以任何其他方式扭曲图标。</li><li id="ec74" class="lz ma hu kg b kh mi kl mj kp mk kt ml kx mm lb me mf mg mh dt translated">Chrome扩展图标在尺寸超过190px时会有问题，根据StackOverflow 上的这个回答<a class="ae lc" href="http://stackoverflow.com/a/37602444/4424049" rel="noopener ugc nofollow" target="_blank">，所以我把它保持在128x128。</a></li></ol><p id="d42b" class="pw-post-body-paragraph ke kf hu kg b kh lp kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx lt kz la lb hn dt translated">因此，我创建了一个clock类，该类创建了一个时钟并制作了动画(<em class="ly">谁会想到</em>)。</p><figure class="ne nf ng nh fq iv"><div class="bz el l di"><div class="ni nj l"/></div></figure><p id="be83" class="pw-post-body-paragraph ke kf hu kg b kh lp kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx lt kz la lb hn dt translated">这个概念很简单</p><ol class=""><li id="385f" class="lz ma hu kg b kh lp kl lq kp mb kt mc kx md lb me mf mg mh dt translated">创建阶段</li><li id="696c" class="lz ma hu kg b kh mi kl mj kp mk kt ml kx mm lb me mf mg mh dt translated">添加扩展的主图标</li><li id="479a" class="lz ma hu kg b kh mi kl mj kp mk kt ml kx mm lb me mf mg mh dt translated">添加3条线(每个时钟指针一条)</li><li id="a74c" class="lz ma hu kg b kh mi kl mj kp mk kt ml kx mm lb me mf mg mh dt translated">基于当前时间旋转它们</li><li id="dd39" class="lz ma hu kg b kh mi kl mj kp mk kt ml kx mm lb me mf mg mh dt translated">通过为某些选项卡重新创建它们来改变它们的颜色(这个逻辑超出了本文的范围)</li><li id="bcd2" class="lz ma hu kg b kh mi kl mj kp mk kt ml kx mm lb me mf mg mh dt translated">在每个帧上调度事件</li><li id="0cc4" class="lz ma hu kg b kh mi kl mj kp mk kt ml kx mm lb me mf mg mh dt translated">在后台页面中，捕捉这个事件并更新扩展图标</li></ol><figure class="ne nf ng nh fq iv"><div class="bz el l di"><div class="ni nj l"/></div></figure><p id="29ef" class="pw-post-body-paragraph ke kf hu kg b kh lp kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx lt kz la lb hn dt translated">这是最终结果。我根据用户所在的网页使用两种风格的箭头。</p><figure class="ne nf ng nh fq iv fe ff paragraph-image"><div class="fe ff nk"><img src="../Images/b94006bb5a52843f0e5d55353af76b4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:328/1*03D71diPHSc0JlE1eVt-HA.gif"/></div></figure></div><div class="ab cl ld le hc lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hn ho hp hq hr"><h2 id="76bc" class="mn jh hu bd ji mo mp mq jm mr ms mt jq kp mu mv ju kt mw mx jy kx my mz kc na dt translated">序言</h2><p id="760c" class="pw-post-body-paragraph ke kf hu kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated"><em class="ly">我猜</em></p><p id="90d2" class="pw-post-body-paragraph ke kf hu kg b kh lp kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx lt kz la lb hn dt translated">我刚刚想出了一个我还没见过有人做过的东西(至少到目前为止。有错随时指正)以及怎么做决定分享一下。</p><p id="ca44" class="pw-post-body-paragraph ke kf hu kg b kh lp kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx lt kz la lb hn dt translated">类似的事情可以用大量的资源来完成，这些资源可以被切换来模拟一个动画，这是我在为这篇文章做简短的研究时看到的最常见的方法。</p><p id="687f" class="pw-post-body-paragraph ke kf hu kg b kh lp kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx lt kz la lb hn dt translated">用一个简单的画布和JS代码就可以得到完全相同的结果。我更喜欢PixiJS，因为我对它很熟悉，如果我决定的话，它允许我制作更复杂的动画。</p><p id="2ca4" class="pw-post-body-paragraph ke kf hu kg b kh lp kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx lt kz la lb hn dt translated">我希望你会对这篇文章感兴趣，即使只是因为你可以从动画画布或WebGL上下文中提取一部分，并将其用作chrome扩展的图标，而不是简单的png。如果你有时间和愿望，你甚至可以通过简单的形状和滤镜或者混合模式来创建你的整个图标。</p><p id="1da9" class="pw-post-body-paragraph ke kf hu kg b kh lp kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx lt kz la lb hn dt translated">查看一下 <a class="ae lc" href="https://chrome.google.com/webstore/detail/mindfulness/blpljgcghbboofdodkmciihhacgjoffo" rel="noopener ugc nofollow" target="_blank"> <em class="ly">扩展</em> </a> <em class="ly">，这就是这篇文章背后的想法。</em></p><div class="ne nf ng nh fq ab cb"><figure class="nl iv nm nn no np nq paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="nl iv nm nn no np nq paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="nl iv nm nn no np nq paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="nr ns nt"><p id="f922" class="ke kf ly kg b kh lp kj kk kl lq kn ko nu lr kr ks nv ls kv kw nw lt kz la lb hn dt translated"><a class="ae lc" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae lc" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae lc" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae lc" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ke kf ly kg b kh lp kj kk kl lq kn ko nu lr kr ks nv ls kv kw nw lt kz la lb hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae lc" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae lc" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ne nf ng nh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nx"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="ne nf ng nh fq iv"><div class="bz el l di"><div class="ny nj l"/></div></figure></div></div>    
</body>
</html>