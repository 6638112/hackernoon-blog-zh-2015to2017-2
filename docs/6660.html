<html>
<head>
<title>How to Build a Tutorials App Using Nuxt.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Nuxt.js构建教程应用程序</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-build-a-tutorials-app-using-nuxt-js-e377ec9c4a8?source=collection_archive---------6-----------------------#2017-09-28">https://medium.com/hackernoon/how-to-build-a-tutorials-app-using-nuxt-js-e377ec9c4a8?source=collection_archive---------6-----------------------#2017-09-28</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/0b11f32e975e48946e5ac533199eb0bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N_40eIXqtQRwDoEV."/></div></div></figure><p id="55ae" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本教程中，我将向你展示如何使用<a class="ae ka" href="https://nuxtjs.org/" rel="noopener ugc nofollow" target="_blank"> Nuxt.js </a>和<a class="ae ka" href="https://cosmicjs.com/" rel="noopener ugc nofollow" target="_blank"> Cosmic JS </a>创建一个“教程组合”应用程序。为了理解如何使用Restful API，本教程将展示如何向Cosmic JS API发出简单的AJAX请求，以便检索、更新和删除Cosmic JS桶中的数据。让我们开始吧。</p><h1 id="ba55" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">TL；速度三角形定位法(dead reckoning)</h1><p id="318a" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated"><a class="ae ka" href="https://github.com/cosmicjs/tutorials-app" rel="noopener ugc nofollow" target="_blank">下载GitHub repo。</a> <br/> <a class="ae ka" href="https://cosmicjs.com/apps/tutorials-app" rel="noopener ugc nofollow" target="_blank">查看演示。</a></p><h1 id="25a8" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">开始使用:</h1><p id="b632" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">首先，让我们创建一个新目录来构建我们的项目，并创建一个package.json文件。</p><p id="0062" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh le lf lg lh b">mkdir cosmicapp-tutorials</code> <br/> <code class="eh le lf lg lh b">cosmicapp-tutorials$ touch package.json</code></p><p id="2147" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，在您的package.json中，复制并粘贴以下代码:</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="4d8c" class="lq kc hu lh b fv lr ls l lt lu">{<br/> "name": "cosmicapp-tutorials",<br/> "version": "1.0.0",<br/> "description": "Nuxt.js project",<br/> "author": "kutsaniuk@gmail.com",<br/> "private": true,<br/> "scripts": {<br/> "dev": "NODE_ENV=development nuxt",<br/> "build": "nuxt build",<br/> "start": "npm run build; NODE_ENV=production HOST=0.0.0.0 nuxt start"<br/> },<br/> "dependencies": {<br/> "axios": "^0.16.2",<br/> "body-parser": "^1.17.2",<br/> "cross-env": "^5.0.5",<br/> "express": "^4.15.3",<br/> "express-session": "^1.15.3",<br/> "http": "0.0.0",<br/> "nuxt": "^1.0.0-rc11",<br/> "sha1": "^1.1.1",<br/> "vue-notification": "^1.3.4"<br/> },<br/> "devDependencies": {<br/> "babel-eslint": "^7.2.3",<br/> "eslint": "^4.3.0",<br/> "eslint-config-standard": "^10.2.1",<br/> "eslint-loader": "^1.9.0",<br/> "eslint-plugin-html": "^3.1.1",<br/> "eslint-plugin-import": "^2.7.0",<br/> "eslint-plugin-node": "^5.1.1",<br/> "eslint-plugin-promise": "^3.5.0",<br/> "eslint-plugin-standard": "^3.0.1"<br/> }<br/> }</span></pre><p id="3da8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">其次，我们来做一个nuxt.config.js文件。</p><p id="948f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh le lf lg lh b">cosmicapp-tutorials$ touch nuxt.config.js</code></p><p id="36bd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，在您的nuxt.config.js中，复制并粘贴以下代码:</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="3107" class="lq kc hu lh b fv lr ls l lt lu">//cosmicapp-tutorials/nuxt.config.js<br/> const bodyParser = require('body-parser')<br/> const session = require('express-session')</span><span id="9eaa" class="lq kc hu lh b fv lv ls l lt lu"> module.exports = {</span><span id="02ce" class="lq kc hu lh b fv lv ls l lt lu"> dev: (process.env.NODE_ENV !== 'production'),<br/> head: {<br/> title: 'cosmicapp-tutorials',<br/> meta: [<br/> { charset: 'utf-8' },<br/> { name: 'viewport', content: 'width=device-width, initial-scale=1' },<br/> { hid: 'description', name: 'description', content: 'Nuxt.js project' }<br/> ],<br/> link: [<br/> { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }<br/> ]<br/> },<br/> loading: { color: '#585858' },<br/> build: {<br/> vendor: ['axios', 'vue-notification']<br/> },<br/> serverMiddleware: [<br/> bodyParser.json(),<br/> session({<br/> secret: 'super-secret-key',<br/> resave: true,<br/> saveUninitialized: false,<br/> cookie: { maxAge: 60000 }<br/> }),<br/> '~/api'<br/> ],<br/> env: {<br/> bucketSlug: process.env.BUCKET_SLUG || 'tutorials',<br/> readKey: process.env.READ_KEY || 'anyI1DP1bxB5ivjCaJSRC0ZFxB5SJDpfYgrDfR47fw7HIlWYAX',<br/> writeKey: process.env.WRITE_KEY || 'J72v1YeK8zZF6n0dI8yhiVTzQy75JASppAQe8XPykiJHW9ARfz'<br/> }<br/> }</span></pre><h1 id="df98" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">构建我们的应用程序:</h1><p id="1fd9" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">现在，我们将构建我们的文件结构，以便我们可以组织我们的vue文件。我们的cosmicapp-tutorials目录应该是这样的:</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="a80a" class="lq kc hu lh b fv lr ls l lt lu">cosmicapp-tutorials<br/> |----api<br/> | |----index.js<br/> |----assets<br/> | |----css<br/> | |----fonts<br/> | |----images<br/> | |----sass<br/> |----layouts<br/> | |----default.vue<br/> |----middleware<br/> | |----auth.js<br/> |----pages<br/> | |----add<br/> | |----index.js<br/> | |----articles<br/> | |----_id.js<br/> | |----blog<br/> | |----index.js<br/> | |----edit<br/> | |----_id.js<br/> | |----login<br/> | |----index.js<br/> | |----profile<br/> | |----_id.js<br/> | |----register<br/> | |----index.js<br/> | |----index.vue<br/> |----static<br/> |----store<br/> |----nuxt.config.json<br/> |----package.json</span></pre><p id="6034" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，我们将设置default.vue。将以下代码复制并粘贴到default.vue文件中:</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="d3ef" class="lq kc hu lh b fv lr ls l lt lu">&lt;template&gt;<br/>        &lt;div v-bind:class="{ 'is-menu-visible': isMenuVisible}"&gt;<br/>        &lt;div id="wrapper"&gt;<br/>        &lt;header id="header"&gt;<br/>        &lt;div class="inner"&gt;<br/>        &lt;!-- Logo --&gt;<br/>        &lt;nuxt-link to="/" class="logo"&gt;<br/>        &lt;span class="symbol"&gt;&lt;img src="~/assets/images/logo.svg" alt=""/&gt;&lt;/span&gt;<br/>        &lt;span class="title"&gt;Tutorials&lt;/span&gt;<br/>        &lt;/nuxt-link&gt;<br/>        &lt;pre v-bind="$store.state.authUser"&gt;&lt;/pre&gt;</span><span id="e2b7" class="lq kc hu lh b fv lv ls l lt lu">        &lt;!-- Nav --&gt;<br/>        &lt;nav @click="isMenuVisible = true"&gt;<br/>        &lt;ul&gt;<br/>        &lt;li&gt;&lt;a href="#menu"&gt;Menu&lt;/a&gt;&lt;/li&gt;<br/>        &lt;/ul&gt;<br/>        &lt;/nav&gt;</span><span id="c68e" class="lq kc hu lh b fv lv ls l lt lu">        &lt;/div&gt;<br/>        &lt;/header&gt;<br/>        &lt;nuxt/&gt;<br/>        &lt;footer id="footer"&gt;<br/>        &lt;div class="inner"&gt;<br/>        &lt;ul class="copyright"&gt;<br/>        &lt;li&gt;&lt;img class="cosmic-logo" src="https://cosmicjs.com/images/logo.svg" width="20" height="20"&gt;&lt;a href="https://cosmicjs.com/"&gt;Proudly powered by Cosmic JS&lt;/a&gt;&lt;/li&gt;&lt;li&gt;Copyright: &lt;i class="fa fa-copyright"&gt;&lt;/i&gt; Photography Portfolio App 2017&lt;/li&gt;<br/>        &lt;/ul&gt;<br/>        &lt;/div&gt;<br/>        &lt;/footer&gt;<br/>        &lt;/div&gt;<br/>        &lt;nav id="menu" @click="isMenuVisible = false"&gt;<br/>        &lt;div class="inner"&gt;<br/>        &lt;h2&gt;Menu&lt;/h2&gt;<br/>        &lt;ul&gt;<br/>        &lt;li&gt;&lt;nuxt-link to="/"&gt;Home&lt;/nuxt-link&gt;&lt;/li&gt;</span><span id="19a0" class="lq kc hu lh b fv lv ls l lt lu">        &lt;li v-if="!$store.state.authUser"&gt;&lt;nuxt-link to="/login"&gt;Login&lt;/nuxt-link&gt;&lt;/li&gt;<br/>        &lt;li v-if="!$store.state.authUser"&gt;&lt;nuxt-link to="/register"&gt;Register&lt;/nuxt-link&gt;&lt;/li&gt;</span><span id="681a" class="lq kc hu lh b fv lv ls l lt lu">        &lt;li v-if="$store.state.authUser"&gt;&lt;nuxt-link v-bind:to="'/profile/' + $store.state.authUser.user[0].value"&gt;Profile&lt;/nuxt-link&gt;&lt;/li&gt;<br/>        &lt;li v-if="$store.state.authUser"&gt;&lt;a href="#" @click="logout()"&gt;Logout&lt;/a&gt;&lt;/li&gt;<br/>        &lt;/ul&gt;<br/>        &lt;/div&gt;<br/>        &lt;a class="close" @click="isMenuVisible = false" href="#menu"&gt;Close&lt;/a&gt;<br/>        &lt;/nav&gt;<br/>        &lt;/div&gt;</span><span id="4a45" class="lq kc hu lh b fv lv ls l lt lu">        &lt;/template&gt;</span><span id="12e3" class="lq kc hu lh b fv lv ls l lt lu">        &lt;script&gt;<br/>        export default {</span><span id="c852" class="lq kc hu lh b fv lv ls l lt lu">        data () {<br/>        return {<br/>        isMenuVisible: false<br/>        }<br/>        },<br/>        methods: {<br/>        async logout () {<br/>        await this.$store.dispatch('logout')<br/>        }<br/>        }<br/>        }<br/>        &lt;/script&gt;</span><span id="65a4" class="lq kc hu lh b fv lv ls l lt lu">        &lt;style src="~/assets/css/main.css"&gt;&lt;/style&gt;</span></pre><p id="bc2a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">之后，我们可以创建index.vue。将以下代码复制并粘贴到您的index.vue文件中:</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="5425" class="lq kc hu lh b fv lr ls l lt lu">&lt;template&gt;<br/> &lt;div id="main"&gt;<br/> &lt;div class="inner"&gt;<br/> &lt;header&gt;<br/> &lt;h1&gt;You are browsing the best resource &lt;br&gt;<br/> for Online Education.&lt;/h1&gt;<br/> &lt;p&gt;Just clear crisp and to the point content, nothing else.&lt;/p&gt;<br/> &lt;/header&gt;<br/> &lt;section class="tiles"&gt;<br/> &lt;article v-bind:class="'style' + (index + 1)" v-for="(article, index) in articles"&gt;<br/> &lt;span class="image"&gt;<br/> &lt;img v-if="article.metadata" :src="article.metadata.image.url" alt=""/&gt;<br/> &lt;/span&gt;<br/> &lt;nuxt-link v-bind:to="'/articles/' + article.slug" class="logo"&gt;<br/> &lt;h2&gt;{{article.title}}&lt;/h2&gt;<br/> &lt;div class="content" v-html="article.content"&gt;&lt;/div&gt;<br/> &lt;/nuxt-link&gt;<br/> &lt;/article&gt;<br/> &lt;/section&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;/template&gt;</span><span id="6ff3" class="lq kc hu lh b fv lv ls l lt lu"> &lt;script&gt;<br/> import axios from 'axios'</span><span id="5b7f" class="lq kc hu lh b fv lv ls l lt lu"> export default {</span><span id="c913" class="lq kc hu lh b fv lv ls l lt lu"> asyncData () {<br/> return axios.get(`https://api.cosmicjs.com/v1/tutorials/object-type/articles?read_key=${process.env.readKey}`)<br/> .then((res) =&gt; {<br/> return { articles: res.data.objects }<br/> })<br/> },<br/> head () {<br/> return {<br/> title: 'Tutorials'<br/> }<br/> }<br/> }<br/> &lt;/script&gt;</span></pre><p id="5410" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在我们将设置我们的store/index.vue。将以下代码复制并粘贴到您的store/index.vue文件中:</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="b2f2" class="lq kc hu lh b fv lr ls l lt lu">import axios from 'axios';<br/>var sha1 = require('sha1');</span><span id="ec31" class="lq kc hu lh b fv lv ls l lt lu">export const state = () =&gt; ({<br/>    authUser: null<br/>})</span><span id="0a82" class="lq kc hu lh b fv lv ls l lt lu">export const mutations = {<br/>    SET_USER: function (state, user) {<br/>        state.authUser = user<br/>    }<br/>}</span><span id="ffcb" class="lq kc hu lh b fv lv ls l lt lu">export const actions = {<br/>    // nuxtServerInit is called by Nuxt.js before server-rendering every page<br/>    nuxtServerInit ({ commit }, { req }) {<br/>        if (req.session &amp;&amp; req.session.authUser) {<br/>            commit('SET_USER', req.session.authUser)<br/>        }<br/>    },<br/>    async login ({ commit }, { username, password }) {<br/>        axios.get('https://api.cosmicjs.com/v1/' + process.env.bucketSlug + '/object-type/users/search', {<br/>                params: {<br/>                    metafield_key: 'username',<br/>                    metafield_value_has: username,<br/>                    limit: 1,<br/>                    read_key: process.env.readKey<br/>                }<br/>            })<br/>            .then(function (response) {<br/>                if (response.data.status !== 'empty') {<br/>                    axios.get('https://api.cosmicjs.com/v1/' + process.env.bucketSlug + '/object-type/users/search', {<br/>                            params: {<br/>                                metafield_key: 'password',<br/>                                metafield_value: sha1(password),<br/>                                limit: 1,<br/>                                read_key: process.env.readKey<br/>                            }<br/>                        })<br/>                        .then(function (response) {<br/>                            if (response.data.status !== 'empty') {<br/>                                axios.post('/api/saveSession', response.data.objects[0])<br/>                                    .then(function (response) {<br/>                                        commit('SET_USER', response.data);<br/>                                        window.location.href = '/profile/' + username;<br/>                                });<br/>                            }<br/>                        })</span><span id="9e0c" class="lq kc hu lh b fv lv ls l lt lu">                }<br/>            })<br/>    },<br/>    async register ({ commit }, { username, password }) {<br/>        axios.post('https://api.cosmicjs.com/v1/' + process.env.bucketSlug + '/add-object', {<br/>                write_key: process.env.writeKey,</span><span id="0e41" class="lq kc hu lh b fv lv ls l lt lu">                title: username,<br/>                type_slug: 'users',<br/>                slug: username,<br/>                metafields: [<br/>                    {<br/>                        key: "username",<br/>                        type: "text",<br/>                        value: username<br/>                    },<br/>                    {<br/>                        key: "password",<br/>                        type: "text",<br/>                        value: sha1(password)<br/>                    }<br/>                ]<br/>            })<br/>            .then(function (response) {<br/>                axios.post('/api/saveSession', response.data.object)<br/>                    .then(function (response) {<br/>                        commit('SET_USER', response.data);<br/>                        window.location.href = '/profile/' + username;<br/>                    });<br/>            });</span><span id="f258" class="lq kc hu lh b fv lv ls l lt lu">    },<br/>    async logout ({ commit }) {<br/>        await axios.post('/api/logout')<br/>        window.location.href = '/login';<br/>        commit('SET_USER', null)<br/>    }</span><span id="8c18" class="lq kc hu lh b fv lv ls l lt lu">}</span></pre><p id="2dbd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在我们将设置我们的auth.js。将以下代码复制并粘贴到您的中间件/auth.vue文件中:</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="96bc" class="lq kc hu lh b fv lr ls l lt lu">export default function ({ store, error }) {<br/>    if (!store.state.authUser) {<br/>        error({<br/>            message: 'You are not connected',<br/>            statusCode: 403<br/>        })<br/>    }<br/>}</span></pre><h1 id="9c0c" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">这是怎么回事:</h1><ol class=""><li id="88c4" class="lw lx hu je b jf kz jj la jn ly jr lz jv ma jz mb mc md me dt translated">我们创建了默认布局。</li><li id="95ce" class="lw lx hu je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me dt translated">我们为登录、注册和会话创建了store/index.js。</li><li id="3078" class="lw lx hu je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me dt translated">我们创建了中间件/auth.js来检查用户是否登录。</li></ol><h1 id="8adb" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">结论:</h1><p id="f02b" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我们能够使用我们的动作和调度程序函数来消费Cosmic JS API。我希望你和我一样喜欢这个教程，如果你有任何问题<a class="ae ka" href="https://twitter.com/cosmic_js" rel="noopener ugc nofollow" target="_blank">在Twitter上联系我们</a>和<a class="ae ka" href="https://cosmicjs.com/community" rel="noopener ugc nofollow" target="_blank">加入我们的Slack社区</a>。</p></div></div>    
</body>
</html>