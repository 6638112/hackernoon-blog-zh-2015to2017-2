<html>
<head>
<title>🔥 A step-by-step React tutorial for Hot Module Replacement in Rails</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">🔥Rails中热模块替换的分步React教程</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/lesson-5-hot-module-replacement-for-react-in-rails-using-the-react-on-rails-gem-643c5b01f3d7?source=collection_archive---------3-----------------------#2017-02-22">https://medium.com/hackernoon/lesson-5-hot-module-replacement-for-react-in-rails-using-the-react-on-rails-gem-643c5b01f3d7?source=collection_archive---------3-----------------------#2017-02-22</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/950b4e9ba6784e6346aab3acd0b79a95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T0tj4C-3ryboRiME2BJlqg.jpeg"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek"><a class="ae ih" href="https://upload.wikimedia.org/wikipedia/commons/8/8a/Darvasa_gas_crater_panorama.jpg" rel="noopener ugc nofollow" target="_blank">source</a></figcaption></figure><div class=""/><p id="bb3d" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">你不讨厌每次修改一点代码就刷新浏览器吗？</p><blockquote class="kf"><p id="8862" class="kg kh ik bd ki kj kk kl km kn ko ke ek translated">这是来自<a class="ae ih" href="https://learnetto.com/users/hrishio/courses/the-complete-react-on-rails-5-course?utm_source=hackernoon&amp;utm_campaign=hackernoon_hmr&amp;utm_medium=hackernoon_hmr" rel="noopener ugc nofollow" target="_blank">完整的React on Rails课程</a>的一课，该课程帮助Ruby on Rails开发人员变得非常擅长使用React.js在Rails中构建ui。它只适用于那些在生产中认真使用React的人，所以<a class="ae ih" href="https://learnetto.com/users/hrishio/courses/the-complete-react-on-rails-5-course?utm_source=hackernoon&amp;utm_campaign=hackernoon_hmr&amp;utm_medium=hackernoon_hmr" rel="noopener ugc nofollow" target="_blank">不要点击这个链接</a>，除非你是其中之一。</p></blockquote><p id="0cca" class="pw-post-body-paragraph jh ji ik jj b jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka kt kc kd ke hn dt translated">在本课中，我们将了解如何在带有热模块替换的react_on_rails应用程序中使用热资产重装。</p><p id="db84" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们正在构建的应用是一个日历约会应用。你可以在<a class="ae ih" href="https://hackernoon.com/tagged/github" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到代码:</p><div class="ht hu fm fo hv ku"><a href="https://github.com/learnetto/calreact-hmr" rel="noopener  ugc nofollow" target="_blank"><div class="kv ab ej"><div class="kw ab kx cl cj ky"><h2 class="bd il fv z el kz eo ep la er et ij dt translated">GitHub - learnetto/calreact-hmr</h2><div class="lb l"><h3 class="bd b fv z el kz eo ep la er et ek translated">在GitHub上创建一个帐户，为calreact-hmr的开发做出贡献。</h3></div><div class="lc l"><p class="bd b gc z el kz eo ep la er et ek translated">github.com</p></div></div></div></a></div><p id="5392" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">热重新加载意味着在浏览器中自动显示实时代码更改，而不必在每次更改时重新加载页面。</p><p id="b172" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在开发中还是挺有用的。您可以让代码和浏览器窗口相邻，只需编写代码并保存它，就可以立即看到更改，而无需切换到浏览器或刷新浏览器。</p><p id="69bb" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><a class="ae ih" href="http://github.com/shakacode/react_on_rails" rel="noopener ugc nofollow" target="_blank"> react_on_rails gem </a>使用一种特殊类型的热重载，称为热模块替换或通过Webpack Dev server的HMR，向rails提供热资产，而不是资产管道。</p><figure class="le lf lg lh fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ld"><img src="../Images/2b1360cfe5ad19fc002d06abd365a78c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*47SvXOKo-4I7Sqh6WkQniA.png"/></div></div></figure><p id="3b54" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">当您启动应用程序时，Webpack会构建包，然后继续观察源文件的变化。如果它检测到源文件发生了更改，它将只重建已更改的模块，并通过HMR运行时在浏览器中更新这些模块。</p><p id="e6c2" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">react_on_rails gem有一个关于如何设置的<a class="ae ih" href="https://github.com/shakacode/react_on_rails/blob/master/docs/additional-reading/hot-reloading-rails-development.md" rel="noopener ugc nofollow" target="_blank">自述文件</a>。</p><p id="10c1" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">但是他们提供的示例代码有很多额外的部分，很容易在npm地狱中迷失，试图一次完成所有这些。</p><p id="e047" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">所以我做了这个超级简化的一步一步的教程，教你怎么做。🙂</p><p id="fa35" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我建议您在您的计算机上克隆react_on_rails repo，并在<a class="ae ih" href="https://github.com/shakacode/react_on_rails/tree/master/spec/dummy" rel="noopener ugc nofollow" target="_blank"> spec/dummy目录</a>中查找热重载设置代码示例。</p><p id="c771" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">您必须更改许多文件和设置，所以我将带您一步一步地完成设置。</p><p id="ed9c" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">您可以对任何资源进行热重新加载，包括<a class="ae ih" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> Javascript </a>、CSS和图像，但在本课中，我们将只对Javascript使用它。</p><p id="cbe6" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">热重装只适用于开发，所以我们需要生成两组配置文件——一组用于开发以使用热重装，另一组用于生产(使用静态资产)。</p><p id="837e" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我们首先进行热重装的设置，稍后我们将添加额外的设置来为生产中的静态文件提供服务。</p><p id="3b65" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj il"> 1。我们首先要安装一些我们需要的javascript包。</strong></p><p id="a515" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">两个关键的包是<strong class="jj il"> react-transform-hmr </strong>(支持通过热模块替换API重新加载)和<strong class="jj il"> webpack-dev-server </strong>(服务于实时资产的开发服务器)。</p><p id="d5ca" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">此外，我们还需要一个巴别塔插件来应用转换。</p><p id="3f3e" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们需要将这些添加到我们的<a class="ae ih" href="https://github.com/learnetto/calreact-hmr/blob/master/client/package.json" rel="noopener ugc nofollow" target="_blank"> client/package.json文件</a>:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="f277" class="ln lo ik lj b fv lp lq l lr ls">“babel-plugin-react-transform”: “^2.0.2”,<br/>“react-transform-hmr”: “^1.0.4”,<br/>“webpack-dev-server”: “^1.16.2”</span></pre><p id="bc41" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们还将在这里添加jquery和jquery-ujs，以便它们被webpack(而不是Rails)捆绑，并对依赖它们的任何其他包可用。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="e979" class="ln lo ik lj b fv lp lq l lr ls">“jquery”: “^3.1.1”,<br/>“jquery-ujs”: “^1.2.2”,</span></pre><p id="c30c" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">那我们跑吧:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="c209" class="ln lo ik lj b fv lp lq l lr ls">$ npm install</span></pre><p id="e88d" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">包装完成了。</p><p id="7355" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj il"> 2。接下来，让我们设置webpack配置文件。</strong></p><p id="206d" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们需要一个由<a class="ae ih" href="https://github.com/learnetto/calreact-hmr/blob/master/client/webpack.client.rails.hot.config.js" rel="noopener ugc nofollow" target="_blank">热配置</a>和<a class="ae ih" href="https://github.com/learnetto/calreact-hmr/blob/master/client/webpack.client.rails.build.config.js" rel="noopener ugc nofollow" target="_blank">静态配置</a>共享的<a class="ae ih" href="https://github.com/learnetto/calreact-hmr/blob/master/client/webpack.client.base.config.js" rel="noopener ugc nofollow" target="_blank">基本配置</a>。</p><p id="d6d8" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我已经将这些配置文件从react _ on _ rails repo spec/dummy/client目录复制到我的应用程序中，并对它们进行了简化，只使用我们需要的基本内容。</p><p id="d60e" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我们快速浏览一下。</p><p id="75db" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">基本配置主要设置要解析的入口点和文件扩展名。它保留特定于环境的配置文件的输出设置。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="f413" class="ln lo ik lj b fv lp lq l lr ls">// Common client-side webpack configuration used by<br/>// webpack.client.rails.hot.config and webpack.client.rails.build.config.</span><span id="6de1" class="ln lo ik lj b fv lt lq l lr ls">const webpack = require('webpack');<br/>const path = require('path');</span><span id="d4a1" class="ln lo ik lj b fv lt lq l lr ls">const devBuild = process.env.NODE_ENV !== 'production';<br/>const nodeEnv = devBuild ? 'development' : 'production';</span><span id="c57a" class="ln lo ik lj b fv lt lq l lr ls">module.exports = {</span><span id="e7a9" class="ln lo ik lj b fv lt lq l lr ls">// the project dir<br/>  context: __dirname,<br/>  entry: [<br/>      'babel-polyfill',<br/>      'es5-shim/es5-shim',<br/>      'es5-shim/es5-sham',<br/>      'jquery-ujs',<br/>      'jquery',<br/>      './app/bundles/Appointments/startup/registration',<br/>  ],<br/>  resolve: {<br/>    extensions: ['', '.js', '.jsx'],<br/>    alias: {<br/>      libs: path.join(process.cwd(), 'app', 'libs'),<br/>      react: path.resolve('./node_modules/react'),<br/>      'react-dom': path.resolve('./node_modules/react-dom'),<br/>    },<br/>  },</span><span id="cdba" class="ln lo ik lj b fv lt lq l lr ls">plugins: [<br/>    new webpack.DefinePlugin({<br/>      'process.env': {<br/>        NODE_ENV: JSON.stringify(nodeEnv),<br/>      },<br/>      TRACE_TURBOLINKS: devBuild,<br/>    }),</span><span id="6987" class="ln lo ik lj b fv lt lq l lr ls">],<br/>  module: {<br/>    loaders: [<br/>      { test: require.resolve('jquery'), loader: 'expose?jQuery' },<br/>      { test: require.resolve('jquery'), loader: 'expose?$' },    <br/>    ],<br/>  },<br/>};</span></pre><p id="a9f9" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">它还将jQuery公开为一个全局变量，这样依赖于它的任何其他包都可以使用它。</p><p id="7ed9" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在我们来看看热配置。它建立在基本配置的基础上。</p><p id="eb17" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">它引入了基本配置，并为热重装添加了一些额外的东西。它设置webpack dev服务器将运行的端口(3500)。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="dc12" class="ln lo ik lj b fv lp lq l lr ls">// Run with Rails server like this:<br/>// rails s<br/>// cd client &amp;&amp; babel-node server-rails-hot.js<br/>// Note that Foreman (Procfile.dev) has also been configured to take care of this.</span><span id="3ab7" class="ln lo ik lj b fv lt lq l lr ls">const path = require('path');<br/>const webpack = require('webpack');</span><span id="4b1b" class="ln lo ik lj b fv lt lq l lr ls">const config = require('./webpack.client.base.config');</span><span id="5b89" class="ln lo ik lj b fv lt lq l lr ls">const hotRailsPort = process.env.HOT_RAILS_PORT || 3500;</span></pre><p id="6fc1" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">它添加了两个入口点——第一个是来自webpack dev server的活动资产，第二个是它需要的模块。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="702b" class="ln lo ik lj b fv lp lq l lr ls">config.entry.push(<br/>  `webpack-dev-server/client?<a class="ae ih" href="http://localhost:${hotRailsPort}`" rel="noopener ugc nofollow" target="_blank">http://localhost:${hotRailsPort}`</a>,<br/>  'webpack/hot/only-dev-server'<br/>);</span></pre><figure class="le lf lg lh fq hw fe ff paragraph-image"><a href="https://learnetto.com/users/hrishio/courses/the-complete-react-on-rails-5-course?utm_source=hackernoon&amp;utm_campaign=hackernoon_hmr&amp;utm_medium=hackernoon_hmr"><div class="fe ff lu"><img src="../Images/de8dfd90d427428046dcf3fe392af2b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NrTctON0OKxN0v4sCO6dFg.png"/></div></a><figcaption class="id ie fg fe ff if ig bd b be z ek">Want this lesson on video? Click on the image above</figcaption></figure><p id="06ea" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然后它设置输出文件名和路径。我们称之为网络包捆绑。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="2d8a" class="ln lo ik lj b fv lp lq l lr ls">config.output = {<br/>  filename: 'webpack-bundle.js',<br/>  path: path.join(__dirname, 'public'),<br/>  publicPath: `<a class="ae ih" href="http://localhost:${hotRailsPort}/`" rel="noopener ugc nofollow" target="_blank">http://localhost:${hotRailsPort}/`</a>,<br/>};</span></pre><p id="6563" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果你看一下<a class="ae ih" href="https://github.com/shakacode/react_on_rails/blob/master/spec/dummy/client/webpack.client.rails.hot.config.js" rel="noopener ugc nofollow" target="_blank"> react_on_rails回购示例</a>，他们<a class="ae ih" href="https://github.com/shakacode/react_on_rails/blob/master/spec/dummy/client/webpack.client.base.config.js" rel="noopener ugc nofollow" target="_blank">把它分成两个文件</a>——一个用于应用程序，一个用于供应商文件。</p><p id="d08a" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">但是我们在这里保持简单，只创建一个输出文件。</p><p id="0b20" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这里最重要的一点是这个加载器，它获取我们的jsx文件，并通过一个babel插件应用hmr转换。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="dbdf" class="ln lo ik lj b fv lp lq l lr ls">config.module.loaders.push(<br/>  {<br/>    test: /\.jsx?$/,<br/>    loader: 'babel',<br/>    exclude: /node_modules/,<br/>    query: {<br/>      plugins: [<br/>        [<br/>          'react-transform',<br/>          {<br/>            transforms: [<br/>              {<br/>                transform: 'react-transform-hmr',<br/>                imports: ['react'],<br/>                locals: ['module'],<br/>              },<br/>            ],<br/>          },<br/>        ],<br/>      ],<br/>    },<br/>  },<br/>  {<br/>    test: require.resolve('jquery-ujs'),<br/>    loader: 'imports?jQuery=jquery',<br/>  }<br/>);</span></pre><p id="6b6e" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然后我们将hmr插件添加到配置中并导出它。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="fd91" class="ln lo ik lj b fv lp lq l lr ls">config.plugins.push(<br/>  new webpack.HotModuleReplacementPlugin(),<br/>  new webpack.NoErrorsPlugin()<br/>);</span><span id="7508" class="ln lo ik lj b fv lt lq l lr ls">config.devtool = 'eval-source-map';</span><span id="bd15" class="ln lo ik lj b fv lt lq l lr ls">console.log('Webpack HOT dev build for Rails');</span><span id="71fd" class="ln lo ik lj b fv lt lq l lr ls">module.exports = config;</span></pre><div class="ht hu fm fo hv ku"><a href="https://learnetto.com/users/hrishio/courses/the-complete-react-on-rails-5-course?utm_source=hackernoon&amp;utm_campaign=hackernoon_hmr&amp;utm_medium=hackernoon_hmr" rel="noopener  ugc nofollow" target="_blank"><div class="kv ab ej"><div class="kw ab kx cl cj ky"><h2 class="bd il fv z el kz eo ep la er et ij dt translated">Rails 5课程的完整反应</h2><div class="lb l"><h3 class="bd b fv z el kz eo ep la er et ek translated">Max Rose-Collins，RankTracker的联合创始人和Ruby工程师你很了解Rails。你已经用了一段时间了，在…</h3></div><div class="lc l"><p class="bd b gc z el kz eo ep la er et ek translated">learnetto.com</p></div></div><div class="lv l"><div class="lw l lx ly lz lv ma ib ku"/></div></div></a></div><p id="1fc3" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj il"> 3。下一步是根据我们是否使用热重装，在我们的</strong> <a class="ae ih" href="https://github.com/learnetto/calreact-hmr/blob/master/app/views/layouts/application.html.erb" rel="noopener ugc nofollow" target="_blank"> <strong class="jj il"> Rails应用程序布局文件</strong> </a> <strong class="jj il">中包含每个环境的正确webpack资产文件。</strong></p><p id="4ace" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们将使用视图助手来配置要加载的正确资产——根据环境，可以是“热”资产，也可以是“静态”资产。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="ae1c" class="ln lo ik lj b fv lp lq l lr ls">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;Calreact&lt;/title&gt;<br/>    &lt;%= csrf_meta_tags %&gt;</span><span id="939a" class="ln lo ik lj b fv lt lq l lr ls">    &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;<br/> <br/>    &lt;%= env_javascript_include_tag(hot: ['<a class="ae ih" href="http://localhost:3500/webpack-bundle.js'" rel="noopener ugc nofollow" target="_blank">http://localhost:3500/webpack-bundle.js'</a>]) %&gt;</span><span id="7b2c" class="ln lo ik lj b fv lt lq l lr ls">    &lt;%= env_javascript_include_tag(static: 'application_static',<br/>                  hot: 'application_non_webpack',<br/>                  'data-turbolinks-track' =&gt; true) %&gt;<br/>  &lt;/head&gt;</span><span id="c120" class="ln lo ik lj b fv lt lq l lr ls">  &lt;body&gt;<br/>    &lt;%= yield %&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="96f0" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这里，env_javascript_include_tag是react_on_rails提供的一个帮助器方法，它根据环境变量是否设置为使用热重载来包含热或静态资产文件。</p><p id="60a6" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这里我们有两个标签，一个用于加载不使用turbolinks的热资产，另一个用于静态资产。</p><p id="a72d" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然后我们需要创建这两个文件。</p><p id="2106" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><a class="ae ih" href="https://github.com/learnetto/calreact-hmr/blob/master/app/assets/javascripts/application_static.js" rel="noopener ugc nofollow" target="_blank">应用_静态. js </a>:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="a5f0" class="ln lo ik lj b fv lp lq l lr ls">//= require webpack-bundle<br/>//= require application_non_webpack</span></pre><p id="aa61" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们首先需要webpack-bundle，然后需要application_non_webpack。</p><p id="27cc" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我们现在创建该文件—<a class="ae ih" href="https://github.com/learnetto/calreact-hmr/blob/master/app/assets/javascripts/application_non_webpack.js.erb" rel="noopener ugc nofollow" target="_blank">application _ non _ web pack . js . erb</a>:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="dcd4" class="ln lo ik lj b fv lp lq l lr ls">&lt;% if ENV["DISABLE_TURBOLINKS"].blank? %&gt;<br/>  &lt;% require_asset "turbolinks" %&gt;<br/>&lt;% end %&gt;</span></pre><p id="c36e" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">react_on_rails使用这段代码来要求基于env变量的turbolinks。我们可以使用它轻松地禁用或启用turbolinks。</p><p id="629b" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">好了，都准备好了。</p><p id="8743" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在，如果我们想要使用静态资产，那么我们将只包含application_static文件，该文件包含webpack_bundle和任何非webpack资产。</p><p id="3a0f" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果我们使用热重装，那么我们将包括来自webpack dev server的热资产和非webpack资产，如来自application_non_webpack的turbolinks。</p><p id="386e" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj il"> 4。接下来，我们需要确保将webpack生成的文件包含在我们的</strong> <a class="ae ih" href="https://github.com/learnetto/calreact-hmr/blob/master/config/initializers/assets.rb" rel="noopener ugc nofollow" target="_blank"> <strong class="jj il">资产初始化器配置文件</strong> </a> <strong class="jj il">中。</strong></p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="e7e3" class="ln lo ik lj b fv lp lq l lr ls">type = ENV["REACT_ON_RAILS_ENV"] == "HOT" ? "non_webpack" : "static"<br/>Rails.application.config.assets.precompile +=<br/>  [<br/>    "application_#{type}.js"<br/>  ]</span></pre><p id="fc1a" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">同样，在这里，基于这个env变量，我们设置要包含在预编译资产中的文件名。</p><p id="8078" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj il"> 5。接下来，我们需要为热重装创建一个新的Procfile。</strong></p><p id="7ab1" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们把它叫做<a class="ae ih" href="https://github.com/learnetto/calreact-hmr/blob/master/Procfile.hot" rel="noopener ugc nofollow" target="_blank"> Procfile.hot </a>。请记住，它位于应用程序目录的根目录中。</p><p id="1aa9" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">它有几个过程</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="ad02" class="ln lo ik lj b fv lp lq l lr ls"># Procfile for development with hot reloading of JavaScript and CSS<br/>rails: REACT_ON_RAILS_ENV=HOT rails s -b 0.0.0.0</span><span id="d7ad" class="ln lo ik lj b fv lt lq l lr ls"># Run the hot reload server for client development<br/>hot-assets: HOT_RAILS_PORT=3500 npm run hot-assets</span></pre><p id="b2cf" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">首先是rails服务器——它用设置为<code class="eh mb mc md lj b">HOT</code>的<code class="eh mb mc md lj b">REACT_ON_RAILS_ENV</code>变量来运行它。</p><p id="9f17" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">第二个是<code class="eh mb mc md lj b">hot-assets</code>，这是一个通过webpack dev服务器在端口3500上提供热资产的脚本。</p><p id="bfbd" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这就是Procfile.hot全部完成。</p><p id="8368" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj il"> 6。我们需要将运行webpack dev服务器的</strong><a class="ae ih" href="https://github.com/learnetto/calreact-hmr/blob/master/client/server-rails-hot.js" rel="noopener ugc nofollow" target="_blank"><strong class="jj il">server-rails-hot . js</strong></a><strong class="jj il">脚本添加到我们的客户端目录中。</strong></p><p id="a727" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这个文件导入webpack、webpackdevserver和我们的热配置，然后创建一个新的dev服务器并在端口3500上运行它。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="a9c1" class="ln lo ik lj b fv lp lq l lr ls">import webpack from 'webpack';<br/>import WebpackDevServer from 'webpack-dev-server';</span><span id="9b1c" class="ln lo ik lj b fv lt lq l lr ls">import webpackConfig from './webpack.client.rails.hot.config';</span><span id="66c7" class="ln lo ik lj b fv lt lq l lr ls">const hotRailsPort = process.env.HOT_RAILS_PORT || 3500;</span><span id="d12e" class="ln lo ik lj b fv lt lq l lr ls">const compiler = webpack(webpackConfig);</span><span id="630d" class="ln lo ik lj b fv lt lq l lr ls">const devServer = new WebpackDevServer(compiler, {<br/>  contentBase: `<a class="ae ih" href="http://lvh.me:${hotRailsPort}`" rel="noopener ugc nofollow" target="_blank">http://lvh.me:${hotRailsPort}`</a>,<br/>  publicPath: webpackConfig.output.publicPath,<br/>  hot: true,<br/>  inline: true,<br/>  historyApiFallback: true,<br/>  quiet: false,<br/>  noInfo: false,<br/>  lazy: false,<br/>  stats: {<br/>    colors: true,<br/>    hash: false,<br/>    version: false,<br/>    chunks: false,<br/>    children: false,<br/>  },<br/>});</span><span id="43d7" class="ln lo ik lj b fv lt lq l lr ls">devServer.listen(hotRailsPort, 'localhost', err =&gt; {<br/>  if (err) console.error(err);<br/>  console.log(<br/>    `=&gt; 🔥  Webpack development server is running on port ${hotRailsPort}`<br/>  );<br/>});</span></pre><p id="72da" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">npm脚本需要使用该文件。这是拼图中最后缺失的一块。</p><p id="c112" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">7。让我们在两个package.json文件中添加一些脚本，让npm运行我们的热重装代码</p><p id="507a" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">先来做根目录下的<a class="ae ih" href="https://github.com/learnetto/calreact-hmr/blob/master/package.json" rel="noopener ugc nofollow" target="_blank">包。</a></p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="9886" class="ln lo ik lj b fv lp lq l lr ls">"scripts": {<br/>    "postinstall": "cd ./client &amp;&amp; npm install",<br/>    "build:clean": "rm -r app/assets/webpack/* || true",<br/>    "build:dev:client": "(cd client &amp;&amp; npm run build:dev:client --silent)",<br/>    "hot-assets": "(cd client &amp;&amp; npm run hot-assets)"<br/>  }</span></pre><p id="67d9" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">build:dev:client脚本是针对静态资产的，我们一会儿就会看到。</p><p id="9a14" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">但是热资产是我们热重装所需要的。</p><p id="8a49" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">它被放入客户端目录，npm运行另一个名为hot-assets的脚本。</p><p id="1345" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在让我们将它添加到<a class="ae ih" href="https://github.com/learnetto/calreact-hmr/blob/master/client/package.json" rel="noopener ugc nofollow" target="_blank">客户端包文件</a>中:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="0e38" class="ln lo ik lj b fv lp lq l lr ls">"scripts": {<br/>    "build:test": "npm run build:client &amp;&amp; npm run build:server",<br/>    "build:client": "webpack --config webpack.client.rails.build.config.js",<br/>    "build:dev:client": "webpack -w --config webpack.client.rails.build.config.js",<br/>    "hot-assets": "babel-node server-rails-hot.js"<br/>  },</span></pre><p id="39b4" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">因此，在这里您可以看到hot-assets脚本使用我们之前设置的server-rails-hot.js文件运行babel-node(babel提供的命令行工具)。</p><p id="808c" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这就是我们需要设置的一切，以使我们的javascript热重载工作。</p><p id="e0fe" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在让我们来看看它的实际效果吧！</p><p id="e581" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我们去终端用我们的新Procfile激发foreman。hot:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="764b" class="ln lo ik lj b fv lp lq l lr ls">$ foreman start -f Procfile.hot</span></pre><figure class="le lf lg lh fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff me"><img src="../Images/29b543d00dc716338d132b9448777cbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a_E5nAl1wlzXge-PsQ64fA.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">foreman start -f Procfile.hot</figcaption></figure><p id="be92" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">您可以看到Webpack开发服务器正在端口3500上运行</p><p id="35e0" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们的包编译成功了。</p><p id="f996" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在让我们在浏览器中测试我们的应用程序。</p><p id="a2cc" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">为了测试热重装，我将把我的代码编辑器放在浏览器旁边，您将看到我所做的实时更改自动出现在浏览器中。</p><figure class="le lf lg lh fq hw fe ff paragraph-image"><a href="https://learnetto.com/users/hrishio/courses/the-complete-react-on-rails-5-course?utm_source=hackernoon&amp;utm_campaign=hackernoon_hmr&amp;utm_medium=hackernoon_hmr"><div class="fe ff mf"><img src="../Images/65a0a58eebc898dca074a4c6ce4d797b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2-LDUsnBY6Rdb2yuyzBnUw.gif"/></div></a><figcaption class="id ie fg fe ff if ig bd b be z ek">Changes made to React components and utilities code appear immediately in the browser 🔥</figcaption></figure><p id="091f" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果我们查看日志，我们会看到webpack dev服务器正在提供这些热更新。</p><figure class="le lf lg lh fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mg"><img src="../Images/b26b65522655a6a5d4ba68b6d690f7f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QpQLiSzeCYlngNrwcO8Tiw.png"/></div></div></figure><p id="1264" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">看看更新文件的大小。它们是几个字节。所以这相当快。</p><p id="3bd8" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">好了，这就是为开发设置的热重装。</p><p id="789c" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj il"> 8。现在，最后一件事是设置配置，以便为生产中使用的静态资产提供服务，或者如果我们不想在开发中使用实时重载。</strong></p><p id="55ba" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们需要几样东西——一个静态webpack配置和一个静态Procfile。</p><p id="5a9f" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我们先添加<a class="ae ih" href="https://github.com/learnetto/calreact-hmr/blob/master/client/webpack.client.rails.build.config.js" rel="noopener ugc nofollow" target="_blank"> webpack配置</a>:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="83bb" class="ln lo ik lj b fv lp lq l lr ls">// Run like this:<br/>// cd client &amp;&amp; npm run build:client<br/>// Note that Foreman (Procfile.dev) has also been configured to take care of this.</span><span id="5898" class="ln lo ik lj b fv lt lq l lr ls">const webpack = require('webpack');</span><span id="9c06" class="ln lo ik lj b fv lt lq l lr ls">const config = require('./webpack.client.base.config');</span><span id="4316" class="ln lo ik lj b fv lt lq l lr ls">const devBuild = process.env.NODE_ENV !== 'production';</span><span id="199a" class="ln lo ik lj b fv lt lq l lr ls">config.output = {<br/>  filename: 'webpack-bundle.js',<br/>  path: '../app/assets/webpack',<br/>  publicPath: '/assets/',<br/>};</span><span id="1f0d" class="ln lo ik lj b fv lt lq l lr ls">// See webpack.client.base.config for adding modules common to both the webpack dev server and rails</span><span id="3434" class="ln lo ik lj b fv lt lq l lr ls">config.module.loaders.push(<br/>  {<br/>    test: /\.jsx?$/,<br/>    loader: 'babel-loader',<br/>    exclude: /node_modules/,<br/>  },<br/>  {<br/>    test: require.resolve('react'),<br/>    loader: 'imports?shim=es5-shim/es5-shim&amp;sham=es5-shim/es5-sham',<br/>  },<br/>  {<br/>    test: require.resolve('jquery-ujs'),<br/>    loader: 'imports?jQuery=jquery',<br/>  }<br/>);</span><span id="28ea" class="ln lo ik lj b fv lt lq l lr ls">config.plugins.push(<br/>  new webpack.optimize.DedupePlugin()<br/>);</span><span id="b260" class="ln lo ik lj b fv lt lq l lr ls">if (devBuild) {<br/>  console.log('Webpack dev build for Rails');<br/>  config.devtool = 'eval-source-map';<br/>} else {<br/>  console.log('Webpack production build for Rails');<br/>}</span><span id="e5e9" class="ln lo ik lj b fv lt lq l lr ls">module.exports = config;</span></pre><p id="4287" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我使用了react_on_rails spec/dummy示例中的web pack . client . rails . build . config . js文件，并将其简化为只包含我们需要的部分。</p><p id="44d2" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">与hot webpack配置类似，它建立在基本配置的基础上。它设置输出文件名并添加我们需要的加载程序。</p><p id="1bc4" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在让我们添加一个<a class="ae ih" href="https://github.com/learnetto/calreact-hmr/blob/master/Procfile.static" rel="noopener ugc nofollow" target="_blank"> Procfile </a>:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="f743" class="ln lo ik lj b fv lp lq l lr ls"># Run Rails without hot reloading (static assets).<br/>rails: REACT_ON_RAILS_ENV= rails s -b 0.0.0.0</span><span id="bf31" class="ln lo ik lj b fv lt lq l lr ls"># Build client assets, watching for changes.<br/>rails-client-assets: sh -c 'npm run build:dev:client'</span><span id="cd9e" class="ln lo ik lj b fv lt lq l lr ls"># Build server assets, watching for changes. Remove if not server rendering.<br/>#rails-server-assets: sh -c 'npm run build:dev:server'</span></pre><p id="0d3f" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们需要最上面的两个过程，一个用于rails，另一个用于服务资产。</p><p id="b1ee" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">最后一个过程是服务器渲染，我已经注释掉了。</p><p id="09d9" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">rails-client-assets脚本运行我们之前在package.json中定义的<code class="eh mb mc md lj b">build:dev:client</code>，如下所示:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="bc98" class="ln lo ik lj b fv lp lq l lr ls">"build:dev:client": "webpack -w --config webpack.client.rails.build.config.js",</span></pre><p id="e3d3" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">它使用我们刚刚创建的构建配置文件运行webpack。</p><p id="3158" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">好了，这就是生产的设置。</p><p id="70fb" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们可以通过用Procfile.static运行foreman来测试它:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="7955" class="ln lo ik lj b fv lp lq l lr ls">$ foreman start -f Procfile.static</span></pre><p id="f856" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们将不再在日志中获得webpack dev服务器消息，我们将只让rails应用程序在端口5000上运行。</p><p id="40cb" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在，如果我们对组件进行更改，它不会自动出现在浏览器中。我们需要手动重新加载页面才能看到变化。</p><p id="d90b" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这就是使用热模块替换热重装javascript资产！</p><blockquote class="mh mi mj"><p id="e931" class="jh ji mk jj b jk jl jm jn jo jp jq jr ml jt ju jv mm jx jy jz mn kb kc kd ke hn dt translated">💚 💚如果你觉得这个教程有用，请点击绿色的心。💚💚</p></blockquote><p id="200b" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">哦，别忘了<a class="ae ih" href="https://learnetto.com/users/hrishio/courses/the-complete-react-on-rails-5-course?utm_source=hackernoon&amp;utm_campaign=hackernoon_hmr&amp;utm_medium=hackernoon_hmr" rel="noopener ugc nofollow" target="_blank">看看我的课程</a>，里面有本课完整详细的视频和3个多小时的课程，将带你从零到英雄使用React with Rails。</p><blockquote class="kf"><p id="0996" class="kg kh ik bd ki kj kk kl km kn ko ke ek translated">这是来自<a class="ae ih" href="https://learnetto.com/users/hrishio/courses/the-complete-react-on-rails-5-course?utm_source=hackernoon&amp;utm_campaign=hackernoon_hmr&amp;utm_medium=hackernoon_hmr" rel="noopener ugc nofollow" target="_blank">完整的React on Rails课程</a>的一课，该课程帮助Ruby on Rails开发人员变得非常擅长使用React.js在Rails中构建ui。它只适用于那些在生产中认真使用React的人，所以<a class="ae ih" href="https://learnetto.com/users/hrishio/courses/the-complete-react-on-rails-5-course?utm_source=hackernoon&amp;utm_campaign=hackernoon_hmr&amp;utm_medium=hackernoon_hmr" rel="noopener ugc nofollow" target="_blank">不要点击这个链接</a>，除非你是其中之一。</p></blockquote><div class="mo mp mq mr ms ku"><a href="https://learnetto.com/users/hrishio/courses/the-complete-react-on-rails-5-course?utm_source=hackernoon&amp;utm_campaign=hackernoon_hmr&amp;utm_medium=hackernoon_hmr" rel="noopener  ugc nofollow" target="_blank"><div class="kv ab ej"><div class="kw ab kx cl cj ky"><h2 class="bd il fv z el kz eo ep la er et ij dt translated">Rails 5课程的完整反应</h2><div class="lb l"><h3 class="bd b fv z el kz eo ep la er et ek translated">Max Rose-Collins，RankTracker的联合创始人和Ruby工程师你很了解Rails。你已经用了一段时间了，在…</h3></div><div class="lc l"><p class="bd b gc z el kz eo ep la er et ek translated">learnetto.com</p></div></div><div class="lv l"><div class="lw l lx ly lz lv ma ib ku"/></div></div></a></div><div class="le lf lg lh fq ab cb"><figure class="mt hw mu mv mw mx my paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="mt hw mu mv mw mx my paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="mt hw mu mv mw mx my paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="mh mi mj"><p id="f922" class="jh ji mk jj b jk jl jm jn jo jp jq jr ml jt ju jv mm jx jy jz mn kb kc kd ke hn dt translated"><a class="ae ih" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae ih" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae ih" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae ih" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jh ji mk jj b jk jl jm jn jo jp jq jr ml jt ju jv mm jx jy jz mn kb kc kd ke hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ih" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ih" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="le lf lg lh fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mz"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="le lf lg lh fq hw"><div class="bz el l di"><div class="na nb l"/></div></figure></div></div>    
</body>
</html>