<html>
<head>
<title>Quick and dirty tricks for debugging Javascript 🕵</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">调试Javascript 🕵的快速和肮脏的技巧</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/quick-and-dirty-tricks-for-debugging-javascript-d0e911c3afa?source=collection_archive---------7-----------------------#2017-04-10">https://medium.com/hackernoon/quick-and-dirty-tricks-for-debugging-javascript-d0e911c3afa?source=collection_archive---------7-----------------------#2017-04-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="9c80" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在理想的情况下，每段代码都有多个测试，任何回归都会立即指向一个特定的提交，并且所有的提交都有合理的大小和合理的消息。</p><p id="c185" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我不住在那里(这可能部分是我自己的错)，你可能也不住在那里。这里有一些对我很有用的调试技巧，我希望它们对你也有用…只是不要不小心犯了这些错误。</p><h1 id="934c" class="jp jq hu bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">这是什么？</h1><p id="d0bb" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">我们都看过混乱的变量、操作和方法调用，并想知道— <em class="ks"> #@ &amp; </em>？</p><p id="29f8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">假设您发现了一个错误，其中<code class="eh kt ku kv kw b">foo</code>的值有时是不正确的:</p><figure class="kx ky kz la fq lb"><div class="bz el l di"><div class="lc ld l"/></div></figure><p id="cfae" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我假设每个人都知道如何使用断点和<code class="eh kt ku kv kw b">debugger</code>。这些都是很好的工具，但有时有问题的代码可能位于很难放置断点的地方，或者您可能不想为暂停脚本执行而烦恼。</p><p id="2cac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一种快速而简单的方法是，在不需要对代码进行重大重组的情况下，记录下这些值:</p><figure class="kx ky kz la fq lb"><div class="bz el l di"><div class="lc ld l"/></div></figure><p id="d913" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是因为<code class="eh kt ku kv kw b">console.log</code>返回<code class="eh kt ku kv kw b">undefined</code>，而<code class="eh kt ku kv kw b">undefined || val</code>返回<code class="eh kt ku kv kw b">val</code>。可怕，丑陋，但男孩很快！无论如何你都不会签入这些代码，这有什么关系呢？</p><p id="bb8e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但问题是，当您调试和调整代码时，您可能会忘记同步原始值和记录的内容。</p><p id="59c2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">来了一个效用函数！</p><figure class="kx ky kz la fq lb"><div class="bz el l di"><div class="lc ld l"/></div></figure><p id="455b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在您可以这样做:</p><figure class="kx ky kz la fq lb"><div class="bz el l di"><div class="lc ld l"/></div></figure><p id="e712" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">也许您想用一些东西来标记日志，以便区分它们:</p><figure class="kx ky kz la fq lb"><div class="bz el l di"><div class="lc ld l"/></div></figure><h1 id="5af7" class="jp jq hu bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">这叫什么？</h1><p id="478d" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">在我关于在React 中使用AngularJS (Angular 1)组件的文章<a class="ae le" rel="noopener" href="/appifycanada/angular-components-in-react-2c929130f995">中，我写了我们如何遇到浏览器地址栏偶尔被重置的问题。我知道Angular最有可能调用的是<code class="eh kt ku kv kw b">history.pushState</code>，但是在我想出如何修复它之前，我仍然需要找出它在哪里以及为什么要这样做。</a></p><p id="ceb9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我是这样做的:</p><figure class="kx ky kz la fq lb"><div class="bz el l di"><div class="lc ld l"/></div></figure><p id="5a8c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">每当有东西调用<code class="eh kt ku kv kw b">history.pushState</code>，它就会得到我修改过的版本，打印出堆栈跟踪，让我知道调用者是谁。</p><p id="1424" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你可以把它抽象成一个可以应用到其他地方的效用函数。<em class="ks">(根据</em> <a class="ae le" rel="noopener" href="/@greglockwood/nice-succinct-article-with-some-handy-js-debugging-tips-54784d6c4e80"> <em class="ks">格雷格·洛克伍德</em> </a> <em class="ks">的建议更新)</em></p><figure class="kx ky kz la fq lb"><div class="bz el l di"><div class="lc ld l"/></div></figure><p id="a345" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们在<code class="eh kt ku kv kw b">console.log</code>上试试</p><figure class="kx ky kz la fq lb"><div class="bz el l di"><div class="lc ld l"/></div></figure><h1 id="d3ad" class="jp jq hu bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">这是什么设置/覆盖的？</h1><p id="35b1" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">有很多次，我不得不处理多个版本的Lodash和下划线相互覆盖的情况。</p><p id="dbf3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了弄清楚为什么会发生这种情况，可以使用类似的技巧，通过利用<code class="eh kt ku kv kw b">Object.defineProperty</code>来查看属性何时被赋予新值。</p><figure class="kx ky kz la fq lb"><div class="bz el l di"><div class="lc ld l"/></div></figure><p id="d8e1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">又来了一个效用函数</p><figure class="kx ky kz la fq lb"><div class="bz el l di"><div class="lc ld l"/></div></figure><p id="bd83" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在让我们尝试覆盖<code class="eh kt ku kv kw b">_</code></p><figure class="kx ky kz la fq lb"><div class="bz el l di"><div class="lc ld l"/></div></figure><h1 id="b4d8" class="jp jq hu bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dt translated">错过什么了吗？</h1><p id="3387" class="pw-post-body-paragraph ir is hu it b iu kn iw ix iy ko ja jb jc kp je jf jg kq ji jj jk kr jm jn jo hn dt translated">请给我<a class="ae le" href="https://twitter.com/CheapSteak" rel="noopener ugc nofollow" target="_blank"> @CheapSteak </a>留言或发推文，让我知道你发现的任何其他有用的调试技巧</p><p id="aab0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">非常感谢<a class="ae le" href="https://twitter.com/jephuff" rel="noopener ugc nofollow" target="_blank"> Jeffrey Burt </a>和<a class="ae le" href="https://twitter.com/AlfalfaAnne" rel="noopener ugc nofollow" target="_blank"> Anne Thomas </a>的校对和反馈，以及<a class="ae le" rel="noopener" href="/@greglockwood/nice-succinct-article-with-some-handy-js-debugging-tips-54784d6c4e80"> Greg Lockwood </a>关于返回<code class="eh kt ku kv kw b">traceFn</code>中<code class="eh kt ku kv kw b">fn.apply</code>的值并将这些作为<a class="ae le" href="https://developers.google.com/web/tools/chrome-devtools/snippets" rel="noopener ugc nofollow" target="_blank">片段</a>包含在Chrome Dev Tools中的建议。</p><p id="5c9b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">感谢阅读😄</p><p id="996d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你喜欢这篇文章，你可能会发现我的比较npm包下载的工具很有用——<a class="ae le" href="https://npmcharts.com/" rel="noopener ugc nofollow" target="_blank">npmcharts.com</a></p><p id="f25f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是一个比较所有React UI组件库的样本图表—</p><figure class="kx ky kz la fq lb"><div class="bz el l di"><div class="lf ld l"/></div></figure></div><div class="ab cl lg lh hc li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hn ho hp hq hr"><h2 id="8d7c" class="ln jq hu bd jr lo lp lq jv lr ls lt jz jc lu lv kd jg lw lx kh jk ly lz kl ma dt translated"><a class="ae le" href="http://eepurl.com/cVFJB1" rel="noopener ugc nofollow" target="_blank">注册我的时事通讯，在你的收件箱里收到新文章</a></h2></div></div>    
</body>
</html>