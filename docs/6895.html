<html>
<head>
<title>This “location hack” helps you engage with your users</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">这种“定位黑客”可以帮助你吸引用户</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/this-location-hack-helps-you-engage-with-your-users-15ce6f04bc94?source=collection_archive---------15-----------------------#2017-10-09">https://medium.com/hackernoon/this-location-hack-helps-you-engage-with-your-users-15ce6f04bc94?source=collection_archive---------15-----------------------#2017-10-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/4d21f374f8b36ee7c704f4f76f52e809.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E2DhNGOpm71nrVH2w1-CIQ.jpeg"/></div></div></figure><p id="ce70" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你面前有两个相似的产品。唯一的区别是它们是在哪里建造的。你选哪一个？</p><p id="1a39" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">当然是你们国家的那个。</strong>如果你有选择的余地，你会很乐意购买本国制造的产品。这让你感觉很好。</p><p id="963b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae ka" href="https://hackernoon.com/tagged/digital" rel="noopener ugc nofollow" target="_blank">数码</a>货呢？最近看到很多公司骄傲地展示自己的位置。例，<a class="ae ka" href="https://en.agricool.co/" rel="noopener ugc nofollow" target="_blank"> Agricool </a>:</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kb"><img src="../Images/8aadba38768465b1eb266d2d5d1dc785.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oThZ6dkyQxDOSVkq1D6Lsg.png"/></div></div></figure><p id="4bd3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当我创作<a class="ae ka" href="https://www.botletter.com" rel="noopener ugc nofollow" target="_blank"> Botletter </a>时，我也想自豪地展示“用爱在法国制造”。问题是，作为一个不断从一个国家迁移到另一个国家的数字流浪者，把法国作为公司的所在地实在没有意义。</p><h1 id="a26e" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">如果每个用户都看到自己的国家显示在页脚会怎么样？🤔</h1><p id="b82f" class="pw-post-body-paragraph jc jd hu je b jf le jh ji jj lf jl jm jn lg jp jq jr lh jt ju jv li jx jy jz hn dt translated">然后，我想到了编写一个脚本来显示“用爱在{{user_country}}”公式的用户位置。</p><p id="5072" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这可以吸引游客的注意力，提高转化率。目标是鼓励人们联系我，并开始关于Botletter的讨论。这样，我将更好地了解谁是我的访问者，他们是如何发现Botletter的，以及他们对该产品的期望是什么。</p><p id="36d3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">不利的一面是有伤害别人的风险，让他们觉得我在愚弄他们……我稍后会讨论实验的结果。</p><h1 id="5e67" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">如何用Ruby on Rails实现它</h1><p id="790c" class="pw-post-body-paragraph jc jd hu je b jf le jh ji jj lf jl jm jn lg jp jq jr lh jt ju jv li jx jy jz hn dt translated">在你应用程序中创建这样的“黑客”真的很容易。我将使用Rails作为一个例子，但我相信您可以使用其他技术来实现。</p><p id="0f54" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先，我们希望使用访问者的IP地址来定位他们。<a class="ae ka" href="https://github.com/alexreisner/geocoder" rel="noopener ugc nofollow" target="_blank"> Geocoder </a>是一个完整的Ruby地理编码解决方案。它将允许我们使用IP地址找到位置。</p><p id="19de" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">像任何其他Ruby gem一样安装Geocoder:</p><pre class="kc kd ke kf fq lj lk ll lm aw ln dt"><span id="45be" class="lo kh hu lk b fv lp lq l lr ls">gem install geocoder</span></pre><p id="7240" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">并在命令提示符下运行:</p><pre class="kc kd ke kf fq lj lk ll lm aw ln dt"><span id="e06b" class="lo kh hu lk b fv lp lq l lr ls">bundle install</span></pre><p id="37d2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Geocoder向标准的<code class="eh lt lu lv lk b">Rack::Request</code>对象添加了<code class="eh lt lu lv lk b">location</code>和<code class="eh lt lu lv lk b">safe_location</code>方法，因此您可以通过IP地址轻松查找任何HTTP请求的位置。</p><p id="0256" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们希望在呈现视图之前检查用户的位置。因此，我们在应用程序控制器中添加了一个<code class="eh lt lu lv lk b">before action</code>，根据用户的IP地址创建了一个用户位置变量。这样，用户的位置将在我们所有的视图中可用。</p><pre class="kc kd ke kf fq lj lk ll lm aw ln dt"><span id="bd1e" class="lo kh hu lk b fv lp lq l lr ls">before_action :loc_function</span><span id="4e12" class="lo kh hu lk b fv lw lq l lr ls">def loc_function<br/>    # We check if geocoder finds the location<br/>    if request.location<br/>      result = request.location<br/>      <a class="ae ka" href="http://twitter.com/loc" rel="noopener ugc nofollow" target="_blank">@loc</a> = result.country<br/>    # If geocoder does not find it, we display 'France'<br/>    else<br/>      <a class="ae ka" href="http://twitter.com/loc" rel="noopener ugc nofollow" target="_blank">@loc</a> = "France"<br/>    end<br/>end</span></pre><p id="c63b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在页脚中，我们现在可以显示带有用户位置的位置公式:</p><pre class="kc kd ke kf fq lj lk ll lm aw ln dt"><span id="66ad" class="lo kh hu lk b fv lp lq l lr ls">&lt;span&gt;Made with ❤ in &lt;%= <a class="ae ka" href="http://twitter.com/loc" rel="noopener ugc nofollow" target="_blank">@loc</a> %&gt;&lt;/span&gt;</span></pre><p id="d4c3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">瞧啊。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lx"><img src="../Images/9f31f9b2ca7e4bc89628d5b130807f2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2MSeTq543TpFK9PDEoZ77g.png"/></div></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">Botletter’s footer using different locations with a CDN</figcaption></figure><h1 id="205f" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">实验结果和思考</h1><p id="5dd2" class="pw-post-body-paragraph jc jd hu je b jf le jh ji jj lf jl jm jn lg jp jq jr lh jt ju jv li jx jy jz hn dt translated">到目前为止，效果真的很好。但是，这种“伎俩”也能得罪人。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mc"><img src="../Images/aa70c4aecafcf997c01707f95d7d4b63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BH1gNGJVm9CzgTFjPcA_vQ.png"/></div></div></figure><p id="6365" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后，真的很少有人抱怨这个黑客…为了避免伤害到别人，我在僵尸信的FAQ中添加了一些解释。我委婉地解释了我这样做的原因:</p><blockquote class="md me mf"><p id="a596" class="jc jd mg je b jf jg jh ji jj jk jl jm mh jo jp jq mi js jt ju mj jw jx jy jz hn dt translated">作为一个数字流浪者，我周游世界，在页脚显示一个特定的位置对我来说没有意义。这就是为什么我决定显示访问者的位置。这是和像你这样有趣的人联系的好方法！；)</p></blockquote><p id="21e4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通常，人们会很好地接受它，并被它逗乐。然后，这是询问他们如何发现Botletter以及他们对该产品有何看法的最佳时机。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mk"><img src="../Images/4c43ce393b438d929d77435b3f68acfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zXrt-G9G-AgE0LlaJjwb9g.png"/></div></div></figure><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ml"><img src="../Images/85eb78bc9789e5431ec32c83fdecf3e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CgqZwEk_SIRTHpa-Yn6w6g.png"/></div></div></figure><p id="f22d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这种“定位黑客”创造了许多本来不会发生的对话。每天都有人通过<a class="ae ka" href="http://crisp.im/en/" rel="noopener ugc nofollow" target="_blank"> Crisp </a>聊天联系我，问我我们是不是他们国家的。我与来自世界各地的了不起的企业家、营销人员、<a class="ae ka" href="https://hackernoon.com/tagged/software" rel="noopener ugc nofollow" target="_blank">软件</a>工程师交谈。</p><p id="2698" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果我没有用普通页脚测试它，因此不知道对主页转化率的影响，对我从访问者那里获得的信息量的影响是巨大的。</p><p id="ffca" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> <em class="mg">如何看待这种“外景黑”？喜欢的话，别忘了鼓掌；)</em> </strong></p><p id="db2c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">更新</p><p id="5835" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Mathieu Le Roux给了我一个很好的反馈，让配方不那么不诚实。我把它改成了“用爱为{{user_country}}”制作。</p><p id="3d5e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="mg">我是</em> <a class="ae ka" href="https://www.botletter.com" rel="noopener ugc nofollow" target="_blank"> <em class="mg"> Botletter的创始人，这是一个允许你在Facebook Messenger</em></a><em class="mg">上发送时事通讯和更新的在线服务。看看吧！</em></p><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="mo mp l"/></div></figure></div></div>    
</body>
</html>