<html>
<head>
<title>Let's Add Some Sugar to Javascript with Jewell</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们用朱厄尔给Javascript加点糖</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/lets-add-some-sugar-to-javascript-with-jewell-d33d282fdee9?source=collection_archive---------20-----------------------#2017-10-10">https://medium.com/hackernoon/lets-add-some-sugar-to-javascript-with-jewell-d33d282fdee9?source=collection_archive---------20-----------------------#2017-10-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="72d6" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">朱厄尔给Javascript带来了高阶消息</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/05f540225e10a507e9b20d7a3ea3355b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*erqhxryheRRcc4WV9K6YTA.jpeg"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Jewell — Javascript Syntax Sugar for Higher-Order Messaging</figcaption></figure><p id="c3e9" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><em class="kv">如果想直接跳转到动作(GitHub repo)，</em> <a class="ae kw" href="https://github.com/pedsmoreira/jewell" rel="noopener ugc nofollow" target="_blank"> <em class="kv">点击这里</em> </a> <em class="kv">。</em></p></div><div class="ab cl kx ky hc kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hn ho hp hq hr"><p id="4c91" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">在我的职业生涯中，我曾使用过许多语言和框架，并从每一种语言和框架中学到了很多东西。</p><p id="4acf" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">最近我一直在探索Javascript，有一天，在使用数组时，我想起了Laravel框架的一个非常酷的特性，叫做高阶消息传递。它允许你创建非常有表现力的1 liners，比如:<em class="kv"> (PHP代码)</em></p><p id="8f80" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><code class="eh le lf lg lh b">$employees-&gt;filter-&gt;retired-&gt;each-&gt;sendPayment();</code></p><p id="3b38" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">通过一些研究，我发现也有一些使用Ruby的实现，这是我最喜欢的语言之一。Ruby的语法非常灵活，所以高阶消息对它来说看起来非常自然。使用<a class="ae kw" href="http://natpryce.com/articles/000535.html" rel="noopener ugc nofollow" target="_blank"> Nat Pryce的实现</a>，下面是相同的代码在Ruby中的样子。</p><p id="f339" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><code class="eh le lf lg lh b">employees.where.retired?.do.sendPayment()</code></p></div><div class="ab cl kx ky hc kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hn ho hp hq hr"><h2 id="e7a3" class="li lj hu bd lk ll lm ln lo lp lq lr ls ki lt lu lv km lw lx ly kq lz ma mb mc dt translated">Javascript呢？</h2><p id="026a" class="pw-post-body-paragraph jz ka hu kb b kc md iv ke kf me iy kh ki mf kk kl km mg ko kp kq mh ks kt ku hn dt translated">您可能知道，现在有很多Javascript包，所以猜猜当我研究并意识到没有Javascript的高阶消息库时，我的反应是什么？</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mi mj l"/></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek"><em class="mk">If you know a library that does that, please leave it on the comments below, I’d love to check it out. I honestly couldn’t find it on NPM/Google </em>¯\_(ツ)_/¯</figcaption></figure><p id="153b" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">因为我找不到允许我完成同样行为的库，所以我想知道这是否可能。我开始在业余时间编写一个版本，结果发现可以用ES6的一个特性Proxy来完成。\o/</p><p id="eac3" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">棘手的部分是让语法变得漂亮，并且在Javascript生态系统中有意义，而不产生怪物。几经迭代，终于得到了自己满意的版本！它看起来是这样的:</p><p id="cb36" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><code class="eh le lf lg lh b">employees.filter.retired.forEach.sendPayment();</code></p><p id="c0d5" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">和我上面给你看的例子很相似，是吧？！？现在让我们一步一步地看完整的代码示例。</p></div><div class="ab cl kx ky hc kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hn ho hp hq hr"><p id="34c0" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb hv">第0步。将朱厄尔加入你的项目</strong></p><p id="e366" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><code class="eh le lf lg lh b">npm install jewell --save</code></p><p id="4082" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb hv">第一步。</strong>导入<code class="eh le lf lg lh b">jewellPrototype</code>并将其应用到<code class="eh le lf lg lh b">Array</code>类，这样我们就可以通过原生数组方法使用高阶消息传递。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ml mj l"/></div></figure><p id="eb2e" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb hv">第二步。</strong>宣告一个阶级。在我们的情况下，它是钻石</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ml mj l"/></div></figure><p id="9ea8" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb hv">步骤三。</strong>打造一系列钻石</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ml mj l"/></div></figure><p id="fdf8" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb hv">步骤四。玩得开心</strong></p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ml mj l"/></div></figure><p id="98c5" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">注意，在我们的<code class="eh le lf lg lh b">Get all blue diamonds</code>例子中，我们调用<code class="eh le lf lg lh b">#isBlue</code>，这是因为<code class="eh le lf lg lh b">#isBlue</code>是一个函数。如果是这样的话，我们为什么不在这里叫它呢？</p><p id="8fc2" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><code class="eh le lf lg lh b">diamonds.filter.isBlue.forEach.buy()</code></p><p id="9d60" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">答案是:可以，但没必要。由于<code class="eh le lf lg lh b">isBlue</code>没有参数，朱厄尔认为应该调用它来允许链接。</p><p id="f5ee" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">除了<em class="kv">镶嵌</em>和<code class="eh le lf lg lh b">Array</code>类本身，你也可以将朱厄尔与你自己的库一起使用，这个库有操作数组或单个实例的快捷方式。</p></div><div class="ab cl kx ky hc kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hn ho hp hq hr"><p id="3145" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb hv"> ⚠警告:</strong>请记住，Jewell用一个代理替换了原来的方法，所以在交付生产之前，请确保您没有在您的应用程序中创建一些疯狂的行为或减慢一切。</p><p id="5c59" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">你可以在回购中查看更多示例<a class="ae kw" href="https://github.com/pedsmoreira/jewell" rel="noopener ugc nofollow" target="_blank">。如果您有任何问题，请在下面留下评论或在回购上提出问题。我们也非常欢迎您提出需求和建议。</a></p><p id="cd8d" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">事不宜迟，下面是GitHub回购:</p><div class="mm mn fm fo mo mp"><a href="https://github.com/pedsmoreira/jewell" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab ej"><div class="mr ab ms cl cj mt"><h2 class="bd hv fv z el mu eo ep mv er et ht dt translated">佩德斯莫雷拉/朱厄尔</h2><div class="mw l"><h3 class="bd b fv z el mu eo ep mv er et ek translated">用于高阶消息传递的jewell - Javascript语法糖</h3></div><div class="mx l"><p class="bd b gc z el mu eo ep mv er et ek translated">github.com</p></div></div><div class="my l"><div class="mz l na nb nc my nd jt mp"/></div></div></a></div></div><div class="ab cl kx ky hc kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hn ho hp hq hr"><h2 id="0576" class="li lj hu bd lk ll lm ln lo lp lq lr ls ki lt lu lv km lw lx ly kq lz ma mb mc dt translated"><strong class="ak">号外</strong></h2><p id="80b6" class="pw-post-body-paragraph jz ka hu kb b kc md iv ke kf me iy kh ki mf kk kl km mg ko kp kq mh ks kt ku hn dt translated">如果你喜欢用爱制作的软件，我想邀请你参加<a class="ae kw" href="http://gitshowcase.com/" rel="noopener ugc nofollow" target="_blank"> GitShowcase </a>。来获得你自己的摇滚明星作品集🤘。<em class="kv"> cc </em> <a class="ne nf gr" href="https://medium.com/u/f2368f957647?source=post_page-----d33d282fdee9--------------------------------" rel="noopener" target="_blank"> <em class="kv">维克托·桑托斯</em> </a></p><div class="mm mn fm fo mo mp"><a href="https://www.gitshowcase.com" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab ej"><div class="mr ab ms cl cj mt"><h2 class="bd hv fv z el mu eo ep mv er et ht dt translated">GitShowcase</h2><div class="mw l"><h3 class="bd b fv z el mu eo ep mv er et ek translated">开发人员，在即插即用产品组合中展示您的最佳项目。最棒的是，免费的。</h3></div><div class="mx l"><p class="bd b gc z el mu eo ep mv er et ek translated">www.gitshowcase.com</p></div></div><div class="my l"><div class="ng l na nb nc my nd jt mp"/></div></div></a></div></div></div>    
</body>
</html>