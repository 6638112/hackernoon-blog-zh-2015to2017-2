<html>
<head>
<title>I hate Python 2 and Python 3, but I love Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我讨厌Python 2和Python 3，但我爱Python</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/i-hate-python-2-and-python-3-but-i-love-python-20b661100819?source=collection_archive---------3-----------------------#2016-12-09">https://medium.com/hackernoon/i-hate-python-2-and-python-3-but-i-love-python-20b661100819?source=collection_archive---------3-----------------------#2016-12-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="ceb2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">尽管新版本即将推出，但人们更愿意称之为“Python 3 ”,这让它听起来像是一种不同的语言。</p><p id="85a7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">“Python 2”和“Python 3”，我都很讨厌。我爱Python！</p><p id="ba0d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我讨厌“Python 2”和“Python 3”，因为人们需要在它们之间做出选择，项目维护人员必须保持两者的兼容性，有时甚至是2.7.x和3.x的多个版本。这减慢了我最喜欢的库的开发速度。</p><p id="1cff" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">貌似Python是<strong class="it hv">不跨版本兼容</strong>，什么？是的，没错。Python的一个漂亮卖点是作为一种<strong class="it hv">跨平台语言</strong>，但是最近由于第三方库支持和一些其他因素，它变得不兼容跨版本。</p><p id="f36d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从传统Python版本升级到最新版本需要改变一些语句以及如何处理<code class="eh jp jq jr js b">str</code>或<code class="eh jp jq jr js b">Unicode</code>和其他一些小东西，像<code class="eh jp jq jr js b">2to3</code>这样的工具在95%的情况下都会这样做，但是<strong class="it hv">问题不仅仅是你的代码</strong>，你必须处理所有的第三方库，你的第三方库开发者也有同样的问题。那是流血的伤口。</p><p id="acd7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我告诉你一个可爱的小故事。</p><h1 id="5a4c" class="jt ju hu bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dt translated">可爱的小故事</h1><p id="34ab" class="pw-post-body-paragraph ir is hu it b iu kr iw ix iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo hn dt translated">当我想开始一个项目时，在讨论了堆栈应该是什么之后，我们决定我们需要:</p><ul class=""><li id="2f01" class="kw kx hu it b iu iv iy iz jc ky jg kz jk la jo lb lc ld le dt translated">姜戈</li><li id="d847" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">Django Rest框架</li><li id="a823" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">Django仓库</li><li id="f04a" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">博托</li><li id="2d54" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">Mongodb</li><li id="2e4c" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">雷迪斯</li><li id="5d6d" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">一种数据库系统</li><li id="ea96" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">枕头</li><li id="5be5" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">Python请求</li><li id="2d50" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">特维利奥</li><li id="deed" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">Gevent</li><li id="c5e8" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">格尼科恩</li><li id="47d6" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">芹菜</li><li id="8048" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">模拟的</li><li id="6561" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">Python覆盖率</li><li id="5ec1" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">构造</li><li id="e7da" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">ipdb</li></ul><p id="ecfd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">还有更多，所以我们的团队坚持使用Python 2，为什么呢？仅仅是因为我们可能需要一个只与“Python 2”兼容的第三方依赖，如果我们从“Python 3”开始，这可能会导致我们失去一只眼睛或又名金钱。</p><p id="ecb1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">除了具有“Python 3”分支的Fabric之外，上述所有令人惊叹的第三方库都可以很好地与最新版本的Python兼容。)，它们都可以在Python的最新或遗留版本上工作，而且我们还没有遇到第三方库与“Python 3”兼容的问题。</p><p id="3a25" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">尽管如此，我们还是使用了遗留版本，这让我很恼火，但是为了让我们的工作保持理智或者互相愚弄，我们编写了与“Python 3”兼容的代码。使用“Python 3”作为运行时代码库并没有什么特别的地方。</p><p id="8537" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们的CI对遗留版本和最新版本都进行了测试，我们从来不需要修改代码来与“Python 3”兼容，它就能工作。里面有魔法吗？我们只遵循<a class="ae lk" href="https://docs.python.org/3/howto/pyporting.html" rel="noopener ugc nofollow" target="_blank"> Python推荐</a>。</p><p id="a426" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">担心依赖与Python的旧版本和最新版本不兼容。</p><p id="d3ba" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">这是否意味着Python变得跨版本不兼容了？</strong></p><p id="e440" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这很可怕，我不想去想它，也许我反应过度了，也许我把这件事看得很严重或者小题大做了。</p><p id="cdf7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">问题是，支持遗留代码只在几年内是好的，但不是十年，Python 3在2008年问世，人们仍然怀疑或懒惰继续前进。</p><p id="7362" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">放弃Python遗产应该在很久以前就开始了，但是现在还不算太晚，我们需要开始并鼓励其他人放弃它并继续前进。我们阻碍了发展。</p><p id="4b72" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在Python中有很多令人敬畏的新特性，人们选择其他语言来制作他们的下一个项目。</p><ul class=""><li id="f491" class="kw kx hu it b iu iv iy iz jc ky jg kz jk la jo lb lc ld le dt translated">协同程序异步等待。</li><li id="134f" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated"><a class="ae lk" rel="noopener" href="/@Alir3z4/python-is-great-for-large-code-base-992fa9233066">类型检查和提示</a>。</li><li id="3725" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">静态静态分析工具。</li><li id="2242" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">统一码</li><li id="fa16" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">更好的异常处理</li><li id="5e66" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">字符串格式</li><li id="cfff" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">字节与字符串</li><li id="abfb" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">更好的多线程</li><li id="8298" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">等等…</li></ul><p id="9924" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个清单还在继续…</p><p id="85fc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">用最新版本的Python开始你的下一个项目，鼓励和推动第三方库开发人员迁移到最新版本，如果他们不想或不能，自己动手，这是开源的！</p><p id="447d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">仅选择传统版本，并且仅在由于供应商锁定或严重依赖兼容性而没有其他选择的情况下。</strong></p><p id="e0d3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">“Python 2”的代码不仅仅是“代码”，它是一个与旧版本“Python”一起工作的代码，一个没有更新的遗留代码，如果你写了一个Python(作为最新版本)不能运行的代码，那个代码被破坏，那个代码不再工作。它必须更新，升级到最新版本。</p><p id="c798" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我知道当前的依赖性和第三方模块是这种情况下的主要参与者，但是拥有两种独立的语言值得吗？或者这是一个好的借口吗？</p><p id="b1e8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是一个两难的选择，一个令人讨厌的选择。在一个系统上有两个Python运行时很奇怪。用virtualenv来掩盖是行不通的。</p><h1 id="7596" class="jt ju hu bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dt translated">PyBabel崛起！</h1><p id="d288" class="pw-post-body-paragraph ir is hu it b iu kr iw ix iy ks ja jb jc kt je jf jg ku ji jj jk kv jm jn jo hn dt translated">如果我们继续朝这个方向发展，有一天我们可能不得不使用另一种工具来编写一种具有类似Python的语法的语言，以产生“Python 2”和“Python 3”兼容的源代码，并在以后支持“Python 4”，人们将不再编写“Python ”,而是编写一种类似“Python”的语言，它可以编译或传输不同的Python实现将运行的内容。</p><p id="a7ee" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">那时候我们要考虑一种语言，可以编译成可以运行的东西:</p><ul class=""><li id="e75f" class="kw kx hu it b iu iv iy iz jc ky jg kz jk la jo lb lc ld le dt translated">Python 2</li><li id="ace0" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">Python 3</li><li id="4031" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">Python 4</li><li id="e436" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">PyPy</li><li id="4f27" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">皮斯顿</li><li id="f2d7" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">Jython</li><li id="79bf" class="kw kx hu it b iu lf iy lg jc lh jg li jk lj jo lb lc ld le dt translated">IronPython</li></ul><p id="d7e4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">“Python 2”和“Python 3”之间的距离可能会导致这种情况。谁知道呢，像<code class="eh jp jq jr js b">2to3</code>这样的东西可能只是这类工具的开始。</p><p id="c82e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">不要让Python来]跨版本不兼容。</p><blockquote class="ll lm ln"><p id="d6e4" class="ir is lo it b iu iv iw ix iy iz ja jb lp jd je jf lq jh ji jj lr jl jm jn jo hn dt translated"><a class="ae lk" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae lk" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae lk" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae lk" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is lo it b iu iv iw ix iy iz ja jb lp jd je jf lq jh ji jj lr jl jm jn jo hn dt translated">要了解更多信息，请<a class="ae lk" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">阅读我们的“关于”页面</a>、<a class="ae lk" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书上点赞/给我们发消息</a>，或者简单地说，<a class="ae lk" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ir is lo it b iu iv iw ix iy iz ja jb lp jd je jf lq jh ji jj lr jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae lk" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae lk" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote></div></div>    
</body>
</html>