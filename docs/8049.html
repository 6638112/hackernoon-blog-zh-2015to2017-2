<html>
<head>
<title>Creating a Lorem Ipsum Generator with Node and Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Node和Express创建Lorem Ipsum生成器</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/creating-a-lorem-ipsum-generator-with-node-and-express-9e1af0b31c86?source=collection_archive---------3-----------------------#2017-11-17">https://medium.com/hackernoon/creating-a-lorem-ipsum-generator-with-node-and-express-9e1af0b31c86?source=collection_archive---------3-----------------------#2017-11-17</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/9700bbd4aca61dddda3164caaeca8599.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DYHa-x7eWM_zuSfliAdeUw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">A look at the lorem ipsum application I created, based on the Stranger Things series</figcaption></figure><p id="b4f7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">几个月前，我制作了一个lorem ipsum应用程序，它可以将与技术相关的单词组合成句子和段落。在看了最新一季的<a class="ae ke" href="https://en.wikipedia.org/wiki/Stranger_Things" rel="noopener ugc nofollow" target="_blank">陌生人事物</a>之后，我决定改变我的应用程序，使用《陌生人事物》系列的引文，并将应用程序重命名为<a class="ae ke" href="http://stranger-ipsum.robertcooper.me/" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv">陌生人Ipsum </strong> </a>。</p><p id="07fc" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">应用程序是用<a class="ae ke" href="https://hackernoon.com/tagged/nodejs" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv"> Node.js </strong> </a>和<a class="ae ke" href="https://hackernoon.com/tagged/express" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv"> Express </strong> </a>构建的。这是一个只有一页的简单应用程序，但我想我应该解释一下应用程序的主要部分，因为它可能对那些学习Node和Express的人有所帮助。如果您遵循下面概述的步骤，您应该能够创建自己的简单lorem ipsum应用程序。</p><p id="49c3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">对于那些还不熟悉的人来说，<em class="kf"> Node.js </em>是一个<strong class="ji hv">服务器框架</strong>而<em class="kf"> Express </em>是一个用于Node 的<strong class="ji hv"> web框架。基本上，Express使Node的使用变得更加简单，因为您不必编写太多代码来让事情按照您想要的方式工作。Express也有一些很棒的文档<a class="ae ke" href="https://expressjs.com/en/4x/api.html" rel="noopener ugc nofollow" target="_blank">你可以参考</a>。</strong></p><p id="4cfd" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你想查看我的lorem ipsum应用程序的最终版本，其中包括下面描述的所有代码以及更多内容，你可以<a class="ae ke" href="http://stranger-ipsum.robertcooper.me/" rel="noopener ugc nofollow" target="_blank">现场查看</a>或者你可以在Github 上查看<a class="ae ke" href="https://github.com/Engineering-Robert/stranger-ipsum" rel="noopener ugc nofollow" target="_blank">代码。</a></p><h2 id="f581" class="kg kh hu bd ki kj kk kl km kn ko kp kq jr kr ks kt jv ku kv kw jz kx ky kz la dt translated">入门指南</h2><p id="7c89" class="pw-post-body-paragraph jg jh hu ji b jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd hn dt translated">在做任何事情之前，确保你已经在你的计算机上安装了npm和node。然后创建一个项目目录(<code class="eh lg lh li lj b">mkdir project-name</code>)，按照自己的意愿命名。完成之后，使用终端(<code class="eh lg lh li lj b">cd project-name</code>)在项目目录中导航，用命令<code class="eh lg lh li lj b">npm init -y</code>初始化一个<code class="eh lg lh li lj b"><strong class="ji hv">package.json</strong></code>文件。<code class="eh lg lh li lj b">init</code>命令初始化一个新的<code class="eh lg lh li lj b"><strong class="ji hv">package.json</strong></code>文件，<code class="eh lg lh li lj b">-y</code>选项接受所有默认参数。</p><p id="56e3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在创建任何文件之前，请确保使用以下命令从npm安装Express:<code class="eh lg lh li lj b">npm install express</code>。</p><p id="0acb" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">完成之后，在项目目录中创建主应用程序文件，并将其命名为<code class="eh lg lh li lj b"><strong class="ji hv">app.js</strong></code>。以下是进入你的<code class="eh lg lh li lj b"><strong class="ji hv">app.js</strong></code>文件的所有代码:</p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lo lp l"/></div></figure><p id="cc29" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我在代码中添加了注释来帮助理解，但是我会进一步解释。在<code class="eh lg lh li lj b"><strong class="ji hv">app.js</strong></code>顶部定义的变量<code class="eh lg lh li lj b">express</code>和<code class="eh lg lh li lj b">app</code>是创建快速应用程序所必需的。变量是一个由Express创建的对象，它有许多不同的方法可以调用。</p><p id="254d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh lg lh li lj b">routes</code>变量保存我们的应用程序路由逻辑，它在<code class="eh lg lh li lj b"><strong class="ji hv">router.js</strong></code>中定义。我过会儿会检查那件事。</p><p id="f2bd" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh lg lh li lj b">hostname</code>和<code class="eh lg lh li lj b">port</code>变量包含了应用服务器的位置信息。<code class="eh lg lh li lj b">127.0.0.1</code>是指您的本地主机，而<code class="eh lg lh li lj b">3000</code>是我选择用来服务我的应用程序的端口号。</p><p id="7b16" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh lg lh li lj b">app.use(express.static('public'))</code>告诉Express在提供静态资产(比如图像、html和css文件)时应该在哪里查找。在这种情况下，静态资产将保存在<code class="eh lg lh li lj b"><strong class="ji hv">/public</strong></code>文件夹中。</p><p id="c794" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh lg lh li lj b">app.use(routes)</code>告诉Express使用我们之前定义的<code class="eh lg lh li lj b">routes</code>变量中定义的路线。</p><p id="cb56" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">最后，<code class="eh lg lh li lj b">app.listen()</code>用于指定我们的应用程序运行的端口，并开始接受应用程序的连接。在我们的例子中，这允许我们在浏览器窗口中查看<code class="eh lg lh li lj b">localhost:3000</code>处的应用程序。</p><h2 id="4373" class="kg kh hu bd ki kj kk kl km kn ko kp kq jr kr ks kt jv ku kv kw jz kx ky kz la dt translated">index.html</h2><p id="f721" class="pw-post-body-paragraph jg jh hu ji b jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd hn dt translated">接下来，让我们创建<code class="eh lg lh li lj b"><strong class="ji hv">index.html</strong></code>文件。由于我们将静态资产目录指定为<code class="eh lg lh li lj b"><strong class="ji hv">/public</strong></code>，请确保创建一个名为<code class="eh lg lh li lj b"><strong class="ji hv">public</strong></code>的目录，并在文件夹中添加一个空白的<code class="eh lg lh li lj b"><strong class="ji hv">index.html</strong></code>和<code class="eh lg lh li lj b"><strong class="ji hv">styles.css</strong></code>文件。</p><p id="2be3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您的项目目录现在应该如下所示:</p><pre class="lk ll lm ln fq lq lj lr ls aw lt dt"><span id="272f" class="kg kh hu lj b fv lu lv l lw lx">/project-name<br/>  /public<br/>    - index.html<br/>    - styles.css<br/>  - app.js<br/>  - package.json</span></pre><p id="0ad6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">好的，在我们的<code class="eh lg lh li lj b"><strong class="ji hv">index.html</strong></code>文件中我们需要5样主要的东西:</p><ol class=""><li id="eedb" class="ly lz hu ji b jj jk jn jo jr ma jv mb jz mc kd md me mf mg dt translated">链接到我们的样式表(<code class="eh lg lh li lj b"><strong class="ji hv">styles.css</strong></code>)</li><li id="c45e" class="ly lz hu ji b jj mh jn mi jr mj jv mk jz ml kd md me mf mg dt translated">一个标题</li><li id="3e2f" class="ly lz hu ji b jj mh jn mi jr mj jv mk jz ml kd md me mf mg dt translated">描述</li><li id="5346" class="ly lz hu ji b jj mh jn mi jr mj jv mk jz ml kd md me mf mg dt translated">接受要生成的段落数的表单</li><li id="b33c" class="ly lz hu ji b jj mh jn mi jr mj jv mk jz ml kd md me mf mg dt translated">一个包含生成的lorem ipsum文本的<code class="eh lg lh li lj b">&lt;div&gt;</code></li></ol><p id="f685" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">下面是所有这些部分都就位后的<code class="eh lg lh li lj b"><strong class="ji hv">index.html</strong></code>文件的样子。</p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lo lp l"/></div></figure><p id="2f4b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我不打算用CSS来检查应用程序的样式。你可以添加你喜欢的任何风格，这样你的应用程序就有了自己的风格。</p><h2 id="0d9a" class="kg kh hu bd ki kj kk kl km kn ko kp kq jr kr ks kt jv ku kv kw jz kx ky kz la dt translated">申请途径</h2><p id="f3bc" class="pw-post-body-paragraph jg jh hu ji b jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd hn dt translated">我们的应用程序路线将在<code class="eh lg lh li lj b"><strong class="ji hv">router.js</strong></code>组织。我们需要设置两条路线:</p><ol class=""><li id="550f" class="ly lz hu ji b jj jk jn jo jr ma jv mb jz mc kd md me mf mg dt translated">a <strong class="ji hv">获取主应用程序网页的路径</strong></li><li id="3cb5" class="ly lz hu ji b jj mh jn mi jr mj jv mk jz ml kd md me mf mg dt translated">当用户输入他们想要生成的段落数量时，一个<strong class="ji hv">发布路线</strong></li></ol><p id="459e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">GET route将服务于我们的<code class="eh lg lh li lj b"><strong class="ji hv">index.html</strong></code>页面，POST route接收用户输入并将其传递给一个函数，该函数将生成所需数量的文本段落。下面是<code class="eh lg lh li lj b"><strong class="ji hv">router.js</strong></code>文件的样子:</p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lo lp l"/></div></figure><p id="9351" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">顶部定义的<code class="eh lg lh li lj b">loremIpsum</code>变量是一个由构造函数创建的对象，我们将在后面的<code class="eh lg lh li lj b"><strong class="ji hv">generator.js</strong></code>中定义。需要<code class="eh lg lh li lj b">querystring</code>模块将字符串解析为POST路由中的键/值对，需要<code class="eh lg lh li lj b">fs</code>模块获取应用程序中不同文件的内容(<code class="eh lg lh li lj b">fs</code>代表<em class="kf">文件系统</em>)。</p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lo lp l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Variable declarations in router.js</figcaption></figure><p id="6d10" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们正在从<code class="eh lg lh li lj b">express.Router</code>类创建一个<code class="eh lg lh li lj b">router</code>实例，以便正确管理我们的路由及其处理程序(路由<em class="kf">处理程序</em>是为特定路由执行的函数)。我们的第一个路由定义是到我们的主应用程序页面的GET路由(即根或<code class="eh lg lh li lj b">/</code>路由)。根路由的路由器处理器将<code class="eh lg lh li lj b"><strong class="ji hv">index.html</strong></code>的内容发送给客户端。</p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lo lp l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">GET route defined in router.js</figcaption></figure><p id="8578" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们的第二个路由定义是POST路由，它处理用户提交的输入值。输入值是一个整数，它指定要生成的所需段落数。一旦从客户端接收到数据，就调用对<code class="eh lg lh li lj b">request.on()</code>的回调，并且该数据存储在<code class="eh lg lh li lj b">inputValue</code>变量中。一旦数据进来，我们使用<code class="eh lg lh li lj b">.toString()</code>方法将其转换成可读的字符串。然后，在<code class="eh lg lh li lj b">querystring</code>的帮助下，我们将用户输入的数值存储在一个名为<code class="eh lg lh li lj b">numberOfParagraphs</code>的变量中。</p><p id="4389" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">接下来，我们生成lorem ipsum文本并存储在一个名为<code class="eh lg lh li lj b">loremIpsumText</code>的变量中。lorem ipsum文本的生成将在下一节解释。一旦我们得到了文本，我们就将index.html的内容加载到一个变量中，并用lorem ipsum文本替换占位符<code class="eh lg lh li lj b">&lt;div&gt;</code>。修改后的<code class="eh lg lh li lj b"><strong class="ji hv">index.html</strong></code>文件被发送到客户端，瞧！</p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lo lp l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">POST route defined in router.js</figcaption></figure><p id="66ec" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">别忘了在<code class="eh lg lh li lj b"><strong class="ji hv">router.js</strong></code>的底部加上<code class="eh lg lh li lj b">module.exports = router;</code>语句。这允许我们需要<code class="eh lg lh li lj b"><strong class="ji hv">app.js</strong></code>中的文件。</p><h2 id="1fbf" class="kg kh hu bd ki kj kk kl km kn ko kp kq jr kr ks kt jv ku kv kw jz kx ky kz la dt translated">生成Lorem Ipsum</h2><p id="b1e7" class="pw-post-body-paragraph jg jh hu ji b jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd hn dt translated">我设置lorem ipsum应用程序的方式是将一串引号存储在一个数组中，然后通过从数组中随机选择引号来形成一个段落。创建一个<code class="eh lg lh li lj b"><strong class="ji hv">generator.js</strong></code>文件，并将以下代码添加到该文件中:</p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lo lp l"/></div></figure><p id="e8ca" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在这个文件中，我正在创建一个名为<code class="eh lg lh li lj b">GenerateNewText()</code>的构造函数，它将创建一个具有属性<code class="eh lg lh li lj b">sentences</code>和方法<code class="eh lg lh li lj b">getRandomSentence</code>、<code class="eh lg lh li lj b">getParagraph</code>和<code class="eh lg lh li lj b">getAllParagraphs</code>的对象。从<code class="eh lg lh li lj b">GenerateNewText()</code>构造函数中创建一个名为<code class="eh lg lh li lj b">loremIpsum</code>的对象，并将其导出到文件的底部，因此在<code class="eh lg lh li lj b"><strong class="ji hv">router.js</strong></code>中可能需要它。</p><p id="4462" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">属性包含一个引用数组，它将被用来构建一个文本段落。</p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lo lp l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">The sentences property stores the strings that will be generated in our lorem ipsum app</figcaption></figure><p id="761d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我不打算解释<code class="eh lg lh li lj b">GenerateNewText()</code>中的每个方法是做什么的，因为我分配给这些方法的名字解释了它们的功能。在<code class="eh lg lh li lj b"><strong class="ji hv">router.js</strong></code>中调用<code class="eh lg lh li lj b">getAllParagraphs</code>方法，将段落数作为参数传入。</p><h2 id="ab76" class="kg kh hu bd ki kj kk kl km kn ko kp kq jr kr ks kt jv ku kv kw jz kx ky kz la dt translated">运行应用程序</h2><p id="ba7e" class="pw-post-body-paragraph jg jh hu ji b jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd hn dt translated">好了，您应该已经准备好在浏览器中运行自己的应用程序了。在您的终端中，导航到您的项目文件夹并使用<code class="eh lg lh li lj b">node app.js</code>运行应用程序。如果一切按计划进行，你应该可以在<code class="eh lg lh li lj b">localhost:3000</code>打开你的浏览器，看到你的应用程序正在运行。试着输入一些段落，点击<em class="kf">生成</em>。您应该看到页面刷新，随机生成的文本出现在底部！</p><p id="89bd" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">当我按照上面概述的步骤操作时，我的页面看起来是这样的(应用了一些样式):</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mm"><img src="../Images/6550cd212e86a835009e18c9f8a8bc22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WLl3rBheKSkWjdNX_H-Pxw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">The result of following the above steps to create your own lorem ipsum app</figcaption></figure><h2 id="55cb" class="kg kh hu bd ki kj kk kl km kn ko kp kq jr kr ks kt jv ku kv kw jz kx ky kz la dt translated">结论</h2><p id="9980" class="pw-post-body-paragraph jg jh hu ji b jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd hn dt translated">正如你从上面的图片中看到的，结果可以使用更多的样式来使应用程序看起来更好。该应用程序还可以在输出的句子中使用更多的变化。您必须向<code class="eh lg lh li lj b"><strong class="ji hv">generator.js</strong></code>中的字符串数组添加更多的项目。还有很多其他的东西可以用来改进应用程序。有一个很棒的网站<a class="ae ke" href="http://meettheipsums.com/" rel="noopener ugc nofollow" target="_blank">列出了一大堆流行的lorem ipsum应用程序，你可以从中获得灵感。</a></p><p id="2235" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你已经创建了一个lorem ipsum应用程序，请在评论中分享它，因为我很想看看它！</p></div><div class="ab cl mn mo hc mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="hn ho hp hq hr"><p id="d0f2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你觉得这篇文章很有趣，并且对web开发感兴趣，可以考虑在<a class="ae ke" href="https://twitter.com/RobertCooper_RC" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv"> Twitter </strong> </a>、<a class="ae ke" href="https://github.com/robertcoopercode" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv"> Github </strong> </a>或<a class="ae ke" href="https://www.linkedin.com/in/robert-cooper/" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv"> LinkedIn </strong> </a>上关注我。</p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="mu lp l"/></div></figure></div></div>    
</body>
</html>