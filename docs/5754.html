<html>
<head>
<title>Launch a GPU-backed Google Compute Engine instance and setup Tensorflow, Keras and Jupyter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">启动一个GPU支持的Google计算引擎实例，并设置Tensorflow、Keras和Jupyter</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/launch-a-gpu-backed-google-compute-engine-instance-and-setup-tensorflow-keras-and-jupyter-902369ed5272?source=collection_archive---------0-----------------------#2017-08-15">https://medium.com/hackernoon/launch-a-gpu-backed-google-compute-engine-instance-and-setup-tensorflow-keras-and-jupyter-902369ed5272?source=collection_archive---------0-----------------------#2017-08-15</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="33ca" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">将Udacity自动驾驶汽车Nanodegree带到谷歌云平台。分步指南。🚗</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/e948b442c9429af193df9c362393af62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D0Fi8Mjm5sPn86Po8Ec5Zg.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Countdown to the future?</figcaption></figure><h1 id="2193" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">介绍</h1><p id="d3ad" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">早在6月份，我就成为了Udacity无人驾驶汽车纳米学位项目的学生。这是一个长达九个月的课程，教你在无人驾驶汽车上工作所需的一切知识。主题包括:</p><ul class=""><li id="8ffb" class="lj lk hu it b iu iv iy iz jc ll jg lm jk ln jo lo lp lq lr dt translated">深度学习</li><li id="9153" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">计算机视觉</li><li id="7286" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">传感器融合</li><li id="cfd4" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">控制器</li><li id="9350" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">车辆运动学</li><li id="9d3e" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">汽车硬件</li></ul><p id="e4c1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们的第一个项目是检测视频馈送中的lane，我这一批中的大多数学生现在都非常深入地学习深度学习课程。</p><p id="9cbb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这些课程依赖于运行Tensorflow程序的Jupyter笔记本电脑，我从惨痛的教训中得知，我的Macbook Pro上的GeForce GT 750M及其384个CUDA内核无法满足要求。</p><p id="4c72" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">是时候去做更强壮的东西了。</p><h2 id="9da4" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">AWS vs GCP</h2><p id="3687" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">作为Udacity项目的一部分，所有学生都可以获得AWS学分。它是这门课程事实上的平台，我们所有的指南和文档都基于它。</p><p id="8c97" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然而，我是GCP的长期粉丝，我已经在我的一些个人项目中使用它，并且我一直在寻找使用它的新借口。</p><p id="8dce" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这一次，我想利用平台的这些出色特性:</p><ul class=""><li id="eb88" class="lj lk hu it b iu iv iy iz jc ll jg lm jk ln jo lo lp lq lr dt translated">具有固定价格的可抢占虚拟机。</li><li id="f106" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">持续使用折扣。</li><li id="2fb4" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">分钟计费。</li></ul><p id="e426" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我想我可能最终会有一个非常便宜的深度学习盒子，而且(主要是？)看起来我会有一次很好的学习经历和一些乐趣。</p><p id="6601" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">经过一些研究，我很快发现可抢占的虚拟机不能连接GPU，我预测的每月使用量肯定不会触发持续使用折扣。</p><p id="d6d8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">哦好吧。看来这只是为了学习和娱乐。😅</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff ml"><img src="../Images/7317c61d535f421c1b0618c2d941ec1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*adn1UPm8HuC6ggUVg4wOsA.png"/></div></div></figure><h2 id="1e72" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">定价</h2><p id="7a3c" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">在我们开始之前，先简要说明一下定价。根据本课程的需要，我选定了以下设置:</p><ul class=""><li id="afc0" class="lj lk hu it b iu iv iy iz jc ll jg lm jk ln jo lo lp lq lr dt translated">n1-标准-8 (8个vCPU，30GB内存):0.49美元/小时</li><li id="6b4f" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">特斯拉K80:0.70美元/小时</li><li id="8ba5" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">50GB永久固态硬盘:约0.012/小时</li><li id="e11f" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">区域:欧洲-西方-1b</li></ul><p id="f8ef" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">每小时总计:<strong class="it hv">$ 1.20/小时</strong> <br/>平均卡学生使用总计(15小时/周/月):<strong class="it hv"> $77 <br/> </strong>一整月总计(适用持续使用折扣):<strong class="it hv"> $784.40 </strong></p><p id="9380" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我没有做过任何基准测试，也没有试图以任何方式优化这个设置。对于这种纳米度的目的来说，它可能过于强大，或者相反不够强大，所以如果您对自己正在做的事情有更好的想法，请随意调整。😉</p></div><div class="ab cl mm mn hc mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="hn ho hp hq hr"><h1 id="579e" class="kf kg hu bd kh ki mt kk kl km mu ko kp kq mv ks kt ku mw kw kx ky mx la lb lc dt translated">指南</h1><p id="bf4a" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">让我们开始吧。</p><p id="fd9c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您的第一步将是在<a class="ae li" href="https://cloud.google.com/compute/" rel="noopener ugc nofollow" target="_blank"> Google Compute Engine </a>上使用GPU启动一个实例。这个指南有两个版本，一个是给<a class="ae li" href="#ca9b" rel="noopener ugc nofollow">网络用户界面爱好者</a>的，另一个是给<a class="ae li" href="#e6b8" rel="noopener ugc nofollow">不喜欢离开终端</a>的人的。</p><p id="6cea" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这两种情况下，本指南假设你已经有一个谷歌帐户，如果你没有，请先在这里创建一个<a class="ae li" href="https://accounts.google.com/SignUpWithoutGmail?service=cloudconsole" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="ca9b" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">启动实例— Web控制台版</h1><h2 id="9dbf" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">创建项目</h2><p id="9ce4" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">头转向<a class="ae li" href="https://console.cloud.google.com" rel="noopener ugc nofollow" target="_blank">https://console.cloud.google.com</a>。</p><p id="4d6a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你是第一次使用谷歌云，你会看到以下页面，邀请你创建你的第一个项目:</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff my"><img src="../Images/500de7137f181cee4dc6b47da8bc4f60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pwnr_bOtK0Q2e4eigRecSQ.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Google Cloud Console — homepage</figcaption></figure><p id="ba95" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="mz">好消息:如果你是第一次使用谷歌云，你还有资格获得300美元的积分！要获得此积分，请单击顶部栏中的蓝色大按钮“注册免费试用”。</em>T13】</strong></p><p id="dff6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">点击“创建”,你将进入下图所示的页面。</p><p id="4f81" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你已经是一个GCP用户，点击顶部菜单栏中的项目切换器，然后点击出现的模态右上角的“+”按钮。</p><p id="4e92" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为您的项目选择一个名称，同意服务条款(如果您同意！)并再次点击“创建”。</p><p id="35d5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你已经在使用谷歌云平台，你很可能已经有一个计费账户，所以你可以在项目创建表单上选择它。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff my"><img src="../Images/844b8967d247376b603fbff0620f28a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1JPNvFxOihSwcSQ7RZFwGw.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Google Cloud console — new project</figcaption></figure><p id="2778" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你是一个新用户，一旦你的项目被创建，你将不得不创建一个计费帐户(这有时需要一点时间，请耐心等待！).这就像当你被提示时给出你的信用卡信息和地址一样简单。</p><p id="6ffa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用菜单中的项目切换器前往项目的仪表板。</p><h2 id="77e4" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">要求增加配额</h2><p id="92bb" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">在创建第一个实例之前，您需要请求增加配额，以便将GPU连接到您的计算机。点击侧边菜单(也就是臭名昭著的汉堡菜单)，进入“IAM &amp; Admin”&gt;“Quotas”。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff my"><img src="../Images/ac803a21a28d0ecca508ddc12ac43193.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LIrsBtE6VJM53Jz4dFhtog.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Editing quotas — step 1</figcaption></figure><p id="fc48" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用表上方的“配额类型”筛选器显示所有配额。选择“所有配额”。然后使用“区域”过滤器选择您的区域。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff na"><img src="../Images/bd21307a8b07cb93219011f1679f2ee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8dKR_zZ1NvSln9XgySkPQw.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Editing quotas — step 2</figcaption></figure><p id="9a53" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在列表中查找“谷歌计算引擎API —英伟达特斯拉K80 GPUs”，选择它并点击顶部的“编辑配额”。</p><p id="2fc2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在右侧打开的菜单中，输入您的个人详细信息(如果尚未预先填写)，然后单击“下一步”。填写表格，询问您想要多少个GPU以及请求增加配额的原因，并提供以下详细信息:</p><ul class=""><li id="9fcc" class="lj lk hu it b iu iv iy iz jc ll jg lm jk ln jo lo lp lq lr dt translated">请求的GPUs</li><li id="303d" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">配额增加的原因:“使用GPU训练深度神经网络”</li></ul><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff nb"><img src="../Images/7140f6f600fdddb9c08f0f46b0ed531f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vce3a-NQmAgEER7dPN_7Cw.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Editing quotas — step 3</figcaption></figure><p id="2a00" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">过一会儿(应该很短)谷歌会批准你的请求。你现在可以进入下一步了！</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff nc"><img src="../Images/10d2f360d3ab5b1eb1c88a07c46a160f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OAWgn-yD03yO35_6IzdtKw.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Editing quotas — result</figcaption></figure><h2 id="3293" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">启动虚拟机实例</h2><p id="2e6e" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">再次点击侧边菜单，进入“计算引擎”&gt;“虚拟机实例”。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff my"><img src="../Images/0e0801469685ea4f2566b38395242ad4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*doXA3BLkNFfgV7rVVQrxHg.png"/></div></div></figure><p id="fa8a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您将收到一个通知，邀请您创建第一个实例。点击“创建”。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff my"><img src="../Images/bb497363b8a2706d552aa31761b95d6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uBXtv-63AC-8Rmw48DEEOg.png"/></div></div></figure><p id="dc1e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您已经为您的服务器选择了规格，因此该表单非常简单:</p><ul class=""><li id="0abb" class="lj lk hu it b iu iv iy iz jc ll jg lm jk ln jo lo lp lq lr dt translated">实例名:我和<code class="eh nd ne nf ng b">drive01</code>一起去，但完全由你决定！</li><li id="5b69" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">区:<code class="eh nd ne nf ng b">europe-west-1b</code>。你可以自由选择任何你想要的区域，但它必须是有GPU支持的区域。</li><li id="54f8" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">实例类型:<code class="eh nd ne nf ng b">n1-standard-8</code>，8个vCPUs，30GB内存。</li><li id="3e6d" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">单击实例类型选择旁边的“定制”,然后单击“GPU”显示GPU创建表单。使用“GPU数量”和“GPU类型”下拉菜单添加1个NVIDIA Tesla K80。</li></ul><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff my"><img src="../Images/7eeae42e5cf73e408038d820dac9350a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z9xafSEJ-NIH6iuw8tKqig.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Create instance — step 1</figcaption></figure><p id="e02e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">接下来，您需要选择一个操作系统，并将SSD持久磁盘添加到您的实例中。单击启动盘部分的“更改”。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff nh"><img src="../Images/5d94d3df7fcdbb820d4a23f0b951b1c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0hLNf5q-guHnjIKDiGuLHg.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Create instance — step 2.a</figcaption></figure><p id="23a1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用这些设置:</p><ul class=""><li id="0701" class="lj lk hu it b iu iv iy iz jc ll jg lm jk ln jo lo lp lq lr dt translated">OS: <code class="eh nd ne nf ng b">Ubuntu 16.04 LTS</code>。</li><li id="c10d" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">启动盘类型:<code class="eh nd ne nf ng b">SSD Persistent Disk</code>。</li><li id="663f" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">尺寸:<code class="eh nd ne nf ng b">50GB</code>。</li></ul><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff my"><img src="../Images/64d65255644b8575e7b20cb1af09fe9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bjQks3xunLlsTNMFpLdttA.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Create instance — step 2.b</figcaption></figure><p id="212c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你差不多完成了。</p><p id="ddeb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">单击表单底部的“管理、磁盘、网络、SSH密钥”。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff ni"><img src="../Images/c1b72f213f87bd0e9744df95ae05aba5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9TfcU_HA0Io0vx0Mjjs7MA.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Create instance — step 3.a</figcaption></figure><p id="bb05" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在“网络”部分添加以下网络标签:<code class="eh nd ne nf ng b">jupyter</code>。这在以后配置防火墙时会很有用。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff nj"><img src="../Images/4e5159d9320a6e2afa49808d18a14e50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BueSVNGWRl0MqfvkCytPew.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Create instance — step 3.b</figcaption></figure><p id="ee46" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后一步是将您的SSH密钥附加到实例。转到“SSH密钥”部分。</p><p id="2c00" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">复制并粘贴您的SSH公钥。它需要以下格式:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="ff07" class="lx kg hu ng b fv no np l nq nr">&lt;protocol&gt; &lt;key-blob&gt; &lt;username@example.com&gt;</span></pre><p id="7d03" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是非常重要的，因为<username>将会是你用来访问你的服务器的用户名。</username></p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff ns"><img src="../Images/47057d44478692cd10100769584b14d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IRhAfco8_bSRxe69BjP8ew.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Create instance — step 3.c</figcaption></figure><p id="1f23" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">点击页面底部的“创建”。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff my"><img src="../Images/d9d1d073e976cac362b146035ff1cc30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1vanuH8Yvo9OgzCATNqnVA.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Create instance — success</figcaption></figure><p id="3437" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">记下实例的外部IP，以备后用。</p><h2 id="f043" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">添加防火墙规则</h2><p id="753a" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">为了访问您的Jupyter笔记本，您需要添加防火墙规则以允许端口8888上的传入流量。</p><p id="93a6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用侧面菜单进入“VPC网络”&gt;“防火墙规则”。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff my"><img src="../Images/0e4f7c624c446a03711b8a060bd8fb70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cbAdbrNwtnzoIsuXCglL3Q.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Firewall rules — step 1</figcaption></figure><p id="7a22" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">点击“创建防火墙规则”。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff nt"><img src="../Images/8bee320a60f880b7e0560bf3c4b62815.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nskbpmDYW7EHadlMHEcvYA.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Firewall rules — step 2</figcaption></figure><p id="9c94" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">将这些值填写在以下表格中:</p><ul class=""><li id="ecb2" class="lj lk hu it b iu iv iy iz jc ll jg lm jk ln jo lo lp lq lr dt translated">名称:<code class="eh nd ne nf ng b">default-allow-jupyter</code>。</li><li id="5c33" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">网络:<code class="eh nd ne nf ng b">default</code>。</li><li id="d580" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">优先级:<code class="eh nd ne nf ng b">65534</code>。</li><li id="d2a9" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">交通方向:<code class="eh nd ne nf ng b">Ingress</code>。我们只对允许传入流量感兴趣。</li><li id="baf9" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">对匹配的操作:<code class="eh nd ne nf ng b">Allow</code>。我们希望允许符合特定规则的流量。</li><li id="0eda" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">目标:<code class="eh nd ne nf ng b">Specified target tags</code>。我们不想将这个规则应用于项目中的所有实例，而只是应用于选定的几个实例。</li><li id="31b4" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">目标标签:<code class="eh nd ne nf ng b">jupyter</code>。只有带有<code class="eh nd ne nf ng b">jupyter</code>标签的实例才会应用此防火墙规则。</li><li id="a931" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">来源过滤器:<code class="eh nd ne nf ng b">IP ranges</code>。</li><li id="fb43" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">来源IP范围:<code class="eh nd ne nf ng b">0.0.0.0/0</code>。来自任何网络的流量都将被允许进入。如果你想让这更严格，你可以把你自己的IP地址<a class="ae li" href="https://www.google.com/?q=find%20my%20ip" rel="noopener ugc nofollow" target="_blank"/>。</li><li id="8673" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">协议和端口:<code class="eh nd ne nf ng b">tcp:8888</code>。仅允许端口8888上的TCP流量。</li></ul><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff my"><img src="../Images/badda20c64764cb97d44f3728e8e8988.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FODXlsAH_IU-kfCdZl555g.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Firewall rules — step 3.a</figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff my"><img src="../Images/5c3231b6bc97b1efd5ddcbae5049c998.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uYfj3CP8Vv1QIoc6BNw9_Q.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Firewall rules — step 3.b</figcaption></figure><h1 id="e6b8" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">启动实例— CLI版本</h1><p id="0ca3" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated"><em class="mz">如果您已经使用基于web的控制台启动了服务器，则可以跳过这一部分。</em></p><h2 id="4c8a" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">安装云SDK</h2><p id="b550" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">遵循Google Cloud Platform <a class="ae li" href="https://cloud.google.com/sdk/downloads" rel="noopener ugc nofollow" target="_blank">文档网站</a>上的指南，为您的操作系统安装最新版本的Cloud SDK。</p><h2 id="1970" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">创建项目</h2><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="ed5a" class="lx kg hu ng b fv no np l nq nr">$ gcloud projects create "drive-cli" --name "Drive CLI"</span></pre><p id="5549" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您的项目ID已经被占用，请随意添加一些随机数。</p><h2 id="0b3e" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">启用计费</h2><p id="c0d5" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">转到以下页面，为您新创建的项目启用计费:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="d7b6" class="lx kg hu ng b fv no np l nq nr">https://console.developers.google.com/billing/linkedaccount?project=[YOUR_PROJECT_ID]</span></pre><p id="98f6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="mz">注意:我没有办法从CLI做到这一点，但如果有人看到这篇文章，请在评论中告诉我。</em></p><h2 id="92d1" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">要求增加配额</h2><p id="ae0e" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">在使用附加的GPU启动实例之前，您需要确保在您选择的区域中有足够的可用GPU。否则，您将需要在此处请求增加配额:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="2d54" class="lx kg hu ng b fv no np l nq nr"><a class="ae li" href="https://console.cloud.google.com/iam-admin/quotas" rel="noopener ugc nofollow" target="_blank">https://console.cloud.google.com/iam-admin/quotas</a>?project=[PROJECT_ID]</span></pre><p id="d2cb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后，您可以按照本指南的<a class="ae li" href="#77e4" rel="noopener ugc nofollow">网络版</a>申请增加配额。</p><h2 id="3d96" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">启动虚拟机实例</h2><p id="b9d3" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">为了创建一个带有一个或多个附加GPU的实例，您需要安装至少版本为<code class="eh nd ne nf ng b">144.0.0</code>的<code class="eh nd ne nf ng b">gcloud</code>命令行工具和<code class="eh nd ne nf ng b">beta</code>组件。</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="e37a" class="lx kg hu ng b fv no np l nq nr">$ <!-- -->gcloud version<br/><strong class="ng hv">Google Cloud SDK</strong> <strong class="ng hv">165.0.0</strong><br/><strong class="ng hv">beta 2017.03.24</strong><br/>bq 2.0.25<br/>core 2017.07.28<br/>gcloud<br/>gsutil 4.27</span></pre><p id="c3e7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果不满足这些要求，请运行以下命令:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="9034" class="lx kg hu ng b fv no np l nq nr">$ gcloud components update &amp;&amp; gcloud components install beta</span></pre><p id="3b6d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在本地计算机上的任意位置创建一个具有以下格式的文件:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="dd74" class="lx kg hu ng b fv no np l nq nr">[USERNAME]:[PUBLIC KEY FILE CONTENT]</span></pre><p id="7453" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">例如(出于实际原因，键被缩短):</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="7684" class="lx kg hu ng b fv no np l nq nr">steve:ssh-rsa AAAAB3NzaC1y[...]c2EYSYVVw== steve@drive01</span></pre><p id="1e05" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">创建实例的时间:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="af9d" class="lx kg hu ng b fv no np l nq nr">$ gcloud beta compute instances create drive01 \<br/>    --machine-type n1-standard-8 --zone europe-west1-b \<br/>    --accelerator type=nvidia-tesla-k80,count=1 \<br/>    --boot-disk-size 50GB --boot-disk-type pd-ssd \<br/>    --image-family ubuntu-1604-lts --image-project ubuntu-os-cloud \<br/>    --maintenance-policy TERMINATE --restart-on-failure \<br/>    --metadata-from-file ssh-keys=~/drive_public_keys \<br/>    --tags jupyter --project "[YOUR_PROJECT_ID]"</span></pre><p id="f2f8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果命令运行成功，输出应该类似于以下内容:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="967b" class="lx kg hu ng b fv no np l nq nr">Created [<a class="ae li" href="https://www.googleapis.com/compute/beta/projects/drive-174107/zones/europe-west1-b/instances/drive01" rel="noopener ugc nofollow" target="_blank">https://www.googleapis.com/compute/beta/projects/drive-test/zones/europe-west1-b/instances/drive01</a>].<br/>NAME     ZONE            MACHINE_TYPE   PREEMPTIBLE  INTERNAL_IP  EXTERNAL_IP    STATUS<br/>drive01  europe-west1-b  n1-standard-8               10.132.0.2   146.148.9.152  RUNNING</span></pre><p id="1964" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">记下外部IP。</p><h2 id="d6c8" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">添加防火墙规则</h2><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="318f" class="lx kg hu ng b fv no np l nq nr">$ gcloud beta compute firewall-rules create "default-allow-jupyter" \<br/>    --network "default" --allow tcp:8888 \<br/>    --direction "ingress" --priority 65534 \<br/>    --source-ranges 0.0.0.0/0 \<br/>    --target-tags "jupyter" --project "[YOUR_PROJECT_ID]"</span></pre><p id="3781" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">输出应该是这样的:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="1d82" class="lx kg hu ng b fv no np l nq nr">Creating firewall...done.<br/>NAME                   NETWORK  DIRECTION  PRIORITY  ALLOW     DENY<br/>default-allow-jupyter  default  INGRESS    65534     tcp:8888</span></pre><h1 id="6eab" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">准备服务器</h1><p id="f373" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">既然您的实例已经启动，防火墙也已经正确设置，现在是时候配置它了。</p><p id="f5a3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先使用以下命令登录到您的服务器:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="22e1" class="lx kg hu ng b fv no np l nq nr">$ ssh -i ~/.ssh/my-ssh-key [USERNAME]@[EXTERNAL_IP_ADDRESS]</span></pre><p id="6fed" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">[外部IP地址]是您在前面几个步骤中记下的地址。<br/>【用户名】是您的SSH密钥中的用户名。</p><p id="e943" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因为这是您第一次连接到该服务器，您将得到以下提示。键入“是”。</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="6883" class="lx kg hu ng b fv no np l nq nr">The authenticity of host '146.148.9.152 (146.148.9.152)' can't be established.<br/>ECDSA key fingerprint is SHA256:xll+CHEOChQygmnv0OjdFIiihAcx69slTjQYdymMLT8.<br/>Are you sure you want to continue connecting (yes/no)? yes</span></pre><p id="c079" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们首先更新系统软件并安装一些急需的依赖项:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="854e" class="lx kg hu ng b fv no np l nq nr">$ sudo apt-get update<br/>$ sudo apt-get upgrade<br/>$ sudo apt-get install -y build-essential</span></pre><p id="a689" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">幸运的是，Ubuntu预装了Python 2和Python 3，所以你可以直接进入下一步:安装<a class="ae li" href="https://conda.io/miniconda.html" rel="noopener ugc nofollow" target="_blank"> Miniconda </a>。</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="dca8" class="lx kg hu ng b fv no np l nq nr">$ cd /tmp<br/>$ curl -O <a class="ae li" href="https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh" rel="noopener ugc nofollow" target="_blank">https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh</a><br/>$ md5sum Miniconda3-latest-Linux-x86_64.sh</span></pre><p id="5e62" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后一个命令的输出应该类似于:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="ec38" class="lx kg hu ng b fv no np l nq nr">c1c15d3baba15bf50293ae963abef853  Miniconda3-latest-Linux-x86_64.sh</span></pre><p id="606f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是您下载的文件的MD5总和。您可以将它与MD5哈希进行比较，以验证您的安装程序的完整性。</p><p id="9170" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您现在可以运行安装脚本:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="8480" class="lx kg hu ng b fv no np l nq nr">$ bash Miniconda3-latest-Linux-x86_64.sh</span></pre><p id="ada8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这将为您提供以下输出:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="312b" class="lx kg hu ng b fv no np l nq nr">Welcome to Miniconda3 4.3.21 (by Continuum Analytics, Inc.)</span><span id="430c" class="lx kg hu ng b fv nu np l nq nr">In order to continue the installation process, please review the license<br/>agreement.<br/>Please, press ENTER to continue<br/>&gt;&gt;&gt;</span></pre><p id="70eb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">按下<code class="eh nd ne nf ng b">[ENTER]</code>继续，然后再次按下<code class="eh nd ne nf ng b">[ENTER]</code>通读许可证。一旦到达终点，系统会提示您接受它:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="bbcf" class="lx kg hu ng b fv no np l nq nr">Do you approve the license terms? [yes|no]<br/>&gt;&gt;&gt;</span></pre><p id="4849" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果同意，请键入“是”。</p><p id="491b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">安装程序现在会要求您选择安装位置。按<code class="eh nd ne nf ng b">[ENTER]</code>使用默认位置，或者如果您想自定义，键入不同的位置:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="0ba3" class="lx kg hu ng b fv no np l nq nr">Miniconda3 will now be installed into this location:<br/>/home/steve/miniconda3</span><span id="4cf0" class="lx kg hu ng b fv nu np l nq nr">  - Press ENTER to confirm the location<br/>  - Press CTRL-C to abort the installation<br/>  - Or specify a different location below</span><span id="2f50" class="lx kg hu ng b fv nu np l nq nr">[/home/steve/miniconda3] &gt;&gt;&gt;</span></pre><p id="c139" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">安装过程将开始。一旦安装完成，安装程序会询问你是否希望它将安装位置添加到你的<code class="eh nd ne nf ng b">PATH</code>中。这是在你的shell中使用<code class="eh nd ne nf ng b">conda</code>命令所需要的，所以键入“yes”表示同意。</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="3bee" class="lx kg hu ng b fv no np l nq nr">...<br/>installation finished.<br/>Do you wish the installer to prepend the Miniconda3 install location<br/>to PATH in your /home/steve/.bashrc ? [yes|no]<br/>[no] &gt;&gt;&gt;</span></pre><p id="d97b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">以下是安装过程的最终输出:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="2741" class="lx kg hu ng b fv no np l nq nr">Prepending PATH=/home/steve/miniconda3/bin to PATH in /home/steve/.bashrc<br/>A backup will be made to: /home/steve/.bashrc-miniconda3.bak</span><span id="c430" class="lx kg hu ng b fv nu np l nq nr">For this change to become active, you have to open a new terminal.</span><span id="0c1d" class="lx kg hu ng b fv nu np l nq nr">Thank you for installing Miniconda3!</span><span id="4a8c" class="lx kg hu ng b fv nu np l nq nr">Share your notebooks and packages on Anaconda Cloud!<br/>Sign up for free: <a class="ae li" href="https://anaconda.org" rel="noopener ugc nofollow" target="_blank">https://anaconda.org</a></span></pre><p id="0d56" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">获取您的<code class="eh nd ne nf ng b">.bashrc</code>文件以完成安装:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="e80f" class="lx kg hu ng b fv no np l nq nr">$ source ~/.bashrc</span></pre><p id="0df8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可以通过在shell中键入以下命令来验证是否成功安装了Miniconda:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="cf67" class="lx kg hu ng b fv no np l nq nr">$ conda list<br/># packages in environment at /home/steve/miniconda3:<br/>#<br/>asn1crypto                0.22.0                   py36_0<br/>cffi                      1.10.0                   py36_0<br/>conda                     4.3.21                   py36_0<br/>conda-env                 2.6.0                         0<br/>...</span></pre><h2 id="cb7a" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">安装CUDA工具包</h2><p id="3815" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">为了获得安装在服务器上的Tesla K80的所有好处，您需要安装NVIDIA CUDA Toolkit。</p><p id="0afd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先，检查您的GPU安装是否正确:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="4c65" class="lx kg hu ng b fv no np l nq nr">$ lspci | grep -i nvidia<br/>00:04.0 3D controller: NVIDIA Corporation GK210GL [Tesla K80] (rev a1)</span></pre><p id="f579" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在撰写本文时，Tensorflow支持的CUDA Toolkit的最新版本是8 . 0 . 61–1，因此我将在本指南中使用这个版本。如果你将来读到这份指南，请随意将它与在https://developer.nvidia.com/cuda-downloads找到的最新版本交换。</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="bcbe" class="lx kg hu ng b fv no np l nq nr">$ cd /tmp<br/>$ curl -O <a class="ae li" href="https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/cuda-repo-ubuntu1604_8.0.61-1_amd64.deb" rel="noopener ugc nofollow" target="_blank">https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/cuda-repo-ubuntu1604_8.0.61-1_amd64.deb</a></span></pre><p id="67fd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">将此文件的MD5总和与发布的文件进行比较<a class="ae li" href="http://developer.download.nvidia.com/compute/cuda/8.0/Prod/docs/sidebar/md5sum.txt" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="dbf6" class="lx kg hu ng b fv no np l nq nr">$ md5sum cuda-repo-ubuntu1604_8.0.61-1_amd64.deb<br/>1f4dffe1f79061827c807e0266568731  cuda-repo-ubuntu1604_8.0.61-1_amd64.deb</span></pre><p id="8196" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果匹配，您可以继续下一步:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="bbbb" class="lx kg hu ng b fv no np l nq nr">$ sudo dpkg -i cuda-repo-ubuntu1604_8.0.61-1_amd64.deb<br/>$ sudo apt-get update<br/>$ sudo apt-get install -y cuda-8-0</span></pre><p id="74c6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">运行该命令将一些环境变量添加到您的<code class="eh nd ne nf ng b">.bashrc</code>文件中:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="8451" class="lx kg hu ng b fv no np l nq nr">$ cat &lt;&lt;EOF &gt;&gt; ~/.bashrc<br/>export CUDA_HOME=/usr/local/cuda-8.0<br/>export LD_LIBRARY_PATH=\${CUDA_HOME}/lib64<br/>export PATH=\${CUDA_HOME}/bin:\${PATH}<br/>EOF</span></pre><p id="b99d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">再次编译您的<code class="eh nd ne nf ng b">.bashrc</code>文件:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="40f7" class="lx kg hu ng b fv no np l nq nr">$ source ~/.bashrc</span></pre><p id="9e56" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">NVIDIA提供了一些样本程序，将允许我们测试安装。将它们复制到您的主目录并构建一个:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="861c" class="lx kg hu ng b fv no np l nq nr">$ cuda-install-samples-8.0.sh ~<br/>$ cd ~/NVIDIA_CUDA-8.0_Samples/1_Utilities/deviceQuery<br/>$ make</span></pre><p id="ecf5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果一切顺利，您现在可以运行<code class="eh nd ne nf ng b">deviceQuery</code>实用程序来验证您的CUDA安装。</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="900f" class="lx kg hu ng b fv no np l nq nr">$ ./deviceQuery<br/><br/>CUDA Device Query (Runtime API) version (CUDART static linking)</span><span id="ba41" class="lx kg hu ng b fv nu np l nq nr">Detected 1 CUDA Capable device(s)</span><span id="861e" class="lx kg hu ng b fv nu np l nq nr">Device 0: "Tesla K80"<br/>  CUDA Driver Version / Runtime Version          8.0 / 8.0<br/>  CUDA Capability Major/Minor version number:    3.7<br/>  Total amount of global memory:                 11440 MBytes (11995578368 bytes)<br/>  (13) Multiprocessors, (192) CUDA Cores/MP:     2496 CUDA Cores<br/>...</span></pre><p id="e899" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您也可以使用<code class="eh nd ne nf ng b">nvidia-smi</code>实用程序来验证驱动程序是否正常运行:</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="nv nw l"/></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Output from `nvidia-smi`</figcaption></figure><h2 id="5421" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">安装cuDNN</h2><p id="e240" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">cuDNN是NVIDIA提供的用于深度神经网络的GPU加速原语库。如果在安装支持GPU的版本时Tensorflow需要。</p><p id="cc07" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Tensorflow 1.2.1(我们在本指南中使用的版本)仅支持cuDNN 5.1。</p><p id="70d5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了下载这个库，你必须在这里注册一个NVIDIA开发者账户<a class="ae li" href="https://developer.nvidia.com/developer-program/signup" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="3f0b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦你的账户创建完成，你可以在这里下载cud nn<a class="ae li" href="https://developer.nvidia.com/rdp/cudnn-download" rel="noopener ugc nofollow" target="_blank"/>(你必须登录)。</p><p id="4ec4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">同意这些条款，并在本地计算机上下载“cuDNN v5.1 for Linux”归档文件。请务必使用CUDA 8.0版本。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff my"><img src="../Images/60f3e50fe42e950b4298d9ae13bcdedb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BUxhI-mlYBLJdwrM41xKXg.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">NVIDIA — cuDNN v5.1</figcaption></figure><p id="1880" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">运行这些命令进入下载归档文件的目录(在我的例子中是<code class="eh nd ne nf ng b">~/Downloads</code>)并将它上传到您的服务器:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="a11c" class="lx kg hu ng b fv no np l nq nr">$ cd ~/Downloads/<br/>$ scp <!-- -->-i ~/.ssh/my-ssh-key <!-- -->cudnn-8.0-linux-x64-v5.1.tgz <!-- -->[USERNAME]@[EXTERNAL_IP_ADDRESS]<!-- -->:/tmp</span></pre><p id="ebbd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦成功上传，解压缩cuDNN库并将其复制到CUDA toolkit目录:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="3a9a" class="lx kg hu ng b fv no np l nq nr">$ cd /tmp<br/>$ <!-- -->tar xvzf cudnn-8.0-linux-x64-v5.1.tgz<br/>$ sudo cp -P cuda/include/cudnn.h $CUDA_HOME/include<br/>$ sudo cp -P cuda/lib64/libcudnn* $CUDA_HOME/lib64<br/>$ sudo chmod u+w $CUDA_HOME/include/cudnn.h<br/>$ sudo chmod a+r $CUDA_HOME/lib64/libcudnn*</span></pre><h2 id="733f" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">访问Github repos</h2><p id="8054" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">能够直接从服务器上推/拉你在Github上的repos比必须先在你的笔记本电脑上同步文件要方便得多。为了启用该工作流，您将向您的Github帐户添加一个特定于该服务器的SSH密钥。</p><p id="5251" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先，在服务器上生成一个SSH密钥对:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="52dc" class="lx kg hu ng b fv no np l nq nr">$ ssh-keygen -o -a 100 -t ed25519 -f ~/.ssh/id_ed25519 -C steve@drive01</span></pre><p id="39c5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当出现提示时，输入密码并为您的密钥选择一个位置。</p><p id="d143" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">阅读公钥的内容，并将其复制到您的剪贴板:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="ef7a" class="lx kg hu ng b fv no np l nq nr">$ cat ~/.ssh/id_ed25519.pub</span></pre><p id="5464" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">转到你的<a class="ae li" href="https://github.com/settings/keys" rel="noopener ugc nofollow" target="_blank"> Github SSH和GPG键设置</a>，点击“新建SSH密钥”，在“标题”部分给你的密钥命名，然后将密钥粘贴到“密钥”部分。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff nx"><img src="../Images/d71c18b869538723cc7a35dab3365678.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4AOjKp2axznT4zE8-KIzng.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Github — adding a SSH key</figcaption></figure><p id="461a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">添加密钥后，您可以返回到您的服务器。</p><h2 id="bbbc" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">设置CarND环境</h2><p id="7592" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">在您的主目录中创建一个名为<code class="eh nd ne nf ng b">carnd</code>的新文件夹，并克隆<code class="eh nd ne nf ng b">CarND-Term1-Starter-Kit</code> <a class="ae li" href="https://github.com/udacity/CarND-Term1-Starter-Kit" rel="noopener ugc nofollow" target="_blank">存储库</a>:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="8d2a" class="lx kg hu ng b fv no np l nq nr">$ mkdir ~/carnd<br/>$ cd ~/carnd<br/>$ git clone git@github.com:udacity/CarND-Term1-Starter-Kit.git<br/>$ cd CarND-Term1-Starter-Kit</span></pre><p id="4d68" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在创建conda环境之前，我们需要对Udacity提供的<code class="eh nd ne nf ng b">environment-gpu.yml</code>文件做一个小的修改。</p><p id="cdf5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用vim、nano或任何您最熟悉的文本编辑器，更改以下内容:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="0c7f" class="lx kg hu ng b fv no np l nq nr"># environment-gpu.yml<br/>name: carnd-term1<br/>channels:<br/>    - <a class="ae li" href="https://conda.anaconda.org/menpo" rel="noopener ugc nofollow" target="_blank">https://conda.anaconda.org/menpo</a><br/>    - conda-forge<br/>dependencies:<br/>    - python==3.5.2<br/>    - numpy<br/>    - matplotlib<br/>    - jupyter<br/>    - opencv3<br/>    - pillow<br/>    - scikit-learn<br/>    - scikit-image<br/>    - scipy<br/>    - h5py<br/>    - eventlet<br/>    - flask-socketio<br/>    - seaborn<br/>    - pandas<br/>    - ffmpeg<br/>    - imageio=2.1.2<br/>    - pyqt=4.11.4<br/>    - pip:<br/>        - moviepy<br/>        - <a class="ae li" href="https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-0.12.1-cp35-cp35m-linux_x86_64.whl" rel="noopener ugc nofollow" target="_blank"><strong class="ng hv">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-0.12.1-cp35-cp35m-linux_x86_64.whl</strong></a><br/>        - keras==1.2.1</span></pre><p id="7ba0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">变成这样:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="96d0" class="lx kg hu ng b fv no np l nq nr"># environment-gpu.yml<br/>name: carnd-term1<br/>channels:<br/>    - <a class="ae li" href="https://conda.anaconda.org/menpo" rel="noopener ugc nofollow" target="_blank">https://conda.anaconda.org/menpo</a><br/>    - conda-forge<br/>dependencies:<br/>    - python==3.5.2<br/>    - numpy<br/>    - matplotlib<br/>    - jupyter<br/>    - opencv3<br/>    - pillow<br/>    - scikit-learn<br/>    - scikit-image<br/>    - scipy<br/>    - h5py<br/>    - eventlet<br/>    - flask-socketio<br/>    - seaborn<br/>    - pandas<br/>    - ffmpeg<br/>    - imageio=2.1.2<br/>    - pyqt=4.11.4<br/>    - pip:<br/>        - moviepy<br/>        - <strong class="ng hv">tensorflow-gpu==1.2.1</strong><br/>        - keras==1.2.1</span></pre><p id="0e39" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这一变化将确保您获得最新版本的Tensorflow和GPU支持。</p><p id="3367" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您现在可以创建conda环境了:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="9152" class="lx kg hu ng b fv no np l nq nr">$ conda env create -f environment-gpu.yml</span></pre><p id="0dec" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此命令将提取所有指定的依赖项。可能需要一点时间。</p><p id="347a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果它成功创建了环境，您应该会在控制台中看到以下输出:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="d33d" class="lx kg hu ng b fv no np l nq nr">...<br/>Successfully installed backports.weakref-1.0rc1 decorator-4.0.11 keras-1.2.1 markdown-2.6.8 moviepy-0.2.3.2 protobuf-3.3.0 tensorflow-gpu-1.2.1 theano-0.9.0 tqdm-4.11.2<br/>#<br/># To activate this environment, use:<br/># &gt; source activate carnd-term1<br/>#<br/># To deactivate this environment, use:<br/># &gt; source deactivate carnd-term1</span></pre><p id="724c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">是时候尝试你的新安装了！</p><p id="72d0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">激活环境:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="7997" class="lx kg hu ng b fv no np l nq nr">$ source activate carnd-term1</span></pre><p id="f266" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在python shell中运行这个简短的TensorFlow程序:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="808f" class="lx kg hu ng b fv no np l nq nr">(carnd-term1) $ python<br/>&gt;&gt;&gt; import tensorflow as tf<br/>&gt;&gt;&gt; hello = tf.constant('Hello, TensorFlow!')<br/>&gt;&gt;&gt; sess = tf.Session()<br/>&gt;&gt;&gt; print(sess.run(hello))<br/>b'Hello, TensorFlow!'</span></pre><p id="0f7c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您得到了这个输出，那么恭喜您，您的服务器已经为Udacity无人驾驶汽车Nanodegree项目做好了准备。</p><p id="d3d4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您收到错误消息，请参见Tensorflow网站上的<a class="ae li" href="https://www.tensorflow.org/install/install_linux#common_installation_problems" rel="noopener ugc nofollow" target="_blank">本节</a>了解常见安装问题或在此留下评论。</p></div><div class="ab cl mm mn hc mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="hn ho hp hq hr"><h1 id="c831" class="kf kg hu bd kh ki mt kk kl km mu ko kp kq mv ks kt ku mw kw kx ky mx la lb lc dt translated">实验室</h1><p id="e090" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">现在您的服务器已经准备好了，是时候好好利用它了。</p><p id="5ea7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我将以<a class="ae li" href="https://github.com/udacity/CarND-LeNet-Lab/" rel="noopener ugc nofollow" target="_blank"> LeNet实验室</a>为例，演示如何使用您的服务器，但这些步骤适用于本课程中任何其他基于Jupyter的实验室。</p><h2 id="a27c" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">Jupyter配置</h2><p id="7129" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">为了访问您的Jupyter笔记本，您需要编辑Jupyter配置，以便服务器绑定到所有接口，而不是本地主机。</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="61b0" class="lx kg hu ng b fv no np l nq nr">$ jupyter notebook --generate-config</span></pre><p id="b5c1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">该命令将在<code class="eh nd ne nf ng b">~/.jupyter/jupyter_notebook_config.py</code>生成一个配置文件。</p><p id="447a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用文本编辑器，替换此行:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="b25e" class="lx kg hu ng b fv no np l nq nr">#c.NotebookApp.ip = 'localhost'</span></pre><p id="29b0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有了这个:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="815e" class="lx kg hu ng b fv no np l nq nr">c.NotebookApp.ip = '*'</span></pre><p id="cf51" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下次您启动Jupyter笔记本时，内部服务器将在所有接口上绑定，而不是本地主机，从而允许您在浏览器中访问笔记本。</p><h2 id="3092" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">启动笔记本</h2><p id="65a8" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">首先，让我们通过从Github克隆存储库来检索实验室的内容。</p><p id="4e9a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在您的服务器上运行以下命令:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="98d7" class="lx kg hu ng b fv no np l nq nr">$ cd ~/carnd<br/>$ git clone <a class="ae li" href="https://github.com/udacity/CarND-LeNet-Lab.git" rel="noopener ugc nofollow" target="_blank">https://github.com/udacity/CarND-LeNet-Lab.git</a><br/>$ cd CarND-LeNet-Lab/</span></pre><p id="cdb0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您的conda环境尚未激活，请立即激活它:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="f65e" class="lx kg hu ng b fv no np l nq nr">$ source activate carnd-term1</span></pre><p id="a7f8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">启动笔记本:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="9e51" class="lx kg hu ng b fv no np l nq nr">(carnd-term1) $ jupyter notebook</span></pre><h2 id="f346" class="lx kg hu bd kh ly lz ma kl mb mc md kp jc me mf kt jg mg mh kx jk mi mj lb mk dt translated">运行实验室</h2><p id="f7e7" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">在您的本地计算机上，打开浏览器并转到:</p><pre class="jq jr js jt fq nk ng nl nm aw nn dt"><span id="2512" class="lx kg hu ng b fv no np l nq nr">http://[EXTERNAL_IP_ADDRESS]:8888</span></pre><p id="0b93" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果尚未打开，请单击“LeNet-Lab-Solution.ipynb”启动LeNet实验室解决方案笔记本。</p><p id="3db3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">运行笔记本中的每个单元格。应该在一分钟左右的时间内在该机器上训练具有解决方案笔记本中给出的超级参数的网络。</p><p id="4f0c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Tada！您有一个功能完整的GPU实例。</p><p id="07cc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="mz">重要提示:您的服务器是按每分钟计费的，因此在您使用完服务器后，不要忘记将其关闭。请注意，在终止实例之前，您仍然需要支付少量的存储费用(50GB大约8美元/月)。查看</em> </strong> <a class="ae li" href="https://cloud.google.com/compute/docs/instances/stopping-or-deleting-an-instance" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv"> <em class="mz">本指南</em> </strong> </a> <strong class="it hv"> <em class="mz">了解如何停止或删除实例。</em> </strong></p></div><div class="ab cl mm mn hc mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="hn ho hp hq hr"><h1 id="9aca" class="kf kg hu bd kh ki mt kk kl km mu ko kp kq mv ks kt ku mw kw kx ky mx la lb lc dt translated">结论</h1><p id="b376" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">希望这篇指南能让你相信在Google云平台上设置一个GPU支持的实例和在AWS上一样简单。</p><p id="1ee7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了让这个指南尽量简短易懂(我真的努力了！)我掩饰了一些非常重要的话题:</p><ul class=""><li id="8b6b" class="lj lk hu it b iu iv iy iz jc ll jg lm jk ln jo lo lp lq lr dt translated">服务器安全性:为了提高服务器的安全性，作为基本设置的一部分，应该尽早采取一些配置步骤。</li><li id="17f6" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">应用程序安全性:您的Jupyter笔记本目前可以被任何拥有您的服务器IP地址的人访问。您可以轻松地更新防火墙规则，只允许来自您自己IP的访问，并<a class="ae li" href="http://jupyter-notebook.readthedocs.io/en/latest/public_server.html" rel="noopener ugc nofollow" target="_blank">更改Jupyter配置，要求输入密码并使用SSL </a>。</li><li id="c826" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">自动化:手工完成所有这些工作显然是非常乏味的，使用配置管理软件或类似Terraform的工具来自动化部分(如果不是全部)工作是有意义的。此外，您可以在完全配置好的服务器上创建一个映像，或者至少创建一个快照，这样就可以避免下次启动实例时从头开始。</li></ul><p id="e8c1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我希望你喜欢它，如果你有任何问题或意见，请使用下面的评论部分或直接给我发电子邮件联系。</p></div></div>    
</body>
</html>