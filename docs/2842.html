<html>
<head>
<title>Faking 3D in creative coding</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创造性编码中的伪3D</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/faking-3d-in-creative-coding-85b6b97eb38b?source=collection_archive---------9-----------------------#2017-02-22">https://medium.com/hackernoon/faking-3d-in-creative-coding-85b6b97eb38b?source=collection_archive---------9-----------------------#2017-02-22</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="e4bc" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">用Javascript在画布上构建3D星空效果</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/b7f25339333ada167aaf69560796bb32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*cgz_L67P_7WtCnMMdeCRNA.gif"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">We’ll be building this hyperspace star effect</figcaption></figure><p id="8bff" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">我有几个请求，想展示如何基于上一篇文章中的Math.sin()和Math.cos()示例，在3D中做一些类似的事情。但在我们到达那里之前，让我们先了解一下伪3D的基础知识。</p><p id="7d54" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">一旦你知道它是如何工作的，在画布上创建假3D就相当容易了。我们将从小处着手，在我们所学的技巧基础上再接再厉。</p><p id="00b1" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">基本的技巧是缩放我们的对象来模拟z轴视图，我们使用一个视场角，简单来说就是视场角的宽度。角度越大，你得到的3D失真就越多。公式是:</p><pre class="jk jl jm jn fq kw kx ky kz aw la dt"><span id="6a12" class="lb lc hu kx b fv ld le l lf lg">scale = FOV/(z+FOV);</span></pre><p id="50e9" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">所以让我们先做一个简单的星域…</p><p id="ff36" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">使用我们正常的粒子系统代码，我们还需要给每个粒子一个z值，一个z速度，一个比例值和一个3D x值和一个3D y值。我们不需要x速度或者y速度，因为我们只是向前移动粒子。</p><pre class="jk jl jm jn fq kw kx ky kz aw la dt"><span id="6618" class="lb lc hu kx b fv ld le l lf lg">function addParticle(){<br/>  var particle = {<br/>    x: random(-100,100),<br/>    y: random(-100,100),<br/>    <strong class="kx hv">z: 10,<br/>    x3d: 0,<br/>    y3d: 0,<br/>    scale: 1,<br/>    speed_z: 4</strong><br/>  }<br/>  particles.push(particle);<br/>}</span></pre><p id="ba6b" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">然后我们将根据我们的公式计算我们的3D位置。请注意，我们减去z位置来向前移动球，并使用我们的比例来计算新的3D x和y位置:</p><pre class="jk jl jm jn fq kw kx ky kz aw la dt"><span id="ecb9" class="lb lc hu kx b fv ld le l lf lg">function moveParticles(){</span><span id="e379" class="lb lc hu kx b fv lh le l lf lg">for (var i = 0; i &lt; particles.length; i++) {<br/>    var p = particles[i];<br/>    <strong class="kx hv">p.z -= p.speed_z;<br/>    p.scale = fov/(p.z+FOV);<br/>    p.x3d = p.x * p.scale;<br/>    p.y3d = p.y * p.scale;</strong></span><span id="bfdb" class="lb lc hu kx b fv lh le l lf lg">  }</span><span id="350e" class="lb lc hu kx b fv lh le l lf lg">}</span></pre><p id="cebe" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">您应该会看到这样的内容:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/258c6f95b566542f3c580fa6c8c72005.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*tTSlpu3Q6ibx4_8kCJ0BEg.gif"/></div></div></figure><p id="d1e7" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">你会注意到一件事，粒子最终开始向后移动。很容易修复，只要检查他们是否已经达到过去的负面FOV，删除它们。</p><p id="9b67" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">唯一的另一件事是添加一个半透明的背景，以获得一个跟踪效果。</p><p id="7221" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">为了获得文章标题的效果，完整的代码如下所示:</p><pre class="jk jl jm jn fq kw kx ky kz aw la dt"><span id="cc24" class="lb lc hu kx b fv ld le l lf lg">var ctx = createCanvas("canvas1");<br/>var particles = [];<br/>var FOV = 250;</span><span id="1241" class="lb lc hu kx b fv lh le l lf lg">function addParticle(){<br/>  var particle = {<br/>    x: random(-100,100),<br/>    y: random(-100,100),<br/>    z: 10,<br/>    x3d: 0,<br/>    y3d: 0,<br/>    speed_z: 2,<br/>    scale: 1,<br/>    colour: rgb(0),<br/>  }<br/>  particles.push(particle);<br/>}</span><span id="90dd" class="lb lc hu kx b fv lh le l lf lg">function draw(){<br/>  ctx.background(0, 0.2);<br/>  addParticle();<br/>  moveParticles();<br/>  drawParticles();<br/>}<br/></span><span id="00ef" class="lb lc hu kx b fv lh le l lf lg">function moveParticles(){<br/>  for (var i = 0; i &lt; particles.length; i++) {<br/>    var p = particles[i];<br/>    p.z -= p.speed_z;<br/>    p.scale = FOV/(p.z+FOV);<br/>    p.x3d = p.x * p.scale;<br/>    p.y3d = p.y * p.scale;</span><span id="5d25" class="lb lc hu kx b fv lh le l lf lg">    if (p.z &lt; -FOV) {<br/>      particles.splice(i,1);<br/>    }<br/>  }<br/>}</span><span id="ade7" class="lb lc hu kx b fv lh le l lf lg"><br/>function drawParticles(){<br/>  ctx.save();<br/>  ctx.translate(w/2, h/2);<br/>  for (var i = 0; i &lt; particles.length; i++) {<br/>    var p = particles[i];<br/>    ctx.fillStyle = rgb(255);<br/>    ctx.fillEllipse(p.x3d, p.y3d, p.scale, p.scale);<br/>  }<br/>  ctx.restore();<br/>}</span></pre><p id="f77f" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">仅此而已。我们完了。快乐的<a class="ae li" href="https://hackernoon.com/tagged/coding" rel="noopener ugc nofollow" target="_blank">编码</a>。</p><p id="a0b5" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">像往常一样，完整的代码可以在我的<a class="ae li" href="https://hackernoon.com/tagged/github" rel="noopener ugc nofollow" target="_blank"> github </a>上找到，这篇文章是第9部分(一定要时不时地拉一下，因为我经常更新内容):<a class="ae li" href="https://github.com/GeorgeGally/creative_coding" rel="noopener ugc nofollow" target="_blank">https://github.com/GeorgeGally/creative_coding</a></p><p id="6ec9" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb hv">在Instagram上关注我这里:</strong><a class="ae li" href="https://www.instagram.com/radarboy3000/" rel="noopener ugc nofollow" target="_blank"><strong class="kb hv">https://www.instagram.com/radarboy3000/</strong></a></p><p id="ecb3" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb hv">在推特上关注我这里:</strong><a class="ae li" href="https://twitter.com/radarboy_japan" rel="noopener ugc nofollow" target="_blank"><strong class="kb hv">https://twitter.com/radarboy_japan</strong></a></p><p id="c0ad" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb hv">又如我这里的脸书页:【https://www.facebook.com/radarboy3000】<a class="ae li" href="https://www.facebook.com/radarboy3000" rel="noopener ugc nofollow" target="_blank"><strong class="kb hv"/></a></strong></p><div class="jk jl jm jn fq ab cb"><figure class="lj jo lk ll lm ln lo paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="lj jo lk ll lm ln lo paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="lj jo lk ll lm ln lo paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="lp lq lr"><p id="f922" class="jz ka kv kb b kc kd iv ke kf kg iy kh ls kj kk kl lt kn ko kp lu kr ks kt ku hn dt translated"><a class="ae li" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae li" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae li" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae li" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jz ka kv kb b kc kd iv ke kf kg iy kh ls kj kk kl lt kn ko kp lu kr ks kt ku hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae li" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae li" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff lv"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="lw lx l"/></div></figure></div></div>    
</body>
</html>