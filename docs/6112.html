<html>
<head>
<title>Manage your observable subscriptions in Angular with help of rx.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">借助rx.js在Angular中管理您的可观察订阅</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/manage-your-observable-subscriptions-in-angular-with-help-of-rx-js-f574b590a5cb?source=collection_archive---------4-----------------------#2017-09-04">https://medium.com/hackernoon/manage-your-observable-subscriptions-in-angular-with-help-of-rx-js-f574b590a5cb?source=collection_archive---------4-----------------------#2017-09-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="bb4f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">订阅observables时，管理您的订阅是关键。一个可观察的执行可以运行无限长的时间，因此我们需要一种方法来阻止它的执行。如果我们对不需要的资源开放订阅，我们会失去不必要的内存和计算资源，这是不好的。我们当然可以直接调用<code class="eh jp jq jr js b">unsubscribe()</code>，但是有更好更简单的方法来阻止你的订阅使用rx.js接收数据。</p><p id="ac14" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你不确定你已经完全理解了可观测量，我推荐阅读我的<a class="ae jt" href="https://hackernoon.com/understanding-creating-and-subscribing-to-observables-in-angular-426dbf0b04a3" rel="noopener ugc nofollow" target="_blank">前一篇文章</a>。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff ju"><img src="../Images/6d0b938d33045b08312b455caa6ce22e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rpWedwgKta5r9D9Z0fYoew.jpeg"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Photo by <a class="ae jt" href="https://unsplash.com/photos/x1w_Q78xNEY?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Grant Ritchie</a> on <a class="ae jt" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="cd73" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用rx.js中的操作符使我们能够在不调用<code class="eh jp jq jr js b">unsubscribe()</code>的情况下完成可观测量。使用这些方法而不是调用<code class="eh jp jq jr js b">unsubscribe()</code>总是有优先权的，因为这样我们对我们的订阅有更多的控制权。</p><p id="9124" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于每个rx.js运营商，我将包括rxmarbles.com的图像。请注意，顶部的箭头代表发出多个值的原始可观察值。每个圆圈代表一次发射。底部的箭头表示操作符在数据流完成之前对数据流的影响。如果你还没有看rxmarbles，我强烈推荐你尽快去看。它真的可以帮助您理解每个rx.js操作符是如何工作的。</p><h1 id="6ab9" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">。首先()</h1><p id="ac45" class="pw-post-body-paragraph ir is hu it b iu li iw ix iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo hn dt translated">如果您确定您只需要第一个值或通过测试的第一个值，请使用<code class="eh jp jq jr js b">first()</code>。可观察对象只发出第一个值，然后完成。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff ln"><img src="../Images/a1d0a98be9d675e49648e2c425e444e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O1z5ubpmg6NwhrwVx1KVMQ.png"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek"><a class="ae jt" href="http://rxmarbles.com/#first" rel="noopener ugc nofollow" target="_blank">http://rxmarbles.com/#first</a></figcaption></figure><p id="8256" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">示例用法<br/> </strong>当您只想从api请求中获取值时，可以使用<code class="eh jp jq jr js b">first</code>。因为您知道您只需要一个值，<code class="eh jp jq jr js b">first</code>非常适合。</p><figure class="jv jw jx jy fq jz"><div class="bz el l di"><div class="lo lp l"/></div></figure><h1 id="f6e8" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">。采取()</h1><p id="0bdd" class="pw-post-body-paragraph ir is hu it b iu li iw ix iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo hn dt translated">如果您事先知道您只想从您的源中获取最大数量的值，您可以使用<code class="eh jp jq jr js b">take</code>。<code class="eh jp jq jr js b">take</code>返回最大次数发出其值的可观察值。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff lq"><img src="../Images/031950475517e16efbd21621e79277d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C5yNyuQlHkRlU9kn0fr_KQ.png"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek"><a class="ae jt" href="http://rxmarbles.com/#take" rel="noopener ugc nofollow" target="_blank">http://rxmarbles.com/#take</a></figcaption></figure><p id="9b7e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">示例用法<br/> </strong>例如，当您知道第一个值可以为空，但第二个值有您需要的值时，您可以使用<code class="eh jp jq jr js b">take</code>。当从我的ngrx/store中选择数据时，我有时会使用它。当您请求数据时，可能会出现商店仍然为空的情况，第一个值将为null。过一会儿，商店可能就满了，我的订阅现在收到了它需要的数据。然后工作正常。</p><figure class="jv jw jx jy fq jz"><div class="bz el l di"><div class="lo lp l"/></div></figure><h1 id="b15c" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">。元素At()</h1><p id="cf81" class="pw-post-body-paragraph ir is hu it b iu li iw ix iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo hn dt translated">其中<code class="eh jp jq jr js b">take</code>接受来自可观察对象的最大发射数。<code class="eh jp jq jr js b">elementAt</code>只接受来自给定索引的发射。换句话说，如果你只想从一个可观测值中得到第三个值，就使用<code class="eh jp jq jr js b">elementAt</code>。<code class="eh jp jq jr js b">elementAt</code>然后等待第三个值，然后完成。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff lq"><img src="../Images/e97feabc586f51de38ba90cd145b7543.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z8JXEyMbT5oTIWWhnADKLg.png"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek"><a class="ae jt" href="http://rxmarbles.com/#elementAt" rel="noopener ugc nofollow" target="_blank">http://rxmarbles.com/#elementAt</a></figcaption></figure><p id="3d72" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">示例用法<br/> </strong>也许有这样一个场景，你正在制作一些交互的东西，需要用第三次点击来做一些事情。</p><figure class="jv jw jx jy fq jz"><div class="bz el l di"><div class="lo lp l"/></div></figure><h1 id="0f6e" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">。直到()</h1><p id="c2ef" class="pw-post-body-paragraph ir is hu it b iu li iw ix iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo hn dt translated">这个有点困难，因为<code class="eh jp jq jr js b">takeUntil</code>需要两个可观测量。<code class="eh jp jq jr js b">takeUntil</code>发出值，直到第二个可观察对象发出“某物”或完成。第一个可观察的，例如原始源，然后完成。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff lr"><img src="../Images/b4fa0fe4fd54ceee9397b71d923f83fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m_Zwc-XDjxPM0Dx-oKDMGw.png"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek"><a class="ae jt" href="http://rxmarbles.com/#takeUntil" rel="noopener ugc nofollow" target="_blank">http://rxmarbles.com/#takeUntil</a></figcaption></figure><p id="9957" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">例子用法<br/> </strong>假设你正在收听一个特定页面上的websocket。当然，当您在页面上时，您只需要打开这个websocket的订阅。可以使用<code class="eh jp jq jr js b">takeUntil</code>在routeChange上自动退订。</p><figure class="jv jw jx jy fq jz"><div class="bz el l di"><div class="lo lp l"/></div></figure><h1 id="920f" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">。takeWhile()</h1><p id="2fd9" class="pw-post-body-paragraph ir is hu it b iu li iw ix iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo hn dt translated">你可以把<code class="eh jp jq jr js b">takeWhile</code>看成一个滤镜。可观察对象发出的每个值都被赋予<code class="eh jp jq jr js b">takeWhile</code>。然后测试特定条件的值，并返回一个布尔值。如果返回false，则可观察性完成。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff lr"><img src="../Images/4fd8152992338da2c7f1abcbefc58ab7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LKSC66FwVaoq3GYQJnwg1Q.png"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek"><a class="ae jt" href="http://rxmarbles.com/#takeWhile" rel="noopener ugc nofollow" target="_blank">http://rxmarbles.com/#takeWhile</a></figcaption></figure><p id="80c0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">示例用法<br/> </strong>我给出的关于何时使用<code class="eh jp jq jr js b">take</code>从我的ngrx/store中选择可能存在或可能不存在的数据的示例也可以使用<code class="eh jp jq jr js b">takeWhile</code>来完成。</p><figure class="jv jw jx jy fq jz"><div class="bz el l di"><div class="lo lp l"/></div></figure><h1 id="71ca" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">结论</h1><p id="f801" class="pw-post-body-paragraph ir is hu it b iu li iw ix iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo hn dt translated">虽然这些示例有些虚构，但对<code class="eh jp jq jr js b">first</code>、<code class="eh jp jq jr js b">take</code>、<code class="eh jp jq jr js b">elementAt</code>、<code class="eh jp jq jr js b">takeWhile</code>和<code class="eh jp jq jr js b">takeUntil</code>的简要概述应该会让您更好地理解如何在不使用退订的情况下管理您的订阅。</p></div><div class="ab cl ls lt hc lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="hn ho hp hq hr"><h1 id="ccda" class="kk kl hu bd km kn lz kp kq kr ma kt ku kv mb kx ky kz mc lb lc ld md lf lg lh dt translated">在阿姆斯特丹找工作？</h1><p id="0dd6" class="pw-post-body-paragraph ir is hu it b iu li iw ix iy lj ja jb jc lk je jf jg ll ji jj jk lm jm jn jo hn dt translated">我在Sytac工作，是一名高级前端开发人员，我们正在寻找精通Angular、React、Java或Scala的中级/高级开发人员。Sytac是荷兰一家雄心勃勃的咨询公司，为银行、航空、政府和零售部门的许多知名公司工作。你可以想到荷兰国际集团、荷兰皇家航空公司、德勤公司、阿霍尔德·德尔海兹公司、ABN·AMRO公司、弗洛拉·荷兰公司等等。</p><p id="d569" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从个人的观点来看，Sytac确实与他们的客户组合不同，但也与他们如何照顾他们的员工不同。他们真的很关心员工的福利。除了丰厚的薪水(50K-75k)，你会在与咨询经理的定期会议中注意到这一点，还会从他们组织的活动数量以及他们为让所有员工满意而提供的所有其他津贴中注意到这一点。</p><p id="4b14" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你认为你有能力与最优秀的人共事，请发邮件给我，我很乐意告诉你更多..</p><figure class="jv jw jx jy fq jz"><div class="bz el l di"><div class="me lp l"/></div></figure></div></div>    
</body>
</html>