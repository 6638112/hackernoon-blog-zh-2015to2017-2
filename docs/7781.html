<html>
<head>
<title>Cluster-in-a-box: How to deploy one or more Kubernetes clusters to a single box.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">集群系统:如何将一个或多个Kubernetes集群部署到一个单独的系统中。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/cluster-in-a-box-how-to-deploy-one-or-more-kubernetes-clusters-to-a-single-box-76ff3b8e92d7?source=collection_archive---------10-----------------------#2017-11-08">https://medium.com/hackernoon/cluster-in-a-box-how-to-deploy-one-or-more-kubernetes-clusters-to-a-single-box-76ff3b8e92d7?source=collection_archive---------10-----------------------#2017-11-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="9838" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在Linux基金会和Canonical最近的一次合作中，我们为CKA考试<a class="ae jq" href="https://www.cncf.io/certification/expert" rel="noopener ugc nofollow" target="_blank"><em class="jp"/></a><em class="jp">设计了一个架构。为了让考试尽可能地经济实惠，我们需要优化我们的资源利用率——理想情况下，通过在单个虚拟机上运行多个Kubernetes集群。我们是这样做的。</em></p><p id="0c7b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Kubernetes开发了一个专门的追随者，因为它允许我们以声明的方式构建高效、健壮的架构。高效是因为它们构建在容器<a class="ae jq" href="https://hackernoon.com/tagged/technology" rel="noopener ugc nofollow" target="_blank">技术</a>之上，健壮是因为它们是分布式的。</p><p id="a35a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">虽然我们在Kubernetes上构建的应用程序的分布式本质允许它们在可用性方面更加健壮，但具有讽刺意味的是，同样的架构有可能在测试的容易性方面降低应用程序的健壮性。考虑以下通用架构:</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff jr"><img src="../Images/71e07155ed6dc05849432234cef3f1f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lBieDHXUiz-1IrW6WNxbbw.png"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Generic multi-cluster deployment of Kubernetes on top of VMs</figcaption></figure><p id="ab8e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">测试构建在这种部署之上的应用程序至少有两个主要挑战。一个是测试<a class="ae jq" href="https://hackernoon.com/tagged/deployment" rel="noopener ugc nofollow" target="_blank">部署</a>所需的资源成本。您可能需要许多虚拟机来充分模拟您的应用程序。如果您想要并行化您的测试，您将为每个部署支付该成本。</p><p id="dca4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">另一个挑战是启动部署所需的时间，我们需要等待虚拟机实例化、可用、调配和联网。任何可以节省的时间都可以用于更多的测试。</p><h1 id="21a0" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">我们需要更深入。</h1><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff lf"><img src="../Images/295143cde517dd60f632e18bf4491324.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tKVqCEi1EPX-QI6IzbEtqw.png"/></div></div></figure><p id="c26d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们通过利用容器技术对抗我们的<em class="jp">流程</em>，使我们的应用程序更加高效。如果我们可以做同样的事情，但是用它来对抗我们的<em class="jp">机器</em>会怎么样？如果我们能让我们的部署看起来像这样会怎么样:</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff jr"><img src="../Images/76bf5dd5424d8f5886615a0cabeb6a9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nXIy0p7UPZSIJOe3UNwuIg.png"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Generic multi-cluster deployment of Kubernetes on top of Linux containers</figcaption></figure><p id="b4cc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">…一个带有多个容器的盒子，充当我们集群的节点。使用这种体系结构，我们可以节省资源，因为虽然我们可能需要一台较大的机器作为主机，但我们不会将资源浪费在许多未充分利用的较小机器上。此外，我们节省了大量时间，无需等待容器被实例化并变得可用——它们几乎与docker容器一样即时。也许最令人兴奋的是，我们可以将此部署保存为虚拟机映像，从而极大地降低配置时间成本，并使我们的部署具有可重复性。</p><h1 id="5b82" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">我们可以重建他。我们有技术。</h1><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff lg"><img src="../Images/6c409100ea20fe6099454c0713c37358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3p48g9J1ho1TtXnIK4o2iA.png"/></div></div></figure><p id="bb6d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">虽然Kubernetes使用了容器技术来包装流程，但我们需要一种能够将整个系统容器化的技术。从他们的文档来看，Linux容器非常适合这一点:</p><blockquote class="lh li lj"><p id="5e2c" class="ir is jp it b iu iv iw ix iy iz ja jb lk jd je jf ll jh ji jj lm jl jm jn jo hn dt translated">LXC的目标是创建一个尽可能接近标准Linux安装的环境，但不需要一个单独的内核。</p></blockquote><p id="6bf6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">完美。让我们试一试。</p><pre class="js jt ju jv fq ln lo lp lq aw lr dt"><span id="0eed" class="ls ki hu lo b fv lt lu l lv lw">$ lxc launch ubuntu:16.04 hello-kubernetes</span><span id="d6aa" class="ls ki hu lo b fv lx lu l lv lw">Creating hello-kubernetes<br/>Starting hello-kubernetes</span><span id="1ae4" class="ls ki hu lo b fv lx lu l lv lw">$ lxc exec hello-kubernetes /bin/bash</span><span id="b706" class="ls ki hu lo b fv lx lu l lv lw">root@hello-kubernetes:~# lsb_release -a</span><span id="8051" class="ls ki hu lo b fv lx lu l lv lw">No LSB modules are available.<br/>Distributor ID: Ubuntu<br/>Description: Ubuntu 16.04.3 LTS<br/>Release: 16.04<br/>Codename: xenial</span><span id="befc" class="ls ki hu lo b fv lx lu l lv lw">root@hello-kubernetes:~# systemctl list-units</span><span id="f8ce" class="ls ki hu lo b fv lx lu l lv lw">  UNIT                                    LOAD   ACTIVE     SUB       DESCRIPTION<br/>  dev-sda1.device                         loaded activating tentative dev-sda1.device<br/>  -.mount                                 loaded active     mounted   /<br/>  dev-.lxd\x2dmounts.mount                loaded active     mounted   /dev/.lxd-mounts<br/>  dev-full.mount                          loaded active     mounted   /dev/full<br/>  dev-fuse.mount                          loaded active     mounted   /dev/fuse</span><span id="41de" class="ls ki hu lo b fv lx lu l lv lw">...</span></pre><p id="463d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">嘣。完整的集装箱系统。</p><h1 id="bc3d" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">它还活着！</h1><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff lg"><img src="../Images/53fe40735bc4f00922a2962cf43116c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*odwPM8aYgzWwE6kHRFu-jQ.png"/></div></div></figure><p id="cf74" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在我们知道了如何在我们的主机上创建一个容器化的系统，构建一个Kubernetes集群看起来很正常。你可以使用任何你喜欢的工具，但是我在这里将使用<a class="ae jq" href="https://conjure-up.io/" rel="noopener ugc nofollow" target="_blank">召唤</a>和<a class="ae jq" href="https://www.ubuntu.com/kubernetes" rel="noopener ugc nofollow" target="_blank"> CDK </a>，因为它已经知道如何创建linux容器并将kubernetes部署到这些容器中。</p><p id="acc7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们开始吧。首先，我们将告诉dream-up我们想要部署Kubernetes:</p><pre class="js jt ju jv fq ln lo lp lq aw lr dt"><span id="22f5" class="ls ki hu lo b fv lt lu l lv lw">$ conjure-up canonical-kubernetes</span></pre><p id="a3a5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这将在终端中打开一个向导，它将首先询问我们希望部署到哪里。我们将选择本地主机:</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff ly"><img src="../Images/7bf0d2d4894c7e0e9dadd6f95664b3c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kcG8xisNY1-QhaT-ld0Ajg.png"/></div></div></figure><p id="524f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">接下来单击“部署所有6个剩余的应用程序”:</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff ly"><img src="../Images/15f7cf411206cc5187e3402fa14d733a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o_G6qY4i4GKtSsXsEDHs5Q.png"/></div></div></figure><p id="b18d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后在集群启动时稍等片刻:</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff ly"><img src="../Images/49d97376a8147906e4bcccde13e245aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T33A7gSBDmYx6GCD83BC4w.png"/></div></div></figure><p id="01ac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">召唤术会帮你抓到库伯菲德和库伯特尔。单击运行:</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff ly"><img src="../Images/ae2201fc9bbcfb4c145898419c3a57e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OUlce80XRLN2ElvLRS1jpA.png"/></div></div></figure><p id="fef4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就这样，现在有一个Kubernetes集群运行在您的虚拟机上的Linux容器之上:</p><pre class="js jt ju jv fq ln lo lp lq aw lr dt"><span id="1cc8" class="ls ki hu lo b fv lt lu l lv lw">$ kubectl cluster-info</span><span id="6283" class="ls ki hu lo b fv lx lu l lv lw">Kubernetes master is running at <a class="ae jq" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a><br/>Heapster is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/heapster/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/heapster/proxy</a><br/>KubeDNS is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/kube-dns/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/kube-dns/proxy</a><br/>kubernetes-dashboard is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/kubernetes-dashboard/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/kubernetes-dashboard/proxy</a><br/>Grafana is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-grafana/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-grafana/proxy</a><br/>InfluxDB is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-influxdb/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-influxdb/proxy</a></span></pre><h1 id="4b1b" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">我们再做一个吧。</h1><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff lz"><img src="../Images/8fd7f6129c139cea2681ffbcc90f75f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x6SawBc_wtboaS_pQsMN9g.jpeg"/></div></div></figure><p id="7c0f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们也没有理由不能部署多个Kubernetes集群。我将在这里继续使用变戏法，因为它使它变得容易，但你可以随意使用你选择的工具。这次让我们以无头模式运行召唤:</p><pre class="js jt ju jv fq ln lo lp lq aw lr dt"><span id="7a1f" class="ls ki hu lo b fv lt lu l lv lw">$ conjure-up canonical-kubernetes localhost conjure-up-localhost-642 cluster2</span><span id="e1d3" class="ls ki hu lo b fv lx lu l lv lw">[info] Summoning canonical-kubernetes to localhost<br/>[info] Creating Juju model.<br/>[info] Juju model created.<br/>[info] Running step: pre-deploy.<br/>[info] Deploying kubernetes-master...<br/>[info] Deploying flannel...<br/>[info] Deploying kubernetes-worker...<br/>[info] Deploying easyrsa...<br/>[info] Deploying kubeapi-load-balancer...<br/>[info] Deploying etcd...<br/>[info] Exposing kubeapi-load-balancer.<br/>[info] etcd: deployed, installing.<br/>[info] kubeapi-load-balancer: deployed, installing.<br/>[info] easyrsa: deployed, installing.<br/>[info] flannel: deployed, installing.<br/>[info] kubernetes-master: deployed, installing.<br/>[info] Setting relation easyrsa:client &lt;-&gt; etcd:certificates<br/>[info] Exposing kubernetes-worker.<br/>[info] kubernetes-worker: deployed, installing.<br/>[info] Setting relation flannel:cni &lt;-&gt; kubernetes-worker:cni<br/>[info] Setting relation easyrsa:client &lt;-&gt; kubeapi-load-balancer:certificates<br/>[info] Setting relation kubeapi-load-balancer:apiserver &lt;-&gt; kubernetes-master:kube-api-endpoint<br/>[info] Setting relation kubeapi-load-balancer:website &lt;-&gt; kubernetes-worker:kube-api-endpoint<br/>[info] Setting relation flannel:cni &lt;-&gt; kubernetes-master:cni<br/>[info] Setting relation etcd:db &lt;-&gt; flannel:etcd<br/>[info] Setting relation easyrsa:client &lt;-&gt; kubernetes-master:certificates<br/>[info] Setting relation kubernetes-master:kube-control &lt;-&gt; kubernetes-worker:kube-control<br/>[info] Setting relation kubeapi-load-balancer:loadbalancer &lt;-&gt; kubernetes-master:loadbalancer<br/>[info] Setting relation easyrsa:client &lt;-&gt; kubernetes-worker:certificates<br/>[info] Setting relation etcd:db &lt;-&gt; kubernetes-master:etcd<br/>[info] Waiting for deployment to settle.<br/>[info] Running step: 00_deploy-done.<br/>[info] Model settled.<br/>[info] Running post-deployment steps<br/>[info] Running step: step-01_get-kubectl.<br/>[info] Running step: step-02_cluster-info.<br/>[info] Running step: step-03_enable-cni.<br/>[info] Installation of your big software is now complete.<br/>[warning] Shutting down</span></pre><p id="8ffe" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是我们的第二个集群:</p><pre class="js jt ju jv fq ln lo lp lq aw lr dt"><span id="29b7" class="ls ki hu lo b fv lt lu l lv lw">$ kubectl cluster-info</span><span id="0e0f" class="ls ki hu lo b fv lx lu l lv lw">Kubernetes master is running at <a class="ae jq" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a><br/>Heapster is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/heapster/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/heapster/proxy</a><br/>KubeDNS is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/kube-dns/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/kube-dns/proxy</a><br/>kubernetes-dashboard is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/kubernetes-dashboard/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/kubernetes-dashboard/proxy</a><br/>Grafana is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-grafana/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-grafana/proxy</a><br/>InfluxDB is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-influxdb/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-influxdb/proxy</a></span></pre><h1 id="e4fa" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">让它具有可复制性。</h1><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff ma"><img src="../Images/0926358e27f3f6ccead0d1f1224031ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LvgIc8tSlSwWwjFVbfAHJg.jpeg"/></div></div></figure><blockquote class="lh li lj"><p id="a160" class="ir is jp it b iu iv iw ix iy iz ja jb lk jd je jf ll jh ji jj lm jl jm jn jo hn dt translated">我被刺伤、枪击、毒死、冷冻、绞死、电死、烧伤。每天早上我醒来时身上没有一点擦伤，挡泥板上也没有一点凹痕。我是神仙。</p></blockquote><p id="3a73" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在我们已经有了一个相当复杂的部署，让我们看看如何快速复制它。首先，我们将创建实例的AMI:</p><pre class="js jt ju jv fq ln lo lp lq aw lr dt"><span id="ff22" class="ls ki hu lo b fv lt lu l lv lw">$ aws ec2 create-image --instance-id i-02c547825d34d345e --name cluster-in-a-box<br/>ami-5f9eb33a</span></pre><p id="9d24" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后在下面的代码中启动它和ssh的实例:</p><pre class="js jt ju jv fq ln lo lp lq aw lr dt"><span id="1330" class="ls ki hu lo b fv lt lu l lv lw">$ aws ec2 run-instances --count 1 --image-id ami-5f9eb33a --instance-type t2.xlarge --key-name mykey</span></pre><p id="6408" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们检查一下我们的集群。首先是原始集群:</p><pre class="js jt ju jv fq ln lo lp lq aw lr dt"><span id="07a1" class="ls ki hu lo b fv lt lu l lv lw">$ kubectl cluster-info</span><span id="ff79" class="ls ki hu lo b fv lx lu l lv lw">Kubernetes master is running at <a class="ae jq" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a><br/>Heapster is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/heapster/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/heapster/proxy</a><br/>KubeDNS is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/kube-dns/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/kube-dns/proxy</a><br/>kubernetes-dashboard is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/kubernetes-dashboard/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/kubernetes-dashboard/proxy</a><br/>Grafana is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-grafana/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-grafana/proxy</a><br/>InfluxDB is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-influxdb/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-influxdb/proxy</a></span></pre><p id="ea6d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们的第二个集群:</p><pre class="js jt ju jv fq ln lo lp lq aw lr dt"><span id="f920" class="ls ki hu lo b fv lt lu l lv lw">$ kubectl cluster-info</span><span id="0449" class="ls ki hu lo b fv lx lu l lv lw">Kubernetes master is running at <a class="ae jq" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a><br/>Heapster is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/heapster/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/heapster/proxy</a><br/>KubeDNS is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/kube-dns/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/kube-dns/proxy</a><br/>kubernetes-dashboard is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/kubernetes-dashboard/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/kubernetes-dashboard/proxy</a><br/>Grafana is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-grafana/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-grafana/proxy</a><br/>InfluxDB is running at <a class="ae jq" href="http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-influxdb/proxy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/api/v1/namespaces/kube-system/services/monitoring-influxdb/proxy</a></span></pre><p id="295c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">看起来不错！</p><h1 id="1a11" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">结论</h1><p id="176a" class="pw-post-body-paragraph ir is hu it b iu mb iw ix iy mc ja jb jc md je jf jg me ji jj jk mf jm jn jo hn dt translated">linux容器允许我们将完整的Linux系统容器化。我们可以利用这一点快速、廉价地部署Kubernetes集群——非常适合测试部署，而不会产生不必要的资源和时间开销。</p><p id="93b4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你能想到Kubernetes盒中集群的其他用途吗？我很想听听这件事——请在下面留言！</p><p id="027f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你对此感兴趣，<a class="ae jq" rel="noopener" href="/@marcoceppi"> Marco Ceppi </a>和我将<a class="ae jq" href="https://events.linuxfoundation.org/events/kubecon-and-cloudnativecon-north-america/program/schedule" rel="noopener ugc nofollow" target="_blank">在Kubecon 2017 </a>上就此发表演讲。希望在那里见到你！</p><figure class="js jt ju jv fq jw"><div class="bz el l di"><div class="mg mh l"/></div></figure></div></div>    
</body>
</html>