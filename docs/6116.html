<html>
<head>
<title>How to create a favorite animation with anime-js.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用动漫创作出喜欢的动画-js？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-create-a-favorite-animation-with-anime-js-5f9ec02c80dd?source=collection_archive---------8-----------------------#2017-09-04">https://medium.com/hackernoon/how-to-create-a-favorite-animation-with-anime-js-5f9ec02c80dd?source=collection_archive---------8-----------------------#2017-09-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/8cbcf3a4b4b21d6f87a66773b3bb12ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*WBV-0RX42DncIvdVtotvCw.jpeg"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Evan Zodl’s Star Fractalized (3 levels) — Jorge Jaramillo — flickr</figcaption></figure><p id="f4cf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是我第一篇关于<a class="ae ka" rel="noopener" href="/@mikael_ainalem/how-to-create-a-check-mark-animation-with-anime-js-86781951a67">如何用anime-js </a>制作勾号动画的后续。这一篇将会更深入地探讨如何用anime-js构建更高级的动画。前一篇文章更多的是一个介绍性的教程。</p><p id="4624" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">制作简单的动画很棒。总的来说，保持事情简单是一个伟大的咒语。少即是多。然而，在某些情况下，你有时确实想走得更远一点。有些时候，你确实想润色某些过渡。变形、多维动画和变形是我们现在越来越多看到的技术。几年前，从2017年开始回顾，这些都不是用网络技术建造的。他们更可能是在视频中，某种预动画图形或其他非web的东西(flash等)。现在，我们已经看到了这些基于插件/预渲染动画的转变。除了最近有某种复兴的动画GIF。我们也看到越来越多精心制作的互动动画。由于现代浏览器的进步，这些动画现在在HTML5中实现。使用web技术通常可以更好地控制这些交互。此外，它还减少了移动设备的占用空间。如今，减少页面加载时间至关重要。尤其是现在移动端的使用量已经超过了桌面端。</p><p id="a96a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这篇文章中，我将使用更先进的布局实现一个更精致的<a class="ae ka" href="https://hackernoon.com/tagged/animation" rel="noopener ugc nofollow" target="_blank">动画</a>。前一篇文章中的复选标记动画更加一维。动画步骤按顺序出现。在这里，更多的事情同时发生。这一条是用来将推文标记为收藏的:<a class="ae ka" href="https://dribbble.com/shots/1884504-Twitter-Fav" rel="noopener ugc nofollow" target="_blank"><strong class="je hv">Twitter-Fav by Brian W from Dribble</strong></a>。这是一部由设计师设计的精美动画，注重视觉细节。为了重新创建它，我将使用一个截屏工具在屏幕外记录它。这将允许我剖析和设置不同部分的时间。和上一篇文章一样，让我们从最终结果开始。然后让我们把它们分解成一个一个讨论的步骤。结果如下:</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff kb"><img src="../Images/a0b6f5529d44364948d0b4a85ec6d4c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:268/1*BAgmnw_X5iFDzifqc617uQ.gif"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Twitter-fav</figcaption></figure><p id="0420" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">使用截屏工具是分解复杂动画的一个好方法。它可以让你停止和暂停，寻找某些位置，并降低帧速率。这样做有助于你更深入地理解如何制作动画。如果你对细节很感兴趣，那么确保你使用了一个在回放时显示毫秒的屏幕记录器。以毫秒为单位，你可以更精确地重建时间。</p><p id="d007" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了重现整个过程，我使用了HTML、<a class="ae ka" href="https://hackernoon.com/tagged/css" rel="noopener ugc nofollow" target="_blank"> CSS </a>、SVG和Javascript的组合。这里值得注意的是CSS和SVG是重叠的技术。你可以在其中任何一个里创造一些东西。根据经验，我倾向于对简单的形状使用CSS。我发现CSS语法通常更容易使用。在其他一些情况下，SVG更适合。有些事情现在在CSS中很难做，比如贝塞尔曲线。总而言之，什么时候用一个胜过另一个，要看上下文。对我来说，没有明确的规则anno 2017什么时候使用哪个。有时我用一种，有时用另一种，有时我把它们结合起来用。</p><p id="1384" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当重新制作动画时，通常最好把它分解成更小的部分。一个接一个地创建这些部分，更容易保持焦点。这也将使这个过程看起来不那么势不可挡。其实有点像这篇文章的作文。对我来说，这个动画最好分成以下几个部分:</p><ul class=""><li id="c631" class="kg kh hu je b jf jg jj jk jn ki jr kj jv kk jz kl km kn ko dt translated">缩小灰色不活动恒星的尺度</li><li id="1c80" class="kg kh hu je b jf kp jj kq jn kr jr ks jv kt jz kl km kn ko dt translated">放大光环</li><li id="630c" class="kg kh hu je b jf kp jj kq jn kr jr ks jv kt jz kl km kn ko dt translated">溅起的水珠</li><li id="7abc" class="kg kh hu je b jf kp jj kq jn kr jr ks jv kt jz kl km kn ko dt translated">最终升级活跃的恒星。</li></ul><p id="1df6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后，以下几何形状将依次创建上述台阶:</p><ul class=""><li id="91d1" class="kg kh hu je b jf jg jj jk jn ki jr kj jv kk jz kl km kn ko dt translated">贝塞尔曲线</li><li id="e280" class="kg kh hu je b jf kp jj kq jn kr jr ks jv kt jz kl km kn ko dt translated">环</li><li id="de4d" class="kg kh hu je b jf kp jj kq jn kr jr ks jv kt jz kl km kn ko dt translated">环</li><li id="da4b" class="kg kh hu je b jf kp jj kq jn kr jr ks jv kt jz kl km kn ko dt translated">用不同的颜色绘制不活跃的星星的相同的贝塞尔曲线</li></ul><p id="000a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这四颗恒星中，只有一颗形状有些复杂的恒星比较突出。这里，矢量(SVG)编辑器再次派上了用场。下面是它在诸如Inkscape这样的编辑器中的样子。请注意使用平滑节点(控制柄)来创建圆角边。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff ku"><img src="../Images/fdf545f7a5be52317377aff395b32add.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*lii4P8nIlzYSwM1mzkG2xw.png"/></div></figure><p id="bc83" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">上面的代码类似于下面的代码(省略了外部的svg节点)。早先在<em class="kv"> d </em>属性字符串中发现的“c”告诉我们这是一条贝塞尔曲线。</p><pre class="kc kd ke kf fq kw kx ky kz aw la dt"><span id="7891" class="lb lc hu kx b fv ld le l lf lg">&lt;path class=”favorite__inactive”<br/>      d=”M50.214 10.067c6.4.204 10.753 25.648 10.753 25.648s26.256–1.803 27.13 2.857c.874 4.66–20.04 16.642–20.04 16.642s9.537 24.303 5.523 26.817c-4.015 2.515–23.545–14.023–23.545–14.023S29.333 84.493 25.633 81.785c-3.7–2.71 6.657–26.472 6.657–26.472S11.234 43.94 12.383 39.108c1.15–4.832 26.55–3.393 26.55–3.393s4.88–25.853 11.28–25.648z”<br/>      fill=”#dbdedd” /&gt;</span></pre><p id="a68a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们现在添加第一个动画步骤，缩小明星。让我们再次使用anime-js时间线，因为它可以很好地控制动画的不同部分。将SVG添加到我们的HTML文档后，下面的Javascript代码将完成这个任务:</p><pre class="kc kd ke kf fq kw kx ky kz aw la dt"><span id="c78d" class="lb lc hu kx b fv ld le l lf lg">timeline<br/>.add({<br/>  targets: '.favorite__inactive',<br/>  scale: {<br/>    value: [1, 0],<br/>    duration: 400,<br/>    delay: 1000,<br/>    easing: 'easeInQuad'<br/>  }<br/>})</span></pre><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff lh"><img src="../Images/e724df2f04eb38ac1f5377ec3a24e2b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:266/1*wRKpIen7i0rYA5YSzFNKQQ.gif"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Downscaling the star</figcaption></figure><p id="f05f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">到目前为止，这一步应该非常简单。同样，节点的类名创建了DOM节点和它的动画之间的关系。恒星在一秒钟内从1(可见)变到0(完全消失)。注意放松。它被设置为“in ”,以便在缩小尺度时加速启动。</p><p id="d106" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下一步是创建更棘手的光环。为了创建光环，让我们使用两个普通的圆圈。一个在里面，一个在外面。外圈是不透明的，用来设置光晕颜色。内圆需要是透明的，以显示光环内的其他元素。注意:光环动画在星的缩小结束之前开始。因此，光环内的元素可见是很重要的。SVG遮罩是在SVG中创建透明部分的一种便捷方式。SVG遮罩在这里有更详细的讨论:<a class="ae ka" href="https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Clipping_and_masking" rel="noopener ugc nofollow" target="_blank">裁剪和遮罩</a>。本质上，您创建了一个与其他SVG内容组合的二进制(黑白)蒙版图像。然后蒙版会在它所应用的不透明物体上打孔。该特定对象下方和内部的其他对象现在将可见。让我们看看这在代码中是什么样子的:</p><pre class="kc kd ke kf fq kw kx ky kz aw la dt"><span id="2c3f" class="lb lc hu kx b fv ld le l lf lg">&lt;defs&gt;<br/>  &lt;mask id="favorite__halo-mask"&gt;<br/>    &lt;rect width="100%" height="100%" fill="white"/&gt;<br/>    &lt;circle class="favorite__halo-inner" cx="50" cy="50" r="0" fill="black"&gt;&lt;/circle&gt;<br/>  &lt;/mask&gt;<br/>&lt;/defs&gt;<br/>&lt;circle class="favorite__halo-outer" cx="50" cy="50" r="48" fill="#feb53c" mask="url(#favorite__halo-mask)"&gt;&lt;/circle&gt;</span></pre><p id="6035" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这里首先要注意的是最后一个元素。这是外圈，<em class="kv">最喜欢的__halo-outer。</em>它是一个常规的SVG圆形元素，具有比例、颜色和遮罩属性。这里的屏蔽语法有点奇怪，因为它通过url及其id来引用掩码。无论如何，它指向了面具元素，T4最喜欢的光环面具。它又包含内圆节点，另一个SVG圆。这总共给了我们上面提到的两个圆圈。本质上，我们现在已经拥有了制作这部分动画所需的一切。另外值得一提的是面膜里面的白色rect。这个矩形标记了应该保持完整的区域。即内圈之外的一切。不包含此节点将使掩码不起作用。</p><p id="d637" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">作为起点，内圆完全消失(半径<em class="kv"> r </em> = 0px)。这里，让我们再一次应用偏移和延迟的概念。这是内圈的升级与外圈开始时相比有点延迟的地方。这样做会造成光晕越来越薄的效果。在代码中:</p><pre class="kc kd ke kf fq kw kx ky kz aw la dt"><span id="c458" class="lb lc hu kx b fv ld le l lf lg">timeline<br/>// ...<br/>.add({<br/>  targets: '.favorite__halo-outer',<br/>  scale: {<br/>    value: [0, 1],<br/>    duration: 400,<br/>    delay: 1400,<br/>    easing: 'easeOutQuad'<br/>  },<br/>  offset: 0<br/>})<br/>.add({<br/>  targets: '.favorite__halo-inner',<br/>  r: {<br/>    value: [0, 49],<br/>    duration: 300,<br/>    delay: 1500,<br/>    easing: 'easeOutQuad'<br/>  },<br/>  offset: 0<br/>})</span></pre><p id="34f9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">请注意上面的延迟差异。这为我们提供了以下动画:</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff kb"><img src="../Images/bf1204d3a3cf209cce032d89426ff859.png" data-original-src="https://miro.medium.com/v2/resize:fit:268/1*JsycMqMSxOExtTeYfBDLNg.gif"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Halo animation (Slow motion)</figcaption></figure><p id="d493" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">再来看看上面的糖屑、水花和多余的糖。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff li"><img src="../Images/a3786d28db995e5507aa995325065450.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*t3dlcjTCVi_MmL_RytBrEQ.gif"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Disney’s Goofy</figcaption></figure><p id="cb53" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于卡通和动画来说，飞溅并不是什么新概念。它们经常被用来夸大动作和加强周围的动作。这个动画也没什么不同。在这里，飞溅强调和强调用户的行动。用户界面给了用户正面的强化，创造了良好的UX。这一魅力时刻将鼓励用户将更多的推文标记为收藏夹。一般来说，这将提高用户参与度。</p><p id="534a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">总共有五个水花，它们的位置角度均匀。它们本质上是同时在五个不同的地方运行的同一个动画。在这里重用相同的动画是重新创建sprinkles部分的最快方法。我们需要做的就是创建一个sprinkles。重复动画5次。最后，将5个重复的动画以均匀的角度展开。在HTML中:</p><pre class="kc kd ke kf fq kw kx ky kz aw la dt"><span id="4bc3" class="lb lc hu kx b fv ld le l lf lg">&lt;div class="favorite__sprinkle"&gt; // 1st sprinkle<br/>  &lt;div class="favorite__sprinkle-circle"&gt;&lt;/div&gt;<br/>&lt;/div&gt;<br/>&lt;div class="favorite__sprinkle"&gt; // 2nd sprinkle<br/>  &lt;div class="favorite__sprinkle-circle"&gt;&lt;/div&gt;<br/>&lt;/div&gt;<br/>...<br/>&lt;div class="favorite__sprinkle"&gt; // 5th sprinkle<br/>  &lt;div class="favorite__sprinkle-circle"&gt;&lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="765c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">360度除以5等于72度，这是用来旋转节点的值。此外，移位将确保将第三颗星置于6点钟位置(180度)。通过一些简单的数学计算，我们可以计算出这个位移为36度(72 / 2)。让我们以72度的间隔展开节点，通过旋转节点，从36度开始。在CSS中，这意味着应用变换规则及其旋转值。值旋转(36)，旋转(108)，旋转(180)，…将布局节点。在代码中，这看起来像:</p><pre class="kc kd ke kf fq kw kx ky kz aw la dt"><span id="0b45" class="lb lc hu kx b fv ld le l lf lg">.favorite__sprinkle {<br/>  ...<br/>  transform: rotate(36deg);<br/>}</span><span id="1b29" class="lb lc hu kx b fv lj le l lf lg">.favorite__sprinkle:nth-child(2) {<br/>  transform: rotate(108deg);<br/>}</span><span id="39c0" class="lb lc hu kx b fv lj le l lf lg">...</span><span id="80c4" class="lb lc hu kx b fv lj le l lf lg">.favorite__sprinkle:nth-child(5) {<br/>  transform: rotate(324deg);<br/>}</span></pre><p id="9558" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">动画本身由3部分组成。分别是:一个交叉渐变(不透明度)，拉伸圆，移动圆。为了拉伸节点，我使用了一维标尺。在写这篇文章的时候，我发现自己有点粗心大意。我使用CSS <em class="kv">高度</em>规则来拉伸糖屑。应该使用<em class="kv">比例</em>而不是<em class="kv">宽度</em> / <em class="kv">高度</em>来改变元素比例。不这样做通常会更慢。这个自<em class="kv">平移</em> / <em class="kv">缩放</em> / <em class="kv">旋转</em>都是硬件(GPU)加速的。与所有优化一样，在需要的地方应用它们，并遵循指导原则。下面是整个序列的样子:</p><pre class="kc kd ke kf fq kw kx ky kz aw la dt"><span id="5896" class="lb lc hu kx b fv ld le l lf lg">.add({<br/>  targets: '.favorite__sprinkle',<br/>  opacity: {<br/>    value: [0, 1],<br/>    ...<br/>})<br/>.add({<br/>  targets: '.favorite__sprinkle-circle',<br/>  height: {<br/>    value: [5, 12],<br/>    ...<br/>})<br/>.add({<br/>  targets: '.favorite__sprinkle-circle',<br/>  height: {<br/>    value: [12, 5],<br/>    ...<br/>})<br/>.add({<br/>  targets: '.favorite__sprinkle-circle',<br/>  opacity: {<br/>    value: [1, 0],<br/>    ...<br/>})<br/>.add({<br/>  targets: '.favorite__sprinkle-circle',<br/>  translateY: {<br/>    value: [0, -28],<br/>    ...<br/>});</span></pre><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff lk"><img src="../Images/196d99788f311547f755fbda9b3abfc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:320/1*3RxGNW71SN9fuZWy0z00Ww.gif"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Sprinkles</figcaption></figure><p id="e19f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后一部分是第一步的逆过程。这是恒星再次放大的地方。现在，在它活跃的颜色中。我不会涉及这一部分，因为它与第一步相同。</p><p id="819e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">瞧，就是这样！下面是codepen上的源代码。</p><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="ll lm l"/></div></figure><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="ln lm l"/></div></figure></div></div>    
</body>
</html>