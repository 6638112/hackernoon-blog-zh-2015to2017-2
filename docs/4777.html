<html>
<head>
<title>PumpkinDB: What’s Next?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PumpkinDB:接下来呢？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/pumpkindb-whats-next-cd530fae8f87?source=collection_archive---------13-----------------------#2017-06-21">https://medium.com/hackernoon/pumpkindb-whats-next-cd530fae8f87?source=collection_archive---------13-----------------------#2017-06-21</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/03cc82dabeb1c1394c6eb48d9cf1bd18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jKeNWMsXqFjNnL5rGPBaTQ.jpeg"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Image courtesy of <a class="ae ih" href="https://unsplash.com/@julesrsh" rel="noopener ugc nofollow" target="_blank">Julia Raasch</a></figcaption></figure><div class=""/><p id="9cc9" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">就在最近，我们<a class="ae ih" href="https://github.com/PumpkinDB/PumpkinDB/releases/tag/v0.2.0" rel="noopener ugc nofollow" target="_blank">发布了PumpkinDB 0.2 </a>，这是对我们第一次发布的一个很好的改进，吸引了相当多的关注者，尽管只是一个很小的声明(见鬼，只是一个很小的网站链接，我们没有其他材料！).随着这个版本的发布，我们希望吸引下一波早期采用者和贡献者来帮助我们解决项目的下一个挑战。</p><blockquote class="kf kg kh"><p id="eca1" class="jh ji ki jj b jk jl jm jn jo jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd ke hn dt translated">PumpkinDB本质上是一个数据库<a class="ae ih" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程</a>环境，很大程度上受到了<a class="ae ih" href="https://en.wikipedia.org/wiki/MUMPS" rel="noopener ugc nofollow" target="_blank">腮腺炎</a>背后核心思想的启发。它没有使用M，而是使用了受Forth启发的基于堆栈的语言PumpkinScript。它没有分层键，而是有一个平面键名称空间，一旦设置了值，就不允许覆盖它们。不变性的核心动机是，随着存储成本的下降，擦除数据实际上是一个战略错误。</p><p id="fb2c" class="jh ji ki jj b jk jl jm jn jo jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd ke hn dt translated">虽然不是为通用编程而设计的，但它的主要目标是促进构建专用的特定于应用程序的通用数据库，特别关注不变性，并尽可能靠近存储处理数据，尽可能减少通信损失。</p></blockquote><p id="20c4" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在这个版本中，最显著的外部变化是将PumpkinDB分成多个板条箱。为什么这很重要？最大的好处是，现在人们可以:</p><p id="8ffa" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="ki"> a) </em>将PumpkinDB嵌入到他们的Rust(也许很快，C)应用程序<em class="ki">和</em> <br/> <em class="ki"> b) </em>构建他们自己的定制的PumpkinDB兼容服务器，非常容易地添加或减少功能。</p><p id="3a04" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">毕竟，PumpkinDB首先是一个数据库引擎，这个变化实际上允许我们在它的基础上进行构建。作为一个例子(我希望有足够的能力在相对短的时间内完成这件事)，这个功能将被用来构建一个<a class="ae ih" href="https://eventsourcing.com/es4j/" rel="noopener ugc nofollow" target="_blank"> es4j </a>的继任者——一个<a class="ae ih" href="https://blog.eventsourcing.com/why-use-eventsourcing-database-6b5e2ac61848" rel="noopener ugc nofollow" target="_blank">惰性事件源</a>引擎，它既可以被嵌入(可行的话)也可以被远程访问。</p><p id="fdf3" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这个版本中Dispatcher API的引入使我们能够将标准的库功能分成可管理的模块。非常重要的是，它允许对引擎平滑地添加、重新配置和删除API，因此可以轻松地构建上述定制引擎。</p></div><div class="ab cl km kn hc ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hn ho hp hq hr"><p id="1073" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在开发这个版本时，我冒险开始使用<a class="ae ih" href="http://www.spdk.io/" rel="noopener ugc nofollow" target="_blank"> SPDK </a> —一个非常好的库，它允许绕过内核与NVMe固态硬盘通信，从而实现与控制器的最有效通信，零拷贝读写和最有效地使用底层磁盘，以减少写放大并消除操作和文件系统引入的变量。现在<a class="ae ih" href="https://github.com/PumpkinDB/rust-spdk" rel="noopener ugc nofollow" target="_blank">还为时尚早</a>，但我们的想法是，我们可以开始抽象出我们的底层存储层(我们目前有<a class="ae ih" href="https://symas.com/lightning-memory-mapped-database/" rel="noopener ugc nofollow" target="_blank"> lmdb </a>硬编码)，以便我们可以用其他引擎替换它，以适应不同的用例。一方面，这将允许贡献者添加其他现有的引擎。另一方面，这将是开发原始SSD存储引擎的一个途径，以便从这种类型的硬件中获得最大的好处。那里有很多问题需要解决。它将只是一个为扇区可寻址固态硬盘优化的B+树，还是我们也能增加对字节可寻址设备的支持？它是建立在硬编码的假设之上，还是能够随着时间的推移从使用模式中学习并推断出最佳的存储技术？天空是极限(<em class="ki">但是，当然，我们真正的极限是我们能吸引多少有才华的人来为此做出贡献</em></p></div><div class="ab cl km kn hc ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hn ho hp hq hr"><p id="9a98" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们知道缺乏例子是试图理解PumpkinDB的人最严重的障碍之一，但是不容易做到。为了解决这个问题，我们用Java发布了一个示例应用程序的第一个草案，它使用远程PumpkinDB服务器来管理待办事项列表。虽然它仍然有一点问题(在切换到Rust之后，我们的Java技能肯定萎缩了),并且需要进行重大的重构，但这是一个起点。</p><div class="kt ku kv kw fq ab cb"><figure class="kx hw ky kz la lb lc paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><img src="../Images/182c7470167eeee964dfc068d4fd4350.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*C2EB68fng8H1_qzv9_POQg.png"/></div></figure><figure class="kx hw ky kz la lb lc paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><img src="../Images/2cb024f807a03a1a429b2957b41c2bfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*ma3E8jZ3spcy4rPQv8Nu-w.png"/></div><figcaption class="id ie fg fe ff if ig bd b be z ek ld di le lf">Todo List Example</figcaption></figure></div><p id="687c" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在我最近发表的<a class="ae ih" href="https://blog.eventsourcing.com/removing-obscuring-abstractions-392e74284e47" rel="noopener ugc nofollow" target="_blank">去除模糊的抽象</a>文章中简要解释了它的架构。希望它能澄清一些细节(额外提示:那篇文章中的PumpkinScript说明指向文档！)</p></div><div class="ab cl km kn hc ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hn ho hp hq hr"><p id="1a37" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们梦寐以求的另一个重大变化是口译员的重新培训。现在，它非常简单。它甚至从不将代码转换成任何类型的AST，而是选择完全动态的解释方法。虽然这对于小的、I/O受限的程序来说工作得比较好，但是这些程序变得越复杂，我们就越能看到解释器相当慢(尽管它在<a class="ae ih" href="https://github.com/PumpkinDB/PumpkinDB/blob/master/pumpkindb_engine/src/script/mod.rs#L583-L601" rel="noopener ugc nofollow" target="_blank"> Ackermann函数</a>上比LuaJIT好得多，我仍然不知道为什么)。</p><p id="8952" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">因此，这里的想法是找到一种方法来将PumpkinScript编译成更高级别的VM类型的程序集，同时记住我们的一些独特属性和挑战，例如:事务数据生命周期的粒度管理、临时资源管理(<a class="ae ih" href="https://github.com/PumpkinDB/PumpkinDB/issues/160" rel="noopener ugc nofollow" target="_blank">这个bug </a>正在乞求它)、堆栈抽象、拆分堆和数据库数据指针(这将帮助我们进行零拷贝读取)、固定堆内存分配(用于基于SPDK的存储)等等。</p><p id="4394" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这个想法不仅仅是提高性能或内存管理。这也有助于将其他语言添加到堆栈中。尽管已经有可能为PumpkinScript编写一个transpiler，但删除这一步骤并允许直接编译到VM，并能够重用所有这些功能模块，肯定会使它变得更加简单。</p></div><div class="ab cl km kn hc ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hn ho hp hq hr"><p id="85ad" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">最后，但同样重要的是，我们需要你的反馈、批评和(耶！)投稿。虽然PumpkinDB肯定不适合所有人，但如果你喜欢一些有点古怪的东西，一些在试图窥视<a class="ae ih" href="https://hackernoon.com/tagged/future" rel="noopener ugc nofollow" target="_blank">未来</a>时从过去汲取的东西，一些挑战一些假设并且暂时不必保持向后兼容性的东西，<em class="ki">(好了，够了！那么你可能会喜欢上它。</em></p><figure class="kt ku kv kw fq hw"><div class="bz el l di"><div class="lg lh l"/></div></figure><p id="397b" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">加入我们的<a class="ae ih" href="https://gitter.im/PumpkinDB/Lobby" rel="noopener ugc nofollow" target="_blank"> Gitter chat </a>或简单浏览列表<a class="ae ih" href="https://github.com/PumpkinDB/PumpkinDB/issues?q=is%3Aissue+is%3Aopen+label%3AWhatCanIStartWith%3F" rel="noopener ugc nofollow" target="_blank">“首发问题”</a>——无论哪种方式，欢迎并希望您能享受您的旅程！</p><div class="kt ku kv kw fq ab cb"><figure class="kx hw li kz la lb lc paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="kx hw li kz la lb lc paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="kx hw li kz la lb lc paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="kf kg kh"><p id="f922" class="jh ji ki jj b jk jl jm jn jo jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd ke hn dt translated"><a class="ae ih" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae ih" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae ih" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae ih" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jh ji ki jj b jk jl jm jn jo jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd ke hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae ih" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae ih" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kt ku kv kw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lj"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="kt ku kv kw fq hw"><div class="bz el l di"><div class="lk lh l"/></div></figure></div></div>    
</body>
</html>