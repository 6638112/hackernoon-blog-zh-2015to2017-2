<html>
<head>
<title>Improving component names in React Developer Tools</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">改进React开发工具中的组件名称</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/improving-component-names-in-react-developer-tools-4894247510c5?source=collection_archive---------4-----------------------#2017-02-15">https://medium.com/hackernoon/improving-component-names-in-react-developer-tools-4894247510c5?source=collection_archive---------4-----------------------#2017-02-15</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="5aaa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">React开发者工具是React.js开发者体验中令人敬畏的一部分，当你挖掘未知的代码库时——或者过一会儿你自己的代码库。</p><p id="a342" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但有时它会失败，并显示您的组件名称为<code class="eh jq jr js jt b">&lt;Unknown&gt;</code>。为什么？让我们浏览一下不同的组件类型，看看它们的名称是如何设置的，并检查一下为什么有时它不在那里。最后，我们将看看对此能做些什么。</p><p id="e576" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我这里假设EcmaScript spec 2015或更高版本。</p><h1 id="cf76" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">函数声明</h1><pre class="ks kt ku kv fq kw jt kx ky aw kz dt"><span id="7322" class="la jv hu jt b fv lb lc l ld le">function MyFun(){<br/>  return &lt;div&gt;function component&lt;/div&gt;;<br/>}</span></pre><p id="b6ec" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>有一个简单的函数名反射API</p><pre class="ks kt ku kv fq kw jt kx ky aw kz dt"><span id="9098" class="la jv hu jt b fv lb lc l ld le">MyFun.name === “MyFun”</span></pre><h1 id="0b1f" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">班级</h1><pre class="ks kt ku kv fq kw jt kx ky aw kz dt"><span id="858c" class="la jv hu jt b fv lb lc l ld le">class MyClass extends React.Component {<br/>  render() {<br/>    return &lt;div&gt;class component&lt;/div&gt;;<br/>  }<br/>}</span></pre><p id="296f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">正如你可能知道的，JavaScript类只是原型继承的语法，这意味着类只是函数。所以函数反射API在这里也可以工作</p><pre class="ks kt ku kv fq kw jt kx ky aw kz dt"><span id="7e33" class="la jv hu jt b fv lb lc l ld le">MyClass.name === “Myclass”</span></pre><h1 id="30c6" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">箭头函数表达式</h1><pre class="ks kt ku kv fq kw jt kx ky aw kz dt"><span id="fc7d" class="la jv hu jt b fv lb lc l ld le">const ArrowFn = () =&gt; (<br/>  &lt;div&gt;arrow fn&lt;/div&gt;<br/>);</span></pre><p id="7d58" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这也像预期的那样工作。这个名称是由JavaScript引擎从变量声明中推断出来的</p><pre class="ks kt ku kv fq kw jt kx ky aw kz dt"><span id="c10d" class="la jv hu jt b fv lb lc l ld le">ArrowFn.name === “ArrowFn”</span></pre><h1 id="9982" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">React.createClass()</h1><pre class="ks kt ku kv fq kw jt kx ky aw kz dt"><span id="1299" class="la jv hu jt b fv lb lc l ld le">var OldClass = React.createClass({<br/>  render() {<br/>    return &lt;div&gt;old class&lt;/div&gt;<br/>  }<br/>});</span></pre><p id="bcf2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这种情况下，JavaScript引擎无能为力。幸运的是，Babel的<code class="eh jq jr js jt b">babel-plugin-transform-react-display-name</code>在这里对预设的步骤做出反应，并将变量名转换成组件的<code class="eh jq jr js jt b">displayName</code>属性</p><pre class="ks kt ku kv fq kw jt kx ky aw kz dt"><span id="ea07" class="la jv hu jt b fv lb lc l ld le">var OldClass = React.createClass({<br/> <strong class="jt hv">displayName: “OldClass”,</strong><br/> ...<br/>});</span></pre><h1 id="ede7" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">失败</h1><p id="f29f" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">当您动态生成组件时，如</p><pre class="ks kt ku kv fq kw jt kx ky aw kz dt"><span id="ee30" class="la jv hu jt b fv lb lc l ld le">const simple = (Component, styles) =&gt; (<br/>  props =&gt; &lt;Component {...props} style={styles} /&gt;;<br/>);</span><span id="61e0" class="la jv hu jt b fv lk lc l ld le">const Button = simple("b", {<br/>  padding: 20,<br/>});</span></pre><p id="29f1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh jq jr js jt b">Button.name</code>和<code class="eh jq jr js jt b">Button.displayName</code>将为空，因为在这种情况下，JavaScript引擎或Babel插件无法推断出它们的名称。他们不知道<code class="eh jq jr js jt b">simple()</code>函数返回一个<a class="ae jp" href="https://hackernoon.com/tagged/react" rel="noopener ugc nofollow" target="_blank"> React </a>组件。</p><h1 id="ead1" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">自定义名称</h1><p id="1d20" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">为了解决这种情况，您可以手动设置<code class="eh jq jr js jt b">displayName</code>属性。在函数组件上，devtools将优先选择属性<code class="eh jq jr js jt b">displayName</code>上的名称，而不是属性<code class="eh jq jr js jt b">name</code>上的名称，如果两者都设置了的话。</p><pre class="ks kt ku kv fq kw jt kx ky aw kz dt"><span id="c540" class="la jv hu jt b fv lb lc l ld le">const simple = (Component, styles) =&gt; {<br/>  const Wrapped = props =&gt; &lt;Component {...props} style={styles} /&gt;;<br/>  <strong class="jt hv">Wrapped.displayName</strong> = `simple(${getName(Component)})`;<br/>  return Wrapped;<br/>};</span></pre><p id="f032" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是这样你可以得到最好的名字，比如</p><figure class="ks kt ku kv fq lm fe ff paragraph-image"><div class="fe ff ll"><img src="../Images/e3d6e398de3c7bd3f977fd7dac5d644d.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*hJpgva5y6SCqvPWULh_BOA.png"/></div></figure><p id="fada" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">受显示名称转换插件的启发，我创建了一个额外的显示名称巴别塔插件:</p><h1 id="4355" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">巴别-插件-显示-名称-自定义</h1><p id="40aa" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">使用它，您可以配置项目中的哪些函数创建新的React组件，并自动为它们推断显示名称。</p><p id="10ae" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">它将把上面的例子转换成</p><pre class="ks kt ku kv fq kw jt kx ky aw kz dt"><span id="fa06" class="la jv hu jt b fv lb lc l ld le">const Button = simple("div", {<br/>  padding: 20,<br/>});<br/><strong class="jt hv">Button.displayName = "Button";</strong></span></pre><p id="af23" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">查看Github页面了解更多信息</p><p id="dbea" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://github.com/epeli/babel-plugin-display-name-custom" rel="noopener ugc nofollow" target="_blank">https://github.com/epeli/babel-plugin-display-name-custom</a></p><p id="fe3f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">附言</p><p id="2490" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你喜欢上面的API风格的<code class="eh jq jr js jt b">simple()</code>例子——在Github上检查<a class="ae jp" href="https://github.com/epeli/react-simple" rel="noopener ugc nofollow" target="_blank"> react-simple </a>,为web和React Native实现它。巴别塔插件最初是作为它的一部分创建的。</p><blockquote class="lp lq lr"><p id="3a5d" class="ir is ls it b iu iv iw ix iy iz ja jb lt jd je jf lu jh ji jj lv jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is ls it b iu iv iw ix iy iz ja jb lt jd je jf lu jh ji jj lv jl jm jn jo hn dt translated">要了解更多信息，请<a class="ae jp" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">阅读我们的“关于”页面</a>、<a class="ae jp" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书上点赞/给我们发消息</a>，或者简单地说，<a class="ae jp" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ir is ls it b iu iv iw ix iy iz ja jb lt jd je jf lu jh ji jj lv jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ks kt ku kv fq lm"><div class="bz el l di"><div class="lw lx l"/></div></figure></div></div>    
</body>
</html>