<html>
<head>
<title>Making MAST Meaningful; Bitcoin Atomic Swaps Become Private</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让MAST有意义；比特币原子互换成为私有</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/making-mast-meaningful-bitcoin-atomic-swaps-become-private-ff003f7c2b7a?source=collection_archive---------7-----------------------#2017-10-03">https://medium.com/hackernoon/making-mast-meaningful-bitcoin-atomic-swaps-become-private-ff003f7c2b7a?source=collection_archive---------7-----------------------#2017-10-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/a0b862a4cd6ad29b35006c2d3dbc798a.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*d90bRiCry-mKcBFhENXjfA.jpeg"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Atomic + MASTs</figcaption></figure><p id="e974" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最近有很多关于原子交换的讨论。然而，没有引起太多关注的是隐私问题。目前他们得到实现的方式，<strong class="je hv">不是很私密</strong>。master(Merkleized Abstract Syntax Trees)通常被描述为一种隐私改进。这个例子展示了一个实用且显著的隐私改善(假设MAST被集成到比特币中)。</p><p id="99d7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这一点上，社区通常更关心易用性而不是隐私。例如，所有的<strong class="je hv"> Shapeshift </strong>事务都是<a class="ae ka" href="https://shapeshift.io/recenttx/100" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> public </strong> </a>。这些肯定会被硬币跟踪服务保存和使用。我怀疑如果有机会，大多数用户会选择增强隐私。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="fe ff kb"><img src="../Images/8019904cc044732747ab1934a164f4c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sD7prsAfDTq8-PlYHCh3_w.png"/></div></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">All Shapeshift transactions are public</figcaption></figure><p id="bcdd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">从隐私的角度来看，原子交换甚至更糟。按照目前的使用方式，这种交易将在区块链永久公开记录。在未来的任何时候，硬币追踪器都可以追踪整个区块链的交易。让我们来看看基于CLTV的跨链互换目前是如何运作的。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="fe ff kk"><img src="../Images/fb5f15baadcadb12c4583cc52c1a62e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vXuIY0LdYMoqw0auKdby-w.png"/></div></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Today’s atomic swaps</figcaption></figure><p id="da0c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通过上述程序，如果另一方消失，双方的硬币都可以退还。要么计时器超时，他们拿回硬币，要么x出现，爱丽丝和鲍勃都可以认领硬币。原子部分是爱丽丝在W链上公开揭露x的地方。鲍勃可以找到x，因为它现在是公开的，并使用它来要求他的硬币。爱丽丝不能拿走W硬币，除非给鲍勃拿走Y硬币所需的那块缺失的硬币。虽然安全，但它的缺点是公开这些是相同的交易。两个Hash(x)的存在(显示为x=？)和x表示它们是关联的。</p><p id="e45d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">请记住，<strong class="je hv">原子交换</strong>的价值在于<strong class="je hv">在过程开始后<strong class="je hv">不合作</strong>的情况下防止损失</strong>。如果在整个交易过程中有合作，双方可以一起行动来完成。它看起来像这样:</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="fe ff kk"><img src="../Images/759642a5aa893407c29877cee078db6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2SUTljxp2uObs50TzKqQog.png"/></div></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Cooperative atomic swap available today</figcaption></figure><p id="2631" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这仍然不是私有的，因为x的散列出现在两个链中。他们会在不同的链上使用不同的pubkeys，所以链W上的粉色键会与Y上的粉色键不同，但是两个链上的x值必须相同。MAST允许重写第一笔交易，以便只需要显示三个兑换条件中的一个。在合作的情况下，x和hash(x)都不需要在区块链y上公开披露。Alice和Bob都会知道所有的赎回条件以保护自己，但除非需要，否则不会披露。下面是第一个事务的构造方式:</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff kl"><img src="../Images/abe85c7f96244ceba3f5a162df286a0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*LqR6M-y0MC4_bVKAaPDgTg.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Merkle tree of possible spending options</figcaption></figure><p id="491f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">MAST允许我们将这个脚本表示为一棵树。颜色的组合代表散列。顶部的棕色糊状物锁住了硬币。如果证明颜色(散列)可以组合成与花费条件匹配的叶子颜色，则硬币可以被花费。此外，树可以是不平衡的，其中在常见的合作情况下使用较短的证明(较小的较便宜的交易)。在下面的例子中，他们显示了蓝色和粉红色组合成一个紫色的多角形。然后他们显示紫色和橙色会变成棕色。因此，在证明粉红色和蓝色是允许的之后，来自爱丽丝和鲍勃的两个签名中的两个可以移动硬币。这看起来就像区块链上任何普通的基于2/2 multisig的桅杆。公众看不到花哨的保护部分，只有橙色的哈希。重要的部分是<strong class="je hv">x和hash(x)都没有出现在区块链Y上，增加了隐私性。</strong>公众甚至看不出这是一笔掉期交易。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="fe ff kk"><img src="../Images/d95291d09fbe32bc1d12d61f2ae54b24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xdUG2qy4dMzsLLS9MrqNyg.png"/></div></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Cooperative private atomic swap with MAST</figcaption></figure><p id="e58d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在爱丽丝消失的<strong class="je hv">不合作</strong>情况下，那么<strong class="je hv">鲍勃仍然可以</strong>取回他的<strong class="je hv">硬币</strong>。鲍勃在区块链w上发表了黄色的x。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="fe ff kk"><img src="../Images/c68259cc725bc8d62cd2ce23077bda23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PrJc7oq8CAlQZYHEqbLH1A.png"/></div></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Uncooperative Alice atomic swap</figcaption></figure><p id="65e7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">爱丽丝也受到保护。如果Bob在开始交易前消失了，<strong class="je hv"> Alice </strong>可以在超时后<strong class="je hv">获得</strong>退款<strong class="je hv">。</strong></p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="fe ff km"><img src="../Images/b94d0ee07838e93683756bdaa7a6c51c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z2BBHAs1DJNKLI5RcuiV_w.png"/></div></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Uncooperative Bob atomic swap</figcaption></figure><p id="784f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">关于如何实现MAST，有多种公开的建议，每种都有不同的权衡。</p><p id="8fee" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae ka" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/014932.html" rel="noopener ugc nofollow" target="_blank">https://lists . Linux foundation . org/piper mail/bit coin-dev/2017-9月/014932 . html</a><br/><a class="ae ka" href="https://github.com/bitcoin/bips/blob/master/bip-0114.mediawiki#hashed-time-lock-contract" rel="noopener ugc nofollow" target="_blank">https://github . com/bit coin/bips/blob/master/bip-0114 . mediawiki # hashed-time-lock-contract</a></p><p id="84bf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个例子只是触及了表面。还有更多的可能性，而我们才刚刚开始。将来可以使用MAST创建远比现在想象的更复杂的合同。</p><p id="745b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">此外，如果Schnorr签名被添加到比特币中，事情会变得更加隐私。一种优化是将多签名交易压缩成看起来像是单签名的形式，隐藏更多关于交易的信息。如果两个链都支持Schnorr，那么<a class="ae ka" href="https://download.wpsoftware.net/bitcoin/wizardry/mw-slides/2017-03-mit-bitcoin-expo/slides.pdf" rel="noopener ugc nofollow" target="_blank"> <em class="kn">同步无脚本签名</em> </a>可以与MAST结合使用，以获得更多隐私(参见第31页)。这种互换在两个链条上都表现为不相关的一对一交易。显式的x显示可以用椭圆曲线数学来代替。交易之间的联系也只有在不合作的情况下才是可检测的。</p><p id="bfb7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="kn">感谢Mark Friedenbach、Russell O'Connor、Paul Snow、&amp; Justin Hanneman的反馈和其他见解。</em></p><p id="092f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这里讨论<a class="ae ka" href="https://www.reddit.com/r/Bitcoin/comments/740x97/making_mast_meaningful_bitcoin_atomic_swaps/" rel="noopener ugc nofollow" target="_blank">的</a>。</p><p id="6559" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Brian Deery在Factom担任首席科学家，Factom是比特币区块链的数据层。他还共同创立了Factom。</p><p id="e1cf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">布莱恩有时可以在<a class="ae ka" href="https://letstalkbitcoin.com/blog/category/the-crypto-show" rel="noopener ugc nofollow" target="_blank">让我们谈论比特币</a>的<a class="ae ka" href="https://soundcloud.com/heryptohow" rel="noopener ugc nofollow" target="_blank">加密节目</a>中听到，主持人将他命名为<em class="kn">与比特币共舞</em>。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff ko"><img src="../Images/4d3184c13ff768dbf46649869cbc8bcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*5zAdCJ1aV1x68jXIbZ5peQ.jpeg"/></div></figure><p id="8e20" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在https://twitter.com/deery_me的推特上关注他。</p></div></div>    
</body>
</html>