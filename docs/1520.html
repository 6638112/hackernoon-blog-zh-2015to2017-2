<html>
<head>
<title>How to use yarn in a project, without installing yarn</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在项目中使用纱线，而不安装纱线</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-use-yarn-in-a-project-without-installing-yarn-f946815ddb4e?source=collection_archive---------6-----------------------#2016-11-09">https://medium.com/hackernoon/how-to-use-yarn-in-a-project-without-installing-yarn-f946815ddb4e?source=collection_archive---------6-----------------------#2016-11-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="0222" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">能够在CI服务器上使用yarn而不是npm是很好的，但是通常您需要root访问npm install -g yarn。下面是一个bash脚本，您可以使用它来安装yarn(如果没有的话)，然后运行“yarn”:</p><pre class="jp jq jr js fq jt ju jv jw aw jx dt"><span id="f79b" class="jy jz hu ju b fv ka kb l kc kd">#!/bin/bash</span><span id="8286" class="jy jz hu ju b fv ke kb l kc kd"># Choose which version of yarn you want to use<br/>EXPECTED_YARN_VERSION=<strong class="ju hv">"0.16.1"<br/><br/>function install_yarn </strong>{<br/>  mkdir -p .yarn<br/>  DOWNLOAD_URL=<strong class="ju hv">"https://github.com/yarnpkg/yarn/releases/download/v$EXPECTED_YARN_VERSION/yarn-v$EXPECTED_YARN_VERSION.tar.gz"<br/>  </strong>echo <strong class="ju hv">"Downloading from $DOWNLOAD_URL"<br/>  </strong>curl -fL $DOWNLOAD_URL <em class="kf">&gt; .yarn/yarn.tar.gz<br/>  </em>tar zxf .yarn/yarn.tar.gz  --strip-components=1 -C .yarn<br/>}<br/><br/><strong class="ju hv">if [ -f </strong>.yarn/bin/yarn<strong class="ju hv"> ]</strong>; <strong class="ju hv">then<br/>  </strong>YARN_VERSION=<strong class="ju hv">$</strong>(node -e <strong class="ju hv">'const fs = require("fs"); console.log(JSON.parse(fs.readFileSync(".yarn/package.json")).version);'</strong>)<br/>  <strong class="ju hv">if [ "$YARN_VERSION" != "$EXPECTED_YARN_VERSION" ]</strong>; <strong class="ju hv">then<br/>    </strong>echo <strong class="ju hv">"The yarn version is $YARN_VERSION, expected $EXPECTED_YARN_VERSION. Re-downloading"<br/>    </strong>rm -rf .yarn<br/>    <em class="kf">install_yarn<br/>  </em><strong class="ju hv">fi<br/>else<br/>  </strong>echo <strong class="ju hv">"The file .yarn/bin/yarn does not exist, installing yarn"</strong>.<br/>  <em class="kf">install_yarn<br/></em><strong class="ju hv">fi<br/><br/></strong>./.yarn/bin/yarn</span></pre><h2 id="6fc8" class="jy jz hu bd kg kh ki kj kk kl km kn ko jc kp kq kr jg ks kt ku jk kv kw kx ky dt translated">该脚本将:</h2><ol class=""><li id="d73e" class="kz la hu it b iu lb iy lc jc ld jg le jk lf jo lg lh li lj dt translated">创建一个文件夹”。yarn ”,它将在那里下载yarn本身(如果您不想显式提交它，最好忽略这个目录)</li><li id="a32f" class="kz la hu it b iu lk iy ll jc lm jg ln jk lo jo lg lh li lj dt translated">检查纱线是否已经安装。如果已经安装，检查安装的是哪个版本的yarn。如果是错误的版本，那么它会删除这个版本。</li><li id="d4d0" class="kz la hu it b iu lk iy ll jc lm jg ln jk lo jo lg lh li lj dt translated">尝试下载正确版本的yarn。</li><li id="7bd9" class="kz la hu it b iu lk iy ll jc lm jg ln jk lo jo lg lh li lj dt translated">运行纱线。</li></ol><h2 id="8958" class="jy jz hu bd kg kh ki kj kk kl km kn ko jc kp kq kr jg ks kt ku jk kv kw kx ky dt translated">您可以在脚本中调整的内容</h2><ol class=""><li id="1687" class="kz la hu it b iu lb iy lc jc ld jg le jk lf jo lg lh li lj dt translated">如果希望使用较新或较旧的YARN版本，请将EXPECTED_YARN_VERSION更改为另一个版本。</li><li id="dbbc" class="kz la hu it b iu lk iy ll jc lm jg ln jk lo jo lg lh li lj dt translated">不用每次都下载yarn，您可以提交整个。yarn文件夹到git存储库中，这样它就已经存在，可供CI服务器使用。</li><li id="86c0" class="kz la hu it b iu lk iy ll jc lm jg ln jk lo jo lg lh li lj dt translated">如果你想在一个本地代理上保存纱线tar.gz文件，比如Nexus，请更改下载URL。</li><li id="46b4" class="kz la hu it b iu lk iy ll jc lm jg ln jk lo jo lg lh li lj dt translated">更改最后一个命令，这样它就可以带参数运行yarn。</li></ol><p id="85da" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">祝你好运！</p><blockquote class="lp lq lr"><p id="8d3c" class="ir is kf it b iu iv iw ix iy iz ja jb ls jd je jf lt jh ji jj lu jl jm jn jo hn dt translated"><a class="ae lv" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae lv" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae lv" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae lv" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is kf it b iu iv iw ix iy iz ja jb ls jd je jf lt jh ji jj lu jl jm jn jo hn dt translated">要了解更多信息，请<a class="ae lv" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">阅读我们的“关于”页面</a>、<a class="ae lv" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书上点赞/给我们发消息</a>，或者简单地说，<a class="ae lv" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ir is kf it b iu iv iw ix iy iz ja jb ls jd je jf lt jh ji jj lu jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae lv" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae lv" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote></div></div>    
</body>
</html>