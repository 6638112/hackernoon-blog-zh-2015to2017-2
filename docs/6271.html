<html>
<head>
<title>Building a movie app interface with Vue.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Vue.js构建电影app界面</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/building-a-movie-app-interface-with-vue-js-cdc8aeb5db0b?source=collection_archive---------2-----------------------#2017-09-11">https://medium.com/hackernoon/building-a-movie-app-interface-with-vue-js-cdc8aeb5db0b?source=collection_archive---------2-----------------------#2017-09-11</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="8169" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">作者<a class="ae jj" href="https://twitter.com/djirdehh" rel="noopener ugc nofollow" target="_blank">哈桑·吉尔德(@吉尔德)</a></h2></div><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff jk"><img src="../Images/bd3e8cfcf804539c89462c20f5606585.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8qAioM8zBKS-DV6iU9snZg.png"/></div></div></figure><h1 id="ee9d" class="jw jx hu bd jy jz ka kb kc kd ke kf kg ja kh jb ki jd kj je kk jg kl jh km kn dt translated">我们正在建造的东西</h1><p id="e574" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">我们大多数人使用在线流媒体服务(例如网飞)来观看我们最喜欢的节目/电影。这篇文章将重点介绍如何用Vue.js 2.0构建一个类似风格的电影流界面(见上图)。</p><p id="bd0d" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">最终产品:<a class="ae jj" href="https://codepen.io/itslit/full/MvvjZr" rel="noopener ugc nofollow" target="_blank">https://codepen.io/itslit/full/MvvjZr</a>。</p><blockquote class="lp lq lr"><p id="4ac8" class="ko kp ls kq b kr lk iv kt ku ll iy kw lt lm kz la lu ln ld le lv lo lh li lj hn dt translated">虽然<a class="ae jj" href="http://bulma.io/" rel="noopener ugc nofollow" target="_blank">布尔玛</a>被用作我的应用程序的<a class="ae jj" href="https://hackernoon.com/tagged/css" rel="noopener ugc nofollow" target="_blank"> CSS </a>框架，这篇文章将主要关注Vue.js的使用，并将浏览任何样式/CSS。如果你想跟着来，我已经设置了一个启动笔，里面有所有的自定义SCSS、初始数据对象和必要的外部CDN库(vue-router等)。).首发笔:<a class="ae jj" href="https://codepen.io/itslit/pen/QMzRev" rel="noopener ugc nofollow" target="_blank">https://codepen.io/itslit/pen/QMzRev</a></p></blockquote><h1 id="6d78" class="jw jx hu bd jy jz ka kb kc kd ke kf kg ja kh jb ki jd kj je kk jg kl jh km kn dt translated">要求</h1><p id="030e" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">让我们记下应用程序的要求。</p><ul class=""><li id="7e62" class="lw lx hu kq b kr lk ku ll kx ly lb lz lf ma lj mb mc md me dt translated">介绍(登录)屏幕</li><li id="661f" class="lw lx hu kq b kr mf ku mg kx mh lb mi lf mj lj mb mc md me dt translated">允许用户选择他/她想要的电影的各种页脚</li><li id="29ab" class="lw lx hu kq b kr mf ku mg kx mh lb mi lf mj lj mb mc md me dt translated">显示电影标题/描述和“立即播放”提示的电影屏幕</li><li id="e7f3" class="lw lx hu kq b kr mf ku mg kx mh lb mi lf mj lj mb mc md me dt translated">电影预告片屏幕，在电影“播放”时显示电影的预告片</li><li id="dbe6" class="lw lx hu kq b kr mf ku mg kx mh lb mi lf mj lj mb mc md me dt translated">将电影添加到收藏夹的功能</li></ul><p id="645c" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们将创建一个应用程序，让页脚始终显示，而家庭、电影和电影预告片屏幕将共享相同的空间。</p><h1 id="9816" class="jw jx hu bd jy jz ka kb kc kd ke kf kg ja kh jb ki jd kj je kk jg kl jh km kn dt translated">数据</h1><p id="61b0" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">为了简单起见，我们将从一个简单/可靠的数据对象(对象)开始，它将作为我们所有组件的主存储。商店将有我们需要的所有电影信息，并将围绕克里斯托弗·诺兰的精彩电影。这是数据对象的一部分:</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="78a4" class="mp jx hu ml b fv mq mr l ms mt">const movies = {<br/>  "dunkirk": {<br/>   "id": 'dunkirk'<br/>   "title": 'Dunkirk',<br/>   "subtitle": 'Dunkirk',<br/>   "description": 'Miraculous evacuation of Allied soldiers from     Belgium, Britain, Canada, and France, who were cut off and surrounded by the German army from the beaches and harbor of Dunkirk, France, during the Battle of France in World War II.',<br/>   "largeImgSrc": `url('https://image.tmdb.org/t/p/w780/fudEG1VUWuOqleXv6NwCExK0VLy.jpg')`,<br/>   "smallImgSrc': 'https://image.tmdb.org/t/p/w185/fudEG1VUWuOqleXv6NwCExK0VLy.jpg',<br/>   "releaseDate": 'July 21 2017',<br/>   "duration": '1hr 46min',<br/>   "genre": 'Action, Drama, History',<br/>   "trailerPath": 'https://www.youtube.com/embed/F-eMt3SrfFU',<br/>   "favorite": false<br/> },<br/> "interstellar": {<br/>   ...<br/> },<br/> "the-dark-knight-rises": {<br/>   ...<br/> },<br/> "inception": {<br/>   ...<br/> },<br/> "the-prestige": {<br/>   ...<br/> }<br/>}</span></pre><h1 id="ea0b" class="jw jx hu bd jy jz ka kb kc kd ke kf kg ja kh jb ki jd kj je kk jg kl jh km kn dt translated">让我们开始建造吧</h1><p id="6534" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">现在我们已经创建了主商店对象，并且了解了所有组件的布局，我们可以开始构建界面了。</p><p id="6777" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">让我们首先创建Vue实例。我们将把实例挂载/附加到DOM元素<code class="eh mu mv mw ml b">app</code>上，并返回全局存储<code class="eh mu mv mw ml b">movies</code>作为实例数据对象的一部分，以便在HTML中访问。</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="6960" class="mp jx hu ml b fv mq mr l ms mt">const rootApp = new Vue({<br/>  el: '#app',<br/>  data() {<br/>    return {<br/>     movieChoices: movies <br/>    }<br/>  }<br/>})</span></pre><p id="e781" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们现在可以开始处理每个单独的组件了。</p><h2 id="86c2" class="mp jx hu bd jy mx my mz kc na nb nc kg kx nd ne ki lb nf ng kk lf nh ni km nj dt translated">页脚部分</h2><p id="2e9b" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">让我们从固定页脚部分开始，它列出了数据存储中的所有电影。</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="8540" class="mp jx hu ml b fv mq mr l ms mt">&lt;div <strong class="ml hv">id="app"</strong>&gt;<br/> &lt;section class="hero is-primary is-medium"&gt;<br/>  &lt;div class="hero-foot"&gt;<br/>   &lt;div class="columns is-mobile"&gt;<br/>     &lt;div <strong class="ml hv">v-for="movieChoice in movieChoices"</strong> class="column"&gt;<br/>       &lt;li class="movie-choice"&gt;<br/>         &lt;img <strong class="ml hv">:src="`${movieChoice.smallImgSrc}`"</strong> class="desktop"/&gt;<br/>         &lt;p class="mobile"&gt;<strong class="ml hv">{{ movieChoice.subtitle }}</strong>&lt;/p&gt;<br/>       &lt;/li&gt;<br/>     &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/> &lt;/section&gt;<br/>&lt;/div&gt;</span></pre><p id="3e1a" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">处理上面代码片段中加粗的字段:</p><ul class=""><li id="776c" class="lw lx hu kq b kr lk ku ll kx ly lb lz lf ma lj mb mc md me dt translated">我们已经用<code class="eh mu mv mw ml b">id="app"</code>创建了DOM元素，我们的Vue实例将挂载在这个元素上。</li><li id="3184" class="lw lx hu kq b kr mf ku mg kx mh lb mi lf mj lj mb mc md me dt translated">我们使用本机<code class="eh mu mv mw ml b">v-for</code>指令来呈现来自数据源<code class="eh mu mv mw ml b">movieChoices</code>的列表。</li><li id="6af0" class="lw lx hu kq b kr mf ku mg kx mh lb mi lf mj lj mb mc md me dt translated">在每一个列出的<code class="eh mu mv mw ml b">movieChoice</code> : <br/> -我们<em class="ls">将</em>一个图像<code class="eh mu mv mw ml b">src</code>绑定到我们的电影对象中的<code class="eh mu mv mw ml b">smallImgSrc</code> url(针对桌面浏览器)。<br/> -我们使用<a class="ae jj" href="https://vuejs.org/v2/guide/syntax.html#Text" rel="noopener ugc nofollow" target="_blank"> Mustache </a>语法进行数据绑定，将<code class="eh mu mv mw ml b">movieChoice.subtitle</code>显示为移动屏幕的文本。</li></ul><p id="ca9a" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">应用了所有样式/CSS魔法后，我们的应用程序现在应该是这样的:</p><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff nk"><img src="../Images/606ccecdf552afff4e8eceb60c164429.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*spgUO5GGVjCsBKim40jVQw.png"/></div></div><figcaption class="nl nm fg fe ff nn no bd b be z ek">Desktop Display</figcaption></figure><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff np"><img src="../Images/b12da5326e04028cada5500e351536e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dDu1qWFdEKb8ETZ1ymHuJw.png"/></div></div><figcaption class="nl nm fg fe ff nn no bd b be z ek">Mobile Display</figcaption></figure><h2 id="ee35" class="mp jx hu bd jy mx my mz kc na nb nc kg kx nd ne ki lb nf ng kk lf nh ni km nj dt translated">介绍组件(和Vue路由器)</h2><p id="9872" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">因此，我们已经创建了页脚，现在的目标是创建一个介绍组件，有我们的应用程序标题和描述。</p><p id="78a8" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们已经提到，Intro组件将与即将推出的Movie和MovieTrailer组件共享相同的空间(即，用户可以通过单击我们应用程序中的相应链接，从Intro -&gt; Movie -&gt; MovieComponent中找到自己)。</p><p id="0c35" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">这是添加<code class="eh mu mv mw ml b">vue-router</code>库的完美用例。<code class="eh mu mv mw ml b">vue-router</code>是Vue.js 的<a class="ae jj" href="https://router.vuejs.org/en/essentials/getting-started.html" rel="noopener ugc nofollow" target="_blank">官方路由器，深度集成允许基于组件的路由器配置、嵌套/视图映射等。</a></p><p id="12de" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们将在JS文件中设置路由的基础:</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="f49d" class="mp jx hu ml b fv mq mr l ms mt"><strong class="ml hv">const Intro</strong> = {<br/>  template:<br/>    `&lt;div class="hero-body" style="background: #1e1d1d"&gt;<br/>      &lt;div class="container has-text-centered"&gt;<br/>        &lt;div class="columns"&gt;<br/>          &lt;div class="column is-half is-offset-one-quarter vertical-align"&gt;<br/>            &lt;h1 class="home-intro"&gt;<br/>              VueFlix<br/>            &lt;/h1&gt;<br/>            &lt;p class="home-subintro"&gt;Select a movie below from the list of critically acclaimed Christopher Nolan films.&lt;/p&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;`<br/>}</span><span id="1eb9" class="mp jx hu ml b fv nq mr l ms mt"><strong class="ml hv">const routes</strong> = [<br/>  { path: '/', component: Intro },<br/>]</span><span id="8b6b" class="mp jx hu ml b fv nq mr l ms mt"><strong class="ml hv">const router</strong> = new VueRouter({<br/>  routes<br/>})</span></pre><p id="d68a" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">在上面你可以看到我们已经定义了我们的第一个路由组件<code class="eh mu mv mw ml b">Intro</code>，我们的组件<code class="eh mu mv mw ml b">{ path: '/', component: Intro }</code>的路由，并实例化了我们的路由器<code class="eh mu mv mw ml b">new VueRouter({ routes })</code>。</p><blockquote class="lp lq lr"><p id="3c75" class="ko kp ls kq b kr lk iv kt ku ll iy kw lt lm kz la lu ln ld le lv lo lh li lj hn dt translated"><strong class="kq hv">注意:</strong>关于如何用Vue定义组件模板，有多种方法。Intro和后续组件使用ES6的模板文字来定义跨多行的模板。这里有一篇Anthony Gore的精彩文章，重点介绍了在Vue.js中定义组件模板的7种方法&gt; <a class="ae jj" href="https://vuejsdevelopers.com/2017/03/24/vue-js-component-templates/" rel="noopener ugc nofollow" target="_blank"/></p></blockquote><p id="ebaf" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们现在需要将我们的<code class="eh mu mv mw ml b">router</code>注入到Vue实例中，以使我们的整个应用路由器能够感知，并使用<code class="eh mu mv mw ml b">&lt;router-view&gt;&lt;/router-view&gt;</code>在我们的DOM中呈现我们的route组件。</p><p id="e401" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">将我们的<code class="eh mu mv mw ml b">router</code>注入Vue实例:</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="6eb4" class="mp jx hu ml b fv mq mr l ms mt">const rootApp = new Vue({<br/>  el: '#app',<br/><strong class="ml hv">  router: router,</strong><br/>  data() {<br/>    return {<br/>     movieChoices: movies <br/>    }<br/>  }<br/>})</span></pre><p id="6981" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">在DOM中呈现我们的路由组件:</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="e4d4" class="mp jx hu ml b fv mq mr l ms mt">&lt;div id="app"&gt;<br/> &lt;section class="hero is-primary is-medium"&gt;<br/>   <strong class="ml hv">&lt;router-view&gt;&lt;/router-view&gt;</strong></span><span id="3656" class="mp jx hu ml b fv nq mr l ms mt"><strong class="ml hv">   </strong>&lt;div class="hero-foot"&gt;<br/>    &lt;div class="columns"&gt;<br/>     &lt;div v-for="movieChoice in movieChoices" class="column"&gt;<br/>       &lt;li class="movie-choice"&gt;<br/>         &lt;img :src="`${movieChoice.smallImgSrc}`" class="desktop"/&gt;<br/>         &lt;p class="mobile"&gt;{{ movieChoice.subtitle }}&lt;/p&gt;<br/>       &lt;/li&gt;<br/>     &lt;/div&gt;<br/>    &lt;/div&gt;<br/>   &lt;/div&gt;<br/> &lt;/section&gt;<br/>&lt;/div&gt;</span></pre><p id="a7fd" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">因此，我们已经成功地创建了第一个根路由<code class="eh mu mv mw ml b">path: '/'</code>来显示我们的<code class="eh mu mv mw ml b">IntroComponent</code>。添加了所有样式后，我们的应用程序应该是这样的:</p><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff nr"><img src="../Images/5a4fe5bfc3c310199872cee6b292ca54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xBxUCBtGQ9YZxf_ljSdBUQ.png"/></div></div><figcaption class="nl nm fg fe ff nn no bd b be z ek">Looking good 🎉</figcaption></figure><h2 id="e232" class="mp jx hu bd jy mx my mz kc na nb nc kg kx nd ne ki lb nf ng kk lf nh ni km nj dt translated">电影组件(和更多路由)</h2><p id="fec0" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">我们现在已经指定了我们的主要路线和页脚部分。让我们将路由扩展到一个显示特定电影所有信息的电影组件。</p><p id="118a" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">首先，让我们把导航设置好。如前所述，我们希望我们的页脚是允许用户在电影之间导航的部分。我们将使用<code class="eh mu mv mw ml b">vue-router</code>的<code class="eh mu mv mw ml b">router-link</code> <a class="ae jj" href="https://router.vuejs.org/en/api/router-link.html" rel="noopener ugc nofollow" target="_blank">组件</a>来启用导航并提供适当的目标位置。</p><p id="796b" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">回到我们的HTML，对页脚部分做一个小小的编辑:</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="e322" class="mp jx hu ml b fv mq mr l ms mt">&lt;div id="app"&gt;<br/> &lt;section class="hero is-primary is-medium"&gt;<br/>   &lt;router-view&gt;&lt;/router-view&gt;</span><span id="46ee" class="mp jx hu ml b fv nq mr l ms mt">   &lt;div class="hero-foot"&gt;<br/>    &lt;div class="columns"&gt;<br/>     &lt;div v-for="movieChoice in movieChoices" class="column"&gt;<br/><strong class="ml hv">       &lt;router-link :to="`/${movieChoice.id}`" <br/>                    tag="li"    <br/>                    class="movie-choice"&gt;</strong><br/>         &lt;img :src="`${movieChoice.smallImgSrc}`" class="desktop"/&gt;<br/>         &lt;p class="mobile"&gt;{{ movieChoice.subtitle }}&lt;/p&gt;<br/><strong class="ml hv">       &lt;/router-link&gt;</strong><br/>     &lt;/div&gt;<br/>    &lt;/div&gt;<br/>   &lt;/div&gt;<br/> &lt;/section&gt;<br/>&lt;/div&gt;</span></pre><p id="d745" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们已经建立了<code class="eh mu mv mw ml b">`/${movieChoice.id}`</code>的目标位置，它使用ES6模板文字将目标url标记为每部电影的id(例如，《黑暗骑士崛起》的路径将是<code class="eh mu mv mw ml b">/the-dark-knight-rises</code>)。<code class="eh mu mv mw ml b">tag</code>参数表明我们希望我们的<code class="eh mu mv mw ml b">router-link</code>呈现为<code class="eh mu mv mw ml b">li</code>，同时仍然监听点击事件。</p><p id="fd46" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">为了补充新的导航路径，我们需要为电影组件设置一个动态路径。回到我们设定路线的地方:</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="c9d7" class="mp jx hu ml b fv mq mr l ms mt">const routes = [<br/>  { path: '/', component: Intro },<br/><strong class="ml hv">  { path: '/:id', component: Movie }</strong><br/>]</span></pre><p id="e16c" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们用到同一个组件<code class="eh mu mv mw ml b">Movie</code>的每条路由来表示一个动态段<code class="eh mu mv mw ml b">:id</code>。我们现在将能够通过使用<code class="eh mu mv mw ml b">$route.params.id</code>来读取组件中不同的动态段。</p><p id="872a" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">现在我们已经为电影组件设置好了路线，让我们快速起草组件并确保我们的路线正常工作。</p><p id="bdc3" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">电影组件的初稿:</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="f9c4" class="mp jx hu ml b fv mq mr l ms mt">const Movie = {<br/>  template: <br/>    `&lt;div&gt;<br/>      &lt;div class="hero-body"&gt;<br/>       &lt;div class="container has-text-centered"&gt;<br/>        &lt;div class="columns"&gt;<br/>         &lt;div class="column is-half is-offset-one-quarter      vertical-align"&gt;<br/>          &lt;h1 class="home-intro"&gt;<br/>           <strong class="ml hv">{{ selectedMovie.title }}</strong><br/>          &lt;/h1&gt;<br/>         &lt;/div&gt;<br/>        &lt;/div&gt;<br/>       &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;`,<br/>  <strong class="ml hv">data ()</strong> {<br/>    return {<br/>      selectedMovie: movies[this.$route.params.id]<br/>    }<br/>  },<br/>  <strong class="ml hv">watch:</strong> {<br/>    $route () {<br/>      this.selectMovie()<br/>    }<br/>  },<br/>  <strong class="ml hv">methods:</strong> {<br/>    selectMovie () {<br/>      this.selectedMovie = movies[this.$route.params.id]<br/>    }<br/>  }<br/>}</span></pre><p id="d857" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">这里有几点需要注意。</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="2f8b" class="mp jx hu ml b fv mq mr l ms mt">data () {<br/> return {<br/>   selectedMovie: movies[this.$route.params.id]<br/> }<br/>}</span></pre><p id="02b0" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated"><code class="eh mu mv mw ml b">data</code>函数根据<code class="eh mu mv mw ml b">$route.params.id</code>将组件中的<code class="eh mu mv mw ml b">selectedMovie</code>属性设置为来自全局<code class="eh mu mv mw ml b">movies</code>存储的对象。<br/>所以假设电影选择是《黑暗骑士崛起》，那么<code class="eh mu mv mw ml b">selectedMovie</code>属性就是<code class="eh mu mv mw ml b">movies[the-dark-knight-rises]</code>。</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="d32c" class="mp jx hu ml b fv mq mr l ms mt">watch<strong class="ml hv">:</strong> {<br/> $route () {<br/>   this.selectMovie()<br/> }<br/>},<br/>methods<strong class="ml hv">:</strong> {<br/> selectMovie () {<br/>  this.selectedMovie = movies[this.$route.params.id]<br/> }<br/>}</span></pre><p id="f4cb" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们使用<code class="eh mu mv mw ml b">watch</code>属性来观察路由中的任何变化，然后调用组件的<code class="eh mu mv mw ml b">selectMovie</code>方法。<code class="eh mu mv mw ml b">selectMovie</code>方法只是用选择的新电影再次更新<code class="eh mu mv mw ml b">selectedMovie</code>参数。当用户从一个电影组件改变到另一个组件(即切换电影)时，这是必须处理的。</p><p id="091d" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">测试完所有东西后，我们应该可以看到路线在工作:</p><figure class="jl jm jn jo fq jp"><div class="bz el l di"><div class="ns nt l"/></div><figcaption class="nl nm fg fe ff nn no bd b be z ek">It routes! 🎉</figcaption></figure><p id="c9b4" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">现在我们知道我们的路线工作正常，我们将更新我们的电影组件中的模板，以显示关于电影的所有所需信息。<em class="ls">(我只加粗了我将进一步处理的行)</em></p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="0993" class="mp jx hu ml b fv mq mr l ms mt">const Movie = {<br/> template: <br/>  `&lt;div class="hero-body" <br/>    :style="{ 'background-image': selectedMovie.largeImgSrc }"&gt;<br/>    &lt;header class="nav"&gt;<br/>     &lt;div class="container"&gt;<br/>      &lt;div class="nav-left"&gt;<br/>       &lt;a class="nav-item"&gt;<br/>        &lt;i class="fa fa-bars" aria-hidden="true"&gt;&lt;/i&gt;<br/>       &lt;/a&gt;<br/><strong class="ml hv">       &lt;router-link to="/" class="nav-item is-active"&gt;</strong><br/>        Home<br/><strong class="ml hv">       &lt;/router-link&gt;</strong><br/>       &lt;a class="nav-item is-active"&gt;<br/>        &lt;span class="tag is-rounded"&gt;Films&lt;/span&gt;<br/>       &lt;/a&gt;<br/>       &lt;a class="nav-item is-active"&gt;<br/>        Shows<br/>       &lt;/a&gt;<br/>       &lt;a class="nav-item is-active"&gt;<br/>        Music<br/>       &lt;/a&gt;<br/>      &lt;/div&gt;<br/>      &lt;div class="nav-right desktop"&gt;<br/>       &lt;span class="nav-item"&gt;<br/>        &lt;a class="title"&gt;<br/>         VueFlix<br/>        &lt;/a&gt;<br/>       &lt;/span&gt;<br/>      &lt;/div&gt;<br/>     &lt;/div&gt;<br/>    &lt;/header&gt;</span><span id="acaa" class="mp jx hu ml b fv nq mr l ms mt">    &lt;div class="container description-container"&gt;<br/>     &lt;div class="columns"&gt;<br/>      &lt;div class="column is-three-quarters"&gt;<br/>       &lt;h1 class="title"&gt;{{ selectedMovie.title }}&lt;/h1&gt;<br/>       &lt;h4 class="subtitle"&gt;<br/>        &lt;p class="subtitle-tag"&gt;{{ selectedMovie.duration }}&lt;/p&gt;<br/>        &lt;p class="subtitle-tag"&gt;{{ selectedMovie.genre }}&lt;/p&gt;<br/>        &lt;p class="subtitle-tag"&gt;{{ selectedMovie.releaseDate }}&lt;/p&gt;<br/>       &lt;/h4&gt;<br/>       &lt;p class="description"&gt;{{ selectedMovie.description }}&lt;/p&gt;<br/>       &lt;div class="links"&gt;<br/><strong class="ml hv">        &lt;router-link <br/>          :to="{path: '/' + $route.params.id + '/trailer'}"   <br/>          class="button play-button"&gt;<br/>           Play &lt;i class="fa fa-play"&gt;&lt;/i&gt;<br/>        &lt;/router-link&gt;</strong><br/>       &lt;/div&gt;<br/>      &lt;/div&gt;<br/>     &lt;/div&gt;<br/>    &lt;/div&gt;<br/>   &lt;/div&gt;`,<br/>}</span></pre><p id="8b93" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们在导航栏的主页链接中建立了一个<code class="eh mu mv mw ml b">router-link</code>组件，将用户引导回根路径<code class="eh mu mv mw ml b">/</code> (Intro组件)。</p><p id="cc45" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们在电影的播放按钮中引入了另一个<code class="eh mu mv mw ml b">router-link</code>，它创建了一个目标位置<code class="eh mu mv mw ml b">'/' + $route.params.id + '/trailer'</code>。这基本上用<code class="eh mu mv mw ml b">/trailer</code>扩展了电影id的当前路径，并且是到我们最终电影预告片组件的导航。</p><p id="79cd" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">到目前为止，我们应用程序中的电影组件应该是这样的:</p><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff nu"><img src="../Images/5f03772f9399c3ce2b487b2906ee8e8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cnYwFYbDUE3bNGAjT7ywvQ.png"/></div></div><figcaption class="nl nm fg fe ff nn no bd b be z ek">🎥</figcaption></figure><p id="3fa8" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">太棒了。既然我们已经建立了适当的<code class="eh mu mv mw ml b">router-link</code>来引导用户从电影到电影预告片，我们现在需要创建电影预告片组件和伴随的动态路线。</p><p id="e4e8" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">电影预告片组件:</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="4b1d" class="mp jx hu ml b fv mq mr l ms mt">const MovieTrailer = {<br/> template: `<br/>  &lt;div class="trailer-body" style="background: #1e1d1d"&gt;<br/>   &lt;div class="has-text-centered"&gt;<br/>    &lt;div class="columns"&gt;<br/>     &lt;div class="column vertical-align"&gt;<br/>      &lt;iframe<br/>       allowFullScreen<br/>       frameborder="0"<br/>       height="376"<br/>       <strong class="ml hv">:src="trailerUrlPath"</strong><br/>       style="width: 100%; min-width: 536px"<br/>      /&gt;<br/>     &lt;/div&gt;<br/>    &lt;/div&gt;<br/>   &lt;/div&gt;<br/>  &lt;/div&gt;`,<br/>  <strong class="ml hv">data ()</strong> {<br/>   return {<br/>    trailerUrlPath: movies[this.$route.params.id].trailerPath<br/>   }<br/>  }<br/>}</span></pre><p id="5f12" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们使用一个简单的iframe来显示YouTube上的预告片。我们将iframe <code class="eh mu mv mw ml b">src</code>绑定到数据函数中设置的组件属性<code class="eh mu mv mw ml b">trailerUrlPath</code>。<code class="eh mu mv mw ml b">trailerUrlPath</code>简单地访问全局<code class="eh mu mv mw ml b">movies</code>存储，并基于<code class="eh mu mv mw ml b">$route.params.id</code>获得适当的预告片url。</p><p id="d7db" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">伴随的动态路线:</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="6197" class="mp jx hu ml b fv mq mr l ms mt">const routes = [<br/>  { path: '/', component: Intro },<br/>  { path: '/:id', component: Movie },<br/><strong class="ml hv">  { path: '/:id/trailer', component: MovieTrailer }</strong><br/>]</span></pre><p id="827b" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们此刻的应用程序:</p><figure class="jl jm jn jo fq jp"><div class="bz el l di"><div class="nv nt l"/></div><figcaption class="nl nm fg fe ff nn no bd b be z ek">It plays! 🎉</figcaption></figure><p id="8a3c" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们快完成了！我们将只处理一个简单的视觉指示器，将电影添加到收藏夹，然后就完成了。</p><h2 id="fc58" class="mp jx hu bd jy mx my mz kc na nb nc kg kx nd ne ki lb nf ng kk lf nh ni km nj dt translated">添加到收藏夹</h2><p id="516f" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">主<code class="eh mu mv mw ml b">movies</code>存储器中的每个电影对象都有一个<code class="eh mu mv mw ml b">favorite</code>布尔值。我们将用它作为触发器来表示电影是否被添加到收藏夹。</p><p id="0097" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">关于视觉显示，我们将有两个视觉提示:<br/> -一个黄色框-电影组件周围的阴影<br/> -页脚组件中列表项内的一个黄色复选标记</p><p id="b8c4" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们已经在SCSS开设了<code class="eh mu mv mw ml b">favorite-shadow</code>和<code class="eh mu mv mw ml b">favourite-check</code>课程来帮助我们解决这个问题。</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="aa2d" class="mp jx hu ml b fv mq mr l ms mt">.favorite-shadow {<br/>  box-shadow: 0 0 50px 15px rgba(251, 255, 15, 0.25);<br/>}</span><span id="ecf7" class="mp jx hu ml b fv nq mr l ms mt">.favorite-check {<br/>  position: absolute;<br/>  right: 5px;<br/>  top: 5px;<br/>  z-index: 1;<br/>  color: #fcff4c;<br/>            <br/>  <a class="ae jj" href="http://twitter.com/media" rel="noopener ugc nofollow" target="_blank">@media</a>(max-width: $medium) {<br/>   position: initial;<br/>   display: block;<br/>  }<br/>}</span></pre><p id="f646" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">现在，我们需要在电影组件模板和页脚部分应用<a class="ae jj" href="https://vuejs.org/v2/guide/class-and-style.html" rel="noopener ugc nofollow" target="_blank">条件类绑定</a>。我们还需要为电影组件中的add to favorites按钮创建事件处理程序。</p><p id="cf77" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">对于我们的电影组件:</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="8328" class="mp jx hu ml b fv mq mr l ms mt">const Movie = {<br/> template: <br/>  `&lt;div <strong class="ml hv">:class="[{ 'favorite-shadow': selectedMovie.favorite }, 'hero-body']"</strong><br/>    :style="{ 'background-image': selectedMovie.largeImgSrc }"&gt;<br/>    &lt;header class="nav"&gt;<br/>     ...<br/>    &lt;/header&gt;</span><span id="9a41" class="mp jx hu ml b fv nq mr l ms mt">    &lt;div class="container description-container"&gt;<br/>     ...<br/>     ...<br/>     ...</span><span id="d164" class="mp jx hu ml b fv nq mr l ms mt">     &lt;div class="links"&gt;<br/><strong class="ml hv">      </strong>&lt;router-link <br/>       :to="{path: '/' + $route.params.id + '/trailer'}"   <br/>       class="button play-button"&gt;<br/>        Play &lt;i class="fa fa-play"&gt;&lt;/i&gt;<br/>      &lt;/router-link&gt;</span><span id="6315" class="mp jx hu ml b fv nq mr l ms mt">      <strong class="ml hv">&lt;a <br/>       class="button is-link favorites-button"<br/>       @click="addToFavorites"&gt;<br/>      &lt;span<br/>       :class="[{ 'hide': selectedMovie.favorite }]"&gt;<br/>       Add to<br/>      &lt;/span&gt;<br/>      &lt;span<br/>       :class="[{ 'hide': !selectedMovie.favorite }]"&gt;<br/>       Remove from<br/>      &lt;/span&gt;<br/>       &amp;nbsp;favorites <br/>       &lt;i class="fa fa-plus-square-o"&gt;&lt;/i&gt;<br/>      &lt;/a&gt;<br/>     </strong>&lt;/div&gt;<br/>    &lt;/div&gt;<br/>   &lt;/div&gt;`,<br/> data() {<br/>  ...<br/> },<br/> watch: {<br/> },<br/> methods: {<br/>  selectMovie() {<br/>  ...<br/>  },<br/><strong class="ml hv">  addToFavorites() {<br/>   movies[this.$route.params.id].favorite =<br/>   !movies[this.$route.params.id].favorite<br/>  }</strong><br/>}</span></pre><p id="cf64" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">上面指定的类绑定规定了<code class="eh mu mv mw ml b">favorite-shadow</code>类由<code class="eh mu mv mw ml b">selectedMovie.favorite</code>布尔决定，而<code class="eh mu mv mw ml b">hero-body</code>类应该总是存在。</p><p id="569b" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">我们还在原来的播放按钮后引入了“添加/删除收藏夹”按钮。“添加到收藏夹/从收藏夹中移除”按钮监听<code class="eh mu mv mw ml b">addToFavorites()</code>方法处理程序，该处理程序只需在点击时切换特定电影的<code class="eh mu mv mw ml b">favorite</code>布尔值。根据电影是添加到收藏夹还是从收藏夹中移除，文本在“添加到”和“移除”之间切换(<code class="eh mu mv mw ml b">hide</code>类是一个具有<code class="eh mu mv mw ml b">display:none</code>属性的创建类)。</p></div><div class="ab cl nw nx hc ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="hn ho hp hq hr"><p id="2912" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">类似地，我们还需要为页脚中的复选标记引入条件类绑定:</p><pre class="jl jm jn jo fq mk ml mm mn aw mo dt"><span id="64b9" class="mp jx hu ml b fv mq mr l ms mt">&lt;div id="app"&gt;<br/> &lt;section class="hero is-primary is-medium"&gt;<br/>  &lt;router-view&gt;&lt;/router-view&gt;</span><span id="fa42" class="mp jx hu ml b fv nq mr l ms mt">  &lt;div class="hero-foot"&gt;<br/>   &lt;div class="columns is-mobile"&gt;<br/>    &lt;div v-for="movieChoice in movieChoices" class="column"&gt;<br/>     &lt;router-link :to="`/${movieChoice.id}`" <br/>                  tag="li" <br/>                  class="movie-choice"&gt;<br/>      <strong class="ml hv">&lt;i :class="[{ 'fa fa-check-circle favorite-check':  movieChoice.favorite }]"&gt;&lt;/i&gt;</strong><br/>       &lt;img :src="`${movieChoice.smallImgSrc}`" class="desktop"/&gt;<br/>       &lt;p class="mobile movie-title"&gt;{{ movieChoice.subtitle }}&lt;/p&gt;<br/>     &lt;/router-link&gt;<br/>    &lt;/div&gt;<br/>   &lt;/div&gt;<br/>  &lt;/div&gt;<br/> &lt;/section&gt;<br/>&lt;/div&gt;</span></pre><p id="7902" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">现在我们应该可以将电影添加到收藏夹列表中了！</p><figure class="jl jm jn jo fq jp"><div class="bz el l di"><div class="od nt l"/></div><figcaption class="nl nm fg fe ff nn no bd b be z ek">It favorites! 🎉</figcaption></figure><h1 id="b980" class="jw jx hu bd jy jz ka kb kc kd ke kf kg ja kh jb ki jd kj je kk jg kl jh km kn dt translated">干杯！</h1><p id="2e82" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">谢谢你花时间来看这个。我希望这是有益的，你学到了一些东西。</p><p id="d2cd" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">如果你有任何问题/评论/意见，我很乐意听听！</p><p id="b4c9" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">————————♥————<br/>如果你喜欢我的写作风格，并且对学习如何构建Vue应用程序感兴趣，我刚刚帮助发布了<a class="ae jj" href="https://www.fullstack.io/vue" rel="noopener ugc nofollow" target="_blank"> Fullstack Vue </a>！Fullstack Vue是一种项目驱动的学习Vue.js的方法，因为一切都是在构建更大的应用程序的背景下解释的。Fullstack Vue目前可用，你可以从主网站<a class="ae jj" href="https://www.fullstack.io/vue" rel="noopener ugc nofollow" target="_blank">https://www.fullstack.io/vue</a>免费下载第一章<em class="ls"/></p><figure class="jl jm jn jo fq jp"><div class="bz el l di"><div class="oe nt l"/></div></figure></div></div>    
</body>
</html>