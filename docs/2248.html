<html>
<head>
<title>A useful memory debugger plugin for Android Studio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个有用的Android Studio内存调试器插件</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-useful-memory-debugger-plugin-for-android-studio-2d9d95bddc24?source=collection_archive---------4-----------------------#2017-01-15">https://medium.com/hackernoon/a-useful-memory-debugger-plugin-for-android-studio-2d9d95bddc24?source=collection_archive---------4-----------------------#2017-01-15</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><h2 id="bf93" class="hs ht hu bd b gc hv hw hx hy hz ia ek ib translated" aria-label="kicker paragraph">JetBrains <strong class="ak"> JVM调试器内存视图</strong>插件</h2><div class=""/><figure class="fi fk jb jc jd je fe ff paragraph-image"><div role="button" tabindex="0" class="jf jg di jh bf ji"><div class="fe ff ja"><img src="../Images/f248ff511430f58ca54254fa34f67fad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fzVh7Fe1lbTWD_JUPw2chg.png"/></div></div><figcaption class="jl jm fg fe ff jn jo bd b be z ek">JetBrains JVM Debugger Memory View plugin</figcaption></figure><p id="f458" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">在我最近的R&amp;D活动中，我寻找新的工具来改善我的开发体验，并使使用<a class="ae kn" href="https://hackernoon.com/tagged/android" rel="noopener ugc nofollow" target="_blank"> Android </a> Studio的生活更容易，我发现了一个我以前从未听说过的有用插件。这就是为什么我决定写这个强大的<a class="ae kn" href="https://hackernoon.com/tagged/tool" rel="noopener ugc nofollow" target="_blank">工具</a>以及它如何帮助我调试应用程序的内存。</p></div><div class="ab cl ko kp hc kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hn ho hp hq hr"><h1 id="79a9" class="kv kw hu bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls dt translated">这个插件是关于什么的？</h1><p id="c789" class="pw-post-body-paragraph jp jq hu jr b js lt ju jv jw lu jy jz ka lv kc kd ke lw kg kh ki lx kk kl km hn dt translated">显示<a class="ae kn" href="https://plugins.jetbrains.com/idea/plugin/8537-jvm-debugger-memory-view" rel="noopener ugc nofollow" target="_blank">插件页面</a>:</p><blockquote class="ly lz ma"><p id="c15f" class="jp jq mb jr b js jt ju jv jw jx jy jz mc kb kc kd md kf kg kh me kj kk kl km hn dt translated">这个插件扩展了内置的JVM调试器，使其能够在调试会话期间<strong class="jr ie">探索JVM堆中的对象</strong>。</p><p id="18c5" class="jp jq mb jr b js jt ju jv jw jx jy jz mc kb kc kd md kf kg kh me kj kk kl km hn dt translated">Memory视图显示了堆中按照类名分组的<strong class="jr ie">对象总数。</strong></p><p id="e949" class="jp jq mb jr b js jt ju jv jw jx jy jz mc kb kc kd md kf kg kh me kj kk kl km hn dt translated">当您单步执行代码时，<strong class="jr ie"> Diff列显示了调试器停止</strong>之间对象数量的变化。通过这种方式，您可以很容易地看到您所跳过的代码是如何影响堆的。</p><p id="06a7" class="jp jq mb jr b js jt ju jv jw jx jy jz mc kb kc kd md kf kg kh me kj kk kl km hn dt translated">双击一个类名会打开一个对话框，里面有这个类的实例。该对话框让您<strong class="jr ie">通过评估表达式</strong>过滤实例。所有调试器操作，如检查、标记对象、计算表达式、添加到监视等，都可以应用于该对话框中的实例。</p></blockquote><figure class="mg mh mi mj fq je fe ff paragraph-image"><div class="fe ff mf"><img src="../Images/65e4a508bb961f4a2359d4009c65bba1.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*UxO2KhfC3D-Ex8yfgQ9_yA.gif"/></div></figure><p id="0978" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">因为所有的<strong class="jr ie">粗体</strong>句子真的很有趣，我理解如果你想去下载这个插件来拥有你自己的经历，而不是在这里阅读更多…</p></div><div class="ab cl ko kp hc kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hn ho hp hq hr"><h1 id="69aa" class="kv kw hu bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls dt translated">如何安装这个奇妙的插件？</h1><p id="c1e8" class="pw-post-body-paragraph jp jq hu jr b js lt ju jv jw lu jy jz ka lv kc kd ke lw kg kh ki lx kk kl km hn dt translated">打开Android Studio <strong class="jr ie">插件</strong>页面:</p><ul class=""><li id="313d" class="mk ml hu jr b js jt jw jx ka mm ke mn ki mo km mp mq mr ms dt translated"><strong class="jr ie"> <em class="mb">快捷键:</em> </strong> <em class="mb">按</em> <strong class="jr ie"> <em class="mb">命令/ctrl</em></strong><em class="mb">+</em><strong class="jr ie"><em class="mb">shift</em></strong><em class="mb">+</em><strong class="jr ie"><em class="mb">A、</em> </strong> <em class="mb">键入</em> <strong class="jr ie"> <em class="mb">插件</em> </strong> <em class="mb">然后按</em> <strong class="jr ie"> <em class="mb">回车</em></strong></li><li id="7ee5" class="mk ml hu jr b js mt jw mu ka mv ke mw ki mx km mp mq mr ms dt translated">或者打开<strong class="jr ie">首选项/设置:</strong> (Mac: Android Studio - &gt;首选项<strong class="jr ie"> / </strong> Windows &amp; Linux:文件- &gt;设置)找到<strong class="jr ie">插件</strong>页面:</li></ul><figure class="mg mh mi mj fq je fe ff paragraph-image"><div role="button" tabindex="0" class="jf jg di jh bf ji"><div class="fe ff my"><img src="../Images/afc713eeec78f8964e6e03aceee40444.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f4Qh8IQIF6-ggoMYgS9aWw.png"/></div></div></figure><p id="4760" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">按下<strong class="jr ie">安装JetBrains插件… </strong>按钮，搜索<strong class="jr ie"> JVM调试器内存视图</strong>和<strong class="jr ie">安装</strong>。</p><figure class="mg mh mi mj fq je fe ff paragraph-image"><div role="button" tabindex="0" class="jf jg di jh bf ji"><div class="fe ff mz"><img src="../Images/a18c05ad94086685deea876c9e0213f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sTEGaAc5YNHz2mKK623m7Q.png"/></div></div></figure><p id="ed52" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">然后你得重启Android Studio。</p><h2 id="6b54" class="na kw hu bd kx nb nc nd lb ne nf ng lf ka nh ni lj ke nj nk ln ki nl nm lr ia dt translated">乍一看:</h2><figure class="mg mh mi mj fq je fe ff paragraph-image"><div class="fe ff nn"><img src="../Images/b19986c6b27927ab3baa306b3802589b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*eNChJNziQ85L8w8zViSG7g.gif"/></div></figure><p id="1046" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">回到Android Studio后，你会发现<strong class="jr ie">内存视图工具窗口</strong>被添加到工具栏的右侧。</p><figure class="mg mh mi mj fq je fe ff paragraph-image"><div role="button" tabindex="0" class="jf jg di jh bf ji"><div class="fe ff no"><img src="../Images/8ca90e19a1184627dab89dd55333ffaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EKFuuY55653LlZq8oOV-RQ.png"/></div></div><figcaption class="jl jm fg fe ff jn jo bd b be z ek">Memory View Tool Window</figcaption></figure><blockquote class="ly lz ma"><p id="8452" class="jp jq mb jr b js jt ju jv jw jx jy jz mc kb kc kd md kf kg kh me kj kk kl km hn dt translated">如果没有看到内存视图，要打开工具窗口，使用主菜单:<em class="hu">视图</em> → <em class="hu">工具窗口</em> → <em class="hu">内存视图</em>。</p></blockquote><p id="2ac1" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">首先，该工具仅在应用程序在<em class="mb">调试模式</em>下运行并且您使用<em class="mb">断点</em>暂停运行时工作并显示数据。</p><p id="28a9" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">其次，我不得不提到的是，我阅读了一些关于Android Studio可能发生的警告和错误，这是我在体验过程中没有面对的。</p><blockquote class="ly lz ma"><p id="52ce" class="jp jq mb jr b js jt ju jv jw jx jy jz mc kb kc kd md kf kg kh me kj kk kl km hn dt translated"><strong class="jr ie">警告</strong>:Android Studio版本包含的限制很少:</p><p id="61c2" class="jp jq mb jr b js jt ju jv jw jx jy jz mc kb kc kd md kf kg kh me kj kk kl km hn dt translated">-由于Android内存限制，获取大量实例可能会失败并停止VM。</p><p id="d8cb" class="jp jq mb jr b js jt ju jv jw jx jy jz mc kb kc kd md kf kg kh me kj kk kl km hn dt translated">- Android Studio可能会死机，见<a class="ae kn" href="https://code.google.com/p/android/issues/detail?id=198940&amp;q=subcomponent%3DTools-debugger%20label%3ASubcomponent-Tools-debugger&amp;colspec=ID%20Status%20Priority%20Owner%20Summary%20Stars%20Reporter%20Opened" rel="noopener ugc nofollow" target="_blank">这个bug </a></p></blockquote></div><div class="ab cl ko kp hc kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hn ho hp hq hr"><h1 id="8cdc" class="kv kw hu bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls dt translated">我们来调试吧！</h1><figure class="mg mh mi mj fq je fe ff paragraph-image"><div role="button" tabindex="0" class="jf jg di jh bf ji"><div class="fe ff np"><img src="../Images/4469519012fd1c2dba80c0154ae69fa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7tZ4oTu8-zh0dEZWcpHftg.gif"/></div></div></figure><p id="3480" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">在调试模式下运行应用程序并在断点处暂停后，您将看到神奇的事情发生了:</p><figure class="mg mh mi mj fq je fe ff paragraph-image"><div role="button" tabindex="0" class="jf jg di jh bf ji"><div class="fe ff nq"><img src="../Images/6b1696584b30e144eb625c77063dcd4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*op2Ga0mTqxxT5SOblPxjAQ.png"/></div></div></figure><p id="3d22" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">这个表最有趣的一点是<strong class="jr ie"> Diff </strong>列，当你遍历代码行时，你会看到有多少新的对象实例被创建或销毁！</p><p id="e9bb" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">我想寻找我自己的对象<em class="mb">(即ProfileModel类)</em>，所以我搜索它:</p><figure class="mg mh mi mj fq je fe ff paragraph-image"><div role="button" tabindex="0" class="jf jg di jh bf ji"><div class="fe ff nr"><img src="../Images/7441fb7909c5a0872786958076fb861d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xe0Njts0YXkGb0-Enest4Q.png"/></div></div></figure><p id="508b" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">如你所见，我在这行代码中更新了ProfileModel变量，在GC移除旧变量之前，我得到了Diff +1，并且还可以访问旧变量，这在以前是不可能的。通过双击该记录，我将在一个窗口中获得ProfileModel类的实例:</p><figure class="mg mh mi mj fq je fe ff paragraph-image"><div role="button" tabindex="0" class="jf jg di jh bf ji"><div class="fe ff ns"><img src="../Images/0033487e9a217f11cafdd07267c14393.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iE7_NZ7Llcuevd3Rl8-YQg.png"/></div></div></figure><p id="095d" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">此窗口还允许您使用类方法通过求值的表达式过滤实例，例如，您可以使用<strong class="jr ie"> OkHttp Response </strong>类的<strong class="jr ie">issue success</strong>方法过滤加载到内存中的不成功响应:</p><figure class="mg mh mi mj fq je fe ff paragraph-image"><div role="button" tabindex="0" class="jf jg di jh bf ji"><div class="fe ff nt"><img src="../Images/1dafe7dec34806f95d40878b0d38fb36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VM-zB0hc0Ul21ATlewfiSg.png"/></div></div><figcaption class="jl jm fg fe ff jn jo bd b be z ek">Instances filter feature</figcaption></figure><p id="2740" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">另一个有用的功能是跟踪新实例，您可以通过内存视图工具窗口中的右键菜单来启用它:</p><figure class="mg mh mi mj fq je fe ff paragraph-image"><div role="button" tabindex="0" class="jf jg di jh bf ji"><div class="fe ff nu"><img src="../Images/559f6786ec8d4aada9552bffe9632f6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iNZTW8lV-_JlYHF3U8da-w.png"/></div></div></figure><p id="5baa" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">这个特性可以帮助你跟踪这个类的新实例生成的代码！</p><figure class="mg mh mi mj fq je fe ff paragraph-image"><div role="button" tabindex="0" class="jf jg di jh bf ji"><div class="fe ff nv"><img src="../Images/325515b73e52bf061751f60564a2bca1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ApP_UVxMbXEid9WBH62wUg.png"/></div></div></figure><p id="f6eb" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">你可以在<a class="ae kn" href="https://blog.jetbrains.com/idea/2016/08/jvm-debugger-memory-view-for-intellij-idea/" rel="noopener ugc nofollow" target="_blank"> JetBrains博客</a>中读到更多关于这个插件的内容，也可以让他们知道你可能想到的新特性或者你发现的bug。</p></div><div class="ab cl ko kp hc kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hn ho hp hq hr"><h1 id="9e4e" class="kv kw hu bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls dt translated">TL；博士:</h1><p id="12f4" class="pw-post-body-paragraph jp jq hu jr b js lt ju jv jw lu jy jz ka lv kc kd ke lw kg kh ki lx kk kl km hn dt translated">这篇文章是关于一个JetBrains插件，它可以帮助你用Android Studio在内存中调试你的应用程序，并在应用程序运行期间访问所有加载的对象。</p></div><div class="ab cl ko kp hc kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="hn ho hp hq hr"><figure class="mg mh mi mj fq je fe ff paragraph-image"><div class="fe ff nw"><img src="../Images/eeeeff7a65d1cedd44b87eee699d70ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*QXb8l_WsbUTIsrI_-vZ1BA.gif"/></div></figure><p id="f949" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">感谢阅读这篇文章。请留下你的评论，和我们分享你使用这个插件的经验，以及在你自己的测试中你是如何发现它有用的。</p><p id="96a5" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">我发现这个插件很有用，所以我决定与你分享，如果你认为有用，推荐给你的朋友，让他们也喜欢。</p><p id="04f8" class="pw-post-body-paragraph jp jq hu jr b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">您也可以关注我以获取更多文章<a class="nx ny gr" href="https://medium.com/u/6a4ed0c4dd2c?source=post_page-----2d9d95bddc24--------------------------------" rel="noopener" target="_blank"> Mohsen Mirhoseini Argi </a>。</p><div class="nz oa fm fo ob oc"><a href="http://mirhoseini.info" rel="noopener  ugc nofollow" target="_blank"><div class="od ab ej"><div class="oe ab of cl cj og"><h2 class="bd ie fv z el oh eo ep oi er et id dt translated">Mohsen Mirhoseini -高级Android开发人员</h2><div class="oj l"><h3 class="bd b fv z el oh eo ep oi er et ek translated">我是一名资深Android开发人员，在计算机软件工程领域有大约九年的经验。我有…</h3></div><div class="ok l"><p class="bd b gc z el oh eo ep oi er et ek translated">mirhoseini.info</p></div></div></div></a></div><div class="mg mh mi mj fq ab cb"><figure class="ol je om on oo op oq paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="ol je om on oo op oq paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="ol je om on oo op oq paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="ly lz ma"><p id="f922" class="jp jq mb jr b js jt ju jv jw jx jy jz mc kb kc kd md kf kg kh me kj kk kl km hn dt translated"><a class="ae kn" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae kn" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae kn" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae kn" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="jp jq mb jr b js jt ju jv jw jx jy jz mc kb kc kd md kf kg kh me kj kk kl km hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae kn" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae kn" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="mg mh mi mj fq je fe ff paragraph-image"><div role="button" tabindex="0" class="jf jg di jh bf ji"><div class="fe ff or"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure><figure class="mg mh mi mj fq je"><div class="bz el l di"><div class="os ot l"/></div></figure></div></div>    
</body>
</html>