<html>
<head>
<title>Building angular app using browserify</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用browserify构建angular app</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/building-angular-app-using-browserify-704a7947a09e?source=collection_archive---------4-----------------------#2017-02-18">https://medium.com/hackernoon/building-angular-app-using-browserify-704a7947a09e?source=collection_archive---------4-----------------------#2017-02-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="6366" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这篇文章不是关于<code class="eh jq jr js jt b">Angular js</code>的<a class="ae jp" href="https://hackernoon.com/tagged/tutorial" rel="noopener ugc nofollow" target="_blank">教程</a>，网上有很多，我建议你去看看。这更多的是关于<code class="eh jq jr js jt b">Angular js</code>的设置，这样你就可以构建易于长期维护和管理的应用。</p><h1 id="488d" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">从<code class="eh jq jr js jt b">grunt</code>和<code class="eh jq jr js jt b">browserify</code>开始</h1><p id="85d8" class="pw-post-body-paragraph ir is hu it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hn dt translated">如果你曾经使用过像<code class="eh jq jr js jt b">ember.js</code>这样的东西，你可能已经注意到所有的东西都在正确的文件夹里，并且可以从盒子里取出来并实时重新加载等等。有角度的就不一样了，所以很多人最终都做错了。让我们从创建一个<code class="eh jq jr js jt b">package.json</code>来维护所有的依赖关系开始</p><pre class="kx ky kz la fq lb jt lc ld aw le dt"><span id="043b" class="lf jv hu jt b fv lg lh l li lj">npm init --yes</span></pre><p id="1c56" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在假设您已经在全球范围内安装了<code class="eh jq jr js jt b">grunt-cli</code>,接下来您要做的就是。安装实时重新加载和构建应用程序所需的软件包。</p><pre class="kx ky kz la fq lb jt lc ld aw le dt"><span id="18d8" class="lf jv hu jt b fv lg lh l li lj">npm i --save-dev grunt grunt-browserify grunt-contrib-copy grunt-contrib-watch</span></pre><p id="989a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">显然，如果你开发应用程序有一段时间了，你会知道<code class="eh jq jr js jt b">scss</code>和<code class="eh jq jr js jt b">jade</code>是你有用的朋友。让我们添加他们也需要的构建工具。如果你想使用html和css，你可以去掉这一步。</p><pre class="kx ky kz la fq lb jt lc ld aw le dt"><span id="edc8" class="lf jv hu jt b fv lg lh l li lj">npm i --save grunt-contrib-jade grunt-contrib-sass</span></pre><p id="d9b5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">不用说，如果你正在使用<code class="eh jq jr js jt b">grunt-contrib-sass</code>，确保你已经安装了用于<code class="eh jq jr js jt b">scss</code>的ruby模块。</p><h1 id="286a" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">安装<code class="eh jq jr js jt b">angularjs</code>和<code class="eh jq jr js jt b">angular-route</code></h1><p id="3769" class="pw-post-body-paragraph ir is hu it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hn dt translated">在最后一步中，我们只添加了构建所需的依赖项，这是安装angular和ngRoute的时间。</p><pre class="kx ky kz la fq lb jt lc ld aw le dt"><span id="264a" class="lf jv hu jt b fv lg lh l li lj">npm i --save angular angular-route</span></pre><p id="e004" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">请注意，我没有将它们添加到开发依赖项中。</p><h1 id="f242" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">准备好文件夹结构</h1><p id="7c3e" class="pw-post-body-paragraph ir is hu it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hn dt translated">这是一个小的应用程序结构，我更喜欢用它来保持我的代码的可管理性</p><pre class="kx ky kz la fq lb jt lc ld aw le dt"><span id="c75f" class="lf jv hu jt b fv lg lh l li lj">.<br/>├── app.js<br/>├── components<br/>│   ├── nav.jade<br/>├── controllers<br/>│   ├── index.js<br/>│   └── testController.js<br/>├── factory<br/>│   └── index.js<br/>├── index.jade<br/>├── route.js<br/>├── style<br/>│   ├── main.scss<br/>└── templates<br/>    └── application.jade</span></pre><p id="976e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你总是可以把它改成适合你的。这是在我的npm项目的一个<code class="eh jq jr js jt b">app</code>文件夹中。</p><h1 id="3794" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">构建项目</h1><p id="dd11" class="pw-post-body-paragraph ir is hu it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hn dt translated">在你的根文件夹中编辑<code class="eh jq jr js jt b">Gruntfile.js</code>，包含<code class="eh jq jr js jt b">package.json</code>的文件夹，放入以下内容。</p><pre class="kx ky kz la fq lb jt lc ld aw le dt"><span id="cdbc" class="lf jv hu jt b fv lg lh l li lj">module.exports = function(grunt){<br/>    grunt.initConfig({<br/>      pkg: grunt.file.readJSON('package.json'),<br/>      browserify: {<br/>        'dist/app.js': ['app/app.js']<br/>      },<br/>      jade :{<br/>        compile: {<br/>          options: {<br/>            client: false,<br/>            pretty : false<br/>          },<br/>          files: [{<br/>            cwd: "app",<br/>            src: "**/*.jade",<br/>            dest: "dist",<br/>            expand: "true",<br/>            ext: ".html"<br/>          }]<br/>        }<br/>      },<br/>      watch: {<br/>        all: {<br/>          options: {livereload: true},<br/>          files: ['app/**'],<br/>          tasks: ['jade','sass','browserify']<br/>        }<br/>      },<br/>      sass:{<br/>        dist: {<br/>          files:{<br/>            'dist/main.css':'app/style/main.scss'<br/>          }<br/>        }<br/>      },<br/>      copy: {<br/>        main: {<br/>          expand: true,<br/>          cwd: 'static',<br/>          src: '**',<br/>          dest: 'dist/static',<br/>        },<br/>      }<br/>    });</span><span id="a0f4" class="lf jv hu jt b fv lk lh l li lj">  grunt.loadNpmTasks('grunt-contrib-jade');<br/>  grunt.loadNpmTasks('grunt-contrib-sass');<br/>  grunt.loadNpmTasks('grunt-contrib-watch');<br/>  grunt.loadNpmTasks('grunt-browserify');<br/>  grunt.loadNpmTasks('grunt-contrib-copy');<br/>  <br/>  grunt.registerTask('default', ['copy','jade','sass','browserify','watch']);<br/>};</span></pre><p id="13d4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这就是我们构建<code class="eh jq jr js jt b">app</code>所需的全部内容，它将被<code class="eh jq jr js jt b">grunt</code>构建并放入<code class="eh jq jr js jt b">dist</code>文件夹。</p><h1 id="9368" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">在angular app中放一些实际内容</h1><p id="61f7" class="pw-post-body-paragraph ir is hu it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hn dt translated">我只是要做一个简单的应用程序，导入导航。</p><pre class="kx ky kz la fq lb jt lc ld aw le dt"><span id="9df1" class="lf jv hu jt b fv lg lh l li lj">&lt;!--app/index.jade--&gt;<br/>doctype<br/>html.no-js<br/>  head<br/>    meta(charset='utf-8')<br/>    meta(http-equiv='X-UA-Compatible', content='IE=edge')<br/>    base(href='/')<br/>    title Application<br/>    meta(name='description', content='')<br/>    meta(name='viewport', content='width=device-width, initial-scale=1')<br/>    link(rel='stylesheet',href='main.css')<br/>  body(ng-app='application')<br/>    div(ng-view)<br/>    script(src='app.js')<br/>    script(src='//localhost:35729/livereload.js')</span></pre><p id="1481" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh jq jr js jt b">livereload</code>的最后一个脚本来自<code class="eh jq jr js jt b">grunt-watch</code>，当你修改代码时会重新加载页面。</p><pre class="kx ky kz la fq lb jt lc ld aw le dt"><span id="a900" class="lf jv hu jt b fv lg lh l li lj">// app/app.js<br/>var angular = require('angular');<br/>var ngRoute = require('angular-route');<br/>var app = angular.module('application', [ngRoute]);</span><span id="b58d" class="lf jv hu jt b fv lk lh l li lj">require('./route')(app);<br/>require('./controllers');</span></pre><p id="81d9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">记住我们已经安装了<code class="eh jq jr js jt b">angular</code>和<code class="eh jq jr js jt b">angular-route</code>。</p><pre class="kx ky kz la fq lb jt lc ld aw le dt"><span id="ff3e" class="lf jv hu jt b fv lg lh l li lj">// app/routes.js<br/>module.exports = function(app) {<br/>  app.config(function($routeProvider, $locationProvider) {<br/>    $routeProvider<br/>      .when("/",{<br/>        templateUrl: "templates/application.html"<br/>      });<br/>    $locationProvider.html5Mode(true);<br/>  });<br/>};</span></pre><p id="0504" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是我们定义所有路线的文件。注意，<code class="eh jq jr js jt b">templates/application.html</code>是<code class="eh jq jr js jt b">templates/application.jade</code>的玉石输出。</p><pre class="kx ky kz la fq lb jt lc ld aw le dt"><span id="9a33" class="lf jv hu jt b fv lg lh l li lj">// app/controllers/index.js<br/>var app = require('angular').module('application');</span><span id="9ce4" class="lf jv hu jt b fv lk lh l li lj">app.controller('testController',require('./testController.js'));</span></pre><p id="d609" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是在<code class="eh jq jr js jt b">app/app.js</code>中导入的文件，我们需要在这里包含所有的控制器。在这种情况下，我用<code class="eh jq jr js jt b">testController</code>进行了演示，你可以从树形结构中看到。</p><h1 id="77b9" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">组件呢？</h1><p id="bc37" class="pw-post-body-paragraph ir is hu it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hn dt translated">这更多的是一些常见的可重复使用的东西，比如我保存的导航，这样我的模板目录就不会变得杂乱。<code class="eh jq jr js jt b">application.jade</code>中的示例，在本例中是登录页面，我可以使用</p><pre class="kx ky kz la fq lb jt lc ld aw le dt"><span id="ea2a" class="lf jv hu jt b fv lg lh l li lj">div(ng-include="'/components/nav.html'")</span></pre><h1 id="ed0a" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">如何在浏览器中查看更改</h1><p id="e86b" class="pw-post-body-paragraph ir is hu it b iu ks iw ix iy kt ja jb jc ku je jf jg kv ji jj jk kw jm jn jo hn dt translated">首先你需要开始构建，简单地进入npm项目的根文件夹并从终端运行<code class="eh jq jr js jt b">grunt</code>。它将构建项目并开始寻找变化。</p><p id="a57a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可能还会看到一个名为<code class="eh jq jr js jt b">dist</code>的新目录。该目录是代码的最终构建输出。只需在该目录中启动一个<code class="eh jq jr js jt b">web-server</code>,并在浏览器中转到该url，在那里您可以看到应用程序正在运行。</p><blockquote class="ll lm ln"><p id="3623" class="ir is lo it b iu iv iw ix iy iz ja jb lp jd je jf lq jh ji jj lr jl jm jn jo hn dt translated"><em class="hu">当您对代码进行任何更改时，grunt会自动运行，浏览器会反映更新后的更改，而无需重新加载。</em></p></blockquote><figure class="kx ky kz la fq ls"><div class="bz el l di"><div class="lt lu l"/></div></figure></div></div>    
</body>
</html>