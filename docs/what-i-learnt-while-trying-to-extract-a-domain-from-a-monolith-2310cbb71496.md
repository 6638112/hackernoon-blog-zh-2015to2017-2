# 当我试图从一块巨石上提取一个领域时，我学到了什么

> 原文：<https://medium.com/hackernoon/what-i-learnt-while-trying-to-extract-a-domain-from-a-monolith-2310cbb71496>

![](img/4e87ce638e581c7c28dd040a857cc4bc.png)

Monolith waiting to be demolished

从整体架构转移到面向服务的架构是我们在 web 开发中经常听到的架构变化之一。虽然有些人认为这是你应该做的，如果你想现代化你的应用程序，其他人认为，如果整块工作，最好不要碰它。我试图打破一块巨石的一部分，但失败了。这是我学到的:

# 专注于你的主要目标

您的主要目标是重构您当前的应用程序，以便您可以迁移到面向服务的架构。有可能新的架构允许你的应用程序做新的功能，这在以前是非常复杂的，你可能会忍不住去做。就是不要。

打破一个庞然大物不是一件容易的事情，分心越少越好。你不仅要处理你已经拥有的用例，还要处理管理服务之间的交互、测试它们之间的集成等等的复杂性。

# 采取渐进的方法

从头开始创建一个新的服务，在它自己的存储库中，设计一个令人敬畏的 REST API，并定义所有与你的 monolith 的交互看起来是什么样子，这真的很诱人。这太有趣了，你正在从事一项理想的服务，也许使用了一项新技术，一切看起来都很棒，但这会给你带来很多麻烦。原因如下:

*   您现有的应用程序正在发展，您理想的服务功能可能会过时。最有可能的是，你将无法执行代码冻结。
*   您没有从使用您的应用程序的用户那里得到快速的反馈，这意味着您不知道您实现的东西是否如他们所希望的那样工作。

不要从头开始构建，您应该尝试隔离您稍后想要提取到它自己的服务中的域。找出不属于你的领域的责任漏入你的领域的地方，以及你的领域如何漏入其他领域。尝试在这些地方设置一个清晰的边界，确保在同一个应用程序中，不同领域之间的关注点是清晰的。

# 与利益相关者交谈

我发现自己从与利益相关者的交谈中学到了很多，以便了解我试图提取的领域的专家的需求。例如，虽然您可能会很自然地认为您的域中有一个域泄漏，您只是想摆脱它，但您可能没有意识到实际上需要它的存在。向利益相关者提出你的改变，听取他们的意见，然后做出改变。不要高估与那些每天都在使用你的系统的人交谈的力量，他们是真正的专家，知道一旦你的系统脱离了那个庞然大物，它应该做什么。

# 结论

如果你试图打破一个整体，或者至少是它的一部分，记住这通常是一个复杂的任务，你应该保护自己不要在做的时候增加新的功能。

逐步隔离您的领域，而不是使用预先设计的方法，将有助于您获得快速的反馈，并找到真正的问题，如果您并行构建您的理想服务，这些问题是您想象不到的。

最后，和你的利益相关者谈谈。这些人真正理解你试图提取的领域，并且在做一些设计决策时非常有用。

[![](img/50ef4044ecd4e250b5d50f368b775d38.png)](http://bit.ly/HackernoonFB)[![](img/979d9a46439d5aebbdcdca574e21dc81.png)](https://goo.gl/k7XYbx)[![](img/2930ba6bd2c12218fdbbf7e02c8746ff.png)](https://goo.gl/4ofytp)

> [黑客中午](http://bit.ly/Hackernoon)是黑客如何开始他们的下午。我们是 [@AMI](http://bit.ly/atAMIatAMI) 家庭的一员。我们现在[接受投稿](http://bit.ly/hackernoonsubmission)，并乐意[讨论广告&赞助](mailto:partners@amipublications.com)机会。
> 
> 如果你喜欢这个故事，我们推荐你阅读我们的[最新科技故事](http://bit.ly/hackernoonlatestt)和[趋势科技故事](https://hackernoon.com/trending)。直到下一次，不要把世界的现实想当然！

![](img/be0ca55ba73a573dce11effb2ee80d56.png)