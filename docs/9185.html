<html>
<head>
<title>Symbolic Links Did Not Work as Expected</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">符号链接没有像预期的那样工作</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/symbolic-links-did-not-work-as-expected-6a3af628da53?source=collection_archive---------13-----------------------#2017-12-29">https://medium.com/hackernoon/symbolic-links-did-not-work-as-expected-6a3af628da53?source=collection_archive---------13-----------------------#2017-12-29</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="985a" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">手册页中的简单修复方法在MAC上并不存在</h2></div><p id="30c3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果<code class="eh kf kg kh ki b">source_file</code>包含一个笑脸，并且我想创建一个从<code class="eh kf kg kh ki b">some_directory/</code>到这个文件的<a class="ae kj" href="https://hackernoon.com/tagged/symbolic" rel="noopener ugc nofollow" target="_blank">符号</a>链接，那么“创建一个符号链接”的第一个谷歌结果<a class="ae kj" href="https://kb.iu.edu/d/abbe" rel="noopener ugc nofollow" target="_blank">告诉我</a></p><pre class="kk kl km kn fq ko ki kp kq aw kr dt"><span id="f86a" class="ks kt hu ki b fv ku kv l kw kx">$ ln -s source_file some_directory/link</span></pre><p id="660f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">但是，仔细一看，好像哪里出了问题！</p><pre class="kk kl km kn fq ko ki kp kq aw kr dt"><span id="af46" class="ks kt hu ki b fv ku kv l kw kx">$ cat some_directory/link<br/>cat: some_directory/link: No such file or directory</span></pre><p id="5175" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">继续读下去做一点实验，看看操作系统在哪里<strong class="jl hv">真的</strong>在寻找我们的符号链接的来源。如果你想跳到最后也没关系，我已经包含了一个<a class="ae kj" href="https://hackernoon.com/tagged/stackoverflow" rel="noopener ugc nofollow" target="_blank"> StackOverflow </a>链接，里面有一些有用的解决方案。</p><h2 id="c680" class="ks kt hu bd ky kz la lb lc ld le lf lg js lh li lj jw lk ll lm ka ln lo lp lq dt translated">设置</h2><p id="9527" class="pw-post-body-paragraph jj jk hu jl b jm lr iv jo jp ls iy jr js lt ju jv jw lu jy jz ka lv kc kd ke hn dt translated">首先，让我们设置一个包含ascii笑脸的虚拟<code class="eh kf kg kh ki b">source_file</code></p><pre class="kk kl km kn fq ko ki kp kq aw kr dt"><span id="ef5f" class="ks kt hu ki b fv ku kv l kw kx">$ cd<br/>$ echo ":)" &gt;&gt; source_file<br/>$ cat source_file<br/>:)</span></pre><p id="7991" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们的目标是创建一个到<code class="eh kf kg kh ki b">source_file</code>的符号链接。我们希望能够在<code class="eh kf kg kh ki b">$ cat some_directory/link</code>看到<code class="eh kf kg kh ki b">source_file</code>的笑脸。</p><p id="178d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">就像我们在上面看到的，按照第一个谷歌结果<a class="ae kj" href="https://kb.iu.edu/d/abbe" rel="noopener ugc nofollow" target="_blank">上的说明</a>来“创建一个符号链接”并不像我们预期的那样工作</p><pre class="kk kl km kn fq ko ki kp kq aw kr dt"><span id="c158" class="ks kt hu ki b fv ku kv l kw kx">$ mkdir some_directory<br/>$ ln -s source_file some_directory/link<br/>$ cat some_directory/link<br/>cat: some_directory/link: No such file or directory</span></pre><h2 id="0fec" class="ks kt hu bd ky kz la lb lc ld le lf lg js lh li lj jw lk ll lm ka ln lo lp lq dt translated">好，我们的链接指向哪里？</h2><p id="b2ac" class="pw-post-body-paragraph jj jk hu jl b jm lr iv jo jp ls iy jr js lt ju jv jw lu jy jz ka lv kc kd ke hn dt translated">经过一番挖掘，我意识到操作系统可能正在搜索我的源文件<strong class="jl hv">相对于</strong>我的链接的最终位置！我通过在我的链接旁边创建一个新的<code class="eh kf kg kh ki b">source_file</code>来测试这个假设，并给它一个皱眉头的表情</p><pre class="kk kl km kn fq ko ki kp kq aw kr dt"><span id="bc4f" class="ks kt hu ki b fv ku kv l kw kx">$ echo ":'(" &gt;&gt; some_directory/source_file</span></pre><p id="c12f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">新的目录结构看起来像</p><pre class="kk kl km kn fq ko ki kp kq aw kr dt"><span id="3865" class="ks kt hu ki b fv ku kv l kw kx">source_file # :)<br/>some_directory/<br/>|-- link<br/>|-- source_file # :(</span></pre><p id="92e9" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">而<code class="eh kf kg kh ki b">some_directory/link</code>的确是皱着脸指着文件</p><pre class="kk kl km kn fq ko ki kp kq aw kr dt"><span id="2bc7" class="ks kt hu ki b fv ku kv l kw kx">$ cat some_directory/link<br/>:'(</span></pre><blockquote class="lw lx ly"><p id="7ffe" class="jj jk lz jl b jm jn iv jo jp jq iy jr ma jt ju jv mb jx jy jz mc kb kc kd ke hn dt translated"><code class="eh kf kg kh ki b">some_directory/link</code>不是指向<code class="eh kf kg kh ki b">source_file</code>，而是指向<code class="eh kf kg kh ki b">some_directory/source_file</code></p></blockquote><h2 id="5295" class="ks kt hu bd ky kz la lb lc ld le lf lg js lh li lj jw lk ll lm ka ln lo lp lq dt translated">修复#1:递归符号链接</h2><p id="a988" class="pw-post-body-paragraph jj jk hu jl b jm lr iv jo jp ls iy jr js lt ju jv jw lu jy jz ka lv kc kd ke hn dt translated">一旦我诊断出问题，就很容易在<a class="ae kj" href="http://man7.org/linux/man-pages/man1/ln.1.html" rel="noopener ugc nofollow" target="_blank">手册页</a>中找到<code class="eh kf kg kh ki b">ln</code>的正确选项。</p><pre class="kk kl km kn fq ko ki kp kq aw kr dt"><span id="810b" class="ks kt hu ki b fv ku kv l kw kx">$ ln -sr source_file some_directory/other_link<br/>$ cat some_directory/other_link<br/>:)</span></pre><p id="d9c4" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">但是等等！事情没有这么顺利。据我所知，<code class="eh kf kg kh ki b">ln</code>在mac上没有<code class="eh kf kg kh ki b">-r</code>或<code class="eh kf kg kh ki b">--recursive</code>选项。</p><h2 id="dcec" class="ks kt hu bd ky kz la lb lc ld le lf lg js lh li lj jw lk ll lm ka ln lo lp lq dt translated">修复#2:绝对路径</h2><p id="9bd0" class="pw-post-body-paragraph jj jk hu jl b jm lr iv jo jp ls iy jr js lt ju jv jw lu jy jz ka lv kc kd ke hn dt translated">在mac上，我可以为<code class="eh kf kg kh ki b">source_file</code>使用绝对路径</p><pre class="kk kl km kn fq ko ki kp kq aw kr dt"><span id="1cc4" class="ks kt hu ki b fv ku kv l kw kx">$ ln -s ~/source_file some_directory/absolute_link<br/>$ cat some_directory/absolute_link<br/>:)</span></pre><h2 id="e0fe" class="ks kt hu bd ky kz la lb lc ld le lf lg js lh li lj jw lk ll lm ka ln lo lp lq dt translated">修复#3:打出相对链接</h2><p id="f98e" class="pw-post-body-paragraph jj jk hu jl b jm lr iv jo jp ls iy jr js lt ju jv jw lu jy jz ka lv kc kd ke hn dt translated">或者，另一个选择(我更喜欢——不是每个人都将他们的git存储库签出到本地开发机器上的同一个文件夹中)是使用相对于符号链接的源文件路径</p><pre class="kk kl km kn fq ko ki kp kq aw kr dt"><span id="a712" class="ks kt hu ki b fv ku kv l kw kx">$ ln -s ../source_file some_directory/other_link<br/>$ cat some_directory/other_link<br/>:)</span></pre><h2 id="d9d7" class="ks kt hu bd ky kz la lb lc ld le lf lg js lh li lj jw lk ll lm ka ln lo lp lq dt translated">结论又名TL/DR</h2><p id="cd44" class="pw-post-body-paragraph jj jk hu jl b jm lr iv jo jp ls iy jr js lt ju jv jw lu jy jz ka lv kc kd ke hn dt translated">和往常一样，StackOverflow有一些更好的方法来解决这个问题</p><div class="md me fm fo mf mg"><a href="https://stackoverflow.com/questions/221267/copying-symbolic-links-in-mac-os-x" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab ej"><div class="mi ab mj cl cj mk"><h2 class="bd hv fv z el ml eo ep mm er et ht dt translated">在Mac OS X中拷贝符号链接</h2><div class="mn l"><h3 class="bd b fv z el ml eo ep mm er et ek translated">加入Stack Overflow，学习、分享知识，打造您的职业生涯。复制符号的最简单方法是什么…</h3></div><div class="mo l"><p class="bd b gc z el ml eo ep mm er et ek translated">stackoverflow.com</p></div></div><div class="mp l"><div class="mq l mr ms mt mp mu mv mg"/></div></div></a></div><figure class="kk kl km kn fq mw"><div class="bz el l di"><div class="mx my l"/></div></figure></div></div>    
</body>
</html>