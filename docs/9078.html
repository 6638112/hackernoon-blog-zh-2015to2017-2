<html>
<head>
<title>Ethereum Zero to Hero: Developing Our First Contract</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以太坊零到英雄:开发我们的第一份合同</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/ethereum-zero-to-hero-developing-our-first-contract-d8578c040475?source=collection_archive---------13-----------------------#2017-12-25">https://medium.com/hackernoon/ethereum-zero-to-hero-developing-our-first-contract-d8578c040475?source=collection_archive---------13-----------------------#2017-12-25</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/b4408942405f342b42550405bc1eedd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YL7Q11ZNxi-1DSeplmzp_A.png"/></div></div></figure><p id="86d9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是我们以太坊零到英雄指南的第三部分。如果你还没有阅读前一篇文章，我强烈建议你在阅读前先看看。</p><p id="86d1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这篇文章中，我们将继续讨论，并开始开发一个基本的智能合同，学习更多关于可靠性和合同如何工作的知识。</p><p id="d630" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以太坊区块链最有趣的特性之一是<strong class="je hv">创建数字代币</strong>的能力。代币是数字资产，可以代表任何东西，从<strong class="je hv">硬币</strong>、<strong class="je hv">忠诚度积分</strong>到现实世界中的实际<strong class="je hv">物品</strong>。令牌还可以用于与其他<strong class="je hv">智能合约</strong>进行交互。</p><p id="0028" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">代币在以太坊网络中作为加密货币出售和交易，并允许用户支付智能合约交易费用，对于我们的第一个合约，我们将创建部署在我们的私有网络上所需的<strong class="je hv">最小可行合约</strong>。</p><h2 id="b330" class="ka kb hu bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">关于ERC20的一句话</h2><p id="becb" class="pw-post-body-paragraph jc jd hu je b jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv kz jx jy jz hn dt translated">通常在处理令牌时，您会看到引用了单词ERC20。<strong class="je hv"> ERC20 </strong>是一个令牌标准，描述了以太坊令牌合约必须实现的功能和事件，通过遵循该标准，我们保证令牌将立即与以太坊钱包和任何其他使用相同<strong class="je hv">标准</strong>的客户端或合约兼容。</p><p id="693a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了使令牌符合ERC20标准，它必须实现以下功能:</p><figure class="la lb lc ld fq iv"><div class="bz el l di"><div class="le lf l"/></div></figure><p id="d607" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有关ERC20标准的更多详情，请查看以下链接:</p><ul class=""><li id="b208" class="lg lh hu je b jf jg jj jk jn li jr lj jv lk jz ll lm ln lo dt translated"><a class="ae lp" href="https://theethereum.wiki/w/index.php/ERC20_Token_Standard" rel="noopener ugc nofollow" target="_blank"> ERC20令牌标准</a></li><li id="3125" class="lg lh hu je b jf lq jj lr jn ls jr lt jv lu jz ll lm ln lo dt translated"><a class="ae lp" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20-token-standard.md" rel="noopener ugc nofollow" target="_blank"> ERC20改进建议(EIP) </a></li></ul><h2 id="489a" class="ka kb hu bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">以太坊钱包</h2><blockquote class="lv lw lx"><p id="1710" class="jc jd ly je b jf jg jh ji jj jk jl jm lz jo jp jq ma js jt ju mb jw jx jy jz hn dt translated">以太坊钱包是以太坊区块链去中心化应用的入口。它允许你持有和保护以太和其他建立在以太坊上的加密资产，以及撰写、部署和使用智能合同。</p></blockquote><p id="30d0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">到目前为止，我们一直直接在<strong class="je hv"> Geth </strong>控制台上工作，虽然我强烈建议<strong class="je hv">以太坊开发者</strong>熟悉和了解<strong class="je hv"> Geth </strong>以便了解一些<strong class="je hv">以太坊</strong>的内部运作方式，从而更快地移动和更智能地工作，但我们将切换到官方以太坊钱包:</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mc"><img src="../Images/25b461b708d5fd5a7f034aa06b9702f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eWFzgIuLAAifP69usXIJUg.png"/></div></div></figure><p id="f202" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在继续之前，请确保下载并安装以太坊钱包。</p><h2 id="1896" class="ka kb hu bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">将钱包连接到我们的私人测试网</h2><p id="8c96" class="pw-post-body-paragraph jc jd hu je b jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv kz jx jy jz hn dt translated">默认情况下，<strong class="je hv">以太坊钱包</strong>会尝试连接到主网络，它也允许你连接到一个测试网络。</p><p id="bf1f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">出于我们的目的，我们希望它自动开始连接到我们的testnet，因此在打开钱包之前，请执行以下操作:</p><blockquote class="lv lw lx"><p id="7d7f" class="jc jd ly je b jf jg jh ji jj jk jl jm lz jo jp jq ma js jt ju mb jw jx jy jz hn dt translated"><strong class="je hv">免责声明</strong>:以下操作将覆盖主网络的任何本地信息，这可能会导致以太网丢失，请小心并理解您正在运行的命令。</p></blockquote><ol class=""><li id="d889" class="lg lh hu je b jf jg jj jk jn li jr lj jv lk jz md lm ln lo dt translated">停止正在运行的geth节点</li><li id="23c1" class="lg lh hu je b jf lq jj lr jn ls jr lt jv lu jz md lm ln lo dt translated">运行以下命令</li></ol><p id="9d51" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh me mf mg mh b">geth --datadir ./TestNetData --identity "HeroNode1" --ipcpath ~/Library/Ethereum/geth.ipc --networkid 24 --maxpeers 1 console</code></p><p id="704e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，我们可以打开我们的以太坊钱包，它应该会自动连接到测试网络，我们所做的是重新启动我们的Geth节点，并在钱包的默认位置设置IPC(进程间通信)管道，这样钱包将直接建立到我们的Geth节点的连接，而不是创建到主网络的连接。</p><p id="a164" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">继续操作之前，请确保钱包显示的网络名称为<strong class="je hv"> Private-Net </strong>。</p><h1 id="028c" class="mi kb hu bd kc mj mk ml kg mm mn mo kk mp mq mr kn ms mt mu kq mv mw mx kt my dt translated">最小可行令牌</h1><p id="9619" class="pw-post-body-paragraph jc jd hu je b jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv kz jx jy jz hn dt translated">正如我们在本系列的第一篇文章中了解到的，合同是使用<strong class="je hv"> Solidity </strong>语言编程的；有几个工具可用于<strong class="je hv">编译</strong>、<strong class="je hv">调试</strong>和<strong class="je hv">编写</strong>实体合同，目前我们将使用以太坊钱包附带的实体合同编辑器。</p><p id="7de1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以下是我们最小可行令牌的代码:</p><figure class="la lb lc ld fq iv"><div class="bz el l di"><div class="le lf l"/></div></figure><p id="f6fb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在从上面抓取源代码并粘贴到<strong class="je hv"> Solidity合同源代码字段</strong>。钱包将自动检查代码<strong class="je hv">是否编译了</strong>，如果编译了，您将在右侧看到一个“选择合同”下拉列表，如下所示:</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mz"><img src="../Images/a699da0075a3230c53a599b92aa7aea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Migkorud6MT_Jcp_t-u24Q.png"/></div></div></figure><p id="42ee" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">值得注意的一件有趣的事情是，还有一个构造函数参数，在这个例子中，是一个初始供应的<strong class="je hv">英雄令牌</strong>，这将是一个关于契约创建的问题。</p><p id="3181" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你继续向下滚动，你会看到该合同的计算成本的<strong class="je hv">估计，你可以选择你愿意为此支付多少费用。不要忘记设置我们将颁发的令牌的初始数量，现在继续并单击“部署”按钮。</strong></p><p id="6a43" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来，您将看到如下确认对话框:</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff na"><img src="../Images/de46351abe73c40fab97ebb48a5667fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W9VVuP7ymhTzuIl9N4AiEw.png"/></div></div></figure><p id="3584" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">提交合同后，您应该会在下面的最新交易中看到它，等待确认。通常，应该需要30秒左右的时间来确认合同，但在这一点上，我们可以等啊等，什么也不会发生。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nb"><img src="../Images/aa9a88a2c6f816f327a0275fa91da8aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AMFNulr9oXx5eIqBG6thlg.png"/></div></div></figure><p id="0c90" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是因为网络中没有其他节点，也没有人在采矿，以太坊现在就像比特币一样，作为一个<strong class="je hv">工作证明</strong>网络，我不会进入细节，但你可以阅读下面的文章获得详细解释:</p><p id="b830" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae lp" href="https://keepingstock.net/explaining-blockchain-how-proof-of-work-enables-trustless-consensus-2abed27f0845" rel="noopener ugc nofollow" target="_blank">解释区块链——工作证明如何促成不可信的共识</a></p><p id="2fe8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们进入节点控制台，键入以下命令来验证我们的合同:</p><p id="7482" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh me mf mg mh b">miner.start()</code></p><p id="a124" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">大约需要12次交易来确认合同，完成后，我们可以通过键入以下命令来停止采矿:</p><p id="2237" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh me mf mg mh b">miner.stop()</code></p><p id="7b18" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">查看最近的交易，我们的合同现在应该得到验证，我们可以通过进入“<strong class="je hv">Contracts</strong>”选项卡进行确认，我们应该会看到我们新创建的合同。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nc"><img src="../Images/0fe7a624e5b11101935b7368e4506b13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KafCK0NubRTSJCIbaekQoQ.png"/></div></div></figure><p id="d900" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">点击它进入它的页面。点击“复制地址”并将合同地址粘贴到文本编辑器中，您将很快需要它。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nd"><img src="../Images/8961bc5959a4dfc48e1f70ccb4158b92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yvPHwvnUHCsRfc-y0XKhIA.png"/></div></div></figure><p id="bace" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你点击你的钱包地址，没有迹象表明那些代币在那里，是不是出了什么问题？不，钱包只跟踪它知道的令牌，我们没有告诉我们的钱包跟踪我们的新令牌。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ne"><img src="../Images/e19313cf8bd345eab17189277ae8f8d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pD4llZdPOSv_-dG-4TFgFQ.png"/></div></div></figure><h2 id="0be3" class="ka kb hu bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">跟踪令牌</h2><ol class=""><li id="c153" class="lg lh hu je b jf kv jj kw jn nf jr ng jv nh jz md lm ln lo dt translated">转到合同页面</li><li id="e4f4" class="lg lh hu je b jf lq jj lr jn ls jr lt jv lu jz md lm ln lo dt translated">单击“监视令牌”按钮</li><li id="37af" class="lg lh hu je b jf lq jj lr jn ls jr lt jv lu jz md lm ln lo dt translated">将出现一个弹出窗口，复制合同的地址，并确保输入所有的细节</li><li id="008f" class="lg lh hu je b jf lq jj lr jn ls jr lt jv lu jz md lm ln lo dt translated">单击确定</li></ol><p id="0212" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，如果你回到你的钱包，你应该看到这是跟踪令牌，如下图所示。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ni"><img src="../Images/6e3f124034ea27538a5a9116aba83dd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xdXsCE2g_8wORFV22rRMzw.png"/></div></div></figure><p id="c595" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">恭喜你！您成功创建了第一个令牌。</p><h1 id="124a" class="mi kb hu bd kc mj mk ml kg mm mn mo kk mp mq mr kn ms mt mu kq mv mw mx kt my dt translated">后续步骤</h1><p id="7e76" class="pw-post-body-paragraph jc jd hu je b jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv kz jx jy jz hn dt translated">虽然我们成功地创建了一个基本令牌，但现在并不十分有用。在下一篇文章中，我们将改进我们的HeroToken合同，并添加更多高级功能。</p><p id="06dd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ly">本文原帖</em> <a class="ae lp" href="https://coderoncode.com/blockchain/2017/12/24/ethereum-zero-to-hero-developing-our-first-contract.html" rel="noopener ugc nofollow" target="_blank"> <em class="ly">在我自己的网站</em> </a> <em class="ly">。</em></p></div></div>    
</body>
</html>