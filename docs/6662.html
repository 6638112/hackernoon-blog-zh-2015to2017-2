<html>
<head>
<title>AWS AMIs: another way to roll your own Linux distros</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS AMIs:推出自己的Linux发行版的另一种方式</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/aws-amis-another-way-to-roll-your-own-linux-distros-9e79bd1b264d?source=collection_archive---------8-----------------------#2017-09-28">https://medium.com/hackernoon/aws-amis-another-way-to-roll-your-own-linux-distros-9e79bd1b264d?source=collection_archive---------8-----------------------#2017-09-28</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="99dd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">开源应该是一项团队运动。由于您可以自由下载代码并根据自己的需要重新编写，因此您也可以自由地与您最亲密的朋友和家人分享您的定制内容。多年来，开源世界的核心——Linux已经发展成了数百个发行版(或者更常见的叫法是“发行版”)。你认为还有一个无人问津的领域吗？您自己的企业是否需要专门构建的操作系统环境来适应其独特的工作流程？那就想尽一切办法定制吧。</p><p id="41f8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">创建你自己的发行版并不意味着你必须破解内核，通过晦涩的系统调用和isa来解决问题。你可以简单地安装你自己的软件，重置一些环境变量，或者只是安装几个定制脚本，假设你的名字是Linda，你可以叫它Lindux(但那是你自己的事)。</p><p id="8305" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">尽管如此，不管你的发行版有多简单，把它打包到一个ISO文档中与世界共享会变得非常复杂，非常快。不相信我？只需在互联网上搜索“构建你自己的Linux发行版”的指南和工具，并注意有多少，每个需要多少步骤，以及有多少工具已经被放弃，因为对基础发行版的新升级使它们变得无用。</p><p id="233c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我不是想打击你。如果你已经得到了新发行版的bug，并且你已经准备好迎接挑战，那么尽一切办法，使用传统的工具为我们构建一个伟大的。但是，如果您想要的是一个将在AWS云中运行的定制的Linux服务器映像，那么有一个简单得多的方法。</p><p id="42d7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">正如我在我的新书<a class="ae jp" href="https://www.manning.com/books/learn-amazon-web-services-in-a-month-of-lunches?a_aid=bootstrap-it&amp;amp;a_bid=1c1b5e27" rel="noopener ugc nofollow" target="_blank"> Manning中详细描述的那样，“<strong class="it hv">在一个月的午餐中学习亚马逊网络服务</strong>，”</a>支持许多AWS工作负载的基本虚拟机是弹性计算云(EC2)服务器实例。EC2实例预装了一系列操作系统，但是绝大多数都运行不同风格的Linux。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/c9cfa1cd17d34d1d3c165d86ec163536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y5r-WuO-og8LB7FW5KcArQ.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek"><a class="ae jp" href="https://www.manning.com/books/learn-amazon-web-services-in-a-month-of-lunches?a_aid=bootstrap-it&amp;amp;a_bid=1c1b5e27" rel="noopener ugc nofollow" target="_blank">Learn Amazon Web Services in a Month of Lunches</a></figcaption></figure><p id="1bb6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以你可以这么做:</p><ul class=""><li id="934f" class="kg kh hu it b iu iv iy iz jc ki jg kj jk kk jo kl km kn ko dt translated">选择并启动一个用您选择的Linux发行版构建的EC2实例。这将是你自己发行版的基础。</li><li id="4bf3" class="kg kh hu it b iu kp iy kq jc kr jg ks jk kt jo kl km kn ko dt translated">使用SSH登录到您的实例，安装您自己的发行版所需的软件和环境设置。</li><li id="1a35" class="kg kh hu it b iu kp iy kq jc kr jg ks jk kt jo kl km kn ko dt translated">创建实例的映像(这将有效地成为实例当前状态的完美副本)。作为一个亚马逊机器映像(AMI)，这个映像可以公开给任何人，让他们在自己的AWS帐户中启动。或者你可以保持私密，只在你自己的团队成员之间分享。</li></ul><p id="b142" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">实际上，AWS AMI成为打包和分发图像的单一工具。也许把从另一端出来的东西叫做<em class="ku">发行版并不是100%准确，而且如果你想提供一个桌面GUI体验的话，这也是毫无用处的——但是它会比其他任何选择都要快得多，也容易得多。</em></p><p id="b008" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这一切是如何运作的？下面是简短的版本。在EC2实例仪表板中选择要复制的正在运行的EC2实例。然后点击<strong class="it hv">动作</strong>，选择<strong class="it hv">图像</strong>，然后选择<strong class="it hv">创建图像</strong>。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff kv"><img src="../Images/a84a13e1e6c24583acaccb47e46fedef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UG4QUbKhpM7DE-kB_J6pKA.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Create a new image based on a running instance</figcaption></figure><p id="171e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">几分钟后，一个新的图像应该会出现在EC2仪表板的AMI页面上。下次您从EC2仪表板启动一个新实例并到达<strong class="it hv">选择一个Amazon机器映像</strong>页面时，单击<strong class="it hv">My AMI</strong>选项卡:您的新AMI应该在那里，等待被选择。如果您选择公开您的图像，那么其他用户将在<strong class="it hv">社区AMIs </strong>选项卡中找到它。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff kv"><img src="../Images/41a00bd6df524107ff756d3ec7351fec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XQMPd9uwPlLiCgSomKbXZw.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Public AMIs are available from this tab</figcaption></figure><p id="53d0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是这有什么意思呢？如果你想像职业玩家一样玩，你将<a class="ae jp" href="https://livebook.manning.com/#!/book/learn-amazon-web-services-in-a-month-of-lunches/chapter-12/" rel="noopener ugc nofollow" target="_blank">安装并验证AWS CLI </a>并通过他们的API运行它。</p><p id="9f38" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这就是通过引用映像ID启动AMI映像的方式(顺便说一下，据我所知，这个映像不是活动的):</p><pre class="jr js jt ju fq kw kx ky kz aw la dt"><span id="e1bb" class="lb lc hu kx b fv ld le l lf lg">$ aws ec2 run-instances --image-id ami-5cf5c74b \<br/>--count 1 --instance-type t2.micro \<br/>--key-name mykey --security-group-ids sg-7a4d6200</span></pre><p id="4950" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们一步一步来:</p><ul class=""><li id="a645" class="kg kh hu it b iu iv iy iz jc ki jg kj jk kk jo kl km kn ko dt translated"><strong class="it hv"> aws ec2 run-instances </strong>运行一个新实例，其详细信息将在后面介绍。</li><li id="575e" class="kg kh hu it b iu kp iy kq jc kr jg ks jk kt jo kl km kn ko dt translated"><strong class="it hv"> image-id ami-5cf5c74b </strong>标识ami的id。您可以从EC2仪表板的AMI页面或从<br/> CLI使用</li></ul><pre class="jr js jt ju fq kw kx ky kz aw la dt"><span id="6a9d" class="lb lc hu kx b fv ld le l lf lg">aws ec2 describe-images --owners self .</span></pre><ul class=""><li id="85e2" class="kg kh hu it b iu iv iy iz jc ki jg kj jk kk jo kl km kn ko dt translated"><strong class="it hv"> count 1 </strong>指定您只想启动该映像的一个实例。</li><li id="924b" class="kg kh hu it b iu kp iy kq jc kr jg ks jk kt jo kl km kn ko dt translated"><strong class="it hv">实例类型t2.micro </strong>是实例类型。</li><li id="c672" class="kg kh hu it b iu kp iy kq jc kr jg ks jk kt jo kl km kn ko dt translated"><strong class="it hv"> key-name mykey </strong>是在实例运行时用来访问实例的密钥对的名称。这个例子使用了上一章中的复数——一个key- <br/> name例子。</li><li id="6b4b" class="kg kh hu it b iu kp iy kq jc kr jg ks jk kt jo kl km kn ko dt translated"><strong class="it hv">security-groups SG-7a4d 6200</strong>是您将使用的现有安全组的名称；您可以使用aws ec2 describe-security-groups找到它。此处显示的ID对于我的帐户的VPC中的组是唯一的。您需要使用自己帐户中的群ID。</li></ul><p id="4037" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">回到控制台。您将看到您的新实例正在初始化，最终您将看到您的Linux“发行版”的新副本正在愉快地运行。</p><p id="2644" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="ku">本文部分改编自我的</em> <a class="ae jp" href="https://www.manning.com/books/learn-amazon-web-services-in-a-month-of-lunches?a_aid=bootstrap-it&amp;amp;a_bid=1c1b5e27" rel="noopener ugc nofollow" target="_blank"> <em class="ku">曼宁《用一个月的午餐学会亚马逊Web服务》一书</em> </a> <em class="ku">。还有更多这方面的内容，包括我的来自曼宁的书</em><a class="ae jp" href="https://www.manning.com/books/linux-in-action?a_aid=bootstrap-it&amp;a_bid=4ca15fc9" rel="noopener ugc nofollow" target="_blank"><em class="ku">Linux in Action</em></a><em class="ku">，以及一个名为</em><a class="ae jp" href="https://www.manning.com/livevideo/linux-in-motion?a_aid=bootstrap-it&amp;a_bid=0c56986f&amp;chan=motion1" rel="noopener ugc nofollow" target="_blank"><em class="ku">Linux in Motion</em></a><em class="ku">的混合课程，它由两个多小时的视频和大约40%的Linux in Action文本组成。查看</em> <a class="ae jp" href="https://bootstrap-it.com/" rel="noopener ugc nofollow" target="_blank"> <em class="ku">我的其他书籍和课程</em> </a> <em class="ku">。</em></p></div></div>    
</body>
</html>