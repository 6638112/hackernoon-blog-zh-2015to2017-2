<html>
<head>
<title>socat: patch for OpenSSL certificate hash verification</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">socat:OpenSSL证书哈希验证补丁</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/socat-patch-for-openssl-certificate-hash-verification-f806982652db?source=collection_archive---------17-----------------------#2017-12-25">https://medium.com/hackernoon/socat-patch-for-openssl-certificate-hash-verification-f806982652db?source=collection_archive---------17-----------------------#2017-12-25</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="0c7f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">信任服务器上的特定证书(例如自签名证书，或者与不属于公共链的另一个CA的证书)的过程需要访问<code class="eh jp jq jr js b">/etc/ssl/certificates</code> (root访问)或者您喜欢的命令行界面工具中的选项，以提供不同的证书存储。<code class="eh jp jq jr js b">socat</code>尚未提供此选项。</p><p id="cb07" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您也可能遇到这样的情况:证书已过期，但您希望只信任特定的过期证书，而不是完全禁用证书验证。</p><p id="4904" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了涵盖这些和类似的用例，我开发了一个补丁，通过使用SHA256哈希的证书锁定来实现另一个方向(见下面的<a class="ae jt" href="https://gist.github.com/gdm85/db9c060c06e390cf6832346e787ec190" rel="noopener ugc nofollow" target="_blank">要点</a>)。</p><p id="c51d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">示例用法:</p><pre class="ju jv jw jx fq jy js jz ka aw kb dt"><span id="4e89" class="kc kd hu js b fv ke kf l kg kh">socat TCP-LISTEN:4443,reuseaddr,fork OPENSSL:example.com:8443,verify=0,verify-hash=654f3537fbff41fef5addf323dd01b7171dd14c54a5ae5b20f988e4c7a84c256</span></pre><p id="0d9c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您希望在SHA256哈希验证之后使用常规验证，可以省略上面示例中的<code class="eh jp jq jr js b">verify=0</code>。</p><p id="4328" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">享受新的<code class="eh jp jq jr js b">--verify-hash</code>功能，如果它对你的<code class="eh jp jq jr js b">socat</code>用例有帮助，请在评论中告诉我。</p><figure class="ju jv jw jx fq ki"><div class="bz el l di"><div class="kj kk l"/></div></figure></div></div>    
</body>
</html>