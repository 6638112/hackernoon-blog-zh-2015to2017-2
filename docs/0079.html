<html>
<head>
<title>Sorting in Scala, tails of Functional Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Scala中的排序，函数式编程的尾巴</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/sorting-in-scala-tails-of-functional-programming-679fb2ee4af9?source=collection_archive---------0-----------------------#2015-10-29">https://medium.com/hackernoon/sorting-in-scala-tails-of-functional-programming-679fb2ee4af9?source=collection_archive---------0-----------------------#2015-10-29</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/3ff626e002d27509ace51f9ce9fb1a37.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*cyVnXD7ymdoQ0DrUeG_icg.png"/></div></figure><p id="5403" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在与一位同事讨论函数式编程以及他如何使用Scala创建表达式求值器时，我意识到在过去的几个月里，我一直在使用Scala做一些有趣的工作。然而，我从上学的时候就没有编写过任何基本的算法。</p><p id="215c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我决定实现一个排序算法，比方说快速排序，但是我想从中去除任何命令式编程的痕迹。</p><p id="94a5" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">大约两分钟后，我以这个结尾:</p><pre class="jw jx jy jz fq ka kb kc kd aw ke dt"><span id="0614" class="kf kg hu kb b fv kh ki l kj kk">def quickSort(list: List[Int]): List[Int] = {<br/>    list match {<br/>      case Nil        =&gt; Nil<br/>      case a :: Nil   =&gt; List(a)<br/>      case a :: tail  =&gt; quickSort(tail.filter(x=&gt; x &lt;= a)) ::: List(a) ::: quickSort(tail.filter(x =&gt; x &gt; a))<br/>    }<br/>  }</span></pre><p id="f70f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这是一个有趣的快速排序实现，它总是将pivote作为列表的头部，但在我们只能以非常自然的方式访问该元素的特殊情况下，它是完美的。</p><p id="441d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">然后我上网把我的解决方案和网上的做了比较。</p><p id="766e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这是出来的一个:</p><pre class="jw jx jy jz fq ka kb kc kd aw ke dt"><span id="0a02" class="kf kg hu kb b fv kh ki l kj kk">def sort(xs: Array[Int]) {<br/>    def swap(i: Int, j: Int) {<br/>      val t = xs(i); xs(i) = xs(j); xs(j) = t<br/>    }<br/>    def sort1(l: Int, r: Int) {<br/>      val pivot = xs((l + r) / 2)<br/>      var i = l; var j = r<br/>      while (i &lt;= j) {<br/>        while (xs(i) &lt; pivot) i += 1<br/>        while (xs(j) &gt; pivot) j -= 1<br/>        if (i &lt;= j) {<br/>          swap(i, j)<br/>          i += 1<br/>          j -= 1<br/>        }<br/>      }<br/>      if (l &lt; j) sort1(l, j)<br/>      if (j &lt; r) sort1(i, r)<br/>    }<br/>    sort1(0, xs.length - 1)<br/>  }</span></pre><p id="b303" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">嗯，这是我们在任何编程类中都可以看到的经典快速排序，但是如果我们专注于Scala及其函数方面，解决方案的必要性使得编写和阅读起来很难看。</p><p id="c009" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">通过更深入的搜索，另一个解决方案出现了，这一次，更接近我正在寻找的。</p><pre class="jw jx jy jz fq ka kb kc kd aw ke dt"><span id="718b" class="kf kg hu kb b fv kh ki l kj kk">def sort(xs: Array[Int]): Array[Int] = {<br/>    if (xs.length &lt;= 1) xs<br/>    else {<br/>      val pivot = xs(xs.length / 2)<br/>      Array.concat(<br/>        sort(xs filter (pivot &gt;)),<br/>        xs filter (pivot ==),<br/>        sort(xs filter (pivot &lt;)))<br/>    }<br/>  }</span></pre><p id="0090" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这个离我的很近。然而，它缺少<em class="kl">模式匹配</em>，仍然使用计算的pivote，并且具有<em class="kl"> if else </em>不必要的结构。</p><p id="76af" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在，我可以从我发现的东西中得到一些东西，我可能会将我的最后一个案例修改为案例a::tail = &gt; q(tail . filter(a &gt;):::List(a):::q(tail . filter(a&lt;=)). But it seems difficult to read and understand if you are not related with the language, so I kept my solution as in my first implementation.</p><h2 id="d959" class="kf kg hu bd km kn ko kp kq kr ks kt ku jj kv kw kx jn ky kz la jr lb lc ld le dt translated">Endings</h2><p id="dae4" class="pw-post-body-paragraph iy iz hu ja b jb lf jd je jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv hn dt translated">At the end, no everyone cares about implementation details, the only thing you see is a method (or function) signature you will call like def quickSort(list: List[Int]): List[Int]. Details of the implementation are left completely behind the wall that signature creates. This kind of approach is OK if you are the API user or consumer, but if you are the one who writes this API then it is a different story. On the other hand, how those details are written is important when the product has been implemented using different tools and technology stacks. Writing clean code, code that is easy to read and modify, is as simplest as we (<em class="kl">程序员</em>)决定。我相信<em class="kl">功能性</em> <em class="kl">编程</em>在这方面很有帮助，因为我们用代码表达思想的方式非常接近我们思考它们的方式。</p><p id="a1c3" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我听到有人反对函数式编程和它所要求的思维转变。它有时可能会令人害怕，就像生活中的其他变化一样，但不要封闭自己，拥抱新技术和解决问题的方法，不要害怕，做一个愿意学习的人，你会没事的。</p></div><div class="ab cl lk ll hc lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hn ho hp hq hr"><p id="47a0" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><em class="kl">阅读下一条:</em></p><p id="10b7" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><a class="ae lr" rel="noopener" href="/@anicolaspp/higher-order-functions-what-are-they-be74111659e8#.odirv0prk"> <em class="kl">高阶函数，它们是什么？</em>T15】</a></p><div class="jw jx jy jz fq ab cb"><figure class="ls iv lt lu lv lw lx paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="ls iv lt lu lv lw lx paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="ls iv lt lu lv lw lx paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="ly lz ma"><p id="f922" class="iy iz kl ja b jb jc jd je jf jg jh ji mb jk jl jm mc jo jp jq md js jt ju jv hn dt translated"><a class="ae lr" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae lr" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae lr" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>，并乐意<a class="ae lr" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="iy iz kl ja b jb jc jd je jf jg jh ji mb jk jl jm mc jo jp jq md js jt ju jv hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae lr" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae lr" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jw jx jy jz fq iv fe ff paragraph-image"><a href="https://goo.gl/Ahtev1"><div class="fe ff me"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></a></figure></div></div>    
</body>
</html>