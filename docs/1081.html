<html>
<head>
<title>chat-service project announcement and overview</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">聊天服务项目公告和概述</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/chat-service-project-announcement-and-overview-92283fe80d93?source=collection_archive---------2-----------------------#2016-09-02">https://medium.com/hackernoon/chat-service-project-announcement-and-overview-92283fe80d93?source=collection_archive---------2-----------------------#2016-09-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="d001" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这篇文章是一个关于<br/> <a class="ae jp" href="https://github.com/an-sh/chat-service" rel="noopener ugc nofollow" target="_blank">聊天服务</a>项目的设计和目标的简短概述。它在ES6中被写成Node.js模块，并通过<a class="ae jp" href="https://www.npmjs.com/package/chat-service" rel="noopener ugc nofollow" target="_blank"> npm </a>提供<br/>。这个软件本质上是一个额外的语义层<br/>，通过一个集成<br/>插件为任意发布/订阅系统服务。顾名思义，它使用基于房间<br/>的聊天中的熟悉概念。聊天服务项目的主要目标是让实时<br/>API的创建与REST API一样。因此，就像任何REST服务器一样，<br/>被设计成首先在你自己的环境中运行，并且像<br/>一样可定制和可扩展。现代网络技术，如SPA <br/>框架，具有惰性加载和/或服务器端渲染，允许<br/>为任何<br/>网络项目轻松使用和集成基于后台连接的API。</p><p id="1394" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用这种系统的主要原因是它们能够在一个应用程序中提供各种实时交互信息。(当REST架构专注于提供对单个资源的访问或修改时)。一个常见的使用示例<br/>是各种社交互动的实现，如谁在好友列表上在线、谁正在查看特定页面、关于新内容何时可用的通知等。从T21的商业角度来看，更好的社会化最终意味着更好的保留。</p><h2 id="1a12" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">概观</h2><p id="b188" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">大多数消息传递系统可以分为两个逻辑部分，即<br/>前端客户端到服务器通道实现和后端<br/>代理。聊天服务被设计成介于这两个部分之间，做类似“连线”的事情。它实现了一个应用层消息传递<br/>协议，在该协议之上，应用数据可以作为<br/>消息进行交换。这与许多其他<br/>应用和低层网络协议中使用的方法相同，它允许<br/>创建定义良好的公共和私有API。包括Socket.io传输<br/>支持，但是由于可插入的集成<br/>架构，可以添加对其他消息传递解决方案的支持。</p><p id="950e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">聊天服务提供的第一件也是最重要的事情是<br/>可靠的房间消息。这是通过一个有序的历史记录来完成的，因此即使<br/>一个以前没有订阅(加入)的客户端也能够获得<br/>消息历史记录。第二层是实时存在和许可层。此外，聊天服务提供了与连接无关的独特用户概念，因此完全支持来自单个用户的独立多个连接。这实质上提供了<br/>自省和可管理性属性。</p><p id="804c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">大多数消息传递解决方案都是为大规模水平伸缩<br/>而设计的，所以主要的挑战是在<br/>实现额外的语义时不要引入瓶颈。聊天服务是作为无状态的微服务<br/>实现的，所以也支持水平扩展。<br/>存储层使用Redis(或者可选的用于测试的内存存储)<br/>，并且也设计为可通过Redis集群扩展。所有数据都<br/>安排在桶中，并且使用Redis事务或细粒度锁定<br/>(仅在单个用户状态的一部分上)。这种方法确保了<br/>数据的一致性，而不会在store <br/>端引入瓶颈。此外，还提供了额外的操作和事件，以便<br/>报告和修复由于各种<br/>后端基础设施故障导致商店无法更新的情况。</p><p id="ddc4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">另一件重要的事情是扩展和/或定制的能力，因为聊天室模式是一个很好的起点，但绝对不是终点。定制可以通过聊天服务<br/>协议事件处理程序的钩子或者通过调用服务器端API来完成。因此，可以使用其他<br/>模式，如将服务器作为消息发射器的只听房间<br/>。例如，当添加新内容或修改旧内容时，POST/PATCH处理程序可以通过服务器端API发出房间消息。钩子只是返回承诺的JavaScript函数，所以<br/>可以实现任意复杂的异步逻辑。一般来说<br/>可以从客户端做出的每个动作都可以通过API从<br/>服务器做出。而且每个动作都有前后挂钩，让<br/>在里面运行一个定制的逻辑。</p><h2 id="5d87" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">初速电流状态</h2><p id="5c11" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">这是一个麻省理工学院许可的开源项目。至于0.10版本，<br/>项目有99.5%行的良好测试覆盖率，定义良好的公共<br/>API文档和合理的内部架构。这么多的<br/>突破性的改变在1.x发布之前不太可能发生。但是按照semver的定义，它仍然处于测试阶段。也欢迎任何反馈<br/>。</p><p id="a3c3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://github.com/an-sh/chat-service" rel="noopener ugc nofollow" target="_blank"> Guthub知识库</a></p><blockquote class="kq kr ks"><p id="a042" class="ir is kt it b iu iv iw ix iy iz ja jb ku jd je jf kv jh ji jj kw jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客们下午的开始。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is kt it b iu iv iw ix iy iz ja jb ku jd je jf kv jh ji jj kw jl jm jn jo hn dt translated">要了解更多信息，<a class="ae jp" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">请阅读我们的“关于”页面</a> , <a class="ae jp" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">喜欢/在脸书给我们发消息</a>，或者简单地，<a class="ae jp" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank">发推文/DM @HackerNoon。</a></p><p id="708a" class="ir is kt it b iu iv iw ix iy iz ja jb ku jd je jf kv jh ji jj kw jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote></div></div>    
</body>
</html>