<html>
<head>
<title>A guide to TDD a React/Redux TodoList App — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TDD a React/Redux TodoList应用程序指南—第1部分</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-guide-to-tdd-a-react-redux-todolist-app-part-1-b8a200bb7091?source=collection_archive---------0-----------------------#2017-07-09">https://medium.com/hackernoon/a-guide-to-tdd-a-react-redux-todolist-app-part-1-b8a200bb7091?source=collection_archive---------0-----------------------#2017-07-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="7097" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">第一部分——你现在在这里。</p><p id="fb8a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" rel="noopener" href="/@sanjsanj/a-guide-to-tdd-a-react-redux-todolist-app-part-2-8d4cb2dc154c">第二部分—链接</a>。</p><p id="2cb8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" rel="noopener" href="/@sanjsanj/a-guide-to-tdd-a-react-redux-todolist-app-part-3-f25c2289c54">第三部分——链接</a>。</p><p id="1ac9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" rel="noopener" href="/@sanjsanj/a-guide-to-tdd-a-react-redux-todolist-app-part-4-edb62e113c9b">第四部分——链接</a>。</p><p id="d5ce" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jq">本教程假设对JavaScript、前端、测试驱动开发和节点包管理器有一些了解，对</em><a class="ae jp" href="https://hackernoon.com/tagged/react" rel="noopener ugc nofollow" target="_blank"><em class="jq">React</em></a><em class="jq">/</em><a class="ae jp" href="https://hackernoon.com/tagged/redux" rel="noopener ugc nofollow" target="_blank"><em class="jq">Redux</em></a><em class="jq">几乎没有经验。这是我的观点，当你还在学习的时候，应该如何在这个非常基础的水平上做到这一点，它至少应该为你追求自己的最佳实践开辟道路。</em></p><p id="1398" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你对React了解得越少，我就越建议你扩展阅读支持链接。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff jr"><img src="../Images/208808022fabf2151970092c0c56ab0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*61tIzsAu9iy873cNlOhRpw.png"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">High production value</figcaption></figure><h1 id="95df" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">介绍</h1><p id="2708" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">上面的美就是我们在本教程中要做的——一个React Todo list应用程序，使用Redux作为我们的状态管理系统，使用<a class="ae jp" href="http://webdriver.io/" rel="noopener ugc nofollow" target="_blank"> webdriverIO </a>进行端到端测试，使用<a class="ae jp" href="http://airbnb.io/enzyme/docs/api/" rel="noopener ugc nofollow" target="_blank"> enzyme </a>进行单元测试。</p><p id="9909" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你可以在heroku 上在线查看完成的app <a class="ae jp" href="https://my-react-todolist.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">。最后一个</a><a class="ae jp" href="https://github.com/sanjsanj/my-react-todolist" rel="noopener ugc nofollow" target="_blank"> git仓库在这里</a>。</p><p id="96de" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们将使用来自脸书的<a class="ae jp" href="https://github.com/facebookincubator/create-react-app" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>节点包来搭建我们应用的基础。如果你是React的新手，那么我建议<a class="ae jp" href="https://codeburst.io/react-ecosystem-setup-step-by-step-walkthrough-721ff45a7fc1" rel="noopener" target="_blank">从头开始设置一个应用</a>几次，以熟悉所有的包和配置，但出于本教程的目的，我们将跳过这一步，让create-react-app为我们处理这些。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff lk"><img src="../Images/344c928c0a23b85e12dfd70bdc30249f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lS_sUzB-c0OmaKJCi79gXQ.png"/></div></div></figure><p id="0b25" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">即使对于一个生产应用程序，我目前的感觉是最好使用create-react-app，然后进行一些你可能想要的更改，这要高效得多。</p><p id="1597" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jq">你可以在</em> <a class="ae jp" href="https://github.com/sanjsanj/create-react-app-ejected" rel="noopener ugc nofollow" target="_blank"> <em class="jq">这个repo </em> </a> <em class="jq">里看看create-react-app在幕后到底做了什么，我所做的就是搭起一个app，然后运行</em> <code class="eh ll lm ln lo b"><em class="jq">npm eject</em></code> <em class="jq">来暴露所有的包、配置和脚本。文件的备注将被</em><code class="eh ll lm ln lo b"><em class="jq">package.json</em></code><em class="jq"/><code class="eh ll lm ln lo b"><em class="jq">config/</em></code><em class="jq">和</em> <code class="eh ll lm ln lo b"><em class="jq">scripts/</em></code> <em class="jq">文件夹的内容。</em></p><h1 id="19cf" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">创建应用程序</h1><p id="1ad7" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">确保您安装了最新的<a class="ae jp" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">节点和npm </a>。</p><p id="7d75" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后全局安装create-react-app包:</p><p id="70c7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh ll lm ln lo b">npm install -g create-react-app</code></p><p id="6b53" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在命令行中，我们转到要创建应用程序的父目录，然后运行以下命令:</p><p id="a3b8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh ll lm ln lo b">create-react-app my-react-todolist</code></p><p id="d6b1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这将在与我们所在位置相关的<code class="eh ll lm ln lo b">my-react-todolist/</code>文件夹中创建一个react应用程序。</p><p id="8fea" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后，让我们转到该目录并安装我们需要的节点包:</p><pre class="js jt ju jv fq lp lo lq lr aw ls dt"><span id="23d5" class="lt ki hu lo b fv lu lv l lw lx">cd my-react-todolist<br/>npm install</span></pre><p id="374a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你看一下<code class="eh ll lm ln lo b">package.json</code>，你会注意到唯一的生产依赖项是<code class="eh ll lm ln lo b">react</code>库和渲染它的<code class="eh ll lm ln lo b">react-dom</code>，唯一的开发依赖项是一个叫做<code class="eh ll lm ln lo b">react-scripts</code>的东西。神奇之处就在于此，它只是一个简单的包，将所有最重要的包作为其依赖项，并提供运行常见任务的脚本。您可以点击在<a class="ae jp" href="https://www.npmjs.com/package/react-scripts" rel="noopener ugc nofollow" target="_blank"> npm页面查看更多信息。</a></p><p id="d619" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们运行测试作为健全检查，以确保一切都按计划进行。</p><p id="70c9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh ll lm ln lo b">npm run test</code></p><p id="4ec5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你应该有一个通过测试。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div class="fe ff ly"><img src="../Images/ed0df1503c734fbea895a45409fcb47a.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*lGsZY2L8Pa6DXQmWw37sNg.png"/></div></figure><p id="4bc1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们运行我们的应用程序，看看它能做什么。</p><p id="dfbc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh ll lm ln lo b">npm run start</code>应该启动服务器并在<a class="ae jp" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank">打开一个浏览器窗口http://localhost:3000/ </a></p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff lz"><img src="../Images/76dbddeb84dc4774a4280eac7c3ba4c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uzERmc9LEJq5qzp86A1xnQ.png"/></div></div></figure><p id="f161" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们成功了！我们是反动派。该领工资了。</p><p id="e4be" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这一点上，我可能会进行第一次提交，并推进到git，但这是你的电话。</p><ul class=""><li id="67b8" class="ma mb hu it b iu iv iy iz jc mc jg md jk me jo mf mg mh mi dt translated"><a class="ae jp" href="https://github.com/sanjsanj/my-react-todolist/commit/9f9c2f795ac63bbd1fe3a046b812125bae010910" rel="noopener ugc nofollow" target="_blank"> Git提交</a></li><li id="b0a9" class="ma mb hu it b iu mj iy mk jc ml jg mm jk mn jo mf mg mh mi dt translated"><a class="ae jp" href="https://github.com/sanjsanj/my-react-todolist/tree/9f9c2f795ac63bbd1fe3a046b812125bae010910" rel="noopener ugc nofollow" target="_blank">储存库的状态</a></li></ul><h1 id="3e8b" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">埃斯林特</h1><p id="cb76" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">这一点是可选的，如果你是第一次使用实时linter，那么你会发现一开始它是一个讨厌的东西，但它是一个必不可少的工具，如果你还没有习惯它，你也可以习惯它。</p><p id="1bc7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">林挺非常有用，原因如下:实施风格规则和最佳实践，删除不需要的代码，减少认知负荷。</p><p id="73c5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我目前最喜欢的是带有<code class="eh ll lm ln lo b">airbnb</code>规则的<code class="eh ll lm ln lo b">eslint</code>，它不是很时髦，但它是目前最流行的，也可能是最相关的选择。</p><pre class="js jt ju jv fq lp lo lq lr aw ls dt"><span id="0a14" class="lt ki hu lo b fv lu lv l lw lx">npm install --save-dev eslint<br/>node_modules/.bin/eslint —-init</span></pre><p id="f3cb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这些是我使用过的选项，并建议您使用:</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff mo"><img src="../Images/48dd1ee717048103b8f41a9b6b1d2494.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mWSTk2CPUXAj-oxRVtjquw.png"/></div></div></figure><p id="ff9d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这一点上，我们将为规则添加一个例外，当我们在一个<code class="eh ll lm ln lo b">.js</code>文件中写JSX时，我们将告诉eslint不要抱怨。<em class="jq">JSX(带XML的JavaScript)过于简化的定义是，它允许我们编写更加简洁、易读的React代码，包括标准的html，在我们的JavaScript中，</em> <a class="ae jp" href="https://facebook.github.io/react/docs/jsx-in-depth.html" rel="noopener ugc nofollow" target="_blank"> <em class="jq">阅读更多</em> </a> <em class="jq">。</em></p><pre class="js jt ju jv fq lp lo lq lr aw ls dt"><span id="66e5" class="lt ki hu lo b fv lu lv l lw lx">"rules": {<br/>    "react/jsx-filename-extension": [1, { "extensions": [".js", ".jsx"] }]<br/>},</span></pre><p id="2e3f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">根据版本的不同，您的eslint可能看起来略有不同，但这就是我的<code class="eh ll lm ln lo b">.eslintrc.js</code>配置的样子:</p><figure class="js jt ju jv fq jw"><div class="bz el l di"><div class="mp mq l"/></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">.eslintrc.js</figcaption></figure><ul class=""><li id="4ffe" class="ma mb hu it b iu iv iy iz jc mc jg md jk me jo mf mg mh mi dt translated"><a class="ae jp" href="https://github.com/sanjsanj/my-react-todolist/commit/6bb1dc7e623bfaecb3eb59514648d76df1f50f73" rel="noopener ugc nofollow" target="_blank"> Git提交</a></li><li id="1c4b" class="ma mb hu it b iu mj iy mk jc ml jg mm jk mn jo mf mg mh mi dt translated"><a class="ae jp" href="https://github.com/sanjsanj/my-react-todolist/tree/6bb1dc7e623bfaecb3eb59514648d76df1f50f73" rel="noopener ugc nofollow" target="_blank">储存库的状态</a></li></ul><h1 id="5cef" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">重构</h1><p id="4e7b" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">在我们继续之前，让我们用我们的应用程序做一点春季大扫除。</p><p id="d937" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们可以好好利用我们新发现的智力。打开<code class="eh ll lm ln lo b">src/App.js</code>，我们应该会看到eslint对应用组件的抱怨。它希望我们把它写成一个无状态的纯函数，而不是现在的有状态的React组件。</p><pre class="js jt ju jv fq lp lo lq lr aw ls dt"><span id="5bb1" class="lt ki hu lo b fv lu lv l lw lx">// A stateful React component</span><span id="88d8" class="lt ki hu lo b fv mr lv l lw lx">class App extends Component {<br/>  render() {<br/>    return (<br/>      &lt;div&gt;My App&lt;/div&gt;<br/>    );<br/>  }<br/>}</span><span id="dbda" class="lt ki hu lo b fv mr lv l lw lx">export default App</span></pre><p id="3b79" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一个全功能的React组件可以让你访问所有的<a class="ae jp" href="https://facebook.github.io/react/docs/react-component.html" rel="noopener ugc nofollow" target="_blank">生命周期方法</a>以及存储和改变状态的能力，但是如果我们可以避免的话，这并不是编写代码的最好方式。</p><p id="0af7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">纯函数的好处是非常好测试，它们总是有可预测的回报，性能更好，并且是以不可变的函数风格编写的。</p><pre class="js jt ju jv fq lp lo lq lr aw ls dt"><span id="648b" class="lt ki hu lo b fv lu lv l lw lx">// A stateless pure function</span><span id="8ad4" class="lt ki hu lo b fv mr lv l lw lx">const App = () =&gt; (<br/>  &lt;div&gt;My App&lt;/div&gt;<br/>)</span><span id="9e4a" class="lt ki hu lo b fv mr lv l lw lx">export default App</span></pre><p id="ed58" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">React 0.14在2015年加入了纯函数模式，我鼓励你接受它们，它们使用起来很有趣。但是……您还应该知道如何编写有状态的React组件，以便在需要生命周期方法时使用，或者在组件本身中改变状态，而不是在状态管理系统中改变状态(在我们的例子中是Redux)。</p><p id="7532" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这里阅读<a class="ae jp" rel="noopener" href="/@joshblack/stateless-components-in-react-0-14-f9798f8b992d">无状态纯组件</a>，在这里阅读更多关于差异和<a class="ae jp" href="https://hackernoon.com/react-stateless-functional-components-nine-wins-you-might-have-overlooked-997b0d933dbc" rel="noopener ugc nofollow" target="_blank">为什么你应该使用它们</a>。</p><p id="91f6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这就是我如何重构我的<code class="eh ll lm ln lo b">App.js</code>，删除所有样板文件，为创建我们的待办事项列表做准备:</p><figure class="js jt ju jv fq jw"><div class="bz el l di"><div class="mp mq l"/></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">src/App.js</figcaption></figure><p id="05aa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们重构我们唯一的单元测试，使用<a class="ae jp" href="http://airbnb.io/enzyme/index.html" rel="noopener ugc nofollow" target="_blank"> enzyme </a>，一个让我们更容易测试的工具。我们还需要安装react-test-renderer依赖项。</p><pre class="js jt ju jv fq lp lo lq lr aw ls dt"><span id="6d1f" class="lt ki hu lo b fv lu lv l lw lx">npm install --save-dev enzyme <!-- -->react-test-renderer</span></pre><p id="af55" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是我的<code class="eh ll lm ln lo b">src/App.test.js</code>现在的样子:</p><figure class="js jt ju jv fq jw"><div class="bz el l di"><div class="mp mq l"/></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">src/App.test.js</figcaption></figure><p id="ee61" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh ll lm ln lo b">Line 2</code>我们从<code class="eh ll lm ln lo b">enzyme</code>测试库中导入<code class="eh ll lm ln lo b">shallow</code>模块。这将使<a class="ae jp" href="http://airbnb.io/enzyme/docs/api/ShallowWrapper/shallow.html" rel="noopener ugc nofollow" target="_blank">隔离测试</a>更加容易。关于渲染方法、选择器和断言的更多信息可以在<a class="ae jp" href="http://airbnb.io/enzyme/docs/api/index.html" rel="noopener ugc nofollow" target="_blank">酶文档</a>中找到。</p><p id="dac2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jq">如果你之前没有体验过ES6 </em> <code class="eh ll lm ln lo b"><em class="jq">import</em></code> <em class="jq">语法，那么</em> <a class="ae jp" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import" rel="noopener ugc nofollow" target="_blank"> <em class="jq"> MDN有一些不错的文档</em> </a> <em class="jq">你应该浏览一下。对于</em> <code class="eh ll lm ln lo b"><em class="jq">require</em></code> <em class="jq">文件和子模块来说，这是一种更好的方式，但是它需要传输文件。</em></p><p id="7de3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后重构我们的测试，浅层安装组件并断言它存在。</p><p id="5223" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Eslint可能会抱怨<code class="eh ll lm ln lo b">it</code>和<code class="eh ll lm ln lo b">expect</code>没有定义。为了消除这些错误，我们将在测试文件的顶部添加一个排除。</p><p id="1040" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh ll lm ln lo b">/* global it, expect */</code></p><p id="58ed" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">确保您的测试仍然通过，并且您的应用程序仍然可以在浏览器中加载，只是内容很少。</p><ul class=""><li id="46fc" class="ma mb hu it b iu iv iy iz jc mc jg md jk me jo mf mg mh mi dt translated"><a class="ae jp" href="https://github.com/sanjsanj/my-react-todolist/commit/0575f83f0f8b5201d2da911d217d08921c3d184f" rel="noopener ugc nofollow" target="_blank"> Git提交</a></li><li id="883d" class="ma mb hu it b iu mj iy mk jc ml jg mm jk mn jo mf mg mh mi dt translated"><a class="ae jp" href="https://github.com/sanjsanj/my-react-todolist/tree/0575f83f0f8b5201d2da911d217d08921c3d184f" rel="noopener ugc nofollow" target="_blank">储存库的状态</a></li></ul><h1 id="b117" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">端到端测试</h1><p id="f797" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">在我们得意忘形并开始编码之前，让我们编写一个端到端(e2e)测试，实际测试我们的应用程序在浏览器中的表现是否如我们所愿。你可以称之为特性测试，或者验收测试，或者UI测试。</p><p id="0ec4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们的e2e测试解决方案将涉及<code class="eh ll lm ln lo b"><a class="ae jp" href="https://www.npmjs.com/package/selenium-standalone" rel="noopener ugc nofollow" target="_blank">selenium</a></code>让我们启动浏览器、<code class="eh ll lm ln lo b"><a class="ae jp" href="http://webdriver.io/" rel="noopener ugc nofollow" target="_blank">webdriverIO</a></code>控制它和<code class="eh ll lm ln lo b"><a class="ae jp" href="http://chaijs.com/" rel="noopener ugc nofollow" target="_blank">chai</a></code>授予我们断言。</p><p id="671d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh ll lm ln lo b">npm install --save-dev selenium-standalone webdriverio chai</code></p><p id="6aee" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">并执行webdriverIO的设置:</p><p id="77fa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh ll lm ln lo b">node_modules/.bin/wdio config</code></p><p id="e93d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这些是我使用过的设置，我将向您推荐:</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff ms"><img src="../Images/e3b6797257e3580e4599554a4e0474fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*snSuMHL-ECypfbOWwWqkmA.png"/></div></div></figure><p id="7788" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">确保你已经安装了<a class="ae jp" href="https://www.google.com/chrome/browser/desktop/index.html" rel="noopener ugc nofollow" target="_blank"> Chrome </a>，然后编辑<code class="eh ll lm ln lo b">wdio.conf.js</code>来选择它作为我们的默认浏览器。搜索:</p><p id="af2c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh ll lm ln lo b">browserName: ‘firefox’,</code></p><p id="de7d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">并替换为:</p><p id="81dd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh ll lm ln lo b">browserName: ‘chrome’,</code></p><p id="7188" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在启动selenium服务器之前，我们必须执行一次性设置。我们可以手动完成这项工作，但如果我们想让任何人都可以轻松使用这个回购，那么我们真的应该设置一个任务。稍后，我们将在自述文件中记录我们如何设置、启动和测试我们的项目。</p><p id="0854" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在<code class="eh ll lm ln lo b">package.json</code>中，让我们创建几个脚本来处理我们的e2e测试需求:</p><pre class="js jt ju jv fq lp lo lq lr aw ls dt"><span id="80b3" class="lt ki hu lo b fv lu lv l lw lx">"scripts": {<br/>  "selenium-setup": "selenium-standalone install",<br/>  "selenium-start": "selenium-standalone start",<br/>  "e2e-tests": "wdio wdio.conf.js",<br/>  "e2e-tests-watch": "wdio wdio.conf.js --watch",<br/>  ...<br/>}</span></pre><p id="39b8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下面是我的<code class="eh ll lm ln lo b">package.json</code>现在的样子:</p><figure class="js jt ju jv fq jw"><div class="bz el l di"><div class="mp mq l"/></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">package.json</figcaption></figure><p id="0be8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后设置并启动selenium服务器:</p><pre class="js jt ju jv fq lp lo lq lr aw ls dt"><span id="af9d" class="lt ki hu lo b fv lu lv l lw lx">npm run selenium-setup<br/>npm run selenium-start</span></pre><p id="0d6d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">超级！现在我们可以写第一个e2e测试了。我手动进入了wdio配置中的<code class="eh ll lm ln lo b">e2etests/</code>文件夹，所以我将把它写入其中。如果您使用默认设置，那么您的测试应该放在相应的文件夹中。</p><figure class="js jt ju jv fq jw"><div class="bz el l di"><div class="mp mq l"/></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">e2etests/test.js</figcaption></figure><p id="bcc2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了更好地了解如何使用webdriverIO，请阅读它的API文档。</p><p id="e726" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，如果我们运行<code class="eh ll lm ln lo b">npm run e2e-tests</code>，我们应该会得到一个失败的特性测试，因为我们还没有改变页面的标题:</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff ms"><img src="../Images/16980474d7cfccbadecb313e6852eeb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P58hTdKrTArveU8y9ghvHw.png"/></div></div></figure><p id="4c60" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jq">我们可以运行</em> <code class="eh ll lm ln lo b"><em class="jq">npm run e2e-tests-watch</em></code> <em class="jq">如果我们想在‘监视’模式下运行我们的e2e测试，这意味着webdriverIO将监视我们通过</em> <code class="eh ll lm ln lo b"><em class="jq">wdio.conf.js</em></code> <em class="jq">告诉它跟踪的文件中的变化，然后在保存时重新运行测试。这更方便，但有时可能会给我们不必要的失败，只是在开发时要小心。</em></p><p id="5213" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">前往<code class="eh ll lm ln lo b">public/index.html</code>，更改:</p><p id="baca" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh ll lm ln lo b">&lt;title&gt;React App&lt;/title&gt;</code></p><p id="0380" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">收件人:</p><p id="0ae5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh ll lm ln lo b">&lt;title&gt;Todo List&lt;/title&gt;</code></p><p id="7cd4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">看看通过测试的绿色荣耀。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff mt"><img src="../Images/af205736d2ff3cbfc2df05f9a28e047f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*resYI2wop0wCbBPPD028ww.png"/></div></div></figure><ul class=""><li id="c69d" class="ma mb hu it b iu iv iy iz jc mc jg md jk me jo mf mg mh mi dt translated"><a class="ae jp" href="https://github.com/sanjsanj/my-react-todolist/commit/db3da9fd0f9db25536333319ae8597a704932a22" rel="noopener ugc nofollow" target="_blank"> Git提交</a></li><li id="16e1" class="ma mb hu it b iu mj iy mk jc ml jg mm jk mn jo mf mg mh mi dt translated"><a class="ae jp" href="https://github.com/sanjsanj/my-react-todolist/tree/db3da9fd0f9db25536333319ae8597a704932a22" rel="noopener ugc nofollow" target="_blank">储存库的状态</a></li></ul><h1 id="913a" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">概述</h1><p id="35cf" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">我们已经学会了如何:</p><ul class=""><li id="ff66" class="ma mb hu it b iu iv iy iz jc mc jg md jk me jo mf mg mh mi dt translated">建立开发环境。</li><li id="4e3a" class="ma mb hu it b iu mj iy mk jc ml jg mm jk mn jo mf mg mh mi dt translated">创建我们的React应用。</li><li id="255b" class="ma mb hu it b iu mj iy mk jc ml jg mm jk mn jo mf mg mh mi dt translated">使用Eslint。</li><li id="8075" class="ma mb hu it b iu mj iy mk jc ml jg mm jk mn jo mf mg mh mi dt translated">重构为ES6语法。</li><li id="c0c8" class="ma mb hu it b iu mj iy mk jc ml jg mm jk mn jo mf mg mh mi dt translated">设置e2e测试。</li><li id="c3d8" class="ma mb hu it b iu mj iy mk jc ml jg mm jk mn jo mf mg mh mi dt translated">让我们的第一个e2e测试通过。</li></ul><h1 id="ac17" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">下一个</h1><p id="9796" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">现在我们已经设置了大部分的应用程序，并且对我们的工作流程更加熟悉了，让我们继续编写单元测试并添加我们的第一个todo。</p><p id="95b6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">第一部分——你现在在这里。</p><p id="0ea0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" rel="noopener" href="/@sanjsanj/a-guide-to-tdd-a-react-redux-todolist-app-part-2-8d4cb2dc154c">第二部分—链接</a>。</p><p id="9a90" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" rel="noopener" href="/@sanjsanj/a-guide-to-tdd-a-react-redux-todolist-app-part-3-f25c2289c54">第3部分—链接</a>。</p><p id="777d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" rel="noopener" href="/@sanjsanj/a-guide-to-tdd-a-react-redux-todolist-app-part-4-edb62e113c9b">第4部分—链接</a>。</p><figure class="js jt ju jv fq jw"><div class="bz el l di"><div class="mu mq l"/></div></figure></div></div>    
</body>
</html>