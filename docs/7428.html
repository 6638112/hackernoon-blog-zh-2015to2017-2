<html>
<head>
<title>Reduce webpack bundle size for production</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为生产减少webpack捆绑包的大小</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/reduce-webpack-bundle-size-for-production-880bb6b2c72f?source=collection_archive---------3-----------------------#2017-10-27">https://medium.com/hackernoon/reduce-webpack-bundle-size-for-production-880bb6b2c72f?source=collection_archive---------3-----------------------#2017-10-27</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/></div><div class="ab cl ir is hc it" role="separator"><span class="iu bw bk iv iw ix"/><span class="iu bw bk iv iw ix"/><span class="iu bw bk iv iw"/></div><div class="hn ho hp hq hr"><p id="0dda" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这里不介绍，开始。</p><ol class=""><li id="5965" class="jw jx hu ja b jb jc jf jg jj jy jn jz jr ka jv kb kc kd ke dt translated"><strong class="ja hv">使用正确的环境变量</strong></li></ol><pre class="kf kg kh ki fq kj kk kl km aw kn dt"><span id="582f" class="ko kp hu kk b fv kq kr l ks kt">new webpack.DefinePlugin({<br/> ‘process.env’: {<br/> ‘NODE_ENV’: ‘production’ <br/> }<br/>})</span></pre><p id="910e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 2。使用生产参数</strong></p><pre class="kf kg kh ki fq kj kk kl km aw kn dt"><span id="e325" class="ko kp hu kk b fv kq kr l ks kt">webpack -p</span></pre><p id="28fb" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 3。高级丑化</strong></p><pre class="kf kg kh ki fq kj kk kl km aw kn dt"><span id="7314" class="ko kp hu kk b fv kq kr l ks kt">new UglifyJSPlugin({<br/> // options<br/>})</span></pre><p id="aefe" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 4。优化依赖项导入</strong></p><p id="202c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">不导入完全依赖关系:</p><pre class="kf kg kh ki fq kj kk kl km aw kn dt"><span id="d565" class="ko kp hu kk b fv kq kr l ks kt">import _ from ‘lodash’;</span></pre><p id="0e87" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">只需导入您真正需要的内容:</p><pre class="kf kg kh ki fq kj kk kl km aw kn dt"><span id="b936" class="ko kp hu kk b fv kq kr l ks kt">import _ from ‘lodash/core’;</span></pre><p id="adb8" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 5。使用</strong> <a class="ae ku" href="https://github.com/webpack-contrib/webpack-bundle-analyzer" rel="noopener ugc nofollow" target="_blank"> <strong class="ja hv">捆绑包分析器</strong> </a> <strong class="ja hv">计算出增加大小的因素</strong></p><p id="e287" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">例如，大多数时候我们应该忽略即时的本地文件</p><pre class="kf kg kh ki fq kj kk kl km aw kn dt"><span id="5f65" class="ko kp hu kk b fv kq kr l ks kt">new webpack.IgnorePlugin(/^\.\/locale$/, /moment$/)</span></pre><p id="c084" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 6。从您的捆绑包中提取供应商</strong></p><pre class="kf kg kh ki fq kj kk kl km aw kn dt"><span id="ba84" class="ko kp hu kk b fv kq kr l ks kt">module.exports = {<br/> …,<br/> entry: {<br/> app: ‘./src/index.js’,<br/> vendor: [‘react’, ‘moment’, ‘lodash/core’]<br/> },<br/> …,<br/> plugins: [<br/> …,<br/> new webpack.optimize.CommonsChunkPlugin({<br/> name: ‘vendor’<br/> })<br/> ]<br/>};</span></pre><p id="ca4f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 7。从您的捆绑包中提取供应商</strong></p><pre class="kf kg kh ki fq kj kk kl km aw kn dt"><span id="2fb6" class="ko kp hu kk b fv kq kr l ks kt">module.exports = {<br/> …,<br/> module: {<br/> rules: [<br/> …,<br/> // css<br/> {<br/> test: /\.css$/,<br/> use: ExtractTextPlugin.extract({<br/> fallback: ‘style-loader’,<br/> use: [‘css-loader’]<br/> })<br/> }<br/> ]<br/> },<br/> plugins: [<br/> …,<br/> new ExtractTextPlugin(‘style.css’),<br/> ]<br/>};</span></pre><p id="9445" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">8。按路线划分的代码</p><ul class=""><li id="608f" class="jw jx hu ja b jb jc jf jg jj jy jn jz jr ka jv kv kc kd ke dt translated"><a class="ae ku" href="https://webpack.js.org/guides/code-splitting/" rel="noopener ugc nofollow" target="_blank">网络包文档</a></li><li id="52e1" class="jw jx hu ja b jb kw jf kx jj ky jn kz jr la jv kv kc kd ke dt translated"><a class="ae ku" href="https://github.com/didierfranc/react-code-splitting" rel="noopener ugc nofollow" target="_blank">反应式代码分解</a></li></ul></div><div class="ab cl ir is hc it" role="separator"><span class="iu bw bk iv iw ix"/><span class="iu bw bk iv iw ix"/><span class="iu bw bk iv iw"/></div><div class="hn ho hp hq hr"><p id="8f4f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">我的一个项目每一步的结果</strong></p><figure class="kf kg kh ki fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="fe ff lb"><img src="../Images/40ce6b627705c5fd0c247adb65cdf398.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*efkaI-Mknq333xn2M-6Dfg.png"/></div></div></figure></div><div class="ab cl ir is hc it" role="separator"><span class="iu bw bk iv iw ix"/><span class="iu bw bk iv iw ix"/><span class="iu bw bk iv iw"/></div><div class="hn ho hp hq hr"><p id="2278" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">再见。</p></div></div>    
</body>
</html>