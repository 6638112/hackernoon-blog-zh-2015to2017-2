<html>
<head>
<title>Build a “Serverless” Twilio SMS + Call Forwarding Bot in 7 Minutes using Node.js + StdLib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Node.js + StdLib在7分钟内构建一个“无服务器”Twilio SMS +呼叫转移机器人</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/build-a-serverless-twilio-sms-call-forwarding-bot-in-7-minutes-using-node-js-stdlib-411697c3cc1b?source=collection_archive---------1-----------------------#2017-06-14">https://medium.com/hackernoon/build-a-serverless-twilio-sms-call-forwarding-bot-in-7-minutes-using-node-js-stdlib-411697c3cc1b?source=collection_archive---------1-----------------------#2017-06-14</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="3bb9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">自2009年以来，<a class="ae jp" href="https://twilio.com/" rel="noopener ugc nofollow" target="_blank"> Twilio </a>已经使开发人员能够将短信和语音技术无缝地构建到他们的应用程序中，处理从基本的用户通知、在优步和Lyft等应用程序中连接司机和乘客到电话会议等一切事情。如果您还没有机会将Twilio的服务整合到您的产品中，现在您有机会开始了！我们很高兴与Twilio的功能合作，向您展示如何使用StdLib在几分钟内将语音+ SMS引入您的产品或公司！</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff jq"><img src="../Images/47a1cfef2bdda5853a3782728fc658ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*DRxMoUVu1SXHL6BCpR8xpQ.jpeg"/></div></figure><p id="34c9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">也许你以前用过Twilio，也许你没有，但你对使用可编程电话技术并将其引入你的团队或公司非常感兴趣。凭借我们过去成功的“构建”文章(如<a class="ae jp" rel="noopener" href="/slack-developer-blog/build-a-serverless-slack-bot-in-9-minutes-with-node-js-and-stdlib-b993cfa15358">在9分钟内构建一个Slack Bot</a>)，我们很高兴分享StdLib迄今为止最快的文章——我们很高兴地向您介绍如何使用StdLib在7分钟内构建一个Twilio消息传递中心！</p><p id="0dda" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你还没有使用过StdLib，那么<a class="ae jp" href="https://stdlib.com/" rel="noopener ugc nofollow" target="_blank"> StdLib是通过代码</a>传递商业价值的最快方式。它实际上是一个基于新的“无服务器”架构的API包管理器，这意味着您永远不必担心管理服务器或为扩展分配资源。编写一个函数，部署，你就可以开始了！我们还有一个由其他开发人员贡献的不断增长的集成生态系统，非常容易插入。</p><p id="cc7b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦你在<strong class="it hv">分钟4 </strong>内创建了你的StdLib服务，你将得到一个<code class="eh jy jz ka kb b">README.md</code>文件，向你展示如何根据你自己的需要来破解你的Twilio + StdLib消息中心。</p><h1 id="7993" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">你事先需要什么</h1><ul class=""><li id="615f" class="la lb hu it b iu lc iy ld jc le jg lf jk lg jo lh li lj lk dt translated">1x <a class="ae jp" href="https://twilio.com/" rel="noopener ugc nofollow" target="_blank"> Twilio账户</a></li><li id="e492" class="la lb hu it b iu ll iy lm jc ln jg lo jk lp jo lh li lj lk dt translated">1x命令行终端</li><li id="84b7" class="la lb hu it b iu ll iy lm jc ln jg lo jk lp jo lh li lj lk dt translated">7x分钟(或420x秒)</li></ul></div><div class="ab cl lq lr hc ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hn ho hp hq hr"><h1 id="50c3" class="kc kd hu bd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz dt translated">第1分钟:创建您的Twilio电话号码</h1><p id="626d" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">要让你的Stdlib + Twilio消息中心投入运行，你要做的第一件事就是为你的Twilio帐户获取一个新的电话号码。首先，确保你在<a class="ae jp" href="https://www.twilio.com/login" rel="noopener ugc nofollow" target="_blank">https://www.twilio.com/login</a>登录了你的Twilio账户。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff mf"><img src="../Images/840a75e7cd87dcb70eaabea56dca0dcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TfY-ZtBl5tGmGonA4Jr5Rw.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Log In to Twilio</figcaption></figure><p id="eb92" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从这里开始，你将到达你的<a class="ae jp" href="https://www.twilio.com/console" rel="noopener ugc nofollow" target="_blank"> Twilio控制台</a>。如果这是你第一次使用Twilio，你会看到一个如下图所示的屏幕。在左侧菜单中，点击带有圆圈和省略号“<strong class="it hv"> (…) </strong>”的按钮:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff mo"><img src="../Images/b827e581e3f319fec3c1e3dc6bdfaee2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K88x134nbB5eLwrvUxnsCg.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">You want to select “All Products and Services” on the grey bar on the left</figcaption></figure><p id="a208" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从这里，会弹出一个滑动菜单。你想在<em class="mp">超级网络</em>标题下选择<em class="mp">电话号码</em>:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff mq"><img src="../Images/7e17499c43ce1390a6bcb005449a037d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZfaG5ekS8TGIqWNIPRyD2w.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Click “# Phone Numbers”</figcaption></figure><p id="5aaf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">要添加您的第一个电话号码，请点击“<strong class="it hv">开始使用</strong>”:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff mr"><img src="../Images/d1a388e30fb4a229c358757a53396c20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tn0gs4JjL_RmZt9CqCg2Pw.png"/></div></div></figure><p id="e0d8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后“<strong class="it hv">获得你的第一个Twilio电话号码</strong>”:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff mq"><img src="../Images/577055834c3c597275d70b2e1c468098.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GX9_E5w7dUELRzCEaBs1zg.png"/></div></div></figure><p id="db03" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您将看到一个弹出窗口，提示您地理位置的一个随机数，在本例中，415是旧金山。点击<strong class="it hv">选择此号码</strong>快速继续。(以后可以买其他号。)</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff ms"><img src="../Images/0dff9eb47a41db3fb1b3be4a7a4eb115.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YUogWCz4pjaqsLnxiWemyw.png"/></div></div></figure><p id="375f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你会收到一条成功的信息。厉害！</p></div><div class="ab cl lq lr hc ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hn ho hp hq hr"><h1 id="656b" class="kc kd hu bd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz dt translated">第2分钟:StdLib帐户设置</h1><p id="383e" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">为了创建一个健壮的消息中心，你接下来需要设置你的<a class="ae jp" href="https://stdlib.com/" rel="noopener ugc nofollow" target="_blank"> StdLib </a>账户。您将使用StdLib托管您的Twilio Hub，从一个单一的、可维护的代码库中使用无限可扩展的“无服务器”架构，并挂钩到StdLib上的其他集成(例如，使用<a class="ae jp" href="https://stdlib.com/utils/image" rel="noopener ugc nofollow" target="_blank"> utils.image </a>格式化您通过MMS接收的图像，或使用<a class="ae jp" href="https://stdlib.com/devin/income-predictor" rel="noopener ugc nofollow" target="_blank"> devin.income-predictor </a>查看与来电号码相关联的邮政编码的收入范围)。只需访问<a class="ae jp" href="https://stdlib.com" rel="noopener ugc nofollow" target="_blank">https://stdlib.com</a>并点击“免费注册”来创建您的帐户。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff mt"><img src="../Images/ac3489dfe46d613c22b3212f132df3bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qCHJKBgIEyBsBJ7ecZzHBg.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Click “Sign Up” to Create an Account</figcaption></figure></div><div class="ab cl lq lr hc ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hn ho hp hq hr"><h1 id="e113" class="kc kd hu bd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz dt translated">第3分钟:创建一个StdLib工作区</h1><p id="d9c7" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated"><a class="ae jp" rel="noopener" href="/stdlibhq/stdlib-updates-node-8-0-0-platform-support-new-faaslang-function-definitions-b33ffe5633b8"> StdLib原生运行Node.js 8.0.0(是的，最新版本)</a>所以为了确保不存在兼容性问题，您可能希望运行它(尽管Node 6和7在本例中也适用)。可以从<a class="ae jp" href="https://nodejs.org" rel="noopener ugc nofollow" target="_blank">官方Node.js网站</a>安装Node的最新版本。完成后，打开您的终端或命令行，安装<a class="ae jp" href="https://github.com/stdlib/lib" rel="noopener ugc nofollow" target="_blank"> StdLib命令行工具</a>，如下所示:</p><pre class="jr js jt ju fq mu kb mv mw aw mx dt"><span id="f0c1" class="my kd hu kb b fv mz na l nb nc">$ npm install lib.cli -g</span></pre><p id="7885" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这使您可以访问用于服务管理和执行的<code class="eh jy jz ka kb b">lib</code>命令。接下来，为StdLib服务创建一个<code class="eh jy jz ka kb b">stdlib</code>目录。</p><pre class="jr js jt ju fq mu kb mv mw aw mx dt"><span id="59ae" class="my kd hu kb b fv mz na l nb nc">$ mkdir stdlib<br/>$ cd stdlib<br/>$ lib init</span></pre><p id="1c45" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用您在上一步中创建的凭据登录。就是这样！</p></div><div class="ab cl lq lr hc ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hn ho hp hq hr"><h1 id="01f5" class="kc kd hu bd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz dt translated">第4分钟:StdLib服务创建</h1><p id="b428" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">接下来，您将从命令行创建StdLib服务。我们已经创建了一个特殊的<code class="eh jy jz ka kb b">twilio</code>模板，让你可以在几秒钟内发送你自己的Twilio Hub原型。</p><pre class="jr js jt ju fq mu kb mv mw aw mx dt"><span id="31bf" class="my kd hu kb b fv mz na l nb nc">$ lib create -t twilio</span></pre><p id="a6d6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您将被要求输入一个<code class="eh jy jz ka kb b">Service Name</code>，对于本教程，我们推荐使用<code class="eh jy jz ka kb b">twilio-hub</code>。您将看到一些NPM软件包正在本地安装，您的服务目录正在创建:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff nd"><img src="../Images/55bbfdc1b83640768f20eb141b55e965.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fNLziZv9uQC6bEfWHvplbg.png"/></div></div></figure><p id="7e04" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦完成，您将被告知进入您的服务目录。使用以下命令执行此操作:</p><pre class="jr js jt ju fq mu kb mv mw aw mx dt"><span id="5021" class="my kd hu kb b fv mz na l nb nc">$ cd user/twilio-hub</span></pre><p id="ff79" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">其中<code class="eh jy jz ka kb b">user</code>当然是你的StdLib用户名。(我的情况是<code class="eh jy jz ka kb b">keith</code>。)</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff ne"><img src="../Images/956332b91bff883083d61da8960aae47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*50xp9R0MQlP4ljQOO9IEtQ.png"/></div></div></figure><p id="f5cc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这里，您可以尝试运行一些短信命令(这些将是发送到您Twilio号码的<em class="mp">【更多】</em>或<em class="mp">【whoami】</em>的回复):</p><pre class="jr js jt ju fq mu kb mv mw aw mx dt"><span id="55c6" class="my kd hu kb b fv mz na l nb nc">$ lib .messaging.more</span></pre><p id="967a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">看看结果:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff nf"><img src="../Images/8c69b903ec098eae045d87e1c6acbfd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v-gwA2hKYp2WJ8OM0lGH3Q.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">The SMS response to people who message your number with the text “more.”</figcaption></figure><p id="b201" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">或者，用<code class="eh jy jz ka kb b">-d</code>打开调试模式，看看幕后发生了什么:</p><pre class="jr js jt ju fq mu kb mv mw aw mx dt"><span id="d383" class="my kd hu kb b fv mz na l nb nc">$ lib .messaging.whoami -d</span></pre><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff ng"><img src="../Images/42b13c8a99a6bc245bbd45164e6645fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DRdneqHvjE0f4DVBYTT6Kg.png"/></div></div></figure><p id="88b5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因为这实际上不是由Twilio的webhook触发的，执行信息(zipcode，city)读起来像<code class="eh jy jz ka kb b">undefined</code>，所以这是意料之中的。</p></div><div class="ab cl lq lr hc ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hn ho hp hq hr"><h1 id="a90f" class="kc kd hu bd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz dt translated"><strong class="ak">第5分钟:配置您的StdLib环境</strong></h1><p id="a627" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">下一步，我们要确保StdLib知道我们所有的Twilio帐户细节。要正确设置，首先打开刚刚创建的StdLib服务目录中的<code class="eh jy jz ka kb b">env.json</code>，<code class="eh jy jz ka kb b">user/twilio-hub/env.json</code>，其中<code class="eh jy jz ka kb b">user</code>是您的用户名。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff nh"><img src="../Images/89a94fd16d6cc925b8d2952278ac9886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*89hCOaojXf-OBnLf6mHdOg.png"/></div></div></figure><p id="8551" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">可以看到三种不同的环境:<code class="eh jy jz ka kb b">local</code>、<code class="eh jy jz ka kb b">dev</code>和<code class="eh jy jz ka kb b">release</code>。这些适用于不同的执行上下文——在本地运行时，使用<code class="eh jy jz ka kb b">local</code>中的环境变量，您可以部署到云中的<code class="eh jy jz ka kb b">dev</code>环境，或者生产<code class="eh jy jz ka kb b">release</code>环境。我们通常建议至少使用不同的电话号码。</p><p id="3373" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">确保在本教程中，您使用相同的值填写</strong> <code class="eh jy jz ka kb b"><strong class="it hv">dev</strong></code> <strong class="it hv">和</strong> <code class="eh jy jz ka kb b"><strong class="it hv">local</strong></code> <strong class="it hv">变量。</strong></p><p id="7112" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">填写<code class="eh jy jz ka kb b">"STDLIB_TOKEN"</code>访问<a class="ae jp" href="https://dashboard.stdlib.com/dashboard/" rel="noopener ugc nofollow" target="_blank">https://dashboard.stdlib.com/dashboard/</a>，登录，点击左侧<strong class="it hv">图书馆代币</strong>，然后<strong class="it hv">显示代币</strong>显示您的代币。将其复制并粘贴到您的环境变量中。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff ni"><img src="../Images/e3193985125112690f16173c8f22e92d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1jQGQVacvUaXl-96m52gcg.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Click “Show Token” to reveal your token, then copy it.</figcaption></figure><p id="4c3c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">接下来，<code class="eh jy jz ka kb b">"TWILIO_ACCOUNT_SID"</code>、<code class="eh jy jz ka kb b">"TWILIO_AUTH_TOKEN"</code>和<code class="eh jy jz ka kb b">"TWILIO_NUMBER"</code>——这些都可以从你在<a class="ae jp" href="https://www.twilio.com/console" rel="noopener ugc nofollow" target="_blank">https://www.twilio.com/console</a>的Twilio控制台获得。直接复制你的<strong class="it hv">账号SID </strong>，点击你的<strong class="it hv">认证令牌</strong>旁边的眼球，显示出来，同样复制。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff nj"><img src="../Images/c90923993a76d2227eb5b86923d44ea3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GFcOJDQeLd6HV_yE6SvHKQ.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Copy your Account SID and your Twilio Auth Token into your Environment Variables</figcaption></figure><p id="5073" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">要查找您之前创建的Twilio电话号码，请访问<a class="ae jp" href="https://www.twilio.com/console/phone-numbers/incoming" rel="noopener ugc nofollow" target="_blank">https://www.twilio.com/console/phone-numbers/incoming</a>。点击您在<strong class="it hv">分钟1 </strong>中创建的红色高亮数字。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff nk"><img src="../Images/aa13d4ef60243323491ce8518e06351e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YXtPmYOYwmEvNMfdgZm7Tg.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Click on the Red Text to Configure Your Number</figcaption></figure><p id="25aa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在下一个屏幕中，将格式为<code class="eh jy jz ka kb b">+1234567890</code>的<strong class="it hv">电话号码</strong>值复制并粘贴到您的<code class="eh jy jz ka kb b">"TWILIO_NUMBER"</code>值中。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff nl"><img src="../Images/351395d6e7699790dcc169ac6fc7da13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9bUgduEGgmQEAf6ojq-mvg.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Copy the “PHONE NUMBER” value</figcaption></figure><p id="5d92" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">最后</strong>,<code class="eh jy jz ka kb b">"CALL_FORWARD_NUMBER"</code>值可以填入<strong class="it hv">您选择的任何电话号码，它是您的Twilio Hub会自动将来电转接到</strong>的号码。再次使用格式<code class="eh jy jz ka kb b">+1234567890</code>(确保它在引号中)。出于演示目的，最好使用个人电话号码。</p></div><div class="ab cl lq lr hc ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hn ho hp hq hr"><h1 id="901e" class="kc kd hu bd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz dt translated">第6分钟:部署和配置Webhooks</h1><p id="cbd0" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">你快完成了！最后一步是部署StdLib Twilio Hub(上面设置了适当的环境变量),然后配置Twilio Webhooks指向StdLib。</p><p id="3d33" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">要在<code class="eh jy jz ka kb b">dev</code>环境中部署StdLib Twilio Hub，只需在服务目录中打开命令行并键入:</p><pre class="jr js jt ju fq mu kb mv mw aw mx dt"><span id="c969" class="my kd hu kb b fv mz na l nb nc">$ lib up dev</span></pre><p id="580c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您将看到您的服务部署到开发环境的进度，并且会看到与您的<code class="eh jy jz ka kb b">functions/</code>目录中的所有内容相对应的可用HTTP端点列表。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff nm"><img src="../Images/f49cc925abfe3f73226d06b4ba978a1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6DB9d1R5TgFGbj83_W1viQ.png"/></div></div></figure><p id="fc57" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在您的服务已上线，请返回Twilio管理号码面板<a class="ae jp" href="https://www.twilio.com/console/phone-numbers/incoming" rel="noopener ugc nofollow" target="_blank">https://www.twilio.com/console/phone-numbers/incoming</a>并再次选择您的电话号码。先向下滚动到<strong class="it hv">语音&amp;传真</strong>:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff nn"><img src="../Images/80cfaa76d465b1bdbdfd7efe892da2ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QWKhEHBghyYLQz3tYTUxZQ.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Enter in your “voice” endpoint to Voice &amp; Fax</figcaption></figure><p id="2ad3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这个表单中，除了<strong class="it hv">之外，还有一个来电</strong>，确保在下拉列表中选择<strong class="it hv"> Webhook </strong>，并使用值<code class="eh jy jz ka kb b">https://&lt;user&gt;.api.stdlib.com/twilio-hub@dev/voice/</code>(其中<code class="eh jy jz ka kb b">&lt;user&gt;</code>当然是您的用户名)。请注意，主机名<code class="eh jy jz ka kb b">api.stdlib.com</code>是我们的功能网关，您所有的服务和功能都将部署到这里。</p><p id="ebc2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">接下来，向下滚动到<strong class="it hv">消息</strong>并在<strong class="it hv">中输入<code class="eh jy jz ka kb b">https://&lt;user&gt;.api.stdlib.com/twilio-hub@dev/messaging/</code>一条消息进入</strong> Webhook处理程序。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff no"><img src="../Images/593e510a3942995d0713aab50e3e53d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BmytJ5Mj_CK23gmxl04XXw.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">Enter in your Messaging Handler details, and hit <strong class="bd np">Save</strong></figcaption></figure><p id="1168" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，点击左下方的<strong class="it hv">保存</strong>。</p></div><div class="ab cl lq lr hc ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hn ho hp hq hr"><h1 id="6bee" class="kc kd hu bd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz dt translated">第7分钟:添加已验证的电话号码</h1><p id="65a1" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">如果这是你第一次注册Twilio，你将使用一个试用帐户。试用帐户对可以发送信息或转移来电的号码有限制。为了确保您在StdLib上的Twilio Messaging Hub如您所愿地工作，请使用<strong class="it hv">已验证的电话号码</strong>列表来添加您想要转发呼叫或发送消息的任何电话号码。</p><p id="449c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://twilio.com/user/account/phone-numbers/verified." rel="noopener ugc nofollow" target="_blank">https://twilio.com/user/account/phone-numbers/verified</a></p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff nq"><img src="../Images/8cc756d7e0fe99b48df2b0b17c0289af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b6Ne5iVu0wwEBACwJEfsdg.png"/></div></div></figure><p id="7e64" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">默认情况下，您注册帐户时使用的电话号码应该已经列在这里了。</p></div><div class="ab cl lq lr hc ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hn ho hp hq hr"><h1 id="d119" class="kc kd hu bd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz dt translated">就是这样！</h1><p id="4f23" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">您在StdLib上的Twilio消息中心已上线！现在，您可以向您的Twilio号码发送短信以接收自动回复，并拨打您的号码进行转发。如果你使用的是Twilio试用账户，请确保你在第7分钟内添加了经过验证的号码。否则，你就可以走了！</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff nr"><img src="../Images/f53a39f8709269584c0945848085c326.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6UyblhY2t--1mxYegHoWQg.png"/></div></div><figcaption class="mk ml fg fe ff mm mn bd b be z ek">A Twilio Bot Interaction using StdLib</figcaption></figure><p id="69ed" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可以通过访问StdLib服务中的<code class="eh jy jz ka kb b">/functions/messaging/</code>目录来修改SMS Bot的行为。默认回答是“whoami”和“more”这个消息中心还处理MMS(媒体、图片)上传。</p><h2 id="5e57" class="my kd hu bd ke ns nt nu ki nv nw nx km jc ny nz kq jg oa ob ku jk oc od ky oe dt translated">陷阱和生产版本</h2><p id="442e" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">如果在任何时候您忘记了您的StdLib用户名或者您的webhook回调应该是什么，当您使用<code class="eh jy jz ka kb b">$ lib up dev</code>部署服务时，它们会被列出。</p><p id="50de" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你在玩的时候没有得到预期的响应，Twilio在https://www.twilio.com/console/dev-tools/debugger有一个惊人的调试器。</p><p id="617c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">要将bot / messaging hub投入生产，我们建议使用不同的电话号码。将您在<code class="eh jy jz ka kb b">env.json</code>中的<code class="eh jy jz ka kb b">release</code>环境变量配置为适当的设置，将您在<code class="eh jy jz ka kb b">package.json</code>中的<code class="eh jy jz ka kb b">version</code>设置为<code class="eh jy jz ka kb b">1.0.0</code>(或者您喜欢的任何东西)，发布一个带有<code class="eh jy jz ka kb b">$ lib release</code>的版本，然后您可以使用<code class="eh jy jz ka kb b">https://&lt;user&gt;.api.stdlib.com/twilio-hub@1.0.0/voice/</code>和<code class="eh jy jz ka kb b">https://&lt;user&gt;.api.stdlib.com/twilio-hub@1.0.0/messaging/</code>作为您生产电话号码的语音和消息端点。</p></div><div class="ab cl lq lr hc ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hn ho hp hq hr"><h1 id="5d10" class="kc kd hu bd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz dt translated">谢谢大家！</h1><p id="65da" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">如果你想跟踪未来的StdLib更新和更多Twilio乐趣，请在Twitter上关注我们，地址是<a class="ae jp" href="https://twitter.com/StdLibHQ" rel="noopener ugc nofollow" target="_blank">@ StdLibHQ</a>——或者你可以关注我，特别是在<a class="ae jp" href="https://twitter.com/keithwhor" rel="noopener ugc nofollow" target="_blank"> @keithwhor。</a>感谢阅读！</p></div><div class="ab cl lq lr hc ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hn ho hp hq hr"><p id="e3c6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在StdLib，我们专注于让软件开发人员的生活变得更轻松，让他们重新做他们最喜欢的事情——编写代码和开发出色的产品。如果你愿意帮助我们完成任务，请联系<a class="ae jp" href="mailto:careers@stdlib.com" rel="noopener ugc nofollow" target="_blank"><em class="mp">careers@stdlib.com</em></a><em class="mp">了解一下你自己吧！</em></p><div class="jr js jt ju fq ab cb"><figure class="of jv og oh oi oj ok paragraph-image"><a href="http://bit.ly/HackernoonFB"><img src="../Images/50ef4044ecd4e250b5d50f368b775d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0hqOaABQ7XGPT-OYNgiUBg.png"/></a></figure><figure class="of jv og oh oi oj ok paragraph-image"><a href="https://goo.gl/k7XYbx"><img src="../Images/979d9a46439d5aebbdcdca574e21dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Vgw1jkA6hgnvwzTsfMlnpg.png"/></a></figure><figure class="of jv og oh oi oj ok paragraph-image"><a href="https://goo.gl/4ofytp"><img src="../Images/2930ba6bd2c12218fdbbf7e02c8746ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gKBpq1ruUi0FVK2UM_I4tQ.png"/></a></figure></div><blockquote class="ol om on"><p id="f922" class="ir is mp it b iu iv iw ix iy iz ja jb oo jd je jf op jh ji jj oq jl jm jn jo hn dt translated">黑客中午是黑客如何开始他们的下午。我们是这个家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="708a" class="ir is mp it b iu iv iw ix iy iz ja jb oo jd je jf op jh ji jj oq jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff or"><img src="../Images/be0ca55ba73a573dce11effb2ee80d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35tCjoPcvq6LbB3I6Wegqw.jpeg"/></div></div></figure></div></div>    
</body>
</html>