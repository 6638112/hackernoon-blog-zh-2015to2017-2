<html>
<head>
<title>What I Learned from Copying a Builtin Browser Feature</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我从复制内置浏览器功能中学到了什么</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/what-i-learned-from-copying-a-builtin-browser-feature-f18f68f370dd?source=collection_archive---------24-----------------------#2017-08-28">https://medium.com/hackernoon/what-i-learned-from-copying-a-builtin-browser-feature-f18f68f370dd?source=collection_archive---------24-----------------------#2017-08-28</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="9793" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">几周前，我意识到我每天都要花很多时间打开所有我需要使用的网站。还有工资单webapp、工作和个人Gmail、JIRA、Testrail、Jenkins等等。每天下午，当我开始工作时，我会打开一个新的Firefox匿名窗口，手动打开每个标签，然后输入所有这些网址。我不是唯一一个——我注意到我的同事也在做和我一样的事情。作为一个喜欢解谜和解决它们的人，我把这看作是一个解决<a class="ae jp" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程</a>问题的机会。</p><p id="f619" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在我继续说下去之前，我想说我知道当你启动浏览器时，打开指定的URL是可能的。我不知道这有多简单。我原以为你需要写一个脚本来自动完成这项工作(我认为普通浏览器用户不知道或不想这么做)，但实际上，这很简单，只需在“主页”字段中输入你想要的网站，或者将这些网站添加到书签文件夹中，右键单击该文件夹，然后选择“在标签页中打开所有网站”。但这种认识是后来才出现的。</p><h2 id="dfe7" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">我的解决方案</h2><p id="f91b" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">为了解决这个问题，我决定做一个浏览器插件/扩展。在开始这个项目之前，我曾经做过一个，所以在操作浏览器时，我能够掌握扩展的能力和局限性。从那时起，我知道我想要能够按下一个按钮(最好位于一个方便的位置)，这样做后，它应该会打开我在某种设置页面中列出的所有网站。</p><p id="2a44" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Mozilla为创建WebExtensions提供了优秀的文档(最新类型的附加组件，只有在Firefox 57发布后才会出现——查看<a class="ae jp" href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions" rel="noopener ugc nofollow" target="_blank">入门指南</a>)。基于我的需求，我想我会想要一个工具栏动作按钮(相对于页面动作，它只对某些网站有效)。这将允许我在任何时候按下按钮，不管当前标签或网站打开，因为工具栏按钮将始终存在。WebExtensions的工作方式是，工具栏按钮的事件监听器需要在一个叫做<em class="kq">的后台脚本</em>中，不管WebExtension是否激活，它都会持续运行。在我的例子中，这是理想的，因为这意味着我可以在任何时候按下工具栏按钮，而不必担心事件监听器是否会被触发，因为它总是在监听。在我写这篇文章的时候，我已经对<em class="kq">rapidtaopener</em>做了一些小的改动和错误修复，所以打开想要的网站的逻辑有点改变。由于时间关系，我将只解释它目前是如何工作的。</p><div class="kr ks fm fo kt ku"><a href="https://addons.mozilla.org/en-US/firefox/addon/rapidtabopener/" rel="noopener  ugc nofollow" target="_blank"><div class="kv ab ej"><div class="kw ab kx cl cj ky"><h2 class="bd hv fv z el kz eo ep la er et ht dt translated">快速开瓶器</h2><div class="lb l"><h3 class="bd b fv z el kz eo ep la er et ek translated">按下按钮，RapidTabOpener立即打开所有您想要的网站，无需输入！</h3></div><div class="lc l"><p class="bd b gc z el kz eo ep la er et ek translated">addons.mozilla.org</p></div></div><div class="ld l"><div class="le l lf lg lh ld li lj ku"/></div></div></a></div><h2 id="8720" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">它是如何工作的</h2><p id="5500" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">第一次点击工具栏按钮时，<em class="kq">rapidtaopener</em>会自动打开它的选项页面，以便用户选择他们想要打开的窗口类型，并添加他们想要“快速打开”的站点一旦添加并保存了首选项，这些首选项就会作为JSON对象存储在浏览器的本地存储中。这些物体看起来是这样的:</p><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="5179" class="jq jr hu lp b fv lt lu l lv lw">/**<br/> * object for window-type, where 'windowType' is a String,<br/> * "normal" or "incognito"<br/> */<br/>var windowSettings = {<br/>    type: windowType<br/>};</span><span id="b060" class="jq jr hu lp b fv lx lu l lv lw">/**<br/> * the URLs, saved as Strings in an array<br/> */<br/>var urls = [<br/>    "gmail.com",<br/>    "news.ycombinator.com",<br/>    "reddit.com"<br/>];</span></pre><p id="9f66" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当涉及到开发附加组件时，开发人员有两种不同的选择来存储数据:本地或会话存储。这两者非常相似，唯一的区别是存储在本地存储中的任何数据都没有截止日期，并且即使在浏览器应用程序关闭后仍然存在，而会话存储数据将在会话结束后被清除。了解这一点后，我使用本地存储，因为我希望用户只需添加一次他们的初始首选项。</p><p id="f455" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦他们的偏好被保存，用户可以立即按下工具栏按钮，他们输入的网站将“神奇地”在他们选择的窗口类型中打开。这是可能的，因为一旦保存了首选项，窗口类型和网站将作为对象保存在本地存储中。然后，当工具栏按钮被按下时，来自后台脚本的事件监听器被触发，它查找并获取这些首选项对象。窗口类型被确定，然后基于所期望的窗口类型是否已经被打开，在循环通过并打开用户添加的站点之前，程序可以打开或不打开新的窗口。</p></div><div class="ab cl ly lz hc ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="hn ho hp hq hr"><figure class="lk ll lm ln fq mg fe ff paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="fe ff mf"><img src="../Images/1a7579f226d4946c631b82fe6318e0c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MtIQ9OZMby2cTnESIYXcgA.png"/></div></div><figcaption class="mm mn fg fe ff mo mp bd b be z ek">A simple flowchart depicting how RapidTabOpener works (generated with <a class="ae jp" href="http://shakydraw.com/" rel="noopener ugc nofollow" target="_blank">ShakyDraw</a>).</figcaption></figure></div><div class="ab cl ly lz hc ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="hn ho hp hq hr"><h2 id="f03e" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">发布RapidTabOpener</h2><p id="9849" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">有了一个最小但有效的扩展，我很快就在火狐扩展和主题的应用商店<a class="ae jp" href="https://addons.mozilla.org/en-US/firefox/" rel="noopener ugc nofollow" target="_blank">addons.mozilla.org</a>(AMO)得到了它。我真的只是想能够在工作中使用这个插件，所以我提交给AMO的最初版本被归类为“实验性的”，因为我不愿意把它发布给公众。这使得只有拥有AMO列表网址的人才能下载<em class="kq">rapidtaopener。</em>最初的版本(1.0版)只有添加和保存网址的功能，它会打开一个新的私人窗口，并关闭任何当前打开的正常窗口。你也许能明白为什么我不想让公众知道这个。一旦我设置了窗口类型选择功能，并在AMO中添加了新版本，我就将清单更改为公共的，并准备好让用户自己尝试。</p><h2 id="a806" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">是时候做些宣传了——也是一次现实检查</h2><p id="9a8e" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">第二个版本在AMO获得批准后，我去了自己经常去的地方Reddit。我在/r/firefox中创建的第一个subreddit帖子。至少可以说，那边的人很难取悦。我真的不确定会期待什么，但对<em class="kq"> RapidTabOpener </em>的总体感觉是，嗯，你可以通过评论来决定:</p><blockquote class="mq mr ms"><p id="06e2" class="ir is kq it b iu iv iw ix iy iz ja jb mt jd je jf mu jh ji jj mv jl jm jn jo hn dt translated">“这可以通过设置由竖线字符分隔的多个站点来实现…”</p><p id="d8a6" class="ir is kq it b iu iv iw ix iy iz ja jb mt jd je jf mu jh ji jj mv jl jm jn jo hn dt translated">“这个和书签文件夹有什么区别？”</p><p id="4560" class="ir is kq it b iu iv iw ix iy iz ja jb mt jd je jf mu jh ji jj mv jl jm jn jo hn dt translated">不是为了添油加醋，而是一种比右键单击文件夹更快/更简单的方法，即在单击文件夹时按住CTRL键，或者单击鼠标中键(如果有鼠标的话)</p><p id="7746" class="ir is kq it b iu iv iw ix iy iz ja jb mt jd je jf mu jh ji jj mv jl jm jn jo hn dt translated">"为什么不直接使用会话恢复？"</p></blockquote><p id="2778" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我回答了每个人的问题，试图捍卫我的想法和所有投入其中的工作。尽管他们钦佩我的努力，但他们并不适合使用这样的工具(因为他们已经知道了打开一组指定URL的内置功能)。如果我说我在最初的帖子后没有一点不安，那我是在撒谎。这个项目是我做的第一个项目，我觉得好像人们真的会使用它并发现它很有帮助。我知道我没有接触到目标受众，因为在Reddit帖子发布一天后，插件的统计数据显示我前一天只有11次下载，其中3次来自外部来源(Reddit)，而其余的来自AMO的“最近添加”部分。</p><h2 id="6446" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">分享你的过程，而不仅仅是产品</h2><p id="55e1" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">虽然我已经解决了我最初面临的问题，但我认为<em class="kq"> RapidTabOpener </em>会更容易被其他人接受。我对自己不能想出更好的项目想法感到沮丧，接下来的几天，我放下编码去思考一切。在退一步给自己思考的空间后，我意识到我的成就来自于处理最初的问题并能够解决它。第一，我能够自己学习JavaScript的基础知识，我认为这很不错。我意识到添加、编辑、删除和保存URL就像创建一个TODO应用程序，这是JavaScript初学者的第一个项目。最重要的是，我学会了如何在使用浏览器API的同时阅读文档，以便让我的附加组件的各个部分能够相互通信。最后，我意识到我不仅仅是复制了一个内置的浏览器特性，我还可以对它进行调整甚至改进。本来，你不能选择你想要你的网址在什么窗口类型中打开，它们只是在当前打开的任何窗口中打开。我能够更进一步，将该功能提供给用户。更有甚者，你只能在本地添加和删除URLs不能编辑链接。正如我们所知，这在<em class="kq">rapidtaopener</em>中不是问题。从最新版本(<code class="eh mw mx my lp b">v1.4.5</code>)开始，<em class="kq">rapidtaopener</em>拥有上下文菜单选项，因此您可以轻松添加您当前所在的网站或通过右键单击打开选项页面。</p><p id="bef2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有了这些认识之后，我决定试着在不同的子编辑上多写几篇文章，这次是/r/learnjavascript和/r/coolgithubprojects。这些帖子都是一样的，我确保包括了我对这个项目的新发现，这一次它真的引起了人们的共鸣，当天<em class="kq">rapidtaopener</em>获得了不到60次下载，甚至在GitHub上获得了几颗星。</p><p id="8979" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我欣喜若狂！人们实际上在使用我自己创造的东西，这让我对自己编程和解决问题的能力更有信心。我认为第一篇文章和其他两篇文章的不同之处在于，我不仅分享了我制作的实际产品，还包括了我制作它的过程。看到最终产品很酷，但更有趣的是能够看到开发该产品的过程和创作者的心态。</p><h2 id="b244" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">结论</h2><p id="f1d8" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">从一个我想解决的简单问题开始，我从解决问题开始，到改进解决方案，到分享我的解决方案并希望其他人会发现它很有用，但并没有真正被接受，到沮丧只是意识到我实际学到了什么和完成了什么，到分享我的解决方案以及我的实现，到最终瞄准正确的受众并找到不仅是为我自己也是为其他人的解决方案。</p><p id="2c94" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">通过几乎不知不觉地复制一个内置的浏览器功能，我能够学到比我预期的更多的东西。从我学到的技术方面，比如学习JavaScript的基础知识和阅读文档，到我刚刚创造的重要的营销方面/课程，“分享你的过程，而不仅仅是项目”，我很高兴地说<em class="kq">rapidtaopener</em>是我创建的最重要的项目之一。现在，如果我能把Medium添加到我的<em class="kq">快速浏览器</em>的网站列表中，我就能记得多写些文章了…</p><p id="b852" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="kq">如果读完这篇文章后，你想亲自尝试一下</em>快速浏览器<em class="kq">，请随意从下面的AMO下载。对于你的Chrome用户来说，你只需要再等一会儿。将</em>rapidtaopener<em class="kq">移植到Chrome的过程目前正在进行中。如果你喜欢这篇文章，可以去Cedric的博客</em> coffee看看他的其他文章。代码。塞德里克也在下面找到了。</p><div class="kr ks fm fo kt ku"><a href="https://addons.mozilla.org/en-US/firefox/addon/rapidtabopener/" rel="noopener  ugc nofollow" target="_blank"><div class="kv ab ej"><div class="kw ab kx cl cj ky"><h2 class="bd hv fv z el kz eo ep la er et ht dt translated">快速开瓶器</h2><div class="lb l"><h3 class="bd b fv z el kz eo ep la er et ek translated">按下按钮，RapidTabOpener立即打开所有您想要的网站，无需输入！</h3></div><div class="lc l"><p class="bd b gc z el kz eo ep la er et ek translated">addons.mozilla.org</p></div></div><div class="ld l"><div class="le l lf lg lh ld li lj ku"/></div></div></a></div><div class="kr ks fm fo kt ku"><a href="https://blog.cedricamaya.me" rel="noopener  ugc nofollow" target="_blank"><div class="kv ab ej"><div class="kw ab kx cl cj ky"><h2 class="bd hv fv z el kz eo ep la er et ht dt translated">咖啡。代码。塞德里克。</h2><div class="lb l"><h3 class="bd b fv z el kz eo ep la er et ek translated">一个想成为软件开发人员的人的想法。</h3></div><div class="lc l"><p class="bd b gc z el kz eo ep la er et ek translated">blog.cedricamaya.me</p></div></div><div class="ld l"><div class="mz l lf lg lh ld li lj ku"/></div></div></a></div><figure class="lk ll lm ln fq mg"><div class="bz el l di"><div class="na nb l"/></div></figure></div></div>    
</body>
</html>