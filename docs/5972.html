<html>
<head>
<title>Why did I decide to use Amazon Relational Database Service(RDS) in my project?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么我决定在我的项目中使用亚马逊关系数据库服务(RDS )?</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/why-did-i-decide-to-use-amazon-relational-database-service-rds-in-my-project-14470055f4cc?source=collection_archive---------2-----------------------#2017-08-27">https://medium.com/hackernoon/why-did-i-decide-to-use-amazon-relational-database-service-rds-in-my-project-14470055f4cc?source=collection_archive---------2-----------------------#2017-08-27</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="8294" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我使用<a class="ae jp" href="https://hackernoon.com/tagged/aws" rel="noopener ugc nofollow" target="_blank"> AWS </a>(亚马逊网络服务)服务已经超过5年，EC2一直是我在亚马逊网络服务中使用最多的服务。到目前为止，我已经开发了许多运行在EC2上的基于web的应用程序和服务。由于EC2自带配置，开发人员错过了使用RDS的机会。我的意思是，假设您想要一个包含IIS、SQL Server的windows服务器。您可能会打开EC2界面，点击“启动实例”按钮并选择一个映像(AMI)，然后您有时会将服务器用作独立的<a class="ae jp" href="https://hackernoon.com/tagged/database" rel="noopener ugc nofollow" target="_blank">数据库</a>，或者同时用作web服务和数据库。这是它不那么受欢迎的主要原因。</p><p id="b99e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">由于某种原因，我需要研究RDS，在这次研究之后，我意识到RDS是亚马逊提供的另一个很棒的服务。你可能会问“这怎么可能是一个很棒的服务，它只是一个关系数据库？”如果你问了，你就错了。让我们深入了解一下它的特点。</p><p id="2bd6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">让我们总结一下它有多棒，首先:</strong></p><ul class=""><li id="7e3d" class="jq jr hu it b iu iv iy iz jc js jg jt jk ju jo jv jw jx jy dt translated">没有基础设施管理</li><li id="d6d1" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">应用兼容</li><li id="a7ac" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">安全的</li><li id="2f1a" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">高可用性</li><li id="9cfd" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">可扩展(向上/向下)</li><li id="0f87" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">易于监控</li><li id="710e" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">备份恢复能力</li><li id="1002" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">完美的API能力</li><li id="55b1" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">成本效率</li></ul><p id="0469" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">很奇怪但却是真的，<strong class="it hv">全托管主机和OS </strong>。你不知道哪些操作系统在数据库下运行，也不知道它是如何运行的。因此，无法访问数据库主机操作系统。如果您只是使用数据库，并且您不是数据库方面的专家，那么可能数据库专家比您更了解操作系统应该如何配置。Amazon专家在操作系统和数据库方面都有很高的专业水平，他们通过考虑性能、安全性和容错来配置系统配置。因此，没有依赖主机操作系统配置的功能。该系统是一个现成的解决方案。</p><p id="cd43" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">AWS RDS是服务名，而不是数据库名。这意味着，RDS不仅仅是一个数据库，它支持不同类型的数据库。<a class="ae jp" href="https://aws.amazon.com/rds/postgresql/" rel="noopener ugc nofollow" target="_blank"> PostgreSQL </a>，<a class="ae jp" href="https://aws.amazon.com/rds/mysql/" rel="noopener ugc nofollow" target="_blank"> MySQL </a>，<a class="ae jp" href="https://aws.amazon.com/rds/mariadb/" rel="noopener ugc nofollow" target="_blank"> MariaDB </a>，<a class="ae jp" href="https://aws.amazon.com/rds/oracle/" rel="noopener ugc nofollow" target="_blank"> Oracle </a>，<a class="ae jp" href="https://aws.amazon.com/rds/sqlserver/" rel="noopener ugc nofollow" target="_blank">微软SQL Server </a>和<a class="ae jp" href="https://aws.amazon.com/rds/aurora/" rel="noopener ugc nofollow" target="_blank"> Aurora </a>今天都支持。你可以这么说，好吧，我知道他们，但这到底是什么极光？Aurora是亚马逊开发的数据库。他们不仅花时间开发RDS，还开发了自己的数据库。根据其官方网站，它提供了比MySQL高五倍的性能。是不是很有意思？</p><p id="a76f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">可以选择这5个数据库或Aurora中的任何一个。这不是这篇文章的主题，所以我不会提及数据库的细节。然而，有一件事我很感兴趣，我想和你分享一下。</p><p id="20c5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">最大存储限制—</strong>TB</p><ul class=""><li id="e200" class="jq jr hu it b iu iv iy iz jc js jg jt jk ju jo jv jw jx jy dt translated">SQL Server: 4 TB</li><li id="9e88" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">PostgreSQL，MySQL，MariaDB，Oracle: 6 TB</li><li id="95ff" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated">极光:64 TB</li></ul><p id="7df3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你看到差距了吗？比SQL Server大16倍，比其他服务器大11倍左右。如果您确实用尽了存储，您应该选择一种策略，如分片策略、归档策略或删除策略来处理新数据。看来很难达到极光的max极限了。亚马逊再次展示了它的与众不同。</p><h1 id="6e2f" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated"><strong class="ak">安全</strong></h1><p id="89c2" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">安全是另一个重要的话题。亚马逊正在利用其VPN(虚拟专用网络)能力、安全组系统、KMS(密钥管理服务)和IAM(身份和访问管理)服务来解决这一问题。</p><p id="d1e1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">由于其模块化架构，这些服务也用于其他AWS服务。因为我不想展开太多的部分，所以我不打算提及它们。然而，我在youtube上看了一个关于安全组的视频，印象深刻。演示者说,<em class="lh">安全组基本上是一个防火墙，一个虚拟防火墙，控制流量协议、端口范围、流量类型、流量来源和来源的IP地址。</em>“是真的。我使用AWS安全组已经超过5年了，但是我从来没有意识到这一点。这是一个虚拟防火墙。</p><p id="38ad" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">由于您没有参与支付项目，您可能没有意识到符合PCI/DSS的重要性。参加PCI/DSS合规认证是一个艰难、复杂且耗时的过程。然而，至少从服务器的角度来看，亚马逊让你更容易做到这一点。您可以在PCI/DSS符合性检查列表中将服务器问题标记为OK。</p><p id="a6b4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">安全或PCI/DSS兼容不要直接针对RDS。AWS公共服务提供了如此好的特性，以至于我们可以将它们与RDS一起使用。</p><p id="fcd2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们更多地讨论与RDS及其功能相关的内容。</p><h1 id="3ac5" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">高可用性</h1><p id="1a6c" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">关于可用性有两种方法。首先是最小部署，称为单个AZ。顺便说一下，当我在亚马逊RDS网站上看到AZ术语时，我花了很长时间才理解它的意思。AZ的意思是“可用区域”。</p><p id="9872" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最小部署看起来像:</p><figure class="lj lk ll lm fq ln fe ff paragraph-image"><div class="fe ff li"><img src="../Images/bf5a229dcf21c2deabe621d33e10ba94.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*01dAN1H_qA00GSIb6H9Atw.png"/></div><figcaption class="lq lr fg fe ff ls lt bd b be z ek">Single AZ</figcaption></figure><p id="a31c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">1个数据卷，1个数据库实例用于数据库操作。该数据库应该随时可用。很明显，运行单一可用性区域部署可能不是最佳方法。</p><p id="52ab" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">第二，高可用性。看起来像；</p><figure class="lj lk ll lm fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="fe ff lu"><img src="../Images/e10e7d94dd89e077122958b6a4ca5dbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WH06uqZEYVoeePMSWZoC7A.png"/></div></div><figcaption class="lq lr fg fe ff ls lt bd b be z ek">Multi AZ</figcaption></figure><p id="7a16" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">看起来不是更复杂了吗？两个相同的数据库实例运行在不同的区域上。数据卷是另一个数据卷的副本。如果主区域出现网络通信问题或实际故障，您可以选择进行其他故障切换，以最大限度地减少停机时间。</p><figure class="lj lk ll lm fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="fe ff lz"><img src="../Images/c585544f7ddf6e60ffb21b4ef7bd7824.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_KisBo97XzUN-4pyJSqlhg.png"/></div></div></figure><p id="2e8b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当主数据库或其所在的可用性区域出现故障时，RDS服务将会接管，因为它是一项托管服务，并且会将该DNS条目重新指向您的备用数据库，使该备用数据库现在成为您的主要主数据库。</p><figure class="lj lk ll lm fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="fe ff ma"><img src="../Images/48aee75cac43bbbb80d1405927303189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hSY3IA8zgkzDUN-Lz3Kq2A.png"/></div></div></figure><p id="8bf3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">好的一面是你不在乎这些过程中的任何一个。RDS为您处理。你只需要对RDS说，打开多AZ和你想运行DB的区域号。</p><h1 id="d4db" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">缩放比例</h1><p id="c285" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">您的网站或移动应用程序变得越来越受欢迎或使用越来越广泛，您有一个主数据库，它不仅要支持“写”操作，还要支持大量“读”操作，这给它带来了很大的压力。在这种情况下，您可能希望将负载分配给不同的服务器。</p><figure class="lj lk ll lm fq ln fe ff paragraph-image"><div class="fe ff mb"><img src="../Images/a1aaeeacbfd5d8e8cf63f1dee1c2b692.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*pQHHv5_5KphbnVVuuRyYLg.png"/></div></figure><p id="be00" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一种方法是，您可以添加相同的附加副本数据库来帮助减轻一些负载。主数据库及其副本可用于“读”操作，而只有主数据库可用于“写”操作。</p><p id="9e42" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可能希望扩大或缩小数据库的不同原因。显然，第一个选项是处理更高的负载，另一个选项是降低使用率。您可能会调整初始数据库的规模，以处理您预期的一定数量的事务、一定数量的用户，但您可能会发现，您没有达到这些数字，并且数据库的利用率很低。您可能希望缩小数据库的规模。</p><p id="58f6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">另一种选择是依赖于时间的使用。假设您有一个应用程序，其数据库在周一至周五被频繁使用，但在周末却很少使用，没人会去碰它。如果你真的能把数据库调整到一个更小的尺寸，那不是很好吗？</p><p id="db5e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可以使用RDS web界面来放大或缩小服务器，而Amazon也提供了自动缩放服务器的方法。AWS CLI(命令行)和API。您可以准备一个cron(unix调度作业)。</p><p id="5014" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">CLI命令看起来像:</p><figure class="lj lk ll lm fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="fe ff mc"><img src="../Images/ecf1a480ef096070d59a7816372d0490.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B3-Qjqo0FJ0rgGi2snDQ9A.png"/></div></div><figcaption class="lq lr fg fe ff ls lt bd b be z ek">CLI — Scale Up</figcaption></figure><figure class="lj lk ll lm fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="fe ff mc"><img src="../Images/da3e1a3bff816b990210b032450e82d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qp3cmzjaABdNq2VbckHK7A.png"/></div></div><figcaption class="lq lr fg fe ff ls lt bd b be z ek">CLI — Scale Down</figcaption></figure><p id="51a7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一行代码用于放大或缩小。多牛逼的东西，哈！</p><p id="185b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">详细:<a class="ae jp" href="http://docs.aws.amazon.com/autoscaling/latest/userguide/schedule_time.html" rel="noopener ugc nofollow" target="_blank">http://docs . AWS . Amazon . com/auto scaling/latest/user guide/schedule _ time . html</a></p><p id="3d2b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">克朗看起来像；</p><figure class="lj lk ll lm fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="fe ff md"><img src="../Images/5a910b4fa64fc8fde14798787075fe26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UTlEd3RQ81YYdOFjuGdiBA.png"/></div></div><figcaption class="lq lr fg fe ff ls lt bd b be z ek">Cron</figcaption></figure><p id="48a3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">详细:<a class="ae jp" href="http://docs.aws.amazon.com/cli/latest/reference/autoscaling/put-scheduled-update-group-action.html" rel="noopener ugc nofollow" target="_blank">http://docs . AWS . Amazon . com/CLI/latest/reference/auto scaling/put-scheduled-update-group-action . html</a></p><p id="a098" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可能会问，我还需要一个服务器，以便服务器可以运行这个cron。由于cron服务器运行，我也将支付它。那么，成本削减在哪里呢？你是对的，但是amazon提供了另一个服务来运行这个cron。Lambda，没有服务器，但仍在计划中！AWS Lambda允许您在不提供或管理服务器的情况下运行代码。在云上写代码，在云上运行。</p><p id="5400" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，RDS还提供基于指标的扩展。</p><ol class=""><li id="7d54" class="jq jr hu it b iu iv iy iz jc js jg jt jk ju jo me jw jx jy dt translated">RDS正在向CloudWatch提供信息</li><li id="946d" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo me jw jx jy dt translated">定义您的警报阈值</li><li id="cf11" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo me jw jx jy dt translated">一旦超过这些阈值，就会发出警报。</li><li id="006f" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo me jw jx jy dt translated">它以SNS(简单通知服务)的形式发送通知</li><li id="206f" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo me jw jx jy dt translated">如果您觉得需要基于您定义的阈值进行扩展，您可以订阅一个Lambda函数，该函数可以对您的数据库采取行动。</li></ol><p id="761f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">RDS包括许多附加功能，如备份、恢复和监控。我试着写下我最在乎的人。</p><p id="9ae0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">毕竟奥斯卡去亚马逊，感谢亚马逊。</p><p id="6949" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最好的，</p><p id="238a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">多安·艾登</p><p id="2fc4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">【我的推特:<a class="ae jp" href="https://twitter.com/dgnaydin" rel="noopener ugc nofollow" target="_blank"><em class="lh">https://twitter.com/dgnaydin</em></a></p><p id="627a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="lh">我的领英:</em><a class="ae jp" href="https://www.linkedin.com/in/doganaydin/" rel="noopener ugc nofollow" target="_blank"><em class="lh">https://www.linkedin.com/in/doganaydin/</em></a></p><p id="d36d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="lh">我的GitHub:</em><a class="ae jp" href="https://github.com/trda" rel="noopener ugc nofollow" target="_blank"><em class="lh">https://github.com/trda</em>T21】</a></p><figure class="lj lk ll lm fq ln"><div class="bz el l di"><div class="mf mg l"/></div></figure></div></div>    
</body>
</html>