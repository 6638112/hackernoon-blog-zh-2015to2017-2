<html>
<head>
<title>How to set up a Rails 4.2 app on AWS with Elastic Beanstalk and PostgreSQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Elastic Beanstalk和PostgreSQL在AWS上设置Rails 4.2应用程序</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-set-up-a-rails-4-2-app-on-aws-with-elastic-beanstalk-and-postgresql-3f9f29c046e2?source=collection_archive---------0-----------------------#2015-04-20">https://medium.com/hackernoon/how-to-set-up-a-rails-4-2-app-on-aws-with-elastic-beanstalk-and-postgresql-3f9f29c046e2?source=collection_archive---------0-----------------------#2015-04-20</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/002dbaef7465014b12d177a00824783d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*C4T50HHV6PewBGUH.png"/></div></div></figure><p id="06a1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">我之前在一年前发布过关于</em> <a class="ae kb" rel="noopener" href="/@jatescher/how-to-set-up-a-rails-4-1-app-on-aws-with-elastic-beanstalk-and-postgresql-66d4e3412629"> <em class="ka">如何在rails 4.1 </em> </a> <em class="ka">旧版本的Elastic Beanstalk上做到这一点的说明。这是更新的版本。</em></p><p id="0aff" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">部署Rails应用程序可能很棘手。对于简单的项目，像Heroku这样的工具可能是完美的。它非常适合制作应用原型和测试不同的想法，没有太多的麻烦。然而，当您的项目变得更加复杂，并且您想要更好地控制您的服务器、负载平衡器、工作人员、自动伸缩条件等时，您将无法获得您想要的灵活性。</p><p id="2ef7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有许多服务可以用来快速启动和运行Rails应用程序，同时仍然保持对基础设施的完全控制。一个合理的选择是亚马逊的<a class="ae kb" href="http://aws.amazon.com/elasticbeanstalk/" rel="noopener ugc nofollow" target="_blank">弹性豆茎</a>。亚马逊对这项服务的描述非常贴切:</p><blockquote class="kc kd ke"><p id="bb28" class="jc jd ka je b jf jg jh ji jj jk jl jm kf jo jp jq kg js jt ju kh jw jx jy jz hn dt translated">AWS Elastic Beanstalk使开发人员更容易在AWS云中快速部署和管理应用程序。开发人员只需上传他们的应用程序，Elastic Beanstalk就会自动处理容量供应、负载平衡、自动伸缩和应用程序健康监控的部署细节。</p></blockquote><p id="5117" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，Amazon <a class="ae kb" href="http://aws.amazon.com/rds/postgresql/" rel="noopener ugc nofollow" target="_blank">通过RDS </a>支持PostgreSQL，拥有一个完全托管的postgres支持的Rails应用程序变得前所未有的简单！</p><p id="3e86" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以在<a class="ae kb" href="https://github.com/jtescher/example-rails-4.2-elastic-beanstalk-blog" rel="noopener ugc nofollow" target="_blank">github . com/jtescher/example-rails-4.2-elastic-beanstalk-blog</a>找到这篇文章的所有代码</p><p id="97e3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你卡住了或者有其他问题，关于弹性豆茎的文档是非常好的。</p><h1 id="66bd" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">入门指南</h1><p id="fcfe" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">通过<a class="ae kb" href="https://console.aws.amazon.com/elasticbeanstalk/" rel="noopener ugc nofollow" target="_blank"> AWS控制台</a>上的说明注册一个<a class="ae kb" href="https://hackernoon.com/tagged/aws" rel="noopener ugc nofollow" target="_blank"> AWS </a>账户，然后通过自制软件下载Elastic Beanstalk命令行工具(或<a class="ae kb" href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-getting-set-up.html#eb_cli3-install-with-pip" rel="noopener ugc nofollow" target="_blank">此处</a>用于PC)。</p><pre class="ll lm ln lo fq lp lq lr ls aw lt dt"><span id="8bd5" class="lu kj hu lq b fv lv lw l lx ly">$ brew update<br/>$ brew install aws-elasticbeanstalk</span></pre><h1 id="9920" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">初始化Rails应用程序</h1><p id="b238" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">在撰写本文时，rails的最新版本是4.2.1，所以我们现在将使用它。</p><pre class="ll lm ln lo fq lp lq lr ls aw lt dt"><span id="0e30" class="lu kj hu lq b fv lv lw l lx ly">$ gem install rails -v 4.2.1<br/>$ rails new blog<br/>$ cd blog<br/>$ git init &amp;&amp; git add -A &amp;&amp; git commit -m "Add rails scaffold"</span></pre><h1 id="69a8" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">搭建帖子资源</h1><p id="5a17" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">我们将创建一个简单的示例应用程序，允许您操作帖子。要在Rails中生成这个，请使用:</p><pre class="ll lm ln lo fq lp lq lr ls aw lt dt"><span id="1cf4" class="lu kj hu lq b fv lv lw l lx ly">$ rails generate scaffold post title:string body:text<br/>$ bundle exec rake db:migrate<br/>$ git add -A &amp;&amp; git commit -am "Add post resource"</span></pre><h1 id="fb32" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">初始化弹性Beanstalk应用程序</h1><p id="e9df" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">现在我们可以通过eb命令初始化一个新的Beanstalk应用程序。</p><pre class="ll lm ln lo fq lp lq lr ls aw lt dt"><span id="035b" class="lu kj hu lq b fv lv lw l lx ly">$ eb init</span></pre><p id="9372" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我会选择以下设置，但是关于每个选项的描述，请参见AWS示例<a class="ae kb" href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html#create_deploy_Ruby_eb_init-rds" rel="noopener ugc nofollow" target="_blank">这里的</a>。</p><pre class="ll lm ln lo fq lp lq lr ls aw lt dt"><span id="87e8" class="lu kj hu lq b fv lv lw l lx ly">Select a default region<br/>3) us-west-2 : US West (Oregon)</span><span id="78a6" class="lu kj hu lq b fv lz lw l lx ly">Select an application to use<br/>[ Create new Application ]</span><span id="5cb0" class="lu kj hu lq b fv lz lw l lx ly">Enter Application Name<br/>blog<br/>Application blog has been created.</span><span id="14d1" class="lu kj hu lq b fv lz lw l lx ly">It appears you are using Ruby. Is this correct?<br/>(y/n): y</span><span id="314f" class="lu kj hu lq b fv lz lw l lx ly">Select a platform version.<br/>1) Ruby 2.2 (Puma)</span><span id="893e" class="lu kj hu lq b fv lz lw l lx ly">Do you want to set up SSH for your instances?<br/>(y/n): n</span></pre><p id="fe3f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将在项目的根目录下建立一个. elasticbeanstalk目录，并将其添加到您的。gitignore文件。您不希望您的配置存储在git中，因为那里可能有私人信息。让我们现在提交这些更改:</p><pre class="ll lm ln lo fq lp lq lr ls aw lt dt"><span id="e4e3" class="lu kj hu lq b fv lv lw l lx ly">$ git commit -am "Ignore elasticbeanstalk settings"</span></pre><h1 id="b17c" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">创造弹性豆茎环境</h1><p id="6a40" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">每个弹性Beanstalk应用程序可以有许多环境。这对于为同一个应用程序提供开发和生产环境非常有用。</p><p id="5854" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要创建新环境，请运行以下命令:</p><pre class="ll lm ln lo fq lp lq lr ls aw lt dt"><span id="0954" class="lu kj hu lq b fv lv lw l lx ly">$ eb create blog-env:</span><span id="fa34" class="lu kj hu lq b fv lz lw l lx ly">  Creating application version archive "b303".<br/>  Uploading blog/b303.zip to S3. This may take a while.<br/>  Upload Complete.<br/>  Environment details for: blog-env<br/>    Application name: blog<br/>    Region: us-west-2<br/>    Deployed Version: b303<br/>    Environment ID: e-g5mkeawrnz<br/>    Platform: 64bit Amazon Linux 2015.03 v1.3.0 running Ruby 2.2 (Puma)<br/>    Tier: WebServer-Standard<br/>    CNAME: UNKNOWN<br/>    Updated: 2015-04-19 23:38:50.955000+00:00<br/>  Printing Status:<br/>  INFO: createEnvironment is starting.<br/>  INFO: Using elasticbeanstalk-us-west-2-83376862866 as Amazon S3 storage bucket for environment data.<br/>  INFO: Created load balancer named: awseb-e-g-AWSEBLoa-7R0CSEMQ6W2M<br/>  INFO: Created security group named: awseb-e-g5mkeawrnz-stack-AWSEBSecurityGroup-56IUD2ZYQ5FR<br/>  INFO: Created Auto Scaling launch configuration named: awseb-e-g5mkeawrnz-stack-AWSEBAutoScalingLaunchConfigurat...<br/>  INFO: Created Auto Scaling group named: awseb-e-g5mkeawrnz-stack-AWSEBAutoScalingGroup-2URXDKL0NCIJ<br/>  INFO: Waiting for EC2 instances to launch. This may take a few minutes.<br/>  INFO: Created Auto Scaling group policy named: arn:aws:autoscaling:us-west-2:833768628226:scalingPolicy:02920f8b...<br/>  INFO: Created Auto Scaling group policy named: arn:aws:autoscaling:us-west-2:833768628666:scalingPolicy:b143cea1...<br/>  INFO: Created CloudWatch alarm named: awseb-e-g5mkeawrnz-stack-AWSEBCloudwatchAlarmHigh-APCUnlMHNIS1<br/>  INFO: Created CloudWatch alarm named: awseb-e-g5mkeawrnz-stack-AWSEBCloudwatchAlarmLow-1UL48B2CC2OM8<br/>  INFO: Added EC2 instance 'i-7f4b6eb7' to Auto Scaling Group 'awseb-e-g7mkeawrnz-stack-AWSEBAutoScalingGroup-2URX...<br/>  INFO: Application available at blog-env-zckzptpdgy.elasticbeanstalk.com.<br/>  INFO: Successfully launched environment: blog-env</span></pre><p id="cbf7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">环境现在应该正在运行。要查看状态和URL:</p><pre class="ll lm ln lo fq lp lq lr ls aw lt dt"><span id="30b2" class="lu kj hu lq b fv lv lw l lx ly">$ eb status<br/>  Environment details for: blog-env<br/>    Application name: blog<br/>    Region: us-west-2<br/>    Deployed Version: b303<br/>    Environment ID: e-g5mkeawrn<br/>    Platform: 64bit Amazon Linux 2015.03 v1.3.0 running Ruby 2.2<br/>    Tier: WebServer-Standard<br/>    CNAME: blog-env-zckzptpdg2.elasticbeanstalk.com<br/>    Updated: 2015-04-19 23:51:59.259000+00:00<br/>    Status: Ready<br/>    Health: Green</span></pre><p id="d098" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">设置Rails的最后一件事是添加一个<em class="ka"> SECRET_KEY_BASE </em>环境变量。</p><p id="8523" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要生成新的密钥，请使用:</p><pre class="ll lm ln lo fq lp lq lr ls aw lt dt"><span id="006e" class="lu kj hu lq b fv lv lw l lx ly">$ rake secret<br/>  f655b5cfeb452e49d9182c6b5e6856704e6e1674082fa1e5f1a330782bad1833ba4cc30951e094f9250c87573dc0bbd3d46d37c5d79ff57...</span></pre><p id="2177" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后，为了将这个秘密添加到您的弹性beanstalk环境中，请使用:</p><pre class="ll lm ln lo fq lp lq lr ls aw lt dt"><span id="eb40" class="lu kj hu lq b fv lv lw l lx ly">$ eb setenv SECRET_KEY_BASE=f655b5cfeb452e49d9182c6b5e6856704e6e1674082fa1e5f1a330782bad1833ba4cc30951e094f9250...</span></pre><p id="9eb4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，如果您导航到[YOUR-ENV]. elastic beanstalk . com/posts，您应该会看到您的帖子索引视图:</p><figure class="ll lm ln lo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/c9ce5a3a05bc1ee7f718ad7b2653d604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LTN8Wwef43gU-fau.png"/></div></div></figure><h1 id="9e89" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">结合Rails使用PostgreSQL</h1><p id="c3a7" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">现在我们的应用程序只是使用SQLite，它不是为生产使用而设计的，也不能跨实例共享。我们可以通过将<a class="ae kb" href="https://hackernoon.com/tagged/postgresql" rel="noopener ugc nofollow" target="_blank"> PostgreSQL </a>添加到您的应用程序和弹性Beanstalk环境中来解决这个问题。</p><h1 id="e75f" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">添加pg gem</h1><p id="9aa5" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">打开您的Gemfile。将sqlite3 gem移动到您的开发和测试模块中，并添加一个包含pg gem的生产组。之后，它应该看起来像这样:</p><pre class="ll lm ln lo fq lp lq lr ls aw lt dt"><span id="d08d" class="lu kj hu lq b fv lv lw l lx ly">source 'https://rubygems.org'</span><span id="e018" class="lu kj hu lq b fv lz lw l lx ly"><br/>  # Bundle edge Rails instead: gem 'rails', github: 'rails/rails'<br/>  gem 'rails', '4.2.1'<br/>  # Use SCSS for stylesheets<br/>  gem 'sass-rails', '~&gt; 5.0'<br/>  # Use Uglifier as compressor for JavaScript assets<br/>  gem 'uglifier', '&gt;= 1.3.0'<br/>  # Use CoffeeScript for .coffee assets and views<br/>  gem 'coffee-rails', '~&gt; 4.1.0'<br/>  # See <a class="ae kb" href="https://github.com/rails/execjs#readme" rel="noopener ugc nofollow" target="_blank">https://github.com/rails/execjs#readme</a> for more supported runtimes<br/>  # gem 'therubyracer', platforms: :ruby</span><span id="6593" class="lu kj hu lq b fv lz lw l lx ly">  # Use jquery as the JavaScript library<br/>  gem 'jquery-rails'<br/>  # Turbolinks makes following links in your web application faster. Read more: <a class="ae kb" href="https://github.com/rails/turbolinks" rel="noopener ugc nofollow" target="_blank">https://github.com/rails/turbolinks</a><br/>  gem 'turbolinks'<br/>  # Build JSON APIs with ease. Read more: <a class="ae kb" href="https://github.com/rails/jbuilder" rel="noopener ugc nofollow" target="_blank">https://github.com/rails/jbuilder</a><br/>  gem 'jbuilder', '~&gt; 2.0'<br/>  # bundle exec rake doc:rails generates the API under doc/api.<br/>  gem 'sdoc', '~&gt; 0.4.0', group: :doc</span><span id="33c0" class="lu kj hu lq b fv lz lw l lx ly">  # Use ActiveModel has_secure_password<br/>  # gem 'bcrypt', '~&gt; 3.1.7'</span><span id="c23a" class="lu kj hu lq b fv lz lw l lx ly">  # Use Unicorn as the app server<br/>  # gem 'unicorn'</span><span id="5f28" class="lu kj hu lq b fv lz lw l lx ly">  # Use Capistrano for deployment<br/>  # gem 'capistrano-rails', group: :development</span><span id="08a0" class="lu kj hu lq b fv lz lw l lx ly">  group :development, :test do<br/>    # Use sqlite3 as the database for Active Record<br/>    gem 'sqlite3', '~&gt; 1.3.10'</span><span id="4880" class="lu kj hu lq b fv lz lw l lx ly">    # Call 'byebug' anywhere in the code to stop execution and get a debugger console<br/>    gem 'byebug'</span><span id="295f" class="lu kj hu lq b fv lz lw l lx ly">    # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views<br/>    gem 'web-console', '~&gt; 2.0'</span><span id="d4c4" class="lu kj hu lq b fv lz lw l lx ly">    # Spring speeds up development by keeping your application running in the background. Read more: <a class="ae kb" href="https://github.com/rails/spring" rel="noopener ugc nofollow" target="_blank">https://github.com/rails/spring</a><br/>    gem 'spring'<br/>  end</span><span id="0f9a" class="lu kj hu lq b fv lz lw l lx ly">  group :production do<br/>    # Use PostgreSQL as the database for Active Record<br/>    gem 'pg', '~&gt; 0.18.1'<br/>  end</span></pre><p id="5522" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在运行<em class="ka"> $ bundle install </em>来安装gem。</p><h1 id="d38e" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">配置database.yml以使用RDS postgres</h1><p id="d26e" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">数据库凭证不应该被硬编码，而Elastic Beanstalk使得将它们设置为环境变量变得非常简单。RDS变量是自动配置和更新的，因此<em class="ka"> config/database.yml </em>的生产部分可以更新为以下内容:</p><pre class="ll lm ln lo fq lp lq lr ls aw lt dt"><span id="ffe4" class="lu kj hu lq b fv lv lw l lx ly">production:<br/>    &lt;&lt;: *default<br/>    adapter: postgresql<br/>    encoding: unicode<br/>    database: &lt;%= ENV['RDS_DB_NAME'] %&gt;<br/>    username: &lt;%= ENV['RDS_USERNAME'] %&gt;<br/>    password: &lt;%= ENV['RDS_PASSWORD'] %&gt;<br/>    host: &lt;%= ENV['RDS_HOSTNAME'] %&gt;<br/>    port: &lt;%= ENV['RDS_PORT'] %&gt;</span></pre><h1 id="cc49" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">让pg gem在弹性豆茎上工作</h1><p id="4a32" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">现在让我们将数据库添加到我们的环境中。这需要几个步骤，但我会带你走一遍。首先转到AWS控制台中的弹性豆茎部分:<a class="ae kb" href="https://console.aws.amazon.com/elasticbeanstalk/?region=us-west-2" rel="noopener ugc nofollow" target="_blank">console.aws.amazon.com/elasticbeanstalk/?region=us-west-2</a>(注意地区是us-west-2，如果您部署到不同的地区，请检查那里。)</p><figure class="ll lm ln lo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mb"><img src="../Images/ef201579bae3089aa24c999ef09c6198.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0J0qch4zSboo-MgQ.png"/></div></div></figure><p id="2609" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在点击<em class="ka"> blog-env </em>并进入左侧导航的配置。在底部，您应该会看到:</p><figure class="ll lm ln lo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mc"><img src="../Images/d6963d8349bcf25f73cc8a6e9180f425.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fIl7GDaWRGz0T3dy.png"/></div></div></figure><p id="a465" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在单击“创建新的RDS数据库”，将DB引擎设置为“postgres ”,并创建主用户名和主密码。</p><figure class="ll lm ln lo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff md"><img src="../Images/adf060db49c5d8d47550d0a179f25288.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BDSD2GQObn_zTx2P.png"/></div></div></figure><p id="6d88" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">单击“Save ”,您将拥有一个功能完整的PostgreSQL实例，并且环境变量将自动添加到您的Beanstalk环境中。</p><p id="52c1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，要在您的服务器上安装pg gem，需要使用<em class="ka"> postgresql93-devel </em> yum包。在弹性Beanstalk实例上配置包就像删除YAML格式的一样简单。配置文件放在顶层。ebextensions文件夹。</p><pre class="ll lm ln lo fq lp lq lr ls aw lt dt"><span id="2ca2" class="lu kj hu lq b fv lv lw l lx ly"># .ebextensions/packages.config<br/>  packages:<br/>    yum:<br/>      postgresql93-devel: []</span></pre><p id="9060" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在提交此更改并重新部署应用程序。</p><pre class="ll lm ln lo fq lp lq lr ls aw lt dt"><span id="5587" class="lu kj hu lq b fv lv lw l lx ly">$ git add -A &amp;&amp; git commit -am "Add PostgreSQL as production database"<br/>$ eb deploy</span></pre><p id="d1ba" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一旦完成，你就可以重新加载/posts页面，看到你的全功能postgres支持的Rails应用！万岁！</p><figure class="ll lm ln lo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/e8a24782edbf4da174c93940a401aa60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mL3jHcST_8vWjgIo.png"/></div></div></figure><figure class="ll lm ln lo fq iv"><div class="bz el l di"><div class="me mf l"/></div></figure></div></div>    
</body>
</html>