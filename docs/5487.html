<html>
<head>
<title>“Full Text Search” with SQLite</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SQLite进行“全文搜索”</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/sqlite-the-unknown-feature-edfa73a6f022?source=collection_archive---------2-----------------------#2017-07-29">https://medium.com/hackernoon/sqlite-the-unknown-feature-edfa73a6f022?source=collection_archive---------2-----------------------#2017-07-29</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/136065f8e85065cf341654fc43cf500e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fMPUMki182HzyVZvo_awDw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">SQLite Logo</figcaption></figure><p id="3fca" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">最近，我在做一个LinkedIn spy <a class="ae ke" href="https://hackernoon.com/tagged/tool" rel="noopener ugc nofollow" target="_blank">工具</a>，我使用了<a class="ae ke" href="https://www.sqlite.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv"> SQLite </strong> </a>数据库来存储数据，这个工具需要支持全文搜索功能才能应用。</p><p id="2780" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在网上搜索，我发现<a class="ae ke" href="https://hackernoon.com/tagged/sqlite" rel="noopener ugc nofollow" target="_blank"> SQLite </a>已经支持原生的全文搜索。</p><p id="fb91" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这个是通过全文搜索扩展<a class="ae ke" href="https://www.sqlite.org/fts3.html" rel="noopener ugc nofollow" target="_blank"><strong class="ji hv">FTS 3</strong></a>/<a class="ae ke" href="https://www.sqlite.org/fts3.html" rel="noopener ugc nofollow" target="_blank"><strong class="ji hv">FTS 4</strong>/</a><a class="ae ke" href="https://www.sqlite.org/fts5.html" rel="noopener ugc nofollow" target="_blank"><strong class="ji hv">ft S5</strong></a>的三次进化完成的。最初的FTS3代码是由谷歌的<a class="ae ke" href="https://www.linkedin.com/in/hessscott/" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv">斯科特·赫斯</strong> </a>贡献给SQLite项目的。</p><blockquote class="kf kg kh"><p id="3994" class="jg jh ki ji b jj jk jl jm jn jo jp jq kj js jt ju kk jw jx jy kl ka kb kc kd hn dt translated">FTS1和FTS2是SQLite的过时全文搜索模块。这些旧模块存在已知问题，应避免使用。</p></blockquote><p id="2dc7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们来玩一下这个扩展，我选择这个摩洛哥美女<a class="ae ke" href="https://en.wikipedia.org/wiki/Moroccan_riad" rel="noopener ugc nofollow" target="_blank">Riad</a><a class="ae ke" href="https://goo.gl/rhrgts" rel="noopener ugc nofollow" target="_blank"><strong class="ji hv">Riad Al mamo une</strong></a><strong class="ji hv"/>，想法是摘录一些评论，在上面搜索。</p><figure class="kn ko kp kq fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff km"><img src="../Images/69908fc4906743c13c55e1f70a04f6a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dGkj-qwgWsjDoB-wBQbW1g.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek"><a class="ae ke" href="https://goo.gl/rhrgts" rel="noopener ugc nofollow" target="_blank">Riad Al Mamoune</a> — TripAdvisor</figcaption></figure><p id="33b5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为了操作SQLite数据库，我在ubuntu中使用sqlite3命令，但是我们需要更新它，因为它不支持FTS5，所以，要更新它，请在终端上运行以下命令行:</p><pre class="kn ko kp kq fq kr ks kt ku aw kv dt"><span id="e7f7" class="kw kx hu ks b fv ky kz l la lb">sudo add-apt-repository ppa:jonathonf/backports<br/>sudo apt-get update &amp;&amp; sudo apt-get install sqlite3</span></pre><p id="ed9f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">更新后，转到您的工作区，通过运行以下命令创建SQLite数据库文件:</p><pre class="kn ko kp kq fq kr ks kt ku aw kv dt"><span id="8667" class="kw kx hu ks b fv ky kz l la lb">sqlite3 hotels_reviews.db</span></pre><p id="b8a6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，复制并粘贴这个要点上的每个SQL部分，并在sqlite3提示符下运行它，请阅读注释以了解更多信息:</p><figure class="kn ko kp kq fq iv"><div class="bz el l di"><div class="lc ld l"/></div></figure><p id="39e4" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">正确设置数据库后，现在我们可以尝试执行一些查询搜索:</p><pre class="kn ko kp kq fq kr ks kt ku aw kv dt"><span id="9744" class="kw kx hu ks b fv ky kz l la lb">SELECT rowid, review FROM hotels_reviews_index WHERE hotels_reviews_index MATCH 'review:help';</span></pre><figure class="kn ko kp kq fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff le"><img src="../Images/e7b5e9ab14c13a11da03f1ac25ab521c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N4mXb5dk2Ldfmf-9Mg-2LA.png"/></div></div></figure><p id="38d6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您也可以按相关性排序，即等级分数:</p><pre class="kn ko kp kq fq kr ks kt ku aw kv dt"><span id="6598" class="kw kx hu ks b fv ky kz l la lb">SELECT rowid, rank, review FROM hotels_reviews_index WHERE hotels_reviews_index MATCH 'review:square AND location' ORDER BY rank;</span></pre><figure class="kn ko kp kq fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff le"><img src="../Images/45a6efc2206e3700bbae6d43369d17f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vCm5HLDQWvOXGh8sLqzWug.png"/></div></div></figure><p id="e01a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">请点击以下链接查看官方文档，了解FTS5扩展支持的语法和操作符:<a class="ae ke" href="https://www.sqlite.org/fts5.html#full_text_query_syntax" rel="noopener ugc nofollow" target="_blank">https://www.sqlite.org/fts5.html#full_text_query_syntax</a></p><p id="3511" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你可以在这里阅读更多关于这个话题的内容:</p><div class="lf lg fm fo lh li"><a href="http://charlesleifer.com/blog/using-sqlite-full-text-search-with-python/" rel="noopener  ugc nofollow" target="_blank"><div class="lj ab ej"><div class="lk ab ll cl cj lm"><h2 class="bd hv fv z el ln eo ep lo er et ht dt translated">通过Python使用SQLite全文搜索</h2><div class="lp l"><h3 class="bd b fv z el ln eo ep lo er et ek translated">在这篇文章中，我将展示如何在Python中使用SQLite全文搜索(以及peewee ORM的大量帮助)。我们会…</h3></div><div class="lq l"><p class="bd b gc z el ln eo ep lo er et ek translated">charlesleifer.com</p></div></div></div></a></div><div class="lf lg fm fo lh li"><a href="http://code.runnable.com/Ur8myPOxx4hmAARP/using-full-text-search-with-python-and-sqlite-for-tutorial-beginner-sqlite3-fts-database-query-and-fts4" rel="noopener  ugc nofollow" target="_blank"><div class="lj ab ej"><div class="lk ab ll cl cj lm"><h2 class="bd hv fv z el ln eo ep lo er et ht dt translated">使用python和sqlite进行全文搜索，适用于教程、初学者、sqlite3、fts、数据库、查询…</h2><div class="lp l"><h3 class="bd b fv z el ln eo ep lo er et ek translated">使用python和sqlite对教程、初学者、sqlite3、fts、数据库、查询和fts4代码进行全文搜索…</h3></div><div class="lq l"><p class="bd b gc z el ln eo ep lo er et ek translated">code.runnable.com</p></div></div></div></a></div><h2 id="696d" class="kw kx hu bd lr ls lt lu lv lw lx ly lz jr ma mb mc jv md me mf jz mg mh mi mj dt translated">❤如果这篇文章有帮助，请点击绿色小心脏，使用下面的关注按钮来关注我！</h2><figure class="kn ko kp kq fq iv"><div class="bz el l di"><div class="mk ld l"/></div></figure></div></div>    
</body>
</html>