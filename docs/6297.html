<html>
<head>
<title>DIY Object Recognition with Raspberry Pi, Node.js, &amp; Watson Visual Recognition</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Raspberry Pi、Node.js和Watson视觉识别进行DIY对象识别</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/diy-object-recognition-with-raspberry-pi-node-js-watson-b478dfd7ce50?source=collection_archive---------5-----------------------#2017-09-12">https://medium.com/hackernoon/diy-object-recognition-with-raspberry-pi-node-js-watson-b478dfd7ce50?source=collection_archive---------5-----------------------#2017-09-12</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/b9d0d450a43237eae1a39cb2fe18e037.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-i_QZ7ivvQgsdQtRMnwciA.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">The LEGO collection which I intended to categorize using object recognition.</figcaption></figure><p id="6021" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如今一件光荣的事情是，你不必是一名人工智能研究员，也不必拥有昂贵的硬件来在你的项目中利用机器学习。</p><p id="6f75" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">当然，从长远来看，特定领域的设计会带来更大的好处。然而，直到最近，一个通用的、现成的解决方案还不容易被一般的开发人员(也就是我)使用。由于API的作用，这样一个庞然大物对于资源受限的设备来说也是不可用的。</p><p id="555d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">下面，我将向读者(就是你)介绍基于API的对象识别，以及如何用廉价的硬件和<a class="ae ke" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>实现。</p><h1 id="39db" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">树莓派零度W</h1><p id="2087" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">首先，你需要一个能上网的树莓派。</p><p id="252c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">对于这个项目来说，你能得到的最有价值的东西可能是<a class="ae ke" href="https://www.raspberrypi.org/products/raspberry-pi-zero-w/" rel="noopener ugc nofollow" target="_blank">树莓派Zero W </a>。</p><blockquote class="li lj lk"><p id="6bf6" class="jg jh ll ji b jj jk jl jm jn jo jp jq lm js jt ju ln jw jx jy lo ka kb kc kd hn dt translated">有不同的覆盆子酱吗？</p><p id="244e" class="jg jh ll ji b jj jk jl jm jn jo jp jq lm js jt ju ln jw jx jy lo ka kb kc kd hn dt translated">大多数RPi板都有摄像头接口。RPi Zero v1.3版(带摄像头接口的非WiFi版)还需要一个USB WiFi加密狗、以太网适配器或“帽子”来提供连接。</p><p id="8a22" class="jg jh ll ji b jj jk jl jm jn jo jp jq lm js jt ju ln jw jx jy lo ka kb kc kd hn dt translated">“原始的”RPi Zero，v1.2，没有摄像头接口，将无法工作。</p></blockquote><p id="35f1" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">虽然Zero速度不快，但它可以运行Linux，这使得它比普通的微控制器更强大。正如你所看到的，执行一个<a class="ae ke" href="https://hackernoon.com/tagged/nodejs" rel="noopener ugc nofollow" target="_blank"> Node.js </a>“无用脚本”是很麻烦的:</p><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="5ae0" class="ly kg hu lu b fv lz ma l mb mc">$ time node -e 'process.exit()'<br/>node -e 'process.exit()'  5.94s user 0.16s system 99% cpu 6.157 total</span></pre><p id="1d34" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">综上所述，我将<em class="ll">小心翼翼地假设</em>在基于ARMv6的单板计算机上训练<a class="ae ke" href="https://en.wikipedia.org/wiki/Convolutional_neural_network" rel="noopener ugc nofollow" target="_blank">卷积神经网络</a>是徒劳的。但这不是你买Zero W的原因，也不是你用它造任何东西的原因。这就是为什么:</p><ul class=""><li id="9e74" class="md me hu ji b jj jk jn jo jr mf jv mg jz mh kd mi mj mk ml dt translated">它是十美元。</li><li id="cc0c" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mi mj mk ml dt translated">在三个维度中，有两个维度比信用卡还小。</li><li id="bbf7" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mi mj mk ml dt translated">十(10)美元。</li><li id="f739" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mi mj mk ml dt translated">通过一些努力和更便宜的硬件，它可以通过以太网供电。</li><li id="b0be" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mi mj mk ml dt translated">它暴露GPIO引脚。发疯吧。</li><li id="c523" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mi mj mk ml dt translated">我说过是10美元吗？</li></ul><blockquote class="li lj lk"><p id="a165" class="jg jh ll ji b jj jk jl jm jn jo jp jq lm js jt ju ln jw jx jy lo ka kb kc kd hn dt translated">品牌X单板电脑怎么样？</p><p id="c0ea" class="jg jh ll ji b jj jk jl jm jn jo jp jq lm js jt ju ln jw jx jy lo ka kb kc kd hn dt translated">Node.js代码利用了<a class="ae ke" href="https://npm.im/raspicam" rel="noopener ugc nofollow" target="_blank"> raspicam </a>包，它是<code class="eh mr ms mt lu b">raspistill</code>的包装器。所以，如果它不能运行<code class="eh mr ms mt lu b">raspistill</code>，我们就不能用它来做这个教程。</p></blockquote><p id="365d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">一旦我们有了RPi，我们就需要一台摄像机。</p><h1 id="b72e" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">照相机</h1><p id="1ccb" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">基于OV5647的支持模块(“v1”；<a class="ae ke" href="https://cdn.sparkfun.com/datasheets/Dev/RaspberryPi/ov5647_full.pdf" rel="noopener ugc nofollow" target="_blank">数据表</a>)或imx 219(" v2 "；<a class="ae ke" href="http://img.filipeflop.com/files/download/Datasheet_IMX219_20140910.pdf" rel="noopener ugc nofollow" target="_blank">数据表</a>会起作用。有“官方”模块可以运行到30美元，但我见过一个来自中国的山寨“v1”大约6美元的低端。<strong class="ji hv">你不需要8MP摄像头</strong>来做这个；我们将拍摄分辨率相当低的照片。</p><p id="e8d5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这些相机配有<em class="ll">定焦</em>镜头。我发现您希望将相机放置在距离目标不小于12英寸(30.48厘米)的位置(另一个选项可能是安装变焦镜头)。我将把这作为练习留给读者，但这里是我的解决方案:</p><figure class="lp lq lr ls fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mu"><img src="../Images/f31aa339780892a4e9aa5142fe371cb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bs9U4cjOLwGBWePGVq_epw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">My jerry-rigged tripod</figcaption></figure><p id="d72f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">摄像机模块通过<a class="ae ke" href="https://en.wikipedia.org/wiki/Flexible_flat_cable" rel="noopener ugc nofollow" target="_blank">柔性扁平电缆</a>连接到<a class="ae ke" href="https://en.wikipedia.org/wiki/Zero_insertion_force" rel="noopener ugc nofollow" target="_blank"> ZIF </a>插座。RPi Zero支持宽度为11.5毫米的电缆，但<em class="ll">其他</em>接口预期宽度约为16毫米。存在适配器和转换电缆；其中一条这样的电缆与<a class="ae ke" href="https://www.raspberrypi.org/products/raspberry-pi-zero-case/" rel="noopener ugc nofollow" target="_blank">官方保护套</a>一起提供。</p><blockquote class="li lj lk"><p id="7b3e" class="jg jh ll ji b jj jk jl jm jn jo jp jq lm js jt ju ln jw jx jy lo ka kb kc kd hn dt translated">用乐高积木搭建？</p><p id="a363" class="jg jh ll ji b jj jk jl jm jn jo jp jq lm js jt ju ln jw jx jy lo ka kb kc kd hn dt translated">对于那些试图用乐高建造一个定制三脚架的人，我注意到我的“v1”相机模块的尺寸(无论如何是一维的)大约为24毫米，这相当于3L的长度，或者一个<a class="ae ke" href="https://rebrickable.com/parts/3623/plate-1-x-3/" rel="noopener ugc nofollow" target="_blank"> 3623板</a>的长度。1 x 5工艺板<a class="ae ke" href="https://rebrickable.com/parts/32124/technic-plate-1-x-5-with-smooth-ends-4-studs-and-centre-axle-hole/" rel="noopener ugc nofollow" target="_blank"> 32124 </a>和<a class="ae ke" href="https://rebrickable.com/parts/2711/technic-plate-1-x-5-with-toothed-ends-2-studs-and-center-axle-hole/" rel="noopener ugc nofollow" target="_blank"> 2711 </a>以及<a class="ae ke" href="https://rebrickable.com/parts/32028/plate-special-1-x-2-with-door-rail/" rel="noopener ugc nofollow" target="_blank"> 32028 </a>有助于将模块固定到位。</p></blockquote><p id="5076" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在我们已经有了基本的硬件，让我们安装Node.js。</p><h1 id="4ac4" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">Node.js</h1><p id="003c" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">我会假设你已经安装了拉斯宾杰西。理论上，任何基于Debian Jessie的发行版都可以工作。也许其他的也是，但是我没试过！</p><p id="b0dc" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">对于这个项目，我们使用node . js 8(7 . x版本可能支持某些命令行标志，但我没有试过)。通常，我会从<a class="ae ke" href="https://github.com/nodesource/distributions" rel="noopener ugc nofollow" target="_blank">节点源</a>获取二进制文件。但是，它们不支持ARMv6。</p><blockquote class="li lj lk"><p id="1ec8" class="jg jh ll ji b jj jk jl jm jn jo jp jq lm js jt ju ln jw jx jy lo ka kb kc kd hn dt translated">如果您使用的是RPi 3(我们需要ARMv7或更快的版本)，直接使用NodeSource的发行版，然后跳到下一节。</p></blockquote><p id="b76c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">但是对于零，你有几个选择，其中两个我可以推荐:</p><ol class=""><li id="d6dd" class="md me hu ji b jj jk jn jo jr mf jv mg jz mh kd mv mj mk ml dt translated">手动安装nodejs.org的tarball<a class="ae ke" href="https://nodejs.org/en/download/current/" rel="noopener ugc nofollow" target="_blank">；以超级用户的身份，解压缩档案并通过<code class="eh mr ms mt lu b">/usr</code>或<code class="eh mr ms mt lu b">/usr/local</code>、<em class="ll">或</em>将其解压缩</a></li><li id="cefb" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">我的首选方法:通过<a class="ae ke" href="https://github.com/creationix/nvm" rel="noopener ugc nofollow" target="_blank">节点版本管理器</a>安装。作为<em class="ll">普通用户</em>(如<code class="eh mr ms mt lu b">pi</code>)，按照现场和终端的说明安装NVM。然后，运行:<br/> <code class="eh mr ms mt lu b">$ nvm install 8<br/></code>这将在您的主目录下安装最新版本的Node.js 8，然后启用它。运行<code class="eh mr ms mt lu b">node -v</code>来测试你的安装。</li></ol><p id="f187" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">下一个难题是API密匙。</p><h1 id="c6f5" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">云</h1><p id="f04f" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">这个项目使用了IBM的<a class="ae ke" href="https://www.ibm.com/watson/services/visual-recognition/" rel="noopener ugc nofollow" target="_blank">沃森视觉识别</a>(以下简称“WVR”)。它可以从IBM的PaaS，Bluemix ( <a class="ae ke" href="https://wikipedia.org/wiki/Bluemix" rel="noopener ugc nofollow" target="_blank"> wiki </a>)中获得。</p><p id="933e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你可以使用现有的Bluemix登录，或者在这里注册<a class="ae ke" href="https://console.bluemix.net/catalog/services/visual-recognition" rel="noopener ugc nofollow" target="_blank">。登录后，从</a><a class="ae ke" href="https://console.bluemix.net/catalog/services/visual-recognition" rel="noopener ugc nofollow" target="_blank">同一个页面</a>，创建一个服务实例；随便你怎么命名。</p><p id="60ff" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">准备好之后，您将进入实例的仪表板。在这里，您可以找到您的API密钥:</p><ol class=""><li id="6fc2" class="md me hu ji b jj jk jn jo jr mf jv mg jz mh kd mv mj mk ml dt translated">单击“服务凭据”。</li><li id="7211" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">单击“操作”下的“查看凭据”。</li><li id="f48b" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">复制API密匙并粘贴到某个安全的地方(比如密码管理器应用程序)以方便使用。</li></ol><p id="d384" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">有了API密匙，让我们简短地了解一下概念。我保证这不会痛。</p><h1 id="ec12" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">概念</h1><p id="8793" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">你需要知道这些东西，否则你会被警察逮捕。</p><h2 id="de47" class="ly kg hu bd kh mw mx my kl mz na nb kp jr nc nd kt jv ne nf kx jz ng nh lb ni dt translated">班级</h2><p id="d128" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">你需要理解的最重要的概念是“类”。事实上，WVR网站上的图片很好地说明了这一点:</p><figure class="lp lq lr ls fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nj"><img src="../Images/7df0916e0d2d4fedb2f5e63a65c00077.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TIpC2f7vb5I1chAqlZ3SQg.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">An example of “classes”</figcaption></figure><p id="a8f3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在上图中，我们有五(5)个班级:</p><ol class=""><li id="e421" class="md me hu ji b jj jk jn jo jr mf jv mg jz mh kd mv mj mk ml dt translated">绿色:图像的主题是绿色</li><li id="98a5" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">树叶:图像的主题包含一片树叶</li><li id="915a" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">植物茎:受试者包含植物茎</li><li id="d258" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">药草:图像的主题是“药草”类的植物</li><li id="2b8f" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">罗勒:这个主题特别是罗勒药草</li></ol><p id="9b7d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">需要注意的是，一个类可以如你所愿的那样窄或宽。例如，<em class="ll">有许多</em>种色调的“绿色”——但只有一种植物叫做“罗勒”！</p><p id="a419" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">虽然WVR有一些现成的类，但我们的目标是<em class="ll">创建我们自己的定制类</em>。</p><p id="e374" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为此，我们需要创建一个<em class="ll">分类器</em>。</p><h2 id="24e8" class="ly kg hu bd kh mw mx my kl mz na nb kp jr nc nd kt jv ne nf kx jz ng nh lb ni dt translated">分类器</h2><p id="c77d" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">“分类器”可以被认为是类的逻辑<em class="ll">集合</em>。例如，假设你有四个朋友和家人，你想让他们认出你的面孔。每个个体可以对应一个“类”:</p><ol class=""><li id="f06a" class="md me hu ji b jj jk jn jo jr mf jv mg jz mh kd mv mj mk ml dt translated">斯尼姆叔叔</li><li id="8aab" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">巴特斯阿姨</li><li id="8535" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">湿冷妹妹</li><li id="736a" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">账单</li></ol><p id="18bd" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">分类器可以是“朋友和家人的脸”，或者类似的东西。也许您可以向这个分类器添加另一个类，它只是“family”——您可以重用相同的图像。</p><p id="0496" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">除此之外，WVR允许在你的分类器中有一个<em class="ll">单独的</em>特殊类来表示不在分类器中的<em class="ll">图像。例如，你可以把随机的陌生人(或你的敌人)的图片放在这个“负面”类别中。这有助于底层网络避免误报。</em></p><blockquote class="li lj lk"><p id="77ea" class="jg jh ll ji b jj jk jl jm jn jo jp jq lm js jt ju ln jw jx jy lo ka kb kc kd hn dt translated">如果你在这个项目中没有敌人，我可以提供一些如何获得他们的建议。我将把它留到以后的文章中。</p></blockquote><p id="41b6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">分类器的更多使用案例包括:</p><ul class=""><li id="ee32" class="md me hu ji b jj jk jn jo jr mf jv mg jz mh kd mi mj mk ml dt translated">通过限制WVR比较图像的类别范围，我们增加了良好匹配的可能性</li><li id="2700" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mi mj mk ml dt translated">类似地，如果我们知道我们的图片不会在分类器<em class="ll"> X </em>中，那么我们不需要使用分类器<em class="ll"> X </em>进行分类</li><li id="0bab" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mi mj mk ml dt translated">限制范围将会提高性能(虽然我不知道提高多少——但是似乎是合理的！)</li></ul><p id="b464" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">那么，我们如何创建类和分类器呢？</p><h1 id="5153" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">训练制度</h1><p id="a40e" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">当我们创建一个类时，我们给WVR一个图像档案(一个<code class="eh mr ms mt lu b">.zip</code>文件)。这些图像是阶级成员的正面例子。一旦这个档案被上传，培训的过程就开始了。训练是一个在“机器学习”中“学习”的过程。根据存档中图像的数量，这可能需要一点时间(对于少量图像，大约需要几分钟)。</p><blockquote class="li lj lk"><p id="9aae" class="jg jh ll ji b jj jk jl jm jn jo jp jq lm js jt ju ln jw jx jy lo ka kb kc kd hn dt translated">请记住，您还可以为您的新分类器提供一个额外的、单一的<code class="eh mr ms mt lu b">.zip</code>负面示例档案。</p></blockquote><p id="5ad4" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">换句话说，在WVR，<em class="ll">创建</em>一个分类器的动作意味着<em class="ll">也训练</em>它。</p><p id="5578" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在为了回报。一旦我们训练了一个分类器，我们就可以对图像进行分类了！</p><h1 id="20c2" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">分类</h1><p id="dc41" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated"><em class="ll">分类</em>是向分类器提供WVR <em class="ll">一个或多个图像</em>的动作，并且接收关于每个图像可能“属于”其类别的程度的信息。</p><p id="e21d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">对于每张图片，WVR会给你零个或多个等级，分数在0到1之间。这个分数代表<em class="ll">置信度</em>，而不是<em class="ll">准确度</em>。然后，对于一些分类器来说，<em class="ll"> 0.6 </em>的类<em class="ll"> X </em>的置信度可以暗示“类<em class="ll"> X </em>的成员”，但是对于其他分类器来说，它可以完全取消图像的资格。</p><blockquote class="li lj lk"><p id="2ac5" class="jg jh ll ji b jj jk jl jm jn jo jp jq lm js jt ju ln jw jx jy lo ka kb kc kd hn dt translated">如果WVR的信心低于某个阈值，它将根本不会返回一个数字。该阈值是可配置的；默认值为0.5。如果你只使用10-50张图片，你可以把它降到0.3-0.4。</p></blockquote><p id="8737" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们回顾一下我们需要知道的四个术语:</p><ul class=""><li id="5643" class="md me hu ji b jj jk jn jo jr mf jv mg jz mh kd mi mj mk ml dt translated"><strong class="ji hv">类</strong>:一组具有我们想要识别的共同属性的图像</li><li id="5cc2" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mi mj mk ml dt translated"><strong class="ji hv">分类器</strong>:类的逻辑集合</li><li id="7e41" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mi mj mk ml dt translated"><strong class="ji hv">分类</strong>:通过报告置信度，使用WVR来决定任意图像可以“属于”哪一类</li><li id="3132" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mi mj mk ml dt translated"><strong class="ji hv">培训</strong>:在WVR，我们培训一名分类员；我们向服务提供图像，然后用于分类</li></ul><p id="6dad" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你会创造什么样的量词？等等——在你回答之前——让我给你泼冷水。我会告诉你我想做什么，直到现实发生。聚集在一起哭泣，我来讲述我自己的悲惨故事！</p><h1 id="270f" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">悲哀的故事</h1><p id="d76c" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">我喜欢乐高。受Jacques Mattheij的<a class="ae ke" href="https://jacquesmattheij.com/sorting-two-metric-tons-of-lego" rel="noopener ugc nofollow" target="_blank">乐高分类项目</a>的启发，我想看看我是否可以轻松地为不同类别的乐高积木建立一个准确的分类器。例如，我能认出“盘子”吗？</p><figure class="lp lq lr ls fq iv fe ff paragraph-image"><div class="fe ff nk"><img src="../Images/289e213906200d6ed32476528431016e.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*hnfB9jvCHXNnawOpnL-vPw.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">A LEGO “plate”</figcaption></figure><p id="cb7d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">相对于"砖块"？</p><figure class="lp lq lr ls fq iv fe ff paragraph-image"><div class="fe ff nk"><img src="../Images/304ce1557a4e2039dadf9425f41ee177.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*n1WWn4Yqg0DQOmrj9ipDRQ.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">A LEGO “brick”</figcaption></figure><p id="9a90" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我可以这样做吗？不，当然不是。冗长的回答:</p><p id="a0e6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">一旦我有了工具的工作概念模型(见下文)，我就拍了许多乐高积木、盘子等的照片。它们看起来像这样:</p><figure class="lp lq lr ls fq iv fe ff paragraph-image"><div class="fe ff nl"><img src="../Images/a69e7bef72c31420002e4ca574d059d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*hLPTbruF-TRxHHyLqFyawQ.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">A blurry image of a red 3666 plate on a background of white paper</figcaption></figure><p id="fa82" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">但是分类效果不佳。我尝试了很多不同的东西，比如去掉颜色信息，改变背景:</p><figure class="lp lq lr ls fq iv fe ff paragraph-image"><div class="fe ff nl"><img src="../Images/d4e489f047150a660448759910fa2ea5.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*y7YmOVNbQ_F4lOves3QVxQ.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">A greyscale image of a red 3623 plate on a background of corrugated cardboard</figcaption></figure><p id="fa3e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">或者摆弄色温:</p><figure class="lp lq lr ls fq iv fe ff paragraph-image"><div class="fe ff nm"><img src="../Images/8699e8258e04e44a9fcfe4d5d6881c55.png" data-original-src="https://miro.medium.com/v2/resize:fit:856/format:webp/1*Rd2sylipDuhbjlm9RXf_yA.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">I don’t know what the hell I did here. But it’s a red 4477 plate.</figcaption></figure><p id="0385" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">令人心碎的失败。每一个。时间。</p><p id="e719" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我做的一件事是保持较低的分辨率——高分辨率图像不一定会得到更好的结果！事实上，往往相反:更高分辨率的图像将潜在地包含<em class="ll">不必要的细节层次</em>，导致<em class="ll">额外的无用信息</em>。</p><p id="1975" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">像往常一样，我琢磨着“无用的信息”。</p><p id="3ce5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">看前面的图像。其分辨率为428x290相乘，我们得到<code class="eh mr ms mt lu b">124120</code>个像素。如果我们稍微旋转它，然后向下裁剪相关信息，我们会得到下图:</p><figure class="lp lq lr ls fq iv fe ff paragraph-image"><div class="fe ff nm"><img src="../Images/52c3a38004df84eacc69bfdda1b0e46e.png" data-original-src="https://miro.medium.com/v2/resize:fit:856/format:webp/1*fzaKSHtvS7uQAxGDAHbFGg.png"/></div></figure><p id="8e6b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">也就是20x202或者说<code class="eh mr ms mt lu b">4040</code>像素。所以:</p><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="c376" class="ly kg hu lu b fv lz ma l mb mc">4040 / 124120 = ~0.0325<br/>0.0325 * 100 = ~3.25</span></pre><p id="9aeb" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这意味着我拍摄的照片中有3%多一点包含相关信息。由此可见，每张照片的97%都是无用的、浪费的垃圾像素。</p><p id="9598" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">记住，RPi相机是定焦的。如果我有一个更好的相机或/和微距镜头，我可能已经完成了这项工作。<em class="ll">唉！</em></p><p id="cf37" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">乐高玩具太小了。我需要更大的东西；一些不太重要的细节。</p><p id="855b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我扫视了一下房间。在大约12英寸远的地方拍照，什么尺寸合适？也许是厨房用具？杯子？那似乎很无聊。后悔？我有很多什么……(我意识到你回答不了这个)？</p><p id="ab4e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">也许你身边有一些这样的东西:</p><figure class="lp lq lr ls fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nn"><img src="../Images/e5ea43dd9849a03b45afc08f7b764314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aDoyk4taQtF3c_-AQmPTIQ.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Your friendly neighborhood AC adapter</figcaption></figure><h1 id="8805" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">墙疣！</h1><p id="8e1d" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">如果你对电子产品感兴趣，你可能真的会<em class="ll">收集</em> <a class="ae ke" href="https://wikipedia.org/wiki/AC_adapter" rel="noopener ugc nofollow" target="_blank">墙疣</a>。我有…一些额外的东西。</p><figure class="lp lq lr ls fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nn"><img src="../Images/ef55a7da17fbbb8e107c87850c4f90c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U_mJEpsMyb8F2FG1hrJIbA.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Some of my wall warts in a fish-eye style</figcaption></figure><p id="5da3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你可能手头没有，比如说，20或30个这样的东西(不需要，你知道，拔掉插头)。但是我愿意。如果你能放下你的嫉妒，你会注意到信噪比显著提高:</p><figure class="lp lq lr ls fq iv fe ff paragraph-image"><div class="fe ff no"><img src="../Images/df3b97cb98e63821f539496ecb7c451f.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*c1LcSawOIhoNXyQQKPnADQ.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">A blurry picture of a wall wart</figcaption></figure><p id="06ca" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">图像仍然有点模糊，但这没关系——我们没有试图阅读小字。</p><p id="a079" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">此外，为一个“反面例子”类扫描相似大小的对象几乎是令人愉快的:</p><figure class="lp lq lr ls fq iv fe ff paragraph-image"><div class="fe ff np"><img src="../Images/3695c19ed0b33d2d9677a0316b1369c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*RWLee6Sj-cyqZfqeKcinNQ.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">This is not an advertisement for Scotch double-sided tape, though it is good tape.</figcaption></figure><p id="a423" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我选定了640x480的分辨率，并选择丢弃颜色信息。如果你想自己尝试的话，可以在这篇文章的末尾找到我的班级档案的链接。</p><blockquote class="li lj lk"><p id="0b97" class="jg jh ll ji b jj jk jl jm jn jo jp jq lm js jt ju ln jw jx jy lo ka kb kc kd hn dt translated">鉴于壁疣通常是黑色的，如果我保留颜色数据，可能会有更好的结果？？？</p></blockquote><p id="11a5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我可以为你自己拍快照提供一些一般性的建议:</p><ol class=""><li id="02f4" class="md me hu ji b jj jk jn jo jr mf jv mg jz mh kd mv mj mk ml dt translated">保持较高的信噪比；不要包含不必要的像素！</li><li id="b46a" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">色温、阴影、照明——越不一致，你需要的图像就越多。</li><li id="a854" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">不要太担心模糊性</li><li id="c4cf" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">考虑物体的不同位置和角度</li><li id="e3bf" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">每节课50张图片或更多。WVR的下限是10 %,但50是绝对的最低建议！</li><li id="93af" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">即使是“低”置信水平也能在实践中发挥作用。调整你的门槛；只要网络比你预期的更加自信，那么你就做得很好！</li></ol><p id="b884" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为了帮助我:</p><ol class=""><li id="c346" class="md me hu ji b jj jk jn jo jr mf jv mg jz mh kd mv mj mk ml dt translated">拍下所有这些照片，</li><li id="4b1e" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">把它们放在正确的桶里，</li><li id="9082" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">将它们归档，然后</li><li id="886a" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">上传给沃森，</li></ol><p id="5a8f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">最后我写了一个工具。那个工具叫做<a class="ae ke" href="https://npm.im/puddlenuts" rel="noopener ugc nofollow" target="_blank">螺丝起子</a>。不，真的。</p><h1 id="6bb0" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">介绍puddlenuts</h1><p id="3f58" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated"><a class="ae ke" href="https://npm.im/puddlenuts" rel="noopener ugc nofollow" target="_blank"> puddlenuts </a>是我为了缓解<em class="ll">拍摄数百张照片</em>的难以忍受的过程而写的。</p><blockquote class="li lj lk"><p id="8e5d" class="jg jh ll ji b jj jk jl jm jn jo jp jq lm js jt ju ln jw jx jy lo ka kb kc kd hn dt translated">别害怕。你不需要一次都吃！您可以随时在以后向课程中添加更多图像。这叫做再培训。可以帮上忙。</p></blockquote><p id="a098" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">此时，您应该已经配置了RPi，安装了Node.js并连接了camera。如果你没有，你有什么问题？</p><p id="2a53" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在你的RPi上，安装<code class="eh mr ms mt lu b">puddlenuts</code>，然后一边等一边去割草:</p><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="66d9" class="ly kg hu lu b fv lz ma l mb mc"># this may require `sudo` if you aren't using NVM<br/>$ npm install --global puddlenuts<br/>- [ ] # ... time passes ...<br/>+ puddlenuts@0.2.4<br/>added 245 packages in 488.451s</span></pre><p id="58e9" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh mr ms mt lu b">puddlenuts</code>不是图书馆；这是一个命令行工具。它能做什么？</p><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="5baa" class="ly kg hu lu b fv lz ma l mb mc">$ puddlenuts --help<br/><br/>Commands:<br/>  classify [..classifier]         Classify an image against one<br/>                                  or more classifiers by a<br/>                                  snapshot or existingimage.<br/>                                  Default is to run against all<br/>                                  classifiers.<br/>  shoot &lt;classifier&gt; &lt;classes..&gt;  Take snapshots to train<br/>                                  classifier with two (2) or<br/>                                  more positive example classes,<br/>                                  OR one (1) or more positive<br/>                                  example classes, and one (1)<br/>                                  negative example class (see<br/>                                  "-n")<br/>  train &lt;classifier&gt;              Train Watson with existing<br/>                                  .zip archives<br/><br/>IO<br/>  --color     Enable color output, if available<br/>                                       [boolean] [default: true]<br/>  --loglevel  Logging level<br/>  [choices: "error", "warn", "info", "debug", "silly"] [default:<br/>                                                         "info"]<br/>  --debug     Shortcut for '--loglevel debug'<br/>                                      [boolean] [default: false]<br/><br/>Watson<br/>  --api-key  Set PUDDLENUTS_API_KEY env var instead!<br/>                                             [string] [required]<br/><br/>Options:<br/>  --help  Show help                                    [boolean]</span></pre><p id="79ea" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们要拍照，所以<code class="eh mr ms mt lu b">shoot</code>就是我们要的命令。</p><h2 id="2a89" class="ly kg hu bd kh mw mx my kl mz na nb kp jr nc nd kt jv ne nf kx jz ng nh lb ni dt translated">拍摄</h2><p id="467e" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">以下是<code class="eh mr ms mt lu b">shoot</code>的丑闻:</p><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="7985" class="ly kg hu lu b fv lz ma l mb mc">$ puddlenuts shoot --help<br/>puddlenuts shoot &lt;classifier&gt; &lt;classes..&gt;<br/><br/>Camera control<br/>  --raspistill, -r   Options for raspistill in dot notation<br/>                     (e.g. "-r.width 640 -r.height 480")<br/>                                                       [default:<br/>           {"width":640,"height":480,"quality":100,"timeout":1}]<br/>  --limit, -l        Limit to this many snapshots per class<br/>                                          [number] [default: 50]<br/>  --delay, -d        Delay between snapshots in ms<br/>                                   [number] [default: 3000 (3s)]<br/>  --class-delay, -D  Delay between classes in ms<br/>                                 [number] [default: 10000 (10s)]<br/>  --trigger, -t      Set trigger interrupt on this GPIO pin (RPi<br/>                     only)        [number] [default: No trigger]<br/><br/>Watson<br/>  --api-key  Set PUDDLENUTS_API_KEY env var instead!<br/>                                             [string] [required]<br/>  --retrain  Retrain classifier (if exists)<br/>                                      [boolean] [default: false]<br/>  --dry-run  Don't actually upload anything<br/>                                      [boolean] [default: false]<br/><br/>Class<br/>  --negative, -n  Include negative example class in training<br/>                  (will be final class)<br/>                                      [boolean] [default: false]<br/><br/>IO<br/>  --color     Enable color output, if available<br/>                                       [boolean] [default: true]<br/>  --loglevel  Logging level<br/>  [choices: "error", "warn", "info", "debug", "silly"] [default:<br/>                                                         "info"]<br/>  --debug     Shortcut for '--loglevel debug'<br/>                                      [boolean] [default: false]<br/><br/>Options:<br/>  --help  Show help                                    [boolean]<br/><br/>Examples:<br/>  blueface/bin/puddlenuts.js shoot  Take snapshots to train or<br/>  dogs poodles -n --retrain         retrain the "dogs"<br/>                                    classifier, with a positive<br/>                                    example set of "poodles" and<br/>                                    a negative example set (i.e.<br/>                                    non-dogs); upload to Watson<br/>  blueface/bin/puddlenuts.js shoot  Take snapshots to train (do<br/>  fish catfish swordfish --dry-run  not retrain if "fish"<br/>                                    exists") the "fish"<br/>                                    classifier with positive<br/>                                    examples of "catfish" and<br/>                                    "swordfish"; don't upload</span></pre><p id="e818" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">“摄像机控制”选项将允许您对<a class="ae ke" href="https://www.raspberrypi.org/documentation/usage/camera/raspicam/raspistill.md" rel="noopener ugc nofollow" target="_blank"> raspistill </a>进行精细控制，这是RPi摄像机的官方命令行界面。这就是你如何改变分辨率，摆弄颜色校正，愚蠢的效果，等等。</p><p id="0999" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这些选项还允许您定义<em class="ll">拍摄多少张照片</em>和<em class="ll">多快拍摄</em>。每张照片拍完之后，都会有短暂的停顿。我发现图片之间不到三秒的延迟(<code class="eh mr ms mt lu b">--delay</code>)不足以让你舒服地将一个对象切换到另一个对象，或者重新调整，所以这是默认设置。</p><p id="69e2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">既然你告诉<code class="eh mr ms mt lu b">puddlenuts</code>为多个类拍摄快照，你也可以告诉它从一个类的最后一张图片切换到下一个类的第一张图片之间暂停多长时间。当类改变时，我花了一点时间来设置(例如，将我的一堆墙疣换成一堆随机的、非墙疣的对象)——这默认为十(10)秒。</p><p id="3758" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">最后，<code class="eh mr ms mt lu b">--limit</code>将限制每个类的图片数量(最少10张)。</p><blockquote class="li lj lk"><p id="2987" class="jg jh ll ji b jj jk jl jm jn jo jp jq lm js jt ju ln jw jx jy lo ka kb kc kd hn dt translated"><code class="eh mr ms mt lu b">--trigger</code>选项允许您将交换机连接到RPi的一个GPIOs。如果GPIO为“高”，将拍摄快照(有指定的延迟)。但是如果是“低”，那么<code class="eh mr ms mt lu b">puddlenuts</code>会暂停，直到你再次将开关扳回到“高”。整洁！</p></blockquote><p id="4ac6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我意识到第一个例子可能会给我带来一些意想不到的搜索引擎流量，但是我们开始吧:</p><pre class="lp lq lr ls fq lt lu lv lw aw lx dt"><span id="7420" class="ly kg hu lu b fv lz ma l mb mc">$ puddlenuts shoot dogs poodles --negative --retrain</span></pre><p id="5e52" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">但是上面的命令将要做的是，非常详细地说:</p><ol class=""><li id="c17e" class="md me hu ji b jj jk jn jo jr mf jv mg jz mh kd mv mj mk ml dt translated">给“狮子狗”拍50张照片，每张之间有3秒钟的延迟</li><li id="0e57" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">暂停10秒钟</li><li id="c750" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">拍50张“不是狗”的照片，每张之间有3秒钟的延迟</li><li id="c394" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">为每组50个创建<code class="eh mr ms mt lu b">.zip</code>档案</li><li id="8eca" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">如果“dogs”分类器不存在，就会被创建</li><li id="46b6" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">如果“狮子狗”类不存在，它会被创建/训练</li><li id="31a7" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">如果“贵宾犬”类别<em class="ll">存在</em>，这50张图片将用于更多的训练</li><li id="6e4f" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">如果“反面例子”(“不是狗”)类不存在，它会被创建/训练</li><li id="adbc" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mv mj mk ml dt translated">如果“负样本”类别<em class="ll">存在</em>，则50幅图像用于更多训练</li></ol><p id="754a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在这种情况下，您还会看到大量漂亮的控制台输出。</p><p id="2e85" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这里当然有改进的空间；尝试一下<a class="ae ke" href="https://github.com/boneskull/puddlenuts/issues/new" rel="noopener ugc nofollow" target="_blank">让我知道什么会更简单</a>。</p><figure class="lp lq lr ls fq iv"><div class="bz el l di"><div class="nq nr l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Here’s a time-lapse of me taking a bunch of pictures using puddlenuts.</figcaption></figure><h2 id="b8c7" class="ly kg hu bd kh mw mx my kl mz na nb kp jr nc nd kt jv ne nf kx jz ng nh lb ni dt translated">火车</h2><p id="d956" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">执行<code class="eh mr ms mt lu b">puddlenuts train --help</code>以获得更多信息，因为我意识到在这里复制和粘贴输出是愚蠢的。</p><p id="fe8f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh mr ms mt lu b">train</code>命令允许您使用现有的<code class="eh mr ms mt lu b">.zip</code>档案创建(或重新训练)课程。<strong class="ji hv">它不拍照</strong>。</p><p id="60bc" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">例如，如果你不得不拼凑几个“拍摄”运行(使用<code class="eh mr ms mt lu b">puddlenuts shoot --dry-run</code>创建<code class="eh mr ms mt lu b">.zip</code>文件w/o上传；位置见日志输出)，或者需要通过其他方式采集一些图像，应该使用<code class="eh mr ms mt lu b">puddlenuts train</code>。</p><h2 id="7b7e" class="ly kg hu bd kh mw mx my kl mz na nb kp jr nc nd kt jv ne nf kx jz ng nh lb ni dt translated">分类</h2><p id="8564" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">这是一个“有趣”的命令——它将拍摄一张照片，并尝试根据您提供的分类器对其进行分类。</p><p id="675b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果<em class="ll">没有</em>提供分类器，图像将与<em class="ll">所有</em>分类器进行比较。Watson提供了一个“默认”的分类器，可能会有用—试试看吧。</p><p id="6ec7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">另外两个值得注意的选项:</p><ul class=""><li id="443d" class="md me hu ji b jj jk jn jo jr mf jv mg jz mh kd mi mj mk ml dt translated">你也可以告诉<code class="eh mr ms mt lu b">puddlenuts classify</code>只上传一个文件(通过<code class="eh mr ms mt lu b">--input &lt;path/to/file&gt;</code>选项)而不是拍照。</li><li id="2eda" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mi mj mk ml dt translated">您可以使用<code class="eh mr ms mt lu b">--threshold &lt;number between 0 and 1 inclusive&gt;</code>指定置信度阈值。你<em class="ll">可能</em>不想把这个设置为<code class="eh mr ms mt lu b">0</code>或者<code class="eh mr ms mt lu b">1</code>，因为前者会给你太多的信息，而后者会给你<em class="ll">一点点的蹲</em>。</li></ul><p id="c9a5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这个命令提供了一个带有分类信息的漂亮的数据结构。这是一棵笨重的树，我不确定如何更好地提炼和/或表现它。所以你只能去拉屎。你必须承认，这真的是你应得的。不管怎样，如果你有更好的主意，请告诉我。</p><p id="23c4" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">对于结论，我们就此打住。</p><h1 id="29d9" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">结论</h1><p id="ee38" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">一个ML API的新手用户可能会在一个系统没有做你所期望的事情时出错或变得沮丧。你必须记住，将这种力量降低到“我们”的水平会带来警告。这些收缩包装解决方案所能提供的有局限性，但是只要坚持下去，我相信这些技术会被广泛应用。</p><p id="ba08" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我希望你能从我的错误中吸取教训(我也希望我能从中吸取教训)。总的来说，这比我想象的要容易得多。而且更便宜。用更少的<em class="ll">做更多的<em class="ll">(T3 )(计算机视觉)( 10美元一台计算机)是微不足道的。</em></em></p><p id="e0e8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我的预测是这种趋势将继续下去。在未来的帖子中，我将解释如何几乎什么都不用做。</p><h1 id="a836" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">附录</h1><p id="9428" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">下面是我用于“疣墙”分类器的图像链接。只有两个类别:</p><ul class=""><li id="79e5" class="md me hu ji b jj jk jn jo jr mf jv mg jz mh kd mi mj mk ml dt translated"><a class="ae ke" href="https://www.dropbox.com/s/3wltzy6cgd5013l/wall-warts.zip?dl=1" rel="noopener ugc nofollow" target="_blank">阳性例子(直接下载)</a>(疣壁)</li><li id="2ae2" class="md me hu ji b jj mm jn mn jr mo jv mp jz mq kd mi mj mk ml dt translated"><a class="ae ke" href="https://www.dropbox.com/s/4luwxw13ph4jh16/not-wall-warts.zip?dl=1" rel="noopener ugc nofollow" target="_blank">阴性例题(直接下载)</a>(非墙疣)</li></ul><p id="6e73" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这是我与2017年8月22日在俄勒冈州波特兰市举行的物联网会议上所做的一次演讲相关的幻灯片。</p><p id="ac9d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="ll">本帖原为</em> <a class="ae ke" href="https://boneskull.com/diy-object-recognition" rel="noopener ugc nofollow" target="_blank"> <em class="ll">号，于2017年9月12日出现在boneskull.com</em></a><em class="ll">号上。</em></p><figure class="lp lq lr ls fq iv"><div class="bz el l di"><div class="ns nr l"/></div></figure></div></div>    
</body>
</html>