<html>
<head>
<title>An Intro to CSS in JS with DIO</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">DIO的JS中的CSS介绍</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/an-intro-to-css-in-js-with-dio-b6f4e81a4a9d?source=collection_archive---------2-----------------------#2016-11-17">https://medium.com/hackernoon/an-intro-to-css-in-js-with-dio-b6f4e81a4a9d?source=collection_archive---------2-----------------------#2016-11-17</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><pre class="ir is it iu fq iv iw ix iy aw iz dt"><span id="0faf" class="ja jb hu iw b fv jc jd l je jf">function Hello () {<br/>    return {<br/>        render () {<br/>           return h('h1', 'Hello World')<br/>        },<br/>        stylesheet () {<br/>           return `&amp; { color:brown; font-size:40px; }`<br/>        }<br/>    }<br/>}</span><span id="b650" class="ja jb hu iw b fv jg jd l je jf">dio.render(Hello)</span><span id="6f89" class="ja jb hu iw b fv jg jd l je jf">// <a class="ae jh" href="http://jsbin.com/dolozi/edit?js,output" rel="noopener ugc nofollow" target="_blank">http://jsbin.com/dolozi/edit?js,output</a></span></pre><p id="8290" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">DIO[1]是一个10kb的框架，很像<a class="ae jh" href="https://hackernoon.com/tagged/react" rel="noopener ugc nofollow" target="_blank">反应</a>，尽管从前它是6kb，每增加一个<a class="ae jh" href="https://hackernoon.com/tagged/kilobyte" rel="noopener ugc nofollow" target="_blank">千字节</a>都是一个拖轮，因为一方面我希望框架足够小，以避免页面权重所面临的问题，另一方面我希望允许组件可以与紧密耦合的css一起发布。</p><p id="ecff" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">所以两个星期前，我得出结论，如果这是可行的，我可能需要解析css，因为认为你可以用正则表达式编写css解析器是天真的，对吗？提示:如果你用javascript写一个解析器`. charCodeAt `是你的朋友(比较数字很快)。现在，` stylesheet()'背后的思想类似于` render()'方法背后的思想，一个返回虚拟节点，另一个返回字符串。</p><p id="2356" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">因此给出如下</p><pre class="ir is it iu fq iv iw ix iy aw iz dt"><span id="d628" class="ja jb hu iw b fv jc jd l je jf">stylesheet () {<br/>    return `&amp;{ color:brown; font-size:40px; }`<br/>}</span></pre><p id="e00c" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">这与神秘相去甚远，但下面是你期望DIO产生的结果。</p><pre class="ir is it iu fq iv iw ix iy aw iz dt"><span id="46a3" class="ja jb hu iw b fv jc jd l je jf">[scope=Hellojfird]{color:brown;font-size:40px;}</span></pre><p id="13fb" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">这个生成的css被缓存以供扩展这个组件的所有实例使用，尽管出于性能原因，这个过程与正常的虚拟DOM diff协调是分离的。</p><h1 id="7af0" class="kg jb hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">包装</h1><p id="cba1" class="pw-post-body-paragraph ji jj hu jk b jl ld jn jo jp le jr js jt lf jv jw jx lg jz ka kb lh kd ke kf hn dt translated">尽管css中的一切都是全局的，除非明确声明，否则我们希望编写下面的代码，而不必用id和类过滤它，然后我们将不得不手动附加到我们的组件并跟踪命名冲突。</p><pre class="ir is it iu fq iv iw ix iy aw iz dt"><span id="bb5f" class="ja jb hu iw b fv jc jd l je jf">stylesheet () {<br/>    return `<br/>        <a class="ae jh" href="http://twitter.com/keyframes" rel="noopener ugc nofollow" target="_blank">@keyframes</a> slideIn { <br/>            from { transform: translate(0px); } <br/>            50% { transform: translate(200px); } <br/>            100% { transform: translate(0px); } <br/>        }<br/> <br/>        <a class="ae jh" href="http://twitter.com/media" rel="noopener ugc nofollow" target="_blank">@media</a> (max-width: 600px) { <br/>            &amp; { color: red ; } <br/>        }<br/>        <br/>        &amp; { animation: slideIn 3s ease infinite; }<br/>   '<br/>}</span><span id="5ee4" class="ja jb hu iw b fv jg jd l je jf">// <a class="ae jh" href="http://jsbin.com/mozefe/1/edit?js,output" rel="noopener ugc nofollow" target="_blank">http://jsbin.com/mozefe/1/edit?js,output</a> (playground)</span></pre><p id="9361" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">在幕后，DIO制作了以下内容</p><pre class="ir is it iu fq iv iw ix iy aw iz dt"><span id="c3e7" class="ja jb hu iw b fv jc jd l je jf">@keyframes HellojfirdslideIn {...}<br/>@-webkit-keyframes HellojfirdslideIn {...}</span><span id="d8bb" class="ja jb hu iw b fv jg jd l je jf">@media (max-width: 600px) {<br/>    [scope=Hellojfird] { color: red; }<br/>}</span><span id="77f6" class="ja jb hu iw b fv jg jd l je jf">[scope=Hellojfird] { <br/>    animation: HellojfirdslideIn 3s ease infinite;<br/>    -webkit-animation: HellojfirdslideIn 3s ease infinite;<br/>}</span></pre><p id="c1ef" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">创建一个样式元素，并将有点模糊的属性“[ scope = hello fird]”附加到相应的组件dom节点。</p></div><div class="ab cl li lj hc lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hn ho hp hq hr"><p id="8040" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">[1]https://github.com/thysultan/dio.js<a class="ae jh" href="https://github.com/thysultan/dio.js" rel="noopener ugc nofollow" target="_blank"/></p><blockquote class="lp lq lr"><p id="161f" class="ji jj ls jk b jl jm jn jo jp jq jr js lt ju jv jw lu jy jz ka lv kc kd ke kf hn dt translated"><a class="ae jh" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客如何开始他们的下午。我们是<a class="ae jh" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jh" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jh" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ji jj ls jk b jl jm jn jo jp jq jr js lt ju jv jw lu jy jz ka lv kc kd ke kf hn dt translated">要了解更多信息，请<a class="ae jh" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">阅读我们的“关于”页面</a>、<a class="ae jh" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书上给我们点赞/发消息</a>，或者简单地说，<a class="ae jh" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ji jj ls jk b jl jm jn jo jp jq jr js lt ju jv jw lu jy jz ka lv kc kd ke kf hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jh" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jh" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="ir is it iu fq lw"><div class="bz el l di"><div class="lx ly l"/></div></figure></div></div>    
</body>
</html>