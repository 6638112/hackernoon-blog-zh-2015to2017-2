<html>
<head>
<title>Getting rid of Docker plain text credentials</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">摆脱Docker纯文本凭证</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/getting-rid-of-docker-plain-text-credentials-88309e07640d?source=collection_archive---------3-----------------------#2017-03-08">https://medium.com/hackernoon/getting-rid-of-docker-plain-text-credentials-88309e07640d?source=collection_archive---------3-----------------------#2017-03-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="dbf5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可能没有意识到，但是<a class="ae jp" href="https://hackernoon.com/tagged/docker" rel="noopener ugc nofollow" target="_blank"> docker </a>引擎将您与<code class="eh jq jr js jt b">docker login</code>一起使用的凭证以纯文本形式存储在一个名为<code class="eh jq jr js jt b">$HOME/.docker/config.json</code>的文件中。好吧，当然，它不是ASCII，它是base64，乍一看可能像加密，<strong class="it hv">但它不是</strong>。Base64是一种编码方案，不是加密方案。您可以简单地复制base64字符串，并在几秒钟内将其转换为ASCII。</p><h2 id="0a30" class="ju jv hu bd jw jx jy jz ka kb kc kd ke jc kf kg kh jg ki kj kk jk kl km kn ko dt translated">天哪，我非常担心我的密码的保密性，我该怎么办？</h2><p id="abc2" class="pw-post-body-paragraph ir is hu it b iu kp iw ix iy kq ja jb jc kr je jf jg ks ji jj jk kt jm jn jo hn dt translated">很高兴你问了。谢天谢地，docker提供了<a class="ae jp" href="https://github.com/docker/docker-credential-helpers" rel="noopener ugc nofollow" target="_blank">凭证助手</a>，它将使用你的操作系统的本地<a class="ae jp" href="https://hackernoon.com/tagged/credential" rel="noopener ugc nofollow" target="_blank">凭证</a>存储，而不是<code class="eh jq jr js jt b">config.json</code>。</p><p id="2c99" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">从<a class="ae jp" href="https://github.com/docker/docker-credential-helpers/releases" rel="noopener ugc nofollow" target="_blank"> Github </a>和<strong class="it hv">下载包含您的操作系统助手的</strong>档案，解压到</strong>T3。不要忘记<strong class="it hv">使其可执行</strong>。</p><p id="e200" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你使用的是Linux，这应该可以让你安装版本0.4.2的助手(你需要成为root用户):</p><pre class="kv kw kx ky fq kz jt la lb aw lc dt"><span id="726a" class="ju jv hu jt b fv ld le l lf lg">wget <a class="ae jp" href="https://github.com/docker/docker-credential-helpers/releases/download/v0.4.2/docker-credential-secretservice-v0.4.2-amd64.tar.gz" rel="noopener ugc nofollow" target="_blank">https://github.com/docker/docker-credential-helpers/releases/download/v0.4.2/docker-credential-secretservice-v0.4.2-amd64.tar.gz</a> &amp;&amp; tar -xf <a class="ae jp" href="https://github.com/docker/docker-credential-helpers/releases/download/v0.4.2/docker-credential-secretservice-v0.4.2-amd64.tar.gz" rel="noopener ugc nofollow" target="_blank">docker-credential-secretservice-v0.4.2-amd64.tar.gz</a> &amp;&amp; chmod +x docker-credential-secretservice &amp;&amp; mv docker-credential-secretservice /usr/local/bin/</span></pre><p id="4a0c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦完成，<strong class="it hv">打开</strong> <code class="eh jq jr js jt b"><strong class="it hv">~/.docker/config.json</strong></code> <strong class="it hv">并添加一个</strong> <code class="eh jq jr js jt b"><strong class="it hv">credsStore</strong></code>键到JSON对象的根。<strong class="it hv">值将是凭证存储服务</strong>的名称。这基本上是你刚刚安装的可执行文件的最后一个连字符后面的单词。对于Linux，可执行文件名为<code class="eh jq jr js jt b">docker-credential-secretservice</code>，所以服务名为<code class="eh jq jr js jt b">secretservice</code>。</p><p id="b8f8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你使用的是Linux并且相信我的技能，你可以试着运行</p><pre class="kv kw kx ky fq kz jt la lb aw lc dt"><span id="9781" class="ju jv hu jt b fv ld le l lf lg">sed -i '0,/{/s/{/{\n\t"credsStore": "secretservice",/' ~/.docker/config.json</span></pre><p id="2f5e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从现在开始，docker将使用外部服务来存储您的<code class="eh jq jr js jt b">docker login &lt;url&gt;</code>凭证。要删除文件中已经存在的内容，只需使用<code class="eh jq jr js jt b">docker logout &lt;url&gt;</code>。</p><p id="2cff" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">参考<br/></strong><a class="ae jp" href="https://docs.docker.com/engine/reference/commandline/login/#privileged-user-requirement" rel="noopener ugc nofollow" target="_blank">docker上的官方文档登录。</a></p><blockquote class="lh li lj"><p id="afbd" class="ir is ku it b iu iv iw ix iy iz ja jb lk jd je jf ll jh ji jj lm jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/Hackernoon" rel="noopener ugc nofollow" target="_blank">黑客中午</a>是黑客们下午的开始。我们是<a class="ae jp" href="http://bit.ly/atAMIatAMI" rel="noopener ugc nofollow" target="_blank"> @AMI </a>家庭的一员。我们现在<a class="ae jp" href="http://bit.ly/hackernoonsubmission" rel="noopener ugc nofollow" target="_blank">接受投稿</a>并乐意<a class="ae jp" href="mailto:partners@amipublications.com" rel="noopener ugc nofollow" target="_blank">讨论广告&amp;赞助</a>机会。</p><p id="dca4" class="ir is ku it b iu iv iw ix iy iz ja jb lk jd je jf ll jh ji jj lm jl jm jn jo hn dt translated">要了解更多信息，请<a class="ae jp" href="https://goo.gl/4ofytp" rel="noopener ugc nofollow" target="_blank">阅读我们的“关于”页面</a>、<a class="ae jp" href="http://bit.ly/HackernoonFB" rel="noopener ugc nofollow" target="_blank">在脸书上给我们点赞/发消息</a>，或者简单地说，<a class="ae jp" href="https://goo.gl/k7XYbx" rel="noopener ugc nofollow" target="_blank"> tweet/DM @HackerNoon。</a></p><p id="708a" class="ir is ku it b iu iv iw ix iy iz ja jb lk jd je jf ll jh ji jj lm jl jm jn jo hn dt translated">如果你喜欢这个故事，我们推荐你阅读我们的<a class="ae jp" href="http://bit.ly/hackernoonlatestt" rel="noopener ugc nofollow" target="_blank">最新科技故事</a>和<a class="ae jp" href="https://hackernoon.com/trending" rel="noopener ugc nofollow" target="_blank">趋势科技故事</a>。直到下一次，不要把世界的现实想当然！</p></blockquote><figure class="kv kw kx ky fq ln"><div class="bz el l di"><div class="lo lp l"/></div></figure></div></div>    
</body>
</html>